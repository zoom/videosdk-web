const e=Symbol("store"),t=Symbol("getState"),r=Symbol("dispatch"),o=Symbol("additionFeatures"),n=Symbol("mediaContext");function i(e,t,r){const o=document.createElement("script");o.type="text/javascript",o.readyState?o.onreadystatechange=()=>{"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,t())}:(o.onload=()=>{t()},o.onerror=()=>{r()}),o.src=e,window.crossOriginIsolated&&(o.crossOrigin="anonymous"),"function"==typeof document.body.append?document.getElementsByTagName("head")[0].append(o):document.getElementsByTagName("head")[0].appendChild(o)}function s(e,t){let r=e;/^https?:\/\//.test(r)||(r=`https://${e}`);try{const e=new URL(r);if(!t)return e.href;if(t.hostname)return e.hostname;if(t.path)return e.pathname}catch(e){return""}return""}function a(e){if(e){var t;const r=document.getElementById(e);null==r||null===(t=r.parentNode)||void 0===t||t.removeChild(r)}}function u(e,t){if(!e||"string"==typeof e)return!1;if(e.ownerDocument===window.document)return e instanceof t;{var r;const o=null===(r=e.ownerDocument)||void 0===r?void 0:r.defaultView;let n;return!!o&&("HTMLVideoElement"===t.name?n=o.HTMLVideoElement:"HTMLCanvasElement"===t.name?n=o.HTMLCanvasElement:"HTMLElement"===t.name&&(n=o.HTMLElement),!!n&&e instanceof n||e instanceof t)}}function d(e){return u(e,HTMLVideoElement)}function c(e){return u(e,HTMLCanvasElement)}function l(e,t){return Array.from(document.getElementsByTagName(t)).some((t=>t.contains(e)))}function p(e,t,r){const o=e.parentElement;if(!o)return null;const n=document.createElement("canvas");n.id=t,null==o||o.appendChild(n);let i=null;function s(){r&&r()}return"undefined"!=typeof ResizeObserver?(i=new ResizeObserver(s),i.observe(e),o&&i.observe(o)):window.addEventListener("resize",s),s(),n._overlayCleanup=function(){i?(i.unobserve(e),o&&i.unobserve(o),i.disconnect(),i=null):window.removeEventListener("resize",s),"function"==typeof n.remove?n.remove():o&&o.removeChild(n)},n}function h(e){var t;const r=e.getBoundingClientRect(),o=null===(t=e.parentElement)||void 0===t?void 0:t.getBoundingClientRect(),n=getComputedStyle(e),i=parseFloat(n.borderTopWidth)||0,s=parseFloat(n.borderLeftWidth)||0,a=s+(parseFloat(n.borderRightWidth)||0),u=i+(parseFloat(n.borderBottomWidth)||0),d=Math.max(e.width/(r.width-a),e.height/(r.height-u)),c={width:e.width/d,height:e.height/d},l=r.top-((null==o?void 0:o.top)||0),p=r.left-((null==o?void 0:o.left)||0);return{size:c,position:{top:`${l+((r.height-u-c.height)/2+i)}px`,left:`${p+((r.width-a-c.width)/2+s)}px`}}}let m="zoom.us";const g="4.1.0",S=`https://dmogdx0jrul3u.cloudfront.net/${g}/lib/av`,v=`https://source.zoom.us/${g}/lib/av`,f=`https://jssdk.zoomus.cn/${g}/lib/av`,y=()=>m;function E(e,t){const r=t.match(e);return r&&r.length>0&&r[1]||""}function _(e,t){const r=t.match(e);return r&&r.length>1&&r[2]||""}const I=/version\/(\d+(\.?_?\d+)+)/i,A=[{test:[/opera/i],describe:e=>["Opera(Legacy)",E(I,e)||E(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e)]},{test:[/opr\/|opios/i],describe:e=>["Opera",E(/(?:opr|opios)[\s/](\S+)/i,e)||E(I,e)]},{test:[/SamsungBrowser/i],describe:e=>["Samsung Internet for Android",E(I,e)||E(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e)]},{test:[/micromessenger/i],describe:e=>["WeChat",E(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||E(I,e)]},{test:[/qqbrowser/i],describe:e=>[/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser",E(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||E(I,e)]},{test:[/msie|trident/i],describe:e=>["Internet Explorer",E(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e)]},{test:[/\sedg\//i],describe:e=>["Microsoft Edge",E(/\sedg\/(\d+(\.?_?\d+)+)/i,e)]},{test:[/edg([ea]|ios)/i],describe:e=>["Microsoft Edge(Legacy)",_(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e)]},{test:[/firefox|iceweasel|fxios/i],describe:e=>["Firefox",E(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e)]},{test:[/electron/i],describe:e=>["Electron",E(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e)]},{test:[/chromium/i],describe:e=>["Chromium",E(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||E(I,e)]},{test:[/chrome|crios|crmo/i],describe:e=>["Chrome",E(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e)]},{test:e=>!/like android/i.test(e)&&/android/i.test(e),describe:e=>["Android Browser",E(I,e)]},{test:[/safari|applewebkit/i],describe:e=>["Safari",E(I,e)]}],b=[{test:e=>{const t=e.match(/OpenHarmony (\d+\.?\d*)/);return(null==t?void 0:t.length)&&Number(t[1])>=5},describe:e=>["HarmonyOS",E(/OpenHarmony (\d+\.?\d*)/i,e)]},{test:[/windows /i],describe:e=>["Windows",E(/Windows ((NT|XP)( \d\d?.\d)?)/i,e)]},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:e=>["iOS",_(/(Version\/)(\d[\d.]+)/,e)]},{test:[/macintosh/i],describe:e=>["macOS",E(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,".")]},{test:[/(ipod|iphone|ipad)/i],describe:e=>["iOS",E(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".")]},{test:e=>!/like android/i.test(e)&&/android/i.test(e),describe:e=>["Android",E(/android[\s/-](\d+(\.\d+)*)/i,e)]},{test:[/linux/i],describe:()=>["Linux"]},{test:[/CrOS/],describe:()=>["Chrome OS"]}],C=new class{constructor(){this._browser=void 0,this._os=void 0,this._browserVersion=void 0,this._osVersion=void 0,this._clientHintsData=void 0,this._mediaFeatureOptions=void 0,"userAgentData"in navigator&&navigator.userAgentData.getHighEntropyValues(["architecture","bitness","formFactor","model","platformVersion","wow64"]).then((e=>{this._clientHintsData=e,this._os&&this._osVersion&&this._clientHintsData.platform&&this._clientHintsData.platformVersion&&(this._os=this._clientHintsData.platform,this._osVersion=this._clientHintsData.platformVersion)})).catch((e=>{console.warn(e)}))}_getBrowserVersion(){var e;if(null!==(e=this._clientHintsData)&&void 0!==e&&null!==(e=e.brands)&&void 0!==e&&e.length){const e=this._clientHintsData.brands.filter((e=>!/(Chromium|Not.*Brand)/i.test(e.brand)))[0];e&&(this._browser=e.brand);const t=this._clientHintsData.brands.find((e=>{var t;return"chromium"===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}));t?(this._browserVersion=t.version,this._browser||(this._browser=t.brand)):this._browserVersion=e.version}else{const e=navigator.userAgent,t=A.find((t=>"function"==typeof t.test?t.test(e):t.test.some((t=>t.test(e)))));if(t){const r=t.describe(e);this._browser=r[0],this._browserVersion=r[1],this.isIOSMobile&&(this._browser="ios-safari")}else this._browser="unknown",this._browserVersion="0"}}_getOSVersion(){var e,t;if(null!==(e=this._clientHintsData)&&void 0!==e&&e.platform&&null!==(t=this._clientHintsData)&&void 0!==t&&t.platformVersion)this._os=this._clientHintsData.platform,this._osVersion=this._clientHintsData.platformVersion;else{const e=navigator.userAgent,t=b.find((t=>"function"==typeof t.test?t.test(e):t.test.some((t=>t.test(e)))));if(t){const r=t.describe(e);this._os=r[0],this._osVersion=r[1]}else this._os="unknown",this._osVersion="0"}}get browser(){return this._browser||this._getBrowserVersion(),this._browser}get browserVersion(){return this._browserVersion||this._getBrowserVersion(),this._browserVersion}get os(){return this._os||this._getOSVersion(),this._os}get osVersion(){return this._osVersion||this._getOSVersion(),this._osVersion}get isIE(){return"Internet Explorer"===this.browser}get isLegacyEdge(){return"Microsoft Edge(Legacy)"===this.browser}get isLegacyOpera(){return"Opera(Legacy)"===this.browser}get isFirefox(){return"Firefox"===this.browser}get isSafari(){return"Safari"===this.browser}get isChrome(){var e,t;if(null!==(e=this._clientHintsData)&&void 0!==e&&null!==(e=e.brands)&&void 0!==e&&e.length)return null===(t=this._clientHintsData)||void 0===t?void 0:t.brands.some((e=>{var t;return"chromium"===(null===(t=e.brand)||void 0===t?void 0:t.toLocaleLowerCase())}));const{userAgent:r}=navigator;return!this.isLegacyOpera&&!this.isLegacyEdge&&/chrome/i.test(r)&&/webkit/i.test(r)}get isLegacyChrome(){var e;return this.isChrome&&"function"!=typeof(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getDisplayMedia)}get isMacOS(){return"macOS"===this.os}get isIPad(){var e;return/iPad/i.test(navigator.userAgent)||this.isMacOS&&(null===(e=navigator)||void 0===e?void 0:e.maxTouchPoints)>2}get isHarmonyOS(){return"HarmonyOS"===this.os}get isIOSMobile(){return"iOS"===this.os||this.isIPad}get architecture(){var e,t;return null!==(e=null===(t=this._clientHintsData)||void 0===t?void 0:t.architecture)&&void 0!==e?e:""}get isArm(){return this.architecture?"arm"===this.architecture:/arm/i.test(navigator.userAgent)}get isChromeOS(){return"Chrome OS"===this.os}get isAndroidBrowser(){var e;return"android"===(null===(e=this.os)||void 0===e?void 0:e.toLowerCase())}get isArmChromeOS(){return this.isArm&&this.isChromeOS}get isAndroidOrIOSBrowser(){return this.isAndroidBrowser||this.isIOSMobile}get isSupportEssentialAudioAndVideoAbility(){return"object"==typeof WebAssembly&&"function"==typeof Worker}get isSupportAudioWorklet(){return"function"==typeof AudioWorklet}get isSupportImageCapture(){return"ImageCapture"in window}get isSupportMediaStreamTrackProcessor(){var e;return this._mediaFeatureOptions?!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||!e.isSupportMediaStreamTrackProcessor(this._mediaFeatureOptions)):"MediaStreamTrackProcessor"in window}get isSupportOffscreenCanvas(){var e;return null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e?void 0:e.isSupportOffscreenCanvas()}get gpu(){var e;return this.isSupportOffscreenCanvas?null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||null===(e=e.getGpuInfo())||void 0===e?void 0:e.renderInfo:""}get bitness(){var e,t;return null!==(e=null===(t=this._clientHintsData)||void 0===t?void 0:t.bitness)&&void 0!==e?e:""}get model(){var e,t;return null!==(e=null===(t=this._clientHintsData)||void 0===t?void 0:t.model)&&void 0!==e?e:""}get wow64(){var e;if("windows"===this.os.toLowerCase())return null===(e=this._clientHintsData)||void 0===e?void 0:e.wow64}get isSupportSendScreenSharing(){return"getDisplayMedia"in navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getDisplayMedia}get isSupportSharedArrayBuffer(){return"function"==typeof SharedArrayBuffer}get is32bitChrome(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||!e.is32bitBrowser())}get isSwiftShader(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||!e.isUsingSwiftShader())}set mediaFeatureOptions(e){this._mediaFeatureOptions=e}get isWeakRefSupported(){return"undefined"!=typeof WeakRef}};function T(){var e;return"webkit"in window&&!("chrome"in window)&&!(null===(e=window.webkit.messageHandlers)||void 0===e||!e.jsOCHelper)}function R(){var e;const{isAndroidBrowser:t,isIOSMobile:r,osVersion:o,browserVersion:n,isChrome:i,isFirefox:s,isSafari:a}=C;var u,d;if(r)return Number(null===(u=o.match(/^\d+/))||void 0===u?void 0:u[0])>=15;if(t)return Number(null===(d=o.match(/^\d+/))||void 0===d?void 0:d[0])>=10;const c=Number(null===(e=n.match(/^\d+/))||void 0===e?void 0:e[0]);return!!(i&&c>=69)||!!(a&&c>14)||!!(s&&c>=76)}function O(){const{isSupportAudioWorklet:e,isSupportEssentialAudioAndVideoAbility:t,isAndroidOrIOSBrowser:r,isSupportSendScreenSharing:o}=C,n=void 0!==navigator.mediaDevices&&(t&&e||r),i=t&&void 0!==navigator.mediaDevices&&void 0!==navigator.mediaCapabilities,s="function"==typeof"".replaceAll;return{audio:s&&n,video:s&&i,screen:s&&t&&o}}class D{constructor(e){this.instant=void 0,this.context=void 0,this.script=void 0,this.mic=void 0,this.instant=0,this.context=e,this.mic=null,this.script=e.createScriptProcessor(2048,1,1),this.script.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);let r,o=0;for(r=0;r<t.length;++r)o+=t[r]*t[r];this.instant=Math.sqrt(o/t.length)}}connectToSource(e){console.log("InputMicDetector is listening");try{var t;this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),null===(t=this.script)||void 0===t||t.connect(this.context.destination)}catch(e){console.error(e)}}stop(){var e,t;console.log("Audio Previewer stopped"),null===(e=this.mic)||void 0===e||e.disconnect(),this.mic=null,null===(t=this.script)||void 0===t||t.disconnect(),this.script=null}getMicVolume(){return this.instant}}const w="https://st1.zoom.us/web_client/4qu8baa/audio/ring.mp3";class N{constructor(){this.sampleAudio=void 0,this.audioCtx=void 0,this.destinationNode=void 0,this.audioPlayer=void 0,this.analyzserInterval=void 0,this.analyserNode=void 0,this.analyserNodeBufferDataArray=void 0,this.analyserCallback=void 0,this.sourceNode=void 0,this.mAudioStream=void 0,this.mSourceNode=void 0,this.mediaRecorder=void 0,this.isRecording=void 0,this.recorderChunks=[],this.recorderObjUrl=void 0,this.recorderPlayer=void 0,this.maximumRecordingTimer=void 0,this.shouldPlayAfterRecording=!0,this.isRunning=!1}testSpeaker(e){var t;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||!AudioContext.prototype.decodeAudioData)return void console.warn("Cannot test the speaker due to the browser capability");const{speakerId:r,sampleAudioUrl:o=w,onAnalyseFrequency:n}=e||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext(),((null===(t=this.sampleAudio)||void 0===t?void 0:t.url)===o&&this.sampleAudio.data?Promise.resolve(this.sampleAudio.data):window.fetch(o).then((e=>e.arrayBuffer())).then((e=>this.audioCtx.decodeAudioData(e))).then((e=>(this.sampleAudio={url:o,data:e},e)))).then((e=>{var t,o,i;this.sourceNode=this.audioCtx.createBufferSource(),this.sourceNode.buffer=e,this.sourceNode.loop=!0,r&&null!==(t=this.audioPlayer)&&void 0!==t&&t.setSinkId&&this.audioPlayer.setSinkId(r),n?"function"==typeof AudioContext.prototype.createAnalyser?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=n,this.initAnalyserNode(),this.analyserNode&&this.sourceNode.connect(this.analyserNode)):(this.sourceNode.connect(this.destinationNode),console.warn("Cannot analyze the stream due to the browser capability")):(this.analyserCallback=void 0,this.sourceNode.connect(this.destinationNode)),this.sourceNode.start(0),"running"!==(null===(o=this.audioCtx)||void 0===o?void 0:o.state)&&(null===(i=this.audioCtx)||void 0===i||i.resume()),this.audioPlayer&&(this.audioPlayer.muted=!1,this.audioPlayer.currentTime=0,this.audioPlayer.play())}));const i=()=>{this.isRunning=!1,this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.sourceNode&&(this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode.buffer=null,this.sourceNode=void 0)};return{stop:i,destroy:()=>{var e;i(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(e=this.audioCtx)||void 0===e||e.close(),this.audioCtx=void 0}}}testMicrophone(e){var t;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||"function"!=typeof AudioContext.prototype.createMediaStreamSource||"function"!=typeof(null===(t=navigator.mediaDevices)||void 0===t?void 0:t.getUserMedia))return void console.warn("Cannot test the microphone due to the browser capability");const{microphoneId:r,speakerId:o,recordAndPlay:n,maxRecordDuration:i,onAnalyseFrequency:s,onStartRecording:a,onStopRecording:u,onStartPlayRecording:d,onStopPlayRecording:c}=e||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext();const l=()=>{n&&this.mediaRecorder&&this.isRecording&&(this.shouldPlayAfterRecording=!0,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop())};window.navigator.mediaDevices.getUserMedia({audio:!r||{deviceId:{exact:r}}}).then((e=>{var t,r,p,h;this.mAudioStream=e,this.mSourceNode=null===(t=this.audioCtx)||void 0===t?void 0:t.createMediaStreamSource(e),this.audioPlayer.muted=!0,s?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=s,this.initAnalyserNode(),this.analyserNode&&(null===(p=this.mSourceNode)||void 0===p||p.connect(this.analyserNode))):this.analyserCallback=void 0,n&&("function"==typeof MediaRecorder?(this.recorderObjUrl&&window.URL.revokeObjectURL(this.recorderObjUrl),this.mediaRecorder=new MediaRecorder(this.mAudioStream),this.mediaRecorder.ondataavailable=e=>{e.data&&this.recorderChunks.push(e.data)},this.mediaRecorder.onstop=()=>{if(this.isRecording=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),null==u||u(),this.recorderChunks.length>0){var e;const t=new Blob(this.recorderChunks,{type:(null===(e=this.recorderChunks[0])||void 0===e?void 0:e.type)||"audio/ogg; codecs=opus"});this.recorderObjUrl=window.URL.createObjectURL(t),this.shouldPlayAfterRecording&&this.playRecording(this.recorderObjUrl,o,d,c).catch((e=>{this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),console.warn(e)})),this.recorderChunks=[],this.mediaRecorder&&(this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,this.mediaRecorder=void 0)}},this.mediaRecorder.start(),this.isRecording=!0,null==a||a(),this.maximumRecordingTimer=window.setTimeout((()=>{l()}),i||1e4)):console.warn("Cannot record the sound due to the browser capability")),"running"!==(null===(r=this.audioCtx)||void 0===r?void 0:r.state)&&(null===(h=this.audioCtx)||void 0===h||h.resume()),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.play())}));const p=()=>{this.isRunning=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.mSourceNode&&(s&&this.analyserNode&&this.mSourceNode.disconnect(this.analyserNode),this.mSourceNode=void 0),this.mAudioStream&&(this.mAudioStream.getAudioTracks().forEach((e=>{e.stop()})),this.mAudioStream=void 0),this.mediaRecorder&&(this.shouldPlayAfterRecording=!1,this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop(),this.isRecording=!1,this.mediaRecorder=void 0,this.recorderChunks=[]),this.recorderPlayer&&(this.recorderPlayer.currentTime=0,this.recorderPlayer.pause())};return{stop:p,stopRecording:l,destroy:()=>{var e;p(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(e=this.audioCtx)||void 0===e||e.close(),this.audioCtx=void 0}}}initAudioContext(){this.audioCtx&&this.audioPlayer||(this.audioCtx=new AudioContext,this.destinationNode=new MediaStreamAudioDestinationNode(this.audioCtx),this.audioPlayer=new Audio,this.audioPlayer.loop=!0,this.audioPlayer.srcObject=this.destinationNode.stream)}initAnalyserNode(){if(!this.audioCtx)return;this.analyserNode||(this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.connect(this.destinationNode),this.analyserNode.fftSize=1024);const e=this.analyserNode.frequencyBinCount;this.analyserNodeBufferDataArray=new Uint8Array(e),this.analyzserInterval=window.setInterval(this.audioAnalyserCallback.bind(this),20)}audioAnalyserCallback(){if(this.analyserNodeBufferDataArray&&this.analyserNode&&this.analyserCallback){this.analyserNode.getByteFrequencyData(this.analyserNodeBufferDataArray);let e=0;for(const t of this.analyserNodeBufferDataArray)e+=t;const t=e/this.analyserNodeBufferDataArray.length;this.analyserCallback(t)}}playRecording(e,t,r,o){this.recorderPlayer=new Audio,this.recorderPlayer.src=e,this.recorderPlayer.currentTime=0,this.recorderPlayer.setSinkId&&t&&this.recorderPlayer.setSinkId(t);const n=()=>{null==o||o(),this.recorderPlayer&&(this.recorderPlayer.onpause=null,this.recorderPlayer.onended=null,this.recorderPlayer=void 0,this.isRunning=!1)};return new Promise(((e,t)=>{this.recorderPlayer&&(this.recorderPlayer.onpause=()=>{e(!0)},this.recorderPlayer.onended=()=>{e(!0)},this.recorderPlayer.onerror=t,null==r||r(),this.recorderPlayer.play().catch(t))})).finally((()=>{window.URL.revokeObjectURL(e),n()}))}}const M="AudioNotStartedError";class P{constructor(e=""){this.audioContext=void 0,this.inputMicDetector=void 0,this.isMicUnmuted=void 0,this.isAudioStarted=void 0,this.audioStream=void 0,this.deviceId=void 0,this.tester=void 0,this.audioContext=null,this.inputMicDetector=null,this.isMicUnmuted=!1,this.isAudioStarted=!1,this.audioStream=null,this.deviceId=e,this.tester=new N}async start(){if(this.audioStream||this.isAudioStarted)throw new Error("AudioAlreadyStartedError");try{const e=await navigator.mediaDevices.getUserMedia(this.getAudioConstraints());this.audioStream=e,this.isAudioStarted=!0}catch(e){throw e}}async unmute(){if(!this.audioStream||!this.isAudioStarted)throw new Error(M);if(this.isMicUnmuted)throw new Error("AudioAlreadyUnmutedError");return this.toggleMicIsMuted(!0)}async mute(){if(!this.audioStream||!this.isAudioStarted)throw new Error(M);if(!this.isMicUnmuted)throw new Error("AudioAlreadyMutedError");return this.toggleMicIsMuted(!1)}getCurrentVolume(){return this.inputMicDetector?this.inputMicDetector.getMicVolume():0}async stop(){if(!this.audioStream||!this.isAudioStarted)throw new Error(M);this.audioStream.getAudioTracks().forEach((e=>e.stop())),this.audioStream=null,this.isAudioStarted=!1}async toggleMicIsMuted(e){if(e){if(!this.audioContext){const e=window.AudioContext||window.webkitAudioContext;this.audioContext=new e}this.inputMicDetector=new D(this.audioContext),this.inputMicDetector.connectToSource(this.audioStream)}else this.inputMicDetector&&this.inputMicDetector.stop(),this.inputMicDetector=null;this.isMicUnmuted=e}getAudioConstraints(){return{audio:""===this.deviceId||{deviceId:{exact:this.deviceId}},video:!1}}testSpeaker(e){return this.tester.testSpeaker(e)}testMicrophone(e){return this.tester.testMicrophone(e)}}let L=function(e){return e[e.InitSuccess=1]="InitSuccess",e[e.InitSuccessVideo=1.1]="InitSuccessVideo",e[e.InitSuccessAudio=1.2]="InitSuccessAudio",e[e.InitSuccessSharing=1.3]="InitSuccessSharing",e[e.UserGrantCaptureAudio=2]="UserGrantCaptureAudio",e[e.CurrentVideoResolution=3]="CurrentVideoResolution",e[e.JpegDecThreadOk=4]="JpegDecThreadOk",e[e.JpegData=5]="JpegData",e[e.SharingPara=6]="SharingPara",e[e.VideoDecodeMaxSize=7]="VideoDecodeMaxSize",e[e.CurrentCaptureVideoWidthHeight=8]="CurrentCaptureVideoWidthHeight",e[e.StartVideoCaptureSuccess=9]="StartVideoCaptureSuccess",e[e.StopVideoCaptureSuccess=10]="StopVideoCaptureSuccess",e[e.StartRemoteControlSuccess=11]="StartRemoteControlSuccess",e[e.CancelRemoteControlSuccess=12]="CancelRemoteControlSuccess",e[e.RemoteControlCopiedTextNotify=13]="RemoteControlCopiedTextNotify",e[e.MonitorLog=14]="MonitorLog",e[e.CurrentDesktopSharingWidthHeight=15]="CurrentDesktopSharingWidthHeight",e[e.DesktopSharingCaptureSuccess=16]="DesktopSharingCaptureSuccess",e[e.CheckChromeSharingExtensionResponse=17]="CheckChromeSharingExtensionResponse",e[e.SharingDecodeMaxSize=18]="SharingDecodeMaxSize",e[e.DataChannelOffer=19]="DataChannelOffer",e[e.AesGcmIvResponse=21]="AesGcmIvResponse",e[e.SharingDesktopStreamHaveAudio=23]="SharingDesktopStreamHaveAudio",e[e.JoinComputerAudioComplete=24]="JoinComputerAudioComplete",e[e.JoinSharingAudioComplete=25]="JoinSharingAudioComplete",e[e.LeaveComputerAudioComplete=26]="LeaveComputerAudioComplete",e[e.LeaveSharingAudioComplete=27]="LeaveSharingAudioComplete",e[e.HidStatusMute=28]="HidStatusMute",e[e.AudioStreamFailed=31]="AudioStreamFailed",e[e.VideoStreamFailed=32]="VideoStreamFailed",e[e.AudioSpeakerSetSuccess=33]="AudioSpeakerSetSuccess",e[e.AudiobridgeSetCcLangSuccess=36]="AudiobridgeSetCcLangSuccess",e[e.AudioLevelIndicator=38]="AudioLevelIndicator",e[e.SyncRendererTypeResponse=39]="SyncRendererTypeResponse",e[e.SendRemoteControlQrCode=55]="SendRemoteControlQrCode",e[e.StartVideoStreamInMaskSettingSuccess=66]="StartVideoStreamInMaskSettingSuccess",e[e.CurrentDecodeVideoQuality=66.5]="CurrentDecodeVideoQuality",e[e.CurrentDecodeVideoFps=66.6]="CurrentDecodeVideoFps",e[e.SharingFirstDecodeFrameReceivedSsrc=70]="SharingFirstDecodeFrameReceivedSsrc",e[e.StartVideoStreamInVbSettingSuccess=94]="StartVideoStreamInVbSettingSuccess",e[e.VbModelPreloading_3S=96]="VbModelPreloading_3S",e[e.VbModelPreloading_10S=97]="VbModelPreloading_10S",e[e.VbModelPreloadingOk=98]="VbModelPreloadingOk",e[e.NewActiveSpeakerFirstFrameCallback=111]="NewActiveSpeakerFirstFrameCallback",e[e.AudioBridgeFirstRecvData=114]="AudioBridgeFirstRecvData",e[e.AudioBridgeCanSendData=115]="AudioBridgeCanSendData",e[e.SpeakingWhenMute=121]="SpeakingWhenMute",e[e.StartAnnotationSuccess=158]="StartAnnotationSuccess",e[e.DeviceChangeEvent=159]="DeviceChangeEvent",e[e.RecaptureAudio=160]="RecaptureAudio",e[e.MediaStatsLog=209]="MediaStatsLog",e[e.InitFailed=-1]="InitFailed",e[e.InitFailedVideo=-1.1]="InitFailedVideo",e[e.InitFailedAudio=-1.2]="InitFailedAudio",e[e.InitFailedSharing=-1.3]="InitFailedSharing",e[e.AudioCaptureFailed=-2]="AudioCaptureFailed",e[e.AudioWebsocketBroken=-3]="AudioWebsocketBroken",e[e.VideoWebsocketBroken=-4]="VideoWebsocketBroken",e[e.SharingDecThreadFailed=-5]="SharingDecThreadFailed",e[e.AudioZeroData=-6]="AudioZeroData",e[e.AudioCtxSamplerate=-7]="AudioCtxSamplerate",e[e.UserForbiddedCaptureVideo=-8]="UserForbiddedCaptureVideo",e[e.UserCameraIsTakenByOtherPrograms=-9]="UserCameraIsTakenByOtherPrograms",e[e.StopVideoCaptureFailed=-10]="StopVideoCaptureFailed",e[e.StartRemoteControlFailed=-11]="StartRemoteControlFailed",e[e.CancelRemoteControlFailed=-12]="CancelRemoteControlFailed",e[e.RemoteControlPasteTextLengthOverflow=-14]="RemoteControlPasteTextLengthOverflow",e[e.UserStopDesktopSharing=-15]="UserStopDesktopSharing",e[e.UserCancelPermissionRequest=-16]="UserCancelPermissionRequest",e[e.DesktopSharingChromeExtensionUninstalled=-17]="DesktopSharingChromeExtensionUninstalled",e[e.DesktopSharingPermissionDenied=-18]="DesktopSharingPermissionDenied",e[e.DesktopSharingTimeOut=-19]="DesktopSharingTimeOut",e[e.DesktopSharingError=-20]="DesktopSharingError",e[e.AudioSpeakerSetError=-21]="AudioSpeakerSetError",e[e.DesktopSharingSystemError=-22]="DesktopSharingSystemError",e[e.SharingDesktopStreamHaveNoAudio=-27]="SharingDesktopStreamHaveNoAudio",e[e.AudioBridgeSocketConnectionError=-28]="AudioBridgeSocketConnectionError",e[e.AudioBridgeReconnectStart=-29]="AudioBridgeReconnectStart",e[e.AudioBridgeReconnectEnd=-31]="AudioBridgeReconnectEnd",e[e.WebglLostInMultiView=-32]="WebglLostInMultiView",e[e.MaskSettingParaError=-33]="MaskSettingParaError",e[e.VbSettingParaError=-34]="VbSettingParaError",e[e.NotifyUIFailover=-35]="NotifyUIFailover",e[e.AudiobridgeSetCcLangFailure=-39]="AudiobridgeSetCcLangFailure",e[e.NotifyUIWMSCFailover=-42]="NotifyUIWMSCFailover",e[e.NotifyUIWMSCWSSDisconnected=-43]="NotifyUIWMSCWSSDisconnected",e[e.RecoverWebrtcAudio=-44]="RecoverWebrtcAudio",e[e.WebglContextInvalid=-51]="WebglContextInvalid",e[e.WasmMemoryFail=-52]="WasmMemoryFail",e[e.WorkletProcessExceptions=-53]="WorkletProcessExceptions",e[e.NotSupportExternalCanvasInVTagRenderer=-55]="NotSupportExternalCanvasInVTagRenderer",e[e.HealthCheckFailed=-129]="HealthCheckFailed",e[e.StartAnnotationFailed=-130]="StartAnnotationFailed",e.AudioQosData="AUDIO_QOS_DATA",e.VideoQosData="VIDEO_QOS_DATA",e.ShareQosData="VIDEOSHARE_QOS_DATA",e.CommonQosData="COMMON_QOS_DATA",e.NetworkQualityChange="NETWORK_QUALITY_CHANGE",e.NetworkQualityChangeAudio="NETWORK_QUALITY_CHANGE_AUDIO",e.NetworkQualityChangeSharing="NETWORK_QUALITY_CHANGE_SHARING",e.AudioStreamMuted="AUDIO_STREAM_MUTED",e.AudioStreamUnmuted="AUDIO_STREAM_UNMUTED",e.AnnotationRedoStatus="ANNO_REDO_STATUS",e.AnnotationUndoStatus="ANNO_UNDO_STATUS",e.AnnoViewerRequestDraw="ANNO_VIEWER_REQUEST_DRAW",e[e.WHITEBOARD_SUCCESS=30]="WHITEBOARD_SUCCESS",e.VideoStreamMuted="VIDEO_STREAM_MUTED",e.VideoStreamUnmuted="VIDEO_STREAM_UNMUTED",e}({}),k=function(e){return e[e.EncodeSuccess=1]="EncodeSuccess",e[e.DecodeSuccess=2]="DecodeSuccess",e[e.EncodeFailed=-1]="EncodeFailed",e[e.DecodeFailed=-2]="DecodeFailed",e}({}),U=function(e){return e.Spotlight="Spotlight",e.Unmute="Unmute",e.AllowToTalk="Allow to talk",e}({}),V=function(e){return e.Inherited="inherited",e.Active="active",e.PassiveByMuteOne="passive(mute one)",e.PassiveByMuteAll="passive(mute all)",e.SharingAudio="sharing audio",e}({}),B=function(e){return e.Inherited="inherited",e.Active="active",e.Passive="passive",e.SharingAudio="sharing audio",e}({}),H=function(e){return e.Active="active",e.Failover="failover",e.EndedBySystem="audio stream is ended by system",e.Pstn="pstn",e.MicrophoneError="microphone error",e}({}),j=function(e){return e.Join="join",e.Leave="leave",e.Muted="muted",e.Unmuted="unmuted",e}({}),F=function(e){return e[e.Calling=1]="Calling",e[e.Ringing=2]="Ringing",e[e.Accepted=3]="Accepted",e[e.Busy=4]="Busy",e[e.NotAvailable=5]="NotAvailable",e[e.HangUp=6]="HangUp",e[e.Fail=7]="Fail",e[e.Success=8]="Success",e[e.Timeout=9]="Timeout",e[e.Canceling=10]="Canceling",e[e.Canceled=11]="Canceled",e[e.CancelFailed=12]="CancelFailed",e[e.NoAnswer=13]="NoAnswer",e[e.BlockNoHost=14]="BlockNoHost",e[e.BlockHighRate=15]="BlockHighRate",e[e.BlockTooFrequent=16]="BlockTooFrequent",e}({});const W=(()=>{const e=new ArrayBuffer(684),t=new Uint32Array(e);return t.set([1179011410,676,1163280727,544501094,16,65539,16e3,64e3,2097156,1635017060,640],0),new Blob([t],{type:"audio/wav"})})(),x=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]),$=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);let G=function(e){return e[e.HostGrab=0]="HostGrab",e[e.OnlyHost=1]="OnlyHost",e[e.AnyoneGrab=2]="AnyoneGrab",e[e.MultipleShare=3]="MultipleShare",e}({}),z=function(e){return e.Sharing="sharing",e.Paused="paused",e.End="ended",e}({}),q=function(e){return e[e.Video_90P=0]="Video_90P",e[e.Video_180P=1]="Video_180P",e[e.Video_360P=2]="Video_360P",e[e.Video_720P=3]="Video_720P",e[e.Video_1080P=4]="Video_1080P",e}({}),K=function(e){return e.Active="Active",e.Inactive="Inactive",e}({}),J=function(e){return e.Muted="Muted",e.Unmuted="Unmuted",e}({}),Q=function(e){return e.Started="Started",e.Stopped="Stopped",e.Failed="Failed",e}({}),Y=function(e){return e.Approved="Approved",e.Rejected="Rejected",e}({}),Z=function(e){return e.PrivilegeChange="PrivilegeChange",e.StopScreenCapture="StopScreenCapture",e.ShareFromMainSession="ShareFromMainSession",e.StopCameraCapture="StopCameraCapture",e}({}),X=function(e){return e[e.ImageNotMatch=2]="ImageNotMatch",e[e.CanvasNotMatch=3]="CanvasNotMatch",e[e.VBModelNotMatch=4]="VBModelNotMatch",e}({});const ee="blur";let te=function(e){return e.User="user",e.Environment="environment",e.Left="left",e.Right="right",e}({});const re=Object.values(te),oe=1e3,ne="__ZOOM_SDK_SHARING_VIDEO__",ie="__ZOOM_SDK_ANNOTATION_CANVAS_@__",se="__ZOOM_SDK_VIDEO_ZONE__",ae="__ZOOM_SDK_MEDIA_PLAYBACK_SOURCE_VIDEO__",ue="__ZOOM_SDK_DYMMY_VIDEO_PLAYER_CANVAS_ID__",de="__ZOOM_SDK_DUMMY_HIDDEN_SELF_VIEW_VIDEO_ID__",ce={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,rate:0,bandwidth:0}},le={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,rate:0,bandwidth:0}};let pe=function(e){return e[e.Request=11]="Request",e[e.Decline=12]="Decline",e[e.Approve=13]="Approve",e[e.GiveUp=14]="GiveUp",e[e.StartControl=15]="StartControl",e[e.ContinueControl=16]="ContinueControl",e[e.StopControl=17]="StopControl",e[e.SwitchCamera=20]="SwitchCamera",e}({}),he=function(e){return e[e.Bk=0]="Bk",e[e.Center=1]="Center",e[e.ZoomIn=2]="ZoomIn",e[e.ZoomOut=3]="ZoomOut",e[e.Left=4]="Left",e[e.Right=5]="Right",e[e.Up=6]="Up",e[e.Down=7]="Down",e[e.SwitchCamera=8]="SwitchCamera",e}({}),me=function(e){return e[e.Pan=192]="Pan",e[e.Tilt=48]="Tilt",e[e.Zoom=12]="Zoom",e[e.Focus=3]="Focus",e}({}),ge=function(e){return e[e.ZoomIn=2]="ZoomIn",e[e.ZoomOut=3]="ZoomOut",e[e.Left=4]="Left",e[e.Right=5]="Right",e[e.Up=6]="Up",e[e.Down=7]="Down",e[e.SwitchCamera=8]="SwitchCamera",e}({}),Se=function(e){return e[e.None=0]="None",e[e.ApproveAnother=3]="ApproveAnother",e[e.Stop=5]="Stop",e}({}),ve=function(e){return e[e.Null=0]="Null",e[e.Normal=1]="Normal",e[e.VideoMode=2]="VideoMode",e[e.CameraMode=3]="CameraMode",e}({}),fe=function(e){return e[e.Null=0]="Null",e[e.VirtualBackground=1]="VirtualBackground",e[e.Mask=2]="Mask",e[e.VideoProcessor=3]="VideoProcessor",e}({}),ye=function(e){return e.Computer="computer",e.Phone="phone",e}({}),Ee=function(e){return e[e.Decline=0]="Decline",e[e.Approve=1]="Approve",e[e.CacheClean=2]="CacheClean",e}({}),_e=function(e){return e.Unknown="unknown",e.Uninstalled="uninstalled",e.Installed="installed",e}({}),Ie=function(e){return e.Unlaunched="unlaunched",e.Launched="launched",e}({}),Ae=function(e){return e.Started="started",e.Ended="ended",e}({}),be=function(e){return e[e.Max=30]="Max",e[e.Min=10]="Min",e[e.Default=24]="Default",e}({}),Ce=function(e){return e[e.Loading=1]="Loading",e[e.Done=2]="Done",e}({}),Te=function(e){return e.Browser="Browser",e.Zoom="Zoom",e}({}),Re=function(e){return e.Denoise="backgroundNoiseSuppression",e.OriginalSound="originalSound",e}({}),Oe=function(e){return e[e.Undefined=0]="Undefined",e[e.WebGL=1]="WebGL",e[e.WebGPU=2]="WebGPU",e[e.WebGL2=3]="WebGL2",e}({}),De=function(e){return e[e.H323=1]="H323",e[e.SIP=2]="SIP",e}({}),we=function(e){return e[e.Success=0]="Success",e[e.Ringing=1]="Ringing",e[e.Timeout=2]="Timeout",e[e.Busy=101]="Busy",e[e.Fail=104]="Fail",e}({}),Ne=function(e){return e[e.Exception=-1]="Exception",e[e.PermissionReset=-2]="PermissionReset",e[e.LostAccess=-3]="LostAccess",e}({}),Me=function(e){return e[e.AudioConnectionFailed=101]="AudioConnectionFailed",e[e.AudioStreamEnded=102]="AudioStreamEnded",e[e.MicrophonePermissionReset=103]="MicrophonePermissionReset",e[e.AudioStreamFailed=104]="AudioStreamFailed",e[e.MicrophoneMuted=105]="MicrophoneMuted",e[e.AudioStreamMuted=106]="AudioStreamMuted",e[e.AudioPlaybackInterrupted=107]="AudioPlaybackInterrupted",e[e.VideoConnectionFailed=201]="VideoConnectionFailed",e[e.VideoStreamEnded=202]="VideoStreamEnded",e[e.CameraPermissionReset=203]="CameraPermissionReset",e[e.WebGlContextInvalid=204]="WebGlContextInvalid",e[e.WasmOutOfMemory=205]="WasmOutOfMemory",e[e.VideoStreamFailed=206]="VideoStreamFailed",e[e.VideoStreamMuted=207]="VideoStreamMuted",e[e.SharingStreamFailed=301]="SharingStreamFailed",e}({}),Pe=function(e){return e[e.NoFallback=0]="NoFallback",e[e.FallbackToWasm=1]="FallbackToWasm",e}({}),Le=function(e){return e[e.WebRTCAudio=1]="WebRTCAudio",e[e.WebRTCVideo=2]="WebRTCVideo",e}({}),ke=function(e){return e[e.WebRTCAudio=1]="WebRTCAudio",e[e.WebRTCAudio2=2]="WebRTCAudio2",e}({}),Ue=function(e){return e[e.BROWSER_NOT_SUPPORTED=-3]="BROWSER_NOT_SUPPORTED",e[e.DEVICE_UNSUPPORTED=-4]="DEVICE_UNSUPPORTED",e[e.OTHER_ERROR=-7]="OTHER_ERROR",e[e.DEVICE_UNVERIFIED=-8]="DEVICE_UNVERIFIED",e[e.FEATURE_DISABLED=-9]="FEATURE_DISABLED",e[e.FORCE_SAME_AV_STRATEGY=-10]="FORCE_SAME_AV_STRATEGY",e}({});const Ve={[Ue.BROWSER_NOT_SUPPORTED]:"Your browser does not support WebRTC Video.",[Ue.DEVICE_UNSUPPORTED]:"WebRTC video cannot currently run on this environment. We are evaluating support for it in the future.",[Ue.OTHER_ERROR]:"An error occurred with WebRTC video.",[Ue.DEVICE_UNVERIFIED]:"WebRTC video has not been verified in this environment. We are evaluating it for future support.",[Ue.FEATURE_DISABLED]:"We disabled WebRTC video for this environment.",[Ue.FORCE_SAME_AV_STRATEGY]:"The same AV strategy is forced."};let Be=function(e){return e[e.SELECT_MOUSE=0]="SELECT_MOUSE",e[e.SELECT_TOOL=1]="SELECT_TOOL",e[e.SELECT_ERASER=2]="SELECT_ERASER",e[e.UNDO=3]="UNDO",e[e.REDO=4]="REDO",e[e.CLEAR=5]="CLEAR",e[e.CLOSE_TOOL_BAR=6]="CLOSE_TOOL_BAR",e[e.UPDATE_PARAMS=7]="UPDATE_PARAMS",e[e.PAUSE_ANNOTATION=8]="PAUSE_ANNOTATION",e[e.SHOW_ANNOTATOR_NAME=9]="SHOW_ANNOTATOR_NAME",e[e.ANNOTATOR_ID_TO_NAME=10]="ANNOTATOR_ID_TO_NAME",e[e.ANNO_CANVAS_SIZE_UPDATE=11]="ANNO_CANVAS_SIZE_UPDATE",e[e.STAMP=12]="STAMP",e[e.SPOTLIGHT=13]="SPOTLIGHT",e[e.TEXTBOX=14]="TEXTBOX",e[e.SELECT_OBJ=15]="SELECT_OBJ",e[e.UPDATE_REMOTE_POSITION_INFO=16]="UPDATE_REMOTE_POSITION_INFO",e[e.UPDATE_VANISHING_TOOL_TIME=17]="UPDATE_VANISHING_TOOL_TIME",e}({}),He=function(e){return e[e.Mine=0]="Mine",e[e.Viewer=1]="Viewer",e[e.All=2]="All",e}({}),je=function(e){return e[e.None=0]="None",e[e.Pen=1]="Pen",e[e.Highlighter=2]="Highlighter",e[e.Spotlight=3]="Spotlight",e[e.Arrow=4]="Arrow",e[e.Eraser=7]="Eraser",e[e.Line=11]="Line",e[e.Arrow1=12]="Arrow1",e[e.Rectangle=14]="Rectangle",e[e.RectangleSemiFill=15]="RectangleSemiFill",e[e.Ellipse=18]="Ellipse",e[e.EllipseSemiFill=19]="EllipseSemiFill",e[e.DoubleArrow=20]="DoubleArrow",e[e.RectangleFill=21]="RectangleFill",e[e.EllipseFill=23]="EllipseFill",e[e.Diamond=24]="Diamond",e[e.StampArrow=25]="StampArrow",e[e.StampCheck=26]="StampCheck",e[e.StampX=27]="StampX",e[e.StampStar=31]="StampStar",e[e.StampHeart=32]="StampHeart",e[e.StampQuestionMark=33]="StampQuestionMark",e[e.VanishingPen=36]="VanishingPen",e[e.DiamondSemiFill=37]="DiamondSemiFill",e[e.DiamondFill=38]="DiamondFill",e[e.VanishingArrow=43]="VanishingArrow",e[e.VanishingDoubleArrow=44]="VanishingDoubleArrow",e[e.VanishingDiamond=45]="VanishingDiamond",e[e.VanishingEllipse=46]="VanishingEllipse",e[e.VanishingRectangle=47]="VanishingRectangle",e}({}),Fe=function(e){return e[e.White=4294967295]="White",e[e.Red=4294908185]="Red",e[e.Yellow=4294958642]="Yellow",e[e.Green=4286760838]="Green",e[e.Blue=4281240831]="Blue",e[e.LightPurple=4290017791]="LightPurple",e[e.Pink=4294916295]="Pink",e[e.Orange=4294937088]="Orange",e[e.LimeTreeGreen=4283029022]="LimeTreeGreen",e[e.IceBlue=4283554027]="IceBlue",e[e.DarkGrey=4278190080]="DarkGrey",e[e.DarkRed=4286513152]="DarkRed",e[e.Brown=4286006280]="Brown",e[e.DarkGreen=4278940200]="DarkGreen",e[e.DarkBlue=4279521219]="DarkBlue",e}({}),We=function(e){return e[e.Nominal=0]="Nominal",e[e.Fair=1]="Fair",e[e.Serious=2]="Serious",e[e.Critical=3]="Critical",e}({}),xe=function(e){return e.FrontCamera="frontCam",e.RearCamera="rearCam",e}({}),$e=function(e){return e[e.Success=0]="Success",e[e.Failed=1]="Failed",e}({});const Ge=152,ze=[{name:"audio_simd.min.js",category:"audio",type:"worker",tag:"simd",alias:"audioSIMDWorkletPath"},{name:"audio.simd.wasm",category:"audio",type:"wasm",tag:"simd",alias:"audioSIMDWasm"},{name:"js_audio_process.min.js",category:"audio",type:"worker",tag:"",alias:"audioWorkerPath"},{name:"audio.encode.wasm",category:"audio",type:"wasm",tag:"",alias:"audioWasm"},{name:"js_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletPath"},{name:"js_audio_worklet_simd.min.js",category:"audio",type:"worklet",tag:"simd",alias:"audioWorkletSIMDPath"},{name:"js_audio_worklet_process.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletProcessPath"},{name:"js_sharing_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"sharingAudioWorkletPath"},{name:"js_audio_level_worklet_process.min.js",category:"audio",type:"worklet",tag:"",alias:"audioLevelWorkletPath"},{name:"video_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"videoMSIMDWorkerPath"},{name:"video.mtsimd.wasm",category:"video",type:"wasm",tag:"simd,thread,videoShare",alias:"videoMSIMDWasm"},{name:"video_m.min.js",category:"video",type:"worker",tag:"thread",alias:"videoMtWorkerPath"},{name:"video.mt.wasm",category:"video",type:"wasm",tag:"thread",alias:"videoMtWasm"},{name:"video_simd.min.js",category:"video",type:"worker",tag:"simd",alias:"videoSIMDWorkerPath"},{name:"video.simd.wasm",category:"video",type:"wasm",tag:"simd",alias:"videoSIMDWasm"},{name:"video_s.min.js",category:"video",type:"worker",tag:"",alias:"videoWorkerPath"},{name:"video.decode.wasm",category:"video",type:"wasm",tag:"",alias:"videoWasm"},{name:"video_share_mtsimd.min.js",category:"video",type:"worker",tag:"videoShare",alias:"vsmiworkerpath"},{name:"sharing_mtsimd.min.js",category:"sharing",type:"worker",tag:"simd,thread",alias:"sharingMSIMDWorkerPath"},{name:"sharing_m.min.js",category:"sharing",type:"worker",tag:"thread",alias:"sharingMtWorkerPath"},{name:"sharing_simd.min.js",category:"sharing",type:"worker",tag:"simd",alias:"sharingSIMDWorkerPath"},{name:"sharing_s.min.js",category:"sharing",type:"worker",tag:"",alias:"sharingWorkerPath"},{name:"net_thread.min.js",category:"common",type:"worker",tag:"thread",alias:"netThreadPath"}];class qe{constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.mediaWorkersPath=void 0,this.mediaOptions=void 0,this.inProgress=void 0,this.callbackList=[]}static getInstance(){return void 0===this.agentInstance&&(this.agentInstance=new qe),this.agentInstance}static isSupportMultipleView(){var e;return null===(e=window.JsMediaSDK_Instance)||void 0===e?void 0:e.util.isSupportMultiViewAPI()}static getMaxCountRender(e,t,r){var o;const n=r?{disableRenderLimits:!0}:t;return null===(o=window.JsMediaSDK_Instance)||void 0===o?void 0:o.util.getMaxCountRender(e,n)}static initVideoPlayer(e){var t;return null===(t=window.JsMediaSDK_Instance)||void 0===t?void 0:t.initVideoPlayer(e)}init(e,t,r){var o,n,i,s;!this.instance&&window.JsMediaSDK_Instance&&(this.instance=new window.JsMediaSDK_Instance({...null!=t?t:{},mediaSDKConfig:{mediaSDKCDNPath:e}})),this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this),this.mediaOptions=t,null===(o=this.instance)||void 0===o||o.setProps({callback:this.onMediaSDKCallback,isPreviewMode:!0,meetingParams:{cid:"",userId:0,rwgHost:"",nginxHost:"",abToken:"",confId:"",e2eEncrypt:!0,enableWebtransport:!1,webtransportPort:0,rwgToMediaSDKConfig:{},webrtcMode:0},mediaParams:{videoDecodeThreadNum:null!==(n=qe.getMaxCountRender(!1,null===(i=this.mediaOptions)||void 0===i?void 0:i.enableMultiDecodeVideoWithoutSAB,r))&&void 0!==n?n:1,rendererType:1,isEnableHD:!0,isEnableHW:!0}}),null===(s=this.instance)||void 0===s||s.initVideoEncode(),this.inProgress=!0}onMediaSDKCallback(e,t){this.callbackList.length>0&&this.callbackList.forEach((r=>r(e,t)))}registerCallback(e){this.callbackList.push(e)}unregisterCallback(e){this.callbackList=this.callbackList.filter((t=>t!==e))}async destroy(){var e;this.callbackList=[],await(null===(e=this.instance)||void 0===e?void 0:e.destroy()),this.instance=null,this.inProgress=!1}disconnect(){var e,t;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(17,{}),null===(t=this.instance)||void 0===t||t.JsMediaSDK_UnInit()}startVirtualBackgroundSetting(e,t,r,o,n,i,s=!1,a){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(91,{canvas:e,bgdom:t,width:n,height:i,ssid:0,VideoSelectValue:"default"===o?null:o,disableOriginalRatio:s,usingFacingMode:["user","environment"].includes(o),id:a})}updateVirtualBackgroundImage(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(92,{bgdom:e})}stopVirtualBackgroundSetting(e=!1){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(93,{isSwitch:e})}startMaskSetting(e,t,r,o,n,i,s,a,u){var d;null===(d=this.instance)||void 0===d||d.Notify_MeidaSDK(62,{canvas:e,maskdom:null,bgdom:null,dx:0,dy:0,dWidth:170,dHeight:170,width:1280,height:720,ssid:0,originWidth:379,originHeight:213,VideoSelectValue:"default"===n?null:n,usingFacingMode:["user","environment"].includes(n)})}stopMaskSetting(e=!1){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(65,{isSwitch:e})}}qe.agentInstance=void 0;const Ke="INVALID_OPERATION",Je="INTERNAL_ERROR",Qe="OPERATION_TIMEOUT",Ye="INSUFFICIENT_PRIVILEGES",Ze="IMPROPER_MEETING_STATE",Xe="INVALID_PARAMETERS",et="OPERATION_CANCELLED";var tt=function(e,t){return tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},tt(e,t)};function rt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}tt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var ot=function(){return ot=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},ot.apply(this,arguments)};function nt(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function it(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function st(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s}function at(e,t){for(var r=0,o=t.length,n=e.length;r<o;r++,n++)e[n]=t[r];return e}function ut(e){return this instanceof ut?(this.v=e,this):new ut(e)}function dt(e){return"function"==typeof e}function ct(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var lt=ct((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function pt(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var ht=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,o,n;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var s=it(i),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else i.remove(this);var u=this.initialTeardown;if(dt(u))try{u()}catch(e){n=e instanceof lt?e.errors:[e]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var c=it(d),l=c.next();!l.done;l=c.next()){var p=l.value;try{St(p)}catch(e){n=null!=n?n:[],e instanceof lt?n=at(at([],st(n)),st(e.errors)):n.push(e)}}}catch(e){r={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}}if(n)throw new lt(n)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)St(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&pt(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&pt(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),mt=ht.EMPTY;function gt(e){return e instanceof ht||e&&"closed"in e&&dt(e.remove)&&dt(e.add)&&dt(e.unsubscribe)}function St(e){dt(e)?e():e.unsubscribe()}var vt=void 0;function ft(e){!function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];setTimeout.apply(void 0,at([e,t],st(r)))}((function(){throw e}))}function yt(){}function Et(e){e()}var _t=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,gt(t)&&t.add(r)):r.destination=Ct,r}return rt(t,e),t.create=function(e,t,r){return new At(e,t,r)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(ht),It=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){bt(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){bt(e)}else bt(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){bt(e)}},e}(),At=function(e){function t(t,r,o){var n,i=e.call(this)||this;return n=dt(t)||!t?{next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=o?o:void 0}:t,i.destination=new It(n),i}return rt(t,e),t}(_t);function bt(e){ft(e)}var Ct={closed:!0,next:yt,error:function(e){throw e},complete:yt},Tt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Rt(e){return e}function Ot(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Dt(e)}function Dt(e){return 0===e.length?Rt:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var wt=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var o,n=this,i=(o=e)&&o instanceof _t||function(e){return e&&dt(e.next)&&dt(e.error)&&dt(e.complete)}(o)&&gt(o)?e:new At(e,t,r);return Et((function(){var e=n,t=e.operator,r=e.source;i.add(t?t.call(i,r):r?n._subscribe(i):n._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=Nt(t))((function(t,o){var n=new At({next:function(t){try{e(t)}catch(e){o(e),n.unsubscribe()}},error:o,complete:t});r.subscribe(n)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Tt]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Dt(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Nt(e))((function(e,r){var o;t.subscribe((function(e){return o=e}),(function(e){return r(e)}),(function(){return e(o)}))}))},e.create=function(t){return new e(t)},e}();function Nt(e){var t;return null!==(t=null!=e?e:vt)&&void 0!==t?t:Promise}function Mt(e){return function(t){if(function(e){return dt(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Pt(e,t,r,o,n){return new kt(e,t,r,o,n)}var Lt,kt=function(e){function t(t,r,o,n,i,s){var a=e.call(this,t)||this;return a.onFinalize=i,a.shouldUnsubscribe=s,a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=n?function(e){try{n(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=o?function(){try{o()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return rt(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(_t),Ut=ct((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Vt=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return rt(t,e),t.prototype.lift=function(e){var t=new Bt(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Ut},t.prototype.next=function(e){var t=this;Et((function(){var r,o;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var n=it(t.currentObservers),i=n.next();!i.done;i=n.next())i.value.next(e)}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}}}))},t.prototype.error=function(e){var t=this;Et((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}}))},t.prototype.complete=function(){var e=this;Et((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this,o=r.hasError,n=r.isStopped,i=r.observers;return o||n?mt:(this.currentObservers=null,i.push(e),new ht((function(){t.currentObservers=null,pt(i,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,o=t.thrownError,n=t.isStopped;r?e.error(o):n&&e.complete()},t.prototype.asObservable=function(){var e=new wt;return e.source=this,e},t.create=function(e,t){return new Bt(e,t)},t}(wt),Bt=function(e){function t(t,r){var o=e.call(this)||this;return o.destination=t,o.source=r,o}return rt(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:mt},t}(Vt),Ht=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return rt(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){var e=this,t=e.hasError,r=e.thrownError,o=e._value;if(t)throw r;return this._throwIfClosed(),o},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Vt),jt=function(){return Date.now()},Ft=function(e){function t(t,r){return e.call(this)||this}return rt(t,e),t.prototype.schedule=function(e,t){return this},t}(ht),Wt=function(e){function t(t,r){var o=e.call(this,t,r)||this;return o.scheduler=t,o.work=r,o.pending=!1,o}return rt(t,e),t.prototype.schedule=function(e,t){var r;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var o=this.id,n=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(n,o,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return setInterval.apply(void 0,at([e,t],st(r)))}(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&function(e){clearInterval(e)}(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,o=!1;try{this.work(e)}catch(e){o=!0,r=e||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,o=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,pt(o,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Ft),xt=1,$t={};function Gt(e){return e in $t&&(delete $t[e],!0)}var zt=function(e){var t=xt++;return $t[t]=!0,Lt||(Lt=Promise.resolve()),Lt.then((function(){return Gt(t)&&e()})),t},qt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return zt.apply(void 0,at([],st(e)))},Kt=function(e){return function(e){Gt(e)}(e)},Jt=function(e){function t(t,r){var o=e.call(this,t,r)||this;return o.scheduler=t,o.work=r,o}return rt(t,e),t.prototype.requestAsyncId=function(t,r,o){return void 0===o&&(o=0),null!==o&&o>0?e.prototype.requestAsyncId.call(this,t,r,o):(t.actions.push(this),t._scheduled||(t._scheduled=qt(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,r,o){var n;if(void 0===o&&(o=0),null!=o?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,o);var i=t.actions;null!=r&&(null===(n=i[i.length-1])||void 0===n?void 0:n.id)!==r&&(Kt(r),t._scheduled===r&&(t._scheduled=void 0))},t}(Wt),Qt=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=jt,e}(),Yt=function(e){function t(t,r){void 0===r&&(r=Qt.now);var o=e.call(this,t,r)||this;return o.actions=[],o._active=!1,o}return rt(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(Qt),Zt=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rt(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var r,o=this.actions;e=e||o.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=o[0])&&e.id===t&&o.shift());if(this._active=!1,r){for(;(e=o[0])&&e.id===t&&o.shift();)e.unsubscribe();throw r}},t}(Yt))(Jt),Xt=new Yt(Wt),er=Xt,tr=function(e){function t(t,r){var o=e.call(this,t,r)||this;return o.scheduler=t,o.work=r,o}return rt(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,o){return void 0===o&&(o=0),null!=o&&o>0||null==o&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,o):(t.flush(this),0)},t}(Wt),rr=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rt(t,e),t}(Yt))(tr),or=new wt((function(e){return e.complete()}));function nr(e){return e&&dt(e.schedule)}function ir(e){return e[e.length-1]}function sr(e){return dt(ir(e))?e.pop():void 0}function ar(e){return nr(ir(e))?e.pop():void 0}var ur=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function dr(e){return dt(null==e?void 0:e.then)}function cr(e){return dt(e[Tt])}function lr(e){return Symbol.asyncIterator&&dt(null==e?void 0:e[Symbol.asyncIterator])}function pr(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var hr,mr="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function gr(e){return dt(null==e?void 0:e[mr])}function Sr(e){return function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=r.apply(e,t||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(e){n[e]&&(o[e]=function(t){return new Promise((function(r,o){i.push([e,t,r,o])>1||a(e,t)}))})}function a(e,t){try{!function(e){e.value instanceof ut?Promise.resolve(e.value.v).then(u,d):c(i[0][2],e)}(n[e](t))}catch(e){c(i[0][3],e)}}function u(e){a("next",e)}function d(e){a("throw",e)}function c(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}(this,arguments,(function(){var t,r,o;return nt(this,(function(n){switch(n.label){case 0:t=e.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,ut(t.read())];case 3:return r=n.sent(),o=r.value,r.done?[4,ut(void 0)]:[3,5];case 4:return[2,n.sent()];case 5:return[4,ut(o)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function vr(e){return dt(null==e?void 0:e.getReader)}function fr(e){if(e instanceof wt)return e;if(null!=e){if(cr(e))return n=e,new wt((function(e){var t=n[Tt]();if(dt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(ur(e))return o=e,new wt((function(e){for(var t=0;t<o.length&&!e.closed;t++)e.next(o[t]);e.complete()}));if(dr(e))return r=e,new wt((function(e){r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,ft)}));if(lr(e))return yr(e);if(gr(e))return t=e,new wt((function(e){var r,o;try{for(var n=it(t),i=n.next();!i.done;i=n.next()){var s=i.value;if(e.next(s),e.closed)return}}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}e.complete()}));if(vr(e))return yr(Sr(e))}var t,r,o,n;throw pr(e)}function yr(e){return new wt((function(t){(function(e,t){var r,o,n,i;return function(e,t,r,o){return new(r||(r=Promise))((function(t,n){function i(e){try{a(o.next(e))}catch(e){n(e)}}function s(e){try{a(o.throw(e))}catch(e){n(e)}}function a(e){var o;e.done?t(e.value):(o=e.value,o instanceof r?o:new r((function(e){e(o)}))).then(i,s)}a((o=o.apply(e,[])).next())}))}(this,0,void 0,(function(){var s,a;return nt(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=it(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(r){t[r]=e[r]&&function(t){return new Promise((function(o,n){!function(e,t,r,o){Promise.resolve(o).then((function(t){e({value:t,done:r})}),t)}(o,n,(t=e[r](t)).done,t.value)}))}}}(e),u.label=1;case 1:return[4,r.next()];case 2:if((o=u.sent()).done)return[3,4];if(s=o.value,t.next(s),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=u.sent(),n={error:a},[3,11];case 6:return u.trys.push([6,,9,10]),o&&!o.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function Er(e,t,r,o,n){void 0===o&&(o=0),void 0===n&&(n=!1);var i=t.schedule((function(){r(),n?e.add(this.schedule(null,o)):this.unsubscribe()}),o);if(e.add(i),!n)return i}function _r(e,t){return void 0===t&&(t=0),Mt((function(r,o){r.subscribe(Pt(o,(function(r){return Er(o,e,(function(){return o.next(r)}),t)}),(function(){return Er(o,e,(function(){return o.complete()}),t)}),(function(r){return Er(o,e,(function(){return o.error(r)}),t)})))}))}function Ir(e,t){return void 0===t&&(t=0),Mt((function(r,o){o.add(e.schedule((function(){return r.subscribe(o)}),t))}))}function Ar(e,t){if(!e)throw new Error("Iterable cannot be null");return new wt((function(r){Er(r,t,(function(){var o=e[Symbol.asyncIterator]();Er(r,t,(function(){o.next().then((function(e){e.done?r.complete():r.next(e.value)}))}),0,!0)}))}))}function br(e,t){return t?function(e,t){if(null!=e){if(cr(e))return function(e,t){return fr(e).pipe(Ir(t),_r(t))}(e,t);if(ur(e))return function(e,t){return new wt((function(r){var o=0;return t.schedule((function(){o===e.length?r.complete():(r.next(e[o++]),r.closed||this.schedule())}))}))}(e,t);if(dr(e))return function(e,t){return fr(e).pipe(Ir(t),_r(t))}(e,t);if(lr(e))return Ar(e,t);if(gr(e))return function(e,t){return new wt((function(r){var o;return Er(r,t,(function(){o=e[mr](),Er(r,t,(function(){var e,t,n;try{t=(e=o.next()).value,n=e.done}catch(e){return void r.error(e)}n?r.complete():r.next(t)}),0,!0)})),function(){return dt(null==o?void 0:o.return)&&o.return()}}))}(e,t);if(vr(e))return function(e,t){return Ar(Sr(e),t)}(e,t)}throw pr(e)}(e,t):fr(e)}function Cr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return br(e,ar(e))}function Tr(e,t){var r=dt(e)?e:function(){return e};return new wt((function(e){return e.error(r())}))}!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(hr||(hr={}));var Rr=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){return Or(this,e)},e.prototype.do=function(e,t,r){var o=this,n=o.kind,i=o.value,s=o.error;return"N"===n?null==e?void 0:e(i):"E"===n?null==t?void 0:t(s):null==r?void 0:r()},e.prototype.accept=function(e,t,r){var o;return dt(null===(o=e)||void 0===o?void 0:o.next)?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){var e=this,t=e.kind,r=e.value,o=e.error,n="N"===t?Cr(r):"E"===t?Tr((function(){return o})):"C"===t?or:0;if(!n)throw new TypeError("Unexpected notification kind "+t);return n},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function Or(e,t){var r,o,n,i=e,s=i.kind,a=i.value,u=i.error;if("string"!=typeof s)throw new TypeError('Invalid notification, missing "kind"');"N"===s?null===(r=t.next)||void 0===r||r.call(t,a):"E"===s?null===(o=t.error)||void 0===o||o.call(t,u):null===(n=t.complete)||void 0===n||n.call(t)}var Dr=ct((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function wr(e,t){return new Promise((function(t,r){var o,n=!1;e.subscribe({next:function(e){o=e,n=!0},error:r,complete:function(){n?t(o):r(new Dr)}})}))}function Nr(e,t){return new Promise((function(t,r){var o=new At({next:function(e){t(e),o.unsubscribe()},error:r,complete:function(){r(new Dr)}});e.subscribe(o)}))}function Mr(e){return e instanceof Date&&!isNaN(e)}var Pr=ct((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function Lr(e,t){var r=Mr(e)?{first:e}:"number"==typeof e?{each:e}:e,o=r.first,n=r.each,i=r.with,s=void 0===i?kr:i,a=r.scheduler,u=void 0===a?Xt:a,d=r.meta,c=void 0===d?null:d;if(null==o&&null==n)throw new TypeError("No timeout provided.");return Mt((function(e,t){var r,i,a=null,d=0,l=function(e){i=Er(t,u,(function(){try{r.unsubscribe(),fr(s({meta:c,lastValue:a,seen:d})).subscribe(t)}catch(e){t.error(e)}}),e)};r=e.subscribe(Pt(t,(function(e){null==i||i.unsubscribe(),d++,t.next(a=e),n>0&&l(n)}),void 0,void 0,(function(){(null==i?void 0:i.closed)||null==i||i.unsubscribe(),a=null}))),!d&&l(null!=o?"number"==typeof o?o:+o-u.now():n)}))}function kr(e){throw new Pr(e)}function Ur(e,t){return Mt((function(r,o){var n=0;r.subscribe(Pt(o,(function(r){o.next(e.call(t,r,n++))})))}))}var Vr=Array.isArray;function Br(e){return Ur((function(t){return function(e,t){return Vr(t)?e.apply(void 0,at([],st(t))):e(t)}(e,t)}))}var Hr=Array.isArray,jr=Object.getPrototypeOf,Fr=Object.prototype,Wr=Object.keys;function xr(e,t,r,o,n,i,s,a){var u=[],d=0,c=0,l=!1,p=function(){!l||u.length||d||t.complete()},h=function(e){return d<o?m(e):u.push(e)},m=function(e){i&&t.next(e),d++;var n=!1;fr(r(e,c++)).subscribe(Pt(t,(function(e){i?h(e):t.next(e)}),(function(){n=!0}),void 0,(function(){if(n)try{d--;for(var e=function(){var e=u.shift();s||m(e)};u.length&&d<o;)e();p()}catch(e){t.error(e)}})))};return e.subscribe(Pt(t,h,(function(){l=!0,p()}))),function(){}}function $r(e,t,r){return void 0===r&&(r=1/0),dt(t)?$r((function(r,o){return Ur((function(e,n){return t(r,e,o,n)}))(fr(e(r,o)))}),r):("number"==typeof t&&(r=t),Mt((function(t,o){return xr(t,o,e,r)})))}function Gr(e){return void 0===e&&(e=1/0),$r(Rt,e)}function zr(){return Gr(1)}function qr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return zr()(br(e,ar(e)))}function Kr(e){return new wt((function(t){fr(e()).subscribe(t)}))}function Jr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=sr(e),o=function(e){if(1===e.length){var t=e[0];if(Hr(t))return{args:t,keys:null};if((o=t)&&"object"==typeof o&&jr(o)===Fr){var r=Wr(t);return{args:r.map((function(e){return t[e]})),keys:r}}}var o;return{args:e,keys:null}}(e),n=o.args,i=o.keys,s=new wt((function(e){var t=n.length;if(t)for(var r=new Array(t),o=t,s=t,a=function(t){var a=!1;fr(n[t]).subscribe(Pt(e,(function(e){a||(a=!0,s--),r[t]=e}),(function(){return o--}),void 0,(function(){o&&a||(s||e.next(i?function(e,t){return e.reduce((function(e,r,o){return e[r]=t[o],e}),{})}(i,r):r),e.complete())})))},u=0;u<t;u++)a(u);else e.complete()}));return r?s.pipe(Br(r)):s}var Qr=["addListener","removeListener"],Yr=["addEventListener","removeEventListener"],Zr=["on","off"];function Xr(e,t,r,o){if(dt(r)&&(o=r,r=void 0),o)return Xr(e,t,r).pipe(Br(o));var n=st(function(e){return dt(e.addEventListener)&&dt(e.removeEventListener)}(e)?Yr.map((function(o){return function(n){return e[o](t,n,r)}})):function(e){return dt(e.addListener)&&dt(e.removeListener)}(e)?Qr.map(eo(e,t)):function(e){return dt(e.on)&&dt(e.off)}(e)?Zr.map(eo(e,t)):[],2),i=n[0],s=n[1];if(!i&&ur(e))return $r((function(e){return Xr(e,t,r)}))(fr(e));if(!i)throw new TypeError("Invalid event target");return new wt((function(e){var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.next(1<t.length?t:t[0])};return i(t),function(){return s(t)}}))}function eo(e,t){return function(r){return function(o){return e[r](t,o)}}}function to(e,t,r){return r?to(e,t).pipe(Br(r)):new wt((function(r){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1===e.length?e[0]:e)},n=e(o);return dt(t)?function(){return t(o,n)}:void 0}))}function ro(e,t,r){void 0===e&&(e=0),void 0===r&&(r=er);var o=-1;return null!=t&&(nr(t)?r=t:o=t),new wt((function(t){var n=Mr(e)?+e-r.now():e;n<0&&(n=0);var i=0;return r.schedule((function(){t.closed||(t.next(i++),0<=o?this.schedule(void 0,o):t.complete())}),n)}))}function oo(e,t){return void 0===e&&(e=0),void 0===t&&(t=Xt),e<0&&(e=0),ro(e,e,t)}function no(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ar(e),o=function(e){return"number"==typeof ir(e)?e.pop():1/0}(e),n=e;return n.length?1===n.length?fr(n[0]):Gr(o)(br(n,r)):or}var io=new wt(yt),so=Array.isArray;function ao(e,t){return function(r,o){return!e.call(t,r,o)}}function uo(e,t){return Mt((function(r,o){var n=0;r.subscribe(Pt(o,(function(r){return e.call(t,r,n++)&&o.next(r)})))}))}function co(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 1===(t=1===(e=t).length&&so(e[0])?e[0]:e).length?fr(t[0]):new wt(function(e){return function(t){for(var r=[],o=function(o){r.push(fr(e[o]).subscribe(Pt(t,(function(e){if(r){for(var n=0;n<r.length;n++)n!==o&&r[n].unsubscribe();r=null}t.next(e)}))))},n=0;r&&!t.closed&&n<e.length;n++)o(n)}}(t))}function lo(e){return Mt((function(t,r){var o,n=null,i=!1;n=t.subscribe(Pt(r,void 0,void 0,(function(s){o=fr(e(s,lo(e)(t))),n?(n.unsubscribe(),n=null,o.subscribe(r)):i=!0}))),i&&(n.unsubscribe(),n=null,o.subscribe(r))}))}function po(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ar(e);return Mt((function(t,o){zr()(br(at([t],st(e)),r)).subscribe(o)}))}function ho(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return po.apply(void 0,at([],st(e)))}function mo(e){return e<=0?function(){return or}:Mt((function(t,r){var o=0;t.subscribe(Pt(r,(function(t){++o<=e&&(r.next(t),e<=o&&r.complete())})))}))}function go(){return Mt((function(e,t){e.subscribe(Pt(t,yt))}))}function So(e){return Ur((function(){return e}))}function vo(e,t){return $r((function(t,r){return fr(e(t,r)).pipe(mo(1),So(t))}))}function fo(e,t){void 0===t&&(t=Xt);var r=ro(e,t);return vo((function(){return r}))}function yo(e,t,r){return void 0===r&&(r=1/0),dt(t)?$r((function(){return e}),t,r):$r((function(){return e}),r)}function Eo(e,t){return Mt(function(e,t,r){return function(o,n){var i=r,s=t,a=0;o.subscribe(Pt(n,(function(t){var r=a++;s=i?e(s,t,r):(i=!0,t),n.next(s)}),undefined))}}(e,t,arguments.length>=2))}function _o(e){return Mt((function(t,r){var o=!1,n=0;t.subscribe(Pt(r,(function(t){return(o||(o=!e(t,n++)))&&r.next(t)})))}))}function Io(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ar(e);return Mt((function(t,o){(r?qr(e,t,r):qr(e,t)).subscribe(o)}))}function Ao(e,t){return Mt((function(r,o){var n=null,i=0,s=!1,a=function(){return s&&!n&&o.complete()};r.subscribe(Pt(o,(function(r){null==n||n.unsubscribe();var s=0,u=i++;fr(e(r,u)).subscribe(n=Pt(o,(function(e){return o.next(t?t(r,e,u,s++):e)}),(function(){n=null,a()})))}),(function(){s=!0,a()})))}))}function bo(e){return Mt((function(t,r){fr(e).subscribe(Pt(r,(function(){return r.complete()}),yt)),!r.closed&&t.subscribe(r)}))}function Co(e,t){return void 0===t&&(t=!1),Mt((function(r,o){var n=0;r.subscribe(Pt(o,(function(r){var i=e(r,n++);(i||t)&&o.next(r),!i&&o.complete()})))}))}function To(e,t,r){var o=dt(e)||t||r?{next:e,error:t,complete:r}:e;return o?Mt((function(e,t){var r;null===(r=o.subscribe)||void 0===r||r.call(o);var n=!0;e.subscribe(Pt(t,(function(e){var r;null===(r=o.next)||void 0===r||r.call(o,e),t.next(e)}),(function(){var e;n=!1,null===(e=o.complete)||void 0===e||e.call(o),t.complete()}),(function(e){var r;n=!1,null===(r=o.error)||void 0===r||r.call(o,e),t.error(e)}),(function(){var e,t;n&&(null===(e=o.unsubscribe)||void 0===e||e.call(o)),null===(t=o.finalize)||void 0===t||t.call(o)})))})):Rt}function Ro(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=sr(e);return Mt((function(t,o){for(var n=e.length,i=new Array(n),s=e.map((function(){return!1})),a=!1,u=function(t){fr(e[t]).subscribe(Pt(o,(function(e){i[t]=e,a||s[t]||(s[t]=!0,(a=s.every(Rt))&&(s=null))}),yt))},d=0;d<n;d++)u(d);t.subscribe(Pt(o,(function(e){if(a){var t=at([e],st(i));o.next(r?r.apply(void 0,at([],st(t))):t)}})))}))}const Oo="ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",Do="UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",wo="ADD_USER_PARTICIPANT_ATTRIBUTE",No="UPDATE_USER_PARTICIPANT_ATTRIBUTE",Mo="REMOVE_USER_PARTICIPANT_ATTRIBUTE",Po="UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",Lo="REMOVE_WEBINAR_ATTENDEE_ATTRIBUTE";let ko=function(e){return e.Failover="failover",e.OnHold="on hold",e.Promote="promote",e.Depromote="depromote",e.JoinBreakoutRoom="join breakout room",e.MoveToBreakoutRoom="move to breakout room",e.BackToMainSession="back to main session",e}({});const Uo="js_media.min.js";let Vo=function(e){return e.CDN="CDN",e.Global="Global",e.CN="CN",e}({}),Bo=function(e){return e.Connected="Connected",e.Reconnecting="Reconnecting",e.Closed="Closed",e.Fail="Fail",e}({}),Ho=function(e){return e.Initial="initial",e.Joined="joined",e.Closed="closed",e}({}),jo=function(e){return e.AudioDecodeInWorklet="M:6;V:3",e.VideoWebRTCEnable="M:10;V:6",e.VideoHalfWebRTCEnable="M:11;V:7",e.WebGL2Render="M:20;V:8",e.WebGPURender="M:21;V:9",e.ZMKFromRWG="M:19;V:10",e}({}),Fo=function(e){return e[e.NormalCase=-1]="NormalCase",e[e.NoHeartbeat=0]="NoHeartbeat",e[e.NoHeartbeatMChannel=1]="NoHeartbeatMChannel",e[e.NetworkChange=2]="NetworkChange",e[e.NotifyUiFailover=3]="NotifyUiFailover",e[e.InvalidParameters=4]="InvalidParameters",e[e.OnError=5]="OnError",e[e.OnErrorMChannel=6]="OnErrorMChannel",e[e.Disconnect=7]="Disconnect",e[e.DisconnectMChannel=8]="DisconnectMChannel",e[e.DisconnectXmpp=9]="DisconnectXmpp",e[e.RefreshPage=10]="RefreshPage",e[e.NotifyUIWMSCFailover=11]="NotifyUIWMSCFailover",e[e.NotifyUIWMSCWSSDisconnected=12]="NotifyUIWMSCWSSDisconnected",e[e.OnErrorXmppChannel=15]="OnErrorXmppChannel",e}({});const Wo="JOIN_MEETING_SUCCESS",xo="JOIN_MEETING_FAILED",$o="RECONNECTING_MEETING",Go="LEAVING_MEETING",zo="MEETING_IN_WAITING_ROOM",qo="UPDATE_MEETING_ATTRIBUTE",Ko="SHARE_PRONOUN_TYPE_UPDATE",Jo="MEETING_RLB_TP_READY_STATUS_CHANGE";var Qo=function(e){return e.ConnectionChange="connection-change",e.OnHoldChange="on-hold-change",e.UserAdd="user-added",e.UserUpdate="user-updated",e.UserRemove="user-removed",e.AttendeeUpdate="attendee-updated",e.MeetingAttributeUpdate="meeting-attribute-updated",e.PromoteAttendeeConsent="promote-attendee-consent",e.ActiveAppsUpdate="active-apps-updated",e.SharePronounTypeUpdate="share-pronoun-type-update",e}(Qo||{});const Yo={JoinMeeting:{success:Oo,fail:[xo]}},Zo={[Qo.ConnectionChange]:[{event:Wo,payload:()=>({state:Bo.Connected})},{event:xo,payload:e=>({state:Bo.Fail,...e})},{event:$o,payload:e=>({state:Bo.Reconnecting,...e})},{event:Go,payload:e=>({state:Bo.Closed,...e})}],[Qo.OnHoldChange]:[{event:zo,payload:e=>({isOnHold:e})}],[Qo.UserAdd]:[{event:Oo,payload:e=>[e]},{event:wo,payload:e=>e}],[Qo.UserUpdate]:[{event:Do,payload:e=>[e]},{event:No,payload:e=>e}],[Qo.UserRemove]:[{event:Mo,payload:e=>e}],[Qo.AttendeeUpdate]:[{event:Po,payload:e=>e},{event:Lo,payload:e=>e}],[Qo.MeetingAttributeUpdate]:[{event:qo,payload:e=>"bNoHostTimeOut"in e?{isHostLost:e.bNoHostTimeOut}:null}],[Qo.PromoteAttendeeConsent]:[{event:"MEETING_WEBINAR_PROMOTE_CONSENT_REQ",payload:({req_id:e,sender_id:t})=>({reqId:e,senderId:t})}],[Qo.ActiveAppsUpdate]:[{event:"ACTIVE_APPS_UPDATE",payload:()=>{}}],[Qo.SharePronounTypeUpdate]:[{event:Ko,payload:e=>e}]},Xo="LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",en="LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",tn="LIVE_TRANSCRIPTION_STATUS_CHANGE",rn="LIVE_TRANSCRIPTION_HOST_DISABLE_CHANGE",on="LIVE_TRANSCRIPTION_LANGUAGE_LOCK_CHANGE",nn={"caption-message":[{event:Xo,payload:e=>e}],"caption-status":[{event:en,payload:e=>e}],"caption-enable":[{event:tn,payload:e=>e}],"caption-host-disable":[{event:rn,payload:e=>e}],"caption-language-lock":[{event:on,payload:e=>e}]},sn="CHAT_RECEIVE_MESSAGE_EVENTS",an="CHAT_PRIVILEGE_CHANGE",un="CHAT_MESSAGE_RESPONSE",dn="CHAT_DELETE_MESSAGE_REPONSE",cn="CHAT_FILE_CHAT_UPLOAD_PROGRESS",ln="CHAT_FILE_CHAT_DOWNLOAD_PROGRESS";let pn=function(e){return e.ChatOnMessage="chat-on-message",e.ChatPrivilegeChange="chat-privilege-change",e.ChatDeleteMessage="chat-delete-message",e.ChatFileUploadProgress="chat-file-upload-progress",e.ChatFileDownloadProgress="chat-file-download-progress",e}({});const hn={[pn.ChatOnMessage]:[{event:sn,payload:e=>e}],[pn.ChatPrivilegeChange]:[{event:an,payload:e=>e}],[pn.ChatDeleteMessage]:[{event:dn,payload:e=>e}],[pn.ChatFileUploadProgress]:[{event:cn,payload:e=>e}],[pn.ChatFileDownloadProgress]:[{event:ln,payload:e=>e}]},mn="COMMAND_RECEIVE_MESSAGE_EVENTS",gn="COMMAND_STATUS_EVENTS";let Sn=function(e){return e.CommandChannelStatus="command-channel-status",e.CommandChannelMessage="command-channel-message",e}({});const vn={[Sn.CommandChannelStatus]:[{event:gn,payload:e=>e}],[Sn.CommandChannelMessage]:[{event:mn,payload:e=>e}]};let fn=function(e){return e.Recording="Recording",e.Paused="Paused",e.Stopped="Stopped",e.Ask="Ask",e.Accept="Accept",e.Decline="Decline",e}({}),yn=function(e){return e[e.None=0]="None",e[e.Init=1]="Init",e[e.Start=2]="Start",e[e.Pause=3]="Pause",e[e.Stop=4]="Stop",e}({}),En=function(e){return e[e.Stop=0]="Stop",e[e.Start=1]="Start",e[e.Pause=2]="Pause",e}({}),_n=function(e){return e[e.None=0]="None",e[e.Deny=1]="Deny",e[e.Allow=2]="Allow",e}({}),In=function(e){return e[e.None=0]="None",e[e.DenyAllRequest=1]="DenyAllRequest",e[e.AllowAllRequest=2]="AllowAllRequest",e}({});const An="CLOUD_RECORDING_STATUS_CHANGE",bn="CLOUD_RECORDING_ISO_STATUS_CHANGE",Cn="LOCAL_RECORDING_CHANGE",Tn="LOCAL_RECORDING_PERMISSION_CHANGE",Rn="RECORDING_FOR_IQ_STATUS_CHANGE",On="RECORDING_FOR_IQ_OPERATION_CHANGE";let Dn=function(e){return e.RecordingChange="recording-change",e.IndividualRecordingChange="individual-recording-change",e.LocalRecordingChange="local-recording-change",e.LocalRecordingPermissionChange="local-recording-permission-change",e.MediaCaptureStatusChange="media-capture-status-change",e.MediaCapturePermissionChange="media-capture-permission-change",e.RecordingIqChange="recording-iq-change",e}({});const wn={[Dn.RecordingChange]:[{event:An,payload:e=>{const{cmrServerStatus:t}=e;return t===yn.Start?fn.Recording:t===yn.Pause?fn.Paused:fn.Stopped}}],[Dn.IndividualRecordingChange]:[{event:bn,payload:e=>e}],[Dn.LocalRecordingChange]:[{event:Cn,payload:e=>e}],[Dn.LocalRecordingPermissionChange]:[{event:Tn,payload:e=>e}],[Dn.MediaCaptureStatusChange]:[{event:Cn,payload:e=>e}],[Dn.MediaCapturePermissionChange]:[{event:Tn,payload:e=>e}],[Dn.RecordingIqChange]:[{event:Rn,payload:e=>e}]},Nn="RECEIVE_VIDEO_ACTIVE_INDICATION",Mn="RECEIVE_VIDEO_MUTE_INDICATION",Pn="ASK_FOR_START_VIDEO_CONSENT",Ln="RECEIVE_VIDEO_DIMENSION_CHANGE",kn="CAPTURED_VIDEO_DIMENSION_CHANGE",Un="CAN_NOT_DETECT_CAMERA",Vn="CAN_NOT_FIND_CAMERA",Bn="VIDEO_USER_FORBIDDEN_CAPTURE",Hn="VIDEO_CAMERA_IS_TAKEN",jn="VIDEO_BACKGROUND_FAILED",Fn="VIDEO_ESTABLISH_STREAM_ERROR",Wn="VIDEO_CAPTURE_START_SUCCESS",xn="VIDEO_CAPTURE_STOP_RESULT",$n="VIDEO_SPOTLIGHT_CHANGE",Gn="VIDEO_FOLLOW_HOST_ORDER_CHANGE",zn="VIDEO_HOST_DRAG_LAYOUT_CHANGE",qn="VIDEO_NEW_USER_START",Kn="VIDEO_OLD_USER_STOP",Jn="VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",Qn="VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",Yn="VIDEO_STATISTIC_DATA",Zn="VIDEO_CELL_DETAILED_DATA",Xn="VIDEO_NETWORK_QUALITY_CHANGE",ei="VIDEO_FAR_END_CAMERA_CONTROL_REQUEST",ti="VIDEO_FAR_END_CAMERA_CONTROL_RESPONSE",ri="VIDEO_FAR_END_CAMERA_IN_CONTROL_CHANGE",oi="VIDEO_FAR_END_CAMERA_CAPABILITY_CHANGE",ni="VIDEO_MASK_SETTING_SUCCESS",ii="VIDEO_CAPTURE_SDK_SUCCESS",si="VIDEO_PREFETCH_VIDEO_FRAME_CALLBACK",ai="VIDEO_CURRENT_USER_SSRC",ui="VIDEO_RENDER_ASPECT_RATIO_CHANGE",di="VIDEO_LEADERSHIP_USER_CHANGE",ci="VIDEO_SCREENSHOT_TAKEN_NOTIFICATION",li="WEB_RTC_STATISTIC_DATA",pi="SYSTEM_RESOURCE_USAGE_CHANGE",hi={startCaptureVideo:{success:Wn,fail:[Un,Vn,Bn,Fn,Hn,jn]},switchCameraVideo:{success:ii,fail:[Un,Vn,Bn,Hn]}};let mi=function(e){return e.VideoActiveChange="video-active-change",e.PeerVideoStateChange="peer-video-state-change",e.VideoSpotlightChange="video-spotlight-change",e.VideoMutedChange="video-muted-change",e.VideoCapturingChange="video-capturing-change",e.AskForStartVideoConsent="ask-for-start-video-consent",e.VideoDimensionChange="video-dimension-change",e.VideoFollowHostOrder="video-follow-host-order-change",e.VideoHostLayoutChange="video-host-layout-change",e.VideoVBPreloadChange="video-virtual-background-preload-change",e.VideoStatisticDataChange="video-statistic-data-change",e.VideoDetailedDataChange="video-detailed-data-change",e.VideoAspectRatioChange="video-aspect-ratio-change",e.NetworkQualityChange="network-quality-change",e.FarEndCameraRequestControl="far-end-camera-request-control",e.FarEndCameraResponseControl="far-end-camera-response-control",e.FarEndCameraInControlChange="far-end-camera-in-control-change",e.FarEndCameraCapabilityChange="far-end-camera-capability-change",e.VideoScreenshotTaken="video-screenshot-taken",e.WebrtcStatsReportDataChange="webrtc-stats-report-data-change",e.SystemResourceUsageChange="system-resource-usage-change",e}({});const gi={[mi.VideoActiveChange]:[{event:Nn,payload:e=>({state:e.bVideoOn?K.Active:K.Inactive,userId:e.userId})}],[mi.VideoCapturingChange]:[{event:Wn,payload:()=>({state:Q.Started})},{event:xn,payload:e=>({state:null!=e&&e.failed?Q.Failed:Q.Stopped})}],[mi.VideoMutedChange]:[{event:Mn,payload:e=>({state:e.isVideoMuted?J.Muted:J.Unmuted,userId:e.id})}],[mi.AskForStartVideoConsent]:[{event:Pn,payload:e=>({state:e.isVideoMuted?J.Muted:J.Unmuted,userId:e.id})}],[mi.VideoSpotlightChange]:[{event:$n,payload:e=>({spotlightList:e.spotlightList&&e.spotlightList.map((e=>({userId:e})))})},{event:di,payload:e=>{var t;return{spotlightList:null===(t=e.spotlightList)||void 0===t?void 0:t.map((e=>({userId:e})))}}}],[mi.VideoDimensionChange]:[{event:Ln,payload:e=>({type:"received",width:e.width,height:e.height})},{event:kn,payload:e=>({type:"captured",width:e.width,height:e.height})}],[mi.VideoFollowHostOrder]:[{event:Gn,payload:e=>({isFollowHostOrder:e.bOn})}],[mi.VideoHostLayoutChange]:[{event:zn,payload:e=>Array.isArray(e.layout)?e.layout.map((e=>({userId:e}))):[]}],[mi.PeerVideoStateChange]:[{event:qn,payload:e=>({action:"Start",...e})},{event:Kn,payload:e=>({action:"Stop",...e})}],[mi.VideoVBPreloadChange]:[{event:Jn,payload:e=>({isReady:e})}],[mi.VideoStatisticDataChange]:[{event:Yn,payload:e=>{const{data:{rate:t,...r},...o}=null!=e?e:{data:{}};return{data:{bitrate:t,...r},...o}}}],[mi.VideoDetailedDataChange]:[{event:Zn,payload:e=>e}],[mi.VideoAspectRatioChange]:[{event:ui,payload:e=>e}],[mi.NetworkQualityChange]:[{event:Xn,payload:e=>e}],[mi.FarEndCameraRequestControl]:[{event:ei,payload:e=>e}],[mi.FarEndCameraResponseControl]:[{event:ti,payload:e=>e}],[mi.FarEndCameraInControlChange]:[{event:ri,payload:e=>e}],[mi.FarEndCameraCapabilityChange]:[{event:oi,payload:e=>e}],[mi.VideoScreenshotTaken]:[{event:ci,payload:e=>e}],[mi.WebrtcStatsReportDataChange]:[{event:li,payload:e=>e}],[mi.SystemResourceUsageChange]:[{event:pi,payload:e=>e}]},Si="AUDIO_ACTIVE_SPEAKER",vi="AUDIO_UNMUTE_CONSENT",fi="AUDIO_CURRENT_USER_JOIN_BY_VOIP",yi="AUDIO_CURRENT_USER_JOIN_BY_PHONE",Ei="AUDIO_CURRENT_USER_LEAVE_AUDIO",_i="AUDIO_CURRENT_USER_MUTED",Ii="AUDIO_CURRENT_USER_UNMUTED",Ai="AUDIO_PARTICIPANT_AUDIO_UPDATE",bi="AUDIO_DIALOUT_RESULT_CODE",Ci="AUDIO_DIALOUT_RESULT_SUCCESS",Ti="AUDIO_DIALOUT_RESULT_FAIL",Ri="AUDIO_DIALOUT_CANCEL_SUCCESS",Oi="DIALOUT_CANCEL_FAIL",Di="AUDIO_MERGE_AUDIO_INDICATION",wi="AUDIO_CAPTURE_FAILED",Ni="ESTABLISH_AUDIO_STREAM_ERROR",Mi="AUDIO_AUTO_PLAY_FAILED",Pi="INVALID_DEVICE_ID",Li="AUDIO_ALLOW_TALK_CHANGE",ki="SHARE_AUDIO_STATE_CHANGE",Ui="AUDIO_STATISTIC_DATA",Vi="AUDIO_CURRENT_USER_SSRC",Bi="AUDIO_SET_SPEAKER_RESULT",Hi="AUDIO_SHARE_SECONDARY_AUDIO_SUCCESS",ji="AUDIO_CRC_CALL_OUT_RESULT_CODE",Fi="AUDIO_CRC_CALL_OUT_RESULT_SUCCESS",Wi="AUDIO_CRC_CALL_OUT_RESULT_FAIL",xi="AUDIO_CURRENT_AUDIO_LEVEL_CHANGE",$i="AUDIO_SPEAKING_WHILE_MUTED";let Gi=function(e){return e.ActiveSpeaker="active-speaker",e.UnmuteAudioConsent="unmute-audio-consent",e.CurrentAudioChange="current-audio-change",e.CurrentAudioLevelChange="current-audio-level-change",e.DialoutStateChange="dialout-state-change",e.MergeAudio="merged-audio",e.AutoPlayFailed="auto-play-audio-failed",e.AllowTalkChange="allow-talk-change",e.ShareAudioChange="share-audio-change",e.AudioStatisticDataChange="audio-statistic-data-change",e.CrcCallOutStateChange="crc-call-out-state-change",e.SpeakingWhileMuted="speaking-while-muted",e}({});const zi={JoinComputerAudio:{success:fi,fail:[wi,Ni]},JoinAudioByCallMe:{success:Ci,fail:[Ti]},cancelDialOut:{success:Ri,fail:[Oi]},hangup:{success:Ei},crcCallOut:{success:Fi,fail:[Wi]}},qi={[Gi.ActiveSpeaker]:[{event:Si,payload:e=>e}],[Gi.UnmuteAudioConsent]:[{event:vi,payload:e=>({reason:e})}],[Gi.CurrentAudioChange]:[{event:yi,payload:()=>({action:j.Join,type:ye.Phone})},{event:fi,payload:()=>({action:j.Join,type:ye.Computer})},{event:Ei,payload:({source:e})=>({action:j.Leave,source:e})},{event:_i,payload:({source:e})=>({action:j.Muted,source:e})},{event:Ii,payload:({source:e})=>({action:j.Unmuted,source:e})}],[Gi.DialoutStateChange]:[{event:bi,payload:e=>e}],[Gi.MergeAudio]:[{event:Di,payload:e=>e}],[Gi.AutoPlayFailed]:[{event:Mi,payload:()=>{}}],[Gi.AllowTalkChange]:[{event:Li,payload:e=>({enabled:e})}],[Gi.ShareAudioChange]:[{event:ki,payload:e=>e}],[Gi.AudioStatisticDataChange]:[{event:Ui,payload:e=>{const{data:{rate:t,...r},...o}=null!=e?e:{data:{}};return{data:{bitrate:t,...r},...o}}}],[Gi.CrcCallOutStateChange]:[{event:ji,payload:e=>e}],[Gi.CurrentAudioLevelChange]:[{event:xi,payload:e=>e}],[Gi.SpeakingWhileMuted]:[{event:$i,payload:e=>e}]},Ki="SHARE_ACTIVE_INDICATION",Ji="SHARE_START_DESKTOP_SHARE_FAILED",Qi="SHARE_DIMENSION_CHANGE",Yi="SHARE_RECEIVED_DIMENSION_CHANGE",Zi="SHARE_VIDEO_STREAMS_END",Xi="SHARE_PASSIVE_STOP_SHARE",es="SHARE_PASSIVE_BO_STOP",ts="SHARE_CAMERA_PASSIVE_STOP",rs="SHARE_NEW_USER_ADD",os="SHARE_USER_REMOVE",ns="SHARE_USER_PAUSED",is="SHARE_USER_RESUMED",ss="SHARE_AUTO_CHANGE_SOURCE",as="SHARE_REMOTE_CONTROL_APPROVE",us="SHARE_GRAB_REMOTE_CONTROL_CHANGE",ds="SHARE_REMOTE_CONTROL_CLIPBOARD_CHANGE",cs="SHARE_REMOTE_CONTROL_SUCCESS",ls="SHARE_REMOTE_CONTROL_FAILED",ps="SHARE_PRIVILEGE_CHANGE",hs="SHARE_READ_RECEIPT",ms="SHARE_STATISTIC_DATA",gs="SHARE_REMOTE_CONTROL_REQUEST",Ss="SHARE_REMOTE_CONTROL_APP_STATUS",vs="SHARE_REMOTE_CONTROL_SESSION_STATUS",fs="SHARE_REMOTE_CONTROL_APP_SCHEME",ys="SHARE_SCREENSHOT_TAKEN_NOTIFICATION",Es="ANNOTATION_START_RESULT",_s="ANNOTATION_PRIVILEGE_CHANGE",Is="ANNOTATION_UNDO_STATUS",As="ANNOTATION_REDO_STATUS",bs="ANNOTATION_DRAW_REQUEST",Cs="SHARE_REMOTE_CAMERA_REQUEST",Ts="SHARE_REMOTE_CAMERA_RESPONSE",Rs="SHARE_REMOTE_CAMERA_STATUS";let Os=function(e){return e.ShareActiveChange="active-share-change",e.ShareDimensionChange="share-content-dimension-change",e.SharePassiveStop="passively-stop-share",e.SharePeerStateChange="peer-share-state-change",e.ShareContentChange="share-content-change",e.SharePrivilegeChange="share-privilege-change",e.ShareReadReceipt="share-can-see-screen",e.ShareStatisticDataChange="share-statistic-data-change",e.RemoteControlApprovedChange="remote-control-approved-change",e.RemoteControlInControlChange="remote-control-in-control-change",e.RemoteControlClipboardChange="remote-control-clipboard-change",e.RemoteControlRequestChange="remote-control-request-change",e.RemoteControlAppStatusChange="remote-control-app-status-change",e.RemoteControlControlledStatusChange="remote-control-controlled-status-change",e.ShareScreenshotTaken="share-content-screenshot-taken",e.AnnotationPrivilegeChange="annotation-privilege-change",e.AnnotationRedoStatus="annotation-redo-status",e.AnnotationUndoStatus="annotation-undo-status",e.AnnotationDrawRequest="annotation-viewer-draw-request",e.ShareRemoteCameraRequest="share-camera-request",e.ShareRemoteCameraApproveChange="share-camera-approve-change",e.ShareRemoteCameraStatus="share-camera-status",e}({});const Ds={[Os.ShareActiveChange]:[{event:Ki,payload:e=>{const{isActive:t,activeUserId:r,...o}=e;return{state:t?"Active":"Inactive",userId:r,...o}}}],[Os.ShareDimensionChange]:[{event:Qi,payload:e=>({type:"sended",width:e.width,height:e.height,userId:e.userId})},{event:Yi,payload:e=>({type:"received",width:e.width,height:e.height,userId:e.nodeid})}],[Os.SharePassiveStop]:[{event:Zi,payload:()=>({reason:Z.StopScreenCapture})},{event:Xi,payload:()=>({reason:Z.PrivilegeChange})},{event:es,payload:()=>({reason:Z.ShareFromMainSession})},{event:ts,payload:()=>({reason:Z.StopCameraCapture})}],[Os.SharePeerStateChange]:[{event:rs,payload:e=>{var t;return{userId:e.id,action:"Start",isFromMainSession:null!==(t=null==e?void 0:e.isFromMainSession)&&void 0!==t&&t}}},{event:os,payload:e=>{var t;return{userId:e.id,action:"Stop",isFromMainSession:null!==(t=null==e?void 0:e.isFromMainSession)&&void 0!==t&&t}}},{event:ns,payload:e=>({userId:e.id,action:"Pause"})},{event:is,payload:e=>({userId:e.id,action:"Resume"})}],[Os.ShareContentChange]:[{event:ss,payload:e=>e}],[Os.SharePrivilegeChange]:[{event:ps,payload:e=>({privilege:e})}],[Os.ShareReadReceipt]:[{event:hs,payload:()=>{}}],[Os.ShareStatisticDataChange]:[{event:ms,payload:e=>{const{data:{rate:t,...r},...o}=null!=e?e:{data:{}};return{data:{bitrate:t,...r},...o}}}],[Os.RemoteControlApprovedChange]:[{event:as,payload:e=>({state:e?Y.Approved:Y.Rejected})}],[Os.RemoteControlInControlChange]:[{event:us,payload:e=>({isControlling:e})}],[Os.RemoteControlClipboardChange]:[{event:ds,payload:e=>e}],[Os.RemoteControlRequestChange]:[{event:gs,payload:e=>e}],[Os.RemoteControlAppStatusChange]:[{event:Ss,payload:e=>e}],[Os.RemoteControlControlledStatusChange]:[{event:vs,payload:e=>e}],[Os.ShareScreenshotTaken]:[{event:ys,payload:e=>e}],[Os.AnnotationPrivilegeChange]:[{event:_s,payload:e=>e}],[Os.AnnotationRedoStatus]:[{event:As,payload:e=>e}],[Os.AnnotationUndoStatus]:[{event:Is,payload:e=>e}],[Os.AnnotationDrawRequest]:[{event:bs,payload:e=>e}],[Os.ShareRemoteCameraRequest]:[{event:Cs,payload:e=>e}],[Os.ShareRemoteCameraApproveChange]:[{event:Ts,payload:e=>e}],[Os.ShareRemoteCameraStatus]:[{event:Rs,payload:e=>e}]};let ws=function(e){return e.Question="question",e.UpdateQuestion="updateQuestion",e.Answer="answer",e.DeleteComment="deleteComment",e.DeleteQuestion="deleteQuestion",e.Dismiss="dismiss",e.Reopen="reopen",e.Upvote="upvote",e.AnswerLive="answerLive",e}({}),Ns=function(e){return e.QaSettingChange="qa-setting-change",e.QaActionChange="qa-action-change",e}({});const Ms={[Ns.QaSettingChange]:[{event:"QA_SETTING_OPTION_CHANGE",payload:e=>e}],[Ns.QaActionChange]:[{event:"QA_NEW_ASK_QUESTION",payload:e=>({action:ws.Question,data:e})},{event:"QA_UPDATE_ANONYMOUS_QUESTION",payload:e=>({action:ws.UpdateQuestion,data:e})},{event:"QA_ANSWER_QUESTION",payload:e=>({action:ws.Answer,data:e})},{event:"QA_ANSWER_REMOVE_COMMENT",payload:e=>({action:ws.DeleteComment,data:e})},{event:"QA_ANSWER_REMOVE_QUESTION",payload:e=>({action:ws.DeleteQuestion,data:e})},{event:"QA_ANSWER_DISMISS_QUESTION",payload:e=>({action:ws.Dismiss,data:e})},{event:"QA_ANSWER_REOPEN_QUESTION",payload:e=>({action:ws.Reopen,data:e})},{event:"QA_ANSWER_VOTE_QUESTION",payload:e=>({action:ws.Upvote,data:e})},{event:"QA_ANSWER_QUESTION_LIVE",payload:e=>({action:ws.AnswerLive,data:e})}]},Ps="AUDIO_ENCODE_SUCCESS",Ls="AUDIO_DECODE_SUCCESS",ks="VIDEO_ENCODE_SUCCESS",Us="VIDEO_DECODE_SUCCESS",Vs="SHARING_ENCODE_SUCCESS",Bs="SHARING_DECODE_SUCCESS",Hs="AUDIO_ENCODE_FAIL",js="AUDIO_DECODE_FAIL",Fs="VIDEO_ENCODE_FAIL",Ws="VIDEO_DECODE_FAIL",xs="SHARING_ENCODE_FAIL",$s="SHARING_DECODE_FAIL",Gs="MEDIA_DEVICE_CHANGE",zs="MEDIS_SDK_PATHCH_LOADED",qs="DEVICE_PERMISSION_CHANGE",Ks="MEDIA_HEALTH_CHECK_FAILED";let Js=function(e){return e.DeviceChange="device-change",e.MediaSDKChange="media-sdk-change",e.DevicePermissionChange="device-permission-change",e.MediaInternalError="media-internal-error",e}({});const Qs={[Js.DeviceChange]:[{event:Gs,payload:()=>({})}],[Js.MediaSDKChange]:[{event:Ps,payload:()=>({type:"audio",action:"encode",result:"success"})},{event:Hs,payload:()=>({type:"audio",action:"encode",result:"fail"})},{event:Ls,payload:()=>({type:"audio",action:"decode",result:"success"})},{event:js,payload:()=>({type:"audio",action:"decode",result:"fail"})},{event:ks,payload:()=>({type:"video",action:"encode",result:"success"})},{event:Fs,payload:()=>({type:"video",action:"encode",result:"fail"})},{event:Us,payload:()=>({type:"video",action:"decode",result:"success"})},{event:Ws,payload:()=>({type:"video",action:"decode",result:"fail"})},{event:Vs,payload:()=>({type:"share",action:"encode",result:"success"})},{event:xs,payload:()=>({type:"share",action:"encode",result:"fail"})},{event:Bs,payload:()=>({type:"share",action:"decode",result:"success"})},{event:$s,payload:()=>({type:"share",action:"decode",result:"fail"})}],[Js.DevicePermissionChange]:[{event:qs,payload:e=>e}],[Js.MediaInternalError]:[{event:Ks,payload:e=>e}]},Ys="BREAKOUT_ROOM_ADD_TOKEN",Zs="BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",Xs="BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",ea="BREAKOUT_ROOM_ROOM_COUNTDOWN",ta="BREAKOUT_ROOM_BROADCAST_MESSAGE",ra="BREAKOUT_ROOM_ASK_HELP_REQUEST",oa="BREAKOUT_ROOM_ASK_HELP_RESPONSE",na="BREAKOUT_ROOM_ATTRIBUTE_INDICATION",ia="BREAKOUT_ROOM_JOIN_BO_RESPONSE",sa="BREAKOUT_ROOM_ROOM_COUNTDOWN_TIME_UP",aa="BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",ua="BREAKOUT_ROOM_LOAD_PRE_ASSIGNED_ROOMS",da="BREAKOUT_ROOM_MAIN_SESSION_USER_UPDATE",ca="BREAKOUT_ROOM_INVITE_TO_BACK_NOTIFICATION",la="BREAKOUT_ROOM_IN_ROOM_USER_STATUS_UPDATE",pa="BREAKOUT_ROOM_BROADCAST_VOICE";let ha=function(e){return e.InviteToJoin="invite-to-join",e.RoomCountdown="room-countdown",e.RoomTimeUp="room-time-up",e.ClosingRoomCountdown="closing-room-countdown",e.BroadcastMessage="broadcast-message",e.AskForHelp="ask-for-help",e.AskForHelpResponse="ask-for-help-response",e.RoomStateChange="room-state-change",e.MainSessionUserUpdate="main-session-user-updated",e.InviteToBack="invite-back-to-main-session",e.RoomUserUpdate="room-user-update",e.BroadcastVoice="broadcast-voice",e}({});const ma={[ha.InviteToJoin]:[{event:Zs,payload:e=>e}],[ha.RoomCountdown]:[{event:ea,payload:e=>e}],[ha.RoomTimeUp]:[{event:sa,payload:e=>e}],[ha.ClosingRoomCountdown]:[{event:Xs,payload:e=>e}],[ha.BroadcastMessage]:[{event:ta,payload:e=>e}],[ha.AskForHelp]:[{event:ra,payload:e=>e}],[ha.AskForHelpResponse]:[{event:oa,payload:e=>e}],[ha.RoomStateChange]:[{event:na,payload:e=>({status:e.controlStatus})}],[ha.MainSessionUserUpdate]:[{event:da,payload:()=>({})}],[ha.InviteToBack]:[{event:ca,payload:e=>e}],[ha.RoomUserUpdate]:[{event:la,payload:e=>e}],[ha.BroadcastVoice]:[{event:pa,payload:e=>e}]};var ga=function(e){return e.StatusUpdate="archiving-status-update",e.OptionsUpdate="archiving-options-update",e}(ga||{});const Sa={[ga.StatusUpdate]:[{event:"ARCHIVING_STATUS_UPDATE",payload:e=>e}],[ga.OptionsUpdate]:[{event:"ARCHIVING_OPTIONS_UPDATE",payload:e=>e}]};let va=function(e){return e.PollDataChange="poll-data-change",e.PollSizeUpdate="poll-size-update",e.PollStatusUpdate="poll-status-update",e}({});const fa={[va.PollDataChange]:[{event:"POLL_DATA_CHANGE",payload:e=>e}],[va.PollSizeUpdate]:[{event:"POLL_SIZE_UPDATE",payload:e=>e}],[va.PollStatusUpdate]:[{event:"POLL_STATUS_UPDATE",payload:e=>e}]};let ya=function(e){return e.ReactionReceived="reaction-received",e.ReactionRemoved="reaction-removed",e}({});const Ea={[ya.ReactionReceived]:[{event:"REACTION_RECEIVED",payload:e=>e}],[ya.ReactionRemoved]:[{event:"REACTION_REMOVED",payload:e=>e}]},_a="SMART_SUMMARY_STATUS_CHANGE",Ia="MEETING_QUERY_STATUS_CHANGE";let Aa=function(e){return e.SummaryChange="summary-status-change",e.MeetingQueryChang="meeting-query-status-change",e}({});const ba={[Aa.SummaryChange]:[{event:_a,payload:e=>e}],[Aa.MeetingQueryChang]:[{event:Ia,payload:e=>e}]},Ca="LIVE_STREAM_STATUS_CHANGE",Ta={"live-stream-status":[{event:Ca,payload:e=>e}]},Ra="BROADCAST_STREAM_UTK_UPDATE",Oa="BROADCAST_STREAM_STATUS_CHANGE",Da={"broadcast-streaming-status":[{event:Oa,payload:e=>e}]};let wa=function(e){return e[e.OPERATION_TIMEOUT=1]="OPERATION_TIMEOUT",e[e.INTERNAL_ERROR=2]="INTERNAL_ERROR",e[e.OPERATION_CANCELLED=3]="OPERATION_CANCELLED",e[e.SESSION_FETCH_INFO_ERROR=200]="SESSION_FETCH_INFO_ERROR",e[e.SESSION_IN_ANOTHER_SESSION=3e3]="SESSION_IN_ANOTHER_SESSION",e[e.SESSION_INCORRECT_PASSCODE=3004]="SESSION_INCORRECT_PASSCODE",e[e.SESSION_NOT_STARTED=3008]="SESSION_NOT_STARTED",e[e.SESSION_USER_REMOVED=3009]="SESSION_USER_REMOVED",e[e.SESSION_ROLE_TYPE_ERROR=3010]="SESSION_ROLE_TYPE_ERROR",e[e.SESSION_WEBINAR_USER_REMOVED=3620]="SESSION_WEBINAR_USER_REMOVED",e[e.SESSION_INVALID_PARAMETER=4003]="SESSION_INVALID_PARAMETER",e[e.SESSION_ENDED=4004]="SESSION_ENDED",e[e.SESSION_LOCKED=4006]="SESSION_LOCKED",e[e.SESSION_IB_BLOCKED=4007]="SESSION_IB_BLOCKED",e[e.SESSION_PARTICIPANT_EXIST=4008]="SESSION_PARTICIPANT_EXIST",e[e.CLIENT_PLATFORM_UNSUPPORTED=5e3]="CLIENT_PLATFORM_UNSUPPORTED",e[e.CLIENT_DEPENDENT_ASSETS_INACCESSIBLE=5001]="CLIENT_DEPENDENT_ASSETS_INACCESSIBLE",e[e.CLIENT_SESSION_STATE_CLOSED=5002]="CLIENT_SESSION_STATE_CLOSED",e[e.CLIENT_SESSION_STATE_RECONNECTING=5003]="CLIENT_SESSION_STATE_RECONNECTING",e[e.CLIENT_SESSION_STATE_ON_HOLD=5004]="CLIENT_SESSION_STATE_ON_HOLD",e[e.CLIENT_SESSION_NOT_WEBINAR=5005]="CLIENT_SESSION_NOT_WEBINAR",e[e.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED=5006]="CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED",e[e.CLIENT_HOST_PERMISSION_REQUIRED=5007]="CLIENT_HOST_PERMISSION_REQUIRED",e[e.CLIENT_ORIGIN_HOST_PERMISSION_REQUIRED=5008]="CLIENT_ORIGIN_HOST_PERMISSION_REQUIRED",e[e.CLIENT_ATTENDEE_APPLICABLE_ONLY=5009]="CLIENT_ATTENDEE_APPLICABLE_ONLY",e[e.CLIENT_PARTICIPANT_APPLICABLE_ONLY=5010]="CLIENT_PARTICIPANT_APPLICABLE_ONLY",e[e.CLIENT_MISMATCH_USER=5011]="CLIENT_MISMATCH_USER",e[e.CLIENT_DUPLICATED_JOIN=5012]="CLIENT_DUPLICATED_JOIN",e[e.CLIENT_INVALID_JOIN_PARAMETER=5013]="CLIENT_INVALID_JOIN_PARAMETER",e[e.CLIENT_HOST_DISALLOW_RENAME=5014]="CLIENT_HOST_DISALLOW_RENAME",e[e.STREAM_MISMATCH_DEVICE=6e3]="STREAM_MISMATCH_DEVICE",e[e.STREAM_MISMATCH_USER=6001]="STREAM_MISMATCH_USER",e[e.STREAM_SESSION_JOIN_REQUIRED=6002]="STREAM_SESSION_JOIN_REQUIRED",e[e.STREAM_MISMATCH_RENDER_ELEMENT=6003]="STREAM_MISMATCH_RENDER_ELEMENT",e[e.AUDIO_CAPTURE_FAILED=6010]="AUDIO_CAPTURE_FAILED",e[e.AUDIO_CAPTURE_LOADING=6011]="AUDIO_CAPTURE_LOADING",e[e.AUDIO_IN_PSTN=6012]="AUDIO_IN_PSTN",e[e.AUDIO_ENCODING_REQUIRED=6013]="AUDIO_ENCODING_REQUIRED",e[e.AUDIO_SHARE_AUDIO_CONFLICT=6014]="AUDIO_SHARE_AUDIO_CONFLICT",e[e.AUDIO_NOT_STARTED=6015]="AUDIO_NOT_STARTED",e[e.AUDIO_ATTENDEE_NOT_ALLOWED=6016]="AUDIO_ATTENDEE_NOT_ALLOWED",e[e.SECONDARY_AUDIO_UNSUPPORTED=6017]="SECONDARY_AUDIO_UNSUPPORTED",e[e.SECONDARY_AUDIO_DEVICE_CONFLICT=6018]="SECONDARY_AUDIO_DEVICE_CONFLICT",e[e.SECONDARY_AUDIO_SCREEN_SHARING_CONFLICT=6019]="SECONDARY_AUDIO_SCREEN_SHARING_CONFLICT",e[e.SECONDARY_AUDIO_NOT_STARTED=6020]="SECONDARY_AUDIO_NOT_STARTED",e[e.PSTN_MISMATCH_COUNTRY_CODE=6021]="PSTN_MISMATCH_COUNTRY_CODE",e[e.PSTN_NOT_CONNECTED=6022]="PSTN_NOT_CONNECTED",e[e.CRC_NOT_CONNECTED=6023]="CRC_NOT_CONNECTED",e[e.AUDIO_ALLOW_TALK_UNSUPPORTED=6024]="AUDIO_ALLOW_TALK_UNSUPPORTED",e[e.AUDIO_ALLOW_TALK_MISMATCH_USER=6025]="AUDIO_ALLOW_TALK_MISMATCH_USER",e[e.AUDIO_PROCESSOR_UNSUPPORTED=6026]="AUDIO_PROCESSOR_UNSUPPORTED",e[e.AUDIO_PROCESSOR_DUPLICATE_CREATE=6027]="AUDIO_PROCESSOR_DUPLICATE_CREATE",e[e.AUDIO_PROCESSOR_MISMATCH_PROCESSOR=6028]="AUDIO_PROCESSOR_MISMATCH_PROCESSOR",e[e.AUDIO_PROCESSOR_LIMIT_EXCEED=6029]="AUDIO_PROCESSOR_LIMIT_EXCEED",e[e.VIDEO_CAMERA_PERMISSION_DENIED=6100]="VIDEO_CAMERA_PERMISSION_DENIED",e[e.VIDEO_NO_CAMERA=6101]="VIDEO_NO_CAMERA",e[e.VIDEO_MISMATCH_CAMERA=6102]="VIDEO_MISMATCH_CAMERA",e[e.VIDEO_CAMERA_TAKEN=6103]="VIDEO_CAMERA_TAKEN",e[e.VIDEO_VB_INITIALIZE_ERROR=6104]="VIDEO_VB_INITIALIZE_ERROR",e[e.VIDEO_CAPTURE_LOADING=6105]="VIDEO_CAPTURE_LOADING",e[e.VIDEO_MUTED_BY_HOST=6106]="VIDEO_MUTED_BY_HOST",e[e.VIDEO_VB_UNSUPPORTED=6107]="VIDEO_VB_UNSUPPORTED",e[e.VIDEO_VB_PROCESSOR_CONFLICT=6108]="VIDEO_VB_PROCESSOR_CONFLICT",e[e.VIDEO_MISMATCH_STATE=6109]="VIDEO_MISMATCH_STATE",e[e.VIDEO_ESTABLISH_STREAM_ERROR=6110]="VIDEO_ESTABLISH_STREAM_ERROR",e[e.VIDEO_RENDER_LIMIT_EXCEED=6111]="VIDEO_RENDER_LIMIT_EXCEED",e[e.VIDEO_METHOD_DEPRECATED=6112]="VIDEO_METHOD_DEPRECATED",e[e.VIDEO_VB_IMAGE_INACCESSIBLE=6113]="VIDEO_VB_IMAGE_INACCESSIBLE",e[e.VIDEO_VB_MISMATCH_STATE=6114]="VIDEO_VB_MISMATCH_STATE",e[e.VIDEO_MASK_IMAGE_INACCESSIBLE=6115]="VIDEO_MASK_IMAGE_INACCESSIBLE",e[e.VIDEO_MASK_PROCESSOR_CONFLICT=6116]="VIDEO_MASK_PROCESSOR_CONFLICT",e[e.VIDEO_SPOTLIGHT_MISMATCH_STATE=6117]="VIDEO_SPOTLIGHT_MISMATCH_STATE",e[e.VIDEO_SPOTLIGHT_MULTI_CONFLICT=6118]="VIDEO_SPOTLIGHT_MULTI_CONFLICT",e[e.VIDEO_PROCESSOR_UNSUPPORTED=6119]="VIDEO_PROCESSOR_UNSUPPORTED",e[e.VIDEO_PROCESSOR_LIMIT_EXCEED=6120]="VIDEO_PROCESSOR_LIMIT_EXCEED",e[e.VIDEO_PROCESSOR_DUPLICATE_CREATE=6121]="VIDEO_PROCESSOR_DUPLICATE_CREATE",e[e.VIDEO_PROCESSOR_MISMATCH_PROCESSOR=6122]="VIDEO_PROCESSOR_MISMATCH_PROCESSOR",e[e.FAR_END_CAMERA_CONTROL_DEVICE_UNSUPPORTED=6150]="FAR_END_CAMERA_CONTROL_DEVICE_UNSUPPORTED",e[e.FAR_END_CAMERA_CONTROL_MISMATCH_STATE=6151]="FAR_END_CAMERA_CONTROL_MISMATCH_STATE",e[e.FAR_END_CAMERA_PERMISSION_REQUIRED=6152]="FAR_END_CAMERA_PERMISSION_REQUIRED",e[e.FAR_END_CAMERA_INVALID_RANGE=6153]="FAR_END_CAMERA_INVALID_RANGE",e[e.FAR_END_CAMERA_RATE_LIMIT=6154]="FAR_END_CAMERA_RATE_LIMIT",e[e.SCREEN_SHARE_USER_DENIED=6200]="SCREEN_SHARE_USER_DENIED",e[e.SCREEN_SHARE_SYSTEM_DENIED=6201]="SCREEN_SHARE_SYSTEM_DENIED",e[e.SCREEN_SHARE_UNSUPPORTED=6202]="SCREEN_SHARE_UNSUPPORTED",e[e.SCREEN_SHARE_SUBSESSION_CONFLICT=6203]="SCREEN_SHARE_SUBSESSION_CONFLICT",e[e.SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED=6204]="SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED",e[e.SCREEN_SHARE_MISMATCH_STATE=6205]="SCREEN_SHARE_MISMATCH_STATE",e[e.SCREEN_SHARE_OPTIMIZE_VIDEO_UNSUPPORTED=6206]="SCREEN_SHARE_OPTIMIZE_VIDEO_UNSUPPORTED",e[e.SCREEN_SHARE_OPTIMIZE_VIDEO_CONFLICT=6207]="SCREEN_SHARE_OPTIMIZE_VIDEO_CONFLICT",e[e.SCREEN_SHARE_INVALID_PRIVILEGE=6208]="SCREEN_SHARE_INVALID_PRIVILEGE",e[e.SCREEN_SHARE_IB_DENIED=6209]="SCREEN_SHARE_IB_DENIED",e[e.SCREEN_SHARE_LIMIT_EXCEED=6218]="SCREEN_SHARE_LIMIT_EXCEED",e[e.SCREEN_SHARE_ANNOTATION_ACCOUNT_DISABLE=6210]="SCREEN_SHARE_ANNOTATION_ACCOUNT_DISABLE",e[e.SCREEN_SHARE_ANNOTATION_NO_ACTIVE_SHARE=6211]="SCREEN_SHARE_ANNOTATION_NO_ACTIVE_SHARE",e[e.SCREEN_SHARE_ANNOTATION_PRESENTER_DISABLED=6212]="SCREEN_SHARE_ANNOTATION_PRESENTER_DISABLED",e[e.SCREEN_SHARE_ANNOTATION_DUPLICATE_START=6213]="SCREEN_SHARE_ANNOTATION_DUPLICATE_START",e[e.SCREEN_SHARE_ANNOTATION_START_ERROR=6214]="SCREEN_SHARE_ANNOTATION_START_ERROR",e[e.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER=6215]="SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER",e[e.SCREEN_SHARE_ANNOTATION_NOT_SUPPORT=6216]="SCREEN_SHARE_ANNOTATION_NOT_SUPPORT",e[e.SCREEN_SHARE_ANNOTATION_NOT_START=6217]="SCREEN_SHARE_ANNOTATION_NOT_START",e[e.SHARE_CAMERA_MESSAGE_ERROR=6219]="SHARE_CAMERA_MESSAGE_ERROR",e[e.SHARED_PROCESSOR_UNSUPPORTED=6223]="SHARED_PROCESSOR_UNSUPPORTED",e[e.SHARED_PROCESSOR_DUPLICATE_CREATE=6224]="SHARED_PROCESSOR_DUPLICATE_CREATE",e[e.SHARED_PROCESSOR_MISMATCH_PROCESSOR=6225]="SHARED_PROCESSOR_MISMATCH_PROCESSOR",e[e.SHARED_PROCESSOR_LIMIT_EXCEED=6226]="SHARED_PROCESSOR_LIMIT_EXCEED",e[e.REMOTE_CONTROL_ACCOUNT_DISABLE=6300]="REMOTE_CONTROL_ACCOUNT_DISABLE",e[e.REMOTE_CONTROL_MISMATCH_STATE=6301]="REMOTE_CONTROL_MISMATCH_STATE",e[e.REMOTE_CONTROL_PERMISSION_REQUIRED=6302]="REMOTE_CONTROL_PERMISSION_REQUIRED",e[e.REMOTE_CONTROL_MISMATCH_DISPLAY_SURFACE=6303]="REMOTE_CONTROL_MISMATCH_DISPLAY_SURFACE",e[e.REMOTE_CONTROL_INVALID_LAUNCH_SCHEME=6304]="REMOTE_CONTROL_INVALID_LAUNCH_SCHEME",e[e.CHAT_EMPTY_MESSAGE=7e3]="CHAT_EMPTY_MESSAGE",e[e.CHAT_MISMATCH_USER=7001]="CHAT_MISMATCH_USER",e[e.CHAT_INSUFFICIENT_PRIVILEGE=7002]="CHAT_INSUFFICIENT_PRIVILEGE",e[e.CHAT_INVALID_PRIVILEGE=7003]="CHAT_INVALID_PRIVILEGE",e[e.CHAT_SUBSESSION_CONFLICT=7004]="CHAT_SUBSESSION_CONFLICT",e[e.CHAT_EMPTY_FILE=7005]="CHAT_EMPTY_FILE",e[e.CHAT_INVALID_RETRY_TOKEN=7006]="CHAT_INVALID_RETRY_TOKEN",e[e.CHAT_MISMATCH_FILE_TYPE=7007]="CHAT_MISMATCH_FILE_TYPE",e[e.CHAT_EXCEED_FILE_SIZE=7008]="CHAT_EXCEED_FILE_SIZE",e[e.CHAT_INVALID_MSG_ID_OR_URL=7009]="CHAT_INVALID_MSG_ID_OR_URL",e[e.CHAT_FILE_ACCOUNT_DISABLE=7010]="CHAT_FILE_ACCOUNT_DISABLE",e[e.CHAT_DELETE_ACCOUNT_DISABLE=7011]="CHAT_DELETE_ACCOUNT_DISABLE",e[e.CMD_EMPTY_MESSAGE=7100]="CMD_EMPTY_MESSAGE",e[e.CMD_MISMATCH_USER=7101]="CMD_MISMATCH_USER",e[e.CMD_INVALID_MESSAGE_TYPE=7102]="CMD_INVALID_MESSAGE_TYPE",e[e.CMD_EXCEED_MESSAGE_LENGTH=7103]="CMD_EXCEED_MESSAGE_LENGTH",e[e.CMD_CHANNEL_NOT_READY=7104]="CMD_CHANNEL_NOT_READY",e[e.RECORDING_ACCOUNT_DISABLE=7200]="RECORDING_ACCOUNT_DISABLE",e[e.RECORDING_STOP_FORBIDDEN=7201]="RECORDING_STOP_FORBIDDEN",e[e.RECORDING_MISMATCH_STATE=7202]="RECORDING_MISMATCH_STATE",e[e.RECORDING_ISO_DISABLE=7203]="RECORDING_ISO_DISABLE",e[e.RECORDING_IQ_DISABLE=7204]="RECORDING_IQ_DISABLE",e[e.RECORDING_IQ_PERMISSION_REQUIRED=7205]="RECORDING_IQ_PERMISSION_REQUIRED",e[e.RECORDING_IQ_MISMATCH_STATE=7206]="RECORDING_IQ_MISMATCH_STATE",e[e.LOCAL_RECORDING_ACCOUNT_DISABLE=7207]="LOCAL_RECORDING_ACCOUNT_DISABLE",e[e.LOCAL_RECORDING_INVALID_VALUE=7208]="LOCAL_RECORDING_INVALID_VALUE",e[e.LOCAL_RECORDING_MISMATCH_STATE=7209]="LOCAL_RECORDING_MISMATCH_STATE",e[e.TRANSCRIPTION_ACCOUNT_DISABLE=7300]="TRANSCRIPTION_ACCOUNT_DISABLE",e[e.TRANSCRIPTION_FEATURE_DISABLE=7301]="TRANSCRIPTION_FEATURE_DISABLE",e[e.TRANSCRIPTION_LANGUAGE_UNSUPPORTED=7302]="TRANSCRIPTION_LANGUAGE_UNSUPPORTED",e[e.TRANSCRIPTION_MISMATCH_STATE=7303]="TRANSCRIPTION_MISMATCH_STATE",e[e.TRANSLATION_ACCOUNT_DISABLE=7304]="TRANSLATION_ACCOUNT_DISABLE",e[e.TRANSLATION_LANGUAGE_UNSUPPORTED=7305]="TRANSLATION_LANGUAGE_UNSUPPORTED",e[e.MANUAL_CAPTION_ACCOUNT_DISABLE=7306]="MANUAL_CAPTION_ACCOUNT_DISABLE",e[e.MANUAL_CAPTION_FEATURE_DISABLE=7307]="MANUAL_CAPTION_FEATURE_DISABLE",e[e.MANUAL_CAPTION_MISMATCH_USER=7308]="MANUAL_CAPTION_MISMATCH_USER",e[e.MANUAL_CAPTION_INSUFFICIENT_PRIVILEGE=7309]="MANUAL_CAPTION_INSUFFICIENT_PRIVILEGE",e[e.TRANSCRIPTION_LANGUAGE_LOCKED=7310]="TRANSCRIPTION_LANGUAGE_LOCKED",e[e.LIVE_STREAM_ACCOUNT_DISABLE=7400]="LIVE_STREAM_ACCOUNT_DISABLE",e[e.LIVE_STREAM_INVALID_PARAMETER=7401]="LIVE_STREAM_INVALID_PARAMETER",e[e.LIVE_STREAM_MISMATCH_STATE=7402]="LIVE_STREAM_MISMATCH_STATE",e[e.SUBSESSION_ACCOUNT_DISABLE=7500]="SUBSESSION_ACCOUNT_DISABLE",e[e.SUBSESSION_EXCEED_CAPACITY=7501]="SUBSESSION_EXCEED_CAPACITY",e[e.SUBSESSION_MISMATCH_ID=7502]="SUBSESSION_MISMATCH_ID",e[e.SUBSESSION_MISMATCH_USER=7503]="SUBSESSION_MISMATCH_USER",e[e.SUBSESSION_MISMATCH_STATE=7504]="SUBSESSION_MISMATCH_STATE",e[e.SUBSESSION_EXIT_RESTRICTED=7505]="SUBSESSION_EXIT_RESTRICTED",e[e.SUBSESSION_BROADCAST_DISABLE=7506]="SUBSESSION_BROADCAST_DISABLE",e[e.SUBSESSION_BROADCAST_INVALID_CONTENT=7507]="SUBSESSION_BROADCAST_INVALID_CONTENT",e[e.SUBSESSION_BROADCAST_VOICE_DISABLE=7508]="SUBSESSION_BROADCAST_VOICE_DISABLE",e[e.SUBSESSION_BROADCAST_VOICE_RESTRICTED=7509]="SUBSESSION_BROADCAST_VOICE_RESTRICTED",e[e.SUBSESSION_BROADCAST_VOICE_MISMATCH_STATE=7510]="SUBSESSION_BROADCAST_VOICE_MISMATCH_STATE",e[e.REACTION_ACCOUNT_DISABLE=7600]="REACTION_ACCOUNT_DISABLE",e[e.REACTION_INVALID_PARAMETER=7601]="REACTION_INVALID_PARAMETER",e[e.SUMMARY_ACCOUNT_DISABLE=7700]="SUMMARY_ACCOUNT_DISABLE",e[e.QA_INVALID_PARAMETER=7800]="QA_INVALID_PARAMETER",e[e.QA_INSUFFICIENT_PRIVILEGE=7801]="QA_INSUFFICIENT_PRIVILEGE",e[e.BROADCAST_STREAMING_ACCOUNT_DISABLE=7900]="BROADCAST_STREAMING_ACCOUNT_DISABLE",e[e.BROADCAST_STREAMING_MISMATCH_STATE=7901]="BROADCAST_STREAMING_MISMATCH_STATE",e[e.BROADCAST_STREAMING_INVALID_CHANNEL_ID=7902]="BROADCAST_STREAMING_INVALID_CHANNEL_ID",e[e.WHITEBOARD_NOT_INIT=8e3]="WHITEBOARD_NOT_INIT",e[e.WHITEBOARD_NOT_INIT_SUCCESS=8001]="WHITEBOARD_NOT_INIT_SUCCESS",e[e.WHITEBOARD_PRESENTER_LEAVE=8002]="WHITEBOARD_PRESENTER_LEAVE",e[e.WHITEBOARD_TOKEN_NOT_AVAILABLE=8003]="WHITEBOARD_TOKEN_NOT_AVAILABLE",e[e.WHITEBOARD_BACKEND_ERROR=8004]="WHITEBOARD_BACKEND_ERROR",e[e.WHITEBOARD_GET_INIT_TOKEN_FAIL=8005]="WHITEBOARD_GET_INIT_TOKEN_FAIL",e[e.WHITEBOARD_LOAD_WHITEBOARD_JS_CSS_ERROR=8006]="WHITEBOARD_LOAD_WHITEBOARD_JS_CSS_ERROR",e[e.WHITEBOARD_VIDEOSDK_NOT_SUPPORT_DASHBOARD=8007]="WHITEBOARD_VIDEOSDK_NOT_SUPPORT_DASHBOARD",e[e.WHITEBOARD_MEETING_NOT_JOINED=8008]="WHITEBOARD_MEETING_NOT_JOINED",e[e.WHITEBOARD_ELEMENT_NOT_FOUND=8009]="WHITEBOARD_ELEMENT_NOT_FOUND",e[e.WHITEBOARD_WEBINAR_NOT_SUPPORTED=8010]="WHITEBOARD_WEBINAR_NOT_SUPPORTED",e[e.WHITEBOARD_DOC_ID_NOT_AVAILABLE=8011]="WHITEBOARD_DOC_ID_NOT_AVAILABLE",e[e.WHITEBOARD_INSUFFICIENT_PRIVILEGES=8012]="WHITEBOARD_INSUFFICIENT_PRIVILEGES",e[e.WHITEBOARD_INVALID_STATE=8013]="WHITEBOARD_INVALID_STATE",e[e.WHITEBOARD_NOT_AVAILABLE=8014]="WHITEBOARD_NOT_AVAILABLE",e[e.WHITEBOARD_PRIVILEGE_SET_FAILED=8015]="WHITEBOARD_PRIVILEGE_SET_FAILED",e[e.WHITEBOARD_USER_ROLE_CHANGE_FAILED=8016]="WHITEBOARD_USER_ROLE_CHANGE_FAILED",e[e.WHITEBOARD_LOCK_API_NOT_AVAILABLE=8017]="WHITEBOARD_LOCK_API_NOT_AVAILABLE",e[e.WHITEBOARD_NOT_OPENED=8018]="WHITEBOARD_NOT_OPENED",e[e.WHITEBOARD_INVALID_EXPORT_FORMAT=8019]="WHITEBOARD_INVALID_EXPORT_FORMAT",e[e.WHITEBOARD_NEED_RETRY=8020]="WHITEBOARD_NEED_RETRY",e[e.WHITEBOARD_REQUIRE_SHARING_STOP=8021]="WHITEBOARD_REQUIRE_SHARING_STOP",e[e.WHITEBOARD_ALREADY_OPEN=8022]="WHITEBOARD_ALREADY_OPEN",e[e.WHITEBOARD_AND_SHARING_CONFLICT=8023]="WHITEBOARD_AND_SHARING_CONFLICT",e[e.WHITEBOARD_AND_ANNOTATION_CONFLICT=8024]="WHITEBOARD_AND_ANNOTATION_CONFLICT",e[e.WHITEBOARD_DASHBOARD_IFRAME_NOT_FOUND=8030]="WHITEBOARD_DASHBOARD_IFRAME_NOT_FOUND",e}({});const Na="WHITEBOARD_STATUS_EVENTS",Ma="WHITEBOARD_DASHBOARD_STATUS_EVENTS",Pa="WHITEBOARD_PRIVILEGE_STATUS_EVENTS",La="WHITEBOARD_MESSAGE_EVENTS";let ka=function(e){return e.WhiteboardStatusChange="whiteboard-status-change",e.WhiteboardDashboardStatusChange="whiteboard-dashboard-status-change",e.WhiteboardPrivilegeStatus="whiteboard-privilege-change",e}({});const Ua={...Zo,...nn,...hn,...vn,...wn,...qi,...gi,...Ms,...Ds,...Qs,...ma,...Sa,"closed-caption-message":[{event:"CC_RECEIVE_MESSAGE",payload:e=>e}],"closed-caption-lt-status":[{event:"LT_STATUS_CHANGE",payload:e=>e}],"closed-caption-lt-message":[{event:"LT_RECEIVE_MESSAGE",payload:e=>e}],"closed-caption-status":[{event:"CC_ASSIGN_CC_EDITOR_SUCCESS",payload:e=>e},{event:"CC_STATUS_CHANGE",payload:e=>e}],...fa,...Ea,...ba,...Ta,...Da,[ka.WhiteboardStatusChange]:[{event:Na,payload:e=>e}],[ka.WhiteboardDashboardStatusChange]:[{event:Ma,payload:e=>e}],[ka.WhiteboardPrivilegeStatus]:[{event:Pa,payload:e=>e}]},Va=function(e){return{all:e=e||new Map,on:function(t,r){var o=e.get(t);o?o.push(r):e.set(t,[r])},off:function(t,r){var o=e.get(t);o&&(r?o.splice(o.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var o=e.get(t);o&&o.slice().map((function(e){e(r)})),(o=e.get("*"))&&o.slice().map((function(e){e(t,r)}))}}}(),Ba=new Map,Ha=new Array,ja=[Go,xo,$o];let Fa,Wa;function xa(){return e=>e.pipe(Mt((function(e,t){e.subscribe(Pt(t,(function(e){t.next(Rr.createNext(e))}),(function(){t.next(Rr.createComplete()),t.complete()}),(function(e){t.next(Rr.createError(e)),t.complete()})))})),$r((e=>"C"===e.kind?Cr(e).pipe(_r(Xt)):Cr(e))),Mt((function(e,t){e.subscribe(Pt(t,(function(e){return Or(e,t)})))})))}const $a=(e,t=void 0)=>{Va.emit(e,t)};function Ga(e){return ja.includes(e)?Xr(Va,e):(Fa&&Wa||(Fa=new Vt,Wa=no(...ja.map((e=>Xr(Va,e)))).subscribe(Fa)),Xr(Va,e).pipe(bo(Fa)))}const za=e=>new Promise(((t,r)=>{if(e.fail&&e.fail.length>0){var o;const n=ja.filter((t=>{var r;return!(null!==(r=e.fail)&&void 0!==r&&r.includes(t))})),i=n.length>0?no(...n.map((e=>Ga(e).pipe(mo(1),Ur((()=>({type:et,reason:e,errorCode:wa.OPERATION_CANCELLED}))))))):io;co(Ga(e.success).pipe(mo(1),xa(),ho(null!==(o=e.fail)&&void 0!==o&&o.some((e=>ja.includes(e)))?io:or)),no(...e.fail.map((e=>Ga(e).pipe(mo(1),xa(),$r((t=>Tr({type:e,payload:t}))))))),i).subscribe({next:e=>e&&e.type===et?r(e):t(e),error(e){if("object"==typeof e.payload){const t={...e.payload};e.payload instanceof Error&&Object.assign(t,{name:e.payload.name,message:e.payload.message}),r({type:e.type,...t})}else void 0===e.payload?r({type:e.type}):r(e)}})}else Ga(e.success).pipe(mo(1)).subscribe((e=>t(e)))})),qa=(e,t,r=1e4)=>new Promise(((o,n)=>{let i=or;"string"==typeof e?i=Ga(e).pipe(mo(1)):(i=Ga(e.event),e.operations&&(i=e.operations.reduce(((e,t)=>e.pipe(t)),i))),co(i,ro(r).pipe($r((()=>Tr("timeout"))))).subscribe({next(e){if(t){const r=t(e);"boolean"==typeof r?r?o(""):n({type:Je,errorCode:wa.INTERNAL_ERROR}):0===r.ret?o(r.body):n({type:Je,errorCode:wa.INTERNAL_ERROR,reason:r.body})}else o(e)},error(){n({type:Qe,errorCode:wa.OPERATION_TIMEOUT})}})})),Ka=(e,t)=>void 0!==t?Ga(e).pipe(mo(t)):Ga(e);function Ja(e){const t=ja.map((e=>Ka(e,1)));return e&&t.push(e),co(...t)}const Qa=()=>{var e;Ha.forEach((e=>{e.unsubscribe()})),Ha.length=0,Ba.clear(),Fa&&(Fa.complete(),null===(e=Wa)||void 0===e||e.unsubscribe(),Fa=void 0)};var Ya="NOT_FOUND",Za=function(e,t){return e===t};function Xa(e,t){var r,o,n="object"==typeof t?t:{equalityCheck:t},i=n.equalityCheck,s=void 0===i?Za:i,a=n.maxSize,u=void 0===a?1:a,d=n.resultEqualityCheck,c=function(e){return function(t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var o=t.length,n=0;n<o;n++)if(!e(t[n],r[n]))return!1;return!0}}(s),l=1===u?(r=c,{get:function(e){return o&&r(o.key,e)?o.value:Ya},put:function(e,t){o={key:e,value:t}},getEntries:function(){return o?[o]:[]},clear:function(){o=void 0}}):function(e,t){var r=[];function o(e){var o=r.findIndex((function(r){return t(e,r.key)}));if(o>-1){var n=r[o];return o>0&&(r.splice(o,1),r.unshift(n)),n.value}return Ya}return{get:o,put:function(t,n){o(t)===Ya&&(r.unshift({key:t,value:n}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(u,c);function p(){var t=l.get(arguments);if(t===Ya){if(t=e.apply(null,arguments),d){var r=l.getEntries().find((function(e){return d(e.value,t)}));r&&(t=r.value)}l.put(arguments,t)}return t}return p.clearCache=function(){return l.clear()},p}function eu(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];var i,s=0,a={memoizeOptions:void 0},u=o.pop();if("object"==typeof u&&(a=u,u=o.pop()),"function"!=typeof u)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof u+"]");var d=a.memoizeOptions,c=void 0===d?r:d,l=Array.isArray(c)?c:[c],p=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}(o),h=e.apply(void 0,[function(){return s++,u.apply(null,arguments)}].concat(l)),m=e((function(){for(var e=[],t=p.length,r=0;r<t;r++)e.push(p[r].apply(null,arguments));return i=h.apply(null,e)}));return Object.assign(m,{resultFunc:u,memoizedResultFunc:h,dependencies:p,lastResult:function(){return i},recomputations:function(){return s},resetRecomputations:function(){return s=0}}),m}}var tu=eu(Xa);const ru=({participants:{attendeesList:e}})=>e,ou=({meeting:{userId:e}})=>e,nu=({participants:{xmppAttendeeList:e}})=>e;let iu=function(e){return e[e.Attendee=0]="Attendee",e[e.Host=1]="Host",e[e.Owner=4]="Owner",e[e.ViewOnly=8]="ViewOnly",e[e.HostOwner=5]="HostOwner",e[e.ViewOnlyCanTalk=24]="ViewOnlyCanTalk",e}({}),su=function(e){return e[e.Host=10]="Host",e[e.Panelist=20]="Panelist",e[e.Attendee=30]="Attendee",e}({}),au=function(e){return e[e.Client=9]="Client",e[e.Phone=5]="Phone",e[e.H323=15]="H323",e[e.Assitant=51]="Assitant",e}({});const uu=e=>(e&iu.Host)===iu.Host,du=e=>(e&au.Phone)===au.Phone,cu=e=>e===iu.ViewOnlyCanTalk,lu=e=>(e&iu.ViewOnly)===iu.ViewOnly;let pu=function(e){return e[e.Automatically=1]="Automatically",e[e.Manually=2]="Manually",e[e.SelfSelect=3]="SelfSelect",e}({}),hu=function(e){return e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Closing=3]="Closing",e[e.Closed=4]="Closed",e}({}),mu=function(e){return e[e.NoToken=1]="NoToken",e[e.GotToken=2]="GotToken",e[e.Started=3]="Started",e[e.Closing=4]="Closing",e[e.Closed=5]="Closed",e}({}),gu=function(e){return e.Initial="initial",e.Invited="invited",e.Joining="joining",e.InRoom="in room",e.Leaving="leaving",e.TimeUp="time up",e.MainSession="main session",e}({}),Su=function(e){return e.Join="joinRequest",e.Switch="switchRequest",e.Leave="leaveRequest",e.Broadcast="messageText",e.HelpReq="helpRequest",e.HelpRes="helpResponse",e.CoHostWantJoinThisBo="wantJoinThisBO",e.BOActivity="BOActivity",e}({});const vu="Subsession";let fu=function(e){return e[e.Received=0]="Received",e[e.Busy=1]="Busy",e[e.Ignore=2]="Ignore",e[e.AlreadyInRoom=3]="AlreadyInRoom",e}({}),yu=function(e){return e[e.AskToLeave=0]="AskToLeave",e[e.ClosingRoom=1]="ClosingRoom",e}({}),Eu=function(e){return e[e.Active=0]="Active",e[e.Ask=1]="Ask",e}({}),_u=function(e){return e[e.Connect=1]="Connect",e[e.Muted=2]="Muted",e[e.Voip=4]="Voip",e}({}),Iu=function(e){return e[e.Connect=8]="Connect",e[e.On=16]="On",e}({}),Au=function(e){return e[e.Share=32]="Share",e[e.ShareAudio=64]="ShareAudio",e}({});const bu=({breakoutRoom:e})=>e&&e.controlStatus,Cu=({breakoutRoom:e})=>e&&e.currentRoom.status,Tu=tu([ou,ru],((e,t)=>t.find((t=>t.userId===e)))),Ru=tu([Tu],(e=>(null==e?void 0:e.isHost)||(null==e?void 0:e.bCoHost))),Ou=tu([Tu],(e=>null==e?void 0:e.isHost)),Du=tu([nu],(e=>e.filter((e=>e.userRole===su.Attendee)))),wu=tu([ru],(e=>e.filter((e=>e.bHold&&!e.bid)))),Nu=tu([ru,bu,Cu],((e,t,r)=>t!==hu.InProgress&&t!==hu.Closing||r!==gu.InRoom?e.filter((e=>!e.bHold&&!e.bid)):e.filter((e=>!e.bHold)))),Mu=tu([({participants:{assistantList:e}})=>e],(e=>e)),Pu=tu([Nu],(e=>e.find((e=>e.isHost)))),Lu=tu([Nu],(e=>e.filter((e=>e.bCoHost)))),ku=tu([Tu,Nu],((e,t)=>t.filter((t=>t.userId!==(null==e?void 0:e.userId)))));tu([nu],(e=>e.reduce(((e,t)=>{const{jid:r}=t;return Object.assign(e,{[r]:t}),e}),{}))),tu([nu,({meeting:{jid:e}})=>e],((e,t)=>{var r;return null===(r=e.find((e=>e.jid===t)))||void 0===r?void 0:r.userId}));const Uu=tu([ru],((e=[])=>e.some((e=>(null==e?void 0:e.bLocalRecord)===En.Start)))),Vu=tu([bu,({meeting:e})=>e&&e.meetingOptions,ru,Ou],((e,t,r,o)=>{const n=r.filter((e=>e.bCoHost)),{moveToWRIfHostLeave:i}=t,s=e===hu.InProgress;return o&&!!i&&n.length<=0&&!s&&r.length>1}));tu([ru,Cu,({breakoutRoom:e})=>e&&e.mainSessionAttendeeList],((e,t,r)=>(t===gu.InRoom?r:e).filter((e=>{return!(e.bHold||e.isHost||e.audio===ye.Phone||du(null==e?void 0:e.userType)||(t=null==e?void 0:e.caps,r=null==e?void 0:e.bMultiStreamVideoUser,((e,t)=>(e=>!!(128&e))(e)&&void 0!==t)(t,r)&&r));var t,r}))));class Bu{constructor(e){this._cancelError=new Error("request for lock canceled"),this._locked=void 0,this._queue=[],this._waiters=[],this._currentReleaser=void 0,e&&(this._cancelError=e),this._locked=!1}acquire(){const e=this.isLocked(),t=new Promise(((e,t)=>this._queue.push({resolve:e,reject:t})));return e||this._dispatch(),t}async runExclusive(e){const t=await this.acquire();try{return await e()}finally{t()}}async waitForUnlock(){return this.isLocked()?new Promise((e=>this._waiters.push({resolve:e}))):Promise.resolve()}isLocked(){return this._locked}release(){if(this._currentReleaser){const e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach((e=>e.reject(this._cancelError))),this._queue=[]}_dispatch(){const e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._locked=!1,this._resolveWaiters(),this._dispatch())},this._locked=!0,e.resolve(this._currentReleaser)}_resolveWaiters(){this._waiters.forEach((e=>e.resolve())),this._waiters=[]}}let Hu=function(e){return e.VideoEncode="0",e.VideoDecode="1",e.AudioEncode="2",e.AudioDecode="3",e.SharingEncode="4",e.SharingDecode="5",e.Common="7",e}({});class ju{static getInstance(){return void 0===this.agentInstance&&(this.agentInstance=new ju),this.agentInstance}constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.constraints=void 0,this.svcUrl=void 0,this.meetingNumber=void 0,this.confId=void 0,this.currentUserId=void 0,this.receivedSharingCanvas=void 0,this.sharingCanvas=void 0,this.annotationCanvas=void 0,this.annotationPresenterCanvas=void 0,this.mediaOptions=void 0,this.inProgress=void 0,this.callbackList=[]}init(e){!this.instance&&window.JsMediaSDK_Instance&&(this.instance=new window.JsMediaSDK_Instance(e))}setAssetsAndConstraint(e,t){this.assetsPath=e,this.constraints=t,this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this)}onMediaSDKCallback(e,t){this.callbackList.length>0&&this.callbackList.forEach((r=>r(e,t)))}registerCallback(e){this.callbackList.push(e)}unregisterCallback(e){this.callbackList=this.callbackList.filter((t=>t!==e))}static isSupportVideoEncodeHardwareAcceleration(){return window.JsMediaSDK_Instance.util.IsSupportVideoEncodeHardwareAcceleration()}static isSupportVideoDecodeHardwareAcceleration(){return window.JsMediaSDK_Instance.util.IsSupportVideoDecodeHardwareAcceleration()}static isCompatibleHardwareForEncode(){var e;return C.isSupportOffscreenCanvas&&0==(null===(e=window.JsMediaSDK_Instance)||void 0===e?void 0:e.util.AdapterWhiteListCheckForEncoder())}static getPTZCapability(){var e,t,r,o,n,i;return{pan:!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||null===(t=e.isSupportCameraPan)||void 0===t||!t.call(e)),tilt:!(null===(r=window.JsMediaSDK_Instance)||void 0===r||null===(r=r.util)||void 0===r||null===(o=r.isSupportCameraTilt)||void 0===o||!o.call(r)),zoom:!(null===(n=window.JsMediaSDK_Instance)||void 0===n||null===(n=n.util)||void 0===n||null===(i=n.isSupportCameraZoom)||void 0===i||!i.call(n))}}static isSupportVideoShare(){var e,t;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||null===(t=e.isSupportVideoShareReceive)||void 0===t||!t.call(e))}static getVideoProcessorCapability(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||null===(t=t.util)||void 0===t||!t.isSupportVideoProcessor(e))}static getAudioProcessorCapability(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||null===(t=t.util)||void 0===t||!t.isSupportAudioProcessor(e))}static getShareProcessorCapability(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||null===(t=t.util)||void 0===t||!t.isSupportShareProcessor(e))}static isSupportVideoShareSend(){var e,t;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||null===(t=e.isSupportVideoShareSend)||void 0===t||!t.call(e))}static isSupportSending720P(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||!e.get720pcapacity())}static isSupportSubscribing1080P(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||!e.getsub1080pcapacity())}static isSupportOpenMicWhenShareAudio(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||!t.util.isSupportOpenMicWhenShareAudio(e))}static isSupportMediaPlaybackAsVideoInput(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util.videoToMediaStreamManager)||void 0===e||!e.isSupported())}static isSupportMediaPlaybackAsAudioInput(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util.audioToMediaStreamMananger)||void 0===e||!e.isSupported())}static isSupportAudioDenoise(e,t){var r;return!(null===(r=window.JsMediaSDK_Instance)||void 0===r||!r.util.isSupportAudioDenoise(e,t))}static isSupportAudioBridgeAVSync(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||!e.util.isSupportAudioBridgeAvsync())}static getAudioFeatureFlag(e){var t;return null===(t=window.JsMediaSDK_Instance)||void 0===t?void 0:t.util.getAudioFeatureFlags(e)}static isSupportShareMultiStream(){var e;return null===(e=window.JsMediaSDK_Instance)||void 0===e?void 0:e.util.isSupportShareMultiStream()}static isSupportVideoLTR(){var e;return null===(e=window.JsMediaSDK_Instance)||void 0===e?void 0:e.util.isSupportVideoLTR()}static isSupportStereoAudio(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||!e.util.isBrowserSupportStereo())}static isSupportFullHDVideo(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||!t.util.isSupportSendVideoFullHD(e))}static isSupportFullHDVideoShare(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||!t.util.isSupportSendVideoShareFullHD(e))}static isRenderSelfViewWithVideoElement(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||!e.util.isSelfPreviewRenderWithVideo())}static getWebRTCCapability(e,t,r){var o;return null===(o=window.JsMediaSDK_Instance)||void 0===o?void 0:o.util.evaluateWebRTCStrategy(e,t,r)}static getMaxCountRender(e,t,r){var o;const n=r?{disableRenderLimits:!0}:t;return null===(o=window.JsMediaSDK_Instance)||void 0===o?void 0:o.util.getMaxCountRender(e,n)}static isSupportMultipleView(){var e;return null===(e=window.JsMediaSDK_Instance)||void 0===e?void 0:e.util.isSupportMultiViewAPI()}static isSupportShare2ndAudioDevice(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||!t.util.isSupportShare2ndAudioDevice(e))}static getWebRtcAudioMode(e,t,r,o){var n;return null===(n=window.JsMediaSDK_Instance)||void 0===n?void 0:n.util.evaluateAudioStrategy(e,t,r,o)}static getAnnotationCapability(e){var t;return null===(t=window.JsMediaSDK_Instance)||void 0===t?void 0:t.util.getAnnotationCapability(e)}static initVideoPlayer(e){var t;return null===(t=window.JsMediaSDK_Instance)||void 0===t?void 0:t.initVideoPlayer(e)}connect({svcUrl:e,meetingNumber:t,conId:r,confId:o,e2eEncrypt:n,isViewOnly:i,currentUserId:s,isWebinar:a,enableWebtransport:u=!1,webtransportPort:d,isWebRtcVideoCapable:c,rendererType:l,isWebRtcAudioCapable:p,mediasdkConfig:h,enforceMultipleVideos:m,disableRenderLimits:g,reportDomain:S,abToken:v,webrtcMode:f}){var y,E,_,I;const{isSupportEssentialAudioAndVideoAbility:A,isSupportAudioWorklet:b,isSupportSendScreenSharing:T}=C;this.svcUrl=e,this.meetingNumber=t,this.confId=r,this.currentUserId=s;const R=ju.getMaxCountRender(c,m,g);if(null===(y=this.instance)||void 0===y||y.setProps({callback:this.onMediaSDKCallback,isPreviewMode:!1,meetingParams:{cid:r,confId:o,userId:s,rwgHost:e,nginxHost:S,abToken:v,e2eEncrypt:n,enableWebtransport:u,webtransportPort:d,rwgToMediaSDKConfig:h,webrtcMode:f},mediaParams:{videoDecodeThreadNum:R,rendererType:l,isEnableHD:!0,isEnableHW:!0}}),!0===(null===(E=this.constraints)||void 0===E?void 0:E.audio)&&A){const e=b||p;var O,D;(a||e)&&(null===(O=this.instance)||void 0===O||O.initAudioDecode()),!e||a&&i||null===(D=this.instance)||void 0===D||D.initAudioEncode()}var w,N,M,P;!0===(null===(_=this.constraints)||void 0===_?void 0:_.video)&&A&&(null===(w=this.instance)||void 0===w||w.initVideoDecode(),a&&i||null===(N=this.instance)||void 0===N||N.initVideoEncode()),!0===(null===(I=this.constraints)||void 0===I?void 0:I.screen)&&A&&(null===(M=this.instance)||void 0===M||M.initSharingDecode(),!T||a&&i||null===(P=this.instance)||void 0===P||P.initSharingEncode()),this.inProgress=!0}async addProcessor(e){var t;return await(null===(t=this.instance)||void 0===t?void 0:t.addProcessor(e))}async startProcessor(e){var t;await(null===(t=this.instance)||void 0===t?void 0:t.startProcessor(e))}async stopProcessor(e){var t;await(null===(t=this.instance)||void 0===t?void 0:t.stopProcessor(e))}async destroy(){var e;this.callbackList=[],[Hu.AudioDecode,Hu.AudioEncode,Hu.VideoDecode,Hu.VideoEncode].forEach((e=>{var t;null===(t=this.instance)||void 0===t||t.updateQosSubscription(!1,e)}));const t=null===(e=this.instance)||void 0===e?void 0:e.destroy.bind(this.instance);this.instance=null,this.inProgress=!1,await(null==t?void 0:t())}disconnect(){var e,t;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(17,{}),null===(t=this.instance)||void 0===t||t.JsMediaSDK_UnInit()}muteAudio(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(8,{ssrc:0})}unmuteAudio(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(7,{ssrc:0,AudioSelectValue:0})}joinComputerAudio(e,t,r,o,n,i,s){var a;const u=s?{...s,enableHID:!0}:{enableHID:!1};return null===(a=this.instance)||void 0===a?void 0:a.Notify_MeidaSDK(22,{CaptureAudio:o,CaptureAudioInfo:{ssrc:e,AudioSelectValue:"default"===t?null:t,...u,audioProfile:n},speakerInfo:{defaultDeviceId:r},audioBridge:!!i})}leaveComputerAudio(){var e;return null===(e=this.instance)||void 0===e?void 0:e.Notify_MeidaSDK(21,null)}joinSharingAudio({ssrc:e,microphoneDeviceId:t,speakerDeviceId:r,isCaptureAudio:o,audioBridge:n}){var i;return null===(i=this.instance)||void 0===i?void 0:i.Notify_MeidaSDK(72,{CaptureAudio:o,CaptureAudioInfo:{ssrc:e,AudioSelectValue:"default"===t?null:t},speakerInfo:{defaultDeviceId:r},checkAutoplay:!1,audioBridge:!!n})}leaveSharingAudio(e){var t;return null===(t=this.instance)||void 0===t?void 0:t.Notify_MeidaSDK(73,{isPause:e?1:0})}changeSpeaker(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(11,{ssrc:0,AudioSelectValue:e})}changeMicrophone(e,t,r){var o;null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(18,{ssrc:0,AudioSelectValue:"default"===e?null:e,microphoneLabel:null!=t?t:"default",defaultMuted:r})}restoreWebRTC(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(19,{ssrc:0,AudioSelectValue:"default"===e?null:e})}renderVideo(e,t,r,o,n,i,s,a,u,c,l){var p;const h={userId:t,width:o,height:n,x:i,y:s,quality:a,isMyself:u,canvas:e,enableWaterMark:l,waterMarkText:c,zone:r};d(e)&&Object.assign(h,{videodom:e}),null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(1,h)}stopRenderVideo(e,t,r,o,n=!1){var i;null===(i=this.instance)||void 0===i||i.Notify_MeidaSDK(2,{canvas:e,userId:t,RGBA:o,doNotClean:n,zone:r})}subscribeVideo(e,t,r){var o;null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(132,[{id:e,size:t,bOn:r}])}unsubscribeVideo(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(133,[{id:e}])}startCaptureVideo(e,t,r,o,n,i,s=!1,a,u,d){var c;const l=a?ju.getPTZCapability():void 0;null===(c=this.instance)||void 0===c||c.Notify_MeidaSDK(3,{ssid:e,width:r,height:o,fps:u,video:n,usingFacingMode:i,VideoSelectValue:"default"===t?null:t,disableOriginalRatio:s,customConstraints:d,...l})}stopCaptureVideo(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(4,{ssrc:0})}changeCamera(e,t,r,o){var n;const i=o?{}:{customConstraints:void 0};null===(n=this.instance)||void 0===n||n.Notify_MeidaSDK(12,{VideoSelectValue:"default"===e?null:e,usingFacingMode:!!t,...r||{},...i})}switchCanvasForVideoCapture(e){var t;let r=e;"string"==typeof e&&(r=[e]),null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(25,r)}renderSharing(e,t,r=!1,o="",n=!1){var i;this.receivedSharingCanvas=t,null===(i=this.instance)||void 0===i||i.Notify_MeidaSDK(23,{width:0,height:0,ssrc:e,canvas:t,enableWaterMark:r,waterMarkText:o,isFromMainSession:n})}stopRenderSharing(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(24,{})}startShareWhiteboard(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(30.1,{mode:1,ssid:e,canvas:"canvas"})}stopShareWhiteboard(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(31.1,{mode:1,ssid:e,canvas:"canvas"})}messageWhiteboard(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(120,e)}switchSharingSource(e,t=!1){var r;this.receivedSharingCanvas&&(this.stopRenderSharing(),this.renderSharing(e,this.receivedSharingCanvas,!1,"",t)),null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(36,{ssrc:e,isFromMainSession:Number(t)})}ajustmentReceivedSharingCanvas(e,t){if(this.receivedSharingCanvas&&e&&t)try{if(C.isAndroidOrIOSBrowser){const[r,o]=[1280,720],n=Math.max(e/r,t/o,1);this.receivedSharingCanvas.width=Math.floor(e/n),this.receivedSharingCanvas.height=Math.floor(t/n)}else this.receivedSharingCanvas.width=e,this.receivedSharingCanvas.height=t}catch(e){}}startRemoteControl(e,t,r){var o;null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(26,{socketURL:`wss://${this.svcUrl}`,meetingID:this.meetingNumber,condID:this.confId,os:t,dom:e,...r})}stopRemoteControl(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(28)}resendRemoteControlPositionPDU(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(41)}updateRemoteControlProperties(e){var t;const{dimension:r,...o}=e;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(27,{...r,...o})}enableShareEncode(){var e;null===(e=this.instance)||void 0===e||e.initSharingEncode()}startDesktopSharing(e,t,r,o,n=!0,i,s,a,u=!1){var d;this.sharingCanvas=t;const c={};o&&Object.assign(c,{share2ndCamera:!0,share2ndCameraParams:{VideoSelectValue:"default"===o.cameraId?null:o.cameraId,width:o.width,height:o.height}}),void 0!==i&&Object.assign(c,{videoParams:{displaySurface:i}}),void 0!==a&&Object.assign(c,{otherParams:{...a}}),t instanceof HTMLVideoElement&&t.setAttribute("playsinline",""),null===(d=this.instance)||void 0===d||d.Notify_MeidaSDK(30,{ssid:e,canvas:t,video:r,...c,showShareAudioOption:n,sourceId:s,noPreview:!0,isCamFeedShare:u})}stopDesktopSharing(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(31,{})}pauseDesktopSharing(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(32,{})}updateSharingInfo(e,t){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(153,{shareSessionId:e,userName:t})}resumeDesktopSharing(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(33,{})}selectLanguageChannelForNewLTT(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(57,{lang:e})}changeSharingSecondCamera(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(49,{VideoSelectValue:e})}ajustmentSharingCanvas(e,t){if(this.sharingCanvas)try{this.sharingCanvas.width=e,this.sharingCanvas.height=t}catch(e){}}startPresenterAnnotation(e,t,r){const o={shareSessionId:e,presenterId:t,userName:r};var n;this.sharingCanvas&&(this.annotationPresenterCanvas||(this.annotationPresenterCanvas=p(this.sharingCanvas,ie+"PRESENTER",(()=>{this.updatePresenterAnnotationCanvas()}))),this.annotationPresenterCanvas&&(Object.assign(o,{localShareCanvas:this.sharingCanvas,annoPresenterCanvas:this.annotationPresenterCanvas,isPresenter:!0}),null===(n=this.instance)||void 0===n||n.Notify_MeidaSDK(150,o),this.updatePresenterAnnotationCanvas()))}startViewerAnnotation(e,t,r){const o={shareSessionId:e,presenterId:t,userName:r};var n,i;this.receivedSharingCanvas?(this.annotationCanvas?(this.annotationCanvas.parentNode&&(this.annotationCanvas.parentNode.style.display="block"),this.annotationCanvas.style.display="block"):this.annotationCanvas=p(this.receivedSharingCanvas,ie+"VIEWER",(()=>{this.updateViewerAnnotationCanvas()})),this.annotationCanvas&&(Object.assign(o,{canvas:this.receivedSharingCanvas,annoCanvas:this.annotationCanvas,isPresenter:!1}),null===(n=this.instance)||void 0===n||n.Notify_MeidaSDK(150,o),this.updateViewerAnnotationCanvas())):null===(i=this.instance)||void 0===i||i.Notify_MeidaSDK(150,{...o,isPresenter:!1})}stopPresenterAnnotation(e){var t;this.annotationPresenterCanvas&&"function"==typeof this.annotationPresenterCanvas._overlayCleanup&&(this.annotationPresenterCanvas._overlayCleanup(),this.annotationPresenterCanvas=null),null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(156,{presenterId:e})}hideViewerAnnotationCanvas(){this.annotationCanvas&&(this.annotationCanvas.style.display="none",this.annotationCanvas.parentNode)&&(this.annotationCanvas.parentNode.style.display="none")}removeViewerAnnotationCanvas(){this.annotationCanvas&&"function"==typeof this.annotationCanvas._overlayCleanup&&(this.annotationCanvas._overlayCleanup(),this.annotationCanvas=null)}stopViewerAnnotation(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(156,{presenterId:e})}annotateAction(e,t={}){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(Ge,{actionType:e,...t})}updatePresenterAnnotationCanvas(){if(this.sharingCanvas){var e,t;const{size:r,position:o}=h(this.sharingCanvas);null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(Ge,{actionType:Be.ANNO_CANVAS_SIZE_UPDATE,...r}),null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(Ge,{actionType:Be.UPDATE_REMOTE_POSITION_INFO,...o})}}updateViewerAnnotationCanvas(){if(this.receivedSharingCanvas){var e,t;const{size:r,position:o}=h(this.receivedSharingCanvas);null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(Ge,{actionType:Be.ANNO_CANVAS_SIZE_UPDATE,...r}),null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(Ge,{actionType:Be.UPDATE_REMOTE_POSITION_INFO,...o})}}enableAudioEncode(){var e;null===(e=this.instance)||void 0===e||e.initAudioEncode()}sendUserNodeList(e,t){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(43,{userList:e,encryptKey:t})}updateRenderedSharingDimension(e,t){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(44,{width:e,height:t})}pauseOrResumeAudio(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(45,{bPause:e})}updateRenderedVideoCanvasDimension(e,t,r){var o;null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(46,{canvas:e,width:t,height:r})}clearVideoCanvas(e,t){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(47,{id:e,RGBA:t})}adjustRenderedVideoPosition(e,t,r,o,n,i,s,a){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(48,{userId:t,x:o,y:n,width:i,height:s,canvas:e,zone:r,RGBA:a})}mirrorVideo(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(75,{isMirrorMyVideo:e})}updateUserMediaSN(e){var t,r,o;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(80,{isFromMainSession:Number(e.isFromMainSession),mediaActionType:e.iVType,body:{add:null!==(r=e.added)&&void 0!==r?r:[],remove:null!==(o=e.removed)&&void 0!==o?o:[]}})}updateMediaParams(e){var t;const{iVType:r,isFromMainSession:o,updateParams:n}=e;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(81,{mediaActionType:r,isFromMainSession:Number(o),updateParams:n})}createMainSessionChannel(e,t){var r,o;"sharing"===e?null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(84,t):null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(85,t)}addReceivedSharingChannelType(e){var t;const{isFromMainSession:r,...o}=e;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(82,{isFromMainSession:Number(r),...o})}removeReceivedSharingChannelType(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(83,{isFromMainSession:Number(e.isFromMainSession),ssrc:e.ssrc})}beforeReportToGlobalTracing(){var e,t;null===(e=this.instance)||void 0===e||null===(t=e.beforeReportToGlobalTracing)||void 0===t||t.call(e)}enableHardwareAccelerationForVideoDecode(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(70,{enable:e})}enableHardwareAccelerationForVideoEncode(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(71,{enable:e})}setSharingAudioVolume(e,t,r,o=!1){var n;null===(n=this.instance)||void 0===n||n.Notify_MeidaSDK(74,{userid:e>>10,shareVolume:t?0:100,isFromMainSession:r,isSecondAudio:o})}subscribeToQos(e,t){e.forEach((e=>{var r;null===(r=this.instance)||void 0===r||r.updateQosSubscription(!0,e,t)}))}subscribeWebRTCStatistics(e,t){var r;null===(r=this.instance)||void 0===r||r.updateStatisticsSubscription(e,t)}unsubscribeFromQos(e){e.forEach((e=>{var t;null===(t=this.instance)||void 0===t||t.updateQosSubscription(!1,e)}))}passThroughRWGMessage(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(40,e)}startVirtualBackgroundSetting(e,t,r,o,n,i,s=!1,a){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(91,{canvas:e,bgdom:t,width:n,height:i,ssid:r,VideoSelectValue:"default"===o?null:o,disableOriginalRatio:s,id:a})}updateVirtualBackgroundImage(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(92,{bgdom:e})}stopVirtualBackgroundSetting(e=!1){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(93,{isSwitch:e})}startMaskSetting(e,t,r,o,n,i,s,a,u){var d;null===(d=this.instance)||void 0===d||d.Notify_MeidaSDK(62,{canvas:e,maskdom:r,bgdom:t,dx:0,dy:0,dWidth:i,dHeight:s,width:a,height:u,ssid:o,VideoSelectValue:"default"===n?null:n})}updateMaskBackgroundImage(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(63,{bgdom:e})}updateMaskClip(e,t,r){var o;null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(64,{maskdom:e,dx:0,dy:0,dWidth:t,dHeight:r})}stopMaskSetting(e=!1){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(65,{isSwitch:e})}enableVideoObserver(e,t=!1){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(99,{enable:e,fpsdisbale:t})}enableShareAudioToBreakoutRoom(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(86,{enable:e})}sendUserAudioStatus(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(51,e)}muteOrUnmuteOtherAudio(e,t){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(50,{userId:e,volume:t?0:100})}adjustOtherAudioVolume(e,t){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(50,{userId:e,volume:t})}notifyWBMessage(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(120,e)}notifySDKMeetingReady(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(113)}movePTZCamera(e){var t;return null===(t=window.JsMediaSDK_Instance)||void 0===t||null===(t=t.util)||void 0===t?void 0:t.queryPTZPermisson().then((t=>{var r;return t?(null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(53,e),Promise.resolve("")):Promise.reject("Cannot move camera without permission granted")}))}switchSharingMode(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(101,{mode:e})}updateVideoHDValue(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK("update_videohd_value",{videohd:e})}updateVideoFullhdValue(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK("update_videofullhd_value",{videofullhd:e})}changeAudioProfile(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(126,e)}enableSyncButtonsOnHeadset(e,t,r){var o;null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(100,{enable:e,microphoneLabel:t,defaultMuted:r})}stopAllIncomingAudio(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(123,e)}isSharingEntireScreen(){var e,t;const r=null===(e=this.instance)||void 0===e||null===(t=e.getShareStreamInfo)||void 0===t?void 0:t.call(e);if(r){const{displaySurface:e}=r;return!e||"monitor"===e}return!1}getShareStreamInfo(e=!1){var t,r;const o=null===(t=this.instance)||void 0===t||null===(r=t.getShareStreamInfo)||void 0===r?void 0:r.call(t);if(o){const{deviceId:t,width:r,height:n}=o,i={deviceId:t,width:r,height:n};return e&&Object.assign(i,{displaySurface:o.displaySurface}),i}return{}}prefetchVideoSsrc(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(110,{ssrc:e})}cancelPrefetchVideoSsrc(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(112,{ssrc:e,haddata:!1})}setMobileRotateMode(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(124,{isLandScape:e})}changeActiveVideoSsrc(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(13,{ssrc:e})}setAudioCodecMode(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(122,{mode:e})}startRemoteControlQRCheck(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(54,{enable:e})}broadcastVoiceToBreakoutRoom(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(87,{enable:e})}share2ndAudio(e,t){var r;const o={audioOnly:!0,deviceId:"default"===e?null:e};t&&Object.assign(o,t),null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(129,o)}enablePlayAudioFileLocally(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(138,e)}bypassMediaMessage(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(128,e)}screenshot(e,t){var r;return null===(r=this.instance)||void 0===r?void 0:r.ScreenShot(e,t)}}ju.agentInstance=void 0;const Fu="function"==typeof Buffer,Wu="function"==typeof TextDecoder?new TextDecoder:void 0,xu="function"==typeof TextEncoder?new TextEncoder:void 0,$u=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Gu=(()=>{let e={};return $u.forEach(((t,r)=>e[t]=r)),e})(),zu=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,qu=String.fromCharCode.bind(String),Ku="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Ju=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),Qu=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Yu="function"==typeof btoa?e=>btoa(e):Fu?e=>Buffer.from(e,"binary").toString("base64"):e=>{let t,r,o,n,i="";const s=e.length%3;for(let s=0;s<e.length;){if((r=e.charCodeAt(s++))>255||(o=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");t=r<<16|o<<8|n,i+=$u[t>>18&63]+$u[t>>12&63]+$u[t>>6&63]+$u[63&t]}return s?i.slice(0,s-3)+"===".substring(s):i},Zu=Fu?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,o=e.length;r<o;r+=4096)t.push(qu.apply(null,e.subarray(r,r+4096)));return Yu(t.join(""))},Xu=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?qu(192|t>>>6)+qu(128|63&t):qu(224|t>>>12&15)+qu(128|t>>>6&63)+qu(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return qu(240|t>>>18&7)+qu(128|t>>>12&63)+qu(128|t>>>6&63)+qu(128|63&t)},ed=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,td=Fu?e=>Buffer.from(e,"utf8").toString("base64"):xu?e=>Zu(xu.encode(e)):e=>Yu((e=>e.replace(ed,Xu))(e)),rd=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,od=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return qu((t>>>10)+55296)+qu(56320+(1023&t));case 3:return qu((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return qu((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},nd="function"==typeof atob?e=>atob(Qu(e)):Fu?e=>Buffer.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!zu.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,o,n="";for(let i=0;i<e.length;)t=Gu[e.charAt(i++)]<<18|Gu[e.charAt(i++)]<<12|(r=Gu[e.charAt(i++)])<<6|(o=Gu[e.charAt(i++)]),n+=64===r?qu(t>>16&255):64===o?qu(t>>16&255,t>>8&255):qu(t>>16&255,t>>8&255,255&t);return n},id=Fu?e=>Ku(Buffer.from(e,"base64")):e=>Ku(nd(e).split("").map((e=>e.charCodeAt(0)))),sd=Fu?e=>Buffer.from(e,"base64").toString("utf8"):Wu?e=>Wu.decode(id(e)):e=>(e=>e.replace(rd,od))(nd(e)),ad=(e,t=!1)=>t?Ju(td(e)):td(e),ud=e=>sd((e=>Qu(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))))(e)),dd=(e,t=!1)=>t?Ju(Zu(e)):Zu(e);function cd(e){return ad(e,!0)}function ld(e){return ud(e)}function pd(e){return ad(e,!1)}const hd={"-":"+",_:"/",".":"="};function md(e){const t=e.replace(/[-_.]/g,(e=>hd[e]));return Uint8Array.from(window.atob(t),(e=>e.charCodeAt(0)))}const gd=e=>{const t=e.charCodeAt(0);return t<=parseInt("0x7F",16)?1:t<=parseInt("0x7FF",16)?2:t<=parseInt("0xFFFF",16)?3:t<=parseInt("0x1FFFFF",16)?4:t<=parseInt("0x3FFFFFF",16)?5:6},Sd=(e,t)=>{const r=e.split(".").map((e=>Number(e))).slice(0,3),o=t.split(".").map((e=>Number(e))).slice(0,3);let n=0;for(let e=0;e<3;e++){const t=e<r.length?r[e]:0,i=e<o.length?o[e]:0;if(t<i){n=-1;break}if(t>i){n=1;break}}return n},vd=e=>{var t;let r=(new Date).getTime(),o=1e3*(null===(t=performance)||void 0===t?void 0:t.now())||0;const n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{let t=16*Math.random();return r>0?(t=(r+t)%16|0,r=Math.floor(r/16)):(t=(o+t)%16|0,o=Math.floor(o/16)),("x"===e?t:3&t|8).toString(16)}));return n+""};function fd(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=Object.keys(e),o=Object.keys(t),n=r.length;if(o.length!==n)return!1;for(let o=0;o<n;o++){const n=r[o];if(e[n]!==t[n]||!Object.prototype.hasOwnProperty.call(t,n))return!1}return!0}const yd=(e,t)=>e>>10==t>>10,Ed=(e,t)=>new Promise((r=>{setTimeout((()=>{r(e())}),t)})),_d=e=>{const t=`${Math.floor(1e4*Math.random())}`;return e.indexOf("@")>-1?e.replace("@",t):`${e}${t}`},Id=e=>{try{const t=new URL(e);return!("data:"===t.protocol&&"null"===t.origin)&&t.origin!==location.origin}catch(e){return!0}},Ad=e=>{const t=e.split(".")[1];if("string"==typeof t){let r=t.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("base64 string is not of the correct length")}try{const e=decodeURIComponent(window.atob(r).replace(/(.)/g,(function(e,t){let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})));return JSON.parse(e)}catch(e){console.error("Invalid token specified: invalid base64")}}};function bd(e){return e&&e.endsWith("/")?e.slice(0,e.length-1):e}function Cd(e){return[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join("")}function Td(e){return`${e.tagName}${e.id?`#${e.id}`:""}${e.className?`${e.className.split(" ").map((e=>`.${e}`)).join("")}`:""}`}function Rd(e){const t=function(e){const t=e&&e.getRootNode();if(t&&"#document"!==t.nodeName&&t.host)return Td(t.host)}(e);return`${t?`${t}>`:""}${Td(e)}`}function Od(e){return"object"==typeof e&&null!==e?u(e,HTMLElement)?Rd(e):ArrayBuffer.isView(e)?Cd(e.buffer):Array.isArray(e)?e.map((e=>Od(e))):Object.keys(e).reduce(((t,r)=>({...t,[`${r}`]:Od(e[r])})),{}):e}const Dd=[S,f,v].map((e=>s(e,{hostname:!0})));function wd(e){return Dd.some((t=>new RegExp(`^https://${t}`).test(null!=e?e:"")))}const Nd=(e,t,r)=>Jr([t,r].map(((t,r)=>{if("initial"!==t)return br(["success"===t]);{const t=0===r?"ENCODE":"DECODE";return co(Ka(`${e.toUpperCase()}_${t}_SUCCESS`,1).pipe(Ur((()=>!0))),Ka(`${e.toUpperCase()}_${t}_FAIL`,1).pipe(Ur((()=>!1))))}}))),Md=e=>{const t=Tu(e.value);return t?Cr(t):Ka(Oo,1).pipe(_r(Zt),Ro(e),Ur((([,e])=>Tu(e))))};function Pd(e,t){var r,o,n;const i="audio"===e?null===(r=t.audio)||void 0===r?void 0:r.audioSsrc:null===(o=t.video)||void 0===o?void 0:o.videoSsrc,s="audio"===e?Vi:ai;return"audio"===e&&null!==(n=t.audio)&&void 0!==n&&n.isWebRtcAudioCapable||i?Promise.resolve():qa(s)}const Ld=()=>br(navigator.mediaDevices.enumerateDevices()).pipe(Ur((e=>{const t=[],r=[],o=[];return e.forEach((e=>{const{kind:n,deviceId:i,label:s}=e,a=s.replace(/\([\w,\d]+:[\w,\d]+\)/i,"").trim();switch(n){case"audioinput":"communications"===i||/ZoomAudioDevice/i.test(a)||/Zoom-\S*/.test(a)||/CubebAggregateDevice\S*/.test(a)||/Microsoft Teams Audio/i.test(a)||t.push({deviceId:i,label:a});break;case"audiooutput":"communications"===i||/ZoomAudioDevice/i.test(a)||/Microsoft Teams Audio/i.test(a)||r.push({deviceId:i,label:a});break;case"videoinput":o.push({deviceId:i,label:a})}})),{microphones:t,speakers:r,cameras:o}})));function kd(e){const{x:t,y:r,width:o,height:n}=e.getBoundingClientRect();return{scaleWidth:o,scaleHeight:n,srcOffsetX:t,srcOffsetY:r}}function Ud(e){if(e){let r=e;try{const t=e.width;e.width=t}catch(o){var t;r=e.cloneNode(!0),null===(t=e.parentNode)||void 0===t||t.replaceChild(r,e)}return r}return e}function Vd(){try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(x)}catch(e){return!1}}function Bd(){var e;return null===(e=WebAssembly)||void 0===e?void 0:e.validate($)}const Hd=(()=>{const e=new Bu;return{withAudioAction:t=>(...r)=>new Promise((async(o,n)=>{let i=!1;const s=setTimeout((()=>{i=!0,e.release()}),3e4);try{await e.acquire(),i||clearTimeout(s),o(t(...r))}catch(e){i||(clearTimeout(s),n(e))}})),processAudioAction:t=>e.acquire().then((()=>t())),completeAudioAction:()=>{e.release()},cancelAllAudioAction:()=>{e.cancel()}}})();function jd(e){const t=["joinComputerAudio","joinSharingAudio","leaveComputerAudio","leaveSharingAudio"];return new Proxy(e,{get:(e,r)=>"string"==typeof r&&t.includes(r)?function(...t){return Hd.withAudioAction(e[r].bind(e))(...t)}:Reflect.get(e,r)})}function Fd(e,t){var r;const{browserVersion:o,isChrome:n,isFirefox:i,isSafari:s,isAndroidOrIOSBrowser:a,isSupportMediaStreamTrackProcessor:u,isSupportOffscreenCanvas:d,isSwiftShader:c}=C,l=Number(null==o||null===(r=o.match(/^\d+/))||void 0===r?void 0:r[0]),p=n&&l>=91,h=i&&l>=89,m=s&&Sd(o,"17.4")>=0,g=navigator.hardwareConcurrency>2;let S=ju.isSupportMultipleView();return e&&!S&&(S=u),!a&&!c&&d&&(S||t)&&(p||h||m)&&g}const Wd=(e,t)=>{const r=document.createElement("link");return r.rel="preload",r.href=e,r.as=t,r.crossOrigin="anonymous",r},xd=(e,t,r)=>{const o=[],n=[],i=Array.isArray(e)?e:[e];return ze.filter((e=>{var r;return i.includes(e.category)&&(e.tag===t||(null===(r=e.tag)||void 0===r?void 0:r.split(",").includes(t)))})).forEach((e=>{"worker"===e.type?o.push(`${r}${e.name}`):"wasm"===e.type&&n.push(`${r}${e.name}`)})),{workers:o,wasms:n}};function $d(e,t){const r={},{isSupportSharedArrayBuffer:o,isSupportOffscreenCanvas:n,isSupportMediaStreamTrackProcessor:i,isAndroidOrIOSBrowser:s,isHarmonyOS:a}=C;return o||(Object.assign(r,{enableMultiDecodeVideoWithoutSAB:!!e}),n&&i&&Object.assign(r,{enableVirtualBackgroundWithoutSAB:!!t})),Object.assign(r,{platformMode:{isDesktopMode:!(s||a)}}),r}function Gd(e,t,r){if(e.deviceId===t)return!0;if("default"===t){const o=r.find((e=>e.deviceId===t));if(o)return o.label.indexOf(e.label)>-1}return!1}function zd(e){return e.find((e=>"default"===e.deviceId))}const qd=(()=>{let e,t=!1;return{watch:function(r){t=!0,e=Promise.race([r,Ed((()=>!0),1e4)]).then((()=>{e=void 0,t=!1})).finally((()=>{e=void 0,t=!1}))},acquire:function(){return t&&e?e:Promise.resolve()}}})(),Kd=(e,t)=>qa({event:qo,operations:[uo((t=>void 0!==t[`${e}`])),mo(1)]},(r=>r[`${e}`]===t));function Jd(e,t,r,o){const n={play:()=>e.play(),pause:()=>e.pause(),get paused(){return e.paused},get muted(){return e.muted},set muted(t){e.muted=t},get currentTime(){return e.currentTime},set currentTime(t){e.currentTime=t},get loop(){return e.loop},set loop(t){e.loop=t}};if("audio"===t){const{audio:{mediaPlaybackFile:t}}=r;Object.defineProperty(n,"playback",{get(){const r=e.dataset.playback;return void 0!==r?"1"===r:!(null==t||!t.playback)},set(t){o.enablePlayAudioFileLocally(t),e.dataset.playback=t?"1":"0"}})}return n}function Qd(){return co(Xr(document,"click").pipe(mo(1)),Xr(document,"touchend").pipe(mo(1))).pipe(bo(Ja()))}function Yd(e,t){const{audio:{activeMicrophone:r,microphoneDevicesList:o}}=t,n=o.find((e=>e.deviceId===r)),i=Tu(t);e.changeMicrophone(r,null==n?void 0:n.label,!(null==i||!i.muted))}function Zd(e,t,r,o){var n;const{audio:i,share:{isReceiveSharingFromMainSession:s}}=r;if((null==i||null===(n=i.localShareAudioUserMutedList)||void 0===n?void 0:n.length)>0){const{localShareAudioUserMutedList:t}=i,n=t.filter((t=>t.userId!==e));if(n.length){const e=Nu(r);n.forEach((t=>{const r=e.find((e=>e.userId===t.userId));r&&!r.audioShare&&o.setSharingAudioVolume(t.userId,!0,t.isFromMainSession)}))}}o.setSharingAudioVolume(e,t,!!s)}function Xd(e,t){let r=0;return e&&(r|=Le.WebRTCAudio),t&&(r|=Le.WebRTCVideo),r}function ec(){var e,t;return"orientation"in window.screen?null===(e=screen.orientation.type)||void 0===e?void 0:e.startsWith("landscape"):"orientation"in window?90===Math.abs(window.orientation):"matchMedia"in window?!(null===(t=window.matchMedia("(orientation: landscape)"))||void 0===t||!t.matches):screen.availWidth>screen.availHeight}function tc(){return"orientation"in window.screen?Xr(screen.orientation,"change").pipe(bo(Ja()),Ur((()=>{var e;return null===(e=screen.orientation.type)||void 0===e?void 0:e.startsWith("landscape")}))):Xr(window,"orientationchange").pipe(bo(Ja()),Ur((e=>{var t;const r=null===(t=e.target)||void 0===t||null===(t=t.screen)||void 0===t||null===(t=t.orientation)||void 0===t?void 0:t.angle;return 90===Math.abs(r)})))}function rc(e,t){var r;let o;if("string"==typeof e){if(o=document.querySelector(e),!o)return[!1,{type:Xe,reason:"Cannot find the element",errorCode:wa.STREAM_MISMATCH_RENDER_ELEMENT}]}else o=e;return(null===(r=o)||void 0===r||null===(r=r.tagName)||void 0===r?void 0:r.toUpperCase())!==t.toUpperCase()?[!1,{type:Xe,reason:"Invalid element type",errorCode:wa.STREAM_MISMATCH_RENDER_ELEMENT}]:[!0,o]}function oc(e){const{share:{isRemoteSharingActive:t,isSimultaneousShareView:r}}=e;return t||r?Cr(!0):Ka(Ki).pipe(uo((e=>{const{isActive:t}=e;return t})),mo(1),Ur((()=>!0)))}function nc(e){var t;const r=(null===(t=e.dataset)||void 0===t?void 0:t.videoPlayerId)||`vp-${vd()}`;return e.dataset&&!e.dataset.videoPlayerId&&(e.dataset.videoPlayerId=r),!0!==e.isDummy&&C.isWeakRefSupported?{weakRef:new WeakRef(e),playerId:r}:{element:e,playerId:r}}function ic(e){return e.weakRef?e.weakRef.deref()||null:e.element||null}function sc(e){return e.map((e=>ic(e))).filter((e=>null!==e))}function ac(e){return e.filter((e=>null!==ic(e)))}function uc(e,t){var r;return ic(e)===t||e.playerId===(null===(r=t.dataset)||void 0===r?void 0:r.videoPlayerId)}var dc,cc,lc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function pc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hc=(cc||(cc=1,dc=function(e,t,r,o,n,i,s,a){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,o,n,i,s,a],c=0;(u=new Error(t.replace(/%s/g,(function(){return d[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}),dc),mc=pc(hc),gc=function(e){return"function"==typeof e},Sc=function(e){return e.toString()},vc=function(e){return"string"==typeof e},fc="||",yc=function(e){return e},Ec=function(e){return null===e};function _c(e,t,r){void 0===t&&(t=yc),mc(gc(t)||Ec(t),"Expected payloadCreator to be a function, undefined or null");var o=Ec(t)||t===yc?yc:function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),n=1;n<r;n++)o[n-1]=arguments[n];return e instanceof Error?e:t.apply(void 0,[e].concat(o))},n=gc(r),i=e.toString(),s=function(){var t=o.apply(void 0,arguments),i={type:e};return t instanceof Error&&(i.error=!0),void 0!==t&&(i.payload=t),n&&(i.meta=r.apply(void 0,arguments)),i};return s.toString=function(){return i},s}var Ic,Ac,bc,Cc,Tc,Rc,Oc=function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Dc=function(e){return Array.isArray(e)},wc=function(e){return null==e};var Nc=pc(function(){if(Rc)return Tc;Rc=1;var e=function(){if(Cc)return bc;Cc=1;var e=function(){if(Ac)return Ic;Ac=1,Ic=function(i){return e.test(i)?i.toLowerCase():t.test(i)?(function(e){return e.replace(o,(function(e,t){return t?" "+t:""}))}(i)||i).toLowerCase():r.test(i)?function(e){return e.replace(n,(function(e,t,r){return t+" "+r.toLowerCase().split("").join(" ")}))}(i).toLowerCase():i.toLowerCase()};var e=/\s/,t=/(_|-|\.|:)/,r=/([a-z][A-Z]|[A-Z][a-z])/,o=/[\W_]+(.|$)/g,n=/(.)([A-Z]+)/g;return Ic}();return bc=function(t){return e(t).replace(/[\W_]+(.|$)/g,(function(e,t){return t?" "+t:""})).trim()}}();return Tc=function(t){return e(t).replace(/\s(\w)/g,(function(e,t){return t.toUpperCase()}))}}()),Mc=function(e){return-1===e.indexOf("/")?Nc(e):e.split("/").map(Nc).join("/")},Pc=function(e,t){return e.reduce((function(e,r){return t(e,r)}),{})},Lc=function(e){return"undefined"!=typeof Map&&e instanceof Map};function kc(e){if(Lc(e))return Array.from(e.keys());if("undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys)return Reflect.ownKeys(e);var t=Object.getOwnPropertyNames(e);return"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t}function Uc(e,t){return Lc(t)?t.get(e):t[e]}var Vc=function(e){return function t(r,o,n,i){var s=void 0===o?{}:o,a=s.namespace,u=void 0===a?"/":a,d=s.prefix;return void 0===n&&(n={}),void 0===i&&(i=""),kc(r).forEach((function(o){var s=function(e){return i||!d||d&&new RegExp("^"+d+u).test(e)?e:""+d+u+e}(function(e){var t;if(!i)return e;var r=e.toString().split(fc),o=i.split(fc);return(t=[]).concat.apply(t,o.map((function(e){return r.map((function(t){return""+e+u+t}))}))).join(fc)}(o)),a=Uc(o,r);e(a)?t(a,{namespace:u,prefix:d},n,s):n[s]=a})),n}},Bc=Vc(Oc);function Hc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){jc(e,t,r[t])}))}return e}function jc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fc(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var n,i=Oc((n=r)[n.length-1])?r.pop():{};return mc(r.every(vc)&&(vc(e)||Oc(e)),"Expected optional object followed by string action types"),vc(e)?xc([e].concat(r),i):Hc({},function(e,t){return function(e,t){var r=void 0===t?{}:t,o=r.namespace,n=void 0===o?"/":o,i=r.prefix;function s(t,r,o){var n=Mc(o.shift());0===o.length?r[n]=e[t]:(r[n]||(r[n]={}),s(t,r[n],o))}var a={};return Object.getOwnPropertyNames(e).forEach((function(e){var t=i?e.replace(""+i+n,""):e;return s(e,a,t.split(n))})),a}(Wc(Bc(e,t)),t)}(e,i),xc(r,i))}function Wc(e,t){var r=void 0===t?{}:t,o=r.prefix,n=r.namespace,i=void 0===n?"/":n;return Pc(Object.keys(e),(function(t,r){var n,s=e[r];mc(function(e){if(gc(e)||wc(e))return!0;if(Dc(e)){var t=e[0],r=void 0===t?yc:t,o=e[1];return gc(r)&&gc(o)}return!1}(s),"Expected function, undefined, null, or array with payload and meta functions for "+r);var a=o?""+o+i+r:r,u=Dc(s)?_c.apply(void 0,[a].concat(s)):_c(a,s);return Hc({},t,((n={})[r]=u,n))}))}function xc(e,t){var r=Wc(Pc(e,(function(e,t){var r;return Hc({},e,((r={})[t]=yc,r))})),t);return Pc(Object.keys(r),(function(e,t){var o;return Hc({},e,((o={})[Mc(t)]=r[t],o))}))}var $c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var o="function"!=typeof t[t.length-1]&&t.pop(),n=t;if(void 0===o)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];var a=void 0===e,u=void 0===t;return a&&u&&o?o:n.reduce((function(e,r){return r.apply(void 0,[e,t].concat(i))}),a&&!u&&o?o:e)}},Gc=Vc((function(e){return(Oc(e)||Lc(e))&&!function(e){var t=kc(e),r=t.every((function(e){return"next"===e||"throw"===e}));return t.length&&t.length<=2&&r}(e)}));function zc(e,t,r){void 0===r&&(r={}),mc(Oc(e)||Lc(e),"Expected handlers to be a plain object.");var o=Gc(e,r),n=kc(o).map((function(e){return function(e,t,r){void 0===t&&(t=yc);var o=Sc(e).split(fc);mc(!(void 0===r),"defaultState for reducer handling "+o.join(", ")+" should be defined"),mc(gc(t)||Oc(t),"Expected reducer to be a function or object with next and throw reducers");var n=gc(t)?[t,t]:[t.next,t.throw].map((function(e){return wc(e)?yc:e})),i=n[0],s=n[1];return function(e,t){void 0===e&&(e=r);var n=t.type;return n&&-1!==o.indexOf(Sc(n))?(!0===t.error?s:i)(e,t):e}}(e,Uc(e,o),t)})),i=$c.apply(void 0,n.concat([t]));return function(e,r){return void 0===e&&(e=t),i(e,r)}}const qc=_c("SCREENSHOT_VIDEO_NOTIFICATION"),{setVideoSsrc:Kc,setActiveVideoId:Jc,setCameraList:Qc,setActiveCamera:Yc,setIsCurrentUserStartedVideo:Zc,setSpotlightVideo:Xc,setIsCaptureForbidden:el,setVideoMaxQuality:tl,setIsVideoMuted:rl,setIsCaptureCameraLoading:ol,setIsCameraTaken:nl,resetVideo:il,setReceivedVideoDimension:sl,addSubscribedVideoId:al,removeSubscribedVideoId:ul,setIsFollowHostVideoLayout:dl,setHostDragLayout:cl,addRenderedVideoId:ll,removeRenderedVideoId:pl,setIsSupportHdVideo:hl,setIsCanUnmuteVideo:ml,setIsVbPreloadReady:gl,setIsVbConfiged:Sl,setVbImageSrc:vl,setVideoDataEncoding:fl,setVideoDataDecoding:yl,setHardwareAccelerationState:El,setVideoCaptureCustomizedOption:_l,setNetworkQuality:Il,setVideoCameraPtzCapabilities:Al,setIsCurrentUserRequestCameraControlled:bl,setIsCurrentUserCameraInControl:Cl,addVideoFarEndCameraControlUser:Tl,removeVideoFarEndCameraControlUser:Rl,setVideoPtzCameraMoving:Ol,setVideoPtzCameraValue:Dl,setIsControllingFarEndCamera:wl,setNetworkQualityBroadcastTime:Nl,setIsMaskConfiged:Ml,setVideoBackgroundMode:Pl,setVideoMask:Ll,setVideoCapturedDimension:kl,addVideoRenderedEnsuredCanvas:Ul,setVideoMediaPlaybackFile:Vl,setPrefetchedVideoUser:Bl,setVideoQosSubscriptionStatus:Hl,setMiniRwgOptionValue:jl,addVideoPlayerAttachment:Fl,removeVideoPlayerAttachment:Wl,setIsWebGl2RendererType:xl,setIsWebGpuRendererType:$l,setVideoRendererType:Gl,setIsVideoMirrored:zl,addSelfPreviewVideoTag:ql,removeSelfPreviewVideoTag:Kl,setVideoLeadershipUserId:Jl,setIsWebrtcVideoCapable:Ql,removeCustomVideoConstraints:Yl,setWebrtcStatisticSubscription:Zl,setWebrtcStatisticData:Xl}=Fc("SET_VIDEO_SSRC","SET_ACTIVE_VIDEO_ID","SET_CAMERA_LIST","SET_ACTIVE_CAMERA","SET_IS_CURRENT_USER_STARTED_VIDEO","SET_SPOTLIGHT_VIDEO","SET_IS_CAPTURE_FORBIDDEN","SET_VIDEO_MAX_QUALITY","SET_IS_VIDEO_MUTED","SET_IS_CAPTURE_CAMERA_LOADING","SET_IS_CAMERA_TAKEN","RESET_VIDEO","SET_RECEIVED_VIDEO_DIMENSION","ADD_SUBSCRIBED_VIDEO_ID","REMOVE_SUBSCRIBED_VIDEO_ID","SET_IS_FOLLOW_HOST_VIDEO_LAYOUT","SET_HOST_DRAG_LAYOUT","ADD_RENDERED_VIDEO_ID","REMOVE_RENDERED_VIDEO_ID","SET_IS_SUPPORT_HD_VIDEO","SET_IS_CAN_UNMUTE_VIDEO","SET_IS_VB_PRELOAD_READY","SET_IS_VB_CONFIGED","SET_VB_IMAGE_SRC","SET_VIDEO_DATA_ENCODING","SET_VIDEO_DATA_DECODING","SET_HARDWARE_ACCELERATION_STATE","SET_VIDEO_CAPTURE_CUSTOMIZED_OPTION","SET_NETWORK_QUALITY","SET_VIDEO_CAMERA_PTZ_CAPABILITIES","SET_IS_CURRENT_USER_REQUEST_CAMERA_CONTROLLED","SET_IS_CURRENT_USER_CAMERA_IN_CONTROL","ADD_VIDEO_FAR_END_CAMERA_CONTROL_USER","REMOVE_VIDEO_FAR_END_CAMERA_CONTROL_USER","SET_VIDEO_PTZ_CAMERA_MOVING","SET_VIDEO_PTZ_CAMERA_VALUE","SET_IS_CONTROLLING_FAR_END_CAMERA","SET_NETWORK_QUALITY_BROADCAST_TIME","SET_IS_MASK_CONFIGED","SET_VIDEO_BACKGROUND_MODE","SET_VIDEO_MASK","SET_VIDEO_CAPTURED_DIMENSION","ADD_VIDEO_RENDERED_ENSURED_CANVAS","SET_VIDEO_MEDIA_PLAYBACK_FILE","SET_PREFETCHED_VIDEO_USER","SET_VIDEO_QOS_SUBSCRIPTION_STATUS","SET_MINI_RWG_OPTION_VALUE","ADD_VIDEO_PLAYER_ATTACHMENT","REMOVE_VIDEO_PLAYER_ATTACHMENT","SET_IS_WEB_GL2_RENDERER_TYPE","SET_IS_WEB_GPU_RENDERER_TYPE","SET_VIDEO_RENDERER_TYPE","SET_IS_VIDEO_MIRRORED","ADD_SELF_PREVIEW_VIDEO_TAG","REMOVE_SELF_PREVIEW_VIDEO_TAG","SET_VIDEO_LEADERSHIP_USER_ID","SET_IS_WEBRTC_VIDEO_CAPABLE","REMOVE_CUSTOM_VIDEO_CONSTRAINTS","SET_WEBRTC_STATISTIC_SUBSCRIPTION","SET_WEBRTC_STATISTIC_DATA");var ep="object"==typeof global&&global&&global.Object===Object&&global,tp="object"==typeof self&&self&&self.Object===Object&&self,rp=ep||tp||Function("return this")(),op=rp.Symbol,np=Object.prototype,ip=np.hasOwnProperty,sp=np.toString,ap=op?op.toStringTag:void 0,up=Object.prototype.toString,dp=op?op.toStringTag:void 0;function cp(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":dp&&dp in Object(e)?function(e){var t=ip.call(e,ap),r=e[ap];try{e[ap]=void 0;var o=!0}catch(e){}var n=sp.call(e);return o&&(t?e[ap]=r:delete e[ap]),n}(e):function(e){return up.call(e)}(e)}function lp(e){return null!=e&&"object"==typeof e}var pp=Array.isArray,hp=op?op.prototype:void 0,mp=hp?hp.toString:void 0;function gp(e){if("string"==typeof e)return e;if(pp(e))return function(e,t){for(var r=-1,o=null==e?0:e.length,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}(e,gp)+"";if(function(e){return"symbol"==typeof e||lp(e)&&"[object Symbol]"==cp(e)}(e))return mp?mp.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Sp(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function vp(e){if(!Sp(e))return!1;var t=cp(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var fp,yp=rp["__core-js_shared__"],Ep=(fp=/[^.]+$/.exec(yp&&yp.keys&&yp.keys.IE_PROTO||""))?"Symbol(src)_1."+fp:"",_p=Function.prototype.toString;function Ip(e){if(null!=e){try{return _p.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Ap=/^\[object .+?Constructor\]$/,bp=Function.prototype,Cp=Object.prototype,Tp=bp.toString,Rp=Cp.hasOwnProperty,Op=RegExp("^"+Tp.call(Rp).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Dp(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Sp(e)||(t=e,Ep&&Ep in t))&&(vp(e)?Op:Ap).test(Ip(e));var t}(r)?r:void 0}var wp=Dp(rp,"WeakMap"),Np=/^(?:0|[1-9]\d*)$/;function Mp(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Np.test(e))&&e>-1&&e%1==0&&e<t}function Pp(e,t){return e===t||e!=e&&t!=t}function Lp(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function kp(e){return null!=e&&Lp(e.length)&&!vp(e)}var Up=Object.prototype;function Vp(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Up)}function Bp(e){return lp(e)&&"[object Arguments]"==cp(e)}var Hp=Object.prototype,jp=Hp.hasOwnProperty,Fp=Hp.propertyIsEnumerable,Wp=Bp(function(){return arguments}())?Bp:function(e){return lp(e)&&jp.call(e,"callee")&&!Fp.call(e,"callee")},xp="object"==typeof exports&&exports&&!exports.nodeType&&exports,$p=xp&&"object"==typeof module&&module&&!module.nodeType&&module,Gp=$p&&$p.exports===xp?rp.Buffer:void 0,zp=(Gp?Gp.isBuffer:void 0)||function(){return!1},qp={};qp["[object Float32Array]"]=qp["[object Float64Array]"]=qp["[object Int8Array]"]=qp["[object Int16Array]"]=qp["[object Int32Array]"]=qp["[object Uint8Array]"]=qp["[object Uint8ClampedArray]"]=qp["[object Uint16Array]"]=qp["[object Uint32Array]"]=!0,qp["[object Arguments]"]=qp["[object Array]"]=qp["[object ArrayBuffer]"]=qp["[object Boolean]"]=qp["[object DataView]"]=qp["[object Date]"]=qp["[object Error]"]=qp["[object Function]"]=qp["[object Map]"]=qp["[object Number]"]=qp["[object Object]"]=qp["[object RegExp]"]=qp["[object Set]"]=qp["[object String]"]=qp["[object WeakMap]"]=!1;var Kp,Jp="object"==typeof exports&&exports&&!exports.nodeType&&exports,Qp=Jp&&"object"==typeof module&&module&&!module.nodeType&&module,Yp=Qp&&Qp.exports===Jp&&ep.process,Zp=function(){try{return Qp&&Qp.require&&Qp.require("util").types||Yp&&Yp.binding&&Yp.binding("util")}catch(e){}}(),Xp=Zp&&Zp.isTypedArray,eh=Xp?(Kp=Xp,function(e){return Kp(e)}):function(e){return lp(e)&&Lp(e.length)&&!!qp[cp(e)]},th=Object.prototype.hasOwnProperty;var rh=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),oh=Object.prototype.hasOwnProperty;function nh(e){if(!Vp(e))return rh(e);var t=[];for(var r in Object(e))oh.call(e,r)&&"constructor"!=r&&t.push(r);return t}function ih(e){return kp(e)?function(e){var t=pp(e),r=!t&&Wp(e),o=!t&&!r&&zp(e),n=!t&&!r&&!o&&eh(e),i=t||r||o||n,s=i?function(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o}(e.length,String):[],a=s.length;for(var u in e)!th.call(e,u)||i&&("length"==u||o&&("offset"==u||"parent"==u)||n&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Mp(u,a))||s.push(u);return s}(e):nh(e)}var sh=Dp(Object,"create"),ah=Object.prototype.hasOwnProperty,uh=Object.prototype.hasOwnProperty;function dh(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function ch(e,t){for(var r=e.length;r--;)if(Pp(e[r][0],t))return r;return-1}dh.prototype.clear=function(){this.__data__=sh?sh(null):{},this.size=0},dh.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},dh.prototype.get=function(e){var t=this.__data__;if(sh){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ah.call(t,e)?t[e]:void 0},dh.prototype.has=function(e){var t=this.__data__;return sh?void 0!==t[e]:uh.call(t,e)},dh.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=sh&&void 0===t?"__lodash_hash_undefined__":t,this};var lh=Array.prototype.splice;function ph(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}ph.prototype.clear=function(){this.__data__=[],this.size=0},ph.prototype.delete=function(e){var t=this.__data__,r=ch(t,e);return!(r<0||(r==t.length-1?t.pop():lh.call(t,r,1),--this.size,0))},ph.prototype.get=function(e){var t=this.__data__,r=ch(t,e);return r<0?void 0:t[r][1]},ph.prototype.has=function(e){return ch(this.__data__,e)>-1},ph.prototype.set=function(e,t){var r=this.__data__,o=ch(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this};var hh=Dp(rp,"Map");function mh(e,t){var r,o,n=e.__data__;return("string"==(o=typeof(r=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map}function gh(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Sh(e){return null==e?"":gp(e)}gh.prototype.clear=function(){this.size=0,this.__data__={hash:new dh,map:new(hh||ph),string:new dh}},gh.prototype.delete=function(e){var t=mh(this,e).delete(e);return this.size-=t?1:0,t},gh.prototype.get=function(e){return mh(this,e).get(e)},gh.prototype.has=function(e){return mh(this,e).has(e)},gh.prototype.set=function(e,t){var r=mh(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this};var vh=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function fh(e){return vh.test(e)}var yh="\\ud800-\\udfff",Eh="["+yh+"]",_h="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ih="\\ud83c[\\udffb-\\udfff]",Ah="[^"+yh+"]",bh="(?:\\ud83c[\\udde6-\\uddff]){2}",Ch="[\\ud800-\\udbff][\\udc00-\\udfff]",Th="(?:"+_h+"|"+Ih+")?",Rh="[\\ufe0e\\ufe0f]?",Oh=Rh+Th+"(?:\\u200d(?:"+[Ah,bh,Ch].join("|")+")"+Rh+Th+")*",Dh="(?:"+[Ah+_h+"?",_h,bh,Ch,Eh].join("|")+")",wh=RegExp(Ih+"(?="+Ih+")|"+Dh+Oh,"g");var Nh=function(e){var t=fh(e=Sh(e))?function(e){return fh(e)?function(e){return e.match(wh)||[]}(e):function(e){return e.split("")}(e)}(e):void 0,r=t?t[0]:e.charAt(0),o=t?function(e,t,r){var o=e.length;return r=void 0===r?o:r,!t&&r>=o?e:function(e,t,r){var o=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(n);++o<n;)i[o]=e[o+t];return i}(e,t,r)}(t,1).join(""):e.slice(1);return r.toUpperCase()+o};function Mh(e){var t=this.__data__=new ph(e);this.size=t.size}Mh.prototype.clear=function(){this.__data__=new ph,this.size=0},Mh.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Mh.prototype.get=function(e){return this.__data__.get(e)},Mh.prototype.has=function(e){return this.__data__.has(e)},Mh.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ph){var o=r.__data__;if(!hh||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new gh(o)}return r.set(e,t),this.size=r.size,this};var Ph=Object.prototype.propertyIsEnumerable,Lh=Object.getOwnPropertySymbols,kh=Lh?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,o=null==e?0:e.length,n=0,i=[];++r<o;){var s=e[r];t(s)&&(i[n++]=s)}return i}(Lh(e),(function(t){return Ph.call(e,t)})))}:function(){return[]};function Uh(e){return function(e,t,r){var o=ih(e);return pp(e)?o:function(e,t){for(var r=-1,o=t.length,n=e.length;++r<o;)e[n+r]=t[r];return e}(o,r(e))}(e,0,kh)}var Vh=Dp(rp,"DataView"),Bh=Dp(rp,"Promise"),Hh=Dp(rp,"Set"),jh="[object Map]",Fh="[object Promise]",Wh="[object Set]",xh="[object WeakMap]",$h="[object DataView]",Gh=Ip(Vh),zh=Ip(hh),qh=Ip(Bh),Kh=Ip(Hh),Jh=Ip(wp),Qh=cp;(Vh&&Qh(new Vh(new ArrayBuffer(1)))!=$h||hh&&Qh(new hh)!=jh||Bh&&Qh(Bh.resolve())!=Fh||Hh&&Qh(new Hh)!=Wh||wp&&Qh(new wp)!=xh)&&(Qh=function(e){var t=cp(e),r="[object Object]"==t?e.constructor:void 0,o=r?Ip(r):"";if(o)switch(o){case Gh:return $h;case zh:return jh;case qh:return Fh;case Kh:return Wh;case Jh:return xh}return t});var Yh=rp.Uint8Array;function Zh(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new gh;++t<r;)this.add(e[t])}function Xh(e,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(e[r],r,e))return!0;return!1}function em(e,t,r,o,n,i){var s=1&r,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var d=i.get(e),c=i.get(t);if(d&&c)return d==t&&c==e;var l=-1,p=!0,h=2&r?new Zh:void 0;for(i.set(e,t),i.set(t,e);++l<a;){var m=e[l],g=t[l];if(o)var S=s?o(g,m,l,t,e,i):o(m,g,l,e,t,i);if(void 0!==S){if(S)continue;p=!1;break}if(h){if(!Xh(t,(function(e,t){if(s=t,!h.has(s)&&(m===e||n(m,e,r,o,i)))return h.push(t);var s}))){p=!1;break}}else if(m!==g&&!n(m,g,r,o,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function tm(e){var t=-1,r=Array(e.size);return e.forEach((function(e,o){r[++t]=[o,e]})),r}function rm(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}Zh.prototype.add=Zh.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Zh.prototype.has=function(e){return this.__data__.has(e)};var om=op?op.prototype:void 0,nm=om?om.valueOf:void 0,im=Object.prototype.hasOwnProperty,sm="[object Arguments]",am="[object Array]",um="[object Object]",dm=Object.prototype.hasOwnProperty;function cm(e,t,r,o,n){return e===t||(null==e||null==t||!lp(e)&&!lp(t)?e!=e&&t!=t:function(e,t,r,o,n,i){var s=pp(e),a=pp(t),u=s?am:Qh(e),d=a?am:Qh(t),c=(u=u==sm?um:u)==um,l=(d=d==sm?um:d)==um,p=u==d;if(p&&zp(e)){if(!zp(t))return!1;s=!0,c=!1}if(p&&!c)return i||(i=new Mh),s||eh(e)?em(e,t,r,o,n,i):function(e,t,r,o,n,i,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Yh(e),new Yh(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Pp(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=tm;case"[object Set]":var u=1&o;if(a||(a=rm),e.size!=t.size&&!u)return!1;var d=s.get(e);if(d)return d==t;o|=2,s.set(e,t);var c=em(a(e),a(t),o,n,i,s);return s.delete(e),c;case"[object Symbol]":if(nm)return nm.call(e)==nm.call(t)}return!1}(e,t,u,r,o,n,i);if(!(1&r)){var h=c&&dm.call(e,"__wrapped__"),m=l&&dm.call(t,"__wrapped__");if(h||m){var g=h?e.value():e,S=m?t.value():t;return i||(i=new Mh),n(g,S,r,o,i)}}return!!p&&(i||(i=new Mh),function(e,t,r,o,n,i){var s=1&r,a=Uh(e),u=a.length;if(u!=Uh(t).length&&!s)return!1;for(var d=u;d--;){var c=a[d];if(!(s?c in t:im.call(t,c)))return!1}var l=i.get(e),p=i.get(t);if(l&&p)return l==t&&p==e;var h=!0;i.set(e,t),i.set(t,e);for(var m=s;++d<u;){var g=e[c=a[d]],S=t[c];if(o)var v=s?o(S,g,c,t,e,i):o(g,S,c,e,t,i);if(!(void 0===v?g===S||n(g,S,r,o,i):v)){h=!1;break}m||(m="constructor"==c)}if(h&&!m){var f=e.constructor,y=t.constructor;f==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof f&&f instanceof f&&"function"==typeof y&&y instanceof y||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,r,o,n,i))}(e,t,r,o,cm,n))}var lm=Object.prototype.hasOwnProperty;class pm{constructor(){this.audioPlaybackUrl=void 0,this.videoPlaybackUrl=void 0,this._audioElement=void 0,this._videoElement=void 0,this.videoSrc=void 0,this.isUsingSameFile=void 0}static getInstance(){return void 0===this.instance&&(this.instance=new pm),this.instance}static destroyInstance(){if(this.instance){this.instance.stopAudioElement(),this.instance.stopVideoElement();const t=document.getElementById(ae);var e;t&&(null===(e=t.parentNode)||void 0===e||e.removeChild(t)),this.instance=void 0}}setAudioElement(e){return void 0===this._audioElement&&(this._audioElement=new Audio),new Promise(((t,r)=>{if(this.videoSrc===e.url)this._audioElement.pause(),this.isUsingSameFile=!0,this._videoElement.muted=!1,(n=this._videoElement).currentTime>0&&!n.paused&&!n.ended&&n.readyState>2?t(""):this._videoElement.play().then((()=>{t("")})).catch((()=>{r()}));else{var o;this.isUsingSameFile=!1;const n=C.isFirefox?"canplay":"canplaythrough",i=()=>{this._audioElement.play().then((()=>{this._audioElement.removeEventListener(n,i),t("")}))},s=()=>{this._audioElement.removeEventListener(n,i),this._audioElement.removeEventListener("error",s),r()};this._audioElement.addEventListener(n,i),this._audioElement.addEventListener("error",s),this._audioElement.src=e.url,this._audioElement.loop=!!e.loop,Id(e.url)&&this._audioElement.setAttribute("crossorigin",""),this._audioElement.currentTime=Math.max(null!==(o=e.currentTime)&&void 0!==o?o:0,1e-4),C.isIOSMobile&&this._audioElement.load()}var n}))}setVideoElement(e){const{isFirefox:t,isSafari:r,isIOSMobile:o}=C;return void 0===this._videoElement&&(this._videoElement=document.createElement("video")),new Promise(((n,i)=>{var s;this.videoSrc=e.url;const a=t?"canplay":"canplaythrough",u=()=>{this._videoElement.play().then((()=>{this._videoElement.removeEventListener(a,u),n("")}))},d=()=>{this._videoElement.removeEventListener(a,u),this._videoElement.removeEventListener("error",d),i()};this._videoElement.addEventListener(a,u),this._videoElement.addEventListener("error",d),this._videoElement.src=e.url,this.isUsingSameFile||(this._videoElement.muted=!0),this._videoElement.loop=!!e.loop,this._videoElement.currentTime=Math.max(null!==(s=e.currentTime)&&void 0!==s?s:0,1e-4),this._videoElement.playsInline=!0,Id(e.url)&&this._videoElement.setAttribute("crossorigin",""),r&&!document.getElementById(ae)&&(this._videoElement.id=ae,this._videoElement.setAttribute("style","position:fixed;top:-10000px;left:-10000px"),document.body.appendChild(this._videoElement)),(o||r)&&this._videoElement.load()}))}get audioElement(){return this.isUsingSameFile?this._videoElement:this._audioElement}get videoElement(){return this._videoElement}stopAudioElement(){this.isUsingSameFile?this.isUsingSameFile=!1:this._audioElement&&(this._audioElement.currentTime=0,this._audioElement.pause())}stopVideoElement(){this._videoElement&&this._videoElement.pause(),this.videoSrc=void 0}}pm.instance=void 0;const hm=e=>4294966272&e,mm=e=>{let t={R:0,G:0,B:0,A:0};if("string"==typeof e&&e.startsWith("#")){const a=e.slice(1);try{if(3===a.length){const e=Array.from(a).map((e=>e.repeat(2))).map((e=>parseInt(e,16)));t={R:e[0]/255,G:e[1]/255,B:e[2]/255,A:1}}else if(6===a.length||8===a.length){var r,o,n,i,s;const e=null===(r=a.match(/\S{2}/g))||void 0===r?void 0:r.map((e=>parseInt(e,16)));t={R:(null!==(o=null==e?void 0:e[0])&&void 0!==o?o:0)/255,G:(null!==(n=null==e?void 0:e[1])&&void 0!==n?n:0)/255,B:(null!==(i=null==e?void 0:e[2])&&void 0!==i?i:0)/255,A:null!=e&&e[3]?(null!==(s=null==e?void 0:e[3])&&void 0!==s?s:0)/255:1}}}catch(t){console.warn("error color representation:",e)}}else"object"==typeof e&&(t={R:e.R/255,G:e.G/255,B:e.B/255,A:e.A||1});return t};function gm(e){let{captureWidth:t=0,captureHeight:r=0}=e||{};const{hd:o}=e||{};var n,i;return 0!==t&&0!==r||(o&&ju.isSupportSending720P()?(t=1280,r=720):(t=640,r=360)),{captureWidth:t,captureHeight:r,isCustomizedResolution:!(null==e||!e.captureWidth||!e.captureHeight||(n=t,i=r,Math.abs(Math.floor(n/i*10)-Math.floor(16/9*10))<=1))}}function Sm(e,t){return"default"===e||t.some((t=>t.deviceId===e))||[te.Environment,te.User,te.Left,te.Right].includes(e)}function vm(e,t){if("function"==typeof DOMMatrixReadOnly){if("1"===e.dataset.mirrored===t)return;const r=new DOMMatrixReadOnly(getComputedStyle(e).transform).scale(-1,1).toString();e.style.transform=r,e.dataset.mirrored=t?"1":"0"}}function fm(e,t,r){const o=[],{video:{videoSsrc:n,activeCamera:i},meeting:{mediaFeatureOptions:s}}=t,{cameraId:a=i,videoElement:u,originalRatio:c,ptz:l,hd:p,fullHd:h,mediaFile:m,fps:g,mirrored:S,customVideoConstraints:v}=r||{};let f;if(void 0!==u){let e=d(u)?u:null;if("string"==typeof u){let[t,r]=[document.body,u];if(u.indexOf(">")>-1){const[e,o]=u.split(">");t=document.querySelector(e),r=o}t&&(e=t.querySelector(r))}if(!e)return[];f=e,e.id||(e.id=_d("__ZOOM_SDK_SELF_VIDEO_@__")),void 0!==S&&vm(e,S)}let y=null!=g?g:be.Default;y=Math.max(be.Min,y),y=Math.min(be.Max,y);const{captureWidth:E,captureHeight:_,isCustomizedResolution:I}=gm(r);if(I)e.updateVideoHDValue(!1);else{e.updateVideoHDValue(!!p||!!h);const t=!!h&&ju.isSupportFullHDVideo(s||"");e.updateVideoFullhdValue(t)}let A=Promise.resolve(a);if(m&&m.url){const e=pm.getInstance();A=e.setVideoElement(m).then((()=>e.videoElement))}else pm.getInstance().stopVideoElement();return A.then((t=>{e.startCaptureVideo(n,t,E,_,f,C.isAndroidOrIOSBrowser&&re.includes(t),!c&&function(){var e,t;const{isAndroidOrIOSBrowser:r,isFirefox:o,isSafari:n}=C;return r||!(null!==(e=navigator.mediaDevices)&&void 0!==e&&null!==(t=e.getSupportedConstraints)&&void 0!==t&&t.call(e).aspectRatio)||o||n||T()}(),l,void 0!==g?y:void 0,v)})),o.push(_l({cameraId:a,captureWidth:E,captureHeight:_,videoElement:"string"==typeof u?u:d(u)?Rd(u):void 0,originalRatio:c,ptz:l,hd:p,fullHd:h,mediaFile:m,fps:void 0!==g?y:void 0,mirrored:S,customVideoConstraints:v})),o}function ym(e,t,r){const{max:o,min:n,step:i}=e;let s=r/100*(o-n);i&&(s=Math.min(Math.floor(s/i)*i,Math.floor(s)));let a=t+s;return a=Math.min(o,a),a=Math.max(n,a),a}function Em(e,t){let r="",o=t;switch(e){case he.Down:o=-t,r="tilt";break;case he.Up:r="tilt";break;case he.Left:o=-t,r="pan";break;case he.Right:r="pan";break;case he.ZoomIn:r="zoom";break;case he.ZoomOut:o=-t,r="zoom"}return{key:r,range:o}}function _m(e){const t=["pan","tilt","zoom"].reduce(((t,r)=>e[r]&&0!==e[r].value?{...t,[r]:e[r].value}:t),{});return function(e){if(null==e)return!0;if(kp(e)&&(pp(e)||"string"==typeof e||"function"==typeof e.splice||zp(e)||eh(e)||Wp(e)))return!e.length;var t=Qh(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Vp(e))return!nh(e).length;for(var r in e)if(lm.call(e,r))return!1;return!0}(t)?null:t}function Im(e){return{pan:(e&me.Pan)===me.Pan,tilt:(e&me.Tilt)===me.Tilt,zoom:(e&me.Zoom)===me.Zoom}}function Am(e){return!!e||ju.isRenderSelfViewWithVideoElement()}function bm(e){const{errorCode:t,type:r,...o}=null!=e?e:{},n={...o};let i;return void 0!==t&&Object.assign(n,{subCode:t}),r===Un?i=wa.VIDEO_NO_CAMERA:r===Vn?i=wa.VIDEO_MISMATCH_CAMERA:r===Bn?i=wa.VIDEO_CAMERA_PERMISSION_DENIED:r===Fn?i=wa.VIDEO_ESTABLISH_STREAM_ERROR:r===Hn?i=wa.VIDEO_CAMERA_TAKEN:r===jn&&(i=wa.VIDEO_VB_INITIALIZE_ERROR),Object.assign(n,{errorCode:i,type:r}),n}function Cm(e,t,r){const{video:{selfPreviewVideoList:o,customizedVideoOption:n,videoAttachments:i},meeting:{userId:s}}=r;if(Am()){const t=[];o.length>0&&o.forEach((e=>{t.push(document.getElementById(e))})),null!=n&&n.videoElement&&t.push(document.querySelector(null==n?void 0:n.videoElement)),i&&i[`${s}`]&&i[`${s}`].forEach((e=>{const r=ic(e);var o;r&&t.push(null==r||null===(o=r.render)||void 0===o?void 0:o.el)})),t.filter((e=>!!e)).forEach((t=>{t&&vm(t,e)}))}else t.mirrorVideo(e)}let Tm,Rm;async function Om(e,t,r){const o=_d(e),n=document.createElement("img");return n.src=t,n.id=o,n.style.display="none",Id(t)&&n.setAttribute("crossorigin",""),await new Promise(((e,o)=>{n.onload=()=>{r&&URL.revokeObjectURL(t),e("")},n.onerror=()=>{r&&URL.revokeObjectURL(t),o("Cannot load  image.")}})),{imageId:o,imgElement:n}}async function Dm(e,t,r){if(e===ee)return ee;{let o=e;if(t){const t=await function(e){return new Promise(((t,r)=>{try{Tm&&Rm||(Tm=document.createElement("canvas"),Rm=Tm.getContext("2d"));const o=Tm,n=Rm;if(n){n.clearRect(0,0,Tm.width,Tm.height);const i=new Image;i.src=e,Id(e)&&(i.crossOrigin="");const s=16/9,a=1280,u=Math.floor(a/s);o.width=a,o.height=u,i.onload=()=>{const{width:e,height:d}=i,c=d*s;if(c>e){const t=e,r=Math.floor(e/s),o=0,c=(d-r)/2;null==n||n.drawImage(i,o,c,t,r,0,0,a,u)}else{const t=c,r=d,o=(e-t)/2,s=0;n.drawImage(i,o,s,t,r,0,0,a,u)}try{o.toBlob((e=>{t(e)}))}catch(e){e instanceof DOMException&&e.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue"),r(e)}},i.onerror=e=>{r("Cannot load  image.")}}}catch(e){r(e)}}))}(e);o=URL.createObjectURL(t)}if(o){const{imageId:e,imgElement:n}=await Om("__ZOOM_SDK_VIRTUAL_BACKGROUND_IMAGE_@__",o,!!t);return(null!=r?r:document.body).appendChild(n),e}}return null}async function wm(e,t,r){var o;const n=null!==(o=r&&r.parentNode)&&void 0!==o?o:document.body,{imageUrl:i,cropped:s,rootWidth:a,rootHeight:u}=e;let d=e;!t.video.customizedVideoOption||e.captureWidth&&e.captureHeight||(d=t.video.customizedVideoOption);const{captureWidth:l,captureHeight:p}=gm(d),h=document.createElement("div");let m;h.style.display="none",m=i?await Dm(i,s,h):null;let g,S=_d("__ZOOM_SDK_VIRTUAL_BACKGROUND_CANVAS_@__");if(r)if(c(r)){const t=Ud(r);t.id?S=t.id:t.id=S,g=t;try{a&&r.width!==a&&(r.width=a),u&&r.height!==u&&(r.height=u)}catch(e){console.warn("Cannot set the canvas width/height, and pay attention the canvas dimension is different from the setting")}}else r.setAttribute("node-id",S),r.setAttribute("media-type","preview"),g=r;else{const e=document.createElement("canvas");e.width=null!=a?a:380,e.height=null!=u?u:214,e.id=S,g=e,h.appendChild(e)}return null==n||n.appendChild(h),{captureWidth:l,captureHeight:p,imageId:m,element:g,divElement:h,id:S}}async function Nm(e,t,r,o){const n=Array.isArray(e)?e:e&&[e];if((null==n?void 0:n.length)>0){Tm&&Rm||(Tm=document.createElement("canvas"),Rm=Tm.getContext("2d"));const i=Tm,s=Rm;if(i.width=t,i.height=r,s)try{s.fillStyle="#fff",s.clearRect(0,0,t,r);for(let e=0;e<n.length;e++){const t=n[e],{type:r,x:o,y:i}=t;if("rectangle"===r){const{width:e,height:r}=t;s.fillRect(o,i,e,r)}else if("square"===r){const{length:e}=t;s.fillRect(o,i,e,e)}else if("circle"===r){const{radius:e}=t;s.beginPath(),s.arc(o,i,e,0,2*Math.PI),s.fill()}else if("svg"===r){const{svg:e,width:r,height:n}=t,a=new Image;a.src=e,Id(e)&&(a.crossOrigin=""),await new Promise(((e,t)=>{a.onload=()=>{e("")},a.onerror=()=>{t()}}));const{width:u,height:d}=a;s.drawImage(a,0,0,u,d,o,i,r,n)}}const e=await new Promise((e=>{null==i||i.toBlob((t=>{e(t)}))}));if(e){const t=URL.createObjectURL(e),{imageId:r,imgElement:n}=await Om("__ZOOM_SDK_MASK_CLIP_@__",t,!0);return(null!=o?o:document.body).appendChild(n),r}}catch(e){e instanceof DOMException&&e.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue")}}return null}function Mm(e,t){if(e===t)return!0;if(null==e&&null==t)return!0;const r=Array.isArray(e)?[...e]:[e],o=Array.isArray(t)?[...t]:[t];if(r.length!==o.length)return!1;const n=(e,t)=>e.type<t.type?-1:e.type===t.type?0:1;r.sort(n),o.sort(n);for(let e=0;e<r.length;e++)if(!fd(r[e],o[e]))return!1;return!0}function Pm(e,t,r,o){const{video:{isCurrentUserStartedVideo:n,virtualBackground:{isVBPreloadReady:i,isVBConfigured:s,imageSrc:u},backgroundMode:d},meeting:{isCurrentUserStartVideoBeforeReset:l,isUseWBVideo:p}}=r;return Nr(function(e){return void 0!==e?br([e]):Ka(Jn,1).pipe(Ur((e=>e)))}(i)).then((i=>{if(i){if(o||!s&&e.imageUrl!==ee&&e.imageUrl){if(c(o)){if(p)return Promise.reject({reason:"When you are in a WebRTC Video meeting, please use VideoPlayer to preview the virtual background.",errorCode:wa.STREAM_MISMATCH_RENDER_ELEMENT});console.warn("The canvas element will be deprecated. Please use the Videoplayer element to preview the virtual background.")}return async function(e,t,r,o){const{element:n,imageId:i,captureHeight:s,captureWidth:a,divElement:u,id:d}=await wm(e,r,o),{cameraId:c}=e,{video:{videoSsrc:l,activeCamera:p}}=r;return t.startVirtualBackgroundSetting(n,i,l,null!=c?c:p,a,s,void 0,d),u}(e,t,r,o).then((e=>n?Sl(!0):Nr(Ka(Qn,1)).then((r=>{var n;return o||t.stopVirtualBackgroundSetting(),r?(null==e||null===(n=e.parentNode)||void 0===n||n.removeChild(e),!0):Promise.reject({reason:"Cannot access the virtual background image.",errorCode:wa.VIDEO_VB_IMAGE_INACCESSIBLE})}))))}return u===e.imageUrl&&d===fe.VirtualBackground&&!l||async function(e,t,r){const{imageUrl:o,cropped:n}=e;if(o){const e=await Dm(o,n);e&&(r.video.backgroundMode===fe.Mask&&(t.stopMaskSetting(!0),await Ed((()=>{t.stopVirtualBackgroundSetting()}),0)),t.updateVirtualBackgroundImage(e),e!==ee&&setTimeout((()=>{a(e)}),0))}else t.updateVirtualBackgroundImage(null)}(e,t,r)}return Promise.reject({reason:"Cannot load virtual background model.",errorCode:wa.VIDEO_VB_MISMATCH_STATE})}))}function Lm(e,t,r,o){const{video:{mask:{isMaskConfigured:n,imageSrc:i,clip:s},backgroundMode:u,isCurrentUserStartedVideo:d},meeting:{isCurrentUserStartVideoBeforeReset:c}}=r;return o||!n&&e.imageUrl?async function(e,t,r,o){const{element:n,imageId:i,captureHeight:s,captureWidth:a,divElement:u}=await wm(e,r,o),{cameraId:d,clip:c,rootWidth:l=1280,rootHeight:p=720}=e,h=c?await Nm(c,l,p,u):null,{video:{videoSsrc:m,activeCamera:g}}=r;return h?(t.startMaskSetting(n,i,h,m,null!=d?d:g,l,p,a,s),u):Promise.reject({reason:"Clip is empty",errorCode:wa.VIDEO_MASK_IMAGE_INACCESSIBLE})}(e,t,r,o).then((e=>d?Ml(!0):Nr(Ka(ni,1)).then((r=>{var n;return o||t.stopMaskSetting(),r?(null==e||null===(n=e.parentNode)||void 0===n||n.removeChild(e),!0):Promise.reject({reason:"Cannot set video mask",errorCode:wa.VIDEO_MISMATCH_STATE})})))):u===fe.Mask&&e.imageUrl===i&&Mm(e.clip,s)&&!c?Promise.resolve(!0):async function(e,t,r){const{imageUrl:o,cropped:n,clip:i,rootWidth:s,rootHeight:u}=e,{video:{mask:{imageSrc:d,cropped:c,clip:l},backgroundMode:p}}=r;if(o){if(p===fe.VirtualBackground&&(t.stopVirtualBackgroundSetting(!0),await Ed((()=>{t.stopMaskSetting()}),0)),o!==d||n!==c){const e=await Dm(o,n);e&&(t.updateMaskBackgroundImage(e),setTimeout((()=>{a(e)}),0))}if((!Mm(i,l)||!d)&&i&&s&&u){const e=await Nm(i,s,u);e&&(t.updateMaskClip(e,s,u),setTimeout((()=>{a(e)}),0))}}else t.updateMaskBackgroundImage(null),t.updateMaskClip(null,s,u)}(e,t,r)}const km="PREVIEW_VIDEO_ENCODE_SUCCESS",Um="PREVIEW_VIDEO_VB_MODEL_READY",Vm="PREVIEW_VIDEO_USER_FORBIDDEN_CAPTURE",Bm="PREVIEW_VIDEO_CAMERA_IS_TAKEN",Hm="PREVIEW_VB_SETTING_SUCCESS";async function jm(e,t,r,o){const{imageUrl:n,cropped:i,deviceId:s}=r;let u=_d("__ZOOM_SDK_PREVIEW_VIRTUAL_BACKGROUND_CANVAS_@__"),d=null;c(t)?t.id?u=t.id:t.id=u:(t.setAttribute("node-id",u),t.setAttribute("media-type","preview"));let[l,p]=[640,360];ju.isSupportSending720P()&&(l=1280,p=720),n&&Fd(o)&&(d=await Dm(n,i)),e.startVirtualBackgroundSetting(t,d,0,null!=s?s:"default",l,p,void 0,u),d&&d!==ee&&setTimeout((()=>{a(d)}),0)}class Fm{constructor(){this.previewMediaAgent=qe.getInstance(),this.state=void 0,this.eventHandler=(e,t)=>{switch(e){case L.InitSuccessVideo:t===k.EncodeSuccess&&(Fm.isVideoEncoded=!0,$a(km,!0));break;case L.VbModelPreloadingOk:case L.VbModelPreloading_3S:case L.VbModelPreloading_10S:Fm.isVBModelReady=!0,$a(Um,!0);break;case L.VbSettingParaError:t===X.VBModelNotMatch&&(Fm.isVBModelReady=!1,$a(Um,!1));break;case L.UserForbiddedCaptureVideo:$a(Vm,t);break;case L.UserCameraIsTakenByOtherPrograms:$a(Bm,{reason:"User camera is taken by other programs.",...null!=t?t:{}});break;case L.StartVideoStreamInVbSettingSuccess:$a(Hm,!0)}}}static setMediaOption(e){Fm.mediaOption=e}setup(){if(Fm.mediaOption){if(ju.getInstance().inProgress)return Promise.resolve("");if(!qe.getInstance().inProgress){var e,t;let r;Fm.isVideoEncoded=void 0,Fm.isVBModelReady=void 0,this.previewMediaAgent.unregisterCallback(this.eventHandler),null!==(e=Fm.mediaOption)&&void 0!==e&&e.enforceMultipleVideos&&"object"==typeof(null===(t=Fm.mediaOption)||void 0===t?void 0:t.enforceMultipleVideos)&&(r=!!Fm.mediaOption.enforceMultipleVideos.disableRenderLimits);const{assetsPath:o,enforceMultipleVideos:n,enforceVirtualBackground:i,alternativeNameForVideoPlayer:s}=Fm.mediaOption,a={...$d(!!n,i)};this.previewMediaAgent.init(o,a,r),this.previewMediaAgent.registerCallback(this.eventHandler),qe.initVideoPlayer({mediaSDK:()=>this.previewMediaAgent.instance,tagName:s,failover:"1"})}return Promise.resolve("")}return Promise.reject({type:Ke,reason:"Cannot preview video with virtual background before `client.init` method."})}async startPreview(e,t){if(ju.getInstance().inProgress){var r;jm(ju.getInstance(),e,t,null===(r=Fm.mediaOption)||void 0===r?void 0:r.enforceVirtualBackground)}else{const r=t.imageUrl?Nr(void 0!==Fm.isVBModelReady?br([Fm.isVBModelReady]):Ka(Um,1).pipe(Ur((e=>e)))):Promise.resolve(!0);if(!await r)return Promise.reject({type:Ke,reason:"Cannot start video with virtual background"});var o;await Nr(Fm.isVideoEncoded?br([!0]):Ka(km,1))&&(await jm(qe.getInstance(),e,t,null===(o=Fm.mediaOption)||void 0===o?void 0:o.enforceVirtualBackground),await Nr(co(Ka(Hm,1).pipe(Ur((()=>!0))),no(...[Vm,Bm].map((e=>Ka(e,1).pipe($r((t=>(qe.getInstance().stopVirtualBackgroundSetting(),Tr({type:e.replace("PREVIEW_",""),reason:t})))))))))),this.state={element:e,vb:t})}}async stopPreview(){ju.getInstance().inProgress?ju.getInstance().stopVirtualBackgroundSetting():qe.getInstance().stopVirtualBackgroundSetting()}async updatePreview(e,t){const r=ju.getInstance().inProgress?ju.getInstance():qe.getInstance();if(e){const o=await Dm(e,t);o&&(r.updateVirtualBackgroundImage(o),o!==ee&&setTimeout((()=>{a(o)}),0))}else r.updateVirtualBackgroundImage(null)}}Fm.mediaOption=void 0,Fm.isVideoEncoded=void 0,Fm.isVBModelReady=void 0;const Wm={width:{min:1024,ideal:1280,max:1920},height:{min:576,ideal:720,max:1080},aspectRatio:{ideal:1.777777778}};class xm{constructor(e=""){this.isVideoStarted=void 0,this.videoStream=void 0,this.deviceId=void 0,this.localPreview=void 0,this.vbPreviewInProgress=void 0,this.videoParams=void 0,this.isVideoStarted=!1,this.videoStream=null,this.vbPreviewInProgress=!1,this.deviceId=e,this.localPreview=new Fm}async start(e,t){if(!e)throw new Error("VideoPlayer DOM element is falsy");if(this.isVideoStarted||this.videoStream)throw new Error("VideoAlreadyStartedError");this.videoParams={element:e,virtualBackground:t};const r=async t=>{if(!t||"OverconstrainedError"!==t.name&&"ConstraintNotSatisfiedError"!==t.name)throw t;console.log(`Warning: detected ${t.name} -- trying to fall back to lower aspect ratio`);try{const t=await navigator.mediaDevices.getUserMedia(this.getVideoConstraints(!0));return this.tryPlayVideo(e,t)}catch(e){throw e}};if(d(e)){if(void 0!==t)throw new Error("Cannot start video with virtual background");try{const t=await navigator.mediaDevices.getUserMedia(this.getVideoConstraints());return this.tryPlayVideo(e,t)}catch(e){return r(e)}}else c(e)&&void 0!==t&&console.warn("The canvas element will be deprecated. Please use the Videoplayer element to preview the virtual background."),await this.localPreview.setup().then((()=>this.localPreview.startPreview(e,{...t,deviceId:this.deviceId}))).then((()=>{this.vbPreviewInProgress=!0,this.isVideoStarted=!0}))}async stop(){if(this.vbPreviewInProgress)await this.localPreview.stopPreview(),this.vbPreviewInProgress=!1,this.isVideoStarted=!1;else{if(!this.videoStream||!this.isVideoStarted)throw new Error("VideoNotStartedError");this.videoStream.getVideoTracks().forEach((e=>e.stop())),this.videoStream=null,this.isVideoStarted=!1}}async switchCamera(e){e!==this.deviceId&&(this.deviceId=e,(this.videoStream||this.isVideoStarted)&&(await this.stop(),this.videoParams&&await this.start(this.videoParams.element,this.videoParams.virtualBackground)))}async updateVirtualBackground(e,t){this.vbPreviewInProgress&&(await this.localPreview.updatePreview(e,t),this.videoParams.virtualBackground={imageUrl:e,cropped:t})}getVideoConstraints(e=!1){let t=Wm;return re.includes(this.deviceId)?{audio:!1,video:{facingMode:this.deviceId}}:(e?t=""===this.deviceId||{deviceId:{exact:this.deviceId}}:""!==this.deviceId&&(t.deviceId={exact:this.deviceId}),{audio:!1,video:t})}async tryPlayVideo(e,t){if(!e)throw new Error("Video DOM element is falsy");try{this.videoStream=t,e.muted=!0,e.playsInline=!0,e.srcObject=this.videoStream,await e.play(),this.isVideoStarted=!0}catch(e){throw e}}}const $m="SET_MEETING_INFO",Gm="SET_MEETING_JOIN_INFO",zm="SET_WINDOWN_OPEN",qm="SET_APPID_SIGNATURE",Km="SET_ZTK",Jm="SET_ZSK",Qm="SET_OBF_TOKEN",Ym="SET_TK_MTKGUID",Zm="SET_PING_RWC_TIMESTAMP",Xm="SET_IN_MEETING_INFO",eg="SET_MEETING_ATTRIBUTE",tg="RESET_MEETING",rg="SET_IS_HOST",og="SET_IS_COHOST",ng="SET_MEETING_IS_ON_HOLD",ig="SET_IS_MEETING_RESET",sg="SET_AUDIO_VIDEO_BEFORE_ON_HOLD",ag="SET_CURRENT_USER_AUDIO_BEFORE_RESET",ug="SET_IS_CURRENT_USER_MUTED_BEFORE_RESET",dg="SET_IS_CURRENT_USER_START_VIDEO_BEFORE_RESET",cg="SET_MEETING_STATUS",lg="SET_MEETING_REGION",pg="SET_JOIN_MEETING_TIME_STAMP",hg="SET_ACTIVE_APP_INFO",mg="SET_MEETING_IDLE_START_TIME",gg="SET_SESSION_IDLE_TIMEOUT_MINUTES",Sg="ADD_DISCARDED_RWC_HOST",vg="SET_SHARE_PRONOUN_TYPE",fg="SET_IS_STAY_AWAKE_DURING_THE_SESSION",yg="SET_MEETING_JOIN_SUCCESS_TIMESTAMP",Eg="RESET_FAILOVER_RECORD",_g="SET_FAILOVER_REASON",Ig="SET_IS_QUICKLY_LEAVE_MEETING_AFTER_REFRESH",Ag="SET_MEETING_INFO_TIMESTAMP",bg="SET_IS_ENABLE_ZMK_FROM_RWG",Cg="SET_IS_RLB_TP",Tg="SET_IS_RLB_TP_READY",Rg=["bLock","bHoldUponEntry","viewOnly","listenOnlyPhone","bAllowRaiseHand","bAllowAttendeeRename","bBroadcast","bAllowPlayChimeForEnterOrExit","bIbDisableShare","bIbDisableChat","encryptKey","bNoHostTimeOut","bAllowShowCount","bHasAST","bHasRMC","gatewayKey","encryptKey"],Og={bChime:"bAllowPlayChimeForEnterOrExit",bHasAST:"hasAst",bHasRMC:"hasRmc",topic:e=>({meetingTopic:ld(e)}),gatewayKey:e=>{const[,t,r]=e.split(".");return t&&r?{gatewayUser:{userId:Number(t),sn:r}}:{}},encryptKey:e=>({gcmSessinKey:md(e)})},Dg=_c("GET_MEETING_INFO"),wg=_c("GET_INSTANT_MEETING_INFO");_c("LOGON_ZOOM_DOMAIN"),_c("VERIFY_ZOOM_RECAPTCHA"),_c("LOGON_THIRD_PARTY_DOMAIN");const Ng=_c("PING_RWC_SERVER"),Mg=_c("MEETING_FAILOVER"),Pg=_c("LEAVE_MEETING"),Lg=_c("LEAVE_WAITING_ROOM"),kg=_c("END_MEETING");_c("REGISTER_WEBINAR");const Ug=_c("TRIGGER_IDLE_CHECK"),Vg=_c("END_OF_ZE_WORLD"),Bg=_c("SET_IS_UITOOLKIT"),{setMeetingInfo:Hg,setMeetingJoinInfo:jg,setWindownOpen:Fg,setAppidSignature:Wg,setZtk:xg,setZsk:$g,setObfToken:Gg,setTkMtkguid:zg,setPingRwcTimestamp:qg,setInMeetingInfo:Kg,setMeetingAttribute:Jg,resetMeeting:Qg,setIsHost:Yg,setIsCohost:Zg,setMeetingIsOnHold:Xg,setIsMeetingReset:eS,setAudioVideoBeforeOnHold:tS,setCurrentUserAudioBeforeReset:rS,setIsCurrentUserMutedBeforeReset:oS,setMeetingStatus:nS,setMeetingRegion:iS,setIsCurrentUserStartVideoBeforeReset:sS,setJoinMeetingTimeStamp:aS,setActiveAppInfo:uS,setMeetingIdleStartTime:dS,setSessionIdleTimeoutMinutes:cS,addDiscardedRwcHost:lS,setSharePronounType:pS,setIsStayAwakeDuringTheSession:hS,setMeetingJoinSuccessTimestamp:mS,resetFailoverRecord:gS,setFailoverReason:SS,setIsQuicklyLeaveMeetingAfterRefresh:vS,setMeetingInfoTimestamp:fS,setIsEnableZmkFromRwg:yS,setIsRlbTp:ES,setIsRlbTpReady:_S}=Fc({[$m]:e=>e,[Gm]:e=>e,[zm]:e=>e,[qm]:e=>e,[Km]:e=>e,[Jm]:e=>e,[Qm]:e=>e,[Ym]:e=>e,[Zm]:e=>e,[Xm]:e=>e,[eg]:e=>{if(Rg.some((t=>e&&void 0!==e[t]))){let t=e;return Object.keys(Og).some((t=>void 0!==e[t]))&&(t=Object.keys(e).reduce(((t,r)=>{const o=Og[r];return"function"==typeof o?Object.assign(t,o(e[r])):"string"==typeof o&&(t[o]=e[r]),t}),{})),t}return{}},[rg]:e=>e&&e.bHost,[og]:e=>e&&e.bCoHost,[tg]:e=>e,[ng]:e=>e,[ig]:e=>e,[sg]:e=>e,[ag]:e=>e,[ug]:e=>e,[cg]:e=>e,[lg]:e=>e,[dg]:e=>e,[pg]:e=>e,[hg]:e=>e,[mg]:e=>e,[gg]:e=>e,[Sg]:e=>e,[vg]:e=>e,[fg]:e=>e,[yg]:e=>e,[Eg]:e=>e,[_g]:e=>e,[Ig]:e=>e,[Ag]:e=>e,[bg]:e=>e,[Cg]:e=>e,[Tg]:e=>e});class IS{static destroyClient(){if(this.meetingClient){const e=this.meetingClient[r],t=this.meetingClient.leave().then((()=>Nr(ro(500)).then((()=>{null==e||e(Vg()),Qa()}))));return this.meetingClient=null,t}return Promise.resolve(void 0)}static checkFeatureRequirements(){return function(){const e=[],t=[],{isAndroidOrIOSBrowser:r,browser:o,browserVersion:n,os:i,osVersion:s,isChrome:a,isFirefox:u,isSafari:d}=C;!r&&(a||u||d)&&R()?e.push("Virtual Background"):t.push("Virtual Background"),(r||a)&&R()?e.push("Share Chrome Tab Audio"):t.push("Share Chrome Tab Audio"),!r&&R()?(e.push("Screen Share (send)"),e.push("720p Video (receive)"),e.push("Share 2nd Camera")):(t.push("Screen Share (send)"),t.push("720p Video (receive)"),t.push("Share 2nd Camera")),R()?(e.push("Audio"),e.push("Video"),e.push("Screen Share (receive)"),e.push("Chat"),e.push("Closed Captioning"),e.push("Live Transcription"),e.push("Live Translation"),e.push("Cloud Recording"),e.push("Call Out (PSTN)"),e.push("Command Channel"),e.push("RTMP Live Streaming"),e.push("Encryption"),e.push("720p Video (send)"),e.push("Render Multiple Videos")):(t.push("Audio"),t.push("Video"),t.push("Screen Share (receive)"),t.push("Chat"),t.push("Closed Captioning"),t.push("Live Transcription"),t.push("Live Translation"),t.push("Cloud Recording"),t.push("Call Out (PSTN)"),t.push("Command Channel"),t.push("RTMP Live Streaming"),t.push("Encryption"),e.push("720p Video (send)"),e.push("Render Multiple Videos"));const c=r?`${i}${s}`:`${o}${n}`;return t.length>0&&console.log("Some features are not supported on your platform, please refer to https://developers.zoom.us/docs/video-sdk/web/browser-support/"),{platform:c,supportFeatures:e,unSupportFeatures:t}}()}static checkSystemRequirements(){return O()}static getDevices(e){return e?navigator.mediaDevices.enumerateDevices():navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((e=>(e.getTracks().forEach((e=>e.stop())),navigator.mediaDevices.enumerateDevices()))).catch((e=>(console.warn(e),navigator.mediaDevices.enumerateDevices())))}static createLocalAudioTrack(e=""){return new P(e)}static createLocalVideoTrack(e=""){return new xm(e)}static preloadDependentAssets(e){(async e=>{const t=e||v,r=`${t}/${Uo}`,o=[],n=[],i=`${t}/`;if(Bd()){const{workers:e,wasms:t}=xd("audio","simd",i);o.push(...e),n.push(...t)}else{const{workers:e,wasms:t}=xd("audio","",i);o.push(...e),n.push(...t)}if(Bd()&&function(){const{browser:e,browserVersion:t,isAndroidBrowser:r,isSupportSharedArrayBuffer:o}=C;return!r&&"chrome"===e.toLowerCase()&&Sd(t,"100")>0&&o}()){const{workers:e,wasms:t}=xd(["video","sharing"],"videoShare",i);o.push(...e),n.push(...t)}else if(Bd()&&Vd()){const{workers:e,wasms:t}=xd(["video","sharing"],"simd,thread",i);o.push(...e),n.push(...t)}else if(Vd()){const{workers:e,wasms:t}=xd(["video","sharing"],"thread",i);o.push(...e),n.push(...t)}else if(Bd()){const{workers:e,wasms:t}=xd(["video","sharing"],"simd",i);o.push(...e),n.push(...t)}else{const{workers:e,wasms:t}=xd(["video","sharing"],"",i);o.push(...e),n.push(...t)}const{workers:s,wasms:a}=xd("common","thread",i);o.push(...s),n.push(...a);const u=[Wd(r,"script")];o.forEach((e=>{u.push(Wd(e,"fetch"))})),n.forEach((e=>{u.push(Wd(e,"fetch"))}));try{document.head.append(...u)}catch(e){}})(e)}}function AS(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,t,i),null):i}IS.meetingClient=void 0,IS.VERSION=g;let bS=function(e){return e[e.WbSettingLockShare=0]="WbSettingLockShare",e[e.WbSettingHostGrab=1]="WbSettingHostGrab",e[e.WbSettingLockShareSecurity=2]="WbSettingLockShareSecurity",e[e.WbSettingAnyoneGrab=3]="WbSettingAnyoneGrab",e}({}),CS=function(e){return e[e.OWNER=0]="OWNER",e[e.COOWNER=1]="COOWNER",e[e.EDITOR=2]="EDITOR",e[e.COMMENTER=3]="COMMENTER",e[e.REVIEWER=4]="REVIEWER",e}({}),TS=function(e){return e[e.HostOnly=0]="HostOnly",e[e.InternalUser=1]="InternalUser",e[e.AllParticipants=2]="AllParticipants",e}({}),RS=function(e){return e.DEFAULT="",e.READY="ready",e.INIT="init",e.OPEN="open",e.LOADING="loading",e.OPENED="opened",e.LEAVE="leave",e.CLOSE="close",e.ERROR="error",e}({});const OS=RS,DS="PWA_WB_DASHBOARD",wS={[wa.WHITEBOARD_BACKEND_ERROR]:"Whiteboard backend error",[wa.WHITEBOARD_GET_INIT_TOKEN_FAIL]:"Whiteboard get token fail, please refresh page",[wa.WHITEBOARD_LOAD_WHITEBOARD_JS_CSS_ERROR]:"Whiteboard load whiteboard js/css error, please refresh page",[wa.WHITEBOARD_VIDEOSDK_NOT_SUPPORT_DASHBOARD]:"VideoSDK does not support dashboard",[wa.WHITEBOARD_MEETING_NOT_JOINED]:"Meeting not joined",[wa.WHITEBOARD_ELEMENT_NOT_FOUND]:"Whiteboard element not found",[wa.WHITEBOARD_WEBINAR_NOT_SUPPORTED]:"Webinar mode not supported",[wa.WHITEBOARD_DOC_ID_NOT_AVAILABLE]:"Document ID not available",[wa.WHITEBOARD_INSUFFICIENT_PRIVILEGES]:"Insufficient privileges for whiteboard operation",[wa.WHITEBOARD_INVALID_STATE]:"Invalid whiteboard state",[wa.WHITEBOARD_NOT_AVAILABLE]:"Whiteboard feature not available",[wa.WHITEBOARD_PRIVILEGE_SET_FAILED]:"Failed to set whiteboard privilege",[wa.WHITEBOARD_USER_ROLE_CHANGE_FAILED]:"Failed to change user whiteboard role",[wa.WHITEBOARD_LOCK_API_NOT_AVAILABLE]:"Lock whiteboard API not available for meetings",[wa.WHITEBOARD_NOT_OPENED]:"Whiteboard is not opened",[wa.WHITEBOARD_INVALID_EXPORT_FORMAT]:"Invalid export format",[wa.WHITEBOARD_PRESENTER_LEAVE]:"You are the presenter, you cant leave whiteboard, please use closeWhiteboard",[wa.WHITEBOARD_TOKEN_NOT_AVAILABLE]:"Whiteboard token is not available, please retry",[wa.WHITEBOARD_NOT_INIT]:"Whiteboard is not initialized",[wa.WHITEBOARD_NOT_INIT_SUCCESS]:"Whiteboard initialization failed",[wa.WHITEBOARD_NEED_RETRY]:"Whiteboard open failed, please retry",[wa.WHITEBOARD_REQUIRE_SHARING_STOP]:"If want to open whiteboard, please stop sharing first",[wa.WHITEBOARD_ALREADY_OPEN]:"Whiteboard is already opened",[wa.WHITEBOARD_AND_SHARING_CONFLICT]:"Unable to share screen when whiteboard is sharing",[wa.WHITEBOARD_AND_ANNOTATION_CONFLICT]:"Unable to start annotation when whiteboard is sharing",[wa.WHITEBOARD_DASHBOARD_IFRAME_NOT_FOUND]:"Whiteboard dashboard iframe not found"};function NS(t,r,o){const n=o.value;o.value=function(...t){const r=this[e];if(r){const{meeting:{isOnHold:e,isMeetingReset:t,meetingStatus:o}}=r.getState();if(o!==Ho.Joined)return Promise.reject({type:Ze,reason:"closed",errorCode:wa.CLIENT_SESSION_STATE_CLOSED});if(t)return Promise.reject({type:Ze,reason:"reconnecting",errorCode:wa.CLIENT_SESSION_STATE_RECONNECTING});if(e)return Promise.reject({type:Ze,reason:"on hold",errorCode:wa.CLIENT_SESSION_STATE_ON_HOLD})}return n.apply(this,t)}}function MS(t,r,o){const n=o.value;o.value=function(...t){const r=this[e];if(r){const{whiteboard:{whiteboardStatus:e,dashboardStatus:t}}=r.getState();if(e===RS.DEFAULT&&t===OS.DEFAULT)return Promise.reject({type:Ze,reason:"whiteboard not init success. please call init",errorCode:wa.WHITEBOARD_NOT_INIT});if(e===RS.ERROR&&t===OS.ERROR)return Promise.reject({type:Ze,reason:"whiteboard not init success. please call init",errorCode:wa.WHITEBOARD_NOT_INIT_SUCCESS})}return n.apply(this,t)}}function PS(t,r,o){const n=o.value;o.value=function(...t){const r=this[e];if(r){const e=r.getState();if(!Ru(e))return Promise.reject({type:Ye,reason:"only host or co-host can do the operation",errorCode:wa.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})}return n.apply(this,t)}}function LS(t,r,o){const n=o.value;o.value=function(...t){const r=this[e];if(r){const e=r.getState();if(!Ou(e))return Promise.reject({type:Ye,reason:"only host can do the operation",errorCode:wa.CLIENT_HOST_PERMISSION_REQUIRED})}return n.apply(this,t)}}function kS(t){return function(r,o,n){const i=n.value;n.value=function(...r){const o=this[e];return o&&void 0===o.getState()[t]?Promise.reject({type:Ke,reason:`Module:${t} is not enabled`}):i.apply(this,r)}}}var US=function(e){function t(t,r){var o=e.call(this,(function(e){var t=o.__notifier.subscribe(e);return t&&!t.closed&&e.next(o.value),t}))||this;return o.__notifier=new Vt,o.value=r,t.subscribe((function(e){e!==o.value&&(o.value=e,o.__notifier.next(e))})),o}return rt(t,e),t}(wt),VS=function(e,t){return e===t||"function"==typeof t&&e===t.toString()};function BS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;return uo(1===r?function(t){return VS(t.type,e[0])}:function(t){for(var o=0;o<r;o++)if(VS(t.type,e[o]))return!0;return!1})}const HS=_c("CONNECT_ZOOM_SOCKET"),jS=_c("CONNECT_XMPP_SOCKET"),FS=_c("CLOSE_ZOOM_SOCKET"),WS=_c("CLOSE_XMPP_SOCKET"),xS=_c("RECEIVE_MESSAGE_FROM_ZOOM_SOCKET"),$S=_c("RECEIVE_SHARING_PAYLOAD_FROM_ZOOM_SOCKET"),GS=_c("RECEIVE_MESSAGE_FROM_XMPP_SOCKET"),zS=_c("CONNECT_MAIN_SESSION_SOCKET"),qS=_c("CLOSE_MAIN_SESSION_SOCKET"),KS=_c("RECEIVE_MESSAGE_FROM_MAIN_SESSION_SOCKET"),{setZoomSocketStatus:JS,setRwgServersList:QS,setRwgRetryCount:YS,setXmppSocketStatus:ZS,setMainSessionSocketStatus:XS,setXmppSocketRetryCount:ev,resetSocket:tv}=Fc("SET_ZOOM_SOCKET_STATUS","SET_RWG_SERVERS_LIST","SET_RWG_RETRY_COUNT","SET_XMPP_SOCKET_STATUS","SET_MAIN_SESSION_SOCKET_STATUS","SET_XMPP_SOCKET_RETRY_COUNT","RESET_SOCKET"),rv=_c("CONNECT_TO_MEDIA_STREAM"),ov=_c("RECEIVE_PAYLOAD_FROM_MEDIA_SDK"),{setAudioEncodeStatus:nv,setAudioDecodeStatus:iv,setVideoEncodeStatus:sv,setVideoDecodeStatus:av,setSharingEncodeStatus:uv,setSharingDecodeStatus:dv,setMediaConstraints:cv,setMediaEncryptKey:lv,setIsEnableDecoderInWorklet:pv,setPatchedMediaSdkStatus:hv,setMediaAssetsPath:mv,setIsMediaAgentInitialized:gv,resetMedia:Sv}=Fc("SET_AUDIO_ENCODE_STATUS","SET_AUDIO_DECODE_STATUS","SET_VIDEO_ENCODE_STATUS","SET_VIDEO_DECODE_STATUS","SET_SHARING_ENCODE_STATUS","SET_SHARING_DECODE_STATUS","SET_MEDIA_CONSTRAINTS","SET_MEDIA_ENCRYPT_KEY","SET_IS_ENABLE_DECODER_IN_WORKLET","SET_PATCHED_MEDIA_SDK_STATUS","SET_MEDIA_ASSETS_PATH","SET_IS_MEDIA_AGENT_INITIALIZED","RESET_MEDIA");function vv(e,t,...r){return e(Cr(...r||[]),t,null)}function fv(...e){const t=(...t)=>no(...e.map((e=>{const r=e(...t);if(!r)throw new TypeError(`combineEpics: one of the provided Epics "${e.name||"<anonymous>"}" does not return a stream. Double check you're not missing a return statement!`);return r.pipe(lo(((e,t)=>(setTimeout((()=>{throw e}),0),t))))})));try{Object.defineProperty(t,"name",{value:`combineEpics(${e.map((e=>e.name||"<anonymous>")).join(", ")})`})}catch(e){}return t}function yv(...e){return fv(...e.flatMap((e=>Object.values(e))))}function Ev(e,t){return e.pipe(BS(`${xS}`),uo((e=>e.payload.evt===t)))}function _v(e,t){return e.pipe(BS(`${KS}`),uo((e=>e.payload.evt===t)))}function Iv(e,t){return e.pipe(BS(`${GS}`),uo((e=>e.payload.evt===t)))}function Av(e,t){return e.pipe(BS(`${xS}`,`${KS}`),uo((e=>e.payload.evt===t)))}function bv(e,t){return e.pipe(BS(`${ov}`),uo((e=>Array.isArray(t)?t.indexOf(e.payload.type)>-1:e.payload.type===t)))}const Cv=20225,Tv=20234,Rv=7937,Ov=7938,Dv=12039,wv=16138,Nv=4098,Mv=4305,Pv=4343,Lv=16428,kv="SET_ATTENDEES_LIST",Uv="SET_ASSISTANT_LIST",Vv="RESET_PARTICIPANTS",Bv="SET_IS_ADMIT_ALL_SILENT_USERS",Hv="SET_CLEAR_RAISE_HAND",jv="SET_CLEAR_ATTENDEE_FEEDBACK",Fv="ADD_FAILOVER_ATTENDEES",Wv="REMOVE_FAILOVER_ATTENDEES",xv="UPDATE_ATTENDEE_DISPLAY_NAME",$v="REMOVE_XMPP_ATTENDEE_USER",Gv="UPDATE_XMPP_ATTENDEE_LIST",zv="SET_ATTENDEE_EXTRA_KEY",{setAttendeesList:qv,setAssistantList:Kv,setIsAdmitAllSilentUsers:Jv,resetParticipants:Qv,addFailoverAttendees:Yv,removeFailoverAttendees:Zv,setClearRaiseHand:Xv,setClearAttendeeFeedback:ef,updateAttendeeDisplayName:tf,removeXmppAttendeeUser:rf,updateXmppAttendeeList:of,setAttendeeExtraKey:nf}=Fc({[kv]:e=>e,[Uv]:e=>e,[Gv]:e=>e,[Vv]:()=>({}),[Bv]:e=>e,[Wv]:e=>e,[Fv]:e=>e,[Hv]:()=>({}),[jv]:()=>({}),[xv]:e=>e,[$v]:e=>e,[zv]:e=>e}),sf={id:"userId",type:e=>du(e)?{userType:e,avatarBackgroundType:Math.floor(8*Math.random())+1}:{userType:e},role:e=>({userRole:e,isHost:uu(e)}),dn2:e=>({displayName:ld(e)}),bShareOn:"sharerOn",bSharePause:"sharerPause",bLocalRecordStatus:e=>({bLocalRecord:e}),bGuest:"isGuest",bCapsRequestLT:"isRequestLT",customerKey:"userIdentity",bBotUser:"botUser",BotBrandName:"botBrandName",BotAuthorizerName:"botAuthorizerName"},af=e=>{const t={};return["add","remove","update"].forEach((r=>{const o=r,n=e[o];null!=n&&(t[o]=n.reduce(((e,t)=>{const r=Object.keys(t).reduce(((e,r)=>{const o=sf[r];return"function"==typeof o?Object.assign(e,o(t[r])):"string"==typeof o?Object.assign(e,{[`${o}`]:t[r]}):Object.assign(e,{[`${r}`]:t[r]}),e}),{}),o=e.find((e=>e.userId===r.userId));return void 0!==o?Object.assign(o,r):e.push(r),e}),[]))})),t},uf={name:"displayName",node:e=>({userId:Number(e)}),role:e=>({userRole:Number(e)})},df=e=>Object.keys(e).reduce(((t,r)=>{const o=uf[r];return"function"==typeof o?Object.assign(t,o(e[r])):"string"==typeof o?Object.assign(t,{[`${o}`]:e[r]}):Object.assign(t,{[`${r}`]:e[r]}),t}),{});let cf=function(e){return e.Add="add",e.List="list",e.Remove="memberremove",e.rename="rename",e.update="UPDATE",e}({});function lf(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function pf(e){return!!e&&!!e[Yf]}function hf(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Zf}(e)||Array.isArray(e)||!!e[Qf]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Qf])||yf(e)||Ef(e))}function mf(e){return pf(e)||lf(23,e),e[Yf].t}function gf(e,t,r){void 0===r&&(r=!1),0===Sf(e)?(r?Object.keys:Xf)(e).forEach((function(o){r&&"symbol"==typeof o||t(o,e[o],e)})):e.forEach((function(r,o){return t(o,r,e)}))}function Sf(e){var t=e[Yf];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:yf(e)?2:Ef(e)?3:0}function vf(e,t){return 2===Sf(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ff(e,t,r){var o=Sf(e);2===o?e.set(t,r):3===o?e.add(r):e[t]=r}function yf(e){return zf&&e instanceof Map}function Ef(e){return qf&&e instanceof Set}function _f(e){return e.o||e.t}function If(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ey(e);delete t[Yf];for(var r=Xf(t),o=0;o<r.length;o++){var n=r[o],i=t[n];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[n]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[n]})}return Object.create(Object.getPrototypeOf(e),t)}function Af(e,t){return void 0===t&&(t=!1),Cf(e)||pf(e)||!hf(e)||(Sf(e)>1&&(e.set=e.add=e.clear=e.delete=bf),Object.freeze(e),t&&gf(e,(function(e,t){return Af(t,!0)}),!0)),e}function bf(){lf(2)}function Cf(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Tf(e){var t=ty[e];return t||lf(18,e),t}function Rf(){return $f}function Of(e,t){t&&(Tf("Patches"),e.u=[],e.s=[],e.v=t)}function Df(e){wf(e),e.p.forEach(Mf),e.p=null}function wf(e){e===$f&&($f=e.l)}function Nf(e){return $f={p:[],l:$f,h:e,m:!0,_:0}}function Mf(e){var t=e[Yf];0===t.i||1===t.i?t.j():t.g=!0}function Pf(e,t){t._=t.p.length;var r=t.p[0],o=void 0!==e&&e!==r;return t.h.O||Tf("ES5").S(t,e,o),o?(r[Yf].P&&(Df(t),lf(4)),hf(e)&&(e=Lf(t,e),t.l||Uf(t,e)),t.u&&Tf("Patches").M(r[Yf].t,e,t.u,t.s)):e=Lf(t,r,[]),Df(t),t.u&&t.v(t.u,t.s),e!==Jf?e:void 0}function Lf(e,t,r){if(Cf(t))return t;var o=t[Yf];if(!o)return gf(t,(function(n,i){return kf(e,o,t,n,i,r)}),!0),t;if(o.A!==e)return t;if(!o.P)return Uf(e,o.t,!0),o.t;if(!o.I){o.I=!0,o.A._--;var n=4===o.i||5===o.i?o.o=If(o.k):o.o,i=n,s=!1;3===o.i&&(i=new Set(n),n.clear(),s=!0),gf(i,(function(t,i){return kf(e,o,n,t,i,r,s)})),Uf(e,n,!1),r&&e.u&&Tf("Patches").N(o,r,e.u,e.s)}return o.o}function kf(e,t,r,o,n,i,s){if(pf(n)){var a=Lf(e,n,i&&t&&3!==t.i&&!vf(t.R,o)?i.concat(o):void 0);if(ff(r,o,a),!pf(a))return;e.m=!1}else s&&r.add(n);if(hf(n)&&!Cf(n)){if(!e.h.D&&e._<1)return;Lf(e,n),t&&t.A.l||Uf(e,n)}}function Uf(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&Af(t,r)}function Vf(e,t){var r=e[Yf];return(r?_f(r):e)[t]}function Bf(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var o=Object.getOwnPropertyDescriptor(r,t);if(o)return o;r=Object.getPrototypeOf(r)}}function Hf(e){e.P||(e.P=!0,e.l&&Hf(e.l))}function jf(e){e.o||(e.o=If(e.t))}function Ff(e,t,r){var o=yf(t)?Tf("MapSet").F(t,r):Ef(t)?Tf("MapSet").T(t,r):e.O?function(e,t){var r=Array.isArray(e),o={i:r?1:0,A:t?t.A:Rf(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},n=o,i=ry;r&&(n=[o],i=oy);var s=Proxy.revocable(n,i),a=s.revoke,u=s.proxy;return o.k=u,o.j=a,u}(t,r):Tf("ES5").J(t,r);return(r?r.A:Rf()).p.push(o),o}function Wf(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return If(e)}var xf,$f,Gf="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),zf="undefined"!=typeof Map,qf="undefined"!=typeof Set,Kf="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Jf=Gf?Symbol.for("immer-nothing"):((xf={})["immer-nothing"]=!0,xf),Qf=Gf?Symbol.for("immer-draftable"):"__$immer_draftable",Yf=Gf?Symbol.for("immer-state"):"__$immer_state",Zf=""+Object.prototype.constructor,Xf="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ey=Object.getOwnPropertyDescriptors||function(e){var t={};return Xf(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},ty={},ry={get:function(e,t){if(t===Yf)return e;var r=_f(e);if(!vf(r,t))return function(e,t,r){var o,n=Bf(t,r);return n?"value"in n?n.value:null===(o=n.get)||void 0===o?void 0:o.call(e.k):void 0}(e,r,t);var o=r[t];return e.I||!hf(o)?o:o===Vf(e.t,t)?(jf(e),e.o[t]=Ff(e.A.h,o,e)):o},has:function(e,t){return t in _f(e)},ownKeys:function(e){return Reflect.ownKeys(_f(e))},set:function(e,t,r){var o=Bf(_f(e),t);if(null==o?void 0:o.set)return o.set.call(e.k,r),!0;if(!e.P){var n=Vf(_f(e),t),i=null==n?void 0:n[Yf];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,n)&&(void 0!==r||vf(e.t,t)))return!0;jf(e),Hf(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==Vf(e.t,t)||t in e.t?(e.R[t]=!1,jf(e),Hf(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=_f(e),o=Reflect.getOwnPropertyDescriptor(r,t);return o?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:o.enumerable,value:r[t]}:o},defineProperty:function(){lf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){lf(12)}},oy={};gf(ry,(function(e,t){oy[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),oy.deleteProperty=function(e,t){return oy.set.call(this,e,t,void 0)},oy.set=function(e,t,r){return ry.set.call(this,e[0],t,r,e[0])};var ny=function(){function e(e){var t=this;this.O=Kf,this.D=!0,this.produce=function(e,r,o){if("function"==typeof e&&"function"!=typeof r){var n=r;r=e;var i=t;return function(e){var t=this;void 0===e&&(e=n);for(var o=arguments.length,s=Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];return i.produce(e,(function(e){var o;return(o=r).call.apply(o,[t,e].concat(s))}))}}var s;if("function"!=typeof r&&lf(6),void 0!==o&&"function"!=typeof o&&lf(7),hf(e)){var a=Nf(t),u=Ff(t,e,void 0),d=!0;try{s=r(u),d=!1}finally{d?Df(a):wf(a)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return Of(a,o),Pf(e,a)}),(function(e){throw Df(a),e})):(Of(a,o),Pf(s,a))}if(!e||"object"!=typeof e){if(void 0===(s=r(e))&&(s=e),s===Jf&&(s=void 0),t.D&&Af(s,!0),o){var c=[],l=[];Tf("Patches").M(e,s,c,l),o(c,l)}return s}lf(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var o=arguments.length,n=Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(n))}))};var o,n,i=t.produce(e,r,(function(e,t){o=e,n=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,o,n]})):[i,o,n]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){hf(e)||lf(8),pf(e)&&(e=function(e){return pf(e)||lf(22,e),function e(t){if(!hf(t))return t;var r,o=t[Yf],n=Sf(t);if(o){if(!o.P&&(o.i<4||!Tf("ES5").K(o)))return o.t;o.I=!0,r=Wf(t,n),o.I=!1}else r=Wf(t,n);return gf(r,(function(t,n){o&&function(e,t){return 2===Sf(e)?e.get(t):e[t]}(o.t,t)===n||ff(r,t,e(n))})),3===n?new Set(r):r}(e)}(e));var t=Nf(this),r=Ff(this,e,void 0);return r[Yf].C=!0,wf(t),r},t.finishDraft=function(e,t){var r=(e&&e[Yf]).A;return Of(r,t),Pf(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Kf&&lf(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var o=t[r];if(0===o.path.length&&"replace"===o.op){e=o.value;break}}r>-1&&(t=t.slice(r+1));var n=Tf("Patches").$;return pf(e)?n(e,t):this.produce(e,(function(e){return n(e,t)}))},e}(),iy=new ny,sy=iy.produce;iy.produceWithPatches.bind(iy),iy.setAutoFreeze.bind(iy),iy.setUseProxies.bind(iy),iy.applyPatches.bind(iy),iy.createDraft.bind(iy),iy.finishDraft.bind(iy);const ay={attendeesList:[],assistantList:[],xmppAttendeeList:[],allowTalkAttendeesList:[],failoverAttendeesList:[],isAdmitAllSilentUsers:!1},uy=zc({[`${qv}`]:sy(((e,{payload:t})=>{void 0!==t.add&&t.add.length>0&&t.add.forEach((t=>{if(t.userType===au.Assitant){const r=e.assistantList.find((e=>e.userId===t.userId));void 0!==r?Object.assign(r,t):e.assistantList.push(t)}else if(cu(t.userRole)){const r=e.allowTalkAttendeesList.find((e=>e.userId===t.userId));void 0!==r?Object.assign(r,t):e.allowTalkAttendeesList.push(t)}else{const r=e.attendeesList.find((e=>e.userId===t.userId));void 0!==r?Object.assign(r,t):e.attendeesList.push(t)}})),void 0!==t.update&&t.update.length>0&&t.update.forEach((t=>{const r=e.attendeesList.find((e=>e.userId===t.userId));if(void 0!==r)Object.assign(r,t);else{const r=e.allowTalkAttendeesList.find((e=>e.userId===t.userId));if(void 0!==r)Object.assign(r,t);else{const r=e.assistantList.find((e=>e.userId===t.userId));void 0!==r&&Object.assign(r,t)}}})),void 0!==t.remove&&t.remove.length>0&&t.remove.forEach((t=>{const r=e.attendeesList.findIndex((e=>e.userId===t.userId));if(-1!==r)e.attendeesList.splice(r,1);else{const r=e.allowTalkAttendeesList.findIndex((e=>e.userId===t.userId));if(-1!==r)e.allowTalkAttendeesList.splice(r,1);else{const r=e.assistantList.findIndex((e=>e.userId===t.userId));-1!==r&&e.assistantList.splice(r,1)}}}))})),[`${of}`]:sy(((e,{payload:t})=>{const{xmppAttendeeList:r}=e,o=r.map((e=>e.jid));t.forEach((e=>{const{jid:t}=e,n=o.indexOf(t);-1!==n?Object.assign(r[n],e):r.push(e)}))})),[`${Jv}`]:sy(((e,{payload:t})=>{e.isAdmitAllSilentUsers=t})),[`${Xv}`]:sy((e=>{e.attendeesList.forEach((e=>{e.bRaiseHand&&(e.bRaiseHand=!1)}))})),[`${ef}`]:sy((e=>{e.attendeesList.forEach((e=>{e.feedback>0&&(e.feedback=0)}))})),[`${Yv}`]:sy(((e,{payload:t})=>{e.failoverAttendeesList.push(t)})),[`${Zv}`]:sy(((e,{payload:t})=>{t.forEach((t=>{const r=e.failoverAttendeesList.findIndex((e=>e.zoomID===t.zoomID));-1!==r&&e.failoverAttendeesList.splice(r,1)}))})),[`${tf}`]:sy(((e,{payload:t})=>{const{jid:r,name:o}=t,n=e.xmppAttendeeList.find((e=>e.jid===r));n&&(n.displayName=o)})),[`${rf}`]:sy(((e,{payload:t})=>{const{jid:r}=t,o=e.xmppAttendeeList.findIndex((e=>e.jid===r));-1!==r&&e.xmppAttendeeList.splice(o,1)})),[`${nf}`]:sy(((e,{payload:t})=>{const{userId:r,key:o,value:n}=t,i=e.attendeesList.find((e=>e.userId===r));i&&(i[`${o}`]=n)})),[`${Qv}`]:()=>ay},ay),dy={epics0:(e,t)=>Ev(e,Rv).pipe(Ur((e=>af(e.payload.body))),Ro(t),$r((([e,t])=>{let r=[qv(e)];const{meeting:{userId:o,isWebinar:n,isOnHold:i},participants:{attendeesList:s,failoverAttendeesList:a,allowTalkAttendeesList:u}}=t,d=u.map((e=>e.userId));if(e.add){const i=e.add.filter((e=>e.userId===o));i.length>0&&i.forEach((e=>{void 0!==e.bHold&&r.push(Xg(e.bHold)),s.some((t=>t.userId===e.userId))?$a(Do,e):$a(Oo,e)}));const u=e.add.filter((e=>e.userId!==o));if(u.length>0){const e=u.filter((e=>!cu(e.userRole))).map((e=>{const r={...e};if(du(e.userType)){var o;const n=null===(o=t.audio)||void 0===o?void 0:o.dialout.find((t=>t.phoneNodeId===e.userId));n&&Object.assign(r,{phoneNumber:n.phoneNumber})}const n=a.find((t=>t.zoomID===e.zoomID));return n&&Object.assign(r,{source:n.isOnHold?"on hold":"failover"}),r})),o=e.filter((e=>!!e.source)).map((e=>({zoomID:e.zoomID})));if(r.push(Zv(o)),$a(wo,e),n){const e=u.filter((e=>cu(e.userRole)));e.length>0&&$a(Po,e.map((e=>({userId:e.userId,isAllowToTalk:!0}))))}}}if(e.update){const t=e.update.filter((e=>e.userId===o));t.length>0&&t.forEach((e=>{$a(Do,e),void 0!==e.bHold&&r.push(Xg(e.bHold))}));const i=e.update.filter((e=>!(e.userId===o||d.includes(e.userId))));if(i.length>0&&$a(No,i),n){const t=e.update.filter((e=>e.userId!==o&&d.includes(e.userId)));t.length>0&&$a(Po,t)}}if(e.remove){const t=e.remove.map((e=>{const t=s.find((t=>t.userId===e.userId));return t?2===e.action&&1===e.nUserStatus?t.bHold?(r.push(Yv({zoomID:t.zoomID,isOnHold:!0})),{...e,...t,reason:"on hold"}):(r.push(Yv({zoomID:t.zoomID,isOnHold:!1})),{...e,...t,reason:"failover"}):{...e,...t}:null})).filter((e=>!!e));if($a(Mo,t),n){const t=e.remove.filter((e=>d.includes(e.userId)));t.length>0&&$a(Po,t.map((e=>({userId:e.userId,isAllowToTalk:!1}))))}}const c=r.filter((e=>e.type===`${Xg}`));if(c.length>0){const e=c[c.length-1];r=r.filter((e=>e.type!==`${Xg}`)),e.payload!==i&&(r.push(e),$a(zo,!i))}return br(r)}))),epics1:(e,t)=>Iv(e,24595).pipe($r((e=>{const{payload:{body:{action:r,data:o}}}=e,{meeting:{jid:n},participants:{xmppAttendeeList:i}}=t.value,s=[];if(r===cf.rename){o.forEach((e=>{s.push(tf(e))}));const e=o.map((e=>df(e)));$a(Po,e)}if(r===cf.Remove){o.forEach((e=>{s.push(rf(e))}));const e=o.map((e=>({...df(e),removed:!0})));$a(Lo,e)}if([cf.Add,cf.List,cf.update].includes(r)){const e=o.map((e=>{const t=df(e);return Object.keys(t).reduce(((e,r)=>(""!==t[r]&&Object.assign(e,{[r]:t[r]}),e)),{})}));if($a(Po,e),s.push(of(e)),r===cf.update){const e=o.find((e=>e.jid===n));if(e&&void 0!==e.bRaiseHand){const t=i.find((e=>e.jid===n));(null==t?void 0:t.bRaiseHand)!==e.bRaiseHand&&$a("MEETING_WEBINAR_ATTENDEE_RAISE_HAND",{bRaiseHand:e.bRaiseHand})}}}return br(s)}))),epics2:e=>Ev(e,7951).pipe(To((e=>{!1===e.payload.body.bStarted&&$a("ADMIT_ALL_SILENT_USERS_END",e.payload.body.bStarted)})),Ur((e=>Jv(e.payload.body.bStarted)))),epics3:e=>Ev(e,7946).pipe(uo((e=>{var t;return["bRaiseHand","feedback"].includes(null===(t=e.payload.body)||void 0===t?void 0:t.key)&&0===e.payload.body.value})),Ur((e=>($a(No,{}),"bRaiseHand"===e.payload.body.key?Xv():ef()))))},cy=yv(dy);function ly(t){return function(r,o,n){const i=n.value;n.value=function(...r){const o=this[e];if(o){const{meeting:{meetingOptions:e}}=o.getState();if(!0===e[t])return Promise.reject({type:"OPERATION_LOCKED",reason:`${t} is locked`})}return i.apply(this,r)}}}let py=function(e){return e.Self="Self",e.Other="Other",e.Client="Client",e.Phone="Phone",e.Attendee="Attendee",e}({});function hy(t){return function(r,o,n){const i=n.value;n.value=function(r,...o){const n=this[e];if(n){const e=n.getState(),o=Array.isArray(t)?t:[t];let i=Nu(e).find((e=>e.userId===r));if(o.findIndex((e=>e===py.Attendee))>-1&&(i=Du(e).find((e=>e.userId===r))),!i)return Promise.reject({type:Xe,reason:"no matching user"});{const{meeting:{userId:e}}=n.getState();for(let t=0;t<o.length;t++){const n=o[t];if(n===py.Other&&r===e)return Promise.reject({type:Ke,reason:"operation is not applicable to self"});if(n===py.Self&&r!==e)return Promise.reject({type:Ke,reason:"operation is only applicable to self "});if(n===py.Client&&du(i.userType)||n===py.Phone&&!du(i.userType))return Promise.reject({types:Ke,reason:"improper target client"})}}}const s=[r,...o];return i.apply(this,s)}}}var my,gy=new Uint8Array(16);function Sy(){if(!my&&!(my="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return my(gy)}for(var vy=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,fy=[],yy=0;yy<256;++yy)fy.push((yy+256).toString(16).substr(1));function Ey(e,t,r){var o=(e=e||{}).random||(e.rng||Sy)();return o[6]=15&o[6]|64,o[8]=63&o[8]|128,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(fy[e[t+0]]+fy[e[t+1]]+fy[e[t+2]]+fy[e[t+3]]+"-"+fy[e[t+4]]+fy[e[t+5]]+"-"+fy[e[t+6]]+fy[e[t+7]]+"-"+fy[e[t+8]]+fy[e[t+9]]+"-"+fy[e[t+10]]+fy[e[t+11]]+fy[e[t+12]]+fy[e[t+13]]+fy[e[t+14]]+fy[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&vy.test(e)}(r))throw TypeError("Stringified UUID is invalid");return r}(o)}let _y=function(e){return e.LocalStorage="LocalStorage",e.SessionStorage="SessionStorage",e.Memory="Memory",e}({});const Iy=cd("{}");class Ay{constructor(e){this.sessionStorageKey=void 0,this.localStorageKey=void 0,this.sessionCache=void 0,this.localCache=void 0,this.memoryCache=void 0,this.sessionStorageKey=cd(`zoom-storage-${e}`),this.localStorageKey=cd("zoom-local-storage"),this.memoryCache={};try{this.sessionCache=JSON.parse(ld(sessionStorage.getItem(this.sessionStorageKey)||Iy)),this.localCache=JSON.parse(ld(localStorage.getItem(this.localStorageKey)||Iy))}catch(e){console.error(e),this.sessionCache={},this.localCache={}}}static init(e){this.instance=new Ay(e)}static get(e){if(void 0===this.instance)throw new Error("read before initial");return this.instance.getValue(e).value}static set(e,t,r){if(void 0===this.instance)throw new Error("set before initial");return this.instance.setValue(e,t,r)}static remove(e){if(void 0===this.instance)throw new Error("remove before initial");return this.instance.removeValue(e)}static clearSession(){if(void 0!==this.instance)return this.instance.memoryCache={},this.instance.sessionCache={},this.instance.localCache={},sessionStorage.removeItem(this.instance.sessionStorageKey);console.warn("clear before initial")}getValue(e){return this.sessionCache.hasOwnProperty(e)?{value:this.sessionCache[e],type:_y.SessionStorage}:this.localCache.hasOwnProperty(e)?{value:this.localCache[e],type:_y.LocalStorage}:{value:this.memoryCache[e],type:_y.Memory}}setValue(e,t,r){if(!e)throw new Error("key is null");switch(r){case _y.SessionStorage:{const r=this.sessionCache[e];let o=t;return"function"==typeof t&&(o=t(r)),r!==o&&(this.sessionCache[e]=o,this.flushValue(_y.SessionStorage)),o}case _y.LocalStorage:{const r=this.localCache[e];let o=t;return"function"==typeof t&&(o=t(r)),r!==o&&(this.localCache[e]=o,this.flushValue(_y.LocalStorage)),o}case _y.Memory:{const r=this.memoryCache[e];let o=t;return"function"==typeof t&&(o=t(r)),this.memoryCache[e]=o,o}default:return null}}removeValue(e){const{type:t}=this.getValue(e);switch(t){case _y.SessionStorage:delete this.sessionCache[e],this.flushValue(_y.SessionStorage);break;case _y.LocalStorage:delete this.localCache[e],this.flushValue(_y.LocalStorage);break;case _y.Memory:delete this.memoryCache[e]}}flushValue(e){e===_y.SessionStorage?sessionStorage.setItem(this.sessionStorageKey,cd(JSON.stringify(this.sessionCache))):e===_y.LocalStorage&&localStorage.setItem(this.localStorageKey,cd(JSON.stringify(this.localCache)))}}Ay.instance=void 0;let by=function(e){return e.WebclientOpt="WEB_CLIENT_OPT",e.WebclientWebinarToken="WEB_CLIENT_WEBINAR_TOKEN",e.WebclientMeetingToken="WEB_CLIENT_MEETING_TOKEN",e.WebclientZtk="WEB_CLIENT_ZTK",e.WebclientZsk="WEB_CLIENT_ZSK",e.WebclientTk="WEB_CLIENT_TK",e.WebclientIVState="WEB_CLIENT_IV_STATE",e.WebclientIsOnHold="WEB_CLIENT_IS_ON_HOLD",e.WebclientParticipantId="WEB_CLIENT_PARTICIPANT_ID",e.WebclientZoomId="WEB_CLIENT_ZOOM_ID",e.WebclientUserName="WEB_CLIENT_USER_NAME",e.WebclientUserEmail="WEB_CLIENT_USER_EMAIL",e.WebclientBreakoutRoomAttendeeStatus="WEB_CLIENT_BO_ATTENDEE_STATUS",e.WebclientBreakoutRoomCommand="WEB_CLIENT_BO_COMMAND",e.WebclientAudioEncryptKey="WEB_CLIENT_AUDIO_ENCRYPT_KEY",e.WebclientVideoEncryptKey="WEB_CLIENT_VIDEO_ENCRYPT_KEY",e.WebclientSharingEncryptKey="WEB_CLIENT_SHARING_ENCRYPT_KEY",e.WebclientFailoverCount="WEB_CLIENT_FAILOVER_COUNT",e.WebclientRecordingToken="WEB_CLIENT_RECORDING_TOKEN",e.VideoSDKWebRTCAudioFallbackWasm="VIDEO_SDK_WEB_RTC_AUDIO_FALLBACK_WASM",e.VideoSDKWebRTCVideoFallbackWasm="VIDEO_SDK_WEB_RTC_VIDEO_FALLBACK_WASM",e.VIDEO_SDK_BROADCAST_STREAMING_CHANNEL_ID="VIDEO_SDK_BROADCAST_STREAMING_CHANNEL_ID",e.WebclientObfToken="WEB_CLIENT_OBF_TOKEN",e.WebclientWhiteboardInfo="WEB_CLIENT_WHITEBOARD_INFO",e}({}),Cy=function(e){return e.WebclientDeviceId="WEBCLIENT_DEVICE_ID",e.VSDKLogTrackingId="ZM_VSDK_LOG_TRACKING_IDS",e}({}),Ty=function(e){return e.DisableAutoReportLogs="DISABLE_AUTO_REPORT_LOGS",e}({});var Ry,Oy;!function(e){e[e.info=0]="info",e[e.debug=1]="debug",e[e.log=2]="log",e[e.warn=3]="warn",e[e.error=4]="error"}(Ry||(Ry={})),function(e){e.afterInit="afterInit",e.beforeLog="beforeLog",e.afterLog="afterLog",e.beforeReport="beforeReport",e.afterReport="afterReport"}(Oy||(Oy={}));class Dy{constructor(){}}var wy,Ny,My={exports:{}},Py={exports:{}},Ly=function(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var r=function e(){var r=!1;try{r=this instanceof e}catch{}return r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})})),r}(Object.freeze({__proto__:null,default:{}}));function ky(){return wy||(wy=1,Py.exports=(e=e||function(e){var t;if("undefined"!=typeof window&&window.crypto&&(t=window.crypto),"undefined"!=typeof self&&self.crypto&&(t=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(t=globalThis.crypto),!t&&"undefined"!=typeof window&&window.msCrypto&&(t=window.msCrypto),!t&&void 0!==lc&&lc.crypto&&(t=lc.crypto),!t)try{t=Ly}catch(e){}var r=function(){if(t){if("function"==typeof t.getRandomValues)try{return t.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof t.randomBytes)try{return t.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),n={},i=n.lib={},s=i.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,r=e.words,o=this.sigBytes,n=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<n;i++){var s=r[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=s<<24-(o+i)%4*8}else for(var a=0;a<n;a+=4)t[o+a>>>2]=r[a>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],o=0;o<e;o+=4)t.push(r());return new a.init(t,e)}}),u=n.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o+=2)r[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new a.init(r,t/2)}},c=u.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new a.init(r,t)}},l=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},p=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,o=this._data,n=o.words,i=o.sigBytes,s=this.blockSize,u=i/(4*s),d=(u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0))*s,c=e.min(4*d,i);if(d){for(var l=0;l<d;l+=s)this._doProcessBlock(n,l);r=n.splice(0,d),o.sigBytes-=c}return new a.init(r,c)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=p.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new h.HMAC.init(e,r).finalize(t)}}});var h=n.algo={};return n}(Math),e)),Py.exports;var e}var Uy,Vy,By=Ny?My.exports:(Ny=1,My.exports=ky().enc.Utf8),Hy={exports:{}},jy=(Uy||(Uy=1,Hy.exports=(Vy=ky(),function(){var e=Vy,t=e.lib.WordArray;function r(e,r,o){for(var n=[],i=0,s=0;s<r;s++)if(s%4){var a=o[e.charCodeAt(s-1)]<<s%4*2|o[e.charCodeAt(s)]>>>6-s%4*2;n[i>>>2]|=a<<24-i%4*8,i++}return t.create(n,i)}e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,o=this._map;e.clamp();for(var n=[],i=0;i<r;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<r;a++)n.push(o.charAt(s>>>6*(3-a)&63));var u=o.charAt(64);if(u)for(;n.length%4;)n.push(u);return n.join("")},parse:function(e){var t=e.length,o=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var i=0;i<o.length;i++)n[o.charCodeAt(i)]=i}var s=o.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return r(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),Vy.enc.Base64)),Hy.exports);const Fy=e=>{try{return JSON.stringify(e)}catch(e){return"json stringify failed"}};const Wy=(e,t=2)=>{let r=`${e}`;for(;r.length<t;)r=`0${r}`;return r},xy=e=>{const t=new Date(e);return`${t.getUTCFullYear()}-${Wy(t.getUTCMonth()+1)}-${Wy(t.getUTCDate())} ${Wy(t.getUTCHours())}:${Wy(t.getUTCMinutes())}:${Wy(t.getUTCSeconds())}.${Wy(t.getUTCMilliseconds(),3)}`},$y={version:"000001",flag:"0"},Gy=(e,t)=>e.reduce(((e,r)=>{const o=((e,t)=>{const{message:r,logLevel:o,tags:n,timestamp:i,id:s}=e,a=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(e,["message","logLevel","tags","timestamp","id"]),u=Object.assign(Object.assign({time:xy(i),logLevel:Ry[o],message:r,tags:n},null!=t?t:{}),a);return Fy(u)})(r,t),n=(e=>{let t=e.length;for(let r=e.length-1;r>=0;r--){const o=e.charCodeAt(r);o>127&&o<=2047?t++:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&r--}return t})(o),i=e[e.length-1];return i.currentSize+n>30720?e.push({messages:[o],ids:[r.id],currentSize:n}):(i.messages.push(o),i.ids.push(r.id),i.currentSize+=n),e}),[{messages:[],ids:[],currentSize:0}]).filter((e=>e.currentSize>0)).map((e=>({messages:e.messages.join("\n"),ids:e.ids,meta:$y})));function zy(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function qy(e,t){let r;return(o,n)=>(()=>{if(r)return r;const o=indexedDB.open(e);return o.onupgradeneeded=()=>o.result.createObjectStore(t),r=zy(o),r.then((e=>{e.onclose=()=>r=void 0}),(()=>{})),r})().then((e=>n(e.transaction(t,o).objectStore(t))))}let Ky;function Jy(){return Ky||(Ky=qy("keyval-store","keyval")),Ky}function Qy(e,t=Jy()){return t("readwrite",(t=>(e.forEach((e=>t.delete(e))),zy(t.transaction))))}function Yy(e=Jy()){return e("readonly",(t=>{if(t.getAll&&t.getAllKeys)return Promise.all([zy(t.getAllKeys()),zy(t.getAll())]).then((([e,t])=>e.map(((e,r)=>[e,t[r]]))));const r=[];return e("readonly",(e=>function(e){return e.openCursor().onsuccess=function(){this.result&&((e=>{r.push([e.key,e.value])})(this.result),this.result.continue())},zy(e.transaction)}(e).then((()=>r))))}))}var Zy=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))};const Xy=new class{constructor(){this.queue=[],this.processing=!1}enqueue(e){return new Promise(((t,r)=>{this.queue.push((()=>Zy(this,void 0,void 0,(function*(){try{const r=yield e();t(r)}catch(e){r(e)}})))),this.processing||this.processNext()}))}processNext(){return Zy(this,void 0,void 0,(function*(){if(0===this.queue.length)return void(this.processing=!1);this.processing=!0;const e=this.queue.shift();try{yield e()}catch(e){console.error("Task error:",e)}this.processNext()}))}};var eE=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))};class tE{constructor(e){this.set=(e,t)=>{try{return!this.disableDB&&Xy.enqueue((()=>eE(this,void 0,void 0,(function*(){return function(e,t,r=Jy()){return r("readwrite",(r=>(r.put(t,e),zy(r.transaction))))}(e,t,this.store)}))))}catch(e){this.disableDB=!0}},this.makeNextId=()=>(this.nextId+=1,this.nextId),this.addLog=e=>{this.addToMemory(e);const{id:t}=e;return this.set(`${t}`,e)},this.addToMemory=(e,t)=>{this.memoryStoreData=t?[].concat(e):this.memoryStoreData.concat(e)},this.syncFromIDB=()=>eE(this,void 0,void 0,(function*(){var e;const t=yield Xy.enqueue((()=>eE(this,void 0,void 0,(function*(){return Yy(this.store)})))),r=t.filter((([e,t])=>!(null==t?void 0:t.id)&&0!==(null==t?void 0:t.id)||!Number.isInteger(Number(e)))).map((e=>e[0])),o=t.filter((([e])=>!r.includes(e))).sort(((e,t)=>{var r,o;return(null===(r=e[1])||void 0===r?void 0:r.id)-(null===(o=t[1])||void 0===o?void 0:o.id)})).map((([,e])=>e));return this.addToMemory(o,!0),r.length>0&&(yield this.deleteLogs(r)),this.nextId=0===this.memoryStoreData.length?0:null===(e=this.memoryStoreData[this.memoryStoreData.length-1])||void 0===e?void 0:e.id,this.memoryStoreData})),this.getStore=()=>this.memoryStoreData,this.filterStore=e=>{let t=[];const r=[e].flatMap((e=>e));return t=!e||0===r.length||r.some((e=>!e))?this.memoryStoreData:this.memoryStoreData.filter((e=>r.some((t=>"string"==typeof t?e.tags.some((e=>t===e)):"function"==typeof t&&t(e))))),t},this.deleteLogs=e=>eE(this,void 0,void 0,(function*(){return this.deleteMemoryLogs(e),Xy.enqueue((()=>eE(this,void 0,void 0,(function*(){return Qy(e.map((e=>`${e}`)),this.store)}))))})),this.deleteLogsAfterReport=e=>eE(this,void 0,void 0,(function*(){return this.deleteMemoryLogs(e),Qy(e.map((e=>`${e}`)),this.store)})),this.deleteMemoryLogs=e=>{this.memoryStoreData=this.memoryStoreData.filter((t=>{var r;return!(null===(r=e.includes)||void 0===r?void 0:r.call(e,t.id))}))},this.reset=()=>{this.memoryStoreData=[],Xy.enqueue((()=>eE(this,void 0,void 0,(function*(){return function(e=Jy()){return e("readwrite",(e=>(e.clear(),zy(e.transaction))))}(this.store)}))))},this.nextId=0,this.memoryStoreData=[],this.disableDB=!1,Xy.enqueue((()=>eE(this,void 0,void 0,(function*(){return qy(e,e+"-store")})))).then((e=>{this.store=e}))}}function rE(e,t,r){const o=e.plugins;return Array.isArray(o)?o.map((e=>e[t])).reduce(((t,r)=>{const o=null==r?void 0:r(e,t);return null!=o?o:t}),r):r}const oE=e=>new Promise((t=>{if(e.isSendByBeacon)navigator.sendBeacon?(navigator.sendBeacon(e.url,e.data),t({report:e.reportItem})):t({error:"sendBeacon is not supported",report:e.reportItem});else{const r=new XMLHttpRequest;r.open(e.type||"GET",e.url,!0),r.withCredentials=e.withCredentials,r.onerror=r=>{t({error:r,report:e.reportItem})},r.onreadystatechange=function(){if(4===r.readyState){const o=r.status;t(o>=200&&o<300?{report:e.reportItem}:{error:`Request failed, status: ${o}, responseText: ${r.responseText}`,report:e.reportItem})}},Object.entries(e.headers).forEach((([e,t])=>{t&&e&&r.setRequestHeader(e,t)})),r.send(e.data)}}));var nE,iE,sE=function(){if(iE)return nE;iE=1;var e="Expected a function",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,n=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof lc&&lc&&lc.Object===Object&&lc,a="object"==typeof self&&self&&self.Object===Object&&self,u=s||a||Function("return this")(),d=Object.prototype.toString,c=Math.max,l=Math.min,p=function(){return u.Date.now()};function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(h(e)){var s="function"==typeof e.valueOf?e.valueOf():e;e=h(s)?s+"":s}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var a=o.test(e);return a||n.test(e)?i(e.slice(2),a?2:8):r.test(e)?NaN:+e}return nE=function(t,r,o){var n=!0,i=!0;if("function"!=typeof t)throw new TypeError(e);return h(o)&&(n="leading"in o?!!o.leading:n,i="trailing"in o?!!o.trailing:i),function(t,r,o){var n,i,s,a,u,d,g=0,S=!1,v=!1,f=!0;if("function"!=typeof t)throw new TypeError(e);function y(e){var r=n,o=i;return n=i=void 0,g=e,a=t.apply(o,r)}function E(e){var t=e-d;return void 0===d||t>=r||t<0||v&&e-g>=s}function _(){var e=p();if(E(e))return I(e);u=setTimeout(_,function(e){var t=r-(e-d);return v?l(t,s-(e-g)):t}(e))}function I(e){return u=void 0,f&&n?y(e):(n=i=void 0,a)}function A(){var e=p(),t=E(e);if(n=arguments,i=this,d=e,t){if(void 0===u)return function(e){return g=e,u=setTimeout(_,r),S?y(e):a}(d);if(v)return u=setTimeout(_,r),y(d)}return void 0===u&&(u=setTimeout(_,r)),a}return r=m(r)||0,h(o)&&(S=!!o.leading,s=(v="maxWait"in o)?c(m(o.maxWait)||0,r):s,f="trailing"in o?!!o.trailing:f),A.cancel=function(){void 0!==u&&clearTimeout(u),g=0,n=d=i=u=void 0},A.flush=function(){return void 0===u?a:I(p())},A}(t,r,{leading:n,maxWait:r,trailing:i})},nE}(),aE=pc(sE);function uE(){let e=(new Date).getTime(),t=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(r=>{let o=16*Math.random();return e>0?(o=(e+o)%16|0,e=Math.floor(e/16)):(o=(t+o)%16|0,t=Math.floor(t/16)),("x"===r?o:3&o|8).toString(16)}))}const dE=()=>{try{const e=(e=>{try{const t=By.parse(e);return jy.stringify(t)}catch(t){return e}})("laplace-device-id");let t=localStorage.getItem(e);return t||(t=uE(),localStorage.setItem(e,t)),t}catch(e){return null}};var cE=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))};const lE="NOT SET",pE={databaseName:"laplace-default-db"};class hE{constructor(e){this.cacheFilter=[],this.cacheAdditionalContext=lE,this.laplaceSessionId=uE(),this.log=(e,t,r=Ry.log,o={})=>cE(this,void 0,void 0,(function*(){const n=[t,this.publicTags].flatMap((e=>e)),i=((e,t,r,o)=>{const n=Date.now();return Object.assign({message:e,logLevel:r,tags:t,timestamp:n},o)})(e,n,r,Object.assign(Object.assign({laplaceSessionId:this.laplaceSessionId,deviceId:dE()},this.publicAttributes),o)),s=rE(this,Oy.beforeLog,i);return s.id=this.idbManager.makeNextId(),this.idbManager.addLog(s),rE(this,Oy.afterLog,s),s.id})),this.deleteLog=(e,t)=>{if(Array.isArray(t)&&(this.idbManager.deleteLogs(t),!e))return;const r=this.idbManager.filterStore(e).map((e=>e.id));this.idbManager.deleteLogs(r)},this.deleteAll=()=>{this.idbManager.reset()},this.getLogs=e=>this.idbManager.filterStore(e),this.setReportUrl=e=>{this.reportUrl=e},this.setupUnloadListeners=()=>{document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.flushThrottledData()})),window.addEventListener("beforeunload",this.flushThrottledData)},this.flushThrottledData=()=>{if(this.cacheFilter.length>0){const e=this.cacheAdditionalContext!==lE?"string"==typeof this.cacheAdditionalContext?void 0:this.cacheAdditionalContext:void 0;this.reportByFilterImmediately(this.cacheFilter,{additionalContext:e}),this.cacheFilter=[],this.cacheAdditionalContext=lE}},this.throttleReport=aE(((e,t)=>{this.reportByHttps(e,t),this.cacheFilter=[],this.cacheAdditionalContext=lE}),5e3,{leading:!0,trailing:!0}),this.reportByFilter=(e,t)=>{if(null==t?void 0:t.isSendByBeacon)return this.reportByFilterImmediately(e,t);const r=null==t?void 0:t.additionalContext;if(this.cacheAdditionalContext===lE&&(this.cacheAdditionalContext=r),void 0!==r&&this.cacheAdditionalContext&&JSON.stringify(this.cacheAdditionalContext)!==JSON.stringify(r))return this.reportByHttps(e,t);this.cacheFilter=this.cacheFilter.concat(e),this.throttleReport(this.cacheFilter,t)},this.reportByFilterImmediately=(e,t)=>cE(this,void 0,void 0,(function*(){const r=this.idbManager.filterStore(e);if(!r||0===r.length)return;const o=r.map((e=>Object.assign(Object.assign({},e),{tags:[...Array.isArray(e.tags)?e.tags:[],"isSendByBeacon"]}))),n=rE(this,Oy.beforeReport,o),i=Gy(n,null==t?void 0:t.additionalContext);return this.commonReport(i,{isSendByBeacon:!0})})),this.reportByHttps=(e,t)=>cE(this,void 0,void 0,(function*(){Xy.enqueue((()=>cE(this,void 0,void 0,(function*(){const r=this.idbManager.filterStore(e);if(!r||0===r.length)return;const o=rE(this,Oy.beforeReport,r),n=Gy(o,null==t?void 0:t.additionalContext);return this.commonReport(n)}))))})),this.directReport=(e,t)=>cE(this,void 0,void 0,(function*(){var r,o,n,i;const s=null!==(r=t.sampleRate)&&void 0!==r?r:1;if(Math.random()>s)return;let a;return a=t.useRawData?e:Object.assign(Object.assign({message:e,time:xy(Date.now()),tags:[...null!==(o=null==t?void 0:t.tags)&&void 0!==o?o:[],...this.publicTags],logLevel:null!==(n=null==t?void 0:t.logLevel)&&void 0!==n?n:Ry.log,laplaceSessionId:this.laplaceSessionId,deviceId:dE(),isDirectReport:!0},null!==(i=null==t?void 0:t.additionalContext)&&void 0!==i?i:{}),this.publicAttributes),this.commonReport([{messages:a,meta:$y}],{isSendByBeacon:null==t?void 0:t.isSendByBeacon,deleteLogAfterReport:!1})})),this.commonReport=(e,t)=>cE(this,void 0,void 0,(function*(){if(this.reportUrl)return Promise.all(e.map((e=>({url:this.reportUrl,type:"POST",withCredentials:!1,headers:{},data:Fy({messages:e.messages,meta:e.meta}),reportItem:e,isSendByBeacon:!!(null==t?void 0:t.isSendByBeacon)}))).map(oE)).then((e=>{var r;const o=e.filter((e=>!e.error)).flatMap((e=>e.report.ids));if(rE(this,Oy.afterReport,{removeIds:o}),null===(r=null==t?void 0:t.deleteLogAfterReport)||void 0===r||r)return this.idbManager.deleteLogsAfterReport(o)}))}));const{databaseName:t,reportUrl:r="",plugins:o=[],idbManager:n,publicTags:i=[],publicAttributes:s={}}=e;this.databaseName=t,this.reportUrl=r,this.plugins=o,this.idbManager=n,this.publicTags=i,this.publicAttributes=s,this.setupUnloadListeners(),rE(this,Oy.afterInit)}}hE.init=e=>cE(void 0,void 0,void 0,(function*(){const{databaseName:t="laplace-default-db"}=e,r=new tE(t);return yield r.syncFromIDB(),new hE(Object.assign(Object.assign(Object.assign({},pE),e),{idbManager:r}))}));class mE extends Dy{constructor(e){super(),this.config={verbose:!1},this.beforeLog=(e,t)=>{const{verbose:r}=this.config;switch(r&&console.log("beforeLog, ","state: ",t,"meta: ",e),t.logLevel){case Ry.error:console.error(t);break;case Ry.warn:console.warn(t);break;case Ry.log:console.log(t);break;case Ry.debug:console.debug(t);break;case Ry.info:console.info(t)}},this.afterLog=(e,t)=>{const{verbose:r}=this.config;r&&console.log("afterLog, ","state: ",t,"meta: ",t)},this.beforeReport=(e,t)=>{const{verbose:r}=this.config;r&&console.log("beforeReport, ","pluginParams: ",t,"meta: ",e)},this.afterReport=(e,t)=>{const{verbose:r}=this.config;r&&console.log("afterReport, ","pluginParams: ",t,"laplace: ",e)},e&&(this.config=e)}}class gE extends Dy{constructor(e){super(),this.config={debug:!1},this.debugLog=e=>{const{debug:t}=this.config;t&&console.log(`[AutoCleanLogPlugin]: ${e}`)},this.afterInit=e=>{const{expireBefore:t}=this.config;if(!t)return void this.debugLog("early return on beforeInit because expireBefore is falsy");const r=e.idbManager.getStore(),o=("function"==typeof t?r.filter(t):r.filter((e=>e.timestamp<t))).map((e=>e.id));e.deleteLog(void 0,o),this.debugLog(`afterInit, clean log id: ${o}`)},e&&(this.config=e)}}const SE=["RESOURCE_ERROR","JS_ERROR","UNHANDLED_PROMISE_REJECTION"];class vE extends Dy{constructor(e){super(),this.config={debug:!1,publicTags:[]},this.errorCount=0,this.hashErrors={},this.addPublicTags=e=>{var t;return null===(t=this.config.publicTags)||void 0===t?void 0:t.concat(e).filter((e=>e))},this.debugLog=e=>{const{debug:t}=this.config;t&&console.log("[AutoLogErrorPlugin]:",e)},this.ignore=e=>{var t,r,o,n,i;return void 0!==(null===(t=this.config)||void 0===t?void 0:t.maxErrorCount)&&this.errorCount>=(null===(r=this.config)||void 0===r?void 0:r.maxErrorCount)||!!(null===(o=this.config)||void 0===o?void 0:o.ignoredErrorMsgKeywords)&&e&&(null===(i=null===(n=this.config)||void 0===n?void 0:n.ignoredErrorMsgKeywords)||void 0===i?void 0:i.some((t=>null==e?void 0:e.includes(t))))},this.report=aE((e=>{}),600,{trailing:!0,leading:!1}),this.afterInit=e=>{if(!self.addEventListener)return;const t=(t,r,o,n)=>{this.debugLog(o),this.errorCount+=1;try{return function(e){const t=(new TextEncoder).encode(e);return crypto.subtle.digest("SHA-1",t).then((e=>Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("")))}(t).then((o=>this.hashErrors[o]?"dismissed":(this.hashErrors[o]=!0,e.log(t,this.addPublicTags([].concat(r)),null!=n?n:Ry.error,{extraProperties:{messageHash:o}}).then((()=>e.reportByFilter(SE)))))).catch(console.error)}catch(e){return console.error(e),Promise.resolve(e)}};try{self.addEventListener("error",(e=>{var r,o,n,i,s,a,u;if(!this.ignore(null==e?void 0:e.message)){if("function"==typeof this.config.onError){const{message:r,tags:o,logLevel:n}=this.config.onError(e);return t(r,["JS_ERROR",...o],e,n)}if((null==e?void 0:e.target)&&((null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.src)||(null===(o=null==e?void 0:e.target)||void 0===o?void 0:o.href))){const r=`Load Resource Error in ${null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.tagName} element: ${(null===(i=null==e?void 0:e.target)||void 0===i?void 0:i.src)||(null===(s=null==e?void 0:e.target)||void 0===s?void 0:s.href)}`;return t(r,"RESOURCE_ERROR",e)}{const r=`Javascript Runtime Error in ${null==e?void 0:e.filename} (${null==e?void 0:e.lineno}:${null==e?void 0:e.colno}): ${null==e?void 0:e.message}\nStack: ${null!==(u=null===(a=null==e?void 0:e.error)||void 0===a?void 0:a.stack)&&void 0!==u?u:null==e?void 0:e.stack}`;return t(r,"JS_ERROR",e)}}})),self.addEventListener("unhandledrejection",(e=>{var r;if(!this.ignore(null===(r=null==e?void 0:e.reason)||void 0===r?void 0:r.message)){if("function"==typeof this.config.onError){const{message:r,tags:o,logLevel:n}=this.config.onError(e);return t(r,["UNHANDLED_PROMISE_REJECTION",...o],e,n)}{let r;const o=null==e?void 0:e.reason;return r="string"==typeof o?`Promise Error: ${o}`:o instanceof Error?`Promise Error: ${o.message} ${o.name} ${o.stack}`:"object"==typeof o?`Promise Error with reason: ${Fy(o)}`:`Promise Error with unrecognized reason: ${o}`,t(r,"UNHANDLED_PROMISE_REJECTION",e)}}}))}catch(e){console.error(e)}this.debugLog("afterInit, add listener")},e&&(this.config=e),this.config.publicTags=[].concat(null==e?void 0:e.publicTags)}}let fE=function(e){return e[e.info=0]="info",e[e.debug=1]="debug",e[e.log=2]="log",e[e.warn=3]="warn",e[e.error=4]="error",e}({}),yE=function(e){return e.DeviceAudioStreamCaptured="device audio stream captured",e.AudioJoinComplete="audio join complete",e.AudioLeaveComplete="audio leave complete",e.SharingAudioStartComplete="sharing audio start complete",e.SharingAudioStopComplete="sharing audio stop complete",e.AudioBridgeReconnectStart="audio bridge reconnect start",e.AudioBridgeReconnectEnd="audio bridge reconnect end",e}({}),EE=function(e){return e.VBSettingSuccess="video VB setting success",e.VBSettingFailed="init video VB failed",e.VBPreloadSuccess="preload video VB success",e.VBPreloading3S="preload video VB 3s",e.VBPreloading10S="preload video VB 10s",e.StartCaptureVideoSuccess="start capture video success",e.StopCaptureVideoSuccess="stop capture video success",e}({});function _E(e){return`{E}${e}{/E}`}const IE={enable:!1,enableReport:!1,gatewayEndPoint:"",newGatewayEndPoint:"",logLevel:{debug:!1,log:!1,info:!1,print:!1,warn:!1,error:!1},performanceReportRatio:.25,trackingCount:7},AE=["debug","log","info","print","warn","error"],bE=(e,t)=>[...e,...t].filter((e=>!!e)),CE=["JOIN_MEETING_FAILED","Join Meeting Flow","UNAVAILABLE_RWG","connection_info_map","exception flow"];class TE{static getInstance(){return this.agentInstance||(this.agentInstance=new TE),this.agentInstance}constructor(){this.laplace=void 0,this.trackingId=void 0,this.logConfig=void 0,this.reportUrl=void 0,this.publicTags=void 0,this.accountId=void 0,this.disableAutoReport=void 0,this.initConfig=async e=>{let t=IE;try{e.logConfig&&(t=JSON.parse(e.logConfig),t.gatewayEndPoint&&(this.reportUrl=t.gatewayEndPoint),t.newGatewayEndPoint&&(this.reportUrl=t.newGatewayEndPoint));const{enable:r,enableReport:o,reportUrl:n,logLevel:i,trackingId:s,accountId:a}=e;if(void 0!==r&&(t={...t,enable:!!r}),void 0!==o&&(t={...t,enableReport:!!o}),n&&(this.reportUrl=n),"string"==typeof i){const e=AE.indexOf(i),r=AE.reduce(((t,r,o)=>o<e?{...t,[`${r}`]:!1}:{...t,[`${r}`]:!0}),{});t={...t,logLevel:r}}else void 0!==i&&(t={...t,logLevel:i});s&&(this.trackingId=s,t={...t,enable:!0,enableReport:!0}),void 0!==a&&(this.accountId=a)}catch(e){console.error("parse log config error",e)}const r=(new Date).getTime()-6048e5;this.publicTags=["VideoSDK",this.trackingId],e.isUIToolkit&&this.publicTags.push("UI-Toolkit");const o=[e.debugMode&&new mE({verbose:!1}),new gE({debug:!1,cleanAfterReport:!0,expireBefore:r}),new vE({debug:!1,ignoredErrorMsgKeywords:["table index is out of bounds"],maxErrorCount:223,publicTags:this.accountId?[...this.publicTags,_E(this.accountId)]:this.publicTags})].filter(Boolean);return{laplaceConfig:{databaseName:"ZM-VSDK-LOG-DATABASE",reportUrl:this.reportUrl,plugins:o,publicTags:this.publicTags},logConfig:t}},this.handleInitLaplaceSuccess=(e,t)=>{var r;this.laplace=e;const o=Ay.get(Cy.VSDKLogTrackingId);let n=[];try{n=JSON.parse(o?window.atob(o):"[]")}catch(e){}n.length>=(null!==(r=null==t?void 0:t.trackingCount)&&void 0!==r?r:7)&&n.shift();const i=n.reduce(((e,t)=>({...e,[`${t}`]:!0})),{});e.deleteLog((e=>{var t;return!(null!==(t=e.tags)&&void 0!==t&&t.some((e=>i[e])))})),n.push(this.trackingId),Ay.set(Cy.VSDKLogTrackingId,window.btoa(JSON.stringify(n)),_y.LocalStorage)},this.init=async e=>{const{laplaceConfig:t,logConfig:r}=await this.initConfig(e);return r.enable?(this.logConfig=r,hE.init(t).then((e=>{this.handleInitLaplaceSuccess(e,r)})).catch((e=>{throw{type:Je,reason:"Logger init failed.",error:e,errorCode:wa.INTERNAL_ERROR}}))):Promise.reject({type:Ke,reason:"Logger feature is not enabled."})},this.check=e=>{var t;return!(!this.checkLaplace()||(null===(t=this.logConfig)||void 0===t||null===(t=t.logLevel)||void 0===t||!t[e])&&(console.warn(`Logger ${e} is not enabled.`),1))},this.log=(e,t,r)=>{if(this.check("log"))try{var o;return null===(o=this.laplace.log(e,bE(t,r),fE.log))||void 0===o?void 0:o.catch((()=>{}))}catch(e){return}},this.logWithExtraProperties=(e,t,r)=>{if(this.check("log"))try{var o;return null===(o=this.laplace.log(e,t,fE.log,r))||void 0===o?void 0:o.catch((()=>{}))}catch(e){return}},this.warn=(e,t,r)=>{if(this.check("warn"))try{var o;return null===(o=this.laplace.log(e,bE(t,r),fE.warn))||void 0===o?void 0:o.catch((()=>{}))}catch(e){return}},this.info=(e,t,r)=>{if(this.check("info"))try{var o;return null===(o=this.laplace.log(e,bE(t,r),fE.info))||void 0===o?void 0:o.catch((()=>{}))}catch(e){return}},this.debug=(e,t,r)=>{if(this.check("debug"))try{var o;return null===(o=this.laplace.log(e,bE(t,r),fE.debug))||void 0===o?void 0:o.catch((()=>{}))}catch(e){return}},this.error=(e,t,r)=>{if(this.check("error"))try{var o;return null===(o=this.laplace.log(e,bE(t,r),fE.error))||void 0===o?void 0:o.catch((()=>{}))}catch(e){return}},this.checkLaplace=()=>{var e;return!(null===(e=this.laplace)||void 0===e||!e.log)},this.makeLogger=e=>({log:(t,r)=>this.log(t,e,null!=r?r:[]),logWithExtraProperties:(t,r)=>this.logWithExtraProperties(t,e,r),warn:(t,r)=>this.warn(t,e,null!=r?r:[]),info:(t,r)=>this.info(t,e,null!=r?r:[]),debug:(t,r)=>this.debug(t,e,null!=r?r:[]),error:(t,r)=>this.error(t,e,null!=r?r:[]),directReport:(e,t)=>{const r="string"!=typeof e?JSON.stringify(e):e,o=(Array.isArray(t)?t:[t]).filter(Boolean);o.push("MEDIA SDK Direct"),this.report(r,o,"info")}}),this.reportToGlobalTracing=async(e,t=!1,r=!1)=>{var o;if(!this.checkLaplace())return Promise.reject({type:Ke,reason:"Logger has not been enabled or initialized."});if(null===(o=this.logConfig)||void 0===o||!o.enableReport||!this.reportUrl)return Promise.reject({type:Ke,reason:"Please use getLogs to obtain log data and report by yourself."});if(function(){try{return!!Ay.get(Ty.DisableAutoReportLogs)}catch(e){return!1}}()&&!t){const t=Array.isArray(e)?e.some((e=>CE.some((t=>"string"==typeof e&&e.includes(t))))):CE.some((t=>`${e}`.includes(t)));if(!t)return Promise.resolve()}return this.laplace.reportByFilter.bind(this.laplace)(e,{isSendByBeacon:r,additionalContext:{trackingId:this.trackingId}})},this.report=(e,t,r="warn")=>{if(this.checkLaplace()&&this.logConfig.enableReport&&this.reportUrl){var o,n;const i=Array.isArray(t)?t:[t],s=this.accountId?[...i,_E(this.accountId)]:i;null===(o=(n=this.makeLogger(s))[`${r}`])||void 0===o||null===(o=o.call(n,e))||void 0===o||o.then((()=>{this.reportToGlobalTracing(i)}))}},this.getLogs=(e,t)=>{if(!this.checkLaplace())return console.warn("Logger has not been enabled or initialized."),[];const r=e.getState(),{meeting:{meetingNumber:o,userId:n,userEmail:i,userName:s}}=r,a={meetingNumber:o,userId:n,userEmail:i,userName:s},u=this.laplace.getLogs(t),d=[];for(const e of u)d.push({...e,...a});return d},this.trackingId=Ey()}}TE.agentInstance=void 0;const RE=TE.getInstance(),OE=[{type:"MediaMeta",methods:["sendUserNodeList","updateUserMediaSN","updateMediaParams","subscribeToQos","unsubscribeFromQos","sendUserAudioStatus","destroy","createMainSessionChannel","notifySDKMeetingReady"]},{type:"Audio",methods:["joinComputerAudio","leaveComputerAudio","joinSharingAudio","leaveSharingAudio","changeSpeaker","changeMicrophone","enableAudioEncode","pauseOrResumeAudio","setSharingAudioVolume","enableShareAudioToBreakoutRoom","enableAudioDenoise","enableSyncButtonsOnHeadset","stopAllIncomingAudio","setAudioCodecMode","muteOrUnmuteOtherAudio","adjustOtherAudioVolume","changeAudioProfile","unmuteAudio","muteAudio"]},{type:"Video",methods:["startCaptureVideo","stopCaptureVideo","renderVideo","stopRenderVideo","changeCamera","updateRenderedVideoCanvasDimension","adjustRenderedVideoPosition","mirrorVideo","enableHardwareAccelerationForVideoDecode","enableHardwareAccelerationForVideoEncode","startVirtualBackgroundSetting","updateVirtualBackgroundImage","stopVirtualBackgroundSetting","startMaskSetting","updateMaskBackgroundImage","updateMaskClip","stopMaskSetting","enableVideoObserver","prefetchVideoSsrc","cancelPrefetchVideoSsrc","setMobileRotateMode","changeActiveVideoSsrc","updateVideoHDValue","updateVideoFullhdValue","clearVideoCanvas"]},{type:"Sharing",methods:["stopDesktopSharing","startDesktopSharing","pauseDesktopSharing","resumeDesktopSharing","renderSharing","stopRenderSharing","switchSharingSource","ajustmentReceivedSharingCanvas","changeSharingSecondCamera","updateRenderedSharingDimension","addReceivedSharingChannelType","removeReceivedSharingChannelType","switchSharingMode","ajustmentSharingCanvas"]},{type:"RemoteControl",methods:["startRemoteControl","stopRemoteControl","resendRemoteControlPositionPDU","updateRemoteControlProperties","ajustmentReceivedSharingCanvas","startRemoteControlQRCheck"]},{type:"LiveTranscription",methods:["selectLanguageChannelForNewLTT"]},{type:"RemoteCamera",methods:["movePTZCamera"]}].reduce(((e,t)=>{const{type:r,methods:o}=t;return[...e,...o.map((e=>({name:e,type:r})))]}),[]),DE=OE.map((e=>e.name)),wE=(e,...t)=>{const r=OE.find((t=>t.name===e));if(r){const{type:o}=r,n=null==t?void 0:t.map((e=>Od(e)));RE.makeLogger([o,`${o} Media SDK`]).info(`${e},params:${JSON.stringify(n)}`)}};function NE(e){return new Proxy(e,{get:(e,t)=>"string"==typeof t&&DE.includes(t)?function(...r){try{Reflect.apply(wE,void 0,[t,...r])}catch(e){}return Reflect.apply(Reflect.get(e,t),e,r)}:Reflect.get(e,t)})}function ME(e){return e?new Proxy(e,{get:(e,t)=>"string"==typeof t&&"error"===t?function(...e){try{var t;RE.report(e[0],["MEDIA SDK",...null!==(t=e[1])&&void 0!==t?t:[]],"error")}catch(e){}}:Reflect.get(e,t)}):e}const PE=TE.getInstance();function LE(e,t){return e.toLowerCase().includes("url")&&t.startsWith("http")||"displayName"===e?`[${e.toUpperCase()}]`:t}function kE(t,r){return function(o,n,i){const s=i.value;i.value=function(...o){let i="";if("Video"===t){var a;const t=this[e];i=`${null==t||null===(a=t.getState())||void 0===a||null===(a=a.meeting)||void 0===a?void 0:a.isUseWBVideo}`}if(PE.checkLaplace())try{var u;const e=PE.makeLogger([t]),a=null===(u=r?o.map(((e,t)=>r.includes(t+1)?_E(e):e)):o)||void 0===u?void 0:u.map((e=>Od(e)));return e.info(`${n},params:${JSON.stringify(a,LE)}`),s.apply(this,o).then((t=>(e.info(`${n} success`),t))).catch((e=>{const r=`${n},params:${JSON.stringify(a,LE)},return failed,${i?`isUseWBVideo:${i},`:""}${function(e){if(!e)return"";if("object"==typeof e){let t="";return e.type&&(t+=`type:${e.type},`),e.errorCode&&(t+=`errorCode:${e.errorCode},`),e.reason&&(t+=`reason:${e.reason},`),e.subCode&&(t+=`subCode:${e.subCode},`),e.name&&(t+=`name:${e.name},`),e.message&&(t+=`message:${e.message},`),t}return`${e}`}(e)}`;return PE.report(r,`${t} exception flow`,"error"),Promise.reject(e)}))}catch(e){}return s.apply(this,o)}}}function UE(e,t,r){return function(o,n,i){const s=i.value;i.value=function(...o){var n,i;const a=o[t];let d=e;return Array.isArray(d)||(d=[d]),!d.some((e=>u(a,e)))||r&&!r.every((e=>!!a[e]))?Promise.reject({type:Xe,reason:`Expected to accept ${null===(n=d)||void 0===n?void 0:n.map((e=>e.name)).join(" or ")}, but actual it is ${"object"==typeof a&&null!==a?null===(i=Object.getPrototypeOf(a))||void 0===i?void 0:i.constructor.name:a}`,errorCode:wa.STREAM_MISMATCH_RENDER_ELEMENT}):s.apply(this,o)}}}let VE=function(e){return e[e.Unknown=0]="Unknown",e[e.Windows=1]="Windows",e[e.Mac=2]="Mac",e[e.Pad=3]="Pad",e[e.Mobile=4]="Mobile",e[e.CallIn=5]="CallIn",e[e.Linux=6]="Linux",e[e.WebClient=7]="WebClient",e[e.ChromeOs=8]="ChromeOs",e}({});const BE=262144,HE=1048576,jE=16777216,FE=e=>!(4&~e),WE=e=>(e&HE)===HE,xE=({share:{isReceiveSharing:e}})=>e,$E=({share:{activeNodeId:e}})=>e,GE=({share:{shareViewAttachments:e}})=>e,zE=tu([Nu,xE,$E],((e=[],t,r)=>{if(t){const t=e.find((e=>e.userId===r&&!0===e.sharerOn));if(t){let{os:e}=t;const{pwaOS:r}=t;return"mac"===r?e=VE.Mac:"win"===r&&(e=VE.Windows),{...t,os:e}}}return null})),qE=tu([Nu],(e=>e.filter((e=>e.sharerOn)))),KE=tu([qE],(e=>e.some((e=>!!e.bVideoShare)))),JE=tu([({share:{remoteControlledUserList:e}})=>e,xE,$E],((e,t,r)=>!!t&&e.some((e=>yd(e,r))))),QE=tu([xE,GE],((e,t)=>e?Object.entries(t).reduce(((e,t)=>{const[,r]=t;return r&&r.length>0&&(e+=r.length),e}),0):0)),YE=tu([QE],(e=>e>1)),ZE=tu([QE,GE],((e,t)=>1===e&&Object.entries(t).every((([,e])=>e.every((e=>ic(e).isDummy))))));function XE(t){return function(r,o,n){const i=n.value;n.value=async function(...r){const o=this[e],n=null==o?void 0:o.getState();if(null!=n&&n.share){const{share:{isSimultaneousShareView:e,isReceiveSharing:r}}=n;if(r){if(e)return Promise.reject({type:Ke,reason:`Cannot start ${t} due to multiple sharing views are currently in progress.`,errorCode:wa.SCREEN_SHARE_MISMATCH_STATE});if(YE(n))return Promise.reject({type:Ke,reason:`Cannot start ${t} due to multiple sharing views are currently in progress.`,errorCode:wa.SCREEN_SHARE_MISMATCH_STATE})}}return i.apply(this,r)}}}let e_=function(e){return e[e.NoAttendee=0]="NoAttendee",e[e.All=1]="All",e[e.AllPanelist=2]="AllPanelist",e[e.Host=3]="Host",e[e.NoOne=4]="NoOne",e[e.EveryonePublicly=5]="EveryonePublicly",e}({}),t_=function(e){return e[e.AllPanelist=1]="AllPanelist",e[e.Everyone=2]="Everyone",e[e.Invalid=0]="Invalid",e}({}),r_=function(e){return e[e.All=0]="All",e[e.Panelist=1]="Panelist",e[e.IndividualCcPanelist=2]="IndividualCcPanelist",e[e.Individual=3]="Individual",e[e.SilentModeUsers=4]="SilentModeUsers",e}({}),o_=function(e){return e[e.None=0]="None",e[e.Delete=1]="Delete",e[e.Modify=2]="Modify",e}({}),n_=function(e){return e[e.Success=0]="Success",e[e.Delete=1]="Delete",e[e.Block=3]="Block",e}({});const i_=[e_.All,e_.Host,e_.NoOne,e_.EveryonePublicly],s_=[e_.NoOne,e_.All,e_.AllPanelist],a_={AllPanelist:11,Everyone:12},u_={[a_.AllPanelist]:t_.AllPanelist,[a_.Everyone]:t_.Everyone},d_={userId:r_.All,displayName:"Everyone",isHost:!1,isCoHost:!1},c_={userId:r_.Panelist,displayName:"All panelists"},l_={userId:r_.SilentModeUsers,displayName:"Everyone (in Waiting Room)",isHost:!1,isCoHost:!1};let p_=function(e){return e[e.Local=0]="Local",e[e.ThirdParty=1]="ThirdParty",e}({}),h_=function(e){return e[e.ChunkSize=20971520]="ChunkSize",e[e.EncodeBlockSize=32768]="EncodeBlockSize",e[e.DecodeBlockSize=32803]="DecodeBlockSize",e[e.MaxSize=2147483648]="MaxSize",e[e.ReaderChunkSize=1073741824]="ReaderChunkSize",e}({}),m_=function(e){return e[e.Init=0]="Init",e[e.InProgress=1]="InProgress",e[e.Success=2]="Success",e[e.Fail=3]="Fail",e[e.Cancel=4]="Cancel",e[e.Complete=5]="Complete",e}({}),g_=function(e){return e[e.InProgress=1]="InProgress",e[e.Success=2]="Success",e[e.Fail=3]="Fail",e[e.Cancel=4]="Cancel",e}({});const S_={"7z":"application/x-7z-compressed",avi:"video/x-msvideo",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",gif:"image/gif",gz:"application/gzip",html:"text/html",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",mid:"audio/midi",mov:"video/*",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/*",mpg:"video/*",pdf:"application/pdf",png:"image/png",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",txt:"text/plain",wav:"audio/wav",webp:"image/webp",wma:"audio/*",wmv:"video/*",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",zip:"application/zip"};let v_=function(e){return e.Open="open",e.Message="message",e.Error="error",e.Close="close",e.Inactive="inactive",e}({});var f_=function(e){return e[e.SelectTranslationLanguage=1]="SelectTranslationLanguage",e[e.ShowTranscription=2]="ShowTranscription",e[e.OffTranslation=3]="OffTranslation",e[e.DisableCaption=4]="DisableCaption",e[e.LockTranscriptionLanguage=5]="LockTranscriptionLanguage",e[e.SelectTranscriptionLanguage=6]="SelectTranscriptionLanguage",e[e.SelectSimuliveLanguage=7]="SelectSimuliveLanguage",e}(f_||{});class y_{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.intervalsToBeCleardWhenSocketClose=[],this.isAlive=!1,this.isRlbTP=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1,this.isRlbTP=!1}on(e,t){let r=this.eventHandlers.get(e);r||(r=[]),r.push(t),this.eventHandlers.set(e,r)}off(e,t){const r=this.eventHandlers.get(e);if(r){const o=r.filter((e=>e!==t));this.eventHandlers.set(e,o)}}emit(e,t){const r=this.eventHandlers.get(e);r&&r instanceof Array&&r.slice(0).forEach((e=>{try{e(t)}catch(e){console.error(e)}}))}sendMessageToRwg(e){this.seq+=1;const t=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(e,{seq:t}))),t}connect(e,t){this.websocket=t?new window.ZoomTPModule.ZoomTPWebSocket(e):new WebSocket(e),this.websocket.binaryType="arraybuffer",this.isRlbTP=t,this.addWebSocketEventListeners()}close(){var e;null===(e=this.websocket)||void 0===e||e.close()}addHeartBeat(){const e=C.isAndroidOrIOSBrowser?15e3:2e4,t=setInterval((()=>{this.isAlive||this.emit(v_.Inactive,{}),this.sendMessageToRwg({evt:0}),this.isAlive=!1}),e);this.intervalsToBeCleardWhenSocketClose.push(t)}clearIntervals(){this.intervalsToBeCleardWhenSocketClose.forEach((e=>clearInterval(e))),this.isAlive=!1}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",(e=>{this.isRlbTP||this.addHeartBeat(),this.emit(v_.Open,e)})),this.websocket.addEventListener("message",(e=>{this.isAlive=!0,this.emit(v_.Message,e)})),this.websocket.addEventListener("close",(e=>{this.clearIntervals(),this.emit(v_.Close,e)})),this.websocket.addEventListener("error",(e=>{this.clearIntervals(),this.emit(v_.Error,e)})))}sendLaunchParams(e){return{seq:this.sendMessageToRwg({evt:4301,body:e})}}joinMeeting(e){return{seq:this.sendMessageToRwg({evt:4097,body:{meetingtoken:e}})}}lockMeeting(e){return{seq:this.sendMessageToRwg({evt:4099,body:{bLock:e}})}}endMeeting(){return{seq:this.sendMessageToRwg({evt:4101,body:{}})}}leaveMeeting(e=!1){const t=e?4364:4103;return{seq:this.sendMessageToRwg({evt:t,body:{}})}}recordMeeting(e,t){return{seq:this.sendMessageToRwg({evt:4105,body:{bRecord:e,bPause:t}})}}localRecordingGrantPermission(e,t,r){return{seq:this.sendMessageToRwg({evt:Pv,body:{cmdType:"permission_request_answer",userId:e,agreed:t,saveAgreed:r}})}}hostGrantPermission(e,t){return{seq:this.sendMessageToRwg({evt:Pv,body:{cmdType:"grant_permission",userId:e,grant:t}})}}localRecordingRequestPermission(){return{seq:this.sendMessageToRwg({evt:Pv,body:{cmdType:"request_permission"}})}}localRecordingMeeting(e){return{seq:this.sendMessageToRwg({evt:Pv,body:{cmdType:"change_recording_status",status:e}})}}summaryMeeting(e){return{seq:this.sendMessageToRwg({evt:8009,body:{type:e?"start":"stop"}})}}startMeetingQuery(e){return{seq:this.sendMessageToRwg({evt:8017,body:{type:e?"start":"stop"}})}}allowSelfRecord(e){return{seq:this.sendMessageToRwg({evt:4325,body:{bAllowISORecord:e}})}}enableZoomIQRecord(e){return{seq:this.sendMessageToRwg({evt:4318,body:{check:e}})}}expel(e){return{seq:this.sendMessageToRwg({evt:4107,body:{id:e}})}}expelAttendee(e,t){return{seq:this.sendMessageToRwg({evt:4205,body:{jid:e,nodeID:t}})}}rename(e,t,r){return{seq:this.sendMessageToRwg({evt:4109,body:{id:e,dn2:t,olddn2:r}})}}assignHost(e,t){return{seq:this.sendMessageToRwg({evt:4111,body:{id:e,bCoHost:t}})}}reclaimHost(e,t=!1){return{seq:this.sendMessageToRwg({evt:4133,body:{id:e,bCoHost:t}})}}revokeCoHost(e){return{seq:this.sendMessageToRwg({evt:4195,body:{id:e}})}}putOnHold(e,t){return{seq:this.sendMessageToRwg({evt:4113,body:{id:e,bHold:t}})}}setMuteOnEntry(e){return{seq:this.sendMessageToRwg({evt:4115,body:{bOn:e}})}}setHoldOnEntry(e){return{seq:this.sendMessageToRwg({evt:4117,body:{bOn:e}})}}inviteCRCDevice(e,t,r=2){return{seq:this.sendMessageToRwg({evt:4119,body:{ip:e,type:t,encrypt:r}})}}cancelInviteCRCDevice(e){return{seq:this.sendMessageToRwg({evt:4121,body:{transID:e}})}}sendCloseCaption(e){return{seq:this.sendMessageToRwg({evt:4125,body:{...e}})}}allowViewParticipantNumber(e){return{seq:this.sendMessageToRwg({evt:4127,body:{bOn:e}})}}lowerAllHands(){return{seq:this.sendMessageToRwg({evt:4129,body:{}})}}raiseLowerHand(e,t){return{seq:this.sendMessageToRwg({evt:4131,body:{id:e,bOn:t}})}}chat(e,t,r,o,n,i){const s={text:e,destNodeID:t};return r&&Object.assign(s,{sn:r}),o&&Object.assign(s,{attendeeNodeID:o}),n&&Object.assign(s,{xmppMsgData:n}),i&&Object.assign(s,{msgID:i}),{seq:this.sendMessageToRwg({evt:4135,body:s})}}assignCC(e,t){return{seq:this.sendMessageToRwg({evt:4137,body:{id:e,bCCEditor:t}})}}enableLT(e){return{seq:this.sendMessageToRwg({evt:4227,body:{op:e?2:4}})}}enableNewLLT(){return{seq:this.sendMessageToRwg({evt:4285})}}disableCaptions(e){return{seq:this.sendMessageToRwg({evt:Mv,body:{type:f_.DisableCaption,disableNewLtt:e}})}}enableManualCaption(e){return{seq:this.sendMessageToRwg({evt:4291,body:{op:e?1:0}})}}setTranslationLanguage(e){return void 0!==e?{seq:this.sendMessageToRwg({evt:Mv,body:{type:f_.SelectTranslationLanguage,lang:e}})}:{seq:this.sendMessageToRwg({evt:Mv,body:{type:f_.OffTranslation}})}}setTranscriptionLanguage(e,t){return{seq:this.sendMessageToRwg({evt:Mv,body:{type:f_.SelectTranscriptionLanguage,lang:e,nodeid:null!=t?t:0}})}}lockTranscriptionLanguage(e){return{seq:this.sendMessageToRwg({evt:Mv,body:{type:f_.LockTranscriptionLanguage,lock:e}})}}setSimuliveLanguage(e){return{seq:this.sendMessageToRwg({evt:Mv,body:{type:f_.SelectSimuliveLanguage,lang:e}})}}setSpokenLanguage(e){return{seq:this.sendMessageToRwg({evt:4287,body:{lang:e}})}}allowAskLT(e){return{seq:this.sendMessageToRwg({evt:4263,body:{bAnonymous:e}})}}approveLT(){return{seq:this.sendMessageToRwg({evt:4262,body:{bApproved:!0}})}}askLT(e){return{seq:this.sendMessageToRwg({evt:4261,body:{bAnonymous:e}})}}setChatPriviledge(e){return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:e}})}}setPanelistChatPrivilege(e){if(!Object.values(a_).includes(e))throw Error("Invalid panelist chat privilege req value");return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:e}})}}sendFeedback(e){return{seq:this.sendMessageToRwg({evt:4143,body:{feedback:e}})}}clearFeedback(){return{seq:this.sendMessageToRwg({evt:4145,body:{}})}}allowUnmuteVideo(e){return{seq:this.sendMessageToRwg({evt:4147,body:{bOn:e}})}}allowUnmuteAudio(e){return{seq:this.sendMessageToRwg({evt:4149,body:{bOn:e}})}}allowRaiseHand(e){return{seq:this.sendMessageToRwg({evt:4151,body:{bOn:e}})}}boToken(e){return{seq:this.sendMessageToRwg({evt:4173,body:{topic:e}})}}startBO(e){return{seq:this.sendMessageToRwg({evt:4175,body:{proto:e}})}}stopBO(e){return{seq:this.sendMessageToRwg({evt:4177,body:{status:e}})}}assignToBO(e,t){return{seq:this.sendMessageToRwg({evt:4179,body:{targetID:e,targetBID:t}})}}switchBO(e,t){return{seq:this.sendMessageToRwg({evt:4181,body:{targetID:e,targetBID:t}})}}wantJoinBO(e,t){return{seq:this.sendMessageToRwg({evt:4183,body:{targetID:e,targetBID:t}})}}joinBO(e){return{seq:this.sendMessageToRwg({evt:4193,body:{targetBID:e}})}}leaveBO(e=1){return{seq:this.sendMessageToRwg({evt:4185,body:{reason:e}})}}broadcastBO(e){return{seq:this.sendMessageToRwg({evt:4187,body:{textContent:e}})}}askForHelpBO(e){return{seq:this.sendMessageToRwg({evt:4189,body:{targetID:e}})}}askForHelpResultBO(e,t){return{seq:this.sendMessageToRwg({evt:4191,body:{targetID:e,helpResult:t}})}}coHostStartBO(e,t){return{seq:this.sendMessageToRwg({evt:4241,body:{proto:e,targetID:t}})}}coHostStopBO(e,t){return{seq:this.sendMessageToRwg({evt:4243,body:{status:e,targetID:t}})}}coHostAssignToBO(e,t,r){return{seq:this.sendMessageToRwg({evt:4245,body:{userGUID:e,targetID:r,targetBID:t}})}}moveToMainSession(e){return{seq:this.sendMessageToRwg({evt:4247,body:{userGUID:e}})}}coHostMoveToMainSession(e,t){return{seq:this.sendMessageToRwg({evt:4249,body:{userGUID:e,targetID:t}})}}allowParticipantRename(e){return{seq:this.sendMessageToRwg({evt:4163,body:{bOn:e}})}}allowMessageFeedbackNotify(e,t){return{seq:this.sendMessageToRwg({evt:4171,body:{bOn:e,id:t}})}}setPlayChime(e,t){return{seq:this.sendMessageToRwg({evt:4197,body:{bOn:e,id:t}})}}admitAllSilentUsers(){return{seq:this.sendMessageToRwg({evt:4199,body:{}})}}bindTeleUser(e,t,r){return{seq:this.sendMessageToRwg({evt:4201,body:{teleUserID:e,targetUserID:t,bBind:r}})}}practiceSession(){return{seq:this.sendMessageToRwg({evt:4207,body:null})}}roleChangeWebinar(e,t,r,o){return{seq:this.sendMessageToRwg({evt:4209,body:{jid:t,userID:r,clientCap:o,bPromote:e}})}}sendPromoteConsent(e,t){return{seq:this.sendMessageToRwg({evt:4254,body:{agreed:e,req_id:t}})}}batchCreateBOToken(e){const t=e.map(((e,t)=>({topic:e,index:t})));return{seq:this.sendMessageToRwg({evt:4211,body:t})}}mute(e,t){return{seq:this.sendMessageToRwg({evt:8193,body:{bMute:t,id:e}})}}audioDrop(e){return{seq:this.sendMessageToRwg({evt:8195,body:{id:e}})}}audioDialout(e,t,r,o,n){return{seq:this.sendMessageToRwg({evt:8197,body:{pn:e,dn2:cd(t),bCallme:r,bPressOne:o,bGreeting:n}})}}audioCancelDialout(e,t){return{seq:this.sendMessageToRwg({evt:8199,body:{pn:e,bCallme:t}})}}audioMuteAll(e){return{seq:this.sendMessageToRwg({evt:8201,body:{bMute:e}})}}allowToTalk(e,t){return{seq:this.sendMessageToRwg({evt:8204,body:{id:e,bAllowTalk:t}})}}muteAttendeeVideo(e,t){return{seq:this.sendMessageToRwg({evt:12297,body:{id:e,bOn:t}})}}notifyRwgIsMuteVideo(e,t){return this.muteAttendeeVideo(e,t)}pauseSharing(){return{seq:this.sendMessageToRwg({evt:16385,body:{}})}}resumeSharing(){return{seq:this.sendMessageToRwg({evt:16387,body:{}})}}allowAnonymousQuestion(e,t){return{seq:this.sendMessageToRwg({evt:4155,body:{userId:e,bOn:t}})}}allowViewAll(e,t){return{seq:this.sendMessageToRwg({evt:4157,body:{userId:e,bOn:t}})}}allowVote(e,t){return{seq:this.sendMessageToRwg({evt:4159,body:{userId:e,bOn:t}})}}allowComment(e,t){return{seq:this.sendMessageToRwg({evt:4161,body:{userId:e,bOn:t}})}}sharingRequestRemoteControl(e,t){return{seq:this.sendMessageToRwg({evt:16389,body:{id:e,bOn:t}})}}subscribeGrabRemoteControl(e,t){return{seq:this.sendMessageToRwg({evt:16393,body:{id:e,bOn:t}})}}subscribeSharing(e,t,r,o,n){const i={id:e,size:t};return r&&Object.assign(i,{bShareToBO:!0}),void 0!==o&&Object.assign(i,{bVideoShare:o}),void 0!==n&&Object.assign(i,{bEnableViewMultiShareMode:n}),{seq:this.sendMessageToRwg({evt:16415,body:i})}}unsubscribeSharing(e,t,r){const o={id:e};return t&&Object.assign(o,{bShareToBO:!0}),void 0!==r&&Object.assign(o,{bEnableViewMultiShareMode:r}),{seq:this.sendMessageToRwg({evt:16417,body:o})}}sendRWGConnectionPerformance(e){return{seq:this.sendMessageToRwg({evt:4167,body:{data:e}})}}sendSdkKeyToMonitor(e,t,r){return{seq:this.sendMessageToRwg({evt:4167,body:{data:`ZoomConferenceClient,videoapp_HTML5_sdk_web_join,${r},2,${t},${e}`}})}}sendDatachannelOffer(e){return{seq:this.sendMessageToRwg({evt:24321,offer:e})}}joinOrLeaveVoip(e,t){return{seq:this.sendMessageToRwg({evt:8203,body:{bOn:e,mute:t}})}}startSharing(e,t){return{seq:this.sendMessageToRwg({evt:16409,body:{id:e,bOn:!1,...null!=t?t:{}}})}}stopSharing(e,t){return{seq:this.sendMessageToRwg({evt:16409,body:{id:e,bOn:!0,...null!=t?t:{}}})}}lockSharing(e){return{seq:this.sendMessageToRwg({evt:4169,body:{lockShare:e}})}}changeWhiteboardPermission(e){const t=null==e?void 0:e.wbLockShare,r=null==e?void 0:e.shareWbPermission,o={};return void 0!==t&&Object.assign(o,{wbLockShare:t}),void 0!==r&&Object.assign(o,{shareWbPermission:r}),{seq:this.sendMessageToRwg({evt:28677,body:o})}}changeWhiteboardShareToAll(){return{seq:this.sendMessageToRwg({evt:28675,body:{}})}}changeWhiteboardShareRole(e,t){return{seq:this.sendMessageToRwg({evt:28676,body:{userId:e,role:t}})}}startShareToBreakoutRoom(e){return{seq:this.sendMessageToRwg({evt:16425,body:{id:e,bShareToBO:!0}})}}stopShareToBreakoutRoom(e){return{seq:this.sendMessageToRwg({evt:16425,body:{id:e,bShareToBO:!1}})}}preAssignBreakoutRoom(){return{seq:this.sendMessageToRwg({evt:4213,body:{}})}}claimHost(e){return{seq:this.sendMessageToRwg({evt:4215,body:{hostKey:e}})}}allowMultiplePin(e,t){return{seq:this.sendMessageToRwg({evt:4217,body:{userID:e,bOn:t}})}}spotlightVideo(e,t){return{seq:this.sendMessageToRwg({evt:4219,body:{id:e,...t}})}}connectCamera(e,t){const r={evt:12307,body:{id:e,bOn:t}};return{seq:this.sendMessageToRwg(r)}}followHostLayout(e){return{seq:this.sendMessageToRwg({evt:4223,body:{bFollowHostVideo:e}})}}setVideoDragLayout(e){return{seq:this.sendMessageToRwg({evt:4218,body:{drag_list:e}})}}chatCmdReq(e,t){return{seq:this.sendMessageToRwg({evt:4237,body:{msgID:e,cmd:t}})}}activeAppLinkReq(e){return{seq:this.sendMessageToRwg({evt:4257,body:{appId:e}})}}activeAppInfoReq(){return{seq:this.sendMessageToRwg({evt:4255,body:{}})}}muteShareAudio(e,t){const r={bOn:!0,bShareAudio:!e};return t&&Object.assign(r,{bShareAudioOnly:!0}),{seq:this.sendMessageToRwg({evt:16423,body:r})}}localMuteAudio(e,t){return{seq:this.sendMessageToRwg({evt:8209,body:{id:e,bMute:t}})}}changeSharePronoun(e,t){return{seq:this.sendMessageToRwg({evt:4264,body:{bPronoun:e,strPronoun:t}})}}sendReceivingSharingReady(e){return{seq:this.sendMessageToRwg({evt:16421,body:{ssrc:e}})}}sendManualCaption(e){return{seq:this.sendMessageToRwg({evt:4289,body:{...e}})}}sendPollingAction(e,t,r){return{seq:this.sendMessageToRwg({evt:4224,body:{action:e,PollingId:t,...r}})}}broadcastUserNetworkQuality(e){const t={type:e.isUplink,level:e.level,bwLevel:e.bwLevel,mediaType:e.mediaType};return{seq:this.sendMessageToRwg({evt:4331,body:t})}}sendFarEndCameraControl(e,t,r){return{seq:this.sendMessageToRwg({evt:4329,body:{cmd:e,userID:t,buttonID:r}})}}sendCameraAblity(e){return{seq:this.sendMessageToRwg({evt:4330,body:{...e,focus:!1}})}}sendReaction(e){return{seq:this.sendMessageToRwg({evt:4259,body:{...e}})}}remoteControlConsent(e,t,r,o,n=!1,i){const{deviceId:s,...a}=o,u=void 0!==i?{runAsAdmin:i}:{};return{seq:this.sendMessageToRwg({evt:16427,body:{DeviceID:s,op:e,SendUserID:r,AssignUserID:t,...a,bAutoDelete:n,...u}})}}takeBackRemoteControlPermission(e,t){return{seq:this.sendMessageToRwg({evt:16431,body:{SendUserID:e,ReceiverUserID:t}})}}syncSharedContentMetaWithRcApp(e){const{deviceId:t,...r}=e;return{seq:this.sendMessageToRwg({evt:16429,body:{DeviceID:t,...r}})}}startLiveStream(e,t,r){return{seq:this.sendMessageToRwg({evt:7977,body:{action:1,streamingURL:e,streamingKey:t,broadcastURL:r}})}}stopLiveStream(){return{seq:this.sendMessageToRwg({evt:7977,body:{action:0}})}}sendRemoteControlAuth(e){return{seq:this.sendMessageToRwg({evt:16433,body:{auth:e}})}}chatFileTransfer(e){return{seq:this.sendMessageToRwg({evt:4307,body:{...e,fileType:0,receiverType:0}})}}broadcastVoiceReq(e){return{seq:this.sendMessageToRwg({evt:4314,body:{broadcastVoice:e}})}}requestUserInfoToken(e,t){return{seq:this.sendMessageToRwg({evt:4309,body:{type:e,reqId:t}})}}toggleShareAnnotation(e,t){return{seq:this.sendMessageToRwg({evt:20241,body:{annotationOff:e?0:1,activeNodeId:t}})}}requestRemoteShare(e,t,r,o){return{seq:this.sendMessageToRwg({evt:16444,body:{requestId:Ey(),userId:e,destUserId:t,shareSource:r,startAnnotation:o}})}}respondRemoteShareRequest(e,t,r,o){return{seq:this.sendMessageToRwg({evt:16445,body:{requestId:e,userId:t,destUserId:r,status:o}})}}respondStatusToRemoteShareRequest(e,t,r,o){return{seq:this.sendMessageToRwg({evt:16446,body:{requestId:e,userId:t,destUserId:r,status:o}})}}sendCommandMessage(e,t){return{seq:this.sendMessageToRwg({evt:4383,body:{recieverID:t,commandContent:e}})}}openWhiteboard({docId:e,sharingrole:t,haveAccessAfterMeeting:r,isInRoom:o,boToken:n,whiteboardToken:i}){return{seq:this.sendMessageToRwg({evt:28673,body:{docId:e,sharingrole:t,haveAccessAfterMeeting:!!r,boToken:o?n:"",whiteboardToken:i}})}}newWhiteboard({sharingrole:e,docName:t,haveAccessAfterMeeting:r,templateId:o,accountId:n,whiteboardToken:i,templateType:s,boToken:a,isInRoom:u}){return{seq:this.sendMessageToRwg({evt:28673,body:{sharingrole:e,docName:t,haveAccessAfterMeeting:!!r,boToken:u?a:"",templateId:o,templateType:""!==s?s:0,accountId:n,whiteboardToken:i}})}}closeWhiteboard(e){return{seq:this.sendMessageToRwg({evt:28674,body:{docid:e}})}}updateWhiteboardProperties(e,t){return"ChangeTempUserRole"===e?{seq:this.sendMessageToRwg({evt:28676,body:{docid:t.docid,role:t.role}})}:"ShareToAll"===e?{seq:this.sendMessageToRwg({evt:28675,body:{docid:t.docid,bPermanent:!0}})}:null}subscribeWhiteboardSharing(){return{seq:this.sendMessageToRwg({evt:16415,body:{bWb:!0}})}}unsubscribeWhiteboardSharing(){return{seq:this.sendMessageToRwg({evt:16417,body:{bWb:!0}})}}}class E_ extends y_{static createAgent(){return this.rwgInstance||(this.rwgInstance=new E_),this.rwgInstance}}E_.rwgInstance=null;class __ extends y_{static getInstance(){return this.instance||(this.instance=new __),this.instance}}__.instance=null;class I_{constructor(n){this[e]=void 0,this[r]=void 0,this[t]=void 0,this[o]=void 0,this[e]=n,this[r]=n.dispatch,this[t]=n.getState}}let A_=function(e){return e.Open="open",e.Message="message",e.Error="error",e.Close="close",e}({});class b_{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1}static getInstance(){return this.xmppInstance||(this.xmppInstance=new b_),this.xmppInstance}on(e,t){let r=this.eventHandlers.get(e);r||(r=[]),r.push(t),this.eventHandlers.set(e,r)}off(e,t){const r=this.eventHandlers.get(e);if(r){const o=r.filter((e=>e!==t));this.eventHandlers.set(e,o)}}emit(e,t){const r=this.eventHandlers.get(e);r&&r instanceof Array&&r.slice(0).forEach((e=>{try{e(t)}catch(e){console.error(e)}}))}sendMessageToRwg(e){this.seq+=1;const t=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(e,{seq:t}))),t}connect(e,t){this.websocket=t?new window.ZoomTPModule.ZoomTPWebSocket(e):new WebSocket(e),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var e;null===(e=this.websocket)||void 0===e||e.close()}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",(e=>{this.emit(A_.Open,e)})),this.websocket.addEventListener("message",(e=>{const{data:t}=e;var r;if(t instanceof ArrayBuffer)0===new Uint8Array(t)[0]&&(null===(r=this.websocket)||void 0===r||r.send(t));else try{this.emit(A_.Message,JSON.parse(t))}catch(e){console.warn("Unsupported format",t)}})),this.websocket.addEventListener("close",(e=>{this.emit(A_.Close,e)})),this.websocket.addEventListener("error",(e=>{this.emit(A_.Error,e)})))}join(e){return{seq:this.sendMessageToRwg({evt:24576,body:{clientCap:e}})}}raiseHand(){return{seq:this.sendMessageToRwg({evt:24580,body:null})}}lowerHand(e){return{seq:this.sendMessageToRwg({evt:24578,jids:e||[]})}}sendWebinarMseeage(e,t,r,o=!1){const n={msg:e,jid:t?[t]:[],type:r,bcm:o};return{seq:this.sendMessageToRwg({evt:24582,body:n})}}sendAnswer(e,t,r){return{seq:this.sendMessageToRwg({evt:24584,body:{question_attendeejid:t.jid,question_attendeename:t.displayName,question_text:t.questionText,question_id:t.questionId,question_anonymous:t.isAnonymous,question_time:t.questionTime,text:e,isPrivate:r}})}}answerOnline(e,t){return{seq:this.sendMessageToRwg({evt:24586,body:{question_attendeejid:e.jid,question_attendeename:e.displayName,question_text:e.questionText,question_id:e.questionId,question_anonymous:e.isAnonymous,question_time:e.questionTime,isLiveStart:t}})}}dismissQuestion(e){return{seq:this.sendMessageToRwg({evt:24590,body:{question_attendeejid:e.jid,question_attendeename:e.displayName,question_text:e.questionText,question_id:e.questionId,question_anonymous:e.isAnonymous,question_time:e.questionTime,bOpen:!1}})}}deleteQuestion(e){return{seq:this.sendMessageToRwg({evt:24614,body:{question_id:e,bDelete:!0}})}}deleteComment(e){return{seq:this.sendMessageToRwg({body:{comment_id:e,bDelete:!0},evt:24616})}}reopenQuestion(e){return{seq:this.sendMessageToRwg({body:{question_attendeejid:e.jid,question_attendeename:e.displayName,question_text:e.questionText,question_id:e.questionId,question_anonymous:e.isAnonymous,question_time:e.questionTime,bOpen:!0},evt:24590})}}askQuestion(e,t,r=!1,o){const n=vd();return{seq:this.sendMessageToRwg({body:{id:n,text:e,isAnonymous:r,bAllowAttendeeViewAllQuestion:o,name:t},evt:24592}),questionId:n}}upOrDownVote(e,t){return{seq:this.sendMessageToRwg({body:{question_attendeejid:e.jid,question_attendeename:e.displayName,question_text:e.questionText,question_id:e.questionId,question_anonymous:e.isAnonymous,question_time:e.questionTime,bUpVote:t},evt:24598})}}rename(e,t){return{seq:this.sendMessageToRwg({body:{jid:e,displayName:t},evt:24600})}}setSkinTome(e){return{seq:this.sendMessageToRwg({body:{skinTone:e},evt:24618})}}}function C_(e){return Ot(Ur(((t,r)=>e(t,r))),uo((e=>null!=e)))}function T_(e){return Ot($r(((t,r)=>e(t,r)||or)))}function R_(e){return Ot($r(((t,r)=>e(t,r))),$r((e=>Array.isArray(e)?br(e):Cr(e))))}b_.xmppInstance=null;const O_={period:500,rules:[{peak:50,throttle:300},{peak:60,throttle:400}]},D_={[`${Rv}`]:()=>({payloads:{add:[],update:[],remove:[]},onThrottle(e){e.add&&this.payloads.add.push(...e.add),e.update&&this.payloads.update.push(...e.update),e.remove&&this.payloads.remove.push(...e.remove)}})};function w_(e=O_){return t=>new wt((r=>{const o=new Map;let n=0,i=null;const{period:s,rules:a}=e;let u=null;i||(i=((e,t)=>{const r=performance.now();let o=0,n=!1;return setTimeout((function i(){o+=t,e();const s=performance.now()-r-o,a=setTimeout(i,Math.max(t-s,0));n&&clearTimeout(a)}),t),()=>{n=!0}})((()=>{n=0}),s));const d=Object.keys(D_),c=t.subscribe({next(e){if(e&&e.evt&&null!==i){n+=1;const{evt:t,body:i}=e,s=String(t);if(d.indexOf(s)>=0)if(u){const e=o.get(s);if(e)e.onThrottle(i);else{const e=D_[s]();e.onThrottle(i),o.set(s,e)}}else{let t=0;if(a.forEach((e=>{n>e.peak&&(t=e.throttle)})),t>0){const e=D_[s]();e.onThrottle(i),o.set(s,e),u=setTimeout((()=>{o.forEach(((e,t)=>{const o={evt:Number(t),body:e.payloads};r.next(o)})),o.clear(),u=null}),t)}else r.next(e)}else r.next(e)}else r.next(e)},error(e){r.error(e)},complete(){r.complete()}});return()=>{c.unsubscribe(),i&&(i(),i=null),n=0}}))}let N_=function(e){return e.Closed="closed",e.Connecting="connecting",e.Connected="connected",e}({});function M_(e){return 1<<e-1}let P_=function(e){return e[e.SupportASL=M_(1)]="SupportASL",e[e.SidecarPhase2=M_(2)]="SidecarPhase2",e[e.SupportBroadcastVoice=M_(4)]="SupportBroadcastVoice",e[e.SendMeetingTokenSeparately=M_(5)]="SendMeetingTokenSeparately",e[e.SupportPreview=M_(6)]="SupportPreview",e[e.WebCameraIndication=M_(7)]="WebCameraIndication",e[e.SupportFarEndCameraControl=M_(9)]="SupportFarEndCameraControl",e[e.SupportVideoShare=M_(10)]="SupportVideoShare",e[e.UnifyErrorType=M_(11)]="UnifyErrorType",e[e.WhiteBoard=M_(12)]="WhiteBoard",e[e.RequestRemoteControl=M_(14)]="RequestRemoteControl",e[e.SmartSummary=M_(15)]="SmartSummary",e[e.LocalRecording=M_(16)]="LocalRecording",e[e.LocalRecordingGrantPermission=M_(17)]="LocalRecordingGrantPermission",e[e.ShareMultiStream=M_(18)]="ShareMultiStream",e[e.VideoLTR=M_(19)]="VideoLTR",e[e.WebrtcAudioRtcpTime=M_(20)]="WebrtcAudioRtcpTime",e[e.SupportSend1080PVideo=M_(29)]="SupportSend1080PVideo",e[e.SupportSend1080PVideoShare=M_(30)]="SupportSend1080PVideoShare",e[e.SupportWhiteboard=M_(12)]="SupportWhiteboard",e}({}),L_=function(e){return e[e.SupportPresenterAnnotation=M_(5)]="SupportPresenterAnnotation",e[e.SupportShareCameraFeed=M_(15)]="SupportShareCameraFeed",e[e.SupportMMRCommandChannel=M_(11)]="SupportMMRCommandChannel",e[e.SupportAudioShareNetworkQuality=M_(17)]="SupportAudioShareNetworkQuality",e[e.SupportWhiteboard=M_(13)]="SupportWhiteboard",e}({});const{setAsnIds:k_,setIsCanUnmute:U_,setDialoutSequence:V_,setDialoutResultCode:B_,setIsAllowToTalk:H_,setAudioSsrc:j_,setIsMutedUponEntry:F_,setIsUserGrantCaptureAudio:W_,setIsMicrophoneForbidden:x_,setWebrtcRestartCount:$_,setMicrophoneList:G_,setSpeakerList:z_,setActiveMicrophone:q_,setActiveSpeaker:K_,setCanPlayAudio:J_,resetAudio:Q_,setIsComputerAudioLoading:Y_,setIsAllowToTalkAttendeeConnected:Z_,setIsMuteBeforeSharingAudio:X_,addLocalShareAudioUser:eI,updateLocalShareAudioUser:tI,setIsJoinComputerAudioBeforeSharingAudio:rI,setIsShareAudioEnabled:oI,setIsShareAudioMuted:nI,setIsSharingAudio:iI,setAudioDataEncoding:sI,setAudioDataDecoding:aI,addLocallyMutedAudio:uI,removeLocallyMutedAudio:dI,updateUserAudioVolumeLocally:cI,removeLocalUserAudioVolume:lI,setCustomizedAudioOption:pI,setIsBackgroundNoiseSuppression:hI,setIsHidEnabled:mI,setAudioMediaPlaybackFile:gI,setIsStopAllIncomingAudio:SI,setIsVerifiedAudioPermissionOnIosMobile:vI,setIsAudioBridgeSignalReconnecting:fI,setAudioMutedSource:yI,setAudioUnmutedSource:EI,setAudioOriginalSound:_I,setLeaveAudioSource:II,setSecondaryAudioMicrophoneId:AI,setCrcCallOutSequence:bI,setCrcCallOutReturnCode:CI,setWebRtcAudioCapable:TI}=Fc("SET_ASN_IDS","SET_IS_CAN_UNMUTE","SET_DIALOUT_SEQUENCE","SET_DIALOUT_RESULT_CODE","SET_IS_ALLOW_TO_TALK","SET_AUDIO_SSRC","SET_IS_MUTED_UPON_ENTRY","SET_IS_USER_GRANT_CAPTURE_AUDIO","SET_IS_MICROPHONE_FORBIDDEN","SET_WEBRTC_RESTART_COUNT","SET_MICROPHONE_LIST","SET_SPEAKER_LIST","SET_ACTIVE_MICROPHONE","SET_ACTIVE_SPEAKER","SET_CAN_PLAY_AUDIO","RESET_AUDIO","SET_IS_COMPUTER_AUDIO_LOADING","SET_IS_ALLOW_TO_TALK_ATTENDEE_CONNECTED","SET_IS_MUTE_BEFORE_SHARING_AUDIO","SET_IS_SHARING_AUDIO","ADD_LOCAL_SHARE_AUDIO_USER","UPDATE_LOCAL_SHARE_AUDIO_USER","SET_IS_JOIN_COMPUTER_AUDIO_BEFORE_SHARING_AUDIO","SET_IS_SHARE_AUDIO_ENABLED","SET_IS_SHARE_AUDIO_MUTED","SET_AUDIO_DATA_ENCODING","SET_AUDIO_DATA_DECODING","ADD_LOCALLY_MUTED_AUDIO","REMOVE_LOCALLY_MUTED_AUDIO","UPDATE_USER_AUDIO_VOLUME_LOCALLY","REMOVE_LOCAL_USER_AUDIO_VOLUME","SET_CUSTOMIZED_AUDIO_OPTION","SET_IS_BACKGROUND_NOISE_SUPPRESSION","SET_IS_HID_ENABLED","SET_AUDIO_MEDIA_PLAYBACK_FILE","SET_IS_STOP_ALL_INCOMING_AUDIO","SET_IS_VERIFIED_AUDIO_PERMISSION_ON_IOS_MOBILE","SET_IS_AUDIO_BRIDGE_SIGNAL_RECONNECTING","SET_AUDIO_MUTED_SOURCE","SET_AUDIO_UNMUTED_SOURCE","SET_AUDIO_ORIGINAL_SOUND","SET_LEAVE_AUDIO_SOURCE","SET_SECONDARY_AUDIO_MICROPHONE_ID","SET_CRC_CALL_OUT_SEQUENCE","SET_CRC_CALL_OUT_RETURN_CODE","SET_WEB_RTC_AUDIO_CAPABLE");function RI(e){const{audio:{isBackgroundNoiseSuppression:t,originalSound:r,highBitrate:o}}=e,n={currentSelect:Re.Denoise},i={highfidelity:!1,stereo:!1};if(r){Object.assign(n,{currentSelect:Re.OriginalSound});const e={};"boolean"==typeof r?Object.assign(e,i):Object.assign(e,{highfidelity:!!r.hifi,stereo:!!r.stereo}),Object.assign(n,{originalSound:e})}return Object.assign(n,{backgroundNoiseSuppression:t?Te.Zoom:Te.Browser,highBitrate:o}),n}function OI(e,t,r,o){const{meeting:{userId:n}}=o;return Zd(t,r,o,e),t===n?nI(r):tI({userId:t,muted:r})}async function DI(e,t,r){var o,n;const{audio:{audioSsrc:i,activeMicrophone:s,activeSpeaker:a,isAllowToTalk:u,customizeAudioOption:{speakerOnly:d,mute:c,microphoneId:l,speakerId:p},isUsingMediaPlayback:h,mediaPlaybackFile:m,isHIDEnabled:g,microphoneDevicesList:S,isVerifiedAudioPermissionOnIOSMobile:v,speakerDevicesList:f,isWebRtcAudioCapable:y},meeting:{userId:E}}=t,_=Tu(t),I=!!d||lu(_.userRole)&&!u,A=null!=r?r:!I;let b=s,T=a;if(void 0!==l||void 0!==p){let e=S,t=f;if(0===S.length){const{microphones:r,speakers:o}=await Nr(Ld());e=r,t=o}l&&e.findIndex((e=>e.deviceId===l))>-1&&(b=l),p&&t.findIndex((e=>e.deviceId===p))>-1&&(T=p)}if(h&&null!=m&&m.url){const t=pm.getInstance();await t.setAudioElement(m),b=t.audioElement,void 0!==m.playback&&(e.enablePlayAudioFileLocally(!!m.playback),b.dataset.playback=m.playback?"1":"0")}else pm.getInstance().stopAudioElement();return I&&!v&&C.isIOSMobile&&await async function(){await navigator.mediaDevices.getUserMedia({audio:!0})}(),null===(o=e.joinComputerAudio(i,b,T,A,RI(t),y,g?{microphoneLabel:null===(n=S.find((e=>e.deviceId===s)))||void 0===n?void 0:n.label,defaultMuted:!(null==_||!_.muted)}:void 0))||void 0===o?void 0:o.then((()=>{c&&E_.createAgent().mute(E,!0)}))}async function wI(e,t){const r=[],{audio:{isJoinComputerAudioBeforeSharingAudio:o,mutedBeforeSharingAudio:n}}=t,i=Tu(t);return!0===o&&(r.push(rI(void 0)),!1===n&&(r.push(EI(B.SharingAudio)),e.mute(i.userId,!1)),r.push(X_(void 0))),r}async function NI(e,t,r){const{audio:{isSharingAudio:o},meeting:{userId:n},share:{isReceiveSharingFromMainSession:i}}=r,s=[];if(e.setSharingAudioVolume(n,!0,!!i),s.push(nI(!0)),o){await e.leaveSharingAudio(!1),s.push(iI(!1));const o=await wI(t,r);s.push(...o),setTimeout((()=>{$a(ki,{state:"off"})}),0)}return s.push(oI(!1)),s}async function MI(e,t,r){const{audio:{audioSsrc:o,activeMicrophone:n,activeSpeaker:i,isWebRtcAudioCapable:s},meeting:{mediaFeatureOptions:a}}=r,u=Tu(r),d=[];if(!ju.isSupportOpenMicWhenShareAudio(a||"")){const t=await async function(e,t){const r=[],o=Tu(t),{audio:{isMicrophoneForbidden:n}}=t;return(null==o?void 0:o.audio)===ye.Computer&&(r.push(rI(!0)),r.push(X_(o.muted)),o.muted||e.muteAudio(),r.push($_(0)),n&&r.push(x_(!1))),r}(e,r);d.push(...t)}return await e.leaveSharingAudio(!0),await e.joinSharingAudio({ssrc:o,microphoneDeviceId:n,speakerDeviceId:i,isCaptureAudio:lu(u.userRole),audioBridge:s}),d.push(oI(!0)),d.push(iI(!0)),d.push(OI(e,u.userId,!1,r)),d.findIndex((e=>e.type===`${rI}`&&!0===e.payload))>-1&&(d.push(yI(V.SharingAudio)),t.mute(r.meeting.userId,!0)),setTimeout((()=>{$a(ki,{state:"on"})}),0),d}const PI=()=>{if(T())return!0;{var e;let{browser:r}=C;if(r=null===(e=r)||void 0===e?void 0:e.toLocaleLowerCase(),r.indexOf("safari")>-1&&-1===r.indexOf("ios-safari")){var t;const e=null===(t=navigator.userAgent.match(/version\/(\d+\.?\d+)/i))||void 0===t?void 0:t[1];return Sd(e||"","15.2")>=0&&Sd(e||"","17.1")<0}return!1}};function LI(e,t,r){for(let o=0;o<r.length&&0!==t.length;o++){const{userId:n,displayName:i}=r[o];if(t.includes(n)){const r=e.find((e=>e.userId===n));r&&(r.displayName=i,t.splice(t.indexOf(n),1))}}}function kI(e,t){return ju.isSupportAudioDenoise(e,t)}function UI(){return ju.isSupportStereoAudio()}function VI(){var e;return"function"==typeof(null===(e=window.navigator.hid)||void 0===e?void 0:e.requestDevice)}function BI(e,t,r){const{audio:{isAllowToTalk:o,customizeAudioOption:n},media:{audioDecodeStatus:i,audioEncodeStatus:s}}=e;return{encodeInitStatus:lu(t.userRole)&&!o||r||null!=n&&n.speakerOnly?"success":s,decodeInitStatus:i}}function HI(e){const{audio:{bMutedUponEntry:t,isUserGrantCaptureAudio:r,isAllowToTalk:o}}=e,n=Tu(e);return!(r||null!=n&&n.isHost||o)&&t}function jI(e,t){const{audio:{customizeAudioOption:r}}=t,o=!(null==r||!r.mute)||HI(t);e.joinOrLeaveVoip(!0,o)}function FI(){return co(Ka(zi.JoinComputerAudio.success,1),no(...zi.JoinComputerAudio.fail.map((e=>Ka(e,1).pipe($r((t=>{const{errorCode:r,...o}=null!=t?t:{},n={...o};return void 0!==r&&Object.assign(n,{subCode:r}),Tr({type:Ye,reason:e,errorCode:wa.AUDIO_CAPTURE_FAILED,...n})})))))),ro(45e3).pipe($r((()=>Tr({type:Qe,errorCode:wa.OPERATION_TIMEOUT})))))}const WI=E_.createAgent(),xI=jd(NE(ju.getInstance())),$I=e=>!e.muted,GI=_c("SCREENSHOT_SHARING_NOTIFICATION"),{setSharePrivilege:zI,setShareActiveNode:qI,setIsReceiveSharing:KI,setIsScreenShareForbidden:JI,setShareDimension:QI,setShareStatus:YI,setShareSsrc:ZI,setShareQuality:XI,setReceivedShareDimension:eA,setIsGrabRemoteControl:tA,setIsSdkGrabControl:rA,setIsReceiveSharingFromMainSession:oA,setIsSharingToBreakoutRoom:nA,setIsSharingWithSecondCamera:iA,setShringSecondCameraId:sA,setIsRequireReadReceipt:aA,setIsOptimizedForSharedVideo:uA,setShareDataEncoding:dA,setShareDataDecoding:cA,addShareCapturedEnsuredCanvas:lA,addShareRenderedEnsuredCanvas:pA,setRemoteControlCurrentSsrc:hA,setRemoteControllingSsrc:mA,setApprovedRemoteControlSsrc:gA,setRemoteControlAppDownloadUrl:SA,setRemoteControlAppInstallStatus:vA,remoteControlAppStatusFallbackCheck:fA,remoteControlAppLaunchedCheck:yA,setIsEnableAutoDeleteRcApp:EA,setRemoteControlAppLaunchSheme:_A,addRemoteControlledUser:IA,removeRemoteControlledUser:AA,setRemoteControlSetting:bA,setRemoteControlViewportDomSelector:CA,setAnnotationCapability:TA,setIsAnnotationInitialized:RA,setIsAnnotationStarted:OA,setAnnotationUser:DA,setAnnotationToolColor:wA,setAnnotationSpotlightColor:NA,setAnnotationToolWidth:MA,setAnnotationToolType:PA,setIsSimultaneousShareView:LA,setIsCameraFeedSharing:kA,addShareViewAttachment:UA,removeShareViewAttachment:VA,setAnnotationVanishingToolTimer:BA,resetShare:HA}=Fc("SET_SHARE_PRIVILEGE","SET_SHARE_ACTIVE_NODE","SET_IS_RECEIVE_SHARING","SET_IS_SCREEN_SHARE_FORBIDDEN","SET_SHARE_DIMENSION","SET_SHARE_STATUS","SET_SHARE_SSRC","SET_SHARE_QUALITY","SET_RECEIVED_SHARE_DIMENSION","SET_IS_GRAB_REMOTE_CONTROL","SET_IS_SDK_GRAB_CONTROL","SET_IS_RECEIVE_SHARING_FROM_MAIN_SESSION","SET_IS_SHARING_TO_BREAKOUT_ROOM","SET_IS_SHARING_WITH_SECOND_CAMERA","SET_SHRING_SECOND_CAMERA_ID","SET_IS_REQUIRE_READ_RECEIPT","SET_IS_OPTIMIZED_FOR_SHARED_VIDEO","SET_SHARE_DATA_ENCODING","SET_SHARE_DATA_DECODING","ADD_SHARE_CAPTURED_ENSURED_CANVAS","ADD_SHARE_RENDERED_ENSURED_CANVAS","SET_REMOTE_CONTROL_CURRENT_SSRC","SET_REMOTE_CONTROLLING_SSRC","SET_APPROVED_REMOTE_CONTROL_SSRC","SET_REMOTE_CONTROL_APP_DOWNLOAD_URL","SET_REMOTE_CONTROL_APP_INSTALL_STATUS","REMOTE_CONTROL_APP_STATUS_FALLBACK_CHECK","REMOTE_CONTROL_APP_LAUNCHED_CHECK","SET_IS_ENABLE_AUTO_DELETE_RC_APP","SET_REMOTE_CONTROL_APP_LAUNCH_SHEME","ADD_REMOTE_CONTROLLED_USER","REMOVE_REMOTE_CONTROLLED_USER","SET_REMOTE_CONTROL_SETTING","SET_REMOTE_CONTROL_VIEWPORT_DOM_SELECTOR","SET_ANNOTATION_CAPABILITY","SET_IS_ANNOTATION_INITIALIZED","SET_IS_ANNOTATION_STARTED","SET_ANNOTATION_USER","SET_ANNOTATION_TOOL_COLOR","SET_ANNOTATION_SPOTLIGHT_COLOR","SET_ANNOTATION_TOOL_WIDTH","SET_ANNOTATION_TOOL_TYPE","SET_IS_SIMULTANEOUS_SHARE_VIEW","SET_IS_CAMERA_FEED_SHARING","ADD_SHARE_VIEW_ATTACHMENT","REMOVE_SHARE_VIEW_ATTACHMENT","SET_ANNOTATION_VANISHING_TOOL_TIMER","RESET_SHARE"),jA=E_.createAgent(),FA=jd(NE(ju.getInstance())),WA=E_.createAgent(),xA=jd(NE(ju.getInstance())),$A=[F.Canceled,F.CancelFailed],GA={asnIds:{asn1:{userId:0,displayName:null},asn2:{userId:0,displayName:null},asn3:{userId:0,displayName:null}},microphoneDevicesList:[],speakerDevicesList:[],activeMicrophone:"default",activeSpeaker:"default",isMicrophoneForbidden:!1,audioSsrc:0,bCanUnmute:!1,bMutedUponEntry:!1,isAllowToTalk:void 0,dialout:[],crcDevice:[],canPlayAudio:!1,mutedSource:void 0,unmutedSource:void 0,isUserGrantCaptureAudio:!1,webrtcRestartCount:0,isComputerAudioLoading:!1,isUsingMediaPlayback:!1,customizeAudioOption:{},localShareAudioUserMutedList:[],locallyMutedAudioList:[],localUserAudioVolumeList:[],isStopAllImcomingAudio:!1,isWebRtcAudioCapable:!1,webRtcAudioMode:0,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,bandwidth:0,bitrate:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,bandwidth:0,bitrate:0}}},zA=zc({[`${k_}`]:sy(((e,{payload:t})=>{e.asnIds={...t}})),[`${U_}`]:sy(((e,{payload:t})=>{e.bCanUnmute=t})),[`${V_}`]:sy(((e,{payload:t})=>{const{sequence:r,phoneNumber:o}=t;-1===e.dialout.findIndex((e=>e.sequence===r))&&e.dialout.push({sequence:r,phoneNumber:o,returnCode:-1,uuid:Ey()})})),[`${B_}`]:sy(((e,{payload:t})=>{const{sequence:r,code:o,nodeId:n}=t,i=e.dialout.find((e=>e.sequence===r));i&&(i.returnCode=o,n&&(i.phoneNodeId=n))})),[`${H_}`]:sy(((e,{payload:t})=>{e.isAllowToTalk=t,e.isAllowToTalkAttendeeConnected=!1})),[`${yI}`]:sy(((e,{payload:t})=>{e.mutedSource=t})),[`${EI}`]:sy(((e,{payload:t})=>{e.unmutedSource=t})),[`${j_}`]:sy(((e,{payload:t})=>{e.audioSsrc=t})),[`${F_}`]:sy(((e,{payload:t})=>{e.bMutedUponEntry=t})),[`${W_}`]:sy(((e,{payload:t})=>{e.isUserGrantCaptureAudio=t})),[`${x_}`]:sy(((e,{payload:t})=>{e.isMicrophoneForbidden=t})),[`${$_}`]:sy(((e,{payload:t})=>{e.webrtcRestartCount=t})),[`${G_}`]:sy(((e,{payload:t})=>{e.microphoneDevicesList=t})),[`${z_}`]:sy(((e,{payload:t})=>{e.speakerDevicesList=t})),[`${q_}`]:sy(((e,{payload:t})=>{e.activeMicrophone=t})),[`${K_}`]:sy(((e,{payload:t})=>{e.activeSpeaker=t})),[`${J_}`]:sy(((e,{payload:t})=>{e.canPlayAudio=t})),[`${Y_}`]:sy(((e,{payload:t})=>{e.isComputerAudioLoading=t})),[`${pI}`]:sy(((e,{payload:t})=>{if(t){const{speakerOnly:r,mute:o,backgroundNoiseSuppression:n,originalSound:i,syncButtonsOnHeadset:s,mediaFile:a,microphoneId:u,speakerId:d,highBitrate:c}=t;e.customizeAudioOption.speakerOnly=r,e.customizeAudioOption.mute=o,e.customizeAudioOption.microphoneId=u,e.customizeAudioOption.speakerId=d,e.isBackgroundNoiseSuppression=!!n,e.isHIDEnabled=!!s,e.originalSound=i,e.highBitrate=!!c,fd(e.mediaPlaybackFile,a)||(e.mediaPlaybackFile=a,e.isUsingMediaPlayback=!(null==a||!a.url)),o&&(e.mutedSource=V.Inherited)}})),[`${Z_}`]:sy(((e,{payload:t})=>{e.isAllowToTalkAttendeeConnected=t})),[`${X_}`]:sy(((e,{payload:t})=>{e.mutedBeforeSharingAudio=t})),[`${iI}`]:sy(((e,{payload:t})=>{e.isSharingAudio=t})),[`${nI}`]:sy(((e,{payload:t})=>{e.isShareAudioMuted=t})),[`${eI}`]:sy(((e,{payload:t})=>{const{userId:r,isFromMainSession:o}=t;-1===e.localShareAudioUserMutedList.findIndex((e=>e.userId===r))&&e.localShareAudioUserMutedList.push({userId:r,isFromMainSession:o,muted:!1})})),[`${tI}`]:sy(((e,{payload:t})=>{const r=e.localShareAudioUserMutedList.find((e=>e.userId===t.userId));r&&(r.muted=t.muted)})),[`${rI}`]:sy(((e,{payload:t})=>{e.isJoinComputerAudioBeforeSharingAudio=t})),[`${oI}`]:sy(((e,{payload:t})=>{e.isShareAudioEnabled=t})),[`${sI}`]:sy(((e,{payload:t})=>{const{data:{encoding:r,rate:o,...n}}=t;e.statistic.encode={bitrate:o,...n}})),[`${aI}`]:sy(((e,{payload:t})=>{const{data:{encoding:r,rate:o,...n}}=t;e.statistic.decode={bitrate:o,...n}})),[`${uI}`]:sy(((e,{payload:t})=>{-1===e.locallyMutedAudioList.findIndex((e=>e===t))&&e.locallyMutedAudioList.push(t)})),[`${dI}`]:sy(((e,{payload:t})=>{const r=e.locallyMutedAudioList.findIndex((e=>e===t));-1!==r&&e.locallyMutedAudioList.splice(r,1)})),[`${cI}`]:sy(((e,{payload:t})=>{const r=e.localUserAudioVolumeList.find((e=>e.userId===t.userId));if(r?r.volume=t.volume:e.localUserAudioVolumeList.push(t),t.volume>0){const r=e.locallyMutedAudioList.findIndex((e=>e===t.userId));-1!==r&&e.locallyMutedAudioList.splice(r,1)}})),[`${lI}`]:sy(((e,{payload:t})=>{const r=e.localUserAudioVolumeList.findIndex((e=>e.userId===t.userId));-1!==r&&e.localUserAudioVolumeList.splice(r,1)})),[`${hI}`]:sy(((e,{payload:t})=>{e.isBackgroundNoiseSuppression=t})),[`${mI}`]:sy(((e,{payload:t})=>{e.isHIDEnabled=t})),[`${gI}`]:sy(((e,{payload:t})=>{e.mediaPlaybackFile=t,e.isUsingMediaPlayback=!(null==t||!t.url)})),[`${SI}`]:sy(((e,{payload:t})=>{e.isStopAllImcomingAudio=t})),[`${vI}`]:sy(((e,{payload:t})=>{e.isVerifiedAudioPermissionOnIOSMobile=t})),[`${fI}`]:sy(((e,{payload:t})=>{e.isAudioBridgeSignalReconnecting=t})),[`${_I}`]:sy(((e,{payload:t})=>{e.originalSound=t})),[`${II}`]:sy(((e,{payload:t})=>{e.leaveAudioSource=t,e.unmutedSource=B.Inherited})),[`${AI}`]:sy(((e,{payload:t})=>{e.secondaryAudioMicrophoneId=t})),[`${bI}`]:sy(((e,{payload:t})=>{const{sequence:r,ip:o,protocol:n}=t;-1===e.crcDevice.findIndex((e=>e.sequence===r))&&e.crcDevice.push({sequence:r,ip:o,protocol:n,transId:0,uuid:Ey()})})),[`${CI}`]:sy(((e,{payload:t})=>{const{sequence:r,transID:o,result:n}=t,i=e.crcDevice.find((e=>e.sequence===r));i&&Object.assign(i,{transId:o,returnCode:n})})),[`${TI}`]:sy(((e,{payload:t})=>{const{isWebRtcAudioCapable:r,webRtcAudioMode:o}=t;e.isWebRtcAudioCapable=r,e.webRtcAudioMode=o})),[`${Q_}`]:({dialout:e,crcDevice:t,locallyMutedAudioList:r,localUserAudioVolumeList:o,customizeAudioOption:n,originalSound:i,highBitrate:s,isHIDEnabled:a,isBackgroundNoiseSuppression:u,isStopAllImcomingAudio:d,mediaPlaybackFile:c,isUsingMediaPlayback:l,isVerifiedAudioPermissionOnIOSMobile:p,activeSpeaker:h,activeMicrophone:m},{payload:g})=>g?{...GA,dialout:e,crcDevice:t,locallyMutedAudioList:r,localUserAudioVolumeList:o,customizeAudioOption:{...GA.customizeAudioOption,speakerOnly:n.speakerOnly},originalSound:i,highBitrate:s,isHIDEnabled:a,isBackgroundNoiseSuppression:u,isStopAllImcomingAudio:d,mediaPlaybackFile:c,isUsingMediaPlayback:l,isVerifiedAudioPermissionOnIOSMobile:p,activeSpeaker:h,activeMicrophone:m}:{...GA}},GA),qA={dialEpics0:(e,t)=>Ev(e,8198).pipe(Ro(t),uo((([e,t])=>{const{audio:{dialout:r}}=t,{payload:{seq:o,body:n}}=e;return r.map((e=>e.sequence)).includes(o)||$A.includes(null==n?void 0:n.result)})),$r((([e,t])=>{const{payload:{seq:r,body:{phoneNodeID:o,result:n}}}=e,i=[B_({code:n,sequence:r,nodeId:o})],{audio:{dialout:s}}=t;let a=s.find((e=>e.sequence===r));!a&&$A.includes(n)&&(a=s.find((e=>[F.Calling,F.Ringing,F.Accepted].includes(e.returnCode))));const u={code:n};if(a&&(Object.assign(u,{phoneNumber:a.phoneNumber,uuid:a.uuid}),o&&Object.assign(u,{userId:o})),$a(bi,u),n===F.Success){if($a(Ci),o&&Nu(t).findIndex((e=>e.userId===o))>-1){var d;const e=null===(d=t.audio.dialout.find((e=>e.sequence===r)))||void 0===d?void 0:d.phoneNumber;e&&(i.push(nf({userId:o,key:"phoneNumber",value:e})),$a(No,[{userId:o,phoneNumber:e}]))}}else[F.Canceling,F.Canceled,F.CancelFailed].includes(n)?n===F.Canceled?$a(Ri):n===F.CancelFailed&&$a(Oi):-1===[F.Calling,F.Ringing,F.Accepted,F.Success].indexOf(n)&&$a(Ti);return br(i)}))),dialEpics1:(e,t)=>Ev(e,4120).pipe(Ro(t),uo((([e,t])=>t.audio.crcDevice.map((e=>e.sequence)).includes(e.payload.seq))),$r((([e,t])=>{const{payload:{seq:r,body:{result:o,transID:n}}}=e,{audio:{crcDevice:i}}=t,s=[],a=i.find((e=>e.sequence===r));return a&&($a(ji,{code:o,ip:a.ip,protocol:a.protocol,uuid:a.uuid}),s.push(CI({sequence:r,transID:n,result:o}))),o===we.Success?$a(Fi):[we.Success,we.Ringing].includes(o)||$a(Wi),br(s)})))},KA={epics0:(e,t)=>Ev(e,12033).pipe(Ro(t),Ur((([e,t])=>{const{participants:{allowTalkAttendeesList:r}}=t,o=e.payload.body;let n={};if(o){const e=Nu(t),i=Object.keys(o).map((e=>({key:e,userId:o[e]}))),s=i.map((e=>e.userId));LI(i,s,e),r.length>0&&s.length>0&&LI(i,s,r),n=i.reduce(((e,t)=>({...e,[`${t.key}`]:{userId:t.userId,displayName:t.displayName}})),{}),$a(Si,Object.values(n))}return k_(n)}))),epics1:(e,t)=>Ev(e,16135).pipe(Ro(t),To((([e,t])=>{const{payload:{body:{id:r,bLeadershipOn:o}}}=e,{audio:{bCanUnmute:n}}=t,i=Tu(t);if(i){const{isHost:e,bCoHost:t,userId:s,audio:a,muted:u}=i,d=e||t;o&&yd(s,r)&&(null!==a&&""!==a&&!0!==u||!d&&!n||$a(vi,U.Spotlight))}})),$r((()=>or))),epics2:(e,t)=>Ev(e,12037).pipe(Ro(t),To((([,e])=>{const t=Tu(e);null!==(null==t?void 0:t.audio)&&""!==(null==t?void 0:t.audio)&&1==(null==t?void 0:t.muted)&&$a(vi,U.Unmute)})),$r((()=>or))),epics3:(e,t)=>Ev(e,Ov).pipe(uo((e=>e.payload.body&&["bCanUnmute","bMutedAll","bMutedUponEntry"].some((t=>void 0!==e.payload.body[t])))),$r((e=>{const{payload:{body:{bCanUnmute:r,bMutedAll:o,bMutedUponEntry:n}}}=e,i=[];if(void 0!==r&&i.push(U_(e.payload.body.bCanUnmute)),void 0!==o){const r=Tu(t.value);(null==r?void 0:r.audio)!==ye.Computer&&(null==r?void 0:r.audio)!==ye.Phone||0!=r.muted||e.payload.body.bMutedAll&&i.push(yI(V.PassiveByMuteAll))}return void 0!==n&&i.push(F_(e.payload.body.bMutedUponEntry)),br(i)}))),epics4:(e,t)=>Ev(e,Rv).pipe(Ro(t),uo((([,e])=>e.socket.zoomSocketStatus===N_.Connected)),$r((([e,r])=>{const{payload:{body:{update:o}}}=e;if(null!=o&&o.some((e=>void 0!==e.audio||void 0!==e.muted))){const{meeting:{userId:e}}=r,n=o.filter((t=>t.id!==e)),i=o.filter((t=>t.id===e));if(n&&n.forEach((e=>{$a(Ai,e)})),i.length>0)return Md(t).pipe($r((e=>{const{audio:{mutedSource:r,unmutedSource:o,isAllowToTalk:n,isSharingAudio:s,isAudioBridgeSignalReconnecting:a,leaveAudioSource:u,customizeAudioOption:{speakerOnly:d}}}=t.value,c=e;return br(i).pipe(R_((async e=>{const t=[];if(e.audio!==c.audio)if(""===e.audio)$a(Ei,{source:u}),t.push(II(void 0));else if(e.audio===ye.Computer){const e=lu(c.userRole)&&!n||!!d;s&&$a(fi),e&&($a(fi),C.isIOSMobile&&t.push(vI(!0))),a&&($a(fi),t.push(fI(!1)))}else e.audio===ye.Phone&&(c.audio===ye.Computer&&(await xI.leaveComputerAudio(),t.push(II(H.Pstn)),WI.joinOrLeaveVoip(!1)),$a(yi));if(""!==c.audio&&e.muted!==c.muted){if(e.muted!==c.muted)if(!0===e.muted){if(r!==V.Inherited){const e=null!=r?r:V.PassiveByMuteOne;$a(_i,{source:e})}c.audio===ye.Computer&&xI.muteAudio()}else if(!1===e.muted){if(o!==B.Inherited){const e=null!=o?o:B.Passive;$a(Ii,{source:e})}c.audio===ye.Computer&&xI.unmuteAudio()}void 0!==e.muted&&t.push(yI(void 0),EI(void 0))}return t})))})))}return or}))),epics5:(e,t)=>Ev(e,12036).pipe(Ro(t),$r((([e,t])=>{const r=Tu(t),{media:{audioEncodeStatus:o}}=t,{promoterID:n,bAllowTalk:i}=e.payload.body;if((null==r?void 0:r.userId)===n){if($a(Li,i),i)return"success"!==o&&xI.enableAudioEncode(),Nd("audio",o,"success").pipe($r((e=>(e&&$a(vi,U.AllowToTalk),or))),Io(H_(!0)));if(WI.mute(n,!0),(null==r?void 0:r.audio)===ye.Computer)return xI.leaveComputerAudio(),ro(300).pipe(To((async()=>{(PI()?Nr(co(Xr(document,"click").pipe(mo(1)),Xr(document,"touchend").pipe(mo(1)))):Promise.resolve(!0)).then((()=>{DI(xI,t,!1)}))})),$r((()=>or)),Io(H_(!1),yI(V.Inherited)))}return or}))),epics6:e=>Ev(e,8205).pipe(To((e=>{$a("AUDIO_ALLOW_TO_TALK_RESPONSE",e.payload.body)})),$r((()=>or))),epics7:(e,t)=>Iv(e,24597).pipe(Ro(t),To((([e,t])=>{const r=Tu(t);(null==r?void 0:r.audio)===ye.Phone?WI.audioDrop(r.userId):(null==r?void 0:r.audio)===ye.Computer&&e.payload.body.bPromote})),$r((()=>or))),epics8:(e,t)=>Ev(e,12035).pipe(Ro(t),Ao((([e,r])=>{const{meeting:{currentUserAudioBeforeReset:o,isCurrentUserMutedBeforeReset:n,userId:i}}=r,{payload:{body:{ssrc:s}}}=e,a=Md(t).pipe($r((e=>{if(!(o!==ye.Computer||null!=e&&e.audio)){const{encodeInitStatus:r,decodeInitStatus:o}=BI(t.value,e);return Nd("audio",r,o).pipe(uo((([e,t])=>e&&t)),To((()=>{(PI()?Nr(co(Xr(document,"click").pipe(mo(1)),Xr(document,"touchend").pipe(mo(1)))):Promise.resolve(!0)).then((()=>{jI(WI,t.value),DI(xI,t.value)}));const{audio:{locallyMutedAudioList:e,localUserAudioVolumeList:r,isStopAllImcomingAudio:o}}=t.value;e.length>0&&e.forEach((e=>{xI.muteOrUnmuteOtherAudio(e,!0)})),r.length>0&&r.forEach((e=>{xI.adjustOtherAudioVolume(e.userId,e.volume)})),o&&xI.stopAllIncomingAudio(!0)})),Ur((()=>rS(void 0))))}return o===ye.Phone?(n&&WI.mute(i,!0),br([rS(void 0),oS(void 0)])):or})));return $a(Vi,s),no(Cr(j_(s)),a)}))),epics9:(e,t)=>Ev(e,7952).pipe(Ao((e=>Ka(yi,1).pipe(Ro(t),To((([,t])=>{const{BindStatus:r,nOperatorUserId:o}=e.payload.body,n=t.participants.attendeesList.find((e=>e.userId===o));!0===r&&$a(Di,{operatorName:null==n?void 0:n.displayName,operatorUserId:o,operatorRole:null==n?void 0:n.userRole})})),$r((()=>or)))))),epics10:(e,t)=>bv(e,L.UserGrantCaptureAudio).pipe(Ro(t),$r((([e,t])=>{const r=Tu(t);var o;(o=r,(null==o?void 0:o.audio)===ye.Computer?Promise.resolve():qa({event:Do,operations:[uo((e=>void 0!==e.audio&&""!==e.audio)),mo(1)]},(({audio:e})=>e===ye.Phone||e===ye.Computer))).then((()=>{$a(fi)}));const{meeting:{isCurrentUserMutedBeforeReset:n},audio:{isAllowToTalk:i,activeMicrophone:s,isUsingMediaPlayback:a}}=t,{payload:{data:u}}=e,d=[W_(!0)];return r&&(!0===r.muted&&!1===i&&(d.push(yI(V.Inherited)),WI.mute(r.userId,!0)),(!0===n||HI(t))&&(d.push(yI(V.Inherited)),WI.mute(r.userId,!0)),void 0!==n&&d.push(oS(void 0)),!a&&u&&s!==u&&d.push(q_(u))),br(d)}))),epics11:e=>bv(e,L.AudioCaptureFailed).pipe(To((e=>{const{payload:{data:t}}=e;$a(wi,t)})),Ur((()=>x_(!0)))),epics12:e=>bv(e,L.AudioWebsocketBroken).pipe(To((()=>{$a(Ni)})),$r((()=>or))),epics13:(e,t)=>bv(e,L.AudioZeroData).pipe(Ro(t),C_((([,e])=>{const{audio:{webrtcRestartCount:t,activeMicrophone:r}}=e;if(t<3)return xI.restoreWebRTC(r),$_(t+1)}))),epics14:(e,t)=>e.pipe(BS(`${J_}`),uo((e=>!1===e.payload)),$r((()=>($a(Mi),Qd().pipe(To((()=>{jI(WI,t.value),DI(xI,t.value)})),Ur((()=>J_(!0)))))))),epics15:(e,t)=>bv(e,[L.JoinComputerAudioComplete,L.JoinSharingAudioComplete,L.LeaveComputerAudioComplete,L.LeaveSharingAudioComplete]).pipe(To((e=>{Hd.completeAudioAction();const{payload:{type:r}}=e;if(r===L.JoinComputerAudioComplete){const e=Tu(t.value);(null==e?void 0:e.audio)===ye.Computer&&(e.muted?xI.muteAudio():xI.unmuteAudio());const r=Nu(t.value).filter((t=>!!t.audioShare&&t.userId!==(null==e?void 0:e.userId)));r.length&&r.forEach((e=>{xI.setSharingAudioVolume(e.userId,!1,!1,!0)}))}})),$r((()=>or))),epics16:(e,t)=>bv(e,L.AudioQosData).pipe(Ro(t),Ur((([e,t])=>{var r,o;const{meeting:{isWebinar:n},media:{audioEncodeStatus:i,audioDecodeStatus:s},participants:{xmppAttendeeList:a,allowTalkAttendeesList:u}}=t,d=Tu(t),c=ku(t);let l=c.length>0,p=c.some($I);n&&(l=l||Boolean(a.length),p=p||u.some($I));const h=(null==d?void 0:d.audio)===ye.Computer&&"success"===i&&!(null!=d&&d.muted)&&(l||(null===(r=t.recording)||void 0===r?void 0:r.cmrStatus)===yn.Start),m=(null==d?void 0:d.audio)===ye.Computer&&"success"===s&&l&&p;return null!==(o=e.payload.data)&&void 0!==o&&o.encoding?h?($a(Ui,e.payload),sI(e.payload)):sI(ce):m?($a(Ui,e.payload),aI(e.payload)):aI(ce)}))),epics17:(e,t)=>Ev(e,Rv).pipe(Ro(t),uo((([e,t])=>{const{payload:{body:r}}=e,{audio:{locallyMutedAudioList:o,localUserAudioVolumeList:n}}=t;return(o.length>0||n.length>0)&&(null==r?void 0:r.remove)&&r.remove.length>0})),$r((([e,t])=>{const{payload:{body:{remove:r}}}=e,{audio:{locallyMutedAudioList:o,localUserAudioVolumeList:n}}=t,i=o.concat(n.map((e=>e.userId))).filter((e=>-1!==r.indexOf((t=>t.id===e))));return i.length>0?(i.forEach((e=>{xI.muteOrUnmuteOtherAudio(e,!1)})),br(i.map((e=>[dI(e),lI({userId:e})])).flat())):or}))),epics18:(e,t)=>bv(e,L.HidStatusMute).pipe($r((e=>{const{payload:{data:r}}=e,o=t.value,{meeting:{userId:n,mediaFeatureOptions:i},audio:{isShareAudioEnabled:s,bCanUnmute:a}}=o,u=[];if(r)s&&!ju.isSupportOpenMicWhenShareAudio(i||"")&&u.push(X_(!0)),u.push(yI(V.Active)),WI.mute(n,!0);else if(!s||ju.isSupportOpenMicWhenShareAudio(i||"")){s&&u.push(X_(!1));const e=Tu(o);(a||null!=e&&e.isHost||null!=e&&e.bCoHost)&&(u.push(EI(B.Active)),WI.mute(n,!1))}return br(u)}))),epics19:e=>Ev(e,12040).pipe(To((e=>{const{payload:{body:{mode:t}}}=e;xI.setAudioCodecMode(t)})),$r((()=>or))),epics20:(e,t)=>bv(e,[L.AudioSpeakerSetSuccess,L.JoinComputerAudioComplete,L.AudioSpeakerSetError]).pipe($r((e=>{const{payload:{data:r,type:o}}=e,{audio:{activeSpeaker:n,activeMicrophone:i,isUsingMediaPlayback:s}}=t.value,a=[];return o===L.AudioSpeakerSetSuccess&&n!==r?a.push(K_(r)):!s&&o===L.JoinComputerAudioComplete&&null!=r&&r.microphoneDeviceId&&i!==r.microphoneDeviceId&&a.push(q_(r.microphoneDeviceId)),o===L.AudioSpeakerSetSuccess?$a(Bi,!0):o===L.AudioSpeakerSetError&&$a(Bi,!1),br(a)}))),epics21:(e,t)=>bv(e,L.AudioLevelIndicator).pipe(uo((()=>{const e=Tu(t.value);return!!e&&e.audio===ye.Computer&&!e.muted})),To((e=>{const{payload:{data:t}}=e;$a(xi,{level:t.value})})),$r((()=>or))),epics22:(e,t)=>bv(e,L.WorkletProcessExceptions).pipe(uo((e=>!!e.payload.data)),$r((()=>{const e=Tu(t.value),r=[];return(null==e?void 0:e.audio)===ye.Computer&&(xI.leaveComputerAudio(),WI.joinOrLeaveVoip(!1),r.push(II(H.EndedBySystem)),r.push($_(0))),br(r)}))),epics23:(e,t)=>bv(e,L.RecaptureAudio).pipe(uo((()=>{const e=Tu(t.value);return(null==e?void 0:e.audio)===ye.Computer&&!t.value.audio.isUsingMediaPlayback})),$r((()=>(Yd(xI,t.value),or)))),epics24:(e,t)=>bv(e,L.SpeakingWhenMute).pipe(uo((()=>{const e=Tu(t.value);return(null==e?void 0:e.audio)===ye.Computer&&!!e.muted})),To((()=>{$a($i)})),go())},JA=yv(KA,{shareAudioEpics0:(e,t)=>Av(e,Rv).pipe(uo((e=>{const t=e.payload.body.update;return t&&t.length>0&&t.findIndex((e=>void 0!==e.bShareOn))>-1})),Ro(t),$r((([e,t])=>{const{payload:{body:{update:r}}}=e,{audio:{localShareAudioUserMutedList:o}}=t,n=r.filter((e=>!0===e.bShareOn&&!0===e.bShareAudioOn)),i=[];return n.length>0&&n.forEach((e=>{-1===o.findIndex((t=>t.userId===e.id))&&i.push(eI({userId:e.id,isFromMainSession:!!e.bShareToBORooms}))})),br(i)}))),shareAudioEpics1:(e,t)=>bv(e,L.SharingDesktopStreamHaveAudio).pipe(uo((()=>!t.value.audio.secondaryAudioMicrophoneId)),Ao((()=>Ev(e,Rv).pipe(uo((e=>{var r;const{payload:{body:o}}=e,{meeting:{userId:n}}=t.value;return(null==o||null===(r=o.update)||void 0===r?void 0:r.findIndex((e=>e.id===n&&!0===e.bShareOn)))>-1})),mo(1),R_((async()=>{const e=t.value;return await MI(FA,jA,e)})),Io(oI(!0)))))),shareAudioEpics2:(e,t)=>bv(e,L.SharingDesktopStreamHaveNoAudio).pipe(Ro(t),uo((([,e])=>{var t;return!0===(null===(t=e.audio)||void 0===t?void 0:t.isShareAudioEnabled)})),R_((async([,e])=>await NI(FA,jA,e)))),shareAudioEpics3:(e,t)=>Ev(e,Rv).pipe(Ro(t),uo((([,e])=>e.socket.zoomSocketStatus===N_.Connected&&!0===e.audio.isSharingAudio&&!ju.isSupportOpenMicWhenShareAudio(e.meeting.mediaFeatureOptions||""))),$r((([e,r])=>{var o;if(null!==(o=e.payload.body.update)&&void 0!==o&&o.some((e=>void 0!==e.audio||void 0!==e.muted))){const{meeting:{userId:o}}=r,n=e.payload.body.update.filter((e=>e.id===o));return Md(t).pipe($r((e=>{const t=[];return n.findIndex((e=>e.audio===ye.Computer))>-1&&(null==e?void 0:e.audio)!==ye.Computer&&(jA.mute(o,!0),t.push(rI(!0)),t.push(X_(!0)),t.push(yI(V.SharingAudio))),br(t)})))}return or}))),shareAudioEpics4:(e,t)=>e.pipe(BS(`${YI}`),_r(Xt),Ro(t),uo((([,e])=>{var t;return!0===(null===(t=e.audio)||void 0===t?void 0:t.isShareAudioEnabled)})),R_((async([e,t])=>{const{payload:r}=e,{audio:{isShareAudioMuted:o,isSharingAudio:n}}=t,i=[];if(r===z.End){const e=await NI(FA,jA,t);i.push(...e)}else if(r===z.Paused){if(!1===o&&!0===n){await FA.leaveSharingAudio(!0),i.push(iI(!1));const e=await wI(jA,t);i.push(...e),setTimeout((()=>{$a(ki,{state:"off"})}),0)}}else if(r===z.Sharing&&!1===o&&!1===n){const e=await MI(FA,jA,t);i.push(...e)}return i}))),shareAudioEpics5:(e,t)=>bv(e,L.SharingDesktopStreamHaveAudio).pipe(uo((()=>!!t.value.audio.secondaryAudioMicrophoneId)),To((()=>{const{audio:{audioSsrc:e,secondaryAudioMicrophoneId:r,isWebRtcAudioCapable:o}}=t.value;FA.joinSharingAudio({ssrc:e,microphoneDeviceId:r,speakerDeviceId:null,isCaptureAudio:!0,audioBridge:o}),$a(Hi)})),$r((()=>or))),shareAudioEpics6:(e,t)=>Ev(e,Rv).pipe(uo((e=>{const{payload:{body:t}}=e;return!!t.update&&t.update.some((e=>void 0!==e.audioShare))})),$r((e=>{const{meeting:{userId:r}}=t.value;return e.payload.body.update.filter((e=>void 0!==e.audioShare&&e.id!==r)).forEach((e=>{FA.setSharingAudioVolume(e.id,!e.audioShare,!1,!0)})),or})))},{audioBridgEpics0:e=>Ev(e,4299).pipe(To((e=>{const{payload:t}=e;xA.passThroughRWGMessage(t)})),go()),audioBridgEpics1:e=>bv(e,L.AudioBridgeReconnectStart).pipe($r((()=>(WA.joinOrLeaveVoip(!1),br([fI(!0),II(H.Failover)]))))),audioBridgEpics2:(e,t)=>Ev(e,Rv).pipe(uo((e=>{var r,o;return t.value.audio.isWebRtcAudioCapable&&((null===(r=e.payload.body.update)||void 0===r?void 0:r.some((e=>void 0!==e.muted)))||(null===(o=e.payload.body.remove)||void 0===o?void 0:o.length)>0)})),To((e=>{const{payload:{body:{update:t,remove:r}}}=e;xA.sendUserAudioStatus({update:(t||[]).filter((e=>void 0!==e.muted)).map((e=>({userId:e.id,muted:e.muted}))),remove:(r||[]).map((e=>({userId:e.id})))})})),go()),audioBridgEpics3:(e,t)=>Ev(e,16129).pipe(uo((e=>{const{payload:{body:{bVideoOn:r}}}=e,{audio:{isWebRtcAudioCapable:o}}=t.value;return o&&!!r})),To((e=>{const{payload:{body:{id:t}}}=e;xA.changeActiveVideoSsrc(t)})),$r((()=>or))),audioBridgEpics4:(e,t)=>bv(e,L.AudioStreamFailed).pipe($r((e=>{const{payload:{data:r}}=e,o=Tu(t.value),n=[];return(null==o?void 0:o.audio)===ye.Computer&&(xA.leaveComputerAudio(),PI()||C.isIOSMobile||r===Ne.PermissionReset?(WA.joinOrLeaveVoip(!1),n.push(II(H.EndedBySystem)),n.push($_(0))):DI(xA,t.value)),br(n)}))),audioBridgEpics5:(e,t)=>bv(e,L.AudioBridgeSocketConnectionError).pipe($r((()=>{const e=Tu(t.value),r=[];return(null==e?void 0:e.audio)===ye.Computer&&(xA.leaveComputerAudio(),WA.joinOrLeaveVoip(!1),r.push(II(H.EndedBySystem)),r.push($_(0))),br(r)}))),audioBridgEpics6:(e,t)=>e.pipe(BS(`${Ql}`),uo((()=>!!t.value.meeting.zlkJwtToken)),Ur((e=>{const r=e.payload,{meeting:{zlkJwtToken:o,mediaFeatureOptions:n,meetingId:i}}=t.value;let s;if(o){const{enforce_web_rtc_audio:e,audio_compatible_mode:t,audio_webrtc_mode:r}=Ad(o);void 0===e&&void 0===t&&void 0===r||(s=Number(void 0!==r?r:void 0!==t?t:e))}const a=1===Ay.get(by.VideoSDKWebRTCAudioFallbackWasm),u=ju.getWebRtcAudioMode(null!=n?n:"",i,s,r);return TI({isWebRtcAudioCapable:!a&&!!(u&Le.WebRTCAudio),webRtcAudioMode:u})})))},qA),QA=E_.createAgent(),YA=NE(ju.getInstance()),ZA=E_.createAgent(),XA=NE(ju.getInstance()),eb=E_.createAgent(),tb=NE(ju.getInstance()),rb={isWebrtcVideoCapable:!1,videoSsrc:0,cameraDevicesList:[],activeCamera:C.isAndroidOrIOSBrowser?te.User:"default",activeVideoId:0,isCurrentUserStartedVideo:!1,spotlightUserList:[],isCaptureForbidden:!1,isMirrored:!1,receivedVideoMaxQuality:navigator.hardwareConcurrency>=8?q.Video_1080P:q.Video_360P,subscribedVideoList:[],renderedVideoList:[],ensuredCanvas:[],isVideoMuted:!1,isCaptureCameraLoading:!1,isCameraTaken:!1,isUsingMediaPlayback:!1,receivedVideoDimension:{width:0,height:0},capturedVideoDimension:{width:0,height:0},isFollowHostVideoLayout:!1,hostDragLayout:[],isSupportHDVideo:!1,miniRwgOptionValue:0,bCanUnmuteVideo:!1,virtualBackground:{isVBConfigured:!1,isVBPreloadReady:void 0,imageSrc:void 0,cropped:void 0},mask:{imageSrc:void 0,cropped:void 0,clip:void 0},backgroundMode:fe.Null,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0}},hardwareAcceleration:{encode:void 0,decode:void 0},networkQuality:{},ptz:{},currentCameraControlStatus:{isRequested:!1,isInControl:!1,isCameraMoving:!1},farEndCameraControlStatus:{controlledUserList:[],isControlling:!1},subscriptionStatus:{encode:!1,decode:!1,detailed:!1},videoAttachments:{},rendererType:Oe.WebGL,selfPreviewVideoList:[],webrtcStatistic:{}},ob=zc({[`${Kc}`]:sy(((e,{payload:t})=>{e.videoSsrc=t})),[`${Qc}`]:sy(((e,{payload:t})=>{e.cameraDevicesList=t})),[`${Yc}`]:sy(((e,{payload:t})=>{const r=e.activeCamera;if(r in e.ptz){const t=e.ptz[r];["pan","tilt","zoom"].forEach((e=>{t[e]&&(t[e].value=0)}))}e.activeCamera=t})),[`${Jc}`]:sy(((e,{payload:t})=>{e.activeVideoId=t.userId})),[`${Zc}`]:sy(((e,{payload:t})=>{e.isCurrentUserStartedVideo=t})),[`${Xc}`]:sy(((e,{payload:t})=>{e.spotlightUserList=t})),[`${el}`]:sy(((e,{payload:t})=>{e.isCaptureForbidden=t})),[`${tl}`]:sy(((e,{payload:t})=>{e.receivedVideoMaxQuality=t})),[`${rl}`]:sy(((e,{payload:t})=>{e.isVideoMuted=t})),[`${ol}`]:sy(((e,{payload:t})=>{e.isCaptureCameraLoading=t})),[`${nl}`]:sy(((e,{payload:t})=>{e.isCameraTaken=t})),[`${sl}`]:sy(((e,{payload:t})=>{e.receivedVideoDimension=t})),[`${al}`]:sy(((e,{payload:t})=>{e.subscribedVideoList.includes(t)||e.subscribedVideoList.push(t)})),[`${ul}`]:sy(((e,{payload:t})=>{const r=e.subscribedVideoList.indexOf(t);r>=0&&e.subscribedVideoList.splice(r,1)})),[`${ll}`]:sy(((e,{payload:t})=>{const r=e.renderedVideoList.find((e=>e.userId===t.userId&&e.key===t.key&&e.canvasId===t.canvasId));r?(void 0!==t.videoQuality&&(r.videoQuality=t.videoQuality),void 0!==t.aspectRatio&&(r.aspectRatio=t.aspectRatio)):e.renderedVideoList.push({...t})})),[`${pl}`]:sy(((e,{payload:t})=>{const r=e.renderedVideoList.findIndex((e=>e.userId===t.userId&&e.key===t.key&&e.canvasId===t.canvasId));r>=0&&e.renderedVideoList.splice(r,1)})),[`${dl}`]:sy(((e,{payload:t})=>{e.isFollowHostVideoLayout=t})),[`${cl}`]:sy(((e,{payload:t})=>{e.hostDragLayout=t})),[`${hl}`]:sy(((e,{payload:t})=>{e.isSupportHDVideo=t})),[`${ml}`]:sy(((e,{payload:t})=>{e.bCanUnmuteVideo=t})),[`${gl}`]:sy(((e,{payload:t})=>{e.virtualBackground.isVBPreloadReady=t})),[`${Sl}`]:sy(((e,{payload:t})=>{e.virtualBackground.isVBConfigured=t})),[`${vl}`]:sy(((e,{payload:t})=>{e.virtualBackground.imageSrc=t.imageUrl,e.virtualBackground.cropped=t.cropped,void 0===t.imageUrl?e.backgroundMode=fe.Null:e.backgroundMode=fe.VirtualBackground})),[`${El}`]:sy(((e,{payload:t})=>{const{encode:r,decode:o}=t;void 0!==r&&(e.hardwareAcceleration.encode=r),void 0!==o&&(e.hardwareAcceleration.decode=o)})),[`${fl}`]:sy(((e,{payload:t})=>{const{data:{encoding:r,rate:o,...n}}=t;e.statistic.encode={bitrate:o,...n}})),[`${yl}`]:sy(((e,{payload:t})=>{const{data:{encoding:r,rate:o,...n}}=t;e.statistic.decode={bitrate:o,...n}})),[`${_l}`]:sy(((e,{payload:t})=>{const{cameraId:r,captureWidth:o,captureHeight:n,videoElement:i,originalRatio:s,ptz:a,hd:u,fullHd:d,mediaFile:c,fps:l,mirrored:p,customVideoConstraints:h}=t;e.activeCamera=r,e.customizedVideoOption={captureWidth:o,captureHeight:n,videoElement:i,originalRatio:s,ptz:a,hd:u,fullHd:d,fps:l,customVideoConstraints:h},fd(e.mediaPlaybackFile,c)||(e.mediaPlaybackFile=c,e.isUsingMediaPlayback=!(null==c||!c.url)),void 0!==p&&(e.isMirrored=!!p)})),[`${Il}`]:sy(((e,{payload:t})=>{const{userId:r,level:o,bwLevel:n,type:i}=t;if(Object.prototype.hasOwnProperty.call(e.networkQuality,`${r}`))e.networkQuality[`${r}`][`${i}`]={level:o,bwLevel:n};else{const t={[i]:{level:o,bwLevel:n}};Object.assign(e.networkQuality,{[`${r}`]:t})}})),[`${Al}`]:sy(((e,{payload:t})=>{const{deviceId:r,ptzRange:o}=t;if(Object.prototype.hasOwnProperty.call(e.ptz,r)){const t=e.ptz[r];t&&["pan","tilt","zoom"].forEach((e=>{const r=o[e];if(r){var n;const o=null===(n=t[e])||void 0===n?void 0:n.capability;o?Object.assign(o,{...r}):t[e]={capability:{...r},value:0}}}))}else Object.assign(e.ptz,{[r]:{pan:o.pan?{capability:{...o.pan},value:0}:null,tilt:o.tilt?{capability:{...o.tilt},value:0}:null,zoom:o.zoom?{capability:{...o.zoom},value:0}:null}})})),[`${bl}`]:sy(((e,{payload:t})=>{e.currentCameraControlStatus.isRequested=t})),[`${Cl}`]:sy(((e,{payload:t})=>{const{isInControl:r,userId:o}=t;e.currentCameraControlStatus.isInControl=r,e.currentCameraControlStatus.controllingUserId=o})),[`${Tl}`]:sy(((e,{payload:t})=>{e.farEndCameraControlStatus.controlledUserList.includes(t)||e.farEndCameraControlStatus.controlledUserList.push(t)})),[`${Rl}`]:sy(((e,{payload:t})=>{const r=e.farEndCameraControlStatus.controlledUserList.indexOf(t);-1!==r&&e.farEndCameraControlStatus.controlledUserList.splice(r,1)})),[`${Ol}`]:sy(((e,{payload:t})=>{e.currentCameraControlStatus.isCameraMoving="start"===t.cmd})),[`${Dl}`]:sy(((e,{payload:t})=>{const{constraints:r,deviceId:o}=t,n=e.ptz[o];["pan","tilt","zoom"].forEach((e=>{void 0!==r[e]&&(n[e].value=r[e])}))})),[`${wl}`]:sy(((e,{payload:t})=>{e.farEndCameraControlStatus.isControlling=t})),[`${Nl}`]:sy(((e,{payload:t})=>{e.networkQualityBroadcastTime=t})),[`${Ml}`]:sy(((e,{payload:t})=>{e.mask.isMaskConfigured=t})),[`${Ll}`]:sy(((e,{payload:t})=>{const{imageUrl:r,cropped:o,rootHeight:n,rootWidth:i,clip:s}=t;e.mask.imageSrc=r,e.mask.cropped=o,e.mask.clip=s,e.mask.rootWidth=i,e.mask.rootHeight=n,e.backgroundMode=fe.Mask})),[`${Pl}`]:sy(((e,{payload:t})=>{e.backgroundMode=t})),[`${kl}`]:sy(((e,{payload:t})=>{e.capturedVideoDimension=t})),[`${Ul}`]:sy(((e,{payload:t})=>{e.ensuredCanvas.includes(t)||e.ensuredCanvas.push(t)})),[`${Vl}`]:sy(((e,{payload:t})=>{e.mediaPlaybackFile=t,e.isUsingMediaPlayback=!(null==t||!t.url)})),[`${Bl}`]:sy(((e,{payload:t})=>{if(t){const{lastCopy:r,...o}=t;e.prefetchedVideo=o}else e.prefetchedVideo=t})),[`${Hl}`]:sy(((e,{payload:t})=>{Object.assign(e.subscriptionStatus,t)})),[`${jl}`]:sy(((e,{payload:t})=>{e.miniRwgOptionValue=t})),[`${Fl}`]:sy(((e,{payload:t})=>{const{userId:r,element:o}=t,n=nc(o),i=e.videoAttachments[`${r}`];if(i){const e=mf(i),t=null==e?void 0:e.findIndex((e=>uc(e,o)));-1!==t&&void 0!==t||i.push(n)}else{const t=[n];Object.assign(e.videoAttachments,{[`${r}`]:t})}})),[`${Wl}`]:sy(((e,{payload:t})=>{const{userId:r,element:o}=t,n=e.videoAttachments[`${r}`];if(!n)return;let i=o;if(Array.isArray(o)||(i=[o]),i.forEach((e=>{if(n){const t=mf(n),r=null==t?void 0:t.findIndex((t=>uc(t,e)));void 0!==r&&-1!==r&&n.splice(r,1)}})),n&&n.length>0){const t=ac(mf(n)||[]);e.videoAttachments[`${r}`]=t}})),[`${xl}`]:sy(((e,{payload:t})=>{t&&(e.rendererType=Oe.WebGL2)})),[`${$l}`]:sy(((e,{payload:t})=>{t&&(e.rendererType=Oe.WebGPU)})),[`${Gl}`]:sy(((e,{payload:t})=>{e.rendererType=t})),[`${zl}`]:sy(((e,{payload:t})=>{e.isMirrored=t})),[`${ql}`]:sy(((e,{payload:t})=>{e.selfPreviewVideoList.includes(t)||e.selfPreviewVideoList.push(t)})),[`${Kl}`]:sy(((e,{payload:t})=>{if(t){const r=e.selfPreviewVideoList.indexOf(t);r>=0&&e.selfPreviewVideoList.splice(r,1)}else e.selfPreviewVideoList=[]})),[`${Jl}`]:sy(((e,{payload:t})=>{e.leadershipUserId=t})),[`${Ql}`]:sy(((e,{payload:t})=>{e.isWebrtcVideoCapable=t})),[`${Yl}`]:sy((e=>{var t;null!==(t=e.customizedVideoOption)&&void 0!==t&&t.customVideoConstraints&&(e.customizedVideoOption.customVideoConstraints=void 0)})),[`${Zl}`]:sy(((e,{payload:t})=>{e.webrtcStatisticSubscription=t})),[`${Xl}`]:sy(((e,{payload:t})=>{e.webrtcStatistic=t})),[`${il}`]:(e,{payload:t})=>{const r={cameraDevicesList:e.cameraDevicesList};return t&&Object.assign(r,{activeCamera:e.activeCamera,customizedVideoOption:e.customizedVideoOption,virtualBackground:{imageSrc:e.virtualBackground.imageSrc,cropped:e.virtualBackground.cropped},mask:{imageSrc:e.mask.imageSrc,cropped:e.mask.cropped,rootWidth:e.mask.rootWidth,rootHeight:e.mask.rootHeight,clip:e.mask.clip},backgroundMode:e.backgroundMode,ptz:e.ptz,subscriptionStatus:e.subscriptionStatus,webrtcStatisticSubscription:e.webrtcStatisticSubscription,hardwareAcceleration:e.hardwareAcceleration}),{...rb,...r}}},rb),nb={cameraPtzEpics0:(e,t)=>Ev(e,8004).pipe($r((e=>{const{payload:{body:{nCmd:r,nUserID:o,nReason:n,nButtonID:i}}}=e,s=t.value,a=Nu(s),{video:{currentCameraControlStatus:{isInControl:u,controllingUserId:d},cameraDevicesList:c,activeCamera:l}}=s,p=a.find((e=>yd(e.userId,o))),h=[];if(h.push(bl(!0)),r===pe.Request){const e={userId:null==p?void 0:p.userId,displayName:null==p?void 0:p.displayName};if(u){const t=a.find((e=>e.userId===d));Object.assign(e,{currentControllingUserId:null==t?void 0:t.userId,currentControllingDisplayName:null==t?void 0:t.displayName})}$a(ei,e)}else if(r===pe.Approve)h.push(Tl(null==p?void 0:p.userId)),$a(ti,{isApproved:!0,userId:null==p?void 0:p.userId,displayName:null==p?void 0:p.displayName});else if(r===pe.Decline)h.push(Rl(null==p?void 0:p.userId)),$a(ti,{isApproved:!1,userId:null==p?void 0:p.userId,displayName:null==p?void 0:p.displayName,reason:n});else if(r===pe.GiveUp)h.push(Cl({isInControl:!1,userId:0})),$a(ri,{isControlled:!1});else if(r===pe.StartControl||r===pe.StopControl)h.push(Ol({cmd:r===pe.StartControl?"start":"stop",type:i}));else if(r===pe.SwitchCamera){const e=c.findIndex((e=>e.deviceId===l)),t=e+1===c.length?0:e+1;if(t!==e){const e=c[t].deviceId;tb.changeCamera(e,re.includes(e))}}return br(h)}))),cameraPtzEpics1:(e,t)=>Ev(e,Rv).pipe(uo((e=>{var t;const{payload:{body:r}}=e;return null==r||null===(t=r.update)||void 0===t?void 0:t.some((e=>void 0!==e.nFECC||void 0!==e.nFECCExecutive))})),Ur((e=>af(e.payload.body))),To((e=>{const{update:r}=e,o=null==r?void 0:r.find((e=>void 0!==e.nFECC||void 0!==e.nFECCExecutive));if(o){const{meeting:{userId:e}}=t.value;yd(o.nFECCExecutive,e)&&$a(oi,{userId:o.userId,ptz:Im(o.nFECC)})}})),$r((()=>or))),cameraPtzEpics2:(e,t)=>Ev(e,Rv).pipe(uo((e=>{var r;const{payload:{body:o}}=e,{video:{farEndCameraControlStatus:{controlledUserList:n}}}=t.value;return null==o||null===(r=o.remove)||void 0===r?void 0:r.some((e=>n.includes(e.id)))})),Ur((e=>af(e.payload.body))),$r((e=>{const{remove:r}=e,o=[],{video:{farEndCameraControlStatus:{controlledUserList:n}}}=t.value,i=null==r?void 0:r.find((e=>n.includes(e.userId)));return i&&o.push(Rl(i.userId)),br(o)}))),cameraPtzEpics3:(e,t)=>e.pipe(BS(`${Ol}`),Ao((e=>{const{payload:{cmd:r,type:o}}=e;return"start"===r?ro(0,200).pipe(Co((()=>!!t.value.video.currentCameraControlStatus.isCameraMoving)),$r((()=>{const{video:{ptz:e,activeCamera:r}}=t.value,n=e[r],i=_m(n)||{},{key:s,range:a}=Em(o,2);return n[s]?(Object.assign(i,{[s]:ym(n[s].capability,n[s].value,a)}),tb.movePTZCamera(i).then((()=>Dl({deviceId:r,constraints:i})))):Promise.resolve(void 0)})),$r((e=>"object"==typeof e&&void 0!==e.type?Cr(e):or))):or}))),cameraPtzEpics4:(e,t)=>e.pipe(BS(`${Yc}`),$r((e=>{const{payload:r}=e,{video:{customizedVideoOption:o,ptz:n}}=t.value;if(null!=o&&o.ptz){const e=null==n?void 0:n[r];void 0!==e&&eb.sendCameraAblity({pan:!!e.pan,tilt:!!e.tilt,zoom:!!e.zoom})}return or})))},ib={videoCaptureEpics0:(e,t)=>bv(e,L.StartVideoCaptureSuccess).pipe(R_((async e=>{const{video:{activeCamera:r,ptz:o,isCurrentUserStartedVideo:n,isUsingMediaPlayback:i},meeting:{userId:s}}=t.value,{payload:{data:{currentDeviceID:a,PTZRange:u,VideoSelectValue:d,usingFacingMode:c}}}=e,l=[],{cameras:p}=await Nr(Ld());if(p.length<1&&!i&&($a(Un,{reason:"Cannot detect camera devices"}),XA.stopCaptureVideo()),i||[r,a].some((e=>Sm(e,p)))){let e="";if(e=c?Array.isArray(d)&&d[0]?d[0]:d:a,n||ZA.muteAttendeeVideo(s,!1),$a(ii),i)l.push(Yc("default"));else if(e&&u&&l.push(Al({deviceId:e,ptzRange:u})),r!==e&&l.push(Yc(e)),Object.prototype.hasOwnProperty.call(o,e)){const t=o[e];if(t){const e=_m(t);e&&XA.movePTZCamera(e)}}}else $a(Vn,{reason:"cannot find target camera"}),XA.stopCaptureVideo();return l}))),videoCaptureEpics1:(e,t)=>Ev(e,Rv).pipe(uo((e=>{const{payload:{body:{update:r}}}=e,{meeting:{userId:o}}=t.value;return null==r?void 0:r.some((e=>e.id===o&&void 0!==e.bVideoOn))})),Ur((e=>af(e.payload.body))),$r((e=>{const{update:r}=e,{meeting:{userId:o}}=t.value,n=null==r?void 0:r.find((e=>e.userId===o));return n?(!0===n.bVideoOn?$a(Wn):$a(xn),br([Zc(!!n.bVideoOn)])):or}))),videoCaptureEpics2:e=>bv(e,[L.UserForbiddedCaptureVideo,L.UserCameraIsTakenByOtherPrograms,L.VideoWebsocketBroken,L.StopVideoCaptureFailed]).pipe($r((e=>{const{payload:{type:t,data:r}}=e,o=[];switch(t){case L.UserForbiddedCaptureVideo:$a(Bn,r),o.push(el(!0));break;case L.UserCameraIsTakenByOtherPrograms:$a(Hn,{reason:"User camera is taken by other programs.",...null!=r?r:{}}),o.push(nl(!0));break;case L.VideoWebsocketBroken:$a(Fn,{reason:"Video websocket broken."});break;case L.StopVideoCaptureFailed:$a(xn,{failed:!0,reason:"Unknown."})}return br(o)}))),videoCaptureEpics3:(e,t)=>bv(e,L.StopVideoCaptureSuccess).pipe(Ro(t),Ur((([,e])=>{const{meeting:{userId:t},video:{isCurrentUserStartedVideo:r}}=e;return r||$a(xn),ZA.muteAttendeeVideo(t,!0),ol(!1)}))),videoCaptureEpics4:(e,t)=>Ev(e,16133).pipe(Ro(t),uo((([e,t])=>{var r;return(null==e||null===(r=e.payload)||void 0===r||null===(r=r.body)||void 0===r?void 0:r.id)===t.meeting.userId})),C_((([e])=>{const{id:t,bVideoMute:r}=e.payload.body;return $a(Mn,{id:t,isVideoMuted:r}),!0===r&&XA.stopCaptureVideo(),!1===r&&$a(Pn,{id:t,isVideoMuted:r}),rl(r)}))),videoCaptureEpics5:(e,t)=>Ev(e,16131).pipe(uo((e=>void 0!==e.payload.body.ssrc)),Ao((e=>{const{payload:{body:{ssrc:r}}}=e;return $a(ai,r),no(Cr(Kc(r)),Md(t).pipe($r((e=>{const{meeting:{isCurrentUserStartVideoBeforeReset:r},media:{videoEncodeStatus:o}}=t.value;return!0!==(null==e?void 0:e.bVideoOn)&&!0===r?Nd("video",o,"success").pipe(uo((([e,t])=>e&&t)),Ur((()=>{const e=t.value,{video:{backgroundMode:r,mask:o,virtualBackground:n,activeCamera:i,customizedVideoOption:s}}=e;let a=Promise.resolve(!0);return r===fe.VirtualBackground&&n.imageSrc?a=Pm({imageUrl:n.imageSrc,cropped:n.cropped},XA,e):r===fe.Mask&&o.imageSrc&&o.clip&&(a=Lm({imageUrl:o.imageSrc,cropped:o.cropped,clip:o.clip,rootHeight:o.rootHeight,rootWidth:o.rootWidth},XA,e)),a.then((()=>{fm(XA,e,{cameraId:i,...s})})),sS(void 0)}))):or}))))}))),videoCaptureEpics6:(e,t)=>e.pipe(BS(`${Qc}`),$r((async e=>{const{payload:r}=e,o=t.value,{meeting:{userId:n}}=o;await Pd("video",o);const i=Tu(o);0===r.length?i&&!i.bVideoConnect||ZA.connectCamera(n,!1):null!=i&&i.bVideoConnect||ZA.connectCamera(n,!0)})),go()),videoCaptureEpics7:e=>bv(e,L.InitSuccessVideo).pipe(uo((e=>!C.isIPad&&C.isAndroidOrIOSBrowser&&e.payload.data===k.EncodeSuccess)),Ao((()=>tc().pipe(To((e=>{XA.setMobileRotateMode(e)})),go())))),videoCaptureEpics8:e=>bv(e,L.StartVideoCaptureSuccess).pipe(uo((()=>!C.isIPad&&C.isAndroidOrIOSBrowser)),To((()=>{XA.setMobileRotateMode(ec())})),yo(or)),videoCaptureEpics9:(e,t)=>bv(e,L.VideoStreamFailed).pipe(uo((()=>!!t.value.video.isCurrentUserStartedVideo&&C.isIOSMobile)),To((()=>{XA.stopCaptureVideo()})),$r((()=>or))),videoCaptureEpics10:e=>Ev(e,24322).pipe(To((e=>{const{payload:t}=e;XA.passThroughRWGMessage(t)})),$r((()=>or)))},sb={videoRenderEpics0:(e,t)=>Ev(e,16129).pipe(Ur((e=>{const{payload:{body:{id:r,bVideoOn:o}}}=e,{meeting:{isUseWBVideo:n}}=t.value,i=hm(r);return $a(Nn,{bVideoOn:o,userId:i}),n&&YA.prefetchVideoSsrc(r),Jc({bVideoOn:o,userId:i})}))),videoRenderEpics1:e=>bv(e,L.VideoDecodeMaxSize).pipe(uo((e=>{var t;return null==e||null===(t=e.payload)||void 0===t?void 0:t.data})),Ur((({payload:{data:{size:e}}})=>tl(e)))),videoRenderEpics2:e=>Ev(e,16135).pipe($r((e=>{const{payload:{body:{bLeadershipOn:t,id:r}}}=e,o=[],n=[],i=t?hm(r):0;return t&&n.push(i),o.push(Xc(n),Jl(i)),co(Ka($n,1),ro(2e3).pipe(Ur((()=>({leadershipEventOnly:!0}))))).pipe($r((e=>{const{spotlightList:r,leadershipEventOnly:o}=e||{};return t?!r||1===r.length&&n[0]===r[0]||$a(di,{spotlightList:r}):(o||0===(null==r?void 0:r.length))&&$a(di,{spotlightList:[]}),or})),Io(...o))}))),videoRenderEpics3:(e,t)=>Ev(e,7958).pipe(Ro(t),Ur((([e,t])=>{const{payload:{body:r}}=e;let o=[];r&&r.group_list&&r.group_list[0]&&(o=r.group_list[0].map((e=>e.id)));const n=Nu(t);return n.length>0&&(o=o.filter((e=>n.findIndex((t=>t.userId===e))>=0))),$a($n,{spotlightList:o}),Xc(o)}))),videoRenderEpics4:e=>bv(e,[L.CurrentVideoResolution,L.CurrentCaptureVideoWidthHeight]).pipe(uo((e=>!!e.payload.data)),Ur((e=>{const{payload:{data:t,type:r}}=e;return r===L.CurrentVideoResolution?($a(Ln,t),sl(t)):($a(kn,t),kl(t))}))),videoRenderEpics5:e=>Ev(e,Ov).pipe(uo((e=>{const{payload:{body:t}}=e;return["bFollowHostVideo","VideoHd","bCanUnmuteVideo"].some((e=>void 0!==t[e]))})),Ur((e=>{const{payload:{body:{bFollowHostVideo:t,VideoHd:r,bCanUnmuteVideo:o}}}=e;if(void 0!==t)return $a(Gn,{bOn:t}),dl(t);if(void 0!==o)return ml(o);{const e=1===r;return YA.updateVideoHDValue(e),YA.enableHardwareAccelerationForVideoEncode(!1),hl(e)}}))),videoRenderEpics6:(e,t)=>Ev(e,7957).pipe(Ro(t),Ur((([e,t])=>{const{video:{isFollowHostVideoLayout:r}}=t,{payload:{body:o}}=e,n=o&&o.drag_list&&o.drag_list.map((e=>e.id));return r&&$a(zn,{layout:n}),cl(n)}))),videoRenderEpics7:(e,t)=>Ev(e,Rv).pipe(Ro(t),uo((([e,t])=>{const{meeting:{userId:r},video:{subscribedVideoList:o}}=t,n=e.payload.body.update,i=e.payload.body.remove;return n&&n.length>0&&n.findIndex((e=>e.id!==r&&(void 0!==e.bVideoOn||e.bHold)))>-1||i&&i.some((e=>o.includes(e.id)))})),To((([e,t])=>{const{payload:{body:{remove:r,update:o}}}=e,{video:{subscribedVideoList:n}}=t,i=wu(t);if(r&&r.length>0&&r.filter((e=>n.includes(e.id))).forEach((e=>{$a(Kn,{userId:e.id})})),o&&o.length>0){const e=o.filter((e=>void 0!==e.bVideoOn)).filter((e=>-1===i.findIndex((t=>t.userId===e.id)))),t=o.filter((e=>!0===e.bHold));t.length>0&&t.filter((e=>n.includes(e.id))).forEach((e=>{$a(Kn,{userId:e.id})})),e.forEach((e=>{e.bVideoOn?$a(qn,{userId:e.id}):n.includes(e.id)&&$a(Kn,{userId:e.id})}))}})),yo(or)),videoRenderEpics8:(e,t)=>bv(e,L.VideoQosData).pipe(Ro(t),Ur((([e,t])=>{var r,o;const{video:{isCaptureForbidden:n,isCameraTaken:i},media:{videoEncodeStatus:s,videoDecodeStatus:a}}=t,u=Tu(t),d=ku(t),c=d.length>0,l=(null==u?void 0:u.bVideoOn)&&!n&&!i,p=d.some((e=>e.bVideoOn)),h="success"===s&&l&&(c||(null===(r=t.recording)||void 0===r?void 0:r.cmrStatus)===yn.Start),m="success"===a&&c&&p;return null!==(o=e.payload.data)&&void 0!==o&&o.encoding?h?($a(Yn,e.payload),fl(e.payload)):fl(le):m?($a(Yn,e.payload),yl(e.payload)):yl(le)}))),videoRenderEpics9:(e,t)=>bv(e,[L.CurrentDecodeVideoQuality,L.CurrentDecodeVideoFps]).pipe(To((e=>{const{payload:{type:r,data:o}}=e,{video:{subscriptionStatus:n}}=t.value;if(n.detailed)if(r===L.CurrentDecodeVideoQuality){const{ssrc:e,width:t,height:r,quality:n}=o;$a(Zn,{userId:e,width:t,height:r,quality:n})}else if(r===L.CurrentDecodeVideoFps){const{ssrc:e,fps:t}=o;$a(Zn,{userId:e,fps:t})}})),go()),videoRenderEpics10:e=>bv(e,[L.NotSupportExternalCanvasInVTagRenderer]).pipe(To((()=>{console.error("Hardware acceleration disabled: Use attachVideo method to render the video.")})),go()),videoRenderEpics11:(e,t)=>bv(e,[L.NetworkQualityChange,L.NetworkQualityChangeAudio,L.NetworkQualityChangeSharing]).pipe(uo((e=>!!e.payload.data)),$r((e=>{const{payload:{data:{bwLevel:r,isUplink:o,networkLevel:n,mediaType:i}}}=e,s=[],{meeting:{userId:a},video:{networkQuality:u,subscribedVideoList:d,networkQualityBroadcastTime:c}}=t.value,l=o?"uplink":"downlink";if(3===i)QA.broadcastUserNetworkQuality({isUplink:o,level:n,bwLevel:r,mediaType:i});else{var p;s.push(Il({userId:a,level:n,bwLevel:r,type:l}));const e=fd(null===(p=u[`${a}`])||void 0===p?void 0:p[l],{level:n,bwLevel:r});if(!e&&-1!==n){(!o&&d.filter((e=>e!==a)).length>0||o)&&$a(Xn,{userId:a,type:l,level:n})}if(o){const t=performance.now();(!e||t-(null!=c?c:0)>3e4)&&(QA.broadcastUserNetworkQuality({isUplink:o,level:n,bwLevel:r,mediaType:i}),s.push(Nl(t)))}}return br(s)}))),videoRenderEpics12:(e,t)=>Av(e,8005).pipe(uo((e=>{var t;return!(null===(t=e.payload.body)||void 0===t||!t.nUserID)})),$r((e=>{const{payload:{body:{nLevel:r,nUserID:o,mediaType:n}}}=e,{video:{networkQuality:i}}=t.value,s=i[`${o}`],a=[];return 3===n||s&&s.uplink.level===r||($a(Xn,{userId:o,level:r,type:"uplink"}),a.push(Il({userId:o,level:r,type:"uplink"}))),br(a)}))),videoRenderEpics13:(e,t)=>Ev(e,Rv).pipe(uo((e=>{const{payload:{body:r}}=e,{video:{prefetchedVideo:o}}=t.value;return(null==o?void 0:o.userId)&&(r.update||r.remove)})),$r((e=>{const{payload:{body:r}}=e,o=[],{video:{prefetchedVideo:n}}=t.value;let i=!1;return r.remove&&(i=-1!==r.remove.findIndex((e=>e.id===(null==n?void 0:n.userId)))),r.update&&(i=-1!==r.update.findIndex((e=>e.id===(null==n?void 0:n.userId)&&!1===e.bVideoOn))),i&&n&&(n.loaded||YA.cancelPrefetchVideoSsrc(n.userId),YA.unsubscribeVideo(n.userId),o.push(Bl(void 0))),br(o)}))),videoRenderEpics14:(e,t)=>e.pipe(BS(`${Bl}`),uo((e=>!!e.payload)),To((e=>{const{payload:{lastCopy:r}}=e,{video:{prefetchedVideo:o}}=t.value;!o||r&&r.userId===o.userId||(null!=r&&r.userId&&(r.loaded&&YA.cancelPrefetchVideoSsrc(r.userId),YA.unsubscribeVideo(r.userId)),YA.subscribeVideo(o.userId,q.Video_360P,!1),YA.prefetchVideoSsrc(o.userId))})),yo(or)),videoRenderEpics15:(e,t)=>bv(e,L.NewActiveSpeakerFirstFrameCallback).pipe(uo((()=>!!t.value.video.prefetchedVideo)),$r((e=>{const{payload:{data:{ssrc:r}}}=e,{video:{prefetchedVideo:o}}=t.value,n=[];return o&&(yd(o.userId,r)?(n.push(Bl({userId:o.userId,loaded:!0,lastCopy:o})),$a(si,{userId:o.userId})):YA.unsubscribeVideo(o.userId)),br(n)}))),videoRenderEpics16:(e,t)=>Ev(e,16131).pipe(uo((e=>void 0!==e.payload.body.ssrc)),To((()=>{const{media:{videoDecodeStatus:e,videoEncodeStatus:r},video:{webrtcStatisticSubscription:o}}=t.value;o&&YA.subscribeWebRTCStatistics(!0,oe),Nd("video",r,e).subscribe((([e,r])=>{const{video:{subscriptionStatus:o}}=t.value;e&&o.encode&&YA.subscribeToQos([Hu.VideoEncode],oe),r&&(o.decode&&YA.subscribeToQos([Hu.VideoDecode],oe),o.detailed&&YA.enableVideoObserver(!0)),o.common&&YA.subscribeToQos([Hu.Common],oe)}))})),go()),videoRenderEpics17:(e,t)=>e.pipe(BS(`${ll}`,`${pl}`),uo((()=>{const e=t.value.video.renderedVideoList.length;return[0,1].includes(e)})),To((()=>{const{video:{renderedVideoList:e,subscriptionStatus:r}}=t.value,o=e.length;1===o?YA.enableVideoObserver(!0,null==r||!r.detailed):0===o&&YA.enableVideoObserver(!1)})),yo(or)),videoRenderEpics18:(e,t)=>bv(e,L.CurrentDecodeVideoQuality).pipe($r((e=>{const{payload:{data:r}}=e,{video:{renderedVideoList:o,videoAttachments:n}}=t.value,i=[],{ssrc:s,width:a,height:u}=r,d=u?a/u:0,c=o.filter((e=>yd(e.userId,s)));if(c.some((e=>e.aspectRatio&&Math.abs(e.aspectRatio-d)>.2))){const e=c.filter((e=>e.canvasId===ue));if(e.length>0){const e=n[`${s}`];if(e){const t=sc(e).map((e=>{if(e){const{clientWidth:t,clientHeight:r}=e;return r?t/r:0}return 0})).filter((e=>0!==e)),r=t.every((e=>Math.abs(e-d)<=.2));if(r)i.push(ll({userId:s,key:se,canvasId:ue,aspectRatio:d}));else{const e=t.length>0?t.reduce(((e,t)=>Math.abs(t-d)>Math.abs(e-d)?t:e),t[0]):t[0];i.push(ll({userId:s,key:se,canvasId:ue,aspectRatio:e}))}}}(e.length!==c.length||i.filter((e=>{var t;return(null===(t=e.payload)||void 0===t?void 0:t.aspectRatio)!==d})).length>0)&&$a(ui,{userId:s,aspectRatio:d})}return br(i)}))),videoRenderEpics19:(e,t)=>bv(e,L.SyncRendererTypeResponse).pipe($r((e=>{const{payload:{data:{rendererType:r}}}=e,{video:{rendererType:o}}=t.value,n=[];return o!==r&&n.push(Gl(r)),br(n)}))),videoRenderEpics20:(e,t)=>e.pipe(BS(`${Hg}`),uo((()=>!!t.value.meeting.zlkJwtToken||!!t.value.meeting.sign)),Ur((e=>{var r;const{payload:{mediaFeatureOptions:o,webMediaBlockConfig:n}}=e,{meeting:{zlkJwtToken:i,sign:s}}=t.value;let a=2;const u=i||s;if(u){const{video_webrtc_mode:e}=Ad(u);void 0!==e&&(a=Number(e))}const{shouldUseWebRTC:d,errNo:c}=ju.getWebRTCCapability(a,null!=o?o:"",null===(r=JSON.parse(n||"{}"))||void 0===r?void 0:r.WebRTCConfig);d||1!==a||console.warn(Ve[c]||"An error occurred with WebRTC Video.");const l=1===Ay.get(by.VideoSDKWebRTCVideoFallbackWasm);return Ql(d&&!l)}))),videoRenderEpics21:(e,t)=>e.pipe(BS(`${Fl}`),uo((e=>{const{payload:{userId:r}}=e,{meeting:{userId:o}}=t.value;return Am()&&r===o})),$r((e=>{const{payload:{element:r}}=e,{media:{alternativeNameForVideoPlayer:o},video:{isMirrored:n}}=t.value,i=`${null!=o?o:"video-player"}-container`;return l(r,i)?Promise.resolve({element:r,ret:!0}):n?Nr(to((e=>{const t=new MutationObserver(e);t.observe(document.body,{childList:!0,subtree:!0}),e.__observer=t}),(e=>{const t=e.__observer;null==t||t.disconnect()})).pipe(uo((()=>l(r,i))),bo(Ja(ro(5e3))),Ur((()=>({element:r,ret:!0}))))).catch((()=>({element:r,ret:!1}))):Promise.resolve({element:r,ret:!1})})),_r(Zt),To((e=>{const{element:r,ret:o}=e;var n;o&&vm(null==r||null===(n=r.render)||void 0===n?void 0:n.el,t.value.video.isMirrored)})),go()),videoRenderEpics22:e=>bv(e,L.MediaStatsLog).pipe(Ur((e=>{const{payload:{data:t}}=e;return $a(li,t),Xl(t)}))),videoRenderEpics23:e=>bv(e,L.CommonQosData).pipe(uo((e=>!!e.payload.data)),To((e=>{const{payload:{data:t}}=e;$a(pi,t)})),go())},ab=yv(sb,ib,{vbEpics0:e=>bv(e,[L.VbModelPreloadingOk,L.VbModelPreloading_3S,L.VbModelPreloading_10S,L.VbSettingParaError]).pipe($r((e=>{const{payload:{type:t,data:r}}=e,o=[];return[L.VbModelPreloadingOk,L.VbModelPreloading_3S,L.VbModelPreloading_10S].includes(t)?(o.push(gl(!0)),$a(Jn,!0),t===L.VbModelPreloading_10S&&console.warn("Virtual Background is taking longer than expected to load.")):t===L.VbSettingParaError&&(r===X.VBModelNotMatch?($a(Jn,!1),o.push(gl(!1))):($a(Qn,!1),o.push(Sl(!1)))),br(o)}))),vbEpics1:e=>bv(e,L.StartVideoStreamInVbSettingSuccess).pipe(Ur((()=>($a(Qn,!0),Sl(!0))))),vbEpics2:e=>bv(e,L.StartVideoStreamInMaskSettingSuccess).pipe(Ur((()=>($a(ni,!0),Ml(!0))))),vbEpics3:e=>bv(e,L.MaskSettingParaError).pipe(Ur((()=>($a(ni,!1),Ml(!1)))))},nb);let ub=null;const db=()=>ub;let cb=function(e){return e.VIDEO_ENCODE="0",e.VIDEO_DECODE="1",e.AUDIO_ENCODE="2",e.AUDIO_DECODE="3",e.SHARING_ENCODE="4",e.SHARING_DECODE="5",e}({}),lb=function(e){return e[e.NONE=0]="NONE",e[e.AES_256=1]="AES_256",e[e.AES_GCM=2]="AES_GCM",e}({});const pb=Object.freeze({RWG_CHAT:{gcmType:1,sessionType:"RWG_CHAT"},XMPP_CHAT:{gcmType:1,sessionType:"XMPP_CHAT"},CC_MESSAGE:{gcmType:3,sessionType:"CC_MESSAGE"},BO_BROADCAST:{gcmType:1,sessionType:"BO_BROADCAST"},CHAT_FILE:{gcmType:2,sessionType:"CHAT_FILE"},CHAT_FILE_INFO:{gcmType:1,sessionType:"CHAT_FILE_INFO"}}),hb=(window.crypto||window.msCrypto).subtle,mb=by.WebclientIVState,gb=Object.keys(pb).map((e=>pb[e].sessionType));class Sb{constructor(e,t,r){this.isGCMEnabled=void 0,this.gcmSessionKey=void 0,this.gcmMainSessionKey=void 0,this.zoomId=void 0,this.resetParameters(e,t,r),Ay.set(mb,{},_y.SessionStorage)}static init(e,t,r){this.instance?this.instance.resetParameters(e,t,r):this.instance=new Sb(e,t,r)}static destroy(){this.instance&&(this.instance=void 0)}resetParameters(e,t,r){this.isGCMEnabled=!(C.isIE||!C.isSupportEssentialAudioAndVideoAbility)&&r===lb.AES_GCM,this.gcmSessionKey=md(t),this.gcmMainSessionKey||(this.gcmMainSessionKey=this.gcmSessionKey),this.zoomId=String(e)}beginCrypto(e,t,r){const o=new Uint32Array(1);o[0]=9,o[0]+=Number(r);const n=new Uint8Array(o.buffer);let i=new Uint8Array(132);const s=md(t);return i.set(s,0),i.set(n,s.length),i=i.subarray(0,s.length+4),hb.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!0,["sign"]).then((e=>hb.sign({name:"HMAC"},e,i))).then((e=>hb.importKey("raw",e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])))}getNextIV(e){const t=Ay.get(mb);return void 0===t[e]?(t[e]=0,Ay.set(mb,t,_y.SessionStorage)):Ay.set(mb,(t=>({...t,[e]:t[e]+1})),_y.SessionStorage)}resetIVState(){const e=Ay.get(mb);if(void 0===e);else{const t=Object.keys(e).filter((e=>gb.indexOf(e)>-1));t.length>0&&(t.forEach((t=>{e[t]+=1e6})),Ay.set(mb,e,_y.SessionStorage))}}static resetIV(){if(void 0===this.instance)throw new Error("reset before intialize");this.instance.resetIVState()}static beginEncrypt({text:e,type:t}){const r=new Uint8Array(0);if(this.instance&&this.instance.isGCMEnabled){const o=16,n=12,i=this.instance.getNextIV(t.sessionType),s=new ArrayBuffer(n),a=new Uint8Array(s);new DataView(s).setUint32(0,i,!0);let u=null;return u="BO_BROADCAST"===t.sessionType||"XMPP_CHAT"===t.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(u,this.instance.zoomId,t.gcmType).then((t=>{const n=ArrayBuffer.isView(e)?e:(new TextEncoder).encode(e);return hb.encrypt({name:"AES-GCM",iv:a,additionalData:r,tagLength:8*o},t,n)})).then((e=>{const n=1+a.byteLength+2+r.byteLength+4+e.byteLength,i=new ArrayBuffer(n);if(new Uint8Array(i)[0]=a.length,new Uint8Array(i,1,a.byteLength).set(a),new DataView(i).setUint16(1+a.byteLength,r.length,!0),new Uint8Array(i,3+a.byteLength).set(r),new DataView(i).setUint32(1+a.byteLength+2+r.byteLength,e.byteLength-o,!0),new Uint8Array(i,1+a.byteLength+2+r.byteLength+4).set(new Uint8Array(e)),t.sessionType===pb.CHAT_FILE.sessionType)return i;const s=new Uint8Array(i).reduce(((e,t)=>e+String.fromCharCode(t)),"");return window.btoa(s).replace(/_/g,"/").replace(/-/g,"+").replace(/\=/g,"")}))}return Promise.resolve(ArrayBuffer.isView(e)?e:cd(e))}static beginDecrypt({decryptedText:e,type:t,zoomId:r}){if(this.instance&&this.instance.isGCMEnabled){const o=ArrayBuffer.isView(e)||e instanceof ArrayBuffer?new Uint8Array(e):function(e){let t;const r=e.length,o=new Array(r);for(t=0;t<r;++t)o[t]=255&e.charCodeAt(t);return new Uint8Array(o)}(atob(e.replace(/_/g,"/").replace(/-/g,"+"))),n=o[0],i=o.slice(1,n+1),s=o.slice(1+n,3+n),a=new DataView(s.buffer).getUint16(0,!0),u=o.slice(1+n+2,1+n+2+a),d=o.slice(1+n+2+a,1+n+2+a+4),c=new DataView(d.buffer).getUint32(0,!0),l=o.slice(1+n+2+a+4,1+n+2+a+4+c),p=o.slice(1+n+2+a+4+c);let h=null;return h="BO_BROADCAST"===t.sessionType||"XMPP_CHAT"===t.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(h,r,t.gcmType).then((e=>{const t=function(e,t){e=new Uint8Array(e),t=new Uint8Array(t);const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(l,p);return hb.decrypt({name:"AES-GCM",iv:i,additionalData:u,tagLength:8*p.length},e,t.buffer)})).then((e=>({message:t.sessionType===pb.CHAT_FILE.sessionType?e:(new TextDecoder).decode(e),iv:i,aad:u}))).catch((e=>({message:"[This is an encrypted message]",iv:i,aad:u})))}{const t=new TextDecoder("utf-8");return Promise.resolve({message:ArrayBuffer.isView(e)||e instanceof ArrayBuffer?e:t.decode(md(e))})}}}Sb.instance=void 0;var vb,fb={exports:{}},yb=fb.exports,Eb=(vb||(vb=1,function(e,t){(function(){var r,o="Expected a function",n="__lodash_hash_undefined__",i="__lodash_placeholder__",s=32,a=128,u=1/0,d=9007199254740991,c=NaN,l=4294967295,p=[["ary",a],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",s],["partialRight",64],["rearg",256]],h="[object Arguments]",m="[object Array]",g="[object Boolean]",S="[object Date]",v="[object Error]",f="[object Function]",y="[object GeneratorFunction]",E="[object Map]",_="[object Number]",I="[object Object]",A="[object Promise]",b="[object RegExp]",C="[object Set]",T="[object String]",R="[object Symbol]",O="[object WeakMap]",D="[object ArrayBuffer]",w="[object DataView]",N="[object Float32Array]",M="[object Float64Array]",P="[object Int8Array]",L="[object Int16Array]",k="[object Int32Array]",U="[object Uint8Array]",V="[object Uint8ClampedArray]",B="[object Uint16Array]",H="[object Uint32Array]",j=/\b__p \+= '';/g,F=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,G=RegExp(x.source),z=RegExp($.source),q=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,Z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X=/[\\^$.*+?()[\]{}|]/g,ee=RegExp(X.source),te=/^\s+/,re=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ne=/\{\n\/\* \[wrapped with (.+)\] \*/,ie=/,? & /,se=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ae=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ce=/\w*$/,le=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,he=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ge=/^(?:0|[1-9]\d*)$/,Se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ve=/($^)/,fe=/['\n\r\u2028\u2029\\]/g,ye="\\ud800-\\udfff",Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",_e="\\u2700-\\u27bf",Ie="a-z\\xdf-\\xf6\\xf8-\\xff",Ae="A-Z\\xc0-\\xd6\\xd8-\\xde",be="\\ufe0e\\ufe0f",Ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Te="["+ye+"]",Re="["+Ce+"]",Oe="["+Ee+"]",De="\\d+",we="["+_e+"]",Ne="["+Ie+"]",Me="[^"+ye+Ce+De+_e+Ie+Ae+"]",Pe="\\ud83c[\\udffb-\\udfff]",Le="[^"+ye+"]",ke="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Ae+"]",Be="\\u200d",He="(?:"+Ne+"|"+Me+")",je="(?:"+Ve+"|"+Me+")",Fe="(?:['](?:d|ll|m|re|s|t|ve))?",We="(?:['](?:D|LL|M|RE|S|T|VE))?",xe="(?:"+Oe+"|"+Pe+")?",$e="["+be+"]?",Ge=$e+xe+"(?:"+Be+"(?:"+[Le,ke,Ue].join("|")+")"+$e+xe+")*",ze="(?:"+[we,ke,Ue].join("|")+")"+Ge,qe="(?:"+[Le+Oe+"?",Oe,ke,Ue,Te].join("|")+")",Ke=RegExp("[']","g"),Je=RegExp(Oe,"g"),Qe=RegExp(Pe+"(?="+Pe+")|"+qe+Ge,"g"),Ye=RegExp([Ve+"?"+Ne+"+"+Fe+"(?="+[Re,Ve,"$"].join("|")+")",je+"+"+We+"(?="+[Re,Ve+He,"$"].join("|")+")",Ve+"?"+He+"+"+Fe,Ve+"+"+We,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,ze].join("|"),"g"),Ze=RegExp("["+Be+ye+Ee+be+"]"),Xe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,et=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tt=-1,rt={};rt[N]=rt[M]=rt[P]=rt[L]=rt[k]=rt[U]=rt[V]=rt[B]=rt[H]=!0,rt[h]=rt[m]=rt[D]=rt[g]=rt[w]=rt[S]=rt[v]=rt[f]=rt[E]=rt[_]=rt[I]=rt[b]=rt[C]=rt[T]=rt[O]=!1;var ot={};ot[h]=ot[m]=ot[D]=ot[w]=ot[g]=ot[S]=ot[N]=ot[M]=ot[P]=ot[L]=ot[k]=ot[E]=ot[_]=ot[I]=ot[b]=ot[C]=ot[T]=ot[R]=ot[U]=ot[V]=ot[B]=ot[H]=!0,ot[v]=ot[f]=ot[O]=!1;var nt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},it=parseFloat,st=parseInt,at="object"==typeof lc&&lc&&lc.Object===Object&&lc,ut="object"==typeof self&&self&&self.Object===Object&&self,dt=at||ut||Function("return this")(),ct=t&&!t.nodeType&&t,lt=ct&&e&&!e.nodeType&&e,pt=lt&&lt.exports===ct,ht=pt&&at.process,mt=function(){try{return lt&&lt.require&&lt.require("util").types||ht&&ht.binding&&ht.binding("util")}catch(e){}}(),gt=mt&&mt.isArrayBuffer,St=mt&&mt.isDate,vt=mt&&mt.isMap,ft=mt&&mt.isRegExp,yt=mt&&mt.isSet,Et=mt&&mt.isTypedArray;function _t(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function It(e,t,r,o){for(var n=-1,i=null==e?0:e.length;++n<i;){var s=e[n];t(o,s,r(s),e)}return o}function At(e,t){for(var r=-1,o=null==e?0:e.length;++r<o&&!1!==t(e[r],r,e););return e}function bt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Ct(e,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(!t(e[r],r,e))return!1;return!0}function Tt(e,t){for(var r=-1,o=null==e?0:e.length,n=0,i=[];++r<o;){var s=e[r];t(s,r,e)&&(i[n++]=s)}return i}function Rt(e,t){return!(null==e||!e.length)&&Vt(e,t,0)>-1}function Ot(e,t,r){for(var o=-1,n=null==e?0:e.length;++o<n;)if(r(t,e[o]))return!0;return!1}function Dt(e,t){for(var r=-1,o=null==e?0:e.length,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}function wt(e,t){for(var r=-1,o=t.length,n=e.length;++r<o;)e[n+r]=t[r];return e}function Nt(e,t,r,o){var n=-1,i=null==e?0:e.length;for(o&&i&&(r=e[++n]);++n<i;)r=t(r,e[n],n,e);return r}function Mt(e,t,r,o){var n=null==e?0:e.length;for(o&&n&&(r=e[--n]);n--;)r=t(r,e[n],n,e);return r}function Pt(e,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(e[r],r,e))return!0;return!1}var Lt=Ft("length");function kt(e,t,r){var o;return r(e,(function(e,r,n){if(t(e,r,n))return o=r,!1})),o}function Ut(e,t,r,o){for(var n=e.length,i=r+(o?1:-1);o?i--:++i<n;)if(t(e[i],i,e))return i;return-1}function Vt(e,t,r){return t==t?function(e,t,r){for(var o=r-1,n=e.length;++o<n;)if(e[o]===t)return o;return-1}(e,t,r):Ut(e,Ht,r)}function Bt(e,t,r,o){for(var n=r-1,i=e.length;++n<i;)if(o(e[n],t))return n;return-1}function Ht(e){return e!=e}function jt(e,t){var r=null==e?0:e.length;return r?$t(e,t)/r:c}function Ft(e){return function(t){return null==t?r:t[e]}}function Wt(e){return function(t){return null==e?r:e[t]}}function xt(e,t,r,o,n){return n(e,(function(e,n,i){r=o?(o=!1,e):t(r,e,n,i)})),r}function $t(e,t){for(var o,n=-1,i=e.length;++n<i;){var s=t(e[n]);s!==r&&(o=o===r?s:o+s)}return o}function Gt(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o}function zt(e){return e?e.slice(0,ur(e)+1).replace(te,""):e}function qt(e){return function(t){return e(t)}}function Kt(e,t){return Dt(t,(function(t){return e[t]}))}function Jt(e,t){return e.has(t)}function Qt(e,t){for(var r=-1,o=e.length;++r<o&&Vt(t,e[r],0)>-1;);return r}function Yt(e,t){for(var r=e.length;r--&&Vt(t,e[r],0)>-1;);return r}var Zt=Wt({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Xt=Wt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function er(e){return"\\"+nt[e]}function tr(e){return Ze.test(e)}function rr(e){var t=-1,r=Array(e.size);return e.forEach((function(e,o){r[++t]=[o,e]})),r}function or(e,t){return function(r){return e(t(r))}}function nr(e,t){for(var r=-1,o=e.length,n=0,s=[];++r<o;){var a=e[r];a!==t&&a!==i||(e[r]=i,s[n++]=r)}return s}function ir(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function sr(e){return tr(e)?function(e){for(var t=Qe.lastIndex=0;Qe.test(e);)++t;return t}(e):Lt(e)}function ar(e){return tr(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function ur(e){for(var t=e.length;t--&&re.test(e.charAt(t)););return t}var dr=Wt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cr=function e(t){var re=(t=null==t?dt:cr.defaults(dt.Object(),t,cr.pick(dt,et))).Array,ye=t.Date,Ee=t.Error,_e=t.Function,Ie=t.Math,Ae=t.Object,be=t.RegExp,Ce=t.String,Te=t.TypeError,Re=re.prototype,Oe=_e.prototype,De=Ae.prototype,we=t["__core-js_shared__"],Ne=Oe.toString,Me=De.hasOwnProperty,Pe=0,Le=function(){var e=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ke=De.toString,Ue=Ne.call(Ae),Ve=dt._,Be=be("^"+Ne.call(Me).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=pt?t.Buffer:r,je=t.Symbol,Fe=t.Uint8Array,We=He?He.allocUnsafe:r,xe=or(Ae.getPrototypeOf,Ae),$e=Ae.create,Ge=De.propertyIsEnumerable,ze=Re.splice,qe=je?je.isConcatSpreadable:r,Qe=je?je.iterator:r,Ze=je?je.toStringTag:r,nt=function(){try{var e=ai(Ae,"defineProperty");return e({},"",{}),e}catch(e){}}(),at=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ut=ye&&ye.now!==dt.Date.now&&ye.now,ct=t.setTimeout!==dt.setTimeout&&t.setTimeout,lt=Ie.ceil,ht=Ie.floor,mt=Ae.getOwnPropertySymbols,Lt=He?He.isBuffer:r,Wt=t.isFinite,lr=Re.join,pr=or(Ae.keys,Ae),hr=Ie.max,mr=Ie.min,gr=ye.now,Sr=t.parseInt,vr=Ie.random,fr=Re.reverse,yr=ai(t,"DataView"),Er=ai(t,"Map"),_r=ai(t,"Promise"),Ir=ai(t,"Set"),Ar=ai(t,"WeakMap"),br=ai(Ae,"create"),Cr=Ar&&new Ar,Tr={},Rr=Pi(yr),Or=Pi(Er),Dr=Pi(_r),wr=Pi(Ir),Nr=Pi(Ar),Mr=je?je.prototype:r,Pr=Mr?Mr.valueOf:r,Lr=Mr?Mr.toString:r;function kr(e){if(Qs(e)&&!Hs(e)&&!(e instanceof Hr)){if(e instanceof Br)return e;if(Me.call(e,"__wrapped__"))return Li(e)}return new Br(e)}var Ur=function(){function e(){}return function(t){if(!Js(t))return{};if($e)return $e(t);e.prototype=t;var o=new e;return e.prototype=r,o}}();function Vr(){}function Br(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Hr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=l,this.__views__=[]}function jr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Fr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function xr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Wr;++t<r;)this.add(e[t])}function $r(e){var t=this.__data__=new Fr(e);this.size=t.size}function Gr(e,t){var r=Hs(e),o=!r&&Bs(e),n=!r&&!o&&xs(e),i=!r&&!o&&!n&&na(e),s=r||o||n||i,a=s?Gt(e.length,Ce):[],u=a.length;for(var d in e)!t&&!Me.call(e,d)||s&&("length"==d||n&&("offset"==d||"parent"==d)||i&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||mi(d,u))||a.push(d);return a}function zr(e){var t=e.length;return t?e[xo(0,t-1)]:r}function qr(e,t){return wi(Cn(e),ro(t,0,e.length))}function Kr(e){return wi(Cn(e))}function Jr(e,t,o){(o!==r&&!ks(e[t],o)||o===r&&!(t in e))&&eo(e,t,o)}function Qr(e,t,o){var n=e[t];Me.call(e,t)&&ks(n,o)&&(o!==r||t in e)||eo(e,t,o)}function Yr(e,t){for(var r=e.length;r--;)if(ks(e[r][0],t))return r;return-1}function Zr(e,t,r,o){return ao(e,(function(e,n,i){t(o,e,r(e),i)})),o}function Xr(e,t){return e&&Tn(t,Ta(t),e)}function eo(e,t,r){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function to(e,t){for(var o=-1,n=t.length,i=re(n),s=null==e;++o<n;)i[o]=s?r:_a(e,t[o]);return i}function ro(e,t,o){return e==e&&(o!==r&&(e=e<=o?e:o),t!==r&&(e=e>=t?e:t)),e}function oo(e,t,o,n,i,s){var a,u=1&t,d=2&t,c=4&t;if(o&&(a=i?o(e,n,i,s):o(e)),a!==r)return a;if(!Js(e))return e;var l=Hs(e);if(l){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Me.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!u)return Cn(e,a)}else{var p=ci(e),m=p==f||p==y;if(xs(e))return yn(e,u);if(p==I||p==h||m&&!i){if(a=d||m?{}:pi(e),!u)return d?function(e,t){return Tn(e,di(e),t)}(e,function(e,t){return e&&Tn(t,Ra(t),e)}(a,e)):function(e,t){return Tn(e,ui(e),t)}(e,Xr(a,e))}else{if(!ot[p])return i?e:{};a=function(e,t,r){var o,n=e.constructor;switch(t){case D:return En(e);case g:case S:return new n(+e);case w:return function(e,t){var r=t?En(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case N:case M:case P:case L:case k:case U:case V:case B:case H:return _n(e,r);case E:return new n;case _:case T:return new n(e);case b:return function(e){var t=new e.constructor(e.source,ce.exec(e));return t.lastIndex=e.lastIndex,t}(e);case C:return new n;case R:return o=e,Pr?Ae(Pr.call(o)):{}}}(e,p,u)}}s||(s=new $r);var v=s.get(e);if(v)return v;s.set(e,a),ta(e)?e.forEach((function(r){a.add(oo(r,t,o,r,e,s))})):Ys(e)&&e.forEach((function(r,n){a.set(n,oo(r,t,o,n,e,s))}));var A=l?r:(c?d?ei:Xn:d?Ra:Ta)(e);return At(A||e,(function(r,n){A&&(r=e[n=r]),Qr(a,n,oo(r,t,o,n,e,s))})),a}function no(e,t,o){var n=o.length;if(null==e)return!n;for(e=Ae(e);n--;){var i=o[n],s=t[i],a=e[i];if(a===r&&!(i in e)||!s(a))return!1}return!0}function io(e,t,n){if("function"!=typeof e)throw new Te(o);return Ti((function(){e.apply(r,n)}),t)}function so(e,t,r,o){var n=-1,i=Rt,s=!0,a=e.length,u=[],d=t.length;if(!a)return u;r&&(t=Dt(t,qt(r))),o?(i=Ot,s=!1):t.length>=200&&(i=Jt,s=!1,t=new xr(t));e:for(;++n<a;){var c=e[n],l=null==r?c:r(c);if(c=o||0!==c?c:0,s&&l==l){for(var p=d;p--;)if(t[p]===l)continue e;u.push(c)}else i(t,l,o)||u.push(c)}return u}kr.templateSettings={escape:q,evaluate:K,interpolate:J,variable:"",imports:{_:kr}},kr.prototype=Vr.prototype,kr.prototype.constructor=kr,Br.prototype=Ur(Vr.prototype),Br.prototype.constructor=Br,Hr.prototype=Ur(Vr.prototype),Hr.prototype.constructor=Hr,jr.prototype.clear=function(){this.__data__=br?br(null):{},this.size=0},jr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},jr.prototype.get=function(e){var t=this.__data__;if(br){var o=t[e];return o===n?r:o}return Me.call(t,e)?t[e]:r},jr.prototype.has=function(e){var t=this.__data__;return br?t[e]!==r:Me.call(t,e)},jr.prototype.set=function(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=br&&t===r?n:t,this},Fr.prototype.clear=function(){this.__data__=[],this.size=0},Fr.prototype.delete=function(e){var t=this.__data__,r=Yr(t,e);return!(r<0||(r==t.length-1?t.pop():ze.call(t,r,1),--this.size,0))},Fr.prototype.get=function(e){var t=this.__data__,o=Yr(t,e);return o<0?r:t[o][1]},Fr.prototype.has=function(e){return Yr(this.__data__,e)>-1},Fr.prototype.set=function(e,t){var r=this.__data__,o=Yr(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this},Wr.prototype.clear=function(){this.size=0,this.__data__={hash:new jr,map:new(Er||Fr),string:new jr}},Wr.prototype.delete=function(e){var t=ii(this,e).delete(e);return this.size-=t?1:0,t},Wr.prototype.get=function(e){return ii(this,e).get(e)},Wr.prototype.has=function(e){return ii(this,e).has(e)},Wr.prototype.set=function(e,t){var r=ii(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this},xr.prototype.add=xr.prototype.push=function(e){return this.__data__.set(e,n),this},xr.prototype.has=function(e){return this.__data__.has(e)},$r.prototype.clear=function(){this.__data__=new Fr,this.size=0},$r.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},$r.prototype.get=function(e){return this.__data__.get(e)},$r.prototype.has=function(e){return this.__data__.has(e)},$r.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Fr){var o=r.__data__;if(!Er||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new Wr(o)}return r.set(e,t),this.size=r.size,this};var ao=Dn(So),uo=Dn(vo,!0);function co(e,t){var r=!0;return ao(e,(function(e,o,n){return r=!!t(e,o,n)})),r}function lo(e,t,o){for(var n=-1,i=e.length;++n<i;){var s=e[n],a=t(s);if(null!=a&&(u===r?a==a&&!oa(a):o(a,u)))var u=a,d=s}return d}function po(e,t){var r=[];return ao(e,(function(e,o,n){t(e,o,n)&&r.push(e)})),r}function ho(e,t,r,o,n){var i=-1,s=e.length;for(r||(r=hi),n||(n=[]);++i<s;){var a=e[i];t>0&&r(a)?t>1?ho(a,t-1,r,o,n):wt(n,a):o||(n[n.length]=a)}return n}var mo=wn(),go=wn(!0);function So(e,t){return e&&mo(e,t,Ta)}function vo(e,t){return e&&go(e,t,Ta)}function fo(e,t){return Tt(t,(function(t){return zs(e[t])}))}function yo(e,t){for(var o=0,n=(t=gn(t,e)).length;null!=e&&o<n;)e=e[Mi(t[o++])];return o&&o==n?e:r}function Eo(e,t,r){var o=t(e);return Hs(e)?o:wt(o,r(e))}function _o(e){return null==e?e===r?"[object Undefined]":"[object Null]":Ze&&Ze in Ae(e)?function(e){var t=Me.call(e,Ze),o=e[Ze];try{e[Ze]=r;var n=!0}catch(e){}var i=ke.call(e);return n&&(t?e[Ze]=o:delete e[Ze]),i}(e):function(e){return ke.call(e)}(e)}function Io(e,t){return e>t}function Ao(e,t){return null!=e&&Me.call(e,t)}function bo(e,t){return null!=e&&t in Ae(e)}function Co(e,t,o){for(var n=o?Ot:Rt,i=e[0].length,s=e.length,a=s,u=re(s),d=1/0,c=[];a--;){var l=e[a];a&&t&&(l=Dt(l,qt(t))),d=mr(l.length,d),u[a]=!o&&(t||i>=120&&l.length>=120)?new xr(a&&l):r}l=e[0];var p=-1,h=u[0];e:for(;++p<i&&c.length<d;){var m=l[p],g=t?t(m):m;if(m=o||0!==m?m:0,!(h?Jt(h,g):n(c,g,o))){for(a=s;--a;){var S=u[a];if(!(S?Jt(S,g):n(e[a],g,o)))continue e}h&&h.push(g),c.push(m)}}return c}function To(e,t,o){var n=null==(e=Ai(e,t=gn(t,e)))?e:e[Mi(Gi(t))];return null==n?r:_t(n,e,o)}function Ro(e){return Qs(e)&&_o(e)==h}function Oo(e,t,o,n,i){return e===t||(null==e||null==t||!Qs(e)&&!Qs(t)?e!=e&&t!=t:function(e,t,o,n,i,s){var a=Hs(e),u=Hs(t),d=a?m:ci(e),c=u?m:ci(t),l=(d=d==h?I:d)==I,p=(c=c==h?I:c)==I,f=d==c;if(f&&xs(e)){if(!xs(t))return!1;a=!0,l=!1}if(f&&!l)return s||(s=new $r),a||na(e)?Yn(e,t,o,n,i,s):function(e,t,r,o,n,i,s){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!i(new Fe(e),new Fe(t)));case g:case S:case _:return ks(+e,+t);case v:return e.name==t.name&&e.message==t.message;case b:case T:return e==t+"";case E:var a=rr;case C:var u=1&o;if(a||(a=ir),e.size!=t.size&&!u)return!1;var d=s.get(e);if(d)return d==t;o|=2,s.set(e,t);var c=Yn(a(e),a(t),o,n,i,s);return s.delete(e),c;case R:if(Pr)return Pr.call(e)==Pr.call(t)}return!1}(e,t,d,o,n,i,s);if(!(1&o)){var y=l&&Me.call(e,"__wrapped__"),A=p&&Me.call(t,"__wrapped__");if(y||A){var O=y?e.value():e,N=A?t.value():t;return s||(s=new $r),i(O,N,o,n,s)}}return!!f&&(s||(s=new $r),function(e,t,o,n,i,s){var a=1&o,u=Xn(e),d=u.length;if(d!=Xn(t).length&&!a)return!1;for(var c=d;c--;){var l=u[c];if(!(a?l in t:Me.call(t,l)))return!1}var p=s.get(e),h=s.get(t);if(p&&h)return p==t&&h==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=a;++c<d;){var S=e[l=u[c]],v=t[l];if(n)var f=a?n(v,S,l,t,e,s):n(S,v,l,e,t,s);if(!(f===r?S===v||i(S,v,o,n,s):f)){m=!1;break}g||(g="constructor"==l)}if(m&&!g){var y=e.constructor,E=t.constructor;y==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof E&&E instanceof E||(m=!1)}return s.delete(e),s.delete(t),m}(e,t,o,n,i,s))}(e,t,o,n,Oo,i))}function Do(e,t,o,n){var i=o.length,s=i,a=!n;if(null==e)return!s;for(e=Ae(e);i--;){var u=o[i];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<s;){var d=(u=o[i])[0],c=e[d],l=u[1];if(a&&u[2]){if(c===r&&!(d in e))return!1}else{var p=new $r;if(n)var h=n(c,l,d,e,t,p);if(!(h===r?Oo(l,c,3,n,p):h))return!1}}return!0}function wo(e){return!(!Js(e)||function(e){return!!Le&&Le in e}(e))&&(zs(e)?Be:he).test(Pi(e))}function No(e){return"function"==typeof e?e:null==e?Za:"object"==typeof e?Hs(e)?Uo(e[0],e[1]):ko(e):au(e)}function Mo(e){if(!yi(e))return pr(e);var t=[];for(var r in Ae(e))Me.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Po(e,t){return e<t}function Lo(e,t){var r=-1,o=Fs(e)?re(e.length):[];return ao(e,(function(e,n,i){o[++r]=t(e,n,i)})),o}function ko(e){var t=si(e);return 1==t.length&&t[0][2]?_i(t[0][0],t[0][1]):function(r){return r===e||Do(r,e,t)}}function Uo(e,t){return Si(e)&&Ei(t)?_i(Mi(e),t):function(o){var n=_a(o,e);return n===r&&n===t?Ia(o,e):Oo(t,n,3)}}function Vo(e,t,o,n,i){e!==t&&mo(t,(function(s,a){if(i||(i=new $r),Js(s))!function(e,t,o,n,i,s,a){var u=bi(e,o),d=bi(t,o),c=a.get(d);if(c)Jr(e,o,c);else{var l=s?s(u,d,o+"",e,t,a):r,p=l===r;if(p){var h=Hs(d),m=!h&&xs(d),g=!h&&!m&&na(d);l=d,h||m||g?Hs(u)?l=u:Ws(u)?l=Cn(u):m?(p=!1,l=yn(d,!0)):g?(p=!1,l=_n(d,!0)):l=[]:Xs(d)||Bs(d)?(l=u,Bs(u)?l=pa(u):Js(u)&&!zs(u)||(l=pi(d))):p=!1}p&&(a.set(d,l),i(l,d,n,s,a),a.delete(d)),Jr(e,o,l)}}(e,t,a,o,Vo,n,i);else{var u=n?n(bi(e,a),s,a+"",e,t,i):r;u===r&&(u=s),Jr(e,a,u)}}),Ra)}function Bo(e,t){var o=e.length;if(o)return mi(t+=t<0?o:0,o)?e[t]:r}function Ho(e,t,r){t=t.length?Dt(t,(function(e){return Hs(e)?function(t){return yo(t,1===e.length?e[0]:e)}:e})):[Za];var o=-1;t=Dt(t,qt(ni()));var n=Lo(e,(function(e,r,n){var i=Dt(t,(function(t){return t(e)}));return{criteria:i,index:++o,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(n,(function(e,t){return function(e,t,r){for(var o=-1,n=e.criteria,i=t.criteria,s=n.length,a=r.length;++o<s;){var u=In(n[o],i[o]);if(u)return o>=a?u:u*("desc"==r[o]?-1:1)}return e.index-t.index}(e,t,r)}))}function jo(e,t,r){for(var o=-1,n=t.length,i={};++o<n;){var s=t[o],a=yo(e,s);r(a,s)&&Ko(i,gn(s,e),a)}return i}function Fo(e,t,r,o){var n=o?Bt:Vt,i=-1,s=t.length,a=e;for(e===t&&(t=Cn(t)),r&&(a=Dt(e,qt(r)));++i<s;)for(var u=0,d=t[i],c=r?r(d):d;(u=n(a,c,u,o))>-1;)a!==e&&ze.call(a,u,1),ze.call(e,u,1);return e}function Wo(e,t){for(var r=e?t.length:0,o=r-1;r--;){var n=t[r];if(r==o||n!==i){var i=n;mi(n)?ze.call(e,n,1):an(e,n)}}return e}function xo(e,t){return e+ht(vr()*(t-e+1))}function $o(e,t){var r="";if(!e||t<1||t>d)return r;do{t%2&&(r+=e),(t=ht(t/2))&&(e+=e)}while(t);return r}function Go(e,t){return Ri(Ii(e,t,Za),e+"")}function zo(e){return zr(ka(e))}function qo(e,t){var r=ka(e);return wi(r,ro(t,0,r.length))}function Ko(e,t,o,n){if(!Js(e))return e;for(var i=-1,s=(t=gn(t,e)).length,a=s-1,u=e;null!=u&&++i<s;){var d=Mi(t[i]),c=o;if("__proto__"===d||"constructor"===d||"prototype"===d)return e;if(i!=a){var l=u[d];(c=n?n(l,d,u):r)===r&&(c=Js(l)?l:mi(t[i+1])?[]:{})}Qr(u,d,c),u=u[d]}return e}var Jo=Cr?function(e,t){return Cr.set(e,t),e}:Za,Qo=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:Ja(t),writable:!0})}:Za;function Yo(e){return wi(ka(e))}function Zo(e,t,r){var o=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var i=re(n);++o<n;)i[o]=e[o+t];return i}function Xo(e,t){var r;return ao(e,(function(e,o,n){return!(r=t(e,o,n))})),!!r}function en(e,t,r){var o=0,n=null==e?o:e.length;if("number"==typeof t&&t==t&&n<=2147483647){for(;o<n;){var i=o+n>>>1,s=e[i];null!==s&&!oa(s)&&(r?s<=t:s<t)?o=i+1:n=i}return n}return tn(e,t,Za,r)}function tn(e,t,o,n){var i=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=o(t))!=t,u=null===t,d=oa(t),c=t===r;i<s;){var l=ht((i+s)/2),p=o(e[l]),h=p!==r,m=null===p,g=p==p,S=oa(p);if(a)var v=n||g;else v=c?g&&(n||h):u?g&&h&&(n||!m):d?g&&h&&!m&&(n||!S):!m&&!S&&(n?p<=t:p<t);v?i=l+1:s=l}return mr(s,4294967294)}function rn(e,t){for(var r=-1,o=e.length,n=0,i=[];++r<o;){var s=e[r],a=t?t(s):s;if(!r||!ks(a,u)){var u=a;i[n++]=0===s?0:s}}return i}function on(e){return"number"==typeof e?e:oa(e)?c:+e}function nn(e){if("string"==typeof e)return e;if(Hs(e))return Dt(e,nn)+"";if(oa(e))return Lr?Lr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function sn(e,t,r){var o=-1,n=Rt,i=e.length,s=!0,a=[],u=a;if(r)s=!1,n=Ot;else if(i>=200){var d=t?null:Gn(e);if(d)return ir(d);s=!1,n=Jt,u=new xr}else u=t?[]:a;e:for(;++o<i;){var c=e[o],l=t?t(c):c;if(c=r||0!==c?c:0,s&&l==l){for(var p=u.length;p--;)if(u[p]===l)continue e;t&&u.push(l),a.push(c)}else n(u,l,r)||(u!==a&&u.push(l),a.push(c))}return a}function an(e,t){return null==(e=Ai(e,t=gn(t,e)))||delete e[Mi(Gi(t))]}function un(e,t,r,o){return Ko(e,t,r(yo(e,t)),o)}function dn(e,t,r,o){for(var n=e.length,i=o?n:-1;(o?i--:++i<n)&&t(e[i],i,e););return r?Zo(e,o?0:i,o?i+1:n):Zo(e,o?i+1:0,o?n:i)}function cn(e,t){var r=e;return r instanceof Hr&&(r=r.value()),Nt(t,(function(e,t){return t.func.apply(t.thisArg,wt([e],t.args))}),r)}function ln(e,t,r){var o=e.length;if(o<2)return o?sn(e[0]):[];for(var n=-1,i=re(o);++n<o;)for(var s=e[n],a=-1;++a<o;)a!=n&&(i[n]=so(i[n]||s,e[a],t,r));return sn(ho(i,1),t,r)}function pn(e,t,o){for(var n=-1,i=e.length,s=t.length,a={};++n<i;){var u=n<s?t[n]:r;o(a,e[n],u)}return a}function hn(e){return Ws(e)?e:[]}function mn(e){return"function"==typeof e?e:Za}function gn(e,t){return Hs(e)?e:Si(e,t)?[e]:Ni(ha(e))}var Sn=Go;function vn(e,t,o){var n=e.length;return o=o===r?n:o,!t&&o>=n?e:Zo(e,t,o)}var fn=at||function(e){return dt.clearTimeout(e)};function yn(e,t){if(t)return e.slice();var r=e.length,o=We?We(r):new e.constructor(r);return e.copy(o),o}function En(e){var t=new e.constructor(e.byteLength);return new Fe(t).set(new Fe(e)),t}function _n(e,t){var r=t?En(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function In(e,t){if(e!==t){var o=e!==r,n=null===e,i=e==e,s=oa(e),a=t!==r,u=null===t,d=t==t,c=oa(t);if(!u&&!c&&!s&&e>t||s&&a&&d&&!u&&!c||n&&a&&d||!o&&d||!i)return 1;if(!n&&!s&&!c&&e<t||c&&o&&i&&!n&&!s||u&&o&&i||!a&&i||!d)return-1}return 0}function An(e,t,r,o){for(var n=-1,i=e.length,s=r.length,a=-1,u=t.length,d=hr(i-s,0),c=re(u+d),l=!o;++a<u;)c[a]=t[a];for(;++n<s;)(l||n<i)&&(c[r[n]]=e[n]);for(;d--;)c[a++]=e[n++];return c}function bn(e,t,r,o){for(var n=-1,i=e.length,s=-1,a=r.length,u=-1,d=t.length,c=hr(i-a,0),l=re(c+d),p=!o;++n<c;)l[n]=e[n];for(var h=n;++u<d;)l[h+u]=t[u];for(;++s<a;)(p||n<i)&&(l[h+r[s]]=e[n++]);return l}function Cn(e,t){var r=-1,o=e.length;for(t||(t=re(o));++r<o;)t[r]=e[r];return t}function Tn(e,t,o,n){var i=!o;o||(o={});for(var s=-1,a=t.length;++s<a;){var u=t[s],d=n?n(o[u],e[u],u,o,e):r;d===r&&(d=e[u]),i?eo(o,u,d):Qr(o,u,d)}return o}function Rn(e,t){return function(r,o){var n=Hs(r)?It:Zr,i=t?t():{};return n(r,e,ni(o,2),i)}}function On(e){return Go((function(t,o){var n=-1,i=o.length,s=i>1?o[i-1]:r,a=i>2?o[2]:r;for(s=e.length>3&&"function"==typeof s?(i--,s):r,a&&gi(o[0],o[1],a)&&(s=i<3?r:s,i=1),t=Ae(t);++n<i;){var u=o[n];u&&e(t,u,n,s)}return t}))}function Dn(e,t){return function(r,o){if(null==r)return r;if(!Fs(r))return e(r,o);for(var n=r.length,i=t?n:-1,s=Ae(r);(t?i--:++i<n)&&!1!==o(s[i],i,s););return r}}function wn(e){return function(t,r,o){for(var n=-1,i=Ae(t),s=o(t),a=s.length;a--;){var u=s[e?a:++n];if(!1===r(i[u],u,i))break}return t}}function Nn(e){return function(t){var o=tr(t=ha(t))?ar(t):r,n=o?o[0]:t.charAt(0),i=o?vn(o,1).join(""):t.slice(1);return n[e]()+i}}function Mn(e){return function(t){return Nt(za(Ba(t).replace(Ke,"")),e,"")}}function Pn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Ur(e.prototype),o=e.apply(r,t);return Js(o)?o:r}}function Ln(e){return function(t,o,n){var i=Ae(t);if(!Fs(t)){var s=ni(o,3);t=Ta(t),o=function(e){return s(i[e],e,i)}}var a=e(t,o,n);return a>-1?i[s?t[a]:a]:r}}function kn(e){return Zn((function(t){var n=t.length,i=n,s=Br.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new Te(o);if(s&&!u&&"wrapper"==ri(a))var u=new Br([],!0)}for(i=u?i:n;++i<n;){var d=ri(a=t[i]),c="wrapper"==d?ti(a):r;u=c&&vi(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ri(c[0])].apply(u,c[3]):1==a.length&&vi(a)?u[d]():u.thru(a)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Hs(r))return u.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}}))}function Un(e,t,o,n,i,s,u,d,c,l){var p=t&a,h=1&t,m=2&t,g=24&t,S=512&t,v=m?r:Pn(e);return function a(){for(var f=arguments.length,y=re(f),E=f;E--;)y[E]=arguments[E];if(g)var _=oi(a),I=function(e,t){for(var r=e.length,o=0;r--;)e[r]===t&&++o;return o}(y,_);if(n&&(y=An(y,n,i,g)),s&&(y=bn(y,s,u,g)),f-=I,g&&f<l){var A=nr(y,_);return xn(e,t,Un,a.placeholder,o,y,A,d,c,l-f)}var b=h?o:this,C=m?b[e]:e;return f=y.length,d?y=function(e,t){for(var o=e.length,n=mr(t.length,o),i=Cn(e);n--;){var s=t[n];e[n]=mi(s,o)?i[s]:r}return e}(y,d):S&&f>1&&y.reverse(),p&&c<f&&(y.length=c),this&&this!==dt&&this instanceof a&&(C=v||Pn(C)),C.apply(b,y)}}function Vn(e,t){return function(r,o){return function(e,t,r,o){return So(e,(function(e,n,i){t(o,r(e),n,i)})),o}(r,e,t(o),{})}}function Bn(e,t){return function(o,n){var i;if(o===r&&n===r)return t;if(o!==r&&(i=o),n!==r){if(i===r)return n;"string"==typeof o||"string"==typeof n?(o=nn(o),n=nn(n)):(o=on(o),n=on(n)),i=e(o,n)}return i}}function Hn(e){return Zn((function(t){return t=Dt(t,qt(ni())),Go((function(r){var o=this;return e(t,(function(e){return _t(e,o,r)}))}))}))}function jn(e,t){var o=(t=t===r?" ":nn(t)).length;if(o<2)return o?$o(t,e):t;var n=$o(t,lt(e/sr(t)));return tr(t)?vn(ar(n),0,e).join(""):n.slice(0,e)}function Fn(e){return function(t,o,n){return n&&"number"!=typeof n&&gi(t,o,n)&&(o=n=r),t=ua(t),o===r?(o=t,t=0):o=ua(o),function(e,t,r,o){for(var n=-1,i=hr(lt((t-e)/(r||1)),0),s=re(i);i--;)s[o?i:++n]=e,e+=r;return s}(t,o,n=n===r?t<o?1:-1:ua(n),e)}}function Wn(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=la(t),r=la(r)),e(t,r)}}function xn(e,t,o,n,i,a,u,d,c,l){var p=8&t;t|=p?s:64,4&(t&=~(p?64:s))||(t&=-4);var h=[e,t,i,p?a:r,p?u:r,p?r:a,p?r:u,d,c,l],m=o.apply(r,h);return vi(e)&&Ci(m,h),m.placeholder=n,Oi(m,e,t)}function $n(e){var t=Ie[e];return function(e,r){if(e=la(e),(r=null==r?0:mr(da(r),292))&&Wt(e)){var o=(ha(e)+"e").split("e");return+((o=(ha(t(o[0]+"e"+(+o[1]+r)))+"e").split("e"))[0]+"e"+(+o[1]-r))}return t(e)}}var Gn=Ir&&1/ir(new Ir([,-0]))[1]==u?function(e){return new Ir(e)}:ou;function zn(e){return function(t){var r=ci(t);return r==E?rr(t):r==C?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return Dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function qn(e,t,n,u,d,c,l,p){var h=2&t;if(!h&&"function"!=typeof e)throw new Te(o);var m=u?u.length:0;if(m||(t&=-97,u=d=r),l=l===r?l:hr(da(l),0),p=p===r?p:da(p),m-=d?d.length:0,64&t){var g=u,S=d;u=d=r}var v=h?r:ti(e),f=[e,t,n,u,d,g,S,c,l,p];if(v&&function(e,t){var r=e[1],o=t[1],n=r|o,s=n<131,u=o==a&&8==r||o==a&&256==r&&e[7].length<=t[8]||384==o&&t[7].length<=t[8]&&8==r;if(!s&&!u)return e;1&o&&(e[2]=t[2],n|=1&r?0:4);var d=t[3];if(d){var c=e[3];e[3]=c?An(c,d,t[4]):d,e[4]=c?nr(e[3],i):t[4]}(d=t[5])&&(c=e[5],e[5]=c?bn(c,d,t[6]):d,e[6]=c?nr(e[5],i):t[6]),(d=t[7])&&(e[7]=d),o&a&&(e[8]=null==e[8]?t[8]:mr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=n}(f,v),e=f[0],t=f[1],n=f[2],u=f[3],d=f[4],!(p=f[9]=f[9]===r?h?0:e.length:hr(f[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)y=8==t||16==t?function(e,t,o){var n=Pn(e);return function i(){for(var s=arguments.length,a=re(s),u=s,d=oi(i);u--;)a[u]=arguments[u];var c=s<3&&a[0]!==d&&a[s-1]!==d?[]:nr(a,d);return(s-=c.length)<o?xn(e,t,Un,i.placeholder,r,a,c,r,r,o-s):_t(this&&this!==dt&&this instanceof i?n:e,this,a)}}(e,t,p):t!=s&&33!=t||d.length?Un.apply(r,f):function(e,t,r,o){var n=1&t,i=Pn(e);return function t(){for(var s=-1,a=arguments.length,u=-1,d=o.length,c=re(d+a),l=this&&this!==dt&&this instanceof t?i:e;++u<d;)c[u]=o[u];for(;a--;)c[u++]=arguments[++s];return _t(l,n?r:this,c)}}(e,t,n,u);else var y=function(e,t,r){var o=1&t,n=Pn(e);return function t(){return(this&&this!==dt&&this instanceof t?n:e).apply(o?r:this,arguments)}}(e,t,n);return Oi((v?Jo:Ci)(y,f),e,t)}function Kn(e,t,o,n){return e===r||ks(e,De[o])&&!Me.call(n,o)?t:e}function Jn(e,t,o,n,i,s){return Js(e)&&Js(t)&&(s.set(t,e),Vo(e,t,r,Jn,s),s.delete(t)),e}function Qn(e){return Xs(e)?r:e}function Yn(e,t,o,n,i,s){var a=1&o,u=e.length,d=t.length;if(u!=d&&!(a&&d>u))return!1;var c=s.get(e),l=s.get(t);if(c&&l)return c==t&&l==e;var p=-1,h=!0,m=2&o?new xr:r;for(s.set(e,t),s.set(t,e);++p<u;){var g=e[p],S=t[p];if(n)var v=a?n(S,g,p,t,e,s):n(g,S,p,e,t,s);if(v!==r){if(v)continue;h=!1;break}if(m){if(!Pt(t,(function(e,t){if(!Jt(m,t)&&(g===e||i(g,e,o,n,s)))return m.push(t)}))){h=!1;break}}else if(g!==S&&!i(g,S,o,n,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Zn(e){return Ri(Ii(e,r,ji),e+"")}function Xn(e){return Eo(e,Ta,ui)}function ei(e){return Eo(e,Ra,di)}var ti=Cr?function(e){return Cr.get(e)}:ou;function ri(e){for(var t=e.name+"",r=Tr[t],o=Me.call(Tr,t)?r.length:0;o--;){var n=r[o],i=n.func;if(null==i||i==e)return n.name}return t}function oi(e){return(Me.call(kr,"placeholder")?kr:e).placeholder}function ni(){var e=kr.iteratee||Xa;return e=e===Xa?No:e,arguments.length?e(arguments[0],arguments[1]):e}function ii(e,t){var r,o,n=e.__data__;return("string"==(o=typeof(r=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map}function si(e){for(var t=Ta(e),r=t.length;r--;){var o=t[r],n=e[o];t[r]=[o,n,Ei(n)]}return t}function ai(e,t){var o=function(e,t){return null==e?r:e[t]}(e,t);return wo(o)?o:r}var ui=mt?function(e){return null==e?[]:(e=Ae(e),Tt(mt(e),(function(t){return Ge.call(e,t)})))}:cu,di=mt?function(e){for(var t=[];e;)wt(t,ui(e)),e=xe(e);return t}:cu,ci=_o;function li(e,t,r){for(var o=-1,n=(t=gn(t,e)).length,i=!1;++o<n;){var s=Mi(t[o]);if(!(i=null!=e&&r(e,s)))break;e=e[s]}return i||++o!=n?i:!!(n=null==e?0:e.length)&&Ks(n)&&mi(s,n)&&(Hs(e)||Bs(e))}function pi(e){return"function"!=typeof e.constructor||yi(e)?{}:Ur(xe(e))}function hi(e){return Hs(e)||Bs(e)||!!(qe&&e&&e[qe])}function mi(e,t){var r=typeof e;return!!(t=null==t?d:t)&&("number"==r||"symbol"!=r&&ge.test(e))&&e>-1&&e%1==0&&e<t}function gi(e,t,r){if(!Js(r))return!1;var o=typeof t;return!!("number"==o?Fs(r)&&mi(t,r.length):"string"==o&&t in r)&&ks(r[t],e)}function Si(e,t){if(Hs(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!oa(e))||Y.test(e)||!Q.test(e)||null!=t&&e in Ae(t)}function vi(e){var t=ri(e),r=kr[t];if("function"!=typeof r||!(t in Hr.prototype))return!1;if(e===r)return!0;var o=ti(r);return!!o&&e===o[0]}(yr&&ci(new yr(new ArrayBuffer(1)))!=w||Er&&ci(new Er)!=E||_r&&ci(_r.resolve())!=A||Ir&&ci(new Ir)!=C||Ar&&ci(new Ar)!=O)&&(ci=function(e){var t=_o(e),o=t==I?e.constructor:r,n=o?Pi(o):"";if(n)switch(n){case Rr:return w;case Or:return E;case Dr:return A;case wr:return C;case Nr:return O}return t});var fi=we?zs:lu;function yi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||De)}function Ei(e){return e==e&&!Js(e)}function _i(e,t){return function(o){return null!=o&&o[e]===t&&(t!==r||e in Ae(o))}}function Ii(e,t,o){return t=hr(t===r?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=hr(r.length-t,0),s=re(i);++n<i;)s[n]=r[t+n];n=-1;for(var a=re(t+1);++n<t;)a[n]=r[n];return a[t]=o(s),_t(e,this,a)}}function Ai(e,t){return t.length<2?e:yo(e,Zo(t,0,-1))}function bi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ci=Di(Jo),Ti=ct||function(e,t){return dt.setTimeout(e,t)},Ri=Di(Qo);function Oi(e,t,r){var o=t+"";return Ri(e,function(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(o,function(e,t){return At(p,(function(r){var o="_."+r[0];t&r[1]&&!Rt(e,o)&&e.push(o)})),e.sort()}(function(e){var t=e.match(ne);return t?t[1].split(ie):[]}(o),r)))}function Di(e){var t=0,o=0;return function(){var n=gr(),i=16-(n-o);if(o=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function wi(e,t){var o=-1,n=e.length,i=n-1;for(t=t===r?n:t;++o<t;){var s=xo(o,i),a=e[s];e[s]=e[o],e[o]=a}return e.length=t,e}var Ni=function(){var e=Ds((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Z,(function(e,r,o,n){t.push(o?n.replace(ue,"$1"):r||e)})),t}),(function(e){return 500===t.size&&t.clear(),e})),t=e.cache;return e}();function Mi(e){if("string"==typeof e||oa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Pi(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Li(e){if(e instanceof Hr)return e.clone();var t=new Br(e.__wrapped__,e.__chain__);return t.__actions__=Cn(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ki=Go((function(e,t){return Ws(e)?so(e,ho(t,1,Ws,!0)):[]})),Ui=Go((function(e,t){var o=Gi(t);return Ws(o)&&(o=r),Ws(e)?so(e,ho(t,1,Ws,!0),ni(o,2)):[]})),Vi=Go((function(e,t){var o=Gi(t);return Ws(o)&&(o=r),Ws(e)?so(e,ho(t,1,Ws,!0),r,o):[]}));function Bi(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var n=null==r?0:da(r);return n<0&&(n=hr(o+n,0)),Ut(e,ni(t,3),n)}function Hi(e,t,o){var n=null==e?0:e.length;if(!n)return-1;var i=n-1;return o!==r&&(i=da(o),i=o<0?hr(n+i,0):mr(i,n-1)),Ut(e,ni(t,3),i,!0)}function ji(e){return null!=e&&e.length?ho(e,1):[]}function Fi(e){return e&&e.length?e[0]:r}var Wi=Go((function(e){var t=Dt(e,hn);return t.length&&t[0]===e[0]?Co(t):[]})),xi=Go((function(e){var t=Gi(e),o=Dt(e,hn);return t===Gi(o)?t=r:o.pop(),o.length&&o[0]===e[0]?Co(o,ni(t,2)):[]})),$i=Go((function(e){var t=Gi(e),o=Dt(e,hn);return(t="function"==typeof t?t:r)&&o.pop(),o.length&&o[0]===e[0]?Co(o,r,t):[]}));function Gi(e){var t=null==e?0:e.length;return t?e[t-1]:r}var zi=Go(qi);function qi(e,t){return e&&e.length&&t&&t.length?Fo(e,t):e}var Ki=Zn((function(e,t){var r=null==e?0:e.length,o=to(e,t);return Wo(e,Dt(t,(function(e){return mi(e,r)?+e:e})).sort(In)),o}));function Ji(e){return null==e?e:fr.call(e)}var Qi=Go((function(e){return sn(ho(e,1,Ws,!0))})),Yi=Go((function(e){var t=Gi(e);return Ws(t)&&(t=r),sn(ho(e,1,Ws,!0),ni(t,2))})),Zi=Go((function(e){var t=Gi(e);return t="function"==typeof t?t:r,sn(ho(e,1,Ws,!0),r,t)}));function Xi(e){if(!e||!e.length)return[];var t=0;return e=Tt(e,(function(e){if(Ws(e))return t=hr(e.length,t),!0})),Gt(t,(function(t){return Dt(e,Ft(t))}))}function es(e,t){if(!e||!e.length)return[];var o=Xi(e);return null==t?o:Dt(o,(function(e){return _t(t,r,e)}))}var ts=Go((function(e,t){return Ws(e)?so(e,t):[]})),rs=Go((function(e){return ln(Tt(e,Ws))})),os=Go((function(e){var t=Gi(e);return Ws(t)&&(t=r),ln(Tt(e,Ws),ni(t,2))})),ns=Go((function(e){var t=Gi(e);return t="function"==typeof t?t:r,ln(Tt(e,Ws),r,t)})),is=Go(Xi),ss=Go((function(e){var t=e.length,o=t>1?e[t-1]:r;return o="function"==typeof o?(e.pop(),o):r,es(e,o)}));function as(e){var t=kr(e);return t.__chain__=!0,t}function us(e,t){return t(e)}var ds=Zn((function(e){var t=e.length,o=t?e[0]:0,n=this.__wrapped__,i=function(t){return to(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Hr&&mi(o)?((n=n.slice(o,+o+(t?1:0))).__actions__.push({func:us,args:[i],thisArg:r}),new Br(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(i)})),cs=Rn((function(e,t,r){Me.call(e,r)?++e[r]:eo(e,r,1)})),ls=Ln(Bi),ps=Ln(Hi);function hs(e,t){return(Hs(e)?At:ao)(e,ni(t,3))}function ms(e,t){return(Hs(e)?bt:uo)(e,ni(t,3))}var gs=Rn((function(e,t,r){Me.call(e,r)?e[r].push(t):eo(e,r,[t])})),Ss=Go((function(e,t,r){var o=-1,n="function"==typeof t,i=Fs(e)?re(e.length):[];return ao(e,(function(e){i[++o]=n?_t(t,e,r):To(e,t,r)})),i})),vs=Rn((function(e,t,r){eo(e,r,t)}));function fs(e,t){return(Hs(e)?Dt:Lo)(e,ni(t,3))}var ys=Rn((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),Es=Go((function(e,t){if(null==e)return[];var r=t.length;return r>1&&gi(e,t[0],t[1])?t=[]:r>2&&gi(t[0],t[1],t[2])&&(t=[t[0]]),Ho(e,ho(t,1),[])})),_s=ut||function(){return dt.Date.now()};function Is(e,t,o){return t=o?r:t,t=e&&null==t?e.length:t,qn(e,a,r,r,r,r,t)}function As(e,t){var n;if("function"!=typeof t)throw new Te(o);return e=da(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var bs=Go((function(e,t,r){var o=1;if(r.length){var n=nr(r,oi(bs));o|=s}return qn(e,o,t,r,n)})),Cs=Go((function(e,t,r){var o=3;if(r.length){var n=nr(r,oi(Cs));o|=s}return qn(t,o,e,r,n)}));function Ts(e,t,n){var i,s,a,u,d,c,l=0,p=!1,h=!1,m=!0;if("function"!=typeof e)throw new Te(o);function g(t){var o=i,n=s;return i=s=r,l=t,u=e.apply(n,o)}function S(e){var o=e-c;return c===r||o>=t||o<0||h&&e-l>=a}function v(){var e=_s();if(S(e))return f(e);d=Ti(v,function(e){var r=t-(e-c);return h?mr(r,a-(e-l)):r}(e))}function f(e){return d=r,m&&i?g(e):(i=s=r,u)}function y(){var e=_s(),o=S(e);if(i=arguments,s=this,c=e,o){if(d===r)return function(e){return l=e,d=Ti(v,t),p?g(e):u}(c);if(h)return fn(d),d=Ti(v,t),g(c)}return d===r&&(d=Ti(v,t)),u}return t=la(t)||0,Js(n)&&(p=!!n.leading,a=(h="maxWait"in n)?hr(la(n.maxWait)||0,t):a,m="trailing"in n?!!n.trailing:m),y.cancel=function(){d!==r&&fn(d),l=0,i=c=s=d=r},y.flush=function(){return d===r?u:f(_s())},y}var Rs=Go((function(e,t){return io(e,1,t)})),Os=Go((function(e,t,r){return io(e,la(t)||0,r)}));function Ds(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Te(o);var r=function(){var o=arguments,n=t?t.apply(this,o):o[0],i=r.cache;if(i.has(n))return i.get(n);var s=e.apply(this,o);return r.cache=i.set(n,s)||i,s};return r.cache=new(Ds.Cache||Wr),r}function ws(e){if("function"!=typeof e)throw new Te(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ds.Cache=Wr;var Ns=Sn((function(e,t){var r=(t=1==t.length&&Hs(t[0])?Dt(t[0],qt(ni())):Dt(ho(t,1),qt(ni()))).length;return Go((function(o){for(var n=-1,i=mr(o.length,r);++n<i;)o[n]=t[n].call(this,o[n]);return _t(e,this,o)}))})),Ms=Go((function(e,t){var o=nr(t,oi(Ms));return qn(e,s,r,t,o)})),Ps=Go((function(e,t){var o=nr(t,oi(Ps));return qn(e,64,r,t,o)})),Ls=Zn((function(e,t){return qn(e,256,r,r,r,t)}));function ks(e,t){return e===t||e!=e&&t!=t}var Us=Wn(Io),Vs=Wn((function(e,t){return e>=t})),Bs=Ro(function(){return arguments}())?Ro:function(e){return Qs(e)&&Me.call(e,"callee")&&!Ge.call(e,"callee")},Hs=re.isArray,js=gt?qt(gt):function(e){return Qs(e)&&_o(e)==D};function Fs(e){return null!=e&&Ks(e.length)&&!zs(e)}function Ws(e){return Qs(e)&&Fs(e)}var xs=Lt||lu,$s=St?qt(St):function(e){return Qs(e)&&_o(e)==S};function Gs(e){if(!Qs(e))return!1;var t=_o(e);return t==v||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Xs(e)}function zs(e){if(!Js(e))return!1;var t=_o(e);return t==f||t==y||"[object AsyncFunction]"==t||"[object Proxy]"==t}function qs(e){return"number"==typeof e&&e==da(e)}function Ks(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function Js(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Qs(e){return null!=e&&"object"==typeof e}var Ys=vt?qt(vt):function(e){return Qs(e)&&ci(e)==E};function Zs(e){return"number"==typeof e||Qs(e)&&_o(e)==_}function Xs(e){if(!Qs(e)||_o(e)!=I)return!1;var t=xe(e);if(null===t)return!0;var r=Me.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Ne.call(r)==Ue}var ea=ft?qt(ft):function(e){return Qs(e)&&_o(e)==b},ta=yt?qt(yt):function(e){return Qs(e)&&ci(e)==C};function ra(e){return"string"==typeof e||!Hs(e)&&Qs(e)&&_o(e)==T}function oa(e){return"symbol"==typeof e||Qs(e)&&_o(e)==R}var na=Et?qt(Et):function(e){return Qs(e)&&Ks(e.length)&&!!rt[_o(e)]},ia=Wn(Po),sa=Wn((function(e,t){return e<=t}));function aa(e){if(!e)return[];if(Fs(e))return ra(e)?ar(e):Cn(e);if(Qe&&e[Qe])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Qe]());var t=ci(e);return(t==E?rr:t==C?ir:ka)(e)}function ua(e){return e?(e=la(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function da(e){var t=ua(e),r=t%1;return t==t?r?t-r:t:0}function ca(e){return e?ro(da(e),0,l):0}function la(e){if("number"==typeof e)return e;if(oa(e))return c;if(Js(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Js(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=zt(e);var r=pe.test(e);return r||me.test(e)?st(e.slice(2),r?2:8):le.test(e)?c:+e}function pa(e){return Tn(e,Ra(e))}function ha(e){return null==e?"":nn(e)}var ma=On((function(e,t){if(yi(t)||Fs(t))Tn(t,Ta(t),e);else for(var r in t)Me.call(t,r)&&Qr(e,r,t[r])})),ga=On((function(e,t){Tn(t,Ra(t),e)})),Sa=On((function(e,t,r,o){Tn(t,Ra(t),e,o)})),va=On((function(e,t,r,o){Tn(t,Ta(t),e,o)})),fa=Zn(to),ya=Go((function(e,t){e=Ae(e);var o=-1,n=t.length,i=n>2?t[2]:r;for(i&&gi(t[0],t[1],i)&&(n=1);++o<n;)for(var s=t[o],a=Ra(s),u=-1,d=a.length;++u<d;){var c=a[u],l=e[c];(l===r||ks(l,De[c])&&!Me.call(e,c))&&(e[c]=s[c])}return e})),Ea=Go((function(e){return e.push(r,Jn),_t(Da,r,e)}));function _a(e,t,o){var n=null==e?r:yo(e,t);return n===r?o:n}function Ia(e,t){return null!=e&&li(e,t,bo)}var Aa=Vn((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ke.call(t)),e[t]=r}),Ja(Za)),ba=Vn((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ke.call(t)),Me.call(e,t)?e[t].push(r):e[t]=[r]}),ni),Ca=Go(To);function Ta(e){return Fs(e)?Gr(e):Mo(e)}function Ra(e){return Fs(e)?Gr(e,!0):function(e){if(!Js(e))return function(e){var t=[];if(null!=e)for(var r in Ae(e))t.push(r);return t}(e);var t=yi(e),r=[];for(var o in e)("constructor"!=o||!t&&Me.call(e,o))&&r.push(o);return r}(e)}var Oa=On((function(e,t,r){Vo(e,t,r)})),Da=On((function(e,t,r,o){Vo(e,t,r,o)})),wa=Zn((function(e,t){var r={};if(null==e)return r;var o=!1;t=Dt(t,(function(t){return t=gn(t,e),o||(o=t.length>1),t})),Tn(e,ei(e),r),o&&(r=oo(r,7,Qn));for(var n=t.length;n--;)an(r,t[n]);return r})),Na=Zn((function(e,t){return null==e?{}:function(e,t){return jo(e,t,(function(t,r){return Ia(e,r)}))}(e,t)}));function Ma(e,t){if(null==e)return{};var r=Dt(ei(e),(function(e){return[e]}));return t=ni(t),jo(e,r,(function(e,r){return t(e,r[0])}))}var Pa=zn(Ta),La=zn(Ra);function ka(e){return null==e?[]:Kt(e,Ta(e))}var Ua=Mn((function(e,t,r){return t=t.toLowerCase(),e+(r?Va(t):t)}));function Va(e){return Ga(ha(e).toLowerCase())}function Ba(e){return(e=ha(e))&&e.replace(Se,Zt).replace(Je,"")}var Ha=Mn((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),ja=Mn((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Fa=Nn("toLowerCase"),Wa=Mn((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),xa=Mn((function(e,t,r){return e+(r?" ":"")+Ga(t)})),$a=Mn((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Ga=Nn("toUpperCase");function za(e,t,o){return e=ha(e),(t=o?r:t)===r?function(e){return Xe.test(e)}(e)?function(e){return e.match(Ye)||[]}(e):function(e){return e.match(se)||[]}(e):e.match(t)||[]}var qa=Go((function(e,t){try{return _t(e,r,t)}catch(e){return Gs(e)?e:new Ee(e)}})),Ka=Zn((function(e,t){return At(t,(function(t){t=Mi(t),eo(e,t,bs(e[t],e))})),e}));function Ja(e){return function(){return e}}var Qa=kn(),Ya=kn(!0);function Za(e){return e}function Xa(e){return No("function"==typeof e?e:oo(e,1))}var eu=Go((function(e,t){return function(r){return To(r,e,t)}})),tu=Go((function(e,t){return function(r){return To(e,r,t)}}));function ru(e,t,r){var o=Ta(t),n=fo(t,o);null!=r||Js(t)&&(n.length||!o.length)||(r=t,t=e,e=this,n=fo(t,Ta(t)));var i=!(Js(r)&&"chain"in r&&!r.chain),s=zs(e);return At(n,(function(r){var o=t[r];e[r]=o,s&&(e.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=e(this.__wrapped__);return(r.__actions__=Cn(this.__actions__)).push({func:o,args:arguments,thisArg:e}),r.__chain__=t,r}return o.apply(e,wt([this.value()],arguments))})})),e}function ou(){}var nu=Hn(Dt),iu=Hn(Ct),su=Hn(Pt);function au(e){return Si(e)?Ft(Mi(e)):function(e){return function(t){return yo(t,e)}}(e)}var uu=Fn(),du=Fn(!0);function cu(){return[]}function lu(){return!1}var pu,hu=Bn((function(e,t){return e+t}),0),mu=$n("ceil"),gu=Bn((function(e,t){return e/t}),1),Su=$n("floor"),vu=Bn((function(e,t){return e*t}),1),fu=$n("round"),yu=Bn((function(e,t){return e-t}),0);return kr.after=function(e,t){if("function"!=typeof t)throw new Te(o);return e=da(e),function(){if(--e<1)return t.apply(this,arguments)}},kr.ary=Is,kr.assign=ma,kr.assignIn=ga,kr.assignInWith=Sa,kr.assignWith=va,kr.at=fa,kr.before=As,kr.bind=bs,kr.bindAll=Ka,kr.bindKey=Cs,kr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Hs(e)?e:[e]},kr.chain=as,kr.chunk=function(e,t,o){t=(o?gi(e,t,o):t===r)?1:hr(da(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var i=0,s=0,a=re(lt(n/t));i<n;)a[s++]=Zo(e,i,i+=t);return a},kr.compact=function(e){for(var t=-1,r=null==e?0:e.length,o=0,n=[];++t<r;){var i=e[t];i&&(n[o++]=i)}return n},kr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=re(e-1),r=arguments[0],o=e;o--;)t[o-1]=arguments[o];return wt(Hs(r)?Cn(r):[r],ho(t,1))},kr.cond=function(e){var t=null==e?0:e.length,r=ni();return e=t?Dt(e,(function(e){if("function"!=typeof e[1])throw new Te(o);return[r(e[0]),e[1]]})):[],Go((function(r){for(var o=-1;++o<t;){var n=e[o];if(_t(n[0],this,r))return _t(n[1],this,r)}}))},kr.conforms=function(e){return function(e){var t=Ta(e);return function(r){return no(r,e,t)}}(oo(e,1))},kr.constant=Ja,kr.countBy=cs,kr.create=function(e,t){var r=Ur(e);return null==t?r:Xr(r,t)},kr.curry=function e(t,o,n){var i=qn(t,8,r,r,r,r,r,o=n?r:o);return i.placeholder=e.placeholder,i},kr.curryRight=function e(t,o,n){var i=qn(t,16,r,r,r,r,r,o=n?r:o);return i.placeholder=e.placeholder,i},kr.debounce=Ts,kr.defaults=ya,kr.defaultsDeep=Ea,kr.defer=Rs,kr.delay=Os,kr.difference=ki,kr.differenceBy=Ui,kr.differenceWith=Vi,kr.drop=function(e,t,o){var n=null==e?0:e.length;return n?Zo(e,(t=o||t===r?1:da(t))<0?0:t,n):[]},kr.dropRight=function(e,t,o){var n=null==e?0:e.length;return n?Zo(e,0,(t=n-(t=o||t===r?1:da(t)))<0?0:t):[]},kr.dropRightWhile=function(e,t){return e&&e.length?dn(e,ni(t,3),!0,!0):[]},kr.dropWhile=function(e,t){return e&&e.length?dn(e,ni(t,3),!0):[]},kr.fill=function(e,t,o,n){var i=null==e?0:e.length;return i?(o&&"number"!=typeof o&&gi(e,t,o)&&(o=0,n=i),function(e,t,o,n){var i=e.length;for((o=da(o))<0&&(o=-o>i?0:i+o),(n=n===r||n>i?i:da(n))<0&&(n+=i),n=o>n?0:ca(n);o<n;)e[o++]=t;return e}(e,t,o,n)):[]},kr.filter=function(e,t){return(Hs(e)?Tt:po)(e,ni(t,3))},kr.flatMap=function(e,t){return ho(fs(e,t),1)},kr.flatMapDeep=function(e,t){return ho(fs(e,t),u)},kr.flatMapDepth=function(e,t,o){return o=o===r?1:da(o),ho(fs(e,t),o)},kr.flatten=ji,kr.flattenDeep=function(e){return null!=e&&e.length?ho(e,u):[]},kr.flattenDepth=function(e,t){return null!=e&&e.length?ho(e,t=t===r?1:da(t)):[]},kr.flip=function(e){return qn(e,512)},kr.flow=Qa,kr.flowRight=Ya,kr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,o={};++t<r;){var n=e[t];o[n[0]]=n[1]}return o},kr.functions=function(e){return null==e?[]:fo(e,Ta(e))},kr.functionsIn=function(e){return null==e?[]:fo(e,Ra(e))},kr.groupBy=gs,kr.initial=function(e){return null!=e&&e.length?Zo(e,0,-1):[]},kr.intersection=Wi,kr.intersectionBy=xi,kr.intersectionWith=$i,kr.invert=Aa,kr.invertBy=ba,kr.invokeMap=Ss,kr.iteratee=Xa,kr.keyBy=vs,kr.keys=Ta,kr.keysIn=Ra,kr.map=fs,kr.mapKeys=function(e,t){var r={};return t=ni(t,3),So(e,(function(e,o,n){eo(r,t(e,o,n),e)})),r},kr.mapValues=function(e,t){var r={};return t=ni(t,3),So(e,(function(e,o,n){eo(r,o,t(e,o,n))})),r},kr.matches=function(e){return ko(oo(e,1))},kr.matchesProperty=function(e,t){return Uo(e,oo(t,1))},kr.memoize=Ds,kr.merge=Oa,kr.mergeWith=Da,kr.method=eu,kr.methodOf=tu,kr.mixin=ru,kr.negate=ws,kr.nthArg=function(e){return e=da(e),Go((function(t){return Bo(t,e)}))},kr.omit=wa,kr.omitBy=function(e,t){return Ma(e,ws(ni(t)))},kr.once=function(e){return As(2,e)},kr.orderBy=function(e,t,o,n){return null==e?[]:(Hs(t)||(t=null==t?[]:[t]),Hs(o=n?r:o)||(o=null==o?[]:[o]),Ho(e,t,o))},kr.over=nu,kr.overArgs=Ns,kr.overEvery=iu,kr.overSome=su,kr.partial=Ms,kr.partialRight=Ps,kr.partition=ys,kr.pick=Na,kr.pickBy=Ma,kr.property=au,kr.propertyOf=function(e){return function(t){return null==e?r:yo(e,t)}},kr.pull=zi,kr.pullAll=qi,kr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Fo(e,t,ni(r,2)):e},kr.pullAllWith=function(e,t,o){return e&&e.length&&t&&t.length?Fo(e,t,r,o):e},kr.pullAt=Ki,kr.range=uu,kr.rangeRight=du,kr.rearg=Ls,kr.reject=function(e,t){return(Hs(e)?Tt:po)(e,ws(ni(t,3)))},kr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var o=-1,n=[],i=e.length;for(t=ni(t,3);++o<i;){var s=e[o];t(s,o,e)&&(r.push(s),n.push(o))}return Wo(e,n),r},kr.rest=function(e,t){if("function"!=typeof e)throw new Te(o);return Go(e,t=t===r?t:da(t))},kr.reverse=Ji,kr.sampleSize=function(e,t,o){return t=(o?gi(e,t,o):t===r)?1:da(t),(Hs(e)?qr:qo)(e,t)},kr.set=function(e,t,r){return null==e?e:Ko(e,t,r)},kr.setWith=function(e,t,o,n){return n="function"==typeof n?n:r,null==e?e:Ko(e,t,o,n)},kr.shuffle=function(e){return(Hs(e)?Kr:Yo)(e)},kr.slice=function(e,t,o){var n=null==e?0:e.length;return n?(o&&"number"!=typeof o&&gi(e,t,o)?(t=0,o=n):(t=null==t?0:da(t),o=o===r?n:da(o)),Zo(e,t,o)):[]},kr.sortBy=Es,kr.sortedUniq=function(e){return e&&e.length?rn(e):[]},kr.sortedUniqBy=function(e,t){return e&&e.length?rn(e,ni(t,2)):[]},kr.split=function(e,t,o){return o&&"number"!=typeof o&&gi(e,t,o)&&(t=o=r),(o=o===r?l:o>>>0)?(e=ha(e))&&("string"==typeof t||null!=t&&!ea(t))&&!(t=nn(t))&&tr(e)?vn(ar(e),0,o):e.split(t,o):[]},kr.spread=function(e,t){if("function"!=typeof e)throw new Te(o);return t=null==t?0:hr(da(t),0),Go((function(r){var o=r[t],n=vn(r,0,t);return o&&wt(n,o),_t(e,this,n)}))},kr.tail=function(e){var t=null==e?0:e.length;return t?Zo(e,1,t):[]},kr.take=function(e,t,o){return e&&e.length?Zo(e,0,(t=o||t===r?1:da(t))<0?0:t):[]},kr.takeRight=function(e,t,o){var n=null==e?0:e.length;return n?Zo(e,(t=n-(t=o||t===r?1:da(t)))<0?0:t,n):[]},kr.takeRightWhile=function(e,t){return e&&e.length?dn(e,ni(t,3),!1,!0):[]},kr.takeWhile=function(e,t){return e&&e.length?dn(e,ni(t,3)):[]},kr.tap=function(e,t){return t(e),e},kr.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new Te(o);return Js(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Ts(e,t,{leading:n,maxWait:t,trailing:i})},kr.thru=us,kr.toArray=aa,kr.toPairs=Pa,kr.toPairsIn=La,kr.toPath=function(e){return Hs(e)?Dt(e,Mi):oa(e)?[e]:Cn(Ni(ha(e)))},kr.toPlainObject=pa,kr.transform=function(e,t,r){var o=Hs(e),n=o||xs(e)||na(e);if(t=ni(t,4),null==r){var i=e&&e.constructor;r=n?o?new i:[]:Js(e)&&zs(i)?Ur(xe(e)):{}}return(n?At:So)(e,(function(e,o,n){return t(r,e,o,n)})),r},kr.unary=function(e){return Is(e,1)},kr.union=Qi,kr.unionBy=Yi,kr.unionWith=Zi,kr.uniq=function(e){return e&&e.length?sn(e):[]},kr.uniqBy=function(e,t){return e&&e.length?sn(e,ni(t,2)):[]},kr.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?sn(e,r,t):[]},kr.unset=function(e,t){return null==e||an(e,t)},kr.unzip=Xi,kr.unzipWith=es,kr.update=function(e,t,r){return null==e?e:un(e,t,mn(r))},kr.updateWith=function(e,t,o,n){return n="function"==typeof n?n:r,null==e?e:un(e,t,mn(o),n)},kr.values=ka,kr.valuesIn=function(e){return null==e?[]:Kt(e,Ra(e))},kr.without=ts,kr.words=za,kr.wrap=function(e,t){return Ms(mn(t),e)},kr.xor=rs,kr.xorBy=os,kr.xorWith=ns,kr.zip=is,kr.zipObject=function(e,t){return pn(e||[],t||[],Qr)},kr.zipObjectDeep=function(e,t){return pn(e||[],t||[],Ko)},kr.zipWith=ss,kr.entries=Pa,kr.entriesIn=La,kr.extend=ga,kr.extendWith=Sa,ru(kr,kr),kr.add=hu,kr.attempt=qa,kr.camelCase=Ua,kr.capitalize=Va,kr.ceil=mu,kr.clamp=function(e,t,o){return o===r&&(o=t,t=r),o!==r&&(o=(o=la(o))==o?o:0),t!==r&&(t=(t=la(t))==t?t:0),ro(la(e),t,o)},kr.clone=function(e){return oo(e,4)},kr.cloneDeep=function(e){return oo(e,5)},kr.cloneDeepWith=function(e,t){return oo(e,5,t="function"==typeof t?t:r)},kr.cloneWith=function(e,t){return oo(e,4,t="function"==typeof t?t:r)},kr.conformsTo=function(e,t){return null==t||no(e,t,Ta(t))},kr.deburr=Ba,kr.defaultTo=function(e,t){return null==e||e!=e?t:e},kr.divide=gu,kr.endsWith=function(e,t,o){e=ha(e),t=nn(t);var n=e.length,i=o=o===r?n:ro(da(o),0,n);return(o-=t.length)>=0&&e.slice(o,i)==t},kr.eq=ks,kr.escape=function(e){return(e=ha(e))&&z.test(e)?e.replace($,Xt):e},kr.escapeRegExp=function(e){return(e=ha(e))&&ee.test(e)?e.replace(X,"\\$&"):e},kr.every=function(e,t,o){var n=Hs(e)?Ct:co;return o&&gi(e,t,o)&&(t=r),n(e,ni(t,3))},kr.find=ls,kr.findIndex=Bi,kr.findKey=function(e,t){return kt(e,ni(t,3),So)},kr.findLast=ps,kr.findLastIndex=Hi,kr.findLastKey=function(e,t){return kt(e,ni(t,3),vo)},kr.floor=Su,kr.forEach=hs,kr.forEachRight=ms,kr.forIn=function(e,t){return null==e?e:mo(e,ni(t,3),Ra)},kr.forInRight=function(e,t){return null==e?e:go(e,ni(t,3),Ra)},kr.forOwn=function(e,t){return e&&So(e,ni(t,3))},kr.forOwnRight=function(e,t){return e&&vo(e,ni(t,3))},kr.get=_a,kr.gt=Us,kr.gte=Vs,kr.has=function(e,t){return null!=e&&li(e,t,Ao)},kr.hasIn=Ia,kr.head=Fi,kr.identity=Za,kr.includes=function(e,t,r,o){e=Fs(e)?e:ka(e),r=r&&!o?da(r):0;var n=e.length;return r<0&&(r=hr(n+r,0)),ra(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&Vt(e,t,r)>-1},kr.indexOf=function(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var n=null==r?0:da(r);return n<0&&(n=hr(o+n,0)),Vt(e,t,n)},kr.inRange=function(e,t,o){return t=ua(t),o===r?(o=t,t=0):o=ua(o),function(e,t,r){return e>=mr(t,r)&&e<hr(t,r)}(e=la(e),t,o)},kr.invoke=Ca,kr.isArguments=Bs,kr.isArray=Hs,kr.isArrayBuffer=js,kr.isArrayLike=Fs,kr.isArrayLikeObject=Ws,kr.isBoolean=function(e){return!0===e||!1===e||Qs(e)&&_o(e)==g},kr.isBuffer=xs,kr.isDate=$s,kr.isElement=function(e){return Qs(e)&&1===e.nodeType&&!Xs(e)},kr.isEmpty=function(e){if(null==e)return!0;if(Fs(e)&&(Hs(e)||"string"==typeof e||"function"==typeof e.splice||xs(e)||na(e)||Bs(e)))return!e.length;var t=ci(e);if(t==E||t==C)return!e.size;if(yi(e))return!Mo(e).length;for(var r in e)if(Me.call(e,r))return!1;return!0},kr.isEqual=function(e,t){return Oo(e,t)},kr.isEqualWith=function(e,t,o){var n=(o="function"==typeof o?o:r)?o(e,t):r;return n===r?Oo(e,t,r,o):!!n},kr.isError=Gs,kr.isFinite=function(e){return"number"==typeof e&&Wt(e)},kr.isFunction=zs,kr.isInteger=qs,kr.isLength=Ks,kr.isMap=Ys,kr.isMatch=function(e,t){return e===t||Do(e,t,si(t))},kr.isMatchWith=function(e,t,o){return o="function"==typeof o?o:r,Do(e,t,si(t),o)},kr.isNaN=function(e){return Zs(e)&&e!=+e},kr.isNative=function(e){if(fi(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wo(e)},kr.isNil=function(e){return null==e},kr.isNull=function(e){return null===e},kr.isNumber=Zs,kr.isObject=Js,kr.isObjectLike=Qs,kr.isPlainObject=Xs,kr.isRegExp=ea,kr.isSafeInteger=function(e){return qs(e)&&e>=-9007199254740991&&e<=d},kr.isSet=ta,kr.isString=ra,kr.isSymbol=oa,kr.isTypedArray=na,kr.isUndefined=function(e){return e===r},kr.isWeakMap=function(e){return Qs(e)&&ci(e)==O},kr.isWeakSet=function(e){return Qs(e)&&"[object WeakSet]"==_o(e)},kr.join=function(e,t){return null==e?"":lr.call(e,t)},kr.kebabCase=Ha,kr.last=Gi,kr.lastIndexOf=function(e,t,o){var n=null==e?0:e.length;if(!n)return-1;var i=n;return o!==r&&(i=(i=da(o))<0?hr(n+i,0):mr(i,n-1)),t==t?function(e,t,r){for(var o=r+1;o--;)if(e[o]===t)return o;return o}(e,t,i):Ut(e,Ht,i,!0)},kr.lowerCase=ja,kr.lowerFirst=Fa,kr.lt=ia,kr.lte=sa,kr.max=function(e){return e&&e.length?lo(e,Za,Io):r},kr.maxBy=function(e,t){return e&&e.length?lo(e,ni(t,2),Io):r},kr.mean=function(e){return jt(e,Za)},kr.meanBy=function(e,t){return jt(e,ni(t,2))},kr.min=function(e){return e&&e.length?lo(e,Za,Po):r},kr.minBy=function(e,t){return e&&e.length?lo(e,ni(t,2),Po):r},kr.stubArray=cu,kr.stubFalse=lu,kr.stubObject=function(){return{}},kr.stubString=function(){return""},kr.stubTrue=function(){return!0},kr.multiply=vu,kr.nth=function(e,t){return e&&e.length?Bo(e,da(t)):r},kr.noConflict=function(){return dt._===this&&(dt._=Ve),this},kr.noop=ou,kr.now=_s,kr.pad=function(e,t,r){e=ha(e);var o=(t=da(t))?sr(e):0;if(!t||o>=t)return e;var n=(t-o)/2;return jn(ht(n),r)+e+jn(lt(n),r)},kr.padEnd=function(e,t,r){e=ha(e);var o=(t=da(t))?sr(e):0;return t&&o<t?e+jn(t-o,r):e},kr.padStart=function(e,t,r){e=ha(e);var o=(t=da(t))?sr(e):0;return t&&o<t?jn(t-o,r)+e:e},kr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),Sr(ha(e).replace(te,""),t||0)},kr.random=function(e,t,o){if(o&&"boolean"!=typeof o&&gi(e,t,o)&&(t=o=r),o===r&&("boolean"==typeof t?(o=t,t=r):"boolean"==typeof e&&(o=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ua(e),t===r?(t=e,e=0):t=ua(t)),e>t){var n=e;e=t,t=n}if(o||e%1||t%1){var i=vr();return mr(e+i*(t-e+it("1e-"+((i+"").length-1))),t)}return xo(e,t)},kr.reduce=function(e,t,r){var o=Hs(e)?Nt:xt,n=arguments.length<3;return o(e,ni(t,4),r,n,ao)},kr.reduceRight=function(e,t,r){var o=Hs(e)?Mt:xt,n=arguments.length<3;return o(e,ni(t,4),r,n,uo)},kr.repeat=function(e,t,o){return t=(o?gi(e,t,o):t===r)?1:da(t),$o(ha(e),t)},kr.replace=function(){var e=arguments,t=ha(e[0]);return e.length<3?t:t.replace(e[1],e[2])},kr.result=function(e,t,o){var n=-1,i=(t=gn(t,e)).length;for(i||(i=1,e=r);++n<i;){var s=null==e?r:e[Mi(t[n])];s===r&&(n=i,s=o),e=zs(s)?s.call(e):s}return e},kr.round=fu,kr.runInContext=e,kr.sample=function(e){return(Hs(e)?zr:zo)(e)},kr.size=function(e){if(null==e)return 0;if(Fs(e))return ra(e)?sr(e):e.length;var t=ci(e);return t==E||t==C?e.size:Mo(e).length},kr.snakeCase=Wa,kr.some=function(e,t,o){var n=Hs(e)?Pt:Xo;return o&&gi(e,t,o)&&(t=r),n(e,ni(t,3))},kr.sortedIndex=function(e,t){return en(e,t)},kr.sortedIndexBy=function(e,t,r){return tn(e,t,ni(r,2))},kr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var o=en(e,t);if(o<r&&ks(e[o],t))return o}return-1},kr.sortedLastIndex=function(e,t){return en(e,t,!0)},kr.sortedLastIndexBy=function(e,t,r){return tn(e,t,ni(r,2),!0)},kr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=en(e,t,!0)-1;if(ks(e[r],t))return r}return-1},kr.startCase=xa,kr.startsWith=function(e,t,r){return e=ha(e),r=null==r?0:ro(da(r),0,e.length),t=nn(t),e.slice(r,r+t.length)==t},kr.subtract=yu,kr.sum=function(e){return e&&e.length?$t(e,Za):0},kr.sumBy=function(e,t){return e&&e.length?$t(e,ni(t,2)):0},kr.template=function(e,t,o){var n=kr.templateSettings;o&&gi(e,t,o)&&(t=r),e=ha(e),t=Sa({},t,n,Kn);var i,s,a=Sa({},t.imports,n.imports,Kn),u=Ta(a),d=Kt(a,u),c=0,l=t.interpolate||ve,p="__p += '",h=be((t.escape||ve).source+"|"+l.source+"|"+(l===J?de:ve).source+"|"+(t.evaluate||ve).source+"|$","g"),m="//# sourceURL="+(Me.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tt+"]")+"\n";e.replace(h,(function(t,r,o,n,a,u){return o||(o=n),p+=e.slice(c,u).replace(fe,er),r&&(i=!0,p+="' +\n__e("+r+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),o&&(p+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),p+="';\n";var g=Me.call(t,"variable")&&t.variable;if(g){if(ae.test(g))throw new Ee("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(s?p.replace(j,""):p).replace(F,"$1").replace(W,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var S=qa((function(){return _e(u,m+"return "+p).apply(r,d)}));if(S.source=p,Gs(S))throw S;return S},kr.times=function(e,t){if((e=da(e))<1||e>d)return[];var r=l,o=mr(e,l);t=ni(t),e-=l;for(var n=Gt(o,t);++r<e;)t(r);return n},kr.toFinite=ua,kr.toInteger=da,kr.toLength=ca,kr.toLower=function(e){return ha(e).toLowerCase()},kr.toNumber=la,kr.toSafeInteger=function(e){return e?ro(da(e),-9007199254740991,d):0===e?e:0},kr.toString=ha,kr.toUpper=function(e){return ha(e).toUpperCase()},kr.trim=function(e,t,o){if((e=ha(e))&&(o||t===r))return zt(e);if(!e||!(t=nn(t)))return e;var n=ar(e),i=ar(t);return vn(n,Qt(n,i),Yt(n,i)+1).join("")},kr.trimEnd=function(e,t,o){if((e=ha(e))&&(o||t===r))return e.slice(0,ur(e)+1);if(!e||!(t=nn(t)))return e;var n=ar(e);return vn(n,0,Yt(n,ar(t))+1).join("")},kr.trimStart=function(e,t,o){if((e=ha(e))&&(o||t===r))return e.replace(te,"");if(!e||!(t=nn(t)))return e;var n=ar(e);return vn(n,Qt(n,ar(t))).join("")},kr.truncate=function(e,t){var o=30,n="...";if(Js(t)){var i="separator"in t?t.separator:i;o="length"in t?da(t.length):o,n="omission"in t?nn(t.omission):n}var s=(e=ha(e)).length;if(tr(e)){var a=ar(e);s=a.length}if(o>=s)return e;var u=o-sr(n);if(u<1)return n;var d=a?vn(a,0,u).join(""):e.slice(0,u);if(i===r)return d+n;if(a&&(u+=d.length-u),ea(i)){if(e.slice(u).search(i)){var c,l=d;for(i.global||(i=be(i.source,ha(ce.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var p=c.index;d=d.slice(0,p===r?u:p)}}else if(e.indexOf(nn(i),u)!=u){var h=d.lastIndexOf(i);h>-1&&(d=d.slice(0,h))}return d+n},kr.unescape=function(e){return(e=ha(e))&&G.test(e)?e.replace(x,dr):e},kr.uniqueId=function(e){var t=++Pe;return ha(e)+t},kr.upperCase=$a,kr.upperFirst=Ga,kr.each=hs,kr.eachRight=ms,kr.first=Fi,ru(kr,(pu={},So(kr,(function(e,t){Me.call(kr.prototype,t)||(pu[t]=e)})),pu),{chain:!1}),kr.VERSION="4.17.21",At(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){kr[e].placeholder=kr})),At(["drop","take"],(function(e,t){Hr.prototype[e]=function(o){o=o===r?1:hr(da(o),0);var n=this.__filtered__&&!t?new Hr(this):this.clone();return n.__filtered__?n.__takeCount__=mr(o,n.__takeCount__):n.__views__.push({size:mr(o,l),type:e+(n.__dir__<0?"Right":"")}),n},Hr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),At(["filter","map","takeWhile"],(function(e,t){var r=t+1,o=1==r||3==r;Hr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ni(e,3),type:r}),t.__filtered__=t.__filtered__||o,t}})),At(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Hr.prototype[e]=function(){return this[r](1).value()[0]}})),At(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Hr.prototype[e]=function(){return this.__filtered__?new Hr(this):this[r](1)}})),Hr.prototype.compact=function(){return this.filter(Za)},Hr.prototype.find=function(e){return this.filter(e).head()},Hr.prototype.findLast=function(e){return this.reverse().find(e)},Hr.prototype.invokeMap=Go((function(e,t){return"function"==typeof e?new Hr(this):this.map((function(r){return To(r,e,t)}))})),Hr.prototype.reject=function(e){return this.filter(ws(ni(e)))},Hr.prototype.slice=function(e,t){e=da(e);var o=this;return o.__filtered__&&(e>0||t<0)?new Hr(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),t!==r&&(o=(t=da(t))<0?o.dropRight(-t):o.take(t-e)),o)},Hr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hr.prototype.toArray=function(){return this.take(l)},So(Hr.prototype,(function(e,t){var o=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),i=kr[n?"take"+("last"==t?"Right":""):t],s=n||/^find/.test(t);i&&(kr.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,u=t instanceof Hr,d=a[0],c=u||Hs(t),l=function(e){var t=i.apply(kr,wt([e],a));return n&&p?t[0]:t};c&&o&&"function"==typeof d&&1!=d.length&&(u=c=!1);var p=this.__chain__,h=!!this.__actions__.length,m=s&&!p,g=u&&!h;if(!s&&c){t=g?t:new Hr(this);var S=e.apply(t,a);return S.__actions__.push({func:us,args:[l],thisArg:r}),new Br(S,p)}return m&&g?e.apply(this,a):(S=this.thru(l),m?n?S.value()[0]:S.value():S)})})),At(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);kr.prototype[e]=function(){var e=arguments;if(o&&!this.__chain__){var n=this.value();return t.apply(Hs(n)?n:[],e)}return this[r]((function(r){return t.apply(Hs(r)?r:[],e)}))}})),So(Hr.prototype,(function(e,t){var r=kr[t];if(r){var o=r.name+"";Me.call(Tr,o)||(Tr[o]=[]),Tr[o].push({name:t,func:r})}})),Tr[Un(r,2).name]=[{name:"wrapper",func:r}],Hr.prototype.clone=function(){var e=new Hr(this.__wrapped__);return e.__actions__=Cn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Cn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Cn(this.__views__),e},Hr.prototype.reverse=function(){if(this.__filtered__){var e=new Hr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Hs(e),o=t<0,n=r?e.length:0,i=function(e,t,r){for(var o=-1,n=r.length;++o<n;){var i=r[o],s=i.size;switch(i.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=mr(t,e+s);break;case"takeRight":e=hr(e,t-s)}}return{start:e,end:t}}(0,n,this.__views__),s=i.start,a=i.end,u=a-s,d=o?a:s-1,c=this.__iteratees__,l=c.length,p=0,h=mr(u,this.__takeCount__);if(!r||!o&&n==u&&h==u)return cn(e,this.__actions__);var m=[];e:for(;u--&&p<h;){for(var g=-1,S=e[d+=t];++g<l;){var v=c[g],f=v.iteratee,y=v.type,E=f(S);if(2==y)S=E;else if(!E){if(1==y)continue e;break e}}m[p++]=S}return m},kr.prototype.at=ds,kr.prototype.chain=function(){return as(this)},kr.prototype.commit=function(){return new Br(this.value(),this.__chain__)},kr.prototype.next=function(){this.__values__===r&&(this.__values__=aa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},kr.prototype.plant=function(e){for(var t,o=this;o instanceof Vr;){var n=Li(o);n.__index__=0,n.__values__=r,t?i.__wrapped__=n:t=n;var i=n;o=o.__wrapped__}return i.__wrapped__=e,t},kr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hr){var t=e;return this.__actions__.length&&(t=new Hr(this)),(t=t.reverse()).__actions__.push({func:us,args:[Ji],thisArg:r}),new Br(t,this.__chain__)}return this.thru(Ji)},kr.prototype.toJSON=kr.prototype.valueOf=kr.prototype.value=function(){return cn(this.__wrapped__,this.__actions__)},kr.prototype.first=kr.prototype.head,Qe&&(kr.prototype[Qe]=function(){return this}),kr}();lt?((lt.exports=cr)._=cr,ct._=cr):dt._=cr}).call(yb)}(fb,fb.exports)),fb.exports),_b=pc(Eb);const Ib=tu([({whiteboard:e})=>e,Tu],((e,t)=>{const{whiteboardPermissionCode:r,whiteboardInitRole:o}=e;return null!=t&&t.isCoHost?null==t||!t.isCoHost||o!==TS.InternalUser:r!==bS.WbSettingLockShareSecurity&&o!==TS.HostOnly&&o!==TS.InternalUser&&(TS.AllParticipants,!0)})),Ab="SET_WHITEBOARD_INIT_ROLE",{setWhiteboardCapability:bb,setIsWbSettingVisible:Cb,setIsShowWhiteboardWindow:Tb,setWhiteboardStatus:Rb,setDashboardStatus:Ob,setDashboardId:Db,setWhiteboardConfig:wb,setWhiteboardSharer:Nb,setWhiteboardPermissionCode:Mb,setWhiteboardToken:Pb,getWhiteboardToken:Lb,getWhiteboardTokenSuccess:kb,getWhiteboardTokenFailure:Ub,setIsWhiteboardShareStreamOn:Vb,setIsWhiteboardCanvasReady:Bb,setHasStartWhiteboardShare:Hb,whiteboardReset:jb,toggleShowPermissionWidget:Fb,setWhiteboardPrivilegeRole:Wb,setWhiteboardInitWithoutHost:xb,setIsWhiteboardWindowLoading:$b,setHaveAccessAfterMeeting:Gb,setWhiteboardError:zb,setWhiteboardElement:qb,setIsDisableExport:Kb,setWhiteboardCdnPath:Jb,setWhiteboardShareOptionsLocked:Qb,whiteboardMessageEvent:Yb,whiteboardRenderEvent:Zb,whiteboardStatusEvent:Xb,whiteboardIndicationMessageEvent:eC,whiteboardCanvasReadyEvent:tC,setWhiteboardOpenType:rC}=Fc("SET_WHITEBOARD_CAPABILITY","SET_IS_WB_SETTING_VISIBLE","SET_IS_SHOW_WHITEBOARD_WINDOW","SET_WHITEBOARD_STATUS","SET_DASHBOARD_STATUS","SET_DASHBOARD_ID","SET_WHITEBOARD_CONFIG","SET_WHITEBOARD_SHARER","SET_WHITEBOARD_PERMISSION_CODE","SET_WHITEBOARD_TOKEN","GET_WHITEBOARD_TOKEN","GET_WHITEBOARD_TOKEN_SUCCESS","GET_WHITEBOARD_TOKEN_FAILURE","SET_IS_WHITEBOARD_SHARE_STREAM_ON","SET_IS_WHITEBOARD_CANVAS_READY","SET_HAS_START_WHITEBOARD_SHARE","WHITEBOARD_RESET","TOGGLE_SHOW_PERMISSION_WIDGET",Ab,"SET_WHITEBOARD_INIT_WITHOUT_HOST","SET_IS_WHITEBOARD_WINDOW_LOADING","SET_HAVE_ACCESS_AFTER_MEETING","SET_WHITEBOARD_ERROR","SET_WHITEBOARD_ELEMENT",Ab,"SET_IS_DISABLE_EXPORT","SET_WHITEBOARD_PRIVILEGE_ROLE","SET_WHITEBOARD_CDN_PATH","SET_WHITEBOARD_SHARE_OPTIONS_LOCKED","WHITEBOARD_MESSAGE_EVENT","WHITEBOARD_RENDER_EVENT","WHITEBOARD_CANVAS_READY_EVENT","WHITEBOARD_STATUS_EVENT","WHITEBOARD_INDICATION_MESSAGE_EVENT","SET_WHITEBOARD_OPEN_TYPE");TE.getInstance();const oC=(e,t)=>{const r=document.getElementById(t);let o=`https://${y()}`;null!=r&&r.src&&(o=new URL(r.src).origin),r&&r.contentWindow&&r.contentWindow.postMessage({type:DS,data:e},o)};function nC(e,t){const r=wS[t]||"Unknown error";return e(Rb(RS.ERROR)),$a(Na,{type:RS.ERROR,payload:{errorCode:t,errorMessage:r}}),e(zb({errorCode:t,errorMessage:r})),Promise.reject({type:Ke,reason:r,errorCode:t})}function iC(e){return Promise.reject({type:Ke,reason:wS[e]||"Unknown error",errorCode:e})}function sC(e){return{type:Ke,reason:wS[e]||"Unknown error",errorCode:e}}const aC=e=>{const{whiteboard:{whiteboardSharer:{presenterID:t,dcsID:r}},meeting:{userId:o,meetingStatus:n}}=e;return Boolean(n===Ho.Joined&&t&&r&&t!==o)},uC=TE.getInstance().makeLogger(["Remote Control"]),dC=NE(ju.getInstance()),cC=(e,t,r)=>{const o={setAttribute:(e,t)=>{o[e]=t},getAttribute:e=>o[e]||null,removeAttribute:e=>{delete o[e]},tagName:r.toUpperCase(),id:`dummy-render-${e}-${t}`,isDummy:!0,canvasId:t,toString:()=>`DummyVideoPlayer(${e}, ${t})`};return o.setAttribute("node-id",`${e}`),o.setAttribute("media-type","share"),o.setAttribute("render-type","canvas"),o};function lC(e,t,r,o,n){let{share:{activeNodeId:i,shareQuality:s}}=t;const{share:{isReceiveSharingFromMainSession:a}}=t;r&&(i=r),void 0!==o&&(s=o);const u=KE(t);e.subscribeSharing(i,s,a,u,n)}class pC{constructor(){this.checkerSubject=void 0,this.checkerSubscription=void 0}startCheck(e){return this.checkerSubject&&this.stopCheck(),this.checkerSubject=new Vt,this.checkerSubscription=ro(e).subscribe(this.checkerSubject),this.checkerSubject}stopCheck(){var e;this.checkerSubject&&(this.checkerSubject.complete(),null===(e=this.checkerSubscription)||void 0===e||e.unsubscribe(),this.checkerSubject=void 0)}}const hC=new pC,mC=new pC;function gC(){return hC.stopCheck()}function SC(){return mC.stopCheck()}function vC(e,t){gC(),SC();const{share:{remoteControllingSsrc:r},meeting:{userId:o}}=e;r&&(yC(),t.takeBackRemoteControlPermission(o,r))}async function fC(e,t,r,o,n){const{share:{isSDKGrabControl:i,isGrabRemoteControl:s}}=r;if(!s){o.subscribeGrabRemoteControl(e,!0);try{await Nr(Ka(us,1).pipe(uo((e=>!!e))))}catch(e){}}const a=zE(r);a&&(i?(n.resendRemoteControlPositionPDU(),n.updateRemoteControlProperties({os:a.os,isControllerNow:!0,dimension:t&&kd(t)})):t&&n.startRemoteControl(t,a.os,kd(t)))}function yC(){uC.log("qr scanning stop"),dC.startRemoteControlQRCheck(!1)}function EC(e,t,r){var o;const{audio:n}=t;if((null==n||null===(o=n.localShareAudioUserMutedList)||void 0===o?void 0:o.length)>0){const{localShareAudioUserMutedList:o}=n,i=o.find((t=>t.userId===e));Zd(e,!(null==i||!i.muted),t,r)}}function _C(e,t,r){const o=e.find((e=>e.ssrc===t));return null!=o&&o.isInitialized?Promise.reject({type:Ke,reason:"Cannot start share view due to annotation is in progress.",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE}):(r.stopPresenterAnnotation(t),null)}function IC(e,t){return-1===e.findIndex((e=>e.userId===t))?Promise.reject({type:Xe,reason:"Target user is not sharing",errorCode:wa.STREAM_MISMATCH_USER}):null}function AC(){return C.isAndroidOrIOSBrowser||C.isHarmonyOS||C.is32bitChrome?1:4}async function bC(e,t,r,o){var n,i,s;const{meeting:{bIbDisableShare:a},share:{isReceiveSharingFromMainSession:u,annotationUsers:l,ssrc:p},audio:h,whiteboard:m}=t;if(null!=m&&null!==(n=m.whiteboardSharer)&&void 0!==n&&n.presenterID&&null!=m&&null!==(i=m.whiteboardSharer)&&void 0!==i&&i.dcsID)return Promise.reject(sC(wa.WHITEBOARD_AND_SHARING_CONFLICT));if(a)return Promise.reject({type:Ke,reason:"information barrier",errorCode:wa.SCREEN_SHARE_IB_DENIED});if(!o&&"function"!=typeof(null===(s=navigator.mediaDevices)||void 0===s?void 0:s.getDisplayMedia))return Promise.reject({type:Ke,reason:"Unable to share your screen due to the technical limitation",errorCode:wa.SCREEN_SHARE_UNSUPPORTED});if(u)return Promise.reject({type:Ke,reason:"Unable to share your screen while someone is sharing from the main session",errorCode:wa.SCREEN_SHARE_SUBSESSION_CONFLICT});if(void 0!==(null==h?void 0:h.secondaryAudioMicrophoneId))return Promise.reject({type:Ke,reason:"Cannot start screen share while secondary audio is in progress.",errorCode:wa.SECONDARY_AUDIO_SCREEN_SHARING_CONFLICT});var g;if(C.isSupportMediaStreamTrackProcessor){if(!d(e))return Promise.reject({type:Xe,reason:"Use Video element instead of Canvas element when WebCodecs enabled",errorCode:wa.STREAM_MISMATCH_RENDER_ELEMENT})}else if(!c(e))return Promise.reject({type:Xe,reason:`Expected to accept HTMLCanvasElement, but actual it is ${"object"==typeof e&&null!==e?null===(g=Object.getPrototypeOf(e))||void 0===g?void 0:g.constructor.name:e}`,errorCode:wa.STREAM_MISMATCH_RENDER_ELEMENT});if(null!=r&&r.simultaneousShareView&&l.some((e=>e.isInitialized&&e.ssrc!==p)))return Promise.reject({type:Ke,reason:"Cannot start share screen due to annotation is in progress.",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE});await async function(e){const{share:{sharePrivilege:t}}=e,r=qE(e),o=Ru(e);if(t===G.OnlyHost&&!o)return Promise.reject({type:Ye,reason:"only host can start screen share",errorCode:wa.SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED});if(t===G.HostGrab&&!o&&r.length>0)return Promise.reject({type:Ye,reason:"only host can grab screen share",errorCode:wa.SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED});const n=Tu(e);return!0===(null==n?void 0:n.sharerOn)?Promise.reject({type:Ke,reason:"you have already started screen share.",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE}):void 0}(t)}function CC(e,t){const{share:{isReceiveSharingFromMainSession:r},breakoutRoom:o}=t;var n,i;return r?null==o||null===(n=o.mainSessionAttendeeList.find((t=>t.userId===e)))||void 0===n?void 0:n.shareSsrc:null===(i=Nu(t).find((t=>t.userId===e)))||void 0===i?void 0:i.shareSsrc}function TC(e,t){const{state:r,rwgAgent:o,mediaAgent:n}=t,{share:{remoteControlledUserList:i}}=r;EC(e,r,n),i.includes(e)&&fC(e,void 0,r,o,n)}function RC(e,t){const{state:r,rwgAgent:o,mediaAgent:n}=t,{share:{remoteControlledUserList:i,isGrabRemoteControl:s}}=r,a=function(e,t){const{state:r,mediaAgent:o}=t,n=[];if(e){const{share:{annotationUsers:t}}=r,a=CC(e,r);var i,s;a&&(ZE(r)?null!==(i=t.find((e=>e.ssrc===a)))&&void 0!==i&&i.isInitialized&&(o.hideViewerAnnotationCanvas(),o.stopViewerAnnotation(a),n.push(DA({ssrc:a,isInitialized:!1,isStarted:!1}))):null!==(s=t.find((e=>e.ssrc===a)))&&void 0!==s&&s.isStarted&&(o.annotateAction(Be.CLOSE_TOOL_BAR),n.push(DA({ssrc:a,isStarted:!1}))))}return n}(e,t);return i.includes(e)&&(s&&o.subscribeGrabRemoteControl(e,!1),n.updateRemoteControlProperties({isControllerNow:!1})),a}function OC(e,t,r,o){var n,i;const{state:s,rwgAgent:a,mediaAgent:u}=o,{share:{isReceiveSharingFromMainSession:d,shareViewAttachments:c}}=s,l=RC(e,o);a.unsubscribeSharing(e,d),lC(a,s,t),u.switchSharingSource(r,d);const p=null===(n=sc(null!==(i=c[`${e}`])&&void 0!==i?i:[]))||void 0===n?void 0:n.find((e=>e.isDummy));if(p){l.push(VA({userId:e,element:p}));const r=cC(t,p.canvasId,p.tagName);l.push(UA({userId:t,element:r}))}return TC(t,o),l}const DC=E_.createAgent(),wC=NE(ju.getInstance()),NC=E_.createAgent(),MC=NE(ju.getInstance()),PC=NE(ju.getInstance()),LC={ssrc:0,status:z.End,shareDimension:{width:0,height:0},receivedShareDimension:{width:1920,height:1080,logicWidth:1920,logicHeight:1080},sharePrivilege:G.OnlyHost,activeNodeId:0,activeSsrc:0,shareQuality:1,isRemoteSharingActive:!1,isReceiveSharing:!1,isGrabRemoteControl:!1,isSDKGrabControl:!1,isScreenShareForbidden:!1,isReceiveSharingFromMainSession:!1,isSharingToBreakoutRoom:!1,isSharingWithSecondCamera:!1,secondCameraId:"default",isRequireReadReceipt:!1,capturedEnsuredCanvas:[],renderedEnsuredCanvas:[],remoteControllingSsrc:0,remoteControlApprovedSsrc:0,remoteControlAppDownloadUrl:"",remoteControlAppInstallStatus:_e.Unknown,isEnableAutoDeleteRcApp:!1,remoteControlledUserList:[],isRemoteControlEnabled:!1,isSimultaneousShareView:!1,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0}},annotationCapability:0,isAnnotationInitialized:!1,isAnnotationStarted:!1,annotationUsers:[],annotationToolColor:Fe.DarkGrey,annotationSpotlightColor:Fe.Red,annotationToolWidth:8,annotationToolType:je.None,isCameraFeedSharing:!1,shareViewAttachments:{},annotationVanishingToolTimer:{displayTime:0,vanishingTime:2e3}},kC=["userId","ssrc","isInitialized","isStarted","isDisabled"],UC=zc({[`${zI}`]:sy(((e,{payload:t})=>{e.sharePrivilege=t})),[`${qI}`]:sy(((e,{payload:t})=>{e.isRemoteSharingActive=1===t.bStatus,e.activeNodeId=t.activeNodeID,e.activeSsrc=t.ssrc})),[`${KI}`]:sy(((e,{payload:t})=>{e.isReceiveSharing=t})),[`${QI}`]:sy(((e,{payload:t})=>{e.shareDimension={...t}})),[`${YI}`]:sy(((e,{payload:t})=>{e.status=t,t===z.End&&(e.isSimultaneousShareView=!1)})),[`${ZI}`]:sy(((e,{payload:t})=>{e.ssrc=t})),[`${XI}`]:sy(((e,{payload:t})=>{e.shareQuality=t})),[`${eA}`]:sy(((e,{payload:t})=>{e.receivedShareDimension={...t}})),[`${IA}`]:sy(((e,{payload:t})=>{e.remoteControlledUserList.includes(t)||e.remoteControlledUserList.push(t)})),[`${AA}`]:sy(((e,{payload:t})=>{const r=e.remoteControlledUserList.indexOf(t);r>=0&&e.remoteControlledUserList.splice(r,1)})),[`${tA}`]:sy(((e,{payload:t})=>{e.isGrabRemoteControl=t,!1===t&&(e.remoteControlViewportDomSelector=void 0)})),[`${rA}`]:sy(((e,{payload:t})=>{e.isSDKGrabControl=t})),[`${oA}`]:sy(((e,{payload:t})=>{e.isReceiveSharingFromMainSession=t})),[`${nA}`]:sy(((e,{payload:t})=>{e.isSharingToBreakoutRoom=t})),[`${iA}`]:sy(((e,{payload:t})=>{e.isSharingWithSecondCamera=t})),[`${sA}`]:sy(((e,{payload:t})=>{e.secondCameraId=t})),[`${aA}`]:sy(((e,{payload:t})=>{e.isRequireReadReceipt=t})),[`${uA}`]:sy(((e,{payload:t})=>{e.isOptimizedForSharedVideo=t})),[`${dA}`]:sy(((e,{payload:t})=>{const{data:{encoding:r,rate:o,...n}}=t;e.statistic.encode={bitrate:o,...n}})),[`${cA}`]:sy(((e,{payload:t})=>{const{data:{encoding:r,rate:o,...n}}=t;e.statistic.decode={bitrate:o,...n}})),[`${lA}`]:sy(((e,{payload:t})=>{e.capturedEnsuredCanvas.includes(t)||e.capturedEnsuredCanvas.push(t)})),[`${pA}`]:sy(((e,{payload:t})=>{e.renderedEnsuredCanvas.includes(t)||e.renderedEnsuredCanvas.push(t)})),[`${mA}`]:sy(((e,{payload:t})=>{e.remoteControllingSsrc=t})),[`${gA}`]:sy(((e,{payload:t})=>{e.remoteControlApprovedSsrc=t})),[`${SA}`]:sy(((e,{payload:t})=>{e.remoteControlAppDownloadUrl=t})),[`${vA}`]:sy(((e,{payload:t})=>{(e.remoteControlAppInstallStatus!==_e.Installed||_e.Unknown)&&(e.remoteControlAppInstallStatus=t)})),[`${_A}`]:sy(((e,{payload:t})=>{e.remoteControlAppLaunchSheme=t})),[`${bA}`]:sy(((e,{payload:t})=>{Object.assign(e,t)})),[`${CA}`]:sy(((e,{payload:t})=>{e.remoteControlViewportDomSelector=t})),[`${TA}`]:sy(((e,{payload:t})=>{e.annotationCapability=t})),[`${RA}`]:sy(((e,{payload:t})=>{e.isAnnotationInitialized=t})),[`${OA}`]:sy(((e,{payload:t})=>{e.isAnnotationStarted=t})),[`${DA}`]:sy(((e,{payload:t})=>{const{userId:r,ssrc:o,isInitialized:n,isStarted:i,isDisabled:s}=t;let a=-1;if(void 0!==r?a=e.annotationUsers.findIndex((e=>{var t;return e.userId===r||yd(r,null!==(t=e.ssrc)&&void 0!==t?t:0)})):void 0!==o&&(a=e.annotationUsers.findIndex((e=>{var t;return e.ssrc===o||yd(o,null!==(t=e.userId)&&void 0!==t?t:0)}))),a>=0){const r=e.annotationUsers[a];Object.entries(t).forEach((([e,o])=>{void 0!==t[e]&&kC.includes(e)&&Object.assign(r,{[e]:o})}))}else e.annotationUsers.push({userId:r,ssrc:o,isInitialized:n||!1,isStarted:i||!1,isDisabled:s||!1})})),[`${wA}`]:sy(((e,{payload:t})=>{e.annotationToolColor=t})),[`${NA}`]:sy(((e,{payload:t})=>{e.annotationSpotlightColor=t})),[`${MA}`]:sy(((e,{payload:t})=>{e.annotationToolWidth=t})),[`${PA}`]:sy(((e,{payload:t})=>{e.annotationToolType=t})),[`${LA}`]:sy(((e,{payload:t})=>{e.isSimultaneousShareView=t})),[`${kA}`]:sy(((e,{payload:t})=>{e.isCameraFeedSharing=t})),[`${UA}`]:sy(((e,{payload:t})=>{const{userId:r,element:o}=t,n=nc(o),i=e.shareViewAttachments[`${r}`];if(i){const e=mf(i),t=null==e?void 0:e.findIndex((e=>uc(e,o)));-1!==t&&void 0!==t||i.push(n)}else{const t=[n];Object.assign(e.shareViewAttachments,{[`${r}`]:t})}})),[`${VA}`]:sy(((e,{payload:t})=>{const{userId:r,element:o}=t,n=e.shareViewAttachments[`${r}`];if(!n)return;let i=o;if(Array.isArray(o)||(i=[o]),i.forEach((e=>{if(n){const t=mf(n),r=null==t?void 0:t.findIndex((t=>uc(t,e)));void 0!==r&&-1!==r&&n.splice(r,1)}})),n&&n.length>0){const t=ac(mf(n)||[]);e.shareViewAttachments[`${r}`]=t}})),[`${BA}`]:sy(((e,{payload:t})=>{e.annotationVanishingToolTimer={...t}})),[`${HA}`]:()=>({...LC})},LC),VC={annotationEpics0:(e,t)=>e.pipe(BS(`${Hg}`),Ur((()=>{const{meeting:{mediaFeatureOptions:e}}=t.value,r=e?ju.getAnnotationCapability(e):0;return TA(r)}))),annotationEpics1:e=>bv(e,[L.StartAnnotationSuccess,L.StartAnnotationFailed]).pipe(To((e=>{const{payload:{data:t,type:r}}=e;r===L.StartAnnotationSuccess?$a(Es):r===L.StartAnnotationFailed&&$a(Es,t)})),$r((()=>or))),annotationEpics2:e=>Ev(e,20241).pipe(Ur((e=>{const{activeNodeID:t,annotationOff:r}=e.payload.body;return $a(_s,{userId:t,isAnnotationEnabled:0===r}),DA({userId:t,isDisabled:1===r})}))),annotationEpics3:(e,t)=>bv(e,L.AnnotationRedoStatus).pipe(Ro(t),To((([e,t])=>{const{payload:{data:r}}=e,{share:{activeSsrc:o,ssrc:n,annotationUsers:i}}=t;i.filter((e=>[o,n].includes(e.ssrc))).some((e=>e.isInitialized))&&$a(As,r)})),$r((()=>or))),annotationEpics4:(e,t)=>bv(e,L.AnnotationUndoStatus).pipe(Ro(t),To((([e,t])=>{const{payload:{data:r}}=e,{share:{activeSsrc:o,ssrc:n,annotationUsers:i}}=t;i.filter((e=>[o,n].includes(e.ssrc))).some((e=>e.isInitialized))&&$a(Is,r)})),$r((()=>or))),annotationEpics5:(e,t)=>Ev(e,Rv).pipe(Ur((e=>af(e.payload.body))),Ro(t),To((([e,t])=>{const{share:{ssrc:r},meeting:{userId:o}}=t;if(e.update){const n=e.update.find((e=>(null==e?void 0:e.userId)===o&&void 0!==e.sharerOn));if(null!=n&&n.sharerOn){const e=Tu(t);PC.updateSharingInfo(r,(null==e?void 0:e.displayName)||"")}}})),$r((()=>or))),annotationEpics6:(e,t)=>bv(e,L.AnnoViewerRequestDraw).pipe(Ro(t),To((([e,t])=>{const{payload:{data:r}}=e,{breakoutRoom:o,participants:{attendeesList:n}}=t,{userId:i}=r;if($a(bs,r),i){var s,a;const e=(null===(s=n.find((e=>yd(e.userId,i))))||void 0===s?void 0:s.displayName)||(null==o||null===(a=o.mainSessionAttendeeList)||void 0===a||null===(a=a.find((e=>yd(e.userId,i))))||void 0===a?void 0:a.displayName)||"",t={userId:i,userName:e};PC.annotateAction(Be.ANNOTATOR_ID_TO_NAME,t)}})),$r((()=>or))),annotationEpics7:(e,t)=>e.pipe(BS(`${YI}`),Ro(t),uo((([,e])=>{var t;return(null===(t=e.share)||void 0===t?void 0:t.status)===z.End})),$r((([e,t])=>{const{share:{annotationUsers:r,ssrc:o}}=t,n=[];return r.find((e=>e.ssrc===o))&&(PC.stopPresenterAnnotation(o),n.push(DA({ssrc:o,isInitialized:!1,isStarted:!1})),n.push(PA(je.None))),br(n)}))),annotationEpics8:(e,t)=>e.pipe(BS(`${KI}`),_r(Xt),Ro(t),uo((([,e])=>!1===e.share.isReceiveSharing)),$r((([e,t])=>{const{share:{activeNodeId:r,annotationUsers:o}}=t,n=[],i=CC(r,t);return i&&o.find((e=>e.ssrc===i))&&(PC.stopViewerAnnotation(i),n.push(DA({ssrc:i,isInitialized:!1,isStarted:!1})),n.push(PA(je.None))),PC.hideViewerAnnotationCanvas(),br(n)}))),annotationEpics9:(e,t)=>Ev(e,Rv).pipe(Ro(t),uo((([e,t])=>{const{meeting:{userId:r}}=t,o=e.payload.body.update;return o&&o.length>0&&o.findIndex((e=>e.id!==r&&void 0!==e.bShareOn))>-1})),$r((([e,t])=>{const{payload:{body:{update:r}}}=e,{share:{annotationUsers:o}}=t,n=r.filter((e=>!1===e.bShareOn)),i=[];return null==n||n.forEach((e=>{const{shareSsrc:t}=e;t&&o.find((e=>e.ssrc===t))&&(PC.stopViewerAnnotation(t),i.push(DA({ssrc:t,isInitialized:!1,isStarted:!1})),i.push(PA(je.None)))})),br(i)}))),annotationEpics10:(e,t)=>e.pipe(BS(`${QI}`),Ro(t),To((([e,t])=>{var r;const{share:{ssrc:o,annotationUsers:n}}=t;null!==(r=n.find((e=>e.ssrc===o)))&&void 0!==r&&r.isInitialized&&PC.updatePresenterAnnotationCanvas()})),$r((()=>or))),annotationEpics11:(e,t)=>e.pipe(BS(`${eA}`),_r(Xt),Ro(t),To((([e,t])=>{var r;const{share:{activeSsrc:o,annotationUsers:n}}=t;null!==(r=n.find((e=>e.ssrc===o)))&&void 0!==r&&r.isInitialized&&PC.updateViewerAnnotationCanvas()})),$r((()=>or))),annotationEpics12:e=>e.pipe(BS(`${FS}`),To((e=>{PC.removeViewerAnnotationCanvas()})),$r((()=>or)))},BC={remoteControlEpics0:e=>e.pipe(BS(`${Hg}`),Ur((e=>{const{payload:{meetingOptions:t,rcAutoDelete:r,jwtRc:o,opRc:n}}=e,i=(null==t?void 0:t.isRemoteControlEnbaled)&&n&&1===o;return bA({isRemoteControlEnabled:i,isEnableAutoDeleteRcApp:1===r})}))),remoteControlEpics1:(e,t)=>Ev(e,16391).pipe($r((e=>{const{payload:{body:{bOn:r,sendID:o,receiveID:n}}}=e,{meeting:{userId:i},share:{status:s,activeNodeId:a,isGrabRemoteControl:u}}=t.value,d=[];if(s===z.End&&d.push(mA(0)),s!==z.End)if(yd(i,o))r?(gC(),SC(),s===z.Paused&&(NC.resumeSharing(),MC.resumeDesktopSharing(),d.push(YI(z.Sharing))),d.push(mA(n))):d.push(mA(0));else{var c;const e=null===(c=Nu(t.value))||void 0===c?void 0:c.find((e=>yd(e.userId,o)));e&&$a(gs,{userId:e.userId,displayName:e.displayName,isSharingEntireScreen:MC.isSharingEntireScreen()})}else if(!n||yd(n,i)){const e=Tu(t.value);if(!lu(e.userRole)&&!C.isAndroidOrIOSBrowser){const e=o&&yd(a,o);r?(d.push(IA(a)),e&&(u||NC.subscribeGrabRemoteControl(a,!0))):(d.push(AA(a)),e&&(u&&(NC.subscribeGrabRemoteControl(a,!1),d.push(tA(!1)),$a(us,!1)),MC.updateRemoteControlProperties({isControllerNow:!1}))),$a(as,r)}}return br(d)}))),remoteControlEpics2:(e,t)=>Ev(e,16395).pipe(Ro(t),uo((([e,t])=>e.payload.body.id===t.meeting.userId)),Ur((([e])=>{const{payload:{body:{bOn:t}}}=e;return MC.updateRemoteControlProperties({isControllerNow:t}),$a(us,t),tA(t)}))),remoteControlEpics3:e=>bv(e,[L.StartRemoteControlSuccess,L.StartRemoteControlFailed,L.CancelRemoteControlSuccess]).pipe(C_((e=>e.payload.type===L.StartRemoteControlSuccess?($a(cs),rA(!0)):e.payload.type===L.CancelRemoteControlSuccess?rA(!1):void(e.payload.type===L.StartRemoteControlFailed&&$a(ls))))),remoteControlEpics4:e=>bv(e,[L.RemoteControlCopiedTextNotify,L.RemoteControlPasteTextLengthOverflow]).pipe(To((e=>{if(e.payload.type===L.RemoteControlCopiedTextNotify){const{payload:{data:t}}=e;$a(ds,{content:t.data,x:t.x,y:t.y})}else $a(ds,{error:"length of pasted text is too long"})})),yo(or)),remoteControlEpics5:(e,t)=>Ev(e,4342).pipe(uo((e=>0===e.payload.body.result)),$r((e=>{const{payload:{body:{downloadUrl:r,ssrc:o,urlScheme:n}}}=e,{share:{remoteControlApprovedSsrc:i,status:s}}=t.value,a=[],{isMacOS:u}=C;if(s!==z.End){if(!i||i===o){gC();try{const e=JSON.parse(r||"{}"),t=u?e.macDownloadUrl:e.winDownloadUrl;a.push(SA(t))}catch(e){console.warn("unsupported JSON string",e)}}const s={},d=Nu(t.value).find((e=>yd(e.userId,o)));d&&Object.assign(s,{controllerName:cd(d.displayName)}),Object.assign(s,{ssrc:o});const{deviceId:c}=MC.getShareStreamInfo();c&&Object.assign(s,{DeviceID:c});const l=`${n}&${new URLSearchParams(s).toString()}`;a.push(_A(l),vA(_e.Unknown)),$a(fs,l)}return br(a)}))),remoteControlEpics6:e=>e.pipe(BS(`${fA}`),$r((()=>hC.startCheck(1e4).pipe(Ur((()=>($a(Ss,_e.Unknown),vA(_e.Unknown)))))))),remoteControlEpics7:(e,t)=>e.pipe(BS(`${yA}`),uo((()=>{const{share:{remoteControlAppInstallStatus:e}}=t.value;return e===_e.Installed})),$r((()=>mC.startCheck(12e4).pipe($r((()=>{$a(Ss,Ie.Unlaunched);const{share:{remoteControlApprovedSsrc:e,isEnableAutoDeleteRcApp:r},meeting:{userId:o}}=t.value,n=[],{isMacOS:i}=C;return e&&(NC.remoteControlConsent(Ee.CacheClean,e,o,{...MC.getShareStreamInfo(),platform:i?"mac":"win"},r),n.push(_A(""),gA(0))),br(n)})))))),remoteControlEpics8:(e,t)=>e.pipe(BS(`${_A}`),uo((e=>!!e.payload)),$r((e=>{const{payload:r}=e,o=[];let n;if(r){!function(e){if(!e.startsWith("zoomprc://"))return;const t=_d("__ZOOM_SDK_RC_APP_SCHEME_@__");let r=document.getElementById(t);r||(r=document.createElement("iframe"),r.id=t,r.style.display="none",document.body.appendChild(r)),r.contentWindow.location.href=e}(r),o.push(yA());const e=performance.now();document.hasFocus()?n=oo(25).pipe(Co((()=>{const r=performance.now()-e<500;return r||$a(Ss,_e.Uninstalled),r&&t.value.share.remoteControlAppInstallStatus===_e.Unknown})),Ao((()=>{const t=performance.now()-e,r=[];return document.hasFocus()||(t>75?r.push(fA()):gC(),$a(Ss,_e.Installed),r.push(vA(_e.Installed),yA())),br(r)})),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return qr(t,Cr.apply(void 0,at([],st(e))))}}(vA(_e.Uninstalled))):($a(Ss,_e.Unknown),o.push(vA(_e.Unknown)))}return n?no(n,br(o)):br(o)}))),remoteControlEpics9:(e,t)=>Ev(e,Lv).pipe($r((()=>($a(vs,Ae.Ended),vC(t.value,NC),br([_A(""),gA(0)]))))),remoteControlEpics10:(e,t)=>e.pipe(BS(`${YI}`),uo((e=>{const{share:{remoteControllingSsrc:r,remoteControlApprovedSsrc:o}}=t.value;return!(e.payload!==z.End||!r&&!o)})),To((()=>{const{share:{remoteControllingSsrc:e,remoteControlApprovedSsrc:r,isEnableAutoDeleteRcApp:o},meeting:{userId:n}}=t.value,{isMacOS:i}=C;e&&vC(t.value,NC),r!==e&&NC.remoteControlConsent(Ee.Decline,r,n,{...MC.getShareStreamInfo(),platform:i?"mac":"win"},o)})),yo(or)),remoteControlEpics11:(e,t)=>Ev(e,16430).pipe($r((()=>(gC(),SC(),$a(Ss,Ie.Launched),t.value.share.status!==z.End&&function(e,t){(async function(e){const{media:{assetsPath:t}}=e,r=`${t}/qrscanner.min.js`;return"WebQrscanner"in window?Promise.resolve(""):new Promise(((e,t)=>{uC.log(`load qr scanner script start. url:${r}`),i(r,(()=>{uC.log("load qr scanner script done."),e("")}),t)}))})(e).then((()=>{uC.log("qr scanning start"),t.startRemoteControlQRCheck(!0)}))}(t.value,MC),br([_A(""),gA(0)]))))),remoteControlEpics12:e=>bv(e,L.CurrentDesktopSharingWidthHeight).pipe(To((()=>{NC.syncSharedContentMetaWithRcApp(MC.getShareStreamInfo())})),yo(or)),remoteControlEpics13:(e,t)=>bv(e,L.SendRemoteControlQrCode).pipe(To((e=>{const{payload:{data:r}}=e,{share:{status:o}}=t.value;o!==z.End&&Array.isArray(r)&&r.length>0&&r.forEach((e=>{null!=e&&e.startsWith("zrc_")&&NC.sendRemoteControlAuth(e)}))})),yo(or)),remoteControlEpics14:e=>Ev(e,16434).pipe(To((e=>{const{payload:{body:{result:t}}}=e;0===t&&(yC(),$a(vs,Ae.Started))})),yo(or)),remoteControlEpics15:(e,t)=>Ev(e,Rv).pipe(uo((e=>{var r,o;const{meeting:{userId:n},share:{remoteControlledUserList:i}}=t.value,{payload:{body:s}}=e;return i.length>0&&((null===(r=s.update)||void 0===r?void 0:r.some((e=>e.id!==n&&!1===e.bShareOn)))||(null===(o=s.remove)||void 0===o?void 0:o.some((e=>e.id!==n))))})),$r((e=>{var r,o,n,i;const{payload:{body:s}}=e,{share:{remoteControlledUserList:a,activeNodeId:u,isGrabRemoteControl:d},meeting:{userId:c}}=t.value,l=(null!==(r=null===(o=s.update)||void 0===o?void 0:o.filter((e=>e.id!==c&&!1===e.bShareOn)))&&void 0!==r?r:[]).concat(null!==(n=null===(i=s.remove)||void 0===i?void 0:i.filter((e=>e.id!==c)))&&void 0!==n?n:[]),p=[];return a.forEach((e=>{l.find((t=>t.id===e))&&(p.push(AA(e)),e===u&&d&&(p.push(tA(!1)),$a(us,!1)))})),br(p)}))),remoteControlEpics16:(e,t)=>e.pipe(BS(`${Mg}`),To((()=>{const{share:{remoteControllingSsrc:e,status:r}}=t.value;r===z.Sharing&&e&&$a(vs,Ae.Ended)})),yo(or)),remoteControlEpics17:e=>e.pipe(BS(`${CA}`),uo((e=>!!e.payload)),Ao((e=>{const{payload:t}=e,r=document.querySelector(t);return r&&"function"==typeof ResizeObserver?function(...e){return new wt((t=>{const r=new ResizeObserver((e=>{e.forEach((e=>{t.next(e)}))}));return e.forEach((e=>r.observe(e))),()=>r.disconnect()}))}(r).pipe(bo(Ja(Ka(Ki).pipe(uo((e=>!(null!=e&&e.isActive))),mo(1)))),(void 0===o&&(o=Xt),Mt((function(e,t){var r=null,n=null,i=null,s=function(){if(r){r.unsubscribe(),r=null;var e=n;n=null,t.next(e)}};function a(){var e=i+100,n=o.now();if(n<e)return r=this.schedule(void 0,e-n),void t.add(r);s()}e.subscribe(Pt(t,(function(e){n=e,i=o.now(),r||(r=o.schedule(a,100),t.add(r))}),(function(){s(),t.complete()}),void 0,(function(){n=r=null})))}))),To((e=>{const{target:t}=e;t&&MC.updateRemoteControlProperties({dimension:kd(t)})})),$r((()=>or))):or;var o})))},HC={epics0:(e,t)=>Ev(e,Ov).pipe(uo((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.lockShare)})),Ro(t),To((([e,t])=>{const{share:{sharePrivilege:r}}=t,{payload:{body:{lockShare:o}}}=e;r!==o&&$a(ps,o)})),Ur((([e])=>zI(e.payload.body.lockShare)))),epics1:e=>Ev(e,20227).pipe(Ur((e=>ZI(e.payload.body.ssrc)))),epics2:(e,t)=>Ev(e,Cv).pipe(Ro(t),uo((([e,t])=>{const{payload:{body:r}}=e,{share:{isReceiveSharingFromMainSession:o}}=t;return!o||o&&r.fromMainSession})),$r((([e,t])=>{const{share:{isReceiveSharing:r,activeNodeId:o,isReceiveSharingFromMainSession:n},meeting:{userId:i}}=t,{payload:{body:s}}=e,a=[];if(r&&1===s.bStatus){if(o!==i)if(ZE(t))a.push(...OC(o,s.activeNodeID,s.ssrc,{state:t,rwgAgent:DC,mediaAgent:wC})),$a(ss,{userId:s.activeNodeID});else{const e={activeUserId:s.activeNodeID,isActive:!0};n&&Object.assign(e,{isFromMainSession:!0}),$a(Ki,e)}}else if(1===s.bStatus){const e={activeUserId:s.activeNodeID,isActive:!0};n&&Object.assign(e,{isFromMainSession:!0}),$a(Ki,e)}else if(r){const e={activeUserId:s.activeNodeID,isActive:!1};n&&Object.assign(e,{isFromMainSession:!0}),$a(Ki,e)}return a.push(qI(s)),br(a)}))),epics3:(e,t)=>bv(e,[L.SharingDesktopStreamHaveAudio,L.SharingDesktopStreamHaveNoAudio]).pipe(uo((e=>e.payload.type!==L.SharingDesktopStreamHaveAudio||!t.value.audio.secondaryAudioMicrophoneId)),Ro(t),Ur((([e,t])=>{const{meeting:{userId:r},share:{isSharingToBreakoutRoom:o,isOptimizedForSharedVideo:n}}=t,{payload:{type:i}}=e,s=i===L.SharingDesktopStreamHaveAudio;return DC.startSharing(r,{bShareToBO:o,bShareAudio:s,bShareVideo:!!n}),wC.switchSharingMode(n?ve.VideoMode:ve.Normal),JI(!1)}))),epics4:e=>bv(e,[L.DesktopSharingError,L.DesktopSharingChromeExtensionUninstalled,L.DesktopSharingPermissionDenied,L.DesktopSharingSystemError]).pipe($r((e=>{const t=[];let r="";return[L.DesktopSharingPermissionDenied,L.DesktopSharingSystemError].includes(e.payload.type)&&(t.push(JI(!0)),e.payload.type===L.DesktopSharingSystemError?C.isMacOS&&(r="To use screen share on Chrome, please allow screen recording access in system setting."):r="To use screen share, please allow the permission request."),$a(Ji,{reason:r}),br(t)}))),epics5:(e,t)=>bv(e,L.CurrentDesktopSharingWidthHeight).pipe(uo((e=>!!e.payload.data)),Ur((e=>{$a(Qi,{...e.payload.data,userId:t.value.meeting.userId});const{payload:{data:{width:r,height:o}}}=e;return wC.ajustmentSharingCanvas(r,o),QI(e.payload.data)}))),epics6:(e,t)=>bv(e,L.SharingDecodeMaxSize).pipe(uo((e=>!!e.payload.data)),Ro(t),C_((([e,t])=>{const{share:{shareQuality:r,activeNodeId:o,shareViewAttachments:n}}=t,{payload:{data:{fps:i}}}=e,s=Number(i);if(r!==s)return ZE(t)?lC(DC,t,o,s):Object.entries(n).filter((([,e])=>e.length>0)).forEach((([e])=>{lC(DC,t,Number(e),s)})),XI(s)}))),epics7:(e,t)=>Ev(e,20226).pipe(To((e=>{var r,o;if($a(Yi,null===(r=e.payload)||void 0===r?void 0:r.body),null!==(o=e.payload)&&void 0!==o&&o.body){const{payload:{body:{width:r,height:o}}}=e;ZE(t.value)&&wC.ajustmentReceivedSharingCanvas(r,o)}})),Ur((e=>eA(e.payload.body)))),epics8:(e,t)=>bv(e,L.SharingPara).pipe(To((e=>{var r,o;if($a(Yi,null===(r=e.payload.data)||void 0===r?void 0:r.body),null!==(o=e.payload.data)&&void 0!==o&&o.body){const{payload:{data:{body:{width:r,height:o}}}}=e;ZE(t.value)&&wC.ajustmentReceivedSharingCanvas(r,o)}})),Ur((e=>{var t;return eA(null===(t=e.payload.data)||void 0===t?void 0:t.body)}))),epics9:(e,t)=>bv(e,L.UserStopDesktopSharing).pipe(Ro(t),Ur((([,e])=>{const{meeting:{userId:t},share:{status:r}}=e;return r!==z.End&&(DC.stopSharing(t),wC.stopDesktopSharing(),$a(Zi)),YI(z.End)}))),epics10:(e,t)=>Ev(e,Rv).pipe(Ro(t),uo((([e,t])=>{const{meeting:{userId:r}}=t,o=e.payload.body.update;return o&&o.length>0&&o.findIndex((e=>e.id===r&&void 0!==e.bShareOn))>-1})),$r((([e,t])=>{const{meeting:{userId:r},share:{status:o,isReceiveSharing:n,activeNodeId:i,isSimultaneousShareView:s}}=t,{payload:{body:{update:a}}}=e,u=a.find((e=>e.id===r&&!1===e.bShareOn)),d=a.find((e=>e.id===r&&!0===e.bShareOn)),c=[];return u&&o!==z.End&&(DC.stopSharing(r),wC.stopDesktopSharing(),c.push(YI(z.End)),$a(Xi)),d&&o===z.End&&(n&&!s&&(wC.stopRenderSharing(),DC.unsubscribeSharing(i),c.push(KI(!1))),c.push(YI(z.Sharing))),br(c)}))),epics11:(e,t)=>Ev(e,Rv).pipe(Ro(t),uo((([e,t])=>{const{meeting:{userId:r}}=t,o=e.payload.body.update;return o&&o.length>0&&o.findIndex((e=>e.id!==r&&void 0!==e.bShareOn))>-1})),$r((([r,o])=>{const{payload:{body:{update:n}}}=r,{share:{activeNodeId:i,isReceiveSharing:s}}=o,a=qE(o),u=n.filter((e=>!0===e.bShareOn&&!1===e.bSharePause)),d=n.filter((e=>!0===e.bShareOn&&!0===e.bSharePause)),c=n.filter((e=>!1===e.bShareOn));return u.length>0&&u.forEach((e=>{-1===a.findIndex((t=>t.userId===e.id))?$a(rs,e):$a(is,e)})),d.length>0&&d.forEach((e=>{$a(ns,e)})),c.length>0&&(c.filter((e=>a.findIndex((t=>t.userId===e.id))>-1)).forEach((e=>{$a(os,e)})),s&&c.some((e=>e.id===i)))?co(Ev(e,Cv).pipe(mo(1),yo(or)),ro(50).pipe(yo(Tr("timeout")))).pipe(lo((()=>{const{share:{activeNodeId:e},meeting:{userId:r}}=t.value,n=a.filter((t=>t.userId!==e&&t.userId!==r));if(n.length>0&&ZE(t.value)){var i;const t=[],r=n[0],{userId:s}=r,a=null!==(i=CC(s,o))&&void 0!==i?i:s;return t.push(...OC(e,s,a,{state:o,rwgAgent:DC,mediaAgent:wC})),$a(ss,{userId:s}),t.push(qI({activeNodeID:s,bStatus:1,ssrc:a})),br(t)}return or}))):or}))),epics12:(e,t)=>Ev(e,Tv).pipe(Ro(t),Ao((([e,r])=>{const{payload:{body:{encryptKey:o,additionalType:n}}}=e,{media:{sharingDecodeStatus:i,sharingEncodeStatus:s},meeting:{confId:a,userId:u,zoomId:d,meetingId:c,meetingNumber:l,isWebinar:p}}=r;return Md(t).pipe(Ao((e=>{let r=s;return(!C.isSupportSendScreenSharing||p&&e&&lu(e.userRole))&&(r="failed"),Nd("sharing",r,i).pipe(To((([e,r])=>{const i={userId:u,sn:md(d),confId:a,encryptKey:md(o),encryptType:n,meetingId:c,meetingNumber:l};if(null==wC||wC.updateMediaParams({iVType:cb.SHARING_ENCODE,isFromMainSession:!1,updateParams:i}),r){wC.updateMediaParams({iVType:cb.SHARING_DECODE,isFromMainSession:!1,updateParams:i});const{participants:{attendeesList:e}}=t.value;if(e.length>0){const t=e.map((e=>({userid:e.userId,sn:e.zoomID&&md(e.zoomID)})));wC.updateUserMediaSN({added:t,isFromMainSession:!1,iVType:cb.SHARING_DECODE})}}})),yo(or))})))}))),epics13:(e,t)=>Av(e,20235).pipe(Ro(t),To((([e,t])=>{const{media:{sharingDecodeStatus:r}}=t,{type:o,payload:{body:n}}=e,i=o===`${KS}`;Nd("sharing","success",r).subscribe((([,e])=>{e&&wC.addReceivedSharingChannelType({isFromMainSession:i,...n})}))})),yo(or)),epics14:(e,t)=>Av(e,20236).pipe(Ro(t),To((([e,t])=>{const{media:{sharingDecodeStatus:r}}=t,{type:o,payload:{body:{ssrc:n}}}=e,i=o===`${KS}`;Nd("sharing","success",r).subscribe((([,e])=>{e&&wC.removeReceivedSharingChannelType({isFromMainSession:i,ssrc:n})}))})),yo(or)),epics15:e=>bv(e,L.SharingFirstDecodeFrameReceivedSsrc).pipe(uo((e=>!!e.payload.data)),To((e=>{const{payload:{data:{ssrc:t}}}=e;DC.sendReceivingSharingReady(t)})),yo(or)),epics16:(e,t)=>Ev(e,20233).pipe(uo((()=>!!t.value.share.isRequireReadReceipt)),To((e=>{const{payload:{body:{bReceiveOk:t}}}=e;t&&$a(hs)})),yo(or)),epics17:(e,t)=>Ev(e,Ov).pipe(uo((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.lockShare)})),$r((e=>{const{payload:{body:{lockShare:r}}}=e,{share:{isOptimizedForSharedVideo:o,isSharingToBreakoutRoom:n},audio:{isSharingAudio:i},meeting:{userId:s}}=t.value,a=[];return r===G.MultipleShare&&o&&(DC.startSharing(s,{bShareWb:!1,bShareAudio:i,bShareToBO:n,bShareVideo:!1}),wC.switchSharingMode(ve.Normal),a.push(uA(!1))),br(a)}))),epics18:(e,t)=>bv(e,L.ShareQosData).pipe(Ro(t),Ur((([e,t])=>{var r,o;const{meeting:{isWebinar:n},media:{sharingEncodeStatus:i,sharingDecodeStatus:s},share:{status:a,isReceiveSharing:u},participants:{xmppAttendeeList:d}}=t;let c=ku(t).length>0;n&&(c=c||Boolean(d.length));const l=a!==z.End&&"success"===i&&(c||(null===(r=t.recording)||void 0===r?void 0:r.cmrStatus)===yn.Start),p=u&&"success"===s;return null!==(o=e.payload.data)&&void 0!==o&&o.encoding?l?($a(ms,e.payload),dA(e.payload)):dA(le):p?($a(ms,e.payload),cA(e.payload)):cA(le)}))),epics19:(e,t)=>bv(e,L.WHITEBOARD_SUCCESS).pipe(uo((e=>!!e.payload.data)),$r((e=>{var t;const r=db();var o,n;return null!=r&&null!==(t=r.conn)&&void 0!==t&&t.receivePWARemoteMessage?null==r||null===(o=r.conn)||void 0===o||o.receivePWARemoteMessage(e.payload.data.data):null==r||null===(n=r.conn)||void 0===n||n.receiveRemoteMessage("proto",e.payload.data.data),or}))),epics20:(e,t)=>Ev(e,Rv).pipe(Ur((e=>af(e.payload.body))),Ro(t),$r((([e,t])=>{const{meeting:{userId:r},share:{isCameraFeedSharing:o}}=t,n=[];if(e.update){const t=e.update.find((e=>(null==e?void 0:e.userId)===r&&void 0!==e.bVideoOn));o&&!1===(null==t?void 0:t.bVideoOn)&&(DC.stopSharing(r),wC.stopDesktopSharing(),n.push(kA(!1)),n.push(YI(z.End)),$a(ts))}return br(n)}))),epics21:(e,t)=>Ev(e,16444).pipe(Ro(t),To((([e,t])=>{const{requestId:r,userId:o,shareSource:n,startAnnotation:i}=e.payload.body,s=n===xe.FrontCamera?te.User:te.Environment;$a(Cs,{requestId:r,userId:o,shareSource:s,startAnnotation:i})})),$r((()=>or))),epics22:(e,t)=>Ev(e,16445).pipe(Ro(t),To((([e,t])=>{const{requestId:r,userId:o,status:n}=e.payload.body;$a(Ts,{requestId:r,userId:o,status:n})})),$r((()=>or))),epics23:(e,t)=>Ev(e,16446).pipe(Ro(t),To((([e,t])=>{const{requestId:r,userId:o,status:n}=e.payload.body;$a(Rs,{requestId:r,userId:o,status:n})})),$r((()=>or))),epics24:(e,t)=>e.pipe(BS(`${kA}`),_r(Xt),Ro(t),To((([e,t])=>{const{share:{isCameraFeedSharing:r}}=t;r&&wC.switchSharingMode(ve.CameraMode)})),$r((()=>or)))},jC=yv(HC,BC,VC),{setQaSetting:FC,addQaQuestion:WC,addQaAnswer:xC,removeQaComment:$C,removeQaQuestion:GC,dismissQaQuestion:zC,reopenQaQuestion:qC,voteQaQuestion:KC,answerQaQuestionLive:JC,updateAttendeeAnonymousQuestion:QC,setQaEnabled:YC,resetQa:ZC}=Fc("SET_QA_SETTING","ADD_QA_QUESTION","ADD_QA_ANSWER","REMOVE_QA_COMMENT","REMOVE_QA_QUESTION","DISMISS_QA_QUESTION","REOPEN_QA_QUESTION","VOTE_QA_QUESTION","ANSWER_QA_QUESTION_LIVE","UPDATE_ATTENDEE_ANONYMOUS_QUESTION","SET_QA_ENABLED","RESET_QA"),{setChatPrivilege:XC,setPanelistChatPrivilege:eT,addChatMessageHistory:tT,resetChat:rT,setIsAllowAttendeeChat:oT,setLatestChatMessageId:nT,removeChatMessage:iT,setFileChatSetting:sT,addChatFileRecord:aT,updateChatFileRecord:uT,cancelSendFileChat:dT,addFailedChatFileTransfer:cT,setChatFileMessageId:lT,cancelDownloadFileChat:pT}=Fc("SET_CHAT_PRIVILEGE","SET_PANELIST_CHAT_PRIVILEGE","ADD_CHAT_MESSAGE_HISTORY","RESET_CHAT","SET_IS_ALLOW_ATTENDEE_CHAT","SET_LATEST_CHAT_MESSAGE_ID","REMOVE_CHAT_MESSAGE","SET_FILE_CHAT_SETTING","ADD_CHAT_FILE_RECORD","UPDATE_CHAT_FILE_RECORD","CANCEL_SEND_FILE_CHAT","ADD_FAILED_CHAT_FILE_TRANSFER","SET_CHAT_FILE_MESSAGE_ID","CANCEL_DOWNLOAD_FILE_CHAT"),{setProcessorCreateInfo:hT,addProcessorInstance:mT,removeProcessorInstance:gT,resetProcessor:ST}=Fc("SET_PROCESSOR_CREATE_INFO","ADD_PROCESSOR_INSTANCE","REMOVE_PROCESSOR_INSTANCE","RESET_PROCESSOR"),{setCcEditorInfo:vT,setTempSendCcText:fT,setCcLtMessage:yT,setTempReceiveLtText:ET,setTempReceiveCcText:_T,setGatewayInfoList:IT,setLtEnable:AT,setIsListenClosedCaption:bT,setCcEnable:CT,allowParticipantAskLt:TT,receiveAskStartLt:RT,setMeetingEnabledLtFeature:OT,updateLtStatus:DT,deleteMessage:wT,updateMessage:NT,resetClosedCaption:MT}=Fc("SET_CC_EDITOR_INFO","SET_CC_LT_MESSAGE","SET_TEMP_SEND_CC_TEXT","SET_TEMP_RECEIVE_LT_TEXT","SET_TEMP_RECEIVE_CC_TEXT","SET_GATEWAY_INFO_LIST","SET_LT_ENABLE","SET_IS_LISTEN_CLOSED_CAPTION","SET_CC_ENABLE","ALLOW_PARTICIPANT_ASK_LT","RECEIVE_ASK_START_LT","SET_MEETING_ENABLED_LT_FEATURE","UPDATE_LT_STATUS","DELETE_MESSAGE","UPDATE_MESSAGE","RESET_CLOSED_CAPTION"),{addBreakoutRooms:PT,setBreakoutRoomAllocationPattern:LT,setBreakoutRoomSequenceId:kT,setMeetingElapsedTime:UT,setStartRoomElapsedTime:VT,setBreakoutRoomOptions:BT,setBreakoutRoomControlStatus:HT,setBreakoutRooms:jT,setCurrentBreakoutRoom:FT,setBreakoutRoomAttendeeStatus:WT,setBreakoutRoomConfId:xT,setBreakoutRoomToken:$T,resetBreakoutRoom:GT,setBreakoutRoomClosingRoomTime:zT,setBreakoutRoomBroadcastMessage:qT,setBreakoutRoomHostReplyType:KT,setBreakoutRoomHostReplyRequestId:JT,setMainSessionAttendeeList:QT,setIsHugeBreakoutRoom:YT,setBreakoutRoomPreAssignedRoomList:ZT,setBreakoutRoomUserRoleUpdated:XT,setBreakoutRoomMeetingOptions:eR,setBreakoutRoomUserActivityStatus:tR,setBreakoutRoomIsBroadcastVoice:rR}=Fc("ADD_BREAKOUT_ROOMS","SET_BREAKOUT_ROOM_ALLOCATION_PATTERN","SET_BREAKOUT_ROOM_SEQUENCE_ID","SET_MEETING_ELAPSED_TIME","SET_START_ROOM_ELAPSED_TIME","SET_BREAKOUT_ROOM_OPTIONS","SET_BREAKOUT_ROOM_CONTROL_STATUS","SET_BREAKOUT_ROOMS","SET_CURRENT_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_ATTENDEE_STATUS","SET_BREAKOUT_ROOM_CONF_ID","SET_BREAKOUT_ROOM_TOKEN","RESET_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_CLOSING_ROOM_TIME","SET_BREAKOUT_ROOM_BROADCAST_MESSAGE","SET_BREAKOUT_ROOM_HOST_REPLY_TYPE","SET_BREAKOUT_ROOM_HOST_REPLY_REQUEST_ID","SET_MAIN_SESSION_ATTENDEE_LIST","SET_IS_HUGE_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_PRE_ASSIGNED_ROOM_LIST","SET_BREAKOUT_ROOM_USER_ROLE_UPDATED","SET_BREAKOUT_ROOM_MEETING_OPTIONS","SET_BREAKOUT_ROOM_USER_ACTIVITY_STATUS","SET_BREAKOUT_ROOM_IS_BROADCAST_VOICE"),{setCloudRecordingStatus:oR,setCloudRecordingEnable:nR,setCloudIsoRecordingEnable:iR,setAllowStopAutoRecording:sR,setAutomaticCloudRecordingEnable:aR,setIsZoomIQ:uR,setZoomIQChanging:dR,setLocalRecordStatus:cR,setSupportLocalRecording:lR,setLocalGrantPermissionOption:pR,setLocalPermissionUserList:hR,resetRecording:mR}=Fc("SET_CLOUD_RECORDING_STATUS","SET_CLOUD_RECORDING_ENABLE","SET_CLOUD_ISO_RECORDING_ENABLE","SET_ALLOW_STOP_AUTO_RECORDING","SET_AUTOMATIC_CLOUD_RECORDING_ENABLE","SET_IS_ZOOM_I_Q","SET_ZOOM_I_Q_CHANGING","SET_LOCAL_RECORD_STATUS","SET_SUPPORT_LOCAL_RECORDING","SET_LOCAL_GRANT_PERMISSION_OPTION","SET_LOCAL_PERMISSION_USER_LIST","RESET_RECORDING"),{updateCmdJid:gR,removeCmdJid:SR,setCmdChannelConnectionStatus:vR,resetCmdChannel:fR}=Fc("UPDATE_CMD_JID","REMOVE_CMD_JID","SET_CMD_CHANNEL_CONNECTION_STATUS","RESET_CMD_CHANNEL"),yR="SET_ARCHIVING_STATUS",ER="SET_ARCHIVING_SESSION_READY",_R="SET_ARCHIVING_OPTIONS",IR="RESET_ARCHIVING",{setArchivingStatus:AR,setArchivingSessionReady:bR,setArchivingOptions:CR,resetArchiving:TR}=Fc({[yR]:e=>e,[ER]:e=>e,[_R]:e=>e,[IR]:()=>{}}),{setIsLiveTranscriptionEnabled:RR,setLiveTranscriptionMeetingOptions:OR,setIsLiveTranscriptionManualCaptionerEnabled:DR,setLiveTranscriptionGatewayId:wR,setLiveTranscriptionSupportedLanguage:NR,setIsLiveTranscriptionSubscribed:MR,setCurrentTranscriptionLang:PR,setCurrentTranslationLang:LR,addLiveTranscriptionMessage:kR,updateLiveTranscriptionMessage:UR,reduceLiveTranscriptionMessages:VR,setLiveTranscriptionEngineType:BR,removeLiveTranscriptionFailoverState:HR,setLiveTranscriptionLastCaptionMessage:jR,resetLiveTranscription:FR,setIsHostDisableCaptions:WR,setIsSomeoneSetSessionTranscription:xR,setIsSomeoneTranslating:$R,setIsTranscriptionLanguageLocked:GR,setIsExternalCaptionerCaptioning:zR,setExternalCcUrl:qR,setTranscriptionMode:KR}=Fc("SET_IS_LIVE_TRANSCRIPTION_ENABLED","SET_LIVE_TRANSCRIPTION_MEETING_OPTIONS","SET_IS_LIVE_TRANSCRIPTION_MANUAL_CAPTIONER_ENABLED","SET_LIVE_TRANSCRIPTION_GATEWAY_ID","SET_LIVE_TRANSCRIPTION_SUPPORTED_LANGUAGE","SET_IS_LIVE_TRANSCRIPTION_SUBSCRIBED","SET_CURRENT_TRANSCRIPTION_LANG","SET_CURRENT_TRANSLATION_LANG","ADD_LIVE_TRANSCRIPTION_MESSAGE","UPDATE_LIVE_TRANSCRIPTION_MESSAGE","REDUCE_LIVE_TRANSCRIPTION_MESSAGES","SET_LIVE_TRANSCRIPTION_ENGINE_TYPE","REMOVE_LIVE_TRANSCRIPTION_FAILOVER_STATE","SET_LIVE_TRANSCRIPTION_LAST_CAPTION_MESSAGE","RESET_LIVE_TRANSCRIPTION"," SET_IS_HOST_DISABLE_CAPTIONS","SET_IS_SOMEONE_SET_SESSION_TRANSCRIPTION","SET_IS_SOMEONE_TRANSLATING","SET_IS_TRANSCRIPTION_LANGUAGE_LOCKED","SET_IS_EXTERNAL_CAPTIONER_CAPTIONING","SET_EXTERNAL_CC_URL","SET_TRANSCRIPTION_MODE"),{setPollData:JR,setPollingId:QR,setPollingWebLinks:YR,setPollingDocMaxSize:ZR,setPollingDocSize:XR,setPollingDocLibraryMaxSize:eO,setPollingDocLibrarySize:tO,setIsRwgEnablePolling:rO,setHasPollingInMeeting:oO,resetPoll:nO}=Fc("SET_POLL_DATA","SET_POLLING_ID","SET_POLLING_WEB_LINKS","SET_POLLING_DOC_MAX_SIZE","SET_POLLING_DOC_SIZE","SET_POLLING_DOC_LIBRARY_MAX_SIZE","SET_POLLING_DOC_LIBRARY_SIZE","SET_IS_RWG_ENABLE_POLLING","SET_HAS_POLLING_IN_MEETING","RESET_POLL"),{setLoggerInitOptions:iO,setIsLaplaceInitialized:sO,setIsLogDetailed:aO,resetLogger:uO}=Fc("SET_LOGGER_INIT_OPTIONS","SET_IS_LAPLACE_INITIALIZED","SET_IS_LOG_DETAILED","RESET_LOGGER"),{setIsLiveStreamEnable:dO,setLiveStreamStatus:cO,setLiveStreamChannel:lO,resetLiveStream:pO}=Fc("SET_IS_LIVE_STREAM_ENABLE","SET_LIVE_STREAM_STATUS","SET_LIVE_STREAM_CHANNEL","RESET_LIVE_STREAM"),{setBroadcastStreamingUtk:hO,setBroadcastStreamingChannelId:mO,setBroadcastStreamingStatus:gO,setBroadcastStreamingEnable:SO,resetBroadcastStreaming:vO}=Fc("SET_BROADCAST_STREAMING_UTK","SET_BROADCAST_STREAMING_CHANNEL_ID","SET_BROADCAST_STREAMING_STATUS","SET_BROADCAST_STREAMING_ENABLE","RESET_BROADCAST_STREAMING"),fO=(e,t,r,o,n,i,s,a)=>{const u={ts:o,auth:n,rwcToken:r,dmz:1,option:s};return i&&Object.assign(u,{confID:i}),a&&Object.assign(u,{aid:a}),`https://${e}/wc/ping/${t}?${new URLSearchParams(u).toString()}`},yO=(e,t=!1)=>{const{socket:{zoomSocketStatus:r,xmppSocketStatus:o,mainSessionSocketStatus:n},meeting:{meetingStatus:i}}=e,s=[];if(i===Ho.Joined){var a;const t=ju.getInstance(),r=E_.createAgent();if((null===(a=Tu(e))||void 0===a?void 0:a.audio)===ye.Computer&&t.leaveComputerAudio(),t.disconnect(),qd.watch(t.destroy()),e.video&&(e.video.subscribedVideoList.length>0&&e.video.subscribedVideoList.forEach((e=>{t.unsubscribeVideo(e)})),e.video.isCurrentUserStartedVideo&&$a(xn)),e.share&&e.share.isReceiveSharing){const t=e.share.activeNodeId;e.share.remoteControlledUserList.length>0&&e.share.remoteControlledUserList.forEach((e=>{r.sharingRequestRemoteControl(e,!1)})),r.unsubscribeSharing(t)}pm.destroyInstance()}if(t||(Ay.clearSession(),[by.WebclientTk,by.WebclientZsk,by.WebclientZtk,by.WebclientRecordingToken,by.WebclientObfToken].forEach((e=>{sessionStorage.removeItem(e)})),Sb.destroy()),r!==N_.Closed&&s.push(FS()),o!==N_.Closed&&s.push(WS()),n!==N_.Closed&&s.push(qS()),t){const r=Tu(e);s.push(Qg({audio:null==r?void 0:r.audio,muted:null==r?void 0:r.muted,video:null==r?void 0:r.bVideoOn,isFailover:t}))}else s.push(Qg({audio:!1,muted:void 0,video:!1,isFailover:t}));return s.push(tv(),Sv(),Qv(),Q_(t),HA(),il(t),ZC(),rT(),ST(),mR(),MT(),GT(),fR(),TR(),FR(t),nO(),uO(t),pO(t),vO(t),nS(Ho.Closed)),s},EO=(e,...t)=>qa({event:No,operations:[Ur((t=>t.find((t=>t.userId===e.userId&&(!e.key||void 0!==t[`${e.key}`]))))),uo((e=>!!e)),mo(1)]},...t),_O={[`${jo.AudioDecodeInWorklet}`]:{mask:15,action:pv},[`${jo.VideoHalfWebRTCEnable}`]:[{mask:null,action:jl}],[`${jo.WebGL2Render}`]:{mask:15,action:xl},[`${jo.WebGPURender}`]:{mask:15,action:$l},[`${jo.ZMKFromRWG}`]:{mask:15,action:yS}};function IO(e){if(!e)return"";const t=e.match(/rid=(.*)/);return t?t[1]:""}const AO=["userId","displayName","audio","isHost","avatar","bRaiseHand","bHold","bVideoOn","sharerOn","sharerPause","feedback","bLocalRecord","strPronoun","sdkKey","audioConnectionStatus","caps","bAllowISORecord","bVideoConnect","userIdentity","isSpeakerOnly","bVideoShare","bShareAudioOn","bShareToBORooms","bid",{from:"bBotUser",to:"botUser"},{from:"BotBrandName",to:"botBrandName"},{from:"BotAuthorizerName",to:"botAuthorizerName"},{from:"bInFailover",to:"isInFailover"},{from:"userGUID",to:"userGuid"},{from:"bGuest",to:"isGuest"},{from:"sharerPause",to:"sharePause"},{from:"bCoHost",to:e=>({isCoHost:!!e})},{from:"muted",to:(e,t)=>({muted:null!=t&&t.isSpeakerOnly||""===(null==t?void 0:t.audio)?void 0:e})},{from:"userType",to:(e,t)=>{const r=du(e),o={isPhoneUser:r};return r&&null!=t&&t.phoneNumber&&Object.assign(o,{phoneNumber:t.phoneNumber}),o}}];function bO(e){return AO.reduce(((t,r)=>{const o="string"==typeof r?r:r.from,n=function(e,t,r){if("string"==typeof e)return{[`${e}`]:t};if("object"==typeof e&&void 0!==e.from){const{to:o}=e;return"string"==typeof o?{[`${o}`]:t}:o(t,r)}}(r,e[o],e);return{...t,...n}}),{})}const CO=({breakoutRoom:{mainSessionAttendeeList:e}})=>e,TO=({meeting:{zoomId:e}})=>e,RO=({breakoutRoom:{isHugeBO:e}})=>e,OO=tu([({breakoutRoom:{controlStatus:e}})=>e,({breakoutRoom:{currentRoom:{status:e}}})=>e,({breakoutRoom:{currentRoom:{boId:e}}})=>e],((e,t,r)=>!(e!==hu.InProgress&&e!==hu.Closing||t!==gu.InRoom&&t!==gu.TimeUp||!r))),DO=tu([({breakoutRoom:{rooms:e}})=>e,ru,TO,CO,OO,RO],((e,t,r,o,n,i)=>{const s=e.reduce(((e,t)=>{const{attendeeGuidList:r}=t;return e.concat(r)}),[]);return(n?o:t).filter((e=>!e.bHold&&!e.isHost&&e.zoomID!==r&&!e.bid&&!s.includes(e.userGUID)&&(!i||FE(e.caps))))})),wO=tu([OO,CO,ru,TO,RO],((e,t,r,o,n)=>(e?t:r).filter((e=>!e.bHold&&!e.isHost&&e.zoomID!==o&&!e.bid&&(!n||FE(e.caps)))))),NO=tu([OO,CO,ru],((e,t,r)=>e?t.find((e=>e.isHost)):r.find((e=>e.isHost))));var MO,PO,LO,kO;const UO=E_.createAgent();let VO=(MO=hy(py.Other),PO=hy(py.Other),LO=hy(py.Other),kO=class extends I_{constructor(e){super(e),this.modules=void 0,this.useSDK=void 0,this.useSDK=!1,this.modules=new Map}initWithSDK(e,t,r){return this.useSDK=!0,this.init(e,t,r)}init(t,n,a){const{audio:u,video:d}=O();if(!u||!d)return console.error("https://developers.zoom.us/docs/video-sdk/web/browser-support"),Promise.reject({type:Ke,errorCode:wa.CLIENT_PLATFORM_UNSUPPORTED,reason:"Please update to the latest Chrome, Edge, Safari, or Firefox, as your current browser doesn't support audio/video. Retry after the upgrade."});const{[r]:c,[e]:l}=this;let p=v,h="en-US",g=`${v}/${Uo}`;if(a){const{dependentAssets:e,additionalFeatures:t,constraints:r,language:n,webEndpoint:i}=a;n&&(h=n),i&&function(e){m=s(e,{hostname:!0})}(i),e===Vo.CDN||e===S?(p=S,g=`${S}/${Uo}`):e===Vo.Global||e===v?(p=v,g=`${v}/${Uo}`):e===Vo.CN||e===f?(p=f,g=`${f}/${Uo}`):e&&/^https?:\/\//.test(e)&&(p=bd(e),g=`${p}/${Uo}`),t&&Array.isArray(t)&&t.forEach((e=>{if(this[o][e]&&void 0===l.getState()[e]){const{epic:t,reducer:r,Client:n}=this[o][e];l.injectReducer(e,r),l.injectEpic(t);const i=new n(l);this.modules.set(e,i)}})),null!=r&&r.audio&&void 0===l.getState().audio&&(l.injectReducer("audio",zA),l.injectEpic(JA)),null!=r&&r.video&&void 0===l.getState().video&&(l.injectReducer("video",ob),l.injectEpic(ab)),null!=r&&r.screen&&void 0===l.getState().share&&(l.injectReducer("share",UC),l.injectEpic(jC))}return c(Wg({apiKey:t,signature:n,language:h,useSDK:this.useSDK})),c(cv({mediaConstraints:a&&a.constraints||{},assetsPath:p,enforceMultipleVideos:null==a?void 0:a.enforceMultipleVideos,enforceVirtualBackground:null==a?void 0:a.enforceVirtualBackground,skipJsMedia:null==a?void 0:a.skipJsMedia,patchJsMedia:null==a?void 0:a.patchJsMedia,alternativeNameForVideoPlayer:null==a?void 0:a.alternativeNameForVideoPlayer})),void 0!==(null==a?void 0:a.stayAwake)&&c(hS(a.stayAwake)),void 0!==(null==a?void 0:a.quicklyLeaveMeeting)&&c(vS(a.quicklyLeaveMeeting)),void 0!==(null==a?void 0:a.isUIToolkit)&&c(Bg(a.isUIToolkit)),void 0!==(null==a?void 0:a.isLogDetailed)&&c(aO(!!a.isLogDetailed)),new Promise(((e,t)=>{null!=a&&a.skipJsMedia?e(""):i(g,(()=>{var t;null!==(t=window.JsMediaSDK_Instance)&&void 0!==t&&null!==(t=t.util)&&void 0!==t&&t.initAsyncJob?window.JsMediaSDK_Instance.util.initAsyncJob().then((()=>e(""))):e("")}),(()=>{t({type:Xe,reason:"dependent assets are not accessible",errorCode:wa.CLIENT_DEPENDENT_ASSETS_INACCESSIBLE})}))}))}on(e,t){((e,t)=>{const r=Ua[e];if(r){const o=Ba.get(e);if(o)o.push(t),Ba.set(e,o);else{const o=[t];Ba.set(e,o);const n=no(...r.map((e=>{const{event:t,payload:r}=e;return Xr(Va,t).pipe(Ur((e=>r(e))),_r(Zt))}))).subscribe((t=>{const r=Ba.get(e);r&&r.forEach((e=>{e(t)}))}));Ha.push(n)}}})(e,t)}off(e,t){((e,t)=>{if(Ua[e]){const r=Ba.get(e);if(Array.isArray(r)){const o=r.filter((e=>e!==t));Ba.set(e,o)}}})(e,t)}getFeatureModule(e){return this.modules.get(e)}leave(){const{[t]:e,[r]:o}=this,{socket:{zoomSocketStatus:n},meeting:{meetingInfoTimestamp:i,zlkJwtToken:s}}=e();return n===N_.Connected||n===N_.Connecting?o(Pg()):(i&&o(Pg()),s||o(Lg())),Nr(ro(500).pipe(So("")))}end(){const{[t]:e,[r]:o}=this;return"connected"===e().socket.zoomSocketStatus?(o(kg()),Nr(ro(500).pipe(To((()=>{Qa()})),So("")))):Promise.resolve("")}changeName(t,r){const o=this[e].getState(),{meeting:{bAllowAttendeeRename:n}}=o,i=Tu(o),s=lu(i.userRole),a=Ru(o);if(s)return Promise.reject({type:Ye,errorCode:wa.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED});if(r&&r!==(null==i?void 0:i.userId)){if(a){const{participants:{attendeesList:e}}=o,n=e.find((e=>e.userId===r));if(n)return UO.rename(r,cd(t),cd(n.displayName)),EO({userId:r,key:"displayName"},(e=>e.displayName===t));{const e=Du(o).find((e=>e.userId===r));if(e){const r=b_.getInstance();return UO.rename(e.userId,cd(t),cd(e.displayName)),r.rename(e.jid,t),qa(Po,(r=>{const o=r.find((t=>t.jid===e.jid));return o&&o.displayName===t}))}return Promise.reject({type:Xe,reason:"no matching user",errorCode:wa.CLIENT_MISMATCH_USER})}}return Promise.reject({type:Ye,errorCode:wa.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})}return t===i.displayName?Promise.resolve():a||n?(UO.rename(i.userId,cd(t),cd(i.displayName)),qa(Do,(e=>e.displayName===t))):Promise.reject({type:Ye,reason:"host disallow rename themselves",errorCode:wa.CLIENT_HOST_DISALLOW_RENAME})}makeHost(e){return UO.assignHost(e,!1),EO({userId:e,key:"isHost"},(e=>!0===e.isHost))}makeCoHost(t){const r=this[e].getState(),o=Nu(r).find((e=>e.userId===t));return!0===(null==o?void 0:o.bCoHost)?Promise.reject({type:Xe,reason:`user:[${t}] is already co-host `,errorCode:wa.CLIENT_MISMATCH_USER}):(UO.assignHost(t,!0),EO({userId:t,key:"bCoHost"},(e=>!0===e.bCoHost)))}revokeCoHost(t){const r=this[e].getState(),o=Nu(r).find((e=>e.userId===t));return!1===(null==o?void 0:o.bCoHost)?Promise.reject({type:Xe,reason:`user:[${t}] is not a co-host`,errorCode:wa.CLIENT_MISMATCH_USER}):(UO.revokeCoHost(t),EO({userId:t,key:"bCoHost"},(e=>!1===e.bCoHost)))}reclaimHost(){const e=this[t](),{meeting:{isOriginHost:r}}=e,o=Tu(e);return null!=o&&o.isHost?Promise.resolve(""):r?(UO.reclaimHost(o.userId,!1),qa(Do,(e=>!0===e.isHost))):Promise.reject({type:Ye,reason:"Only orignial host can reclaim host",errorCode:wa.CLIENT_MISMATCH_USER})}isHost(){const t=this[e].getState(),r=Tu(t);return!!r&&r.isHost}isCoHost(){const t=this[e].getState(),r=Tu(t);return!!r&&!!r.bCoHost}isOriginHost(){const{meeting:{isOriginHost:e}}=this[t]();return e}getCurrentUserInfo(){const t=this[e].getState(),r=Tu(t);if(r){const e=bO(r);if(t.meeting.isWebinar&&lu(r.userRole)){const{audio:r}=t,o=null==r?void 0:r.isAllowToTalk;Object.assign(e,{isAllowToTalk:o})}if(t.breakoutRoom&&OO(t)){const{breakoutRoom:{currentRoom:{boId:r}}}=t;Object.assign(e,{bid:r})}return e}return null}getParticipantsList(){const t=this[e].getState(),{meeting:{meetingStatus:r}}=t,o=Tu(t);if(r===Ho.Joined&&o&&!o.bHold){var n;const e=t.breakoutRoom&&OO(t)?null===(n=t.breakoutRoom)||void 0===n||null===(n=n.currentRoom)||void 0===n?void 0:n.boId:"";return Nu(t).map((t=>{const r=bO(t);return e&&Object.assign(r,{bid:e}),r}))}return[]}getAssistantsList(){const t=this[e].getState(),{meeting:{meetingStatus:r}}=t,o=Tu(t);return r===Ho.Joined&&o?Mu(t).map((e=>({userId:e.userId,displayName:e.displayName,isNewAst:!0}))):[]}getMeetingHost(){var e;const r=this[t]();let o=Pu(r);return o||(null===(e=r.breakoutRoom)||void 0===e?void 0:e.currentRoom.status)!==gu.InRoom||(o=r.breakoutRoom.mainSessionAttendeeList.find((e=>e.isHost))),void 0!==o?bO(o):null}getMeetingInfo(){const{meeting:{meetingStatus:e,isOnHold:r,meetingNumber:o,passWord:n,userName:i,userEmail:s,meetingTopic:a,meetingOptions:u,encType:d,region:c,network:l,topic:p,zlkJwtToken:h,userId:m,lang:g,inviteEmail:S,meetingId:v,participantID:f,h323Password:E,recordingDisclaimer:_,recordingDisclaimerForRecorder:I,wrInfo:A,meetingInfo:b,isNewJoinFlow:C,chatModerationPolicy:T}}=this[t](),R=e===Ho.Joined&&!r;if(h)return{topic:p,password:n,userName:i,isInMeeting:R,userId:m,meetingId:v};{let e="";return 0===d?e="None":1===d?e="AES ECB":2===d&&(e="AES GCM"),{meetingNumber:o,password:n,userName:i,userEmail:s,inviteEmail:S,meetingTopic:a,encryptionType:e,region:c,network:l,isInMeeting:R,userId:m,lang:g,webEndpoint:y(),meetingId:v,participantId:f,telPwd:E,recordingInfo:{recordingDisclaimer:_,recordingDisclaimerForRecorder:I,isUserEnableRecordingReminder:null==u?void 0:u.isUserEnableRecordingReminder},wrInfo:Object.assign({},A,{isNew:C}),scheduleInfo:b,chatModerationPolicy:T}}}},AS(kO.prototype,"end",[LS,NS],Object.getOwnPropertyDescriptor(kO.prototype,"end"),kO.prototype),AS(kO.prototype,"changeName",[NS],Object.getOwnPropertyDescriptor(kO.prototype,"changeName"),kO.prototype),AS(kO.prototype,"makeHost",[MO,LS,NS],Object.getOwnPropertyDescriptor(kO.prototype,"makeHost"),kO.prototype),AS(kO.prototype,"makeCoHost",[PO,LS,NS],Object.getOwnPropertyDescriptor(kO.prototype,"makeCoHost"),kO.prototype),AS(kO.prototype,"revokeCoHost",[LO,LS,NS],Object.getOwnPropertyDescriptor(kO.prototype,"revokeCoHost"),kO.prototype),AS(kO.prototype,"reclaimHost",[NS],Object.getOwnPropertyDescriptor(kO.prototype,"reclaimHost"),kO.prototype),kO);const BO=E_.createAgent(),HO=b_.getInstance(),jO=(e,t,r)=>{const o=null==t?void 0:t.userId;if(null==e||!e.zoomID||null==t||!t.displayName||o===e.userId)return{type:Xe,reason:"invalid target user",errorCode:wa.CHAT_MISMATCH_USER};const{chat:{chatPrivilege:n,panelistChatPrivilege:i},meeting:{isWebinar:s}}=r,a=Ru(r),u=t.isHost||t.bCoHost;let d=!1;if(!a){if(s)if(lu(e.userRole))(n===e_.NoAttendee||n===e_.AllPanelist&&o!==r_.Panelist||n===e_.All&&o!==r_.All&&o!==r_.Panelist)&&(d=!0);else{const e=lu(null==t?void 0:t.userRole);(i===t_.Invalid||i===t_.AllPanelist&&(e||o===r_.All))&&(d=!0)}else(n===e_.NoAttendee||n===e_.Host&&!u||o===r_.SilentModeUsers||n===e_.EveryonePublicly&&o!==r_.All&&!u)&&(d=!0);if(d)return{type:Ye,reason:"Insufficient chat privilege",errorCode:wa.CHAT_INSUFFICIENT_PRIVILEGE}}return null};function FO(e,t){if(t===r_.All)return d_;if(t===r_.Panelist)return c_;if(t===r_.SilentModeUsers)return l_;{const{meeting:{isWebinar:r},participants:{xmppAttendeeList:o,attendeesList:n}}=e;return r?n.find((e=>e.userId===t))||o.find((e=>e.userId===t)):n.find((e=>e.userId===t))}}function WO(e,t,r){if(null!=r&&r.host)return[Pu(e),...Lu(e)].filter((e=>(null==e?void 0:e.userId)!==t)).map((e=>({userId:null==e?void 0:e.userId,displayName:null==e?void 0:e.displayName,isHost:null==e?void 0:e.isHost,isCoHost:null==e?void 0:e.bCoHost})));{let o=[Pu(e),...Lu(e),...e.participants.attendeesList.filter((e=>!(e.bCoHost||e.isHost||e.bHold)))];if(null!=r&&r.includeAttendee){const t=Du(e).filter((e=>!du(e.userType)));o=[...o,...t]}return o.filter((e=>void 0!==e&&e.userId!==t)).map((e=>({userId:null==e?void 0:e.userId,displayName:null==e?void 0:e.displayName,isHost:null==e?void 0:e.isHost,isCoHost:null==e?void 0:e.bCoHost})))}}function xO(e,t){const{chat:{chatHistory:r}}=t;return r.find((t=>{var r;return(null===(r=t.file)||void 0===r||null===(r=r.upload)||void 0===r?void 0:r.uniqueId)===e}))}function $O(e,t){const{meeting:{isWebinar:r},participants:{attendeesList:o}}=t,{destNodeID:n,senderName:i,attendeeNodeID:s}=e,a=o.find((e=>e.userId===n)),u=e.sn?e.sn:null==a?void 0:a.zoomID,d=i?ld(i):null==a?void 0:a.displayName;let c,l="";if(s===r_.SilentModeUsers)return{sender:{name:"Host",userId:n},receiver:{name:"Everyone (in Waiting Room)",userId:s},timestamp:(new Date).getTime()};if(s===r_.All)l=r?"All panelists and attendees":"Everyone";else if(s===r_.Panelist)l="All panelists";else{if(r){const e=Du(t).find((e=>e.userId===s));e&&(l=e.displayName)}if(!l){const e=o.find((e=>e.userId===s));e&&(l=e.displayName,c=e.userGUID)}}return{sn:u,sender:{name:d,userId:n,userGuid:null==a?void 0:a.userGUID,avatar:null==a?void 0:a.avatar},receiver:{name:l,userId:s,userGuid:c},timestamp:(new Date).getTime()}}function GO(e){var t;const[r]=e.split(".").reverse();return null!==(t=S_[r])&&void 0!==t?t:""}function zO(e,t){const r=[];for(let o=e.length-1;o>=0;o--){const n=e[o];if(!n.file&&(!n.id&&n.sender.userId===t.userId&&[r_.All,r_.Panelist,r_.IndividualCcPanelist,t.destNodeID].includes(n.receiver.userId)&&r.unshift(n),n.id))break}return r.length>0?r[0]:null}function qO(e){switch(e.responseType){case"json":if("response"in e)return e.response;var t=e;return JSON.parse(t.responseText);case"document":return e.responseXML;default:return"response"in e?e.response:(t=e).responseText}}var KO=function(e,t,r,o){void 0===o&&(o="download_load"),this.originalEvent=e,this.xhr=t,this.request=r,this.type=o;var n=t.status,i=t.responseType;this.status=null!=n?n:0,this.responseType=null!=i?i:"";var s=t.getAllResponseHeaders();this.responseHeaders=s?s.split("\n").reduce((function(e,t){var r=t.indexOf(": ");return e[t.slice(0,r)]=t.slice(r+2),e}),{}):{},this.response=qO(t);var a=e.loaded,u=e.total;this.loaded=a,this.total=u},JO=ct((function(e){return function(e,t,r){var o;this.message=e,this.name="AjaxError",this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType;try{o=qO(t)}catch(e){o=t.responseText}this.response=o}})),QO=function(){function e(e,t){return JO.call(this,"ajax timeout",e,t),this.name="AjaxTimeoutError",this}return e.prototype=Object.create(JO.prototype),e}();var YO=Ur((function(e){return e.response}));var ZO,XO=(ZO=function(e){return function(e){return new wt((function(t){var r,o,n,i=ot({async:!0,crossDomain:!1,withCredentials:!1,method:"GET",timeout:0,responseType:"json"},e),s=i.queryParams,a=i.body,u=i.headers,d=i.url;if(!d)throw new TypeError("url is required");if(s)if(d.includes("?")){var c=d.split("?");if(2<c.length)throw new TypeError("invalid url");n=new URLSearchParams(c[1]),new URLSearchParams(s).forEach((function(e,t){return n.set(t,e)})),d=c[0]+"?"+n}else d=d+"?"+(n=new URLSearchParams(s));var l={};if(u)for(var p in u)u.hasOwnProperty(p)&&(l[p.toLowerCase()]=u[p]);var h=i.crossDomain;h||"x-requested-with"in l||(l["x-requested-with"]="XMLHttpRequest");var m=i.withCredentials,g=i.xsrfCookieName,S=i.xsrfHeaderName;if((m||!h)&&g&&S){var v=null!==(o=null===(r=null===document||void 0===document?void 0:document.cookie.match(new RegExp("(^|;\\s*)("+g+")=([^;]*)")))||void 0===r?void 0:r.pop())&&void 0!==o?o:"";v&&(l[S]=v)}var f,y=function(e,t){var r;if(!e||"string"==typeof e||function(e){return"undefined"!=typeof FormData&&e instanceof FormData}(e)||function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}(e)||function(e){return sD(e,"ArrayBuffer")}(e)||function(e){return sD(e,"File")}(e)||function(e){return sD(e,"Blob")}(e)||function(e){return"undefined"!=typeof ReadableStream&&e instanceof ReadableStream}(e))return e;if(function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(e)}(e))return e.buffer;if("object"==typeof e)return t["content-type"]=null!==(r=t["content-type"])&&void 0!==r?r:"application/json;charset=utf-8",JSON.stringify(e);throw new TypeError("Unknown body type")}(a,l),E=ot(ot({},i),{url:d,headers:l,body:y});f=e.createXHR?e.createXHR():new XMLHttpRequest;var _=e.progressSubscriber,I=e.includeDownloadProgress,A=void 0!==I&&I,b=e.includeUploadProgress,C=void 0!==b&&b,T=function(e,r){f.addEventListener(e,(function(){var e,o=r();null===(e=null==_?void 0:_.error)||void 0===e||e.call(_,o),t.error(o)}))};T("timeout",(function(){return new QO(f,E)})),T("abort",(function(){return new JO("aborted",f,E)}));var R=function(e,t){return new KO(t,f,E,e+"_"+t.type)},O=function(e,r,o){e.addEventListener(r,(function(e){t.next(R(o,e))}))};C&&[rD,oD,nD].forEach((function(e){return O(f.upload,e,eD)})),_&&[rD,oD].forEach((function(e){return f.upload.addEventListener(e,(function(e){var t;return null===(t=null==_?void 0:_.next)||void 0===t?void 0:t.call(_,e)}))})),A&&[rD,oD].forEach((function(e){return O(f,e,tD)}));var D=function(e){var r="ajax error"+(e?" "+e:"");t.error(new JO(r,f,E))};f.addEventListener("error",(function(e){var t;null===(t=null==_?void 0:_.error)||void 0===t||t.call(_,e),D()})),f.addEventListener(nD,(function(e){var r,o,n=f.status;if(n<400){null===(r=null==_?void 0:_.complete)||void 0===r||r.call(_);var i=void 0;try{i=R(tD,e)}catch(e){return void t.error(e)}t.next(i),t.complete()}else null===(o=null==_?void 0:_.error)||void 0===o||o.call(_,e),D(n)}));var w=E.user,N=E.method,M=E.async;for(var p in w?f.open(N,d,M,w,E.password):f.open(N,d,M),M&&(f.timeout=E.timeout,f.responseType=E.responseType),"withCredentials"in f&&(f.withCredentials=E.withCredentials),l)l.hasOwnProperty(p)&&f.setRequestHeader(p,l[p]);return y?f.send(y):f.send(),function(){f&&4!==f.readyState&&f.abort()}}))}("string"==typeof e?{url:e}:e)},ZO.get=function(e,t){return XO({method:"GET",url:e,headers:t})},ZO.post=function(e,t,r){return XO({method:"POST",url:e,body:t,headers:r})},ZO.delete=function(e,t){return XO({method:"DELETE",url:e,headers:t})},ZO.put=function(e,t,r){return XO({method:"PUT",url:e,body:t,headers:r})},ZO.patch=function(e,t,r){return XO({method:"PATCH",url:e,body:t,headers:r})},ZO.getJSON=function(e,t){return YO(XO({method:"GET",url:e,headers:t}))},ZO),eD="upload",tD="download",rD="loadstart",oD="progress",nD="load",iD=Object.prototype.toString;function sD(e,t){return iD.call(e)==="[object "+t+"]"}const aD=TE.getInstance(),uD=aD.makeLogger(["File Transfer"]);function dD(e,t,r){const{name:o,size:n}=e,{meeting:{reportDomain:i,svcUrl:s,conId:a}}=r;return`https://${i}${t}?${new URLSearchParams({filename:o,filesize:n,rwg:s,cid:a}).toString()}`}function cD(e,t){return t.fileObj?`${e}/zoomfile/download?objkey=${t.fileObj}&business=meeting`:`${e}/file/${t.fileID}?business=meeting`}function lD(e,t){return{fileName:e.name,fileSize:e.size,receiverId:null==t?void 0:t.userId,receiverGuid:null==t?void 0:t.userGuid}}function pD(e,t,r){aD.report(`${e}. file name:${_E(t.name)},file size:${t.size}, ${"type"in t?`file type:${t.type}`:""}, error:${r.name};${r.message}`,["File Transfer"])}function hD(e){var t,r,o;return{id:e.id,fileName:null===(t=e.file)||void 0===t?void 0:t.name,fileSize:null===(r=e.file)||void 0===r?void 0:r.size,fileUrl:null===(o=e.file)||void 0===o?void 0:o.fileUrl,senderId:e.sender.userId,senderGuid:e.sender.userGuid}}function mD(e,t,r){return new Promise(((o,n)=>{const i=new FileReader;i.readAsArrayBuffer(e.slice(t,r)),i.onload=e=>{var t;return o(null===(t=e.target)||void 0===t?void 0:t.result)},i.onerror=e=>n(e)}))}async function gD(e,t){let[r,o]=[e.size,0];null!=t&&(r=Math.min(h_.ChunkSize,e.size-t),o=t);const n=e.size-o<=h_.ChunkSize,i=Math.ceil(r/h_.EncodeBlockSize);try{const r=await Promise.all(Array.from({length:n?Math.max(i-1,1):i},((e,t)=>({start:t*h_.EncodeBlockSize+o,end:(n&&t===i-2?t+2:t+1)*h_.EncodeBlockSize+o}))).map((async({start:r,end:o})=>{try{const t=await mD(e,r,o);return t?await Sb.beginEncrypt({text:new Uint8Array(t),type:pb.CHAT_FILE}):Promise.reject(null)}catch(r){return pD(`encrypt file buffer error. offset:${t},`,e,r),Promise.reject(r)}})));return function(e){const t=e.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(t);let o=0;for(const t of e)r.set(new Uint8Array(t),o),o+=t.byteLength;return r}(r)}catch(e){console.warn(e)}return null}function SD(e,t,r,o){return o.pipe(BS(`${dT}`,`${FS}`),uo((o=>{if(o.type===`${FS}`)return!0;const{payload:{uniqueId:n,fileName:i,userId:s}}=o;return t===n&&e.name===i&&r.userId===s})),mo(1),To((o=>{uD.info(`Cancel file upload. file name:${_E(e.name)},file size:${e.size},receiver id:${r.userId}`),$a(cn,{...lD(e,r),progress:0,status:m_.Cancel,retryToken:o.type===`${dT}`?t:void 0})})))}function vD(e,t){if(null!=e&&e.file){const{file:r,receiver:o}=e,{upload:{chunkIndex:n,totalChunks:i,uniqueId:s}}=r;return $a(cn,{...lD(t,o),progress:Math.floor((null!=n?n:0)/(null!=i?i:1)*100),status:m_.Fail,retryToken:s}),br([uT({upload:{status:m_.Fail,progress:0,uniqueId:s}}),cT({uniqueId:s,file:t})])}return or}function fD(e,t){return $a(cn,{...lD(e),progress:0,status:m_.Fail}),Cr(uT({upload:{status:m_.Fail,progress:0,uniqueId:t}}))}async function yD(e,t,r,o){const n=dD(e,"/wc/fileupload",o.value),i=new FormData;try{const s=await gD(e),a=xO(t,o.value);if(s&&a){i.append("file",new File([s],e.name));const{meeting:{zmk:u}}=o.value,{receiver:d}=a;return XO({url:n,method:"POST",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:u},crossDomain:Id(n),body:i,includeUploadProgress:!0}).pipe(bo(SD(e,t,d,r)),$r((r=>{const{type:n,loaded:i,responseHeaders:s,total:a}=r;let u=0,c=m_.InProgress;const l={upload:{uniqueId:t}},p=[];if("upload_loadstart"===n)u=0;else if("upload_progress"===n)u=Math.floor(i/a*100*.9);else if("upload_load"===n)u=90;else if("download_load"===n){var h,m;u=100,c=m_.Success;const{chat:{fileServerDomain:e}}=o.value,t=null===(h=s["zoom-file-id"])||void 0===h?void 0:h.trim(),r=null===(m=s["zoom-file-obj"])||void 0===m?void 0:m.trim(),n=cD(e,{fileObj:r});Object.assign(l,{fileID:t,fileObj:r,fileUrl:n})}return Object.assign(l.upload,{progress:u,status:c}),(u>0||"upload_loadstart"===n)&&($a(cn,{...lD(e,d),progress:u,status:c}),p.push(uT(l))),br(p)})),lo((t=>(console.warn(t),pD("Upload small file error.",e,t),vD(a,e)))))}}catch(e){console.warn(e)}return fD(e,t)}const ED=(()=>{const e=new Bu;return t=>async(...r)=>{await e.acquire(),t(...r),setTimeout((()=>{e.release()}),3e3)}})(),_D=function(e){const t=["chatFileTransfer"];return new Proxy(e,{get:(e,r)=>"string"==typeof r&&t.includes(r)?function(...t){return ED(e[r].bind(e))(...t)}:Reflect.get(e,r)})}(E_.createAgent()),ID={chatHistory:[],chatPrivilege:e_.All,panelistChatPrivilege:t_.AllPanelist,isAllowAttendeeChat:!0,isFileTransferEnable:!0,isEnableFileTransferEncrypted:!0,fileTransferFileType:[],fileDownloadPromptIgnoreList:[],fileTransferSizeLimit:0,fileServerDomain:"",failedFileTransfer:{}},AD=zc({[`${tT}`]:sy(((e,{payload:t})=>{e.chatHistory.push(t)})),[`${XC}`]:sy(((e,{payload:t})=>{e.chatPrivilege=t})),[`${eT}`]:sy(((e,{payload:t})=>{e.panelistChatPrivilege=t})),[`${oT}`]:sy(((e,{payload:t})=>{e.isAllowAttendeeChat=t})),[`${nT}`]:sy(((e,{payload:t})=>{const{destNodeID:r,msgID:o,userId:n}=t,i=zO(e.chatHistory,{userId:n,destNodeID:r});i&&Object.assign(i,{id:o})})),[`${iT}`]:sy(((e,{payload:t})=>{const{msgId:r}=t,o=e.chatHistory.findIndex((e=>e.id===r));o>=0&&e.chatHistory.splice(o,1)})),[`${sT}`]:sy(((e,{payload:t})=>{Object.assign(e,t)})),[`${aT}`]:sy(((e,{payload:t})=>{const{originFile:r,...o}=t;e.chatHistory.push(o)})),[`${uT}`]:sy(((e,{payload:t})=>{const{upload:r,download:o,originFile:n,...i}=t;if(r){var s;const{uniqueId:t,...o}=r,n=e.chatHistory.find((e=>{var r;return e.file&&(null===(r=e.file.upload)||void 0===r?void 0:r.uniqueId)===t}));null!=n&&null!==(s=n.file)&&void 0!==s&&s.upload&&(Object.assign(n.file.upload,{...o}),Object.assign(n.file,{...i}),n.file.upload.status===m_.Success&&e.failedFileTransfer[n.file.upload.uniqueId]&&delete e.failedFileTransfer[n.file.upload.uniqueId])}else if(o){const{id:t,fileUrl:r}=i,n=e.chatHistory.find((e=>{var o;return e.id===t&&(null===(o=e.file)||void 0===o?void 0:o.fileUrl)===r}));null!=n&&n.file&&(n.file.download?Object.assign(n.file.download,{...o}):Object.assign(n.file,{download:o}))}})),[`${dT}`]:sy(((e,{payload:t})=>{const{uniqueId:r,fileName:o,userId:n}=t,i=e.chatHistory.find((e=>e.file&&e.file.name==o&&e.file.upload.uniqueId===r&&e.file.upload.status===m_.InProgress&&e.receiver.userId===n));var s;null!=i&&i.file&&Object.assign(null===(s=i.file)||void 0===s?void 0:s.upload,{status:m_.Cancel,progress:0})})),[`${cT}`]:sy(((e,{payload:t})=>{const{uniqueId:r,file:o}=t;e.failedFileTransfer[`${r}`]||Object.assign(e.failedFileTransfer,{[`${r}`]:o})})),[`${lT}`]:sy(((e,{payload:t})=>{const{fileID:r,msgID:o,senderId:n}=t,i=e.chatHistory.find((e=>{var t;return(null===(t=e.file)||void 0===t?void 0:t.fileID)===r&&e.sender.userId===n}));i&&Object.assign(i,{id:o})})),[`${pT}`]:sy(((e,{payload:t})=>{const{id:r,fileUrl:o}=t,n=e.chatHistory.find((e=>{var t,n;return e.id===r&&(null===(t=e.file)||void 0===t?void 0:t.fileUrl)===o&&(null===(n=e.file)||void 0===n?void 0:n.download.status)===g_.InProgress}));var i;null!=n&&n.file&&Object.assign(null===(i=n.file)||void 0===i?void 0:i.download,{status:g_.Cancel,progress:0})})),[`${rT}`]:()=>({...ID})},ID);var bD;const CD=E_.createAgent();let TD=(bD=class extends I_{async send(e,o){if(!e)return Promise.reject({type:Xe,reason:"Text is empty",errorCode:wa.CHAT_EMPTY_MESSAGE});const{[t]:n,[r]:i}=this,s=n(),a=Tu(s),u=FO(s,o),d=jO(a,u,s);if(d)return Promise.reject(d);const{meeting:{isWebinar:c,encType:l}}=s,p=l===lb.AES_GCM;let h=!1;const m=c&&lu(u.userRole);if(o===r_.SilentModeUsers)CD.chat(cd(e),o);else{let t,r=0;c?m?8&~u.clientCap?(r=r_.Panelist,t=o,h=!0):(r=r_.IndividualCcPanelist,t=o):u&&(r=u.userId):r=u.userId,await async function(e){const{text:t,destId:r,sn:o,attendeeId:n}=e;{const e=await Sb.beginEncrypt({text:t,type:pb.RWG_CHAT});BO.chat(e,r,o,n)}}({text:e,destId:r,sn:null==a?void 0:a.zoomID,attendeeId:t}),h&&await function(e){const{text:t,jid:r,isGCMEnabled:o}=e;return Sb.beginEncrypt({text:t,type:pb.XMPP_CHAT}).then((e=>{HO.sendWebinarMseeage(e,r,r_.IndividualCcPanelist,o)}))}({text:e,jid:u.jid,isGCMEnabled:p})}const g=function(e,t,r,o){const n=(new Date).getTime(),i=performance.now();return{message:e,sender:{name:t.displayName,userId:t.userId,userGuid:t.userGUID,avatar:t.avatar},receiver:{name:null==r?void 0:r.displayName,userId:o?r_.IndividualCcPanelist:null==r?void 0:r.userId,userGuid:null==r?void 0:r.userGUID},timestamp:n,highResTimeStampForIdentification:i}}(e,a,u,m);if(i(tT(g)),h)return $a(sn,g),g;try{const e=await Nr(Ka(un).pipe(Lr(5e3),_o((e=>g.highResTimeStampForIdentification!==e.identification||!([e.receiverId,r_.All,r_.Panelist].includes(o)||e.receiverId===r_.IndividualCcPanelist))),mo(1))),{msgId:t}=e,{highResTimeStampForIdentification:r,...n}=g,i={id:t,...n,...m&&{receiver:{name:null==u?void 0:u.displayName,userId:null==u?void 0:u.userId}}};return $a(sn,i),i}catch(e){return Promise.reject({type:Qe,errorCode:wa.OPERATION_TIMEOUT})}}setPrivilege(e){const r=this[t](),{meeting:{isWebinar:o},chat:{chatPrivilege:n},breakoutRoom:i}=r;return n===e?Promise.resolve(""):(null==i?void 0:i.controlStatus)===hu.InProgress&&OO(r)?Promise.reject({type:Ke,reason:"Cannot update chat privilege in a subsession",errorCode:wa.CHAT_SUBSESSION_CONFLICT}):!o&&!i_.includes(e)||o&&!s_.includes(e)?Promise.reject({type:Xe,reason:"invalid privilege value of parameter",errorCode:wa.CHAT_INVALID_PRIVILEGE}):(CD.setChatPriviledge(e),qa(an,(t=>t.chatPrivilege===e)))}setPanelistPrivilege(e){const r=this[t](),{chat:{panelistChatPrivilege:o}}=r,n=u_[e];return o===n?Promise.resolve(""):Object.values(a_).includes(e)?(CD.setPanelistChatPrivilege(e),qa(an,(e=>e.panelistChatPrivilege===n))):Promise.reject({type:Xe,reason:"Panelist privilege value is invalid",errorCode:wa.CHAT_INVALID_PRIVILEGE})}deleteMessage(e){const r=this[t](),{chat:{chatHistory:o},meeting:{meetingOptions:n,userId:i}}=r;if(null!=n&&n.isEnableDeleteChatMsg){const t=Ru(r),n=o.find((t=>t.id===e));if(n){const{sender:r}=n;if(t)CD.chatCmdReq(e,o_.Delete);else{if(r.userId!==i)return Promise.reject({type:Ye,reason:"can not delete message",errorCode:wa.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED});CD.chatCmdReq(e,o_.Delete)}return qa(dn,(t=>t.id===e)).then((()=>({id:e})))}return Promise.reject({type:Xe,reason:"msgId is wrong",errorCode:wa.CHAT_INVALID_MSG_ID_OR_URL})}return Promise.reject({type:Ke,reason:"can not delete messages",errorCode:wa.CHAT_DELETE_ACCOUNT_DISABLE})}lockChat(e){const r=this[t](),{meeting:{meetingOptions:o}}=r,n=null!=o&&o.isPrivateChatEnabled?e_.All:e_.EveryonePublicly;return this.setPrivilege(e?e_.NoOne:n)}sendFile(e,o){if(!e)return Promise.reject({type:Xe,reason:"File is empty",errorCode:wa.CHAT_EMPTY_FILE});const{[t]:n,[r]:i}=this,s=n(),{chat:{isFileTransferEnable:a,fileTransferFileType:u,fileTransferSizeLimit:d,failedFileTransfer:c}}=s;if(!a)return Promise.reject({type:Ke,reason:"Send files via in-session chat is not enabled",errorCode:wa.CHAT_FILE_ACCOUNT_DISABLE});if("string"==typeof e){const t=xO(e,s);if(null!=t&&t.file&&c[e]){const{file:{upload:r,...o}}=t,{file:{name:n,upload:{uniqueId:s}},receiver:{userId:a}}=t;return i(uT({originFile:c[e],...o,upload:{...r,status:m_.InProgress}})),Promise.resolve((()=>{i(dT({uniqueId:s,fileName:n,userId:a}))}))}return Promise.reject({type:Xe,reason:"Retry token is not correct.",errorCode:wa.CHAT_INVALID_RETRY_TOKEN})}{const{name:t}=e;if(u.length>0){const[e]=t.split(".").reverse();if(!u.some((t=>t===e)))return Promise.reject({type:Ke,reason:"File is not in the allow list",errorCode:wa.CHAT_MISMATCH_FILE_TYPE})}if(e.size>d)return Promise.reject({type:Ke,reason:"File size exceeds the maximum limit.",errorCode:wa.CHAT_EXCEED_FILE_SIZE});const r=Tu(s),n=FO(s,o),a=jO(r,n,s);if(a)return Promise.reject(a);const c=vd();return i(aT(function(e,t,r,o){const n=(new Date).getTime();return{file:{name:e.name,size:e.size,type:e.type,upload:{progress:0,uniqueId:t,totalChunks:0,chunkIndex:0}},originFile:e,sender:{name:r.displayName,userId:r.userId,userGuid:r.userGUID,avatar:r.avatar},receiver:{name:null==o?void 0:o.displayName,userId:null==o?void 0:o.userId,attendeeId:void 0,userGuid:null==o?void 0:o.userGUID},timestamp:n}}(e,c,r,n))),Promise.resolve((()=>{i(cT({uniqueId:c,file:e})),i(dT({uniqueId:c,fileName:t,userId:null==n?void 0:n.userId}))}))}}downloadFile(e,o,n){const{[t]:i,[r]:s}=this,{chat:{chatHistory:a}}=i();if(!e||!o)return Promise.reject({type:Xe,reason:"Invalid message id or file url!",errorCode:wa.CHAT_INVALID_MSG_ID_OR_URL});const u=a.find((t=>{var r;return t.id===e&&(null===(r=t.file)||void 0===r?void 0:r.fileUrl)===o}));return u?(s(uT({id:e,fileUrl:o,download:{status:g_.InProgress,progress:0,blob:n}})),Promise.resolve((()=>s(pT({id:e,fileUrl:o}))))):Promise.reject({type:Xe,reason:"Invalid message id or file url!",errorCode:wa.CHAT_INVALID_MSG_ID_OR_URL})}getPrivilege(){const{chat:{chatPrivilege:e,isAllowAttendeeChat:r}}=this[t]();return r?e:e_.NoAttendee}getReceivers(){const e=this[t](),{chat:{chatPrivilege:r,panelistChatPrivilege:o,isAllowAttendeeChat:n},meeting:{isWebinar:i}}=e;if(!i&&!n)return[];const s=Tu(e),a=Ru(e);if(s)if(i)if(lu(s.userRole)){if(!n)return[];if(r===e_.All)return[c_,d_];if(r===e_.AllPanelist)return[c_];if(r===e_.NoOne)return[]}else{if(a||o===t_.Everyone){const t=WO(e,s.userId,{includeAttendee:!0});return[c_,d_,...t]}if(o===t_.AllPanelist){const t=WO(e,s.userId);return[c_,...t]}}else{const t=Ru(e);if(r===e_.All||t){const t=WO(e,s.userId);return[d_,...t]}if(r===e_.Host)return WO(e,s.userId,{host:!0});if(r===e_.EveryonePublicly){const t=WO(e,s.userId,{host:!0});return[d_,...t]}if(r===e_.NoOne)return[]}return[]}getHistory(){return this[t]().chat.chatHistory.map((e=>{const{highResTimeStampForIdentification:t,...r}=e;if(r.file){const{name:e,size:t,type:o,fileUrl:n,upload:i,download:s}=r.file,a={name:e,size:t,type:o,fileUrl:n};return i&&Object.assign(a,{upload:{status:i.status,progress:i.progress}}),s&&Object.assign(a,{download:{status:s.status,progress:s.progress}}),{...r,file:a}}return r}))}isAllowToDeleteMessages(){const e=this[t](),{meeting:{meetingOptions:r}}=e;return null==r?void 0:r.isEnableDeleteChatMsg}isFileTransferEnabled(){return this[t]().chat.isFileTransferEnable}getFileTransferSetting(){const e=this[t](),{chat:{fileTransferFileType:r,fileTransferSizeLimit:o}}=e;return{typeLimit:(null!=r?r:[]).map((e=>`.${e}`)).join(","),sizeLimit:o}}},AS(bD.prototype,"send",[NS],Object.getOwnPropertyDescriptor(bD.prototype,"send"),bD.prototype),AS(bD.prototype,"setPrivilege",[PS,NS],Object.getOwnPropertyDescriptor(bD.prototype,"setPrivilege"),bD.prototype),AS(bD.prototype,"setPanelistPrivilege",[PS,NS,function(t,r,o){const n=o.value;o.value=function(...t){const r=this[e];if(r){const{meeting:{isWebinar:e}}=r.getState();if(!e)return Promise.reject({type:Ze,reason:"non-webinar",errorCode:wa.CLIENT_SESSION_NOT_WEBINAR})}return n.apply(this,t)}}],Object.getOwnPropertyDescriptor(bD.prototype,"setPanelistPrivilege"),bD.prototype),AS(bD.prototype,"deleteMessage",[NS],Object.getOwnPropertyDescriptor(bD.prototype,"deleteMessage"),bD.prototype),AS(bD.prototype,"lockChat",[PS,NS],Object.getOwnPropertyDescriptor(bD.prototype,"lockChat"),bD.prototype),AS(bD.prototype,"sendFile",[NS],Object.getOwnPropertyDescriptor(bD.prototype,"sendFile"),bD.prototype),AS(bD.prototype,"downloadFile",[NS],Object.getOwnPropertyDescriptor(bD.prototype,"downloadFile"),bD.prototype),bD);const RD={epics0:(e,t)=>Iv(e,24583).pipe(Ro(t),$r((([e,t])=>{if(t.meeting.zlkJwtToken)return or;const{payload:{body:{sn:r,senderName:o,senderJid:n,receiver:i,text:s,type:a}}}=e,u=Tu(t),d=Du(t),{meeting:{jid:c,userId:l},participants:{xmppAttendeeList:p}}=t;return Sb.beginDecrypt({decryptedText:s,type:pb.XMPP_CHAT,zoomId:r}).then((({message:e})=>{var t;let r=null,s=0,h="";u&&lu(u.userRole)&&c===i?(r=p.find((e=>e.jid===n)),s=l,h=u.displayName):a===r_.Panelist&&(r=d.find((e=>e.jid===n)),s=r_.Panelist,h=c_.displayName);const m={message:e,sender:{name:o,userId:(null===(t=r)||void 0===t?void 0:t.userId)||0,avatar:""},receiver:{name:h,userId:s},timestamp:(new Date).getTime()};return $a(sn,m),tT(m)}))}))),epics1:(e,t)=>Ev(e,7944).pipe(Ro(t),$r((([e,t])=>{const{meeting:{bIbDisableChat:r}}=t,{payload:{body:{attendeeNodeID:o,sn:n,destNodeID:i,text:s,senderName:a,msgID:u}}}=e,d=Tu(t);if(d){const e=lu(null==d?void 0:d.userRole)&&o===d.userId&&!u;if(!r&&!e){const{sn:e,...r}=$O({destNodeID:i,attendeeNodeID:o,senderName:a,sn:n},t);return(o===r_.SilentModeUsers?Promise.resolve({id:u,message:ld(s),...r}):Sb.beginDecrypt({decryptedText:s,zoomId:e,type:pb.RWG_CHAT}).then((({message:e})=>({id:u,message:e,...r})))).then((e=>($a(sn,e),tT(e))))}}return or}))),epics2:(e,t)=>Ev(e,Ov).pipe(uo((e=>{var t,r;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.chatPriviledge)||void 0!==(null===(r=e.payload.body)||void 0===r?void 0:r.bAllowAttendeeChat)})),Ro(t),Ur((([e,t])=>{const{payload:{body:{chatPriviledge:r,bAllowAttendeeChat:o}}}=e,{chat:{chatPrivilege:n}}=t;return void 0!==o?($a(an,!0===o?{chatPrivilege:n}:{chatPrivilege:e_.NoAttendee}),oT(o)):($a(an,{chatPrivilege:r}),XC(r))}))),epics3:e=>Ev(e,Ov).pipe(uo((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.panelistChatPriviledge)})),Ur((e=>{const{payload:{body:{panelistChatPriviledge:t}}}=e;return $a(an,{panelistChatPrivilege:t}),eT(t)}))),epics4:(e,t)=>Ev(e,4136).pipe(Ro(t),$r((([e,t])=>{const{payload:{body:{result:r,destNodeID:o,msgID:n,fileID:i}}}=e,{meeting:{userId:s},chat:{chatHistory:a}}=t,u=[];if(r===n_.Success)if(i){const e=a.find((e=>{var t;return(null===(t=e.file)||void 0===t?void 0:t.fileID)===i}));if(e){const{file:t,receiver:r,...o}=e,{name:a,size:d,type:c,fileUrl:l}=null!=t?t:{},{attendeeId:p,...h}=r;$a(sn,{id:n,file:{name:a,size:d,type:c,fileUrl:l,upload:{status:m_.Complete,progress:100}},receiver:{...h},...o}),u.push(lT({fileID:i,msgID:n,senderId:s}))}}else{const e=zO(a,{userId:s,destNodeID:o});var d;e&&($a(un,{msgId:n,receiverId:o,identification:null!==(d=e.highResTimeStampForIdentification)&&void 0!==d?d:0}),u.push(nT({destNodeID:o,msgID:n,userId:s})))}else r!==n_.Delete&&r!==n_.Block||u.push(iT({msgId:n}));return br(u)}))),epics5:e=>Ev(e,4238).pipe($r((e=>{const{payload:{body:{bSuccess:t,cmd:r,msgID:o}}}=e,n=[];return t&&r===o_.Delete&&(n.push(iT({msgId:o})),$a(dn,{id:o})),br(n)}))),epics6:e=>Ev(e,7960).pipe($r((e=>{const{payload:{body:{cmd:t,msgID:r}}}=e,o=[];return t===o_.Delete&&(o.push(iT({msgId:r})),$a(dn,{id:r})),br(o)})))},OD=yv(RD,{chatFileEpics0:e=>e.pipe(BS(`${Hg}`),Ur((e=>{var t,r,o;const{payload:{fileTransfer:n,fileServerDomain:i}}=e;return sT({isFileTransferEnable:null==n?void 0:n.isEnable,isEnableFileTransferEncrypted:null==n?void 0:n.isEnableFileTransferEncrypted,fileTransferFileType:(null!==(t=null==n?void 0:n.fileType)&&void 0!==t?t:"").replace(/\./g,"").split(",").filter(Boolean),fileTransferSizeLimit:1024*(null!==(r=null==n?void 0:n.sizeLimit)&&void 0!==r?r:0)*1024||h_.MaxSize,fileDownloadPromptIgnoreList:(null!==(o=null==n?void 0:n.fileDownloadPromptIgnoreList)&&void 0!==o?o:"").replace(/\./g,"").split(","),fileServerDomain:`https://${i}`})}))),chatFileEpics1:(e,t)=>e.pipe(BS(`${aT}`),$r((async r=>{const{payload:{originFile:o,file:{upload:{uniqueId:n}}}}=r;return o.size>h_.ChunkSize?await async function(e,t,r,o){const n=dD(e,"/wc/multiupload/init",o.value),i=await async function(e){const t=Math.ceil(e.size/h_.ReaderChunkSize),r=await Promise.all(Array.from({length:t},((e,t)=>({start:t*h_.ReaderChunkSize,end:(t+1)*h_.ReaderChunkSize}))).map((async({start:t,end:r})=>{try{const o=await mD(e,t,r);return Cd(await window.crypto.subtle.digest("SHA-256",o))}catch(t){return pD("calculate file hash error.",e,t),Promise.reject(t)}})));return r.join("")}(e),{meeting:{zmk:s,meetingId:a}}=o.value,u=xO(t,o.value);if(i&&u){const{receiver:o}=u,d={fileName:e.name,length:e.size,channelType:4,digest:i,shareJid:a};return XO({url:n,method:"POST",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:s},crossDomain:Id(n),body:d}).pipe(bo(SD(e,t,o,r)),Ur((r=>{var o;const{responseHeaders:n,response:i}=r,s=null===(o=n["x-zm-trackingid"])||void 0===o?void 0:o.trim(),{uploadid:a,path:u,metadata:d}=i,c=Math.ceil(e.size/h_.ChunkSize);return uT({originFile:e,upload:{uniqueId:t,status:m_.InProgress,progress:0,chunkIndex:0,totalChunks:c,uploadid:a,trackingId:s,path:u,metadata:d}})})),lo((t=>(console.warn(t),pD("Upload file meta error.",e,t),vD(u,e)))),Io(uT({upload:{uniqueId:t,status:m_.Init}})))}return fD(e,t)}(o,n,e,t):await yD(o,n,e,t)})),$r((e=>e))),chatFileEpics2:(e,t)=>e.pipe(BS(`${uT}`),uo((e=>{var t;return(null===(t=e.payload.upload)||void 0===t?void 0:t.status)===m_.Success})),R_((async e=>{const{payload:{upload:{uniqueId:r}}}=e,{chat:{isEnableFileTransferEncrypted:o,chatHistory:n}}=t.value,i=n.find((e=>{var t;return(null===(t=e.file)||void 0===t||null===(t=t.upload)||void 0===t?void 0:t.uniqueId)===r})),s=[];if(i&&i.file){const{file:{name:e,size:t,fileObj:n,fileID:a,type:u},receiver:{userId:d,attendeeId:c}}=i;let[l,p]=["",""];if(o){const[r,o]=await Promise.all([e,`${t}`].map((e=>Sb.beginEncrypt({text:e,type:pb.RWG_CHAT}))));[l,p]=[r,o]}else[l,p]=[e,`${t}`].map((e=>cd(e)));await _D.chatFileTransfer({fileID:a,fileSize:p,fileName:l,fileObj:n,type:u,destNodeID:d,attendeeNodeID:c}),s.push(uT({upload:{uniqueId:r,status:m_.Complete}}))}return s}))),chatFileEpics3:(e,t)=>e.pipe(BS(`${uT}`),uo((e=>{const{payload:{upload:t,originFile:r}}=e;return!!t&&!!t.uniqueId&&t.status===m_.InProgress&&(null==r?void 0:r.size)<=h_.ChunkSize&&0===t.totalChunks})),$r((async r=>{const{payload:{originFile:o,upload:{uniqueId:n}}}=r;return await yD(o,n,e,t)})),$r((e=>e))),chatFileEpics4:(e,t)=>e.pipe(BS(`${uT}`),uo((e=>{const{payload:{upload:t}}=e;return!!t&&!!t.uniqueId&&t.totalChunks>0&&t.chunkIndex!==t.totalChunks})),$r((async r=>{const{payload:{originFile:o,upload:{uniqueId:n}}}=r;return await async function(e,t,r,o){const n=xO(t,o.value);if(null!=n&&n.file){const{file:{upload:{chunkIndex:i,totalChunks:s,uploadid:a,path:u,trackingId:d,etags:c},size:l},receiver:p}=n,h=i*h_.ChunkSize,m=await gD(e,h);if(m){const{chat:{fileServerDomain:h},meeting:{zmk:g}}=o.value,S=`${h}/upload/parts?${new URLSearchParams({uploadid:a,partNumber:i+1}).toString()}`,v=new FormData,f=new File([m],e.name);return v.append("file",f),XO({url:S,method:"POST",headers:{"Zoom-File-Size":f.size,"Zoom-File-Path":u,"x-zm-trackingid":d,"Zoom-File-Origin":"redirect=support_auth",zmk:g},crossDomain:Id(S),body:v,includeUploadProgress:!0}).pipe(bo(SD(e,t,p,r)),$r((r=>{var n;const{type:a,loaded:u,total:d,responseHeaders:h}=r;let m=0;const g={upload:{uniqueId:t,status:m_.InProgress}},S=[],v=xO(t,o.value),f=null==v||null===(n=v.file)||void 0===n?void 0:n.upload.progress;if("upload_loadstart"===a)m=f||Math.floor(i/s*100);else if("upload_progress"===a)m=Math.floor((i*h_.ChunkSize+.9*u)/l*100);else if("upload_load"===a)m=Math.floor((i*h_.ChunkSize+.9*d)/l*100);else if("download_load"===a){m=f||Math.floor((i+1)/s*100);const t=h["x-zm-etag"].trim(),r=c?{...c,[`${i+1}`]:t}:{[`${i+1}`]:t};Object.assign(g.upload,{etags:r,chunkIndex:i+1,totalChunks:s}),Object.assign(g,{originFile:e})}return(m>0||"upload_loadstart"===a)&&(Object.assign(g.upload,{progress:m}),$a(cn,{...lD(e,p),progress:m,status:m_.InProgress}),S.push(uT(g))),br(S)})),lo((t=>(console.warn(t),pD(`Upload file chunk error. chunk:${i},total chunks:${s},uploadid:${a},trackingId:${d}`,e,t),vD(n,e)))))}}return fD(e,t)}(o,n,e,t)})),$r((e=>e))),chatFileEpics5:(e,t)=>e.pipe(BS(`${uT}`),uo((e=>{const{payload:{upload:t}}=e;return!!t&&!!t.uniqueId&&t.totalChunks>0&&t.chunkIndex==t.totalChunks})),$r((r=>{const{payload:{originFile:o,upload:{uniqueId:n}}}=r;return function(e,t,r,o){const{chat:{fileServerDomain:n},meeting:{zmk:i}}=o.value,s=xO(t,o.value);if(null!=s&&s.file){const{file:{upload:{uploadid:a,metadata:u,etags:d,trackingId:c}},receiver:l}=s,p=`${n}/upload/complete?uploadid=${a}`;return XO({url:p,method:"POST",headers:{"x-zm-trackingid":c,"Zoom-File-Origin":"redirect=support_auth",zmk:i},crossDomain:Id(p),body:{metadata:u,etags:d}}).pipe(bo(SD(e,t,l,r)),Ur((r=>{var n,i;const{chat:{fileServerDomain:s}}=o.value,{responseHeaders:a}=r,u=null===(n=a["zoom-file-id"])||void 0===n?void 0:n.trim(),d=null===(i=a["zoom-file-obj"])||void 0===i?void 0:i.trim(),c=`${s}/zoomfile/download?objkey=${d}&business=meeting`;return $a(cn,{...lD(e,l),progress:100,status:m_.Success}),uT({fileID:u,fileObj:d,fileUrl:c,upload:{uniqueId:t,progress:100,status:m_.Success}})})),lo((t=>(console.warn(t),pD(`Upload chunks checksum error.uploadid${a},trackingId${c}`,e,t),vD(s,e)))))}return fD(e,t)}(o,n,e,t)}))),chatFileEpics6:(e,t)=>Ev(e,4308).pipe(R_((async e=>{const{payload:{body:{attendeeNodeID:r,destNodeID:o,fileID:n,fileName:i,fileObj:s,fileSize:a,fileType:u,msgID:d,senderName:c}}}=e,{meeting:{bIbDisableChat:l},chat:{fileServerDomain:p,isEnableFileTransferEncrypted:h}}=t.value,m=[];if(!l){const e=cD(p,{fileObj:s,fileID:n});if(u===p_.Local){const{sn:u,...l}=$O({destNodeID:o,attendeeNodeID:r,senderName:c},t.value);let[p,g]=["",0];if(h){const[e,t]=await Promise.all([i,a].map((e=>Sb.beginDecrypt({decryptedText:e,zoomId:u,type:pb.RWG_CHAT}))));p=e.message,g=Number(t.message)}else p=ld(i),g=Number(ld(a));const S={id:d,file:{name:p,size:g,fileUrl:e},...l};m.push(tT({...S,file:{...S.file,fileID:n,fileObj:s}})),setTimeout((()=>{$a(sn,S)}),0)}}return m}))),chatFileEpics7:(e,t)=>e.pipe(BS(`${uT}`),uo((e=>{var t,r;const{payload:o}=e;return o.id&&o.fileUrl&&(null===(t=o.download)||void 0===t?void 0:t.status)===g_.InProgress&&0===(null===(r=o.download)||void 0===r?void 0:r.progress)})),$r((r=>function(e,t,r){var o;const{chat:{chatHistory:n},meeting:{zmk:i},participants:{attendeesList:s}}=r.value,a=n.find((t=>t.id===e));if(null!=a&&null!==(o=a.file)&&void 0!==o&&o.fileUrl){const{file:{fileUrl:r}}=a;return XO({url:r,method:"GET",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:i},crossDomain:Id(r),responseType:"arraybuffer",includeDownloadProgress:!0}).pipe(bo(function(e,t){return t.pipe(BS(`${pT}`,`${FS}`),uo((t=>{if(t.type===`${FS}`)return!0;const{payload:{id:r}}=t;return e.id===r})),mo(1),To((()=>{var t,r,o;uD.info(`Cancel file download. file name:${_E(null===(t=e.file)||void 0===t?void 0:t.name)},file size:${null===(r=e.file)||void 0===r?void 0:r.size},sender id:${null===(o=e.sender)||void 0===o?void 0:o.userId}`),$a(ln,{...hD(e),progress:0,status:g_.Cancel})})))}(a,t)),R_((async t=>{const{type:r,loaded:o,total:n}=t,i=[],u={...hD(a),progress:0,status:g_.InProgress};if("download_loadstart"===r&&Object.assign(u,{progress:0}),"download_progress"===r){var d;const t=Math.floor(o/n*100);i.push(uT({id:e,fileUrl:null===(d=a.file)||void 0===d?void 0:d.fileUrl,download:{progress:t}})),Object.assign(u,{progress:t})}else if("download_load"===r){var c,l,p;const r=100,o=g_.Success;Object.assign(u,{progress:r,status:o}),i.push(uT({id:e,fileUrl:null===(c=a.file)||void 0===c?void 0:c.fileUrl,download:{progress:r,status:o}}));const n=null===(l=s.find((e=>e.userId===a.sender.userId)))||void 0===l?void 0:l.zoomID,d=await async function(e,t,r){const o=Math.ceil(e.byteLength/h_.DecodeBlockSize);try{const n=await Promise.all(Array.from({length:Math.max(o-1,1)},((e,t)=>({start:t*h_.DecodeBlockSize,end:(t===o-2?t+2:t+1)*h_.DecodeBlockSize}))).map((async({start:o,end:n})=>{try{const t=e.slice(o,n),{message:i}=await Sb.beginDecrypt({decryptedText:t,zoomId:r,type:pb.CHAT_FILE});return i}catch(r){return pD("decrypt file buffer error.",{name:t,size:e.byteLength},r),Promise.reject(r)}})));return new Blob(n,{type:GO(t)})}catch(e){return null}}(t.response,null===(p=a.file)||void 0===p?void 0:p.name,n);var h,m;d&&(null!==(h=a.file)&&void 0!==h&&h.download.blob?Object.assign(u,{fileBlob:d}):function(e,t){const r=document.createElement("a"),o=window.URL.createObjectURL(e);r.href=o,r.download=t,r.click(),window.URL.revokeObjectURL(o)}(d,null===(m=a.file)||void 0===m?void 0:m.name))}return(u.progress>0||"download_loadstart"===r)&&$a(ln,u),i})),lo((t=>(console.warn(t),pD(`download file error. file url:${r}`,{name:void 0,size:void 0},t),$a(ln,{...hD(a),progress:0,status:g_.Fail}),Cr(uT({id:e,fileUrl:r,download:{status:g_.Fail,progress:0}}))))))}return or}(r.payload.id,e,t))))});function DD(e,t){var r,o,n;const{meeting:{isMeetingReset:i,meetingId:s,meetingNumber:a,userName:u,userEmail:d,tid:c,userId:l,userGUID:p,isRlbTP:h},breakoutRoom:m}=e;let g="";var S;return g=i?null!=m&&null!==(S=m.currentRoom)&&void 0!==S&&S.boConfId?"join breakout room":"meeting failover":"join meeting",{label:g,payload:{meetingId:null!==(r=null==t?void 0:t.meetingId)&&void 0!==r?r:s,tid:c,userId:null!==(o=null==t?void 0:t.userId)&&void 0!==o?o:l,userGUID:null!==(n=null==t?void 0:t.userGUID)&&void 0!==n?n:p,isRlbTP:h,meetingNumber:_E(a),userName:_E(u),userEmail:_E(d)}}}function wD(e,t,r){return Ot(Ao((o=>{let n=!1;try{var i,s;const{logger:{options:e},meeting:{logConfig:r}}=t.value;n=null!==(i=null==e?void 0:e.enable)&&void 0!==i?i:null===(s=JSON.parse(r||"{}"))||void 0===s?void 0:s.enable}catch(e){}try{if(n){const{logger:{isLaplaceInitialized:n}}=t.value;if(!n)return e.pipe(BS(`${sO}`),mo(1),$r((e=>(e.payload&&r(o),or))));r(o)}}catch(e){console.warn(e)}return or})))}function ND(e,t,r,o){return bv(e,r).pipe(wD(e,t,o))}function MD(e,t,r,o){return Ev(e,r).pipe(wD(e,t,o))}function PD(e){var t,r;const{audio:{activeMicrophone:o,activeSpeaker:n,microphoneDevicesList:i,speakerDevicesList:s}}=e;return`microphone: [${o} - ${null==i||null===(t=i.find((e=>e.deviceId===o)))||void 0===t?void 0:t.label}]; speaker: [${n} - ${null==s||null===(r=s.find((e=>e.deviceId===n)))||void 0===r?void 0:r.label}]`}function LD(e){var t;const{video:{activeCamera:r,cameraDevicesList:o}}=e;return`camera: [${r} - ${null==o||null===(t=o.find((e=>e.deviceId===r)))||void 0===t?void 0:t.label}]`}function kD(e,t){return void 0!==t?` ,${e}:${t}`:""}const{InitSuccessAudio:UD,InitFailedAudio:VD,InitSuccessVideo:BD,InitFailedVideo:HD,InitSuccessSharing:jD,InitFailedSharing:FD}=L,{DecodeSuccess:WD,DecodeFailed:xD,EncodeSuccess:$D,EncodeFailed:GD}=k,zD={[`${UD}`]:{name:"Audio",isException:!1},[`${VD}`]:{name:"Audio",isException:!0},[`${BD}`]:{name:"Video",isException:!1},[`${HD}`]:{name:"Video",isException:!0},[`${jD}`]:{name:"Sharing",isException:!1},[`${FD}`]:{name:"Sharing",isException:!0}};function qD(e){const t=(null!=e?e:"").split("-");return[...new Set(t)].map((e=>({reason:e,count:t.filter((t=>e===t)).length})))}let KD=function(e){return e[e.Success=0]="Success",e[e.MeetingIsOver=6]="MeetingIsOver",e[e.UserFull=9]="UserFull",e[e.MeetingLocked=12]="MeetingLocked",e[e.WebinarBlockedEmail=3033]="WebinarBlockedEmail",e[e.MeetingNotStarted=3008]="MeetingNotStarted",e[e.MeetingHasClosed=103003]="MeetingHasClosed",e[e.UserHasBeenRemoved=103039]="UserHasBeenRemoved",e[e.MMRIBReject=103043]="MMRIBReject",e[e.MMRConfParticipantExists=103044]="MMRConfParticipantExists",e}({}),JD=function(e){return e[e.Unknown=0]="Unknown",e[e.Normal=1]="Normal",e[e.Userrequest=2]="Userrequest",e[e.SdkConnection=3]="SdkConnection",e[e.Reconnect=5]="Reconnect",e[e.PtRequest=6]="PtRequest",e[e.KickedByHost=7]="KickedByHost",e[e.EndByHost=8]="EndByHost",e[e.EndByHostStartAnotherMeeting=9]="EndByHostStartAnotherMeeting",e[e.FreeMeetingTimeout=10]="FreeMeetingTimeout",e[e.JBHTimeout=11]="JBHTimeout",e[e.EndBySingleStatus=12]="EndBySingleStatus",e[e.WebinarNeedRegister=13]="WebinarNeedRegister",e[e.ArchiveFail=14]="ArchiveFail",e[e.EndByNone=15]="EndByNone",e[e.EndByAdmin=16]="EndByAdmin",e[e.DuplicateSession=17]="DuplicateSession",e[e.MeetingTransfer=18]="MeetingTransfer",e}({}),QD=function(e){return e[e.WaitingRoomFailover=1]="WaitingRoomFailover",e[e.WebEndAndRejoin=2]="WebEndAndRejoin",e}({}),YD=function(e){return e[e.Success=0]="Success",e[e.CommonError=200]="CommonError",e[e.WrongPasscode=3004]="WrongPasscode",e[e.RoleTypeMissing=3010]="RoleTypeMissing",e[e.InvalidParameter=4003]="InvalidParameter",e}({}),ZD=function(e){return e[e.Success=0]="Success",e[e.AnotherMeetingInProgress=3e3]="AnotherMeetingInProgress",e[e.MeetingNotExist=3001]="MeetingNotExist",e[e.NotHost=3003]="NotHost",e[e.WrongPasscode=3004]="WrongPasscode",e[e.MissingEmail=3005]="MissingEmail",e[e.MeetingNotStarted=3008]="MeetingNotStarted",e[e.UserHasBeenRemoved=3009]="UserHasBeenRemoved",e[e.RoleTypeMissing=3010]="RoleTypeMissing",e[e.WebinarEnforceLogin=3034]="WebinarEnforceLogin",e[e.RealNameMissing=3082]="RealNameMissing",e[e.RegisterRequired=3099]="RegisterRequired",e[e.SsoLoginWindow=6024]="SsoLoginWindow",e[e.ZoomLoginWindow=3051]="ZoomLoginWindow",e[e.ZoomSpecificLoginWindow=3052]="ZoomSpecificLoginWindow",e[e.LoginRequired=3100]="LoginRequired",e[e.Reconnecting=4e3]="Reconnecting",e[e.Disconnect=4001]="Disconnect",e[e.InvalidParameter=4003]="InvalidParameter",e[e.DeniedRegisterWithPanelist=3032]="DeniedRegisterWithPanelist",e[e.ServiceOffline=403]="ServiceOffline",e[e.RwcEmpty=3621]="RwcEmpty",e[e.RwcError=3622]="RwcError",e[e.FrequentCall=3633]="FrequentCall",e[e.FrequentJoin=3634]="FrequentJoin",e[e.WasmFail=3635]="WasmFail",e[e.CommonError=200]="CommonError",e[e.Upgrade=1e4]="Upgrade",e}({});ZD.Success,ZD.RegisterRequired,ZD.LoginRequired,ZD.SsoLoginWindow,ZD.ZoomLoginWindow,ZD.ZoomSpecificLoginWindow,ZD.MissingEmail,ZD.MeetingNotExist,ZD.NotHost,ZD.WrongPasscode,ZD.RoleTypeMissing,ZD.AnotherMeetingInProgress,ZD.MeetingNotStarted,ZD.InvalidParameter,ZD.Reconnecting,ZD.UserHasBeenRemoved,ZD.WebinarEnforceLogin,ZD.Disconnect,ZD.DeniedRegisterWithPanelist,ZD.RwcEmpty,ZD.RwcError,ZD.FrequentCall,ZD.FrequentJoin,ZD.WasmFail,ZD.Upgrade;const XD={3004:{"incorrect passcode":3004},3005:{"apac.errorcodes_web_has_in_progress":3e3},3008:{"apac.errorcodes_not_start":3008},3027:{"apac.errorcodes_host_email_as_attendee":3627},3033:{"apac.errorcodes_denied_email":3620},1005:{"apac.errorcodes_no_response_from_web":3621},131005:{"apac.errorcodes_no_response_from_web":3621},1001:{"apac.errorcodes_host_inactive":3625},131001:{"apac.errorcodes_host_inactive":3625},131013:{"meeting ended":4004},103039:{"user has been removed":3009},6:{"meeting ended":4004},9:{"meeting is at capacity":4005},12:{"meeting locked":4006},103043:{"reject for information barriers":4007},103044:{"participant exist":4008}};function ew(e,t){let r={code:200};if(void 0!==XD[e]){const t=XD[e],o=Object.keys(t)[0];return r={code:t[o],i18nKey:o},{reason:o.startsWith("apac")?"":o,errorCode:r.code}}return{errorCode:200,reason:"connection error"}}const tw=TE.getInstance(),rw=()=>{if("connection"in navigator){const{effectiveType:e,rtt:t,downlink:r}=navigator.connection;tw.makeLogger(["Network Connection Type"]).info(`Network connection. ect:${e},rtt:${t},downlink:${r}`)}},ow=TE.getInstance().makeLogger(["Remote Control"]),nw=NE(ju.getInstance()),iw=[{event:L.AudioBridgeReconnectStart,message:yE.AudioBridgeReconnectStart,logType:"info",additionalTags:["Audio Join Flow"]},{event:L.AudioBridgeReconnectEnd,message:yE.AudioBridgeReconnectEnd,logType:"info",additionalTags:["Audio Join Flow"]},{event:L.UserGrantCaptureAudio,message:e=>`${yE.DeviceAudioStreamCaptured},${PD(e)}`,logType:"info",additionalTags:["Audio Capture Flow"]},{event:L.JoinComputerAudioComplete,message:yE.AudioJoinComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:L.LeaveComputerAudioComplete,message:yE.AudioLeaveComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:L.JoinSharingAudioComplete,message:yE.SharingAudioStartComplete,logType:"info",additionalTags:["Audio Sharing Flow"]},{event:L.LeaveSharingAudioComplete,message:yE.SharingAudioStopComplete,logType:"info",additionalTags:["Audio Sharing Flow"]}],sw=[{event:L.StartVideoCaptureSuccess,message:e=>`${EE.StartCaptureVideoSuccess}, ${LD(e)}`,logType:"info",additionalTags:["Video Join Flow"]},{event:L.StopVideoCaptureSuccess,message:EE.StopCaptureVideoSuccess,logType:"info",additionalTags:["Video Join Flow"]},{event:L.StartVideoStreamInVbSettingSuccess,message:EE.VBSettingSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:L.VbModelPreloadingOk,message:EE.VBPreloadSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:L.VbModelPreloading_3S,message:EE.VBPreloading3S,logType:"warn",additionalTags:["Video VB Flow"]},{event:L.VbModelPreloading_10S,message:EE.VBPreloading10S,logType:"warn",additionalTags:["Video VB Flow"]},{event:L.VbSettingParaError,message:EE.VBSettingFailed,logType:"error",additionalTags:["Video VB Flow"]}],aw=iw.map((e=>({...e,tag:"Audio"}))).concat(sw.map((e=>({...e,tag:"Video"})))),uw=TE.getInstance(),{InitSuccessVideo:dw,InitSuccessAudio:cw,InitSuccessSharing:lw,InitFailedVideo:pw,InitFailedAudio:hw,InitFailedSharing:mw,AudioCaptureFailed:gw,AudioWebsocketBroken:Sw,AudioZeroData:vw,UserForbiddedCaptureVideo:fw,UserCameraIsTakenByOtherPrograms:yw,VideoWebsocketBroken:Ew,StopVideoCaptureFailed:_w,DesktopSharingPermissionDenied:Iw,DesktopSharingSystemError:Aw,AudioSpeakerSetError:bw,VbSettingParaError:Cw,MaskSettingParaError:Tw,WebglLostInMultiView:Rw,VideoStreamFailed:Ow,AudioStreamFailed:Dw,NotifyUIFailover:ww,RecaptureAudio:Nw,WorkletProcessExceptions:Mw}=L,Pw=ju.getInstance(),Lw=TE.getInstance(),kw={options:void 0,isLaplaceInitialized:!1,isLogDetailed:!0},Uw=zc({[`${iO}`]:sy(((e,{payload:t})=>{e.options=t})),[`${sO}`]:sy(((e,{payload:t})=>{e.isLaplaceInitialized=t})),[`${aO}`]:sy(((e,{payload:t})=>{e.isLogDetailed=t})),[`${uO}`]:({options:e,isLogDetailed:t},{payload:r})=>r?{...kw,isLogDetailed:t,options:e}:{...kw}},kw),Vw={mlEpics0:(e,t)=>bv(e,[dw,cw,lw,pw,hw,mw]).pipe(wD(e,t,(e=>{const{payload:{type:r,data:o}}=e,{meeting:{userId:n}}=t.value,i=function(e,t){const r=zD[`${e}`];if(r){const{name:e,isException:o}=r,n=[e,`${e} Init Flow`];o&&n.push(`${e} exception flow`);let i="";return[WD,xD].includes(t)&&(i=`${i} decode`.trim()),[$D,GD].includes(t)&&(i=`${i} encode`.trim()),[$D,WD].includes(t)&&(i=`${i} success`.trim()),[xD,GD].includes(t)&&(i=`${i} failed`.trim()),{message:`init ${e.toLowerCase()} ${i}`,tags:n,isException:o}}return null}(r,o);if(i){const{message:e,tags:t,isException:r}=i;r?uw.report(`${e}. userId:${n}`,t):uw.makeLogger(t).info(e)}}))),mlEpics1:(e,t)=>ND(e,t,aw.map((e=>e.event)),(e=>{const{payload:{type:r}}=e,o=aw.find((e=>e.event===r));if(o){const{message:e,logType:r,additionalTags:n,tag:i}=o;let s=e;"function"==typeof e?window.setTimeout((()=>{s=e(t.value),uw.makeLogger([i])[r](s,n)}),0):s&&uw.makeLogger([i])[r](s,n)}})),mlEpics2:(e,t)=>e.pipe(BS(`${J_}`),uo((e=>!e.payload)),wD(e,t,(()=>{uw.makeLogger(["Audio"]).warn(`Auto play audio failed,${PD(t.value)}`)}))),mlEpics3:(e,t)=>ND(e,t,ww,(e=>{uw.report(`WebRTC notify ui failover, subreason:${JSON.stringify(e.payload.data)}`,["Audio exception flow"])})),mlEpics4:(e,t)=>ND(e,t,[gw,Sw,vw,bw,Dw,Nw,Mw],(e=>{const{payload:{type:r,data:o}}=e;let n=`Audio error case:${r}`;var i,s;r===gw?n=`Audio capture failed. errorCode:${null==o?void 0:o.errorCode}, message:${null==o?void 0:o.errorMessage}, error:${null==o||null===(i=o.error)||void 0===i?void 0:i.name} ${null==o||null===(s=o.error)||void 0===s?void 0:s.message}.`:r===vw?t.value.audio.webrtcRestartCount<3&&(n="audio capture zero data, auto failover"):r===bw?n=`audio change speaker error. errorCode:${null==o?void 0:o.errorCode}, message:${null==o?void 0:o.errorMessage}.`:r===Dw?n="audio stream ended or muted, stop capture audio":r===Nw&&(n="audio muted after switching from background, try to recapture audio"),uw.report(`${n},${PD(t.value)}`,["Audio exception flow"])})),mlEpics5:(e,t)=>ND(e,t,[fw,yw,Ew,_w,Ow],(e=>{const{payload:{type:r,data:o}}=e;let n=`Video error case:${r}`;if(r===fw)n="Video capture is forbidden by the user"+(o?` (error name:${null==o?void 0:o.name};error message:${null==o?void 0:o.message})`:"");else if(r===yw)n="Camera is taken by other programs"+(o?` (error name:${null==o?void 0:o.name};error message:${null==o?void 0:o.message})`:"");else if(r===Cw){var i;n=`VB setting error, param:${JSON.stringify(null!==(i=t.value.video.virtualBackground)&&void 0!==i?i:{})}`}else if(r===Tw){var s;n=`Mask setting error, param:${JSON.stringify(null!==(s=t.value.video.mask)&&void 0!==s?s:{})}`}else r===Ow&&(n=`Video stream ended or muted, if it is on iOS platform, will stop capture video.platform:${C.browser}`);uw.report(`${n},${LD(t.value)}`,["Video exception flow"])})),mlEpics6:(e,t)=>ND(e,t,[Iw,Aw],(e=>{const{payload:{type:t}}=e;let r="";t===Aw?C.isMacOS&&(r="Need to allow screen recording access in system setting on MacOS"):r="Need to allow the permission request",uw.report(`${r}`,["Sharing exception flow"])})),mlEpics7:(e,t)=>ND(e,t,Rw,(e=>{const{payload:{data:r}}=e,{video:{renderedVideoList:o}}=t.value;if(null!=r&&r.canvasId){const e=o.filter((e=>e.canvasId===r.canvasId));uw.report(`WebGl Context lost, canvas ID:${r.canvasId}, affected video node Ids:${e.map((e=>e.userId)).join(",")}`,["Video exception flow"])}})),mlEpics8:(e,t)=>Xr(document,"visibilitychange").pipe(wD(e,t,(()=>{if(uw.makeLogger(["Video"]).log(`Page visibility ${document.visibilityState} `),"hidden"==document.visibilityState&&C.isAndroidOrIOSBrowser){const{logger:{isLogDetailed:e,isLaplaceInitialized:r}}=t.value;e&&r&&uw.reportToGlobalTracing(void 0,!0,!0)}setTimeout((()=>{const e="visible"!==document.visibilityState,{video:{subscribedVideoList:r},meeting:{userId:o}}=t.value,n=r.filter((e=>e!==o)).length>0;e&&n&&(E_.createAgent().sendRWGConnectionPerformance("VCSV"),uw.makeLogger(["Video"]).warn("Still subscribing videos after switching to background"))}),1e3)}))),mlEpics9:e=>bv(e,L.InitSuccessVideo).pipe(uo((e=>e.payload.data===k.EncodeSuccess&&C.isAndroidOrIOSBrowser)),Ao((()=>{const e=uw.makeLogger(["Video"]);return e.info("Screen orientation: "+(ec()?"landscape":"portrait")),tc().pipe(To((t=>{e.info("Screen orientation changes, current orientation: "+(t?"landscape":"portrait"))})),go())})))},Bw={rmclEpics0:(e,t)=>e.pipe(BS(`${bA}`),wD(e,t,(e=>{const{payload:{isRemoteControlEnabled:t,isEnableAutoDeleteRcApp:r}}=e;ow.log(`isRemoteControlEnabled:${t},auto delete:${r}`)}))),rmclEpics1:(e,t)=>e.pipe(BS(`${_A}`),uo((e=>!!e.payload)),wD(e,t,(e=>{let t=e.payload;try{const e=new URL(t),r=e.searchParams.get("accountID");r&&(e.searchParams.set("accountID",_E(r)),t=e.toString()),ow.log(`Launch Remote control app, scheme:${t}`)}catch(e){}}))),rmclEpics2:(e,t)=>e.pipe(BS(`${mA}`),uo((e=>!!e.payload)),wD(e,t,(e=>{ow.log(`Remote control session starts, controlling ssrc:${e.payload}`)}))),rmclEpics3:(e,t)=>MD(e,t,16430,(()=>{ow.log("Remote control app connected to rwg.")})),rmclEpics4:(e,t)=>MD(e,t,Lv,(()=>{ow.log("Remote control app disconnected to rwg.")})),rmclEpics5:(e,t)=>MD(e,t,Lv,(e=>{const{share:{status:r,isRemoteControlEnabled:o}}=t.value;o&&r!==z.End&&e.payload.body.bOn&&ow.log(`Remote control sharing device info.${JSON.stringify(nw.getShareStreamInfo())}`)})),rmclEpics6:(e,t)=>ND(e,t,L.CurrentDesktopSharingWidthHeight,(()=>{const{share:{isRemoteControlEnabled:e}}=t.value;e&&ow.log(`Remote control sharing device info changes.${JSON.stringify(nw.getShareStreamInfo())}`)})),rmclEpics7:(e,t)=>ND(e,t,L.SendRemoteControlQrCode,(e=>{const{share:{status:r}}=t.value,{payload:{data:o}}=e;ow.log(`Remote control QR code result. sharing status:${r}, result${JSON.stringify(o)}`)}))},Hw={epics0:(e,t)=>e.pipe(BS(`${Hg}`),$r((async e=>{const{meeting:{logConfig:r,zlkJwtToken:o,accountId:n,enableAutoLog:i,collectionToggleEnable:s,zsk:a,isUIToolkit:u},logger:{options:d}}=t.value;let c=d||{};if(r)try{const{enable:e,enableReport:t}=JSON.parse(r);c={...c,enable:e,enableReport:t}}catch(e){}if(o){const{telemetry_tracking_id:t}=Ad(o),{payload:{meetingId:r}}=e,n=null!=t?t:r;c={...c,enable:!0,enableReport:!0,trackingId:n}}else{let e=!1;e=a&&void 0!==s?!(i&&s):!i,Ay.set(Ty.DisableAutoReportLogs,e,_y.Memory)}return tw.init({...c,logConfig:r,accountId:n,isUIToolkit:u}).then((()=>[sO(!0),iO(c)])).catch((()=>[sO(!1)]))})),$r((e=>br(e)))),epics1:(e,t)=>MD(e,t,Nv,(e=>{var r,o,n,i;const{payload:{body:s}}=e;if(s&&s.res===KD.Success){tw.makeLogger(["A/V Performance Info"]).info(`CPU cores:${navigator.hardwareConcurrency}, SharedArrayBuffer:${!!C.isSupportSharedArrayBuffer},\n          OffscreenCanvas:${!!C.isSupportOffscreenCanvas}, browser:${C.browser} ${C.browserVersion}, OS:${C.os} ${C.osVersion}${kD("wow64",C.wow64)}${kD("GPU",C.gpu)}${kD("architecture",C.architecture)}${kD("bitness",C.bitness)}${kD("model",C.model)}`,["CPU_CORES"]);const{media:{enforceMultipleVideos:e,enforceVirtualBackground:r,assetsPath:o,disableRenderLimits:n},meeting:{stayAwake:i,quicklyLeave:s}}=t.value;tw.makeLogger(["Init Option"]).info(`Init option:${JSON.stringify({enforceMultipleVideos:e,disableRenderLimits:n,enforceVirtualBackground:r,assetsPath:o,stayAwake:i,leaveOnPageUnload:s})}`),"connection"in navigator&&(rw(),navigator.connection.addEventListener("change",rw))}else tw.report(`join meeting failed, error:${JSON.stringify(ew(null==s?void 0:s.res))}, rwg error code:${null==s?void 0:s.res}, rwg conID:${null==s?void 0:s.conID}, error message:${null==s?void 0:s.error_desc}, rwg url:${null==s?void 0:s.svcUrl},mid:${t.value.meeting.meetingId}`,"JOIN_MEETING_FAILED","error");const{meeting:{meetingInfoTimestamp:a,pingRWCTimestamp:u,tid:d,meetingId:c,topic:l,accountId:p,cv:h,zlkJwtToken:m,websdkClientFeatureOptions:g,enableHybridRWG:S},socket:{rwgServerList:v,retryCount:f},video:{rendererType:y},media:{patchJsMedia:E,assetsPath:_},audio:{isWebRtcAudioCapable:I},logger:{isLogDetailed:A}}=t.value;let b=["conID","confID","mmrFeature","mmrFeatureEx","reportDomain","res","role","svcUrl","userID","userGUID","useWBVideo","useWBAudio"].reduce(((e,t)=>void 0!==s[t]?{...e,[`${t}`]:s[t]}:e),{});b=["jid","mn","participantID"].reduce(((e,t)=>void 0!==s[t]?{...e,[`${t}`]:_E(s[t])}:e),b),b.response=b.res,delete b.res;const T=["connection_info_map"];let R;if(s.res===KD.Success&&T.push("Command Socket Event","User Info Map"),d){const e=d.match(/clid=(\S+);/);e&&e.length>1&&(R=e[1])}const O=Math.floor(performance.now()-a),D=Math.floor(performance.now()-u);let[w,N]=[void 0,void 0];if(m){var M;const{enforce_web_rtc_audio:e,audio_compatible_mode:t,audio_webrtc_mode:r,video_webrtc_mode:o}=Ad(m);w=null!==(M=null!=r?r:t)&&void 0!==M?M:e,N=o}const P=E_.createAgent();tw.report(JSON.stringify({...b,tid:d,mid:c,userRegion:R,rwgUrl:v.length>0?null===(r=v[f])||void 0===r?void 0:r.rwg:void 0,hardwareConcurrency:navigator.hardwareConcurrency,sharedArrayBuffer:C.isSupportSharedArrayBuffer,OffscreenCanvas:C.isSupportOffscreenCanvas,browserVersion:`${C.browser} ${C.browserVersion}`,osVersion:`${C.os} ${C.osVersion}`,gpu:C.gpu,architecture:C.architecture,model:C.model,bitness:C.bitness,wow64:C.wow64,totalDurationOfJoining:O,durationOfRWG:D,rendererType:y,sdkVersion:h,mediaSdkVersion:null===(o=window.JsMediaSDK_Instance)||void 0===o?void 0:o.version,topic:l?_E(l):void 0,accountId:p?_E(p):void 0,patchJSMediaSDK:E,dependentAssets:_,webRtcAudio:I,crossOriginIsolated:!!window.crossOriginIsolated,jwtAudio:w,jwtVideo:N,isRlbTP:null===(n=P.websocket)||void 0===n?void 0:n.isRlb,abOption:g,logDetail:A,isPrivateMeeting:S}),T,"info"),P.sendRWGConnectionPerformance(`WCL_M, conId: ${null==s?void 0:s.conID}, trackingId: ${null===(i=t.value.logger)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.trackingId}, JOINFS(${O}), JOINFRWC(${D})`)})),epics2:(e,t)=>e.pipe(BS(`${Ng}`),Ro(t),uo((([,e])=>void 0===e.meeting.encryptedRWC&&(void 0===e.meeting.encryptedGEORWC||0===e.meeting.encryptedGEORWC.length))),wD(e,t,(()=>{const{label:e,payload:r}=DD(t.value);tw.report(`${e} ${JSON.stringify(r)}`,["Join Meeting Flow","Ping RWC Domain Empty"],"error")}))),epics3:(e,t)=>e.pipe(BS(`${Mg}`),uo((e=>e.payload===Fo.OnError||e.payload===Fo.Disconnect||e.payload===Fo.NoHeartbeat)),wD(e,t,(e=>{var r;const{payload:o}=e,{socket:{rwgServerList:n,retryCount:i}}=t.value,{payload:s}=DD(t.value);tw.report(`websocket unexpected disconnected,${JSON.stringify({code:o,rwgHost:null===(r=n[i])||void 0===r?void 0:r.rwg,...s})}`,["Join Meeting Flow","RWG Disconnect"])}))),epics4:(e,t)=>e.pipe(BS(`${SS}`),wD(e,t,(e=>{const{payload:{reason:r,count:o,interval:n,sequence:i,userId:s,userGUID:a,meetingId:u}}=e,{payload:d}=DD(t.value,{meetingId:u,userId:s,userGUID:a});tw.report(`meeting failover,${JSON.stringify({reason:r,count:o,interval:n,sequence:i,detailed:qD(i),...d})}`,["Join Meeting Flow","Failover"]),"connection"in navigator&&navigator.connection.removeEventListener("change",rw)}))),epics5:(e,t)=>e.pipe(BS(`${JS}`),uo((e=>e.payload.status===N_.Connecting)),wD(e,t,(e=>{const{payload:{rwgUrl:r}}=e;let o=r.replace(/(\d+)\?/,`${_E("$1")}?`);o=["email","zoomid","participantID","dn2","customer_key","mpwd","topic"].reduce(((e,t)=>e.indexOf(t)>-1?e.replace(new RegExp(`${t}=([^&]+)`,"g"),`${t}=${_E("$1")}`):e),o);const{payload:n}=DD(t.value);tw.makeLogger(["Join Meeting Flow"]).info(`RWG URL,${JSON.stringify({rwgUrl:o,...n})}`,["RWG Url"])}))),epics6:(e,t)=>e.pipe(BS(`${FS}`),uo((e=>{const{payload:r}=e;return r?r.retry:t.value.meeting.meetingStatus===Ho.Initial})),wD(e,t,(()=>{const{meeting:{meetingStatus:e},socket:{rwgServerList:r,retryCount:o}}=t.value;if(e!==Ho.Joined){const{payload:e}=DD(t.value),n=(null==r?void 0:r.length)>0?r[o]:void 0;tw.report(JSON.stringify({...e,rwc:null==n?void 0:n.rwc,rwg:null==n?void 0:n.rwg}),["UNAVAILABLE_RWG"])}}))),epics7:(e,t)=>MD(e,t,1,(e=>{const{payload:{body:r}}=e;tw.report(`join meeting failed, version blocked. Current version:${t.value.meeting.cv},upgrade version:${null==r?void 0:r.upgradeVersion}`,"JOIN_MEETING_FAILED","error")})),epics8:(e,t)=>MD(e,t,2,(()=>{tw.report(`join meeting with low version of SDK. Current version:${t.value.meeting.cv}.`,"Join Meeting Flow","warn")})),epics9:(e,t)=>e.pipe(BS(`${Dg}`,`${wg}`),Ao((()=>Ka(xo,1).pipe(To((e=>{try{const{code:r,reason:o,errorCode:n}=null!=e?e:{},{payload:i}=DD(t.value);tw.report(`Connection change with join meeting failed. payload:${JSON.stringify({code:r,reason:o,errorCode:n})}. meeting info:${JSON.stringify(i)}`,"JOIN_MEETING_FAILED","error")}catch(e){}})),$r((()=>or)))))),epics10:(e,t)=>e.pipe(BS(`${FS}`),uo((e=>{var t;return!(null!==(t=e.payload)&&void 0!==t&&t.retry)})),wD(e,t,(()=>{const{logger:{isLogDetailed:e,isLaplaceInitialized:r}}=t.value;r&&e&&tw.reportToGlobalTracing(void 0,!0)}))),epics11:(e,t)=>e.pipe(BS(`${Kg}`),uo((()=>!!t.value.logger.isLogDetailed)),Ao((()=>Xr(window,"beforeunload").pipe(To((()=>{const{logger:{isLaplaceInitialized:e}}=t.value;e&&tw.reportToGlobalTracing(void 0,!0,!0)})),go())))),epics12:(e,t)=>e.pipe(BS(`${ev}`),wD(e,t,(e=>{const{payload:r}=e,{payload:o}=DD(t.value);tw.report(`XMPP Socket retry, count:${r},meeting info:${JSON.stringify(o)}`,["Join Meeting Flow","XMPP Socket Retry"])})))},jw=yv(Hw,Bw,Vw),Fw=E_.createAgent(),Ww={cmrStatus:yn.Stop,recordingEnable:!1,recordingIsoEnable:!1,allowStopAutoRecording:!1,automaticCloudRecordingEnable:!1,isZoomIQ:!1,zoomIQChanging:!1,localStatus:En.Stop,supportLocalRecording:_n.None,localGrantPermissionOption:In.None,localPermissionUserList:[]},xw=zc({[`${oR}`]:sy(((e,{payload:t})=>{e.cmrStatus=t})),[`${nR}`]:sy(((e,{payload:t})=>{e.recordingEnable=t})),[`${iR}`]:sy(((e,{payload:t})=>{e.recordingIsoEnable=t})),[`${sR}`]:sy(((e,{payload:t})=>{e.allowStopAutoRecording=t})),[`${aR}`]:sy(((e,{payload:t})=>{e.automaticCloudRecordingEnable=t})),[`${uR}`]:sy(((e,{payload:t})=>{e.isZoomIQ=t})),[`${dR}`]:sy(((e,{payload:t})=>{e.zoomIQChanging=t})),[`${cR}`]:sy(((e,{payload:t})=>{e.localStatus=t})),[`${lR}`]:sy(((e,{payload:t})=>{e.supportLocalRecording=t})),[`${pR}`]:sy(((e,{payload:t})=>{e.localGrantPermissionOption=t})),[`${hR}`]:sy(((e,{payload:t})=>{e.localPermissionUserList=t})),[`${mR}`]:()=>({...Ww})},Ww);var $w,Gw,zw,qw,Kw,Jw,Qw,Yw,Zw;const Xw=E_.createAgent(),eN=kE("Recording");let tN=($w=kS("recording"),Gw=kS("recording"),zw=kS("recording"),qw=kS("recording"),Kw=kS("recording"),Jw=kS("recording"),Qw=kS("recording"),Yw=kS("recording"),Zw=class extends I_{startRecording(){const e=this[t](),{meeting:{bIbDisableRecording:r,recordingEnable:o},recording:{cmrStatus:n}}=e;return r?Promise.reject({type:Ke,reason:"Rejected by Information Barrier",errorCode:wa.RECORDING_ACCOUNT_DISABLE}):o?n===yn.Start?Promise.resolve(""):(Xw.recordMeeting(!0,!1),qa(An,(e=>e.cmrServerStatus===yn.Start))):Promise.reject({type:Ke,reason:"The account of the meeting disabled the cloud recording",errorCode:wa.RECORDING_ACCOUNT_DISABLE})}pauseRecording(){const e=this[t](),{recording:{cmrStatus:r,allowStopAutoRecording:o}}=e;return r===yn.Pause?Promise.resolve(""):r!==yn.Start?Promise.reject({type:Ke,reason:"Recording is not started",errorCode:wa.RECORDING_MISMATCH_STATE}):o?(Xw.recordMeeting(!1,!0),qa(An,(e=>e.cmrServerStatus===yn.Pause))):Promise.reject({type:Ke,reason:"Cannot pause cloud recording due to web setting config",errorCode:wa.RECORDING_STOP_FORBIDDEN})}stopRecording(){const e=this[t](),{recording:{cmrStatus:r,allowStopAutoRecording:o}}=e;return r===yn.Stop?Promise.resolve(""):o?(Xw.recordMeeting(!1,!1),qa(An,(e=>e.cmrServerStatus===yn.Stop))):Promise.reject({type:Ke,reason:"Cannot stop cloud recording due to web setting config",errorCode:wa.RECORDING_STOP_FORBIDDEN})}accept(){const e=this[t](),{recording:{cmrStatus:r,recordingIsoEnable:o}}=e,n=Tu(e);return o?r!==yn.Start&&r!==yn.Pause?Promise.reject({type:Ke,reason:"Recording is not started",errorCode:wa.RECORDING_MISMATCH_STATE}):null!=n&&n.bAllowISORecord?Promise.resolve("You accepted ISO recording"):(Xw.allowSelfRecord(!0),qa(bn,(e=>(null==e?void 0:e.userId)===(null==n?void 0:n.userId)&&(null==e?void 0:e.status)===fn.Accept))):Promise.reject({type:Ke,reason:"ISO Recording is not enabled",errorCode:wa.RECORDING_ISO_DISABLE})}decline(){const e=this[t](),{recording:{cmrStatus:r,recordingIsoEnable:o}}=e,n=Tu(e);return o?r!==yn.Start&&r!==yn.Pause?Promise.reject({type:Ke,reason:"Recording is not started",errorCode:wa.RECORDING_MISMATCH_STATE}):!0===(null==n?void 0:n.bAllowISORecord)?Promise.reject({type:Ke,reason:"You had accept ISO recording, cant change it",errorCode:wa.RECORDING_MISMATCH_STATE}):(Xw.allowSelfRecord(!1),Promise.resolve("")):Promise.reject({type:Ke,reason:"ISO Recording is not enabled",errorCode:wa.RECORDING_ISO_DISABLE})}getRecordingStatus(){const e=this[t](),{recording:{cmrStatus:r}}=e,o=Uu(e);return r===yn.Start?fn.Recording:r===yn.Pause?fn.Paused:o?fn.Recording:fn.Stopped}isRecordingEnabled(){const e=this[t](),{recording:{recordingEnable:r}}=e;return r}isAllowedToStopAutoRecording(){const e=this[t](),{recording:{allowStopAutoRecording:r}}=e;return r}isAutomaticCloudRecordingEnabled(){const e=this[t](),{recording:{automaticCloudRecordingEnable:r}}=e;return r}enableRecordingWithIQ(e){const{[t]:o,[r]:n}=this,i=o(),{recording:{isZoomIQ:s,zoomIQChanging:a},meeting:{meetingOptions:u}}=o();return u.isEnableKiwiRecording?Ru(i)?a?Promise.reject({type:Ke,reason:"We are changing, please wait",errorCode:wa.RECORDING_IQ_MISMATCH_STATE}):e===s?Promise.reject({type:Ke,reason:`You have ${e?"enable":"disable"} Zoom IQ, don't need change`,errorCode:wa.RECORDING_IQ_MISMATCH_STATE}):(n(dR(!a)),n(uR(!s)),Xw.enableZoomIQRecord(e),qa(On,(e=>null==e?void 0:e.success))):Promise.reject({type:Ke,reason:"Only Host or co-host can enable/disable Zoom IQ",errorCode:wa.RECORDING_IQ_PERMISSION_REQUIRED}):Promise.reject({type:Ke,reason:"You not have zoom IQ license or not enable zoom IQ, please check and retry",errorCode:wa.RECORDING_IQ_DISABLE})}isSupportLocalRecording(){const e=this[t](),{meeting:{meetingOptions:r,isWebinar:o},breakoutRoom:n}=e;if((null==n?void 0:n.currentRoom.status)===gu.InRoom)return!1;const i=Tu(e);return(!o||!lu(i.userRole))&&(null==r?void 0:r.isLocalRecordingEnabled)}isSupportLocalRecordingPermission(){const e=this[t](),{recording:{supportLocalRecording:r}}=e;if(!this.isSupportLocalRecording())return!1;const o=Tu(e);return!(null==o||!o.isHost)||r===_n.Allow}askLocalRecordingPermission(){const{[t]:e}=this,{recording:{supportLocalRecording:r}}=e();return this.isSupportLocalRecording()?r===_n.None?(Xw.localRecordingRequestPermission(),Promise.resolve("")):r===_n.Allow?Promise.resolve(""):Promise.reject({reason:"permission is denied",errorCode:wa.LOCAL_RECORDING_MISMATCH_STATE}):Promise.reject({reason:"not support",errorCode:wa.LOCAL_RECORDING_ACCOUNT_DISABLE})}startLocalRecording(e){const{[t]:o,[r]:n}=this,i=o(),{recording:{localStatus:s,supportLocalRecording:a},meeting:{userId:u}}=i;if(!(e in En))return Promise.reject({type:Ke,reason:"not support you parameter, only support type are 0(stop)/1(start)/2(pause).",errorCode:wa.LOCAL_RECORDING_INVALID_VALUE});if(!this.isSupportLocalRecording())return Promise.reject({type:Ke,reason:"not support local recording",errorCode:wa.LOCAL_RECORDING_ACCOUNT_DISABLE});if(e===s)return Promise.resolve(`you currently status is ${s}, do nothing`);const d=Tu(i);return a===_n.Allow||null!=d&&d.isHost?(Xw.localRecordingMeeting(e),qa(Cn,(t=>(null==t?void 0:t.userId)===u&&(n(cR(t.bLocalRecord)),t.bLocalRecord===e)),1e3)):Promise.reject({type:Ke,reason:"you not have local recording permission, please use askLocalRecordingPermission request it first",errorCode:wa.LOCAL_RECORDING_MISMATCH_STATE})}isSupportLocalRecordingGrantPermission(){const e=this[t]();if(!this.isSupportLocalRecording())return!1;const r=Tu(e);return!(null==r||!r.isHost)&&!!WE(r.caps)}grantLocalRecordingPermission(e,o,n){const{[t]:i,[r]:s}=this,a=i(),{recording:{localPermissionUserList:u}}=a;if(!this.isSupportLocalRecording())return Promise.resolve(!1);const d=Tu(a);if(!WE(d.caps))return Promise.reject({type:Ke,reason:"you can not grant permission",errorCode:wa.LOCAL_RECORDING_MISMATCH_STATE});let c=!1;if(n&&(c=!0),u.filter((t=>t===e)).length>0){if(o===_n.Allow)Xw.localRecordingGrantPermission(e,!0,c);else{if(o!==_n.Deny)return Promise.reject({type:Ke,reason:"only support DENY(1)/ALLOW(2)",errorCode:wa.LOCAL_RECORDING_INVALID_VALUE});Xw.localRecordingGrantPermission(e,!1,c)}return s(hR(u.filter((t=>t!==e)))),$a(Tn,{type:"answer",value:o===_n.Allow}),Promise.resolve(!1)}return o!==_n.Deny?Promise.reject({type:Ke,reason:"Direct grant only support DENY(1)",errorCode:wa.LOCAL_RECORDING_INVALID_VALUE}):(Xw.hostGrantPermission(e,!1),qa(Tn,(t=>(null==t?void 0:t.value)===e&&(o===_n.Allow?(s(hR([...u,e])),!0===(null==t?void 0:t.canRecord)):(s(hR(u.filter((t=>t!==e)))),!1===(null==t?void 0:t.canRecord)))),1e3))}getLocalRecordingPermissionUserList(){const e=this[t](),{recording:{localPermissionUserList:r}}=e;if(!this.isSupportLocalRecording())return[];const o=Tu(e);return WE(o.caps)?r:Promise.reject({type:Ke,reason:"you can not grant permission",errorCode:wa.LOCAL_RECORDING_MISMATCH_STATE})}getLocalRecordingPermissionOperation(){const e=this[t](),{recording:{localGrantPermissionOption:r}}=e;if(!this.isSupportLocalRecording())return null;const o=Tu(e);return WE(o.caps)?r:null}},AS(Zw.prototype,"startRecording",[PS,NS,$w,eN],Object.getOwnPropertyDescriptor(Zw.prototype,"startRecording"),Zw.prototype),AS(Zw.prototype,"pauseRecording",[PS,NS,Gw,eN],Object.getOwnPropertyDescriptor(Zw.prototype,"pauseRecording"),Zw.prototype),AS(Zw.prototype,"stopRecording",[PS,NS,zw,eN],Object.getOwnPropertyDescriptor(Zw.prototype,"stopRecording"),Zw.prototype),AS(Zw.prototype,"accept",[NS,qw,eN],Object.getOwnPropertyDescriptor(Zw.prototype,"accept"),Zw.prototype),AS(Zw.prototype,"decline",[NS,Kw,eN],Object.getOwnPropertyDescriptor(Zw.prototype,"decline"),Zw.prototype),AS(Zw.prototype,"askLocalRecordingPermission",[NS,Jw],Object.getOwnPropertyDescriptor(Zw.prototype,"askLocalRecordingPermission"),Zw.prototype),AS(Zw.prototype,"startLocalRecording",[NS,Qw],Object.getOwnPropertyDescriptor(Zw.prototype,"startLocalRecording"),Zw.prototype),AS(Zw.prototype,"grantLocalRecordingPermission",[NS,LS,Yw],Object.getOwnPropertyDescriptor(Zw.prototype,"grantLocalRecordingPermission"),Zw.prototype),Zw);const rN={moduleEpics0:e=>e.pipe(BS(`${Hg}`),Ur((e=>{const{payload:{recordingEnable:t}}=e;return nR(t)}))),moduleEpics1:(e,t)=>Ev(e,Ov).pipe(uo((e=>{var t,r,o;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.cmrServerStatus)||void 0!==(null===(r=e.payload.body)||void 0===r?void 0:r.disAllowClientStopAutoCmr)||void 0!==(null===(o=e.payload.body)||void 0===o?void 0:o.enableAutomicRecordingCloud)})),Ro(t),$r((([e,t])=>{const{cmrServerStatus:r,disAllowClientStopAutoCmr:o,enableAutomicRecordingCloud:n}=e.payload.body,i=[];return void 0!==r&&(r!==yn.Init&&($a(An,{cmrServerStatus:r}),t.recording.recordingIsoEnable&&r===yn.Start&&$a(bn,{status:fn.Ask})),i.push(oR(r))),void 0!==o&&i.push(sR(!o)),void 0!==n&&i.push(aR(n)),br(i)}))),moduleEpics2:e=>Ev(e,Ov).pipe(uo((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.bCmrIsoEnble)})),Ur((e=>{const{bCmrIsoEnble:t}=e.payload.body;return iR(t)}))),moduleEpics3:(e,t)=>Ev(e,Rv).pipe(Ro(t),uo((([e])=>{const{payload:{body:{update:t,add:r}}}=e;return(null==t?void 0:t.some((e=>void 0!==e.bLocalRecordStatus||void 0!==e.canRecord)))||(null==r?void 0:r.some((e=>void 0!==e.bLocalRecordStatus||void 0!==e.canRecord)))})),$r((([e,t])=>{const{payload:{body:{update:r,add:o}}}=e,{meeting:{userId:n,isHost:i},recording:{supportLocalRecording:s},participants:{attendeesList:a}}=t,u=[];return null==r||r.concat(o||[]).filter((e=>void 0!==e.bLocalRecordStatus||void 0!==e.canRecord)).forEach((e=>{if(void 0!==e.canRecord){const t=Boolean(e.canRecord);if(n===e.id||i){const r=a.find((e=>e.userId===n));!t&&null!=r&&r.bLocalRecord&&($a(Tn,{type:"revoke",value:e.id,canRecord:t}),Fw.localRecordingMeeting(En.Stop)),!t||null!=r&&r.bLocalRecord||$a(Tn,{type:"grant",value:e.id,canRecord:t})}n===e.id&&((s!==_n.None||t)&&u.push(lR(t?_n.Allow:_n.Deny)),t||u.push(cR(En.Stop)))}else $a(Cn,{userId:e.id,bLocalRecord:e.bLocalRecordStatus})})),br(u)}))),moduleEpics4:(e,t)=>Ev(e,Rv).pipe(Ur((e=>af(e.payload.body))),Ro(t),$r((([e,t])=>{const r=[],{recording:{localPermissionUserList:o}}=t;return e.remove&&e.remove.forEach((e=>{o.filter((t=>t===(null==e?void 0:e.userId)))&&(r.push(hR(o.filter((t=>t!==(null==e?void 0:e.userId))))),$a(Tn,{type:"remove",value:null==e?void 0:e.userId}))})),br(r)}))),moduleEpics5:e=>Ev(e,Rv).pipe(uo((e=>{const{payload:{body:{update:t}}}=e;return null==t?void 0:t.some((e=>void 0!==e.bAllowISORecord))})),To((e=>{const{payload:{body:{update:t}}}=e;t.filter((e=>void 0!==e.bAllowISORecord)).forEach((e=>{$a(bn,{userId:e.id,status:e.bAllowISORecord?fn.Accept:fn.Decline})}))})),yo(or)),moduleEpics6:e=>Ev(e,Ov).pipe(uo((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.SalesRecordingAnalytics)})),Ur((e=>{const{SalesRecordingAnalytics:t}=e.payload.body;return $a(Rn,{isZoomIQ:t}),uR(t)}))),moduleEpics7:(e,t)=>Ev(e,4319).pipe(Ro(t),uo((([e])=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.success)})),$r((([e,t])=>{const r=[],{success:o}=e.payload.body,{recording:{zoomIQChanging:n}}=t;return $a(On,{success:o}),o&&r.push(dR(!n)),br(r)}))),moduleEpics8:(e,t)=>Ev(e,4344).pipe(Ro(t),uo((([e])=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.cmdType)})),$r((([e,t])=>{var r;const o=[],{cmdType:n}=e.payload.body,{recording:{localPermissionUserList:i},meeting:{isHost:s}}=t;var a,u,d,c;("permission_req_option"===n&&($a(Tn,{type:"option",value:null===(a=e.payload.body)||void 0===a?void 0:a.option}),o.push(pR(null===(u=e.payload.body)||void 0===u?void 0:u.option))),"request_permission"===n&&null!==(r=e.payload.body)&&void 0!==r&&r.userId)&&(s&&$a(Tn,{type:"request",value:null===(c=e.payload.body)||void 0===c?void 0:c.userId}),o.push(hR([...i,null===(d=e.payload.body)||void 0===d?void 0:d.userId])));return"permission_request_answer"===n&&($a(Tn,{type:"answer",value:e.payload.body.agreed}),o.push(lR(e.payload.body.agreed?_n.Allow:_n.Deny))),br(o)})))},oN=yv(rN);let nN=function(e){return e[e.All=1]="All",e[e.Private=2]="Private",e}({}),iN=function(e){return e.SUCCESS="success",e}({}),sN=function(e){return e.Screenshot="__zoom_internal_message_screenshot__@@",e.SpeakerOnly="__zoom_internal_message_speaker_only__@@",e}({});const aN=b_.getInstance(),uN=E_.createAgent();async function dN(e,t,r){const o=pd(e);return t?await Sb.beginEncrypt({text:o,type:r}):o}const cN=async(e,t,r)=>{try{let o="";if(await function(e){const{cmd:{connectionStatus:t}}=e;return t===iN.SUCCESS?Promise.resolve(!0):Nr(Ka(gn,1)).then((e=>e===Bo.Connected||Promise.reject({type:Ke,reason:"Cannot establish the command channel"})))}(r()),t){await function(e,t){const{cmd:{jids:r}}=t;return Object.prototype.hasOwnProperty.call(r,e)?Promise.resolve():Nr(Ka(Po).pipe(_o((t=>-1===t.findIndex((t=>Number(t.userId)===e)))),mo(1),_r(Xt)))}(t,r());const{cmd:{jids:e}}=r();if(!e[t])return Promise.reject({type:Je,errorCode:wa.INTERNAL_ERROR});o=e[t].jid}const{meeting:{encType:n}}=r(),i=o?nN.Private:nN.All,s=n===lb.AES_GCM,a=await dN(e,s,pb.XMPP_CHAT);aN.sendWebinarMseeage(a,o,i,s)}catch(e){}return""},lN=async(e,t)=>{const r=await dN(e,!1,pb.RWG_CHAT);return uN.sendCommandMessage(r,t),""};function pN(e,t){for(const[r,o]of Object.entries(e))if(o.jid===t)return r}function hN(e,t){let r,o=!1;if(null!=e&&e.startsWith(sN.SpeakerOnly)){const n=e.substring(sN.SpeakerOnly.length),i=1===Number(n);r=nf({userId:t,key:"isSpeakerOnly",value:i}),o=!0}else if(e.startsWith(sN.Screenshot)){const t=e.substring(sN.Screenshot.length);try{const{userId:e,displayName:r,type:o}=JSON.parse(t);$a("video"===o?ci:ys,{userId:e,displayName:r})}catch(e){console.log(e)}o=!0}return[o,r]}const mN=e=>t=>t.pipe($r((t=>{const{payload:{userId:r}}=t;return Nu(e.value).some((e=>e.userId===r))?br([t]):co(Ka(wo).pipe(uo((e=>e.some((e=>e.userId===r)))),mo(1),_r(Xt),Ur((()=>t))),ro(3e3).pipe(go()))}))),gN={connectionStatus:"initial",jids:{}},SN=zc({[`${fR}`]:()=>({...gN}),[`${gR}`]:sy(((e,{payload:t})=>{const{data:r,attendees:o}=t;r.forEach((t=>{const{jid:r,node:n}=t;if(!e.jids[n]||e.jids[n].jid!==r){const t=o.find((e=>e.userId===Number(n)));e.jids[n]={jid:r,userGuid:null==t?void 0:t.userGUID}}}))})),[`${SR}`]:sy(((e,{payload:t})=>{t.forEach((t=>{const{jid:r}=t,o=pN(e.jids,r);o&&delete e.jids[o]}))})),[`${vR}`]:sy(((e,{payload:t})=>{e.connectionStatus=t}))},gN);var vN;let fN=(vN=class extends I_{send(e,r){if(!e)return Promise.reject({type:Xe,reason:"Text is empty",errorCode:wa.CMD_EMPTY_MESSAGE});if("string"!=typeof e)return Promise.reject({type:Xe,reason:"Text is not a string",errorCode:wa.CMD_INVALID_MESSAGE_TYPE});if(e.length>512)return Promise.reject({type:Xe,reason:"Text exceeds the max length(512).",errorCode:wa.CMD_EXCEED_MESSAGE_LENGTH});const{[t]:o}=this,n=o(),{socket:{xmppSocketStatus:i},meeting:{userId:s}}=n;return i!==N_.Connected?Promise.reject({type:Ke,reason:"Command channel is not ready",errorCode:wa.CMD_CHANNEL_NOT_READY}):r&&-1===Nu(o()).findIndex((e=>e.userId===r))?Promise.reject({type:Xe,reason:"Cannot find the user",errorCode:wa.CMD_MISMATCH_USER}):Promise.race([cN(e,null!=r?r:0,o),lN(e,null!=r?r:0)]).then((()=>({timestamp:(new Date).getTime(),text:e,receiverId:null!=r?r:0,senderId:s})))}getJids(){const{[t]:e}=this,r=e(),{cmd:{jids:o}}=r;return o}},AS(vN.prototype,"send",[NS],Object.getOwnPropertyDescriptor(vN.prototype,"send"),vN.prototype),vN);const yN={epics0:(e,t)=>Iv(e,24577).pipe(Ro(t),Ur((([e])=>{const{payload:{body:{status:t}}}=e;return t===iN.SUCCESS&&$a(gn,Bo.Connected),vR(t)}))),epics1:(e,t)=>Iv(e,24583).pipe(Ro(t),$r((async([e,t])=>{const{meeting:{userId:r,encType:o},cmd:{jids:n}}=t,{payload:{body:{senderName:i,senderJid:s,text:a,type:u,receiver:d,msgid:c,sn:l}}}=e,p=pN(n,s),h=Nu(t).find((e=>e.userId===Number(p)));if(h&&(h.caps&jE)===jE)return"";{const t=pN(n,d),s=o===lb.AES_GCM,h=(new Date).getTime();let g=a;if(s)try{g=(await Sb.beginDecrypt({decryptedText:a,type:pb.XMPP_CHAT,zoomId:l})).message}catch(e){}if(u===nN.Private&&Number(t)===r||u===nN.All){const e=ld(g),[t,r]=hN(e,Number(p));if(!t){var m;const t=p&&(null===(m=n[p])||void 0===m?void 0:m.userGuid);$a(mn,{senderId:p,senderName:i,senderGuid:t,text:e,timestamp:h,msgid:c})}return r}return""}})),uo((e=>"object"==typeof e&&null!==e&&void 0!==e.type)),mN(t),To((e=>{const{payload:{userId:t,key:r,value:o}}=e;$a(No,[{userId:t,[`${r}`]:o}])}))),epics2:(e,t)=>Iv(e,24595).pipe($r((e=>{const{payload:{body:{action:r,data:o}}}=e,n=[];if([cf.List,cf.Add,cf.update].includes(r)&&o){const{breakoutRoom:e,participants:{attendeesList:r}}=t.value,i=(null==e?void 0:e.currentRoom.status)===gu.InRoom?r.concat(e.mainSessionAttendeeList):r;n.push(gR({data:o,attendees:i}))}return r===cf.Remove&&o&&n.push(SR(o)),br(n)}))),epics3:(e,t)=>Ev(e,8032).pipe($r((async e=>{const{payload:{body:{senderID:r,commandContent:o,msgID:n}}}=e,i=ld(o),[s,a]=hN(i,r);if(!s){const e=r&&Nu(t.value).find((e=>e.userId===r));$a(mn,{senderId:`${null==e?void 0:e.userId}`,senderName:null==e?void 0:e.displayName,senderGuid:null==e?void 0:e.userGUID,text:i,timestamp:(new Date).getTime(),msgid:n})}return a})),uo((e=>"object"==typeof e&&null!==e&&void 0!==e.type)),mN(t),To((e=>{const{payload:{userId:t,key:r,value:o}}=e;$a(No,[{userId:t,[`${r}`]:o}])})))},EN=yv(yN,{extraEpics0:(e,t)=>e.pipe(BS(`${pI}`),Ao((e=>{const{payload:{speakerOnly:r}}=e,o=Tu(t.value);return(void 0!==(null==o?void 0:o.audio)?br([o.audio]):Ka(Do).pipe(uo((e=>void 0!==e.audio)),mo(1))).pipe(To((async()=>{const e=`${sN.SpeakerOnly}${r?1:0}`;await Promise.all([cN(e,0,(()=>t.value)),lN(e,0)])})),go())}))),extraEpics1:(e,t)=>Ev(e,Rv).pipe(uo((e=>{var r,o;const{payload:{body:n}}=e;return!(null===(r=t.value.audio)||void 0===r||null===(r=r.customizeAudioOption)||void 0===r||!r.speakerOnly)&&(null==n||null===(o=n.add)||void 0===o?void 0:o.length)>0})),_r(Xt),$r((e=>{const{payload:{body:{add:r}}}=e,o=t.value,{meeting:{userId:n},participants:{attendeesList:i}}=o,s=[];if(r)for(const e of r)if(e.id!==n){const r=ro(Math.floor(Math.random()*Math.min(200+10*i.length,2e3))).pipe($r((()=>{if(Nu(t.value).some((t=>t.userId===e.id))){const r=`${sN.SpeakerOnly}1`;return br([cN(r,e.id,(()=>t.value)),lN(r,e.id)]).pipe($r((e=>br(e))),lo((()=>or)),go())}return or})),lo((()=>or)));s.push(r)}return s.length>0?no(...s):or})),go()),extraEpics2:(e,t)=>e.pipe(BS(`${qc}`,`${GI}`),To((async e=>{const{payload:{targetUser:r,userId:o,displayName:n}}=e,i=e.type===`${qc}`?"video":"sharing",s=`${sN.Screenshot}${JSON.stringify({userId:o,displayName:n,type:i})}`;Promise.all([cN(s,r,(()=>t.value)),lN(s,r)])})),go())}),_N=(e,t,r,o)=>{const{getState:n,dispatch:i}=r,s=n(),{participants:{attendeesList:a},audio:{localShareAudioUserMutedList:u},share:{isReceiveSharingFromMainSession:d},breakoutRoom:c}=s,l=(d?null==c?void 0:c.mainSessionAttendeeList:a).find((t=>t.userId==e));if(l){if(l.bShareAudioOn){const r=u.find((t=>t.userId===e));return r&&r.muted===!t&&i(OI(o,e,t,s)),Promise.resolve("")}return Promise.reject({type:Ke,reason:`Cannot ${t?"mute":"unmute"} share audio when the user's share audio is not enable.`,errorCode:wa.AUDIO_NOT_STARTED})}return Promise.reject({type:Xe,reason:"Cannot find the user",errorCode:wa.STREAM_MISMATCH_USER})},IN=async(e,t,r,o=!1)=>{const{store:{getState:n,dispatch:i},mediaAgent:s}=e,a=n(),{meeting:{meetingOptions:u},share:{sharePrivilege:d,ssrc:c,capturedEnsuredCanvas:l},media:{sharingEncodeStatus:p},breakoutRoom:h}=a;await bC(t,a,r,o),o&&"success"!==p&&s.enableShareEncode();const m=Ru(a);if(null!=r&&r.broadcastToBreakoutRoom){if(!m||(null==h?void 0:h.currentRoom.status)===gu.InRoom)return m?Promise.reject({type:Ke,reason:"Unable to share screen to breakout room when in the room",errorCode:wa.SCREEN_SHARE_SUBSESSION_CONFLICT}):Promise.reject({type:Ye,errorCode:wa.SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED});i(nA(!0))}else i(nA(!1));return void 0!==(null==r?void 0:r.requestReadReceipt)&&i(aA(null==r?void 0:r.requestReadReceipt)),void 0!==(null==r?void 0:r.optimizedForSharedVideo)&&d!==G.MultipleShare&&i(uA((null==r?void 0:r.optimizedForSharedVideo)&&ju.isSupportVideoShareSend())),t.id||(t.id=_d("__ZOOM_SDK_SELF_SHARE_CANVAS_@__")),i(LA(!(null==r||!r.simultaneousShareView))),Nd("sharing",p,"success").subscribe((([e])=>{if(e){l.includes(t.id)||(Ud(t),i(lA(t.id)));let e=document.querySelector(`#${ne}`);e&&"VIDEO"===e.tagName||(e=document.createElement("video"),e.id=ne,e.style.display="none",document.body.appendChild(e));const n=null!=r&&r.secondaryCameraId?{cameraId:r.secondaryCameraId,width:r.captureWidth,height:r.captureHeight}:void 0,a=!(null!=r&&r.hideShareAudioOption);s.startDesktopSharing(c,t,e,n,null!=u&&u.isDisableShareAudioIntoBo?a&&!(null!=r&&r.broadcastToBreakoutRoom):a,null==r?void 0:r.displaySurface,null==r?void 0:r.sourceId,null==r?void 0:r.controls,o),i(AI(void 0)),i(iA(!!n))}})),new Promise(((e,t)=>{co(Jr({userAttr:Ka(Do).pipe(uo((e=>void 0!==e.sharerOn)),mo(1)),dimensionChange:Ka(Qi).pipe(mo(1))}).pipe(Ur((({userAttr:e})=>e))),Ka(Ji,1).pipe($r((e=>Tr({reason:e.reason||"user deny screen share",errorCode:e.reason?wa.SCREEN_SHARE_SYSTEM_DENIED:wa.SCREEN_SHARE_USER_DENIED}))))).subscribe({next:r=>{if(!0===r.sharerOn){const{share:{isSharingToBreakoutRoom:t},meeting:{meetingOptions:r}}=n(),a=!(null!=r&&r.isDisableShareAudioIntoBo||!t);s.enableShareAudioToBreakoutRoom(a),o&&i(kA(!0)),e("")}else t({type:Je,errorCode:wa.INTERNAL_ERROR})},error:e=>{t({type:Ke,...e})}})}))},AN=(e,t)=>{const{store:{getState:r},rwgAgent:o}=e,{share:{sharePrivilege:n}}=r();return n===t?Promise.resolve(""):Object.values(G).includes(t)?(o.lockSharing(t),Kd("lockShare",t)):Promise.reject({type:Xe,errorCode:wa.SCREEN_SHARE_INVALID_PRIVILEGE})},bN=(e,t,r,o)=>{const{store:{getState:n},rwgAgent:i}=e,{meeting:{userId:s},participants:{attendeesList:a}}=n();return(null==a?void 0:a.find((e=>(null==e?void 0:e.userId)===r)))?(i.respondRemoteShareRequest(t,s,r,o),Promise.resolve("")):Promise.reject({type:Ke,reason:`Cannot find a user with userId: ${r}`,errorCode:wa.SHARE_CAMERA_MESSAGE_ERROR})},CN=tu([Nu],(e=>e.filter((e=>e.bVideoOn)))),TN=tu([CN],(e=>e.filter((e=>(e.caps&BE)===BE)))),RN=(e,t,r,o,n,i,s,a,u,l)=>{const{store:{getState:p,dispatch:h},mediaAgent:m}=e,g=p(),{meeting:{userId:S,isUseWBVideo:v},media:{enforceMultipleVideos:f,disableRenderLimits:y},video:{subscribedVideoList:E,renderedVideoList:_}}=g;if(v)return Promise.reject({type:Ke,reason:"Use the attachVideo method to render the video.",errorCode:wa.VIDEO_METHOD_DEPRECATED});console.warn("Use the attachVideo method to render the video. The renderVideo method is deprecated. See the reference for details.");const I=ju.getMaxCountRender(v,!!f,y),A=Am()&&r===S;if(c(t)&&!E.includes(r)&&E.length>=I&&new Set(_.map((e=>e.canvasId))).has(t.id))return Promise.reject({type:Ke,reason:`subscribe video counts greater than maximum size (${I})`,errorCode:wa.VIDEO_RENDER_LIMIT_EXCEED});if(-1===CN(g).findIndex((e=>e.userId===r)))return Promise.reject({type:Xe,reason:"user is not send video",errorCode:wa.STREAM_MISMATCH_USER});if(t.id||(t.id=_d("__ZOOM_SDK_VIDEO_CANVAS_@__")),A){if(d(t)){t.playsInline=!0,t.muted=!0,t.autoplay=!0,C.isIOSMobile&&(m.switchCanvasForVideoCapture(t),h(Kl())),m.renderVideo(t,r,u||se,o,n,i,s,a,!0,l||"",!1),h(al(r)),h(ql(t.id));const e=document.querySelector(`#${de}`);return e&&e.remove(),Promise.resolve("")}return Promise.reject({type:Xe,reason:"You must use a <video> element to render self video for Chromium browser, Android browser without SharedArrayBuffer or iOS browser ",errorCode:wa.STREAM_MISMATCH_RENDER_ELEMENT})}const b=!!l,{media:{videoDecodeStatus:T}}=g;return Nd("video","success",T).subscribe((async([e,d])=>{if(d){const{video:{ensuredCanvas:e,renderedVideoList:d}}=p();let c=t;e.includes(t.id)||(c=Ud(t),h(Ul(t.id)));const g=r===S,v=u||se,f=await async function(e,t){const{video:{prefetchedVideo:r}}=t;return(null==r?void 0:r.userId)!==e||r.loaded?"":Nr(co(Ka(si,1),ro(1e3).pipe(So(""))))}(r,p());d.some((e=>e.userId===r&&e.key===v&&e.canvasId===c.id))||m.renderVideo(c,r,v,o,n,i,s,a,g,l||"",b),r!==S&&m.subscribeVideo(r,a,!1),E.includes(r)||h(al(r)),f&&h(Bl(void 0)),h(ll({userId:r,key:v,canvasId:c.id,videoQuality:a,aspectRatio:n?o/n:0}))}})),"failed"===T?Promise.reject({type:Je,reason:"Video  decode status is failed",errorCode:wa.INTERNAL_ERROR}):Promise.resolve("")},ON={video:{detectAction:ju.getVideoProcessorCapability,errorCode:{unsupported:wa.VIDEO_PROCESSOR_UNSUPPORTED,duplicateCreate:wa.VIDEO_PROCESSOR_DUPLICATE_CREATE,mismatchProcessor:wa.VIDEO_PROCESSOR_MISMATCH_PROCESSOR,limitExceed:wa.VIDEO_PROCESSOR_LIMIT_EXCEED}},audio:{detectAction:ju.getAudioProcessorCapability,errorCode:{unsupported:wa.AUDIO_PROCESSOR_UNSUPPORTED,duplicateCreate:wa.AUDIO_PROCESSOR_DUPLICATE_CREATE,mismatchProcessor:wa.AUDIO_PROCESSOR_MISMATCH_PROCESSOR,limitExceed:wa.AUDIO_PROCESSOR_LIMIT_EXCEED}},share:{detectAction:ju.getShareProcessorCapability,errorCode:{unsupported:wa.SHARED_PROCESSOR_UNSUPPORTED,duplicateCreate:wa.SHARED_PROCESSOR_DUPLICATE_CREATE,mismatchProcessor:wa.SHARED_PROCESSOR_MISMATCH_PROCESSOR,limitExceed:wa.SHARED_PROCESSOR_LIMIT_EXCEED}}},DN=(e,t)=>{var r;const{store:{getState:o}}=e,n=o(),{meeting:{mediaFeatureOptions:i}}=n;return null===(r=ON[t])||void 0===r?void 0:r.detectAction(i||"")},wN=(e,t)=>{const r=e.store.getState(),o=qE(r).find((e=>e.userId===t));if(o){const{caps:e}=o;return(e=>!(512&~e))(e)}return!1};var NN,MN,PN,LN,kN,UN,VN,BN,HN,jN,FN,WN,xN,$N,GN,zN,qN,KN,JN,QN,YN,ZN,XN,eM,tM,rM,oM,nM,iM,sM,aM,uM,dM,cM,lM,pM,hM,mM,gM,SM,vM,fM,yM,EM,_M,IM,AM,bM,CM,TM,RM,OM,DM,wM,NM,MM,PM,LM,kM,UM,VM,BM,HM,jM,FM,WM,xM,$M,GM,zM,qM,KM,JM,QM,YM,ZM,XM,eP,tP,rP,oP,nP,iP,sP,aP,uP,dP,cP,lP,pP,hP,mP,gP,SP,vP,fP,yP,EP,_P,IP,AP,bP,CP,TP,RP;const OP=kE("Audio"),DP=kE("Video"),wP=kE("Sharing"),NP=kE("Processor"),MP=kE("CameraControl"),PP=kE("Remote Control"),LP=UE(HTMLCanvasElement,0),kP=UE([HTMLCanvasElement,HTMLVideoElement],0),UP=UE(HTMLCanvasElement,0,["id"]),VP=UE([HTMLCanvasElement,HTMLVideoElement],0,["id"]),BP=XE("annotation"),HP=XE("remote control");let jP=(NN=kS("audio"),MN=kS("audio"),PN=kS("audio"),LN=kS("audio"),kN=kS("audio"),UN=kE("Audio",[1,2,3]),VN=kS("audio"),BN=kE("Audio",[1,2]),HN=kS("audio"),jN=kS("audio"),FN=kS("audio"),WN=kS("audio"),xN=kS("share"),$N=kS("audio"),GN=kS("share"),zN=kS("audio"),qN=kS("audio"),KN=kS("audio"),JN=kS("audio"),QN=kS("audio"),YN=kS("audio"),ZN=kE("Audio",[1,2]),XN=kS("audio"),eM=kE("Audio",[1,2]),tM=kS("audio"),rM=kS("audio"),oM=kS("audio"),nM=kS("audio"),iM=kS("video"),sM=kS("video"),aM=kS("video"),uM=kS("processor"),dM=kS("processor"),cM=kS("processor"),lM=kS("video"),pM=kS("video"),hM=kS("video"),mM=kS("video"),gM=kS("video"),SM=kS("video"),vM=kS("video"),fM=kS("video"),yM=kS("video"),EM=kS("video"),_M=kE("Video",[2]),IM=kS("video"),AM=kE("Video",[1]),bM=kS("video"),CM=kS("video"),TM=kS("video"),RM=kS("video"),OM=kS("video"),DM=kS("video"),wM=kS("video"),NM=kS("video"),MM=kS("video"),PM=kS("video"),LM=kS("video"),kM=kS("video"),UM=kS("video"),VM=kS("video"),BM=kS("video"),HM=kS("video"),jM=kS("video"),FM=kS("video"),WM=kS("video"),xM=kS("video"),$M=kS("share"),GM=kS("share"),zM=kS("share"),qM=kS("share"),KM=kS("share"),JM=kS("share"),QM=kS("share"),YM=kS("share"),ZM=kS("share"),XM=ly("isShareOptionLocked"),eP=ly("isShareOptionLocked"),tP=kS("share"),rP=kS("share"),oP=kS("share"),nP=kS("share"),iP=kS("share"),sP=kS("share"),aP=kS("share"),uP=kS("share"),dP=kS("share"),cP=kS("share"),lP=kS("share"),pP=kS("share"),hP=kS("share"),mP=kS("share"),gP=kS("share"),SP=kS("share"),vP=kS("share"),fP=kS("share"),yP=kS("share"),EP=kS("share"),_P=kS("share"),IP=kS("share"),AP=kS("share"),bP=kS("share"),CP=kS("share"),TP=kS("share"),RP=class extends I_{constructor(t){super(t),this[n]=void 0,this[e].dispatch(rv()),this[n]={store:t,mediaAgent:jd(NE(ju.getInstance())),rwgAgent:E_.createAgent()}}startAudio(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n,mediaAgent:i}=e,s=r(),a=Tu(s);if((null==a?void 0:a.audio)===ye.Computer)return Promise.resolve("");if((null==a?void 0:a.audio)===ye.Phone)return Promise.reject({type:Ke,reason:"joined by phone",errorCode:wa.AUDIO_IN_PSTN});{const{audio:{isAllowToTalk:e,isComputerAudioLoading:u,canPlayAudio:d,customizeAudioOption:{speakerOnly:c}},media:{audioDecodeStatus:l,audioEncodeStatus:p}}=s;if(u)return Promise.reject({type:Ke,reason:"Computer audio has been loading, please wait.",errorCode:wa.AUDIO_CAPTURE_LOADING});const h=function(e,t){const r=t?{...t}:void 0;if(kI(e.meeting.mediaFeatureOptions||"",e.audio.isWebRtcAudioCapable)||!0!==(null==r?void 0:r.backgroundNoiseSuppression)||(console.warn("Background noise suppression requires SharedArrayBuffer and is only supported on desktop browser"),Object.assign(r,{backgroundNoiseSuppression:void 0})),void 0!==(null==r?void 0:r.originalSound)){r.backgroundNoiseSuppression&&r.originalSound&&(console.warn("Enabling original sound will disable background noise suppression."),Object.assign(r,{backgroundNoiseSuppression:!1}));const{originalSound:e}=r;"object"==typeof e&&e.stereo&&!UI()&&(console.warn("Cannot enable stereo audio on current platform due to the browser limitation"),Object.assign(e,{stereo:!1}))}return VI()||!0!==(null==r?void 0:r.syncButtonsOnHeadset)||(console.warn("Sync buttons on headset is not supported on the current platform"),Object.assign(r,{syncButtonsOnHeadset:void 0})),null!=r&&r.mediaFile&&!ju.isSupportMediaPlaybackAsAudioInput()&&(console.warn("Cannot use media file as audio input due to the browser limitation"),Object.assign(r,{mediaFile:void 0})),r}(s,t);o(pI(null!=h?h:{}));const{speakerOnly:m,autoStartAudioInSafari:g}=h||{};if(!!c!=!!m&&o(nf({userId:s.meeting.userId,key:"isSpeakerOnly",value:!!m})),!a)return Promise.reject({type:Ke,reason:"Please call `startAudio` method after the `join` has been resolved",errorCode:wa.STREAM_SESSION_JOIN_REQUIRED});{const t=lu(a.userRole)&&!e||m,{encodeInitStatus:u,decodeInitStatus:c}=BI(s,a,m);if(PI()&&("success"!==c||"success"!==u))return Promise.reject({type:Ke,reason:"It is required to wait for the audio encoding and decoding to be ready before calling `startAudio` method",errorCode:wa.AUDIO_ENCODING_REQUIRED});o(Y_(!0)),Nd("audio",u,c).subscribe((([s,u])=>{if(s&&u){let s=d||(PI()||C.isIOSMobile)&&!g?Promise.resolve():function(){const e=URL.createObjectURL(W),t=new Audio(e);t.muted=!1;const r=Ed((()=>Promise.reject()),3e3),o=C.isIOSMobile?new Promise(((e,r)=>{var o;t.addEventListener("canplaythrough",(()=>{t.play().then((()=>{e(!0)})).catch((e=>{r(e)}))})),null===(o=t.load)||void 0===o||o.call(t)})):t.play();return Promise.race([o,r]).finally((()=>{URL.revokeObjectURL(e)}))}();void 0===s&&(s=Promise.resolve()),s.then((()=>Pd("audio",r()))).then((()=>{const s=r();jI(n,s),DI(i,s,!t),lu(a.userRole)&&e&&o(Z_(!0)),o(J_(!0))})).catch((()=>{o(J_(!1)),o(Y_(!1))}))}else o(Y_(!1))}))}return"failed"===p||"failed"===l?(o(Y_(!1)),Promise.reject({type:Je,reason:"audio encode or decode error",errorCode:wa.INTERNAL_ERROR})):new Promise(((e,t)=>{FI().subscribe({next:()=>{o(Y_(!1)),e("")},error:e=>{ju.getInstance().leaveComputerAudio();const i=Tu(r());(null==i?void 0:i.audio)!==ye.Phone&&(o(II(H.MicrophoneError)),n.joinOrLeaveVoip(!1)),o(Y_(!1)),t(e)}})}))}})(this[n],e)}stopAudio(){return(async e=>{const{store:{getState:t,dispatch:r},mediaAgent:o,rwgAgent:n}=e,i=t(),{audio:{isComputerAudioLoading:s,isShareAudioEnabled:a,isSharingAudio:u,isUsingMediaPlayback:d,customizeAudioOption:{speakerOnly:c}},meeting:{mediaFeatureOptions:l}}=i,p=Tu(i);if(s)return Promise.reject({type:Ke,reason:"Computer audio has not finished joining, please wait.",errorCode:wa.AUDIO_CAPTURE_LOADING});if(a){if(u&&!ju.isSupportOpenMicWhenShareAudio(l||""))return Promise.reject({type:Ke,reason:"Cannot stop audio during sharing with audio",errorCode:wa.AUDIO_SHARE_AUDIO_CONFLICT});r(rI(void 0)),r(X_(void 0))}return(null==p?void 0:p.audio)===ye.Computer?(r(II(H.Active)),await o.leaveComputerAudio(),n.joinOrLeaveVoip(!1),c&&r(nf({userId:i.meeting.userId,key:"isSpeakerOnly",value:void 0})),d&&pm.getInstance().stopAudioElement(),r($_(0)),qa(Ei)):Promise.resolve("")})(this[n])}muteAudio(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n,mediaAgent:i}=e,s=r(),a=Tu(s),{participants:{allowTalkAttendeesList:u,attendeesList:d},meeting:{mediaFeatureOptions:c}}=s;if(null==t||t===(null==a?void 0:a.userId))return""===(null==a?void 0:a.audio)||null===(null==a?void 0:a.audio)?Promise.reject({type:Ke,reason:"no audio joined",errorCode:wa.AUDIO_NOT_STARTED}):!0===(null==a?void 0:a.muted)?Promise.resolve(""):(o(yI(V.Active)),n.mute(a.userId,!0),i.muteAudio(),s.audio.isShareAudioEnabled&&!ju.isSupportOpenMicWhenShareAudio(c||"")&&o(X_(!0)),qa(_i).then((()=>"")));if(Ru(s)){const e=u.concat(d).find((e=>e.userId===t));return e?""===e.audio||null===e?Promise.reject({type:Ke,reason:"no audio joined",errorCode:wa.AUDIO_NOT_STARTED}):!1===e.muted?(n.mute(t,!0),qa({event:Ai,operations:[uo((e=>e.id===t&&void 0!==e.muted)),mo(1)]},(e=>e.id===t&&1==e.muted))):Promise.resolve(""):Promise.reject({type:Xe,reason:"no matching user",errorCode:wa.STREAM_MISMATCH_USER})}return Promise.reject({type:Ye,errorCode:wa.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})})(this[n],e)}unmuteAudio(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n,mediaAgent:i}=e,s=r(),a=Tu(s),{audio:{isAllowToTalk:u,isAllowToTalkAttendeeConnected:d},meeting:{mediaFeatureOptions:c},participants:{allowTalkAttendeesList:l,attendeesList:p}}=s;if(void 0===t||t===(null==a?void 0:a.userId)){if(""===(null==a?void 0:a.audio)||null===(null==a?void 0:a.audio))return Promise.reject({type:Ke,reason:"no audio joined",errorCode:wa.AUDIO_NOT_STARTED});if(!1===(null==a?void 0:a.muted))return Promise.resolve("");if(s.audio.isShareAudioEnabled&&!ju.isSupportOpenMicWhenShareAudio(c||"")){if(s.audio.isSharingAudio)return Promise.reject({type:Ke,reason:"Cannot unmute audio during sharing with audio",errorCode:wa.AUDIO_SHARE_AUDIO_CONFLICT});o(X_(!1))}return s.audio.bCanUnmute||null!=a&&a.isHost||null!=a&&a.bCoHost?(lu(a.userRole)&&(u?d||(await i.leaveComputerAudio(),await DI(i,s,!0),o(Z_(!0))):Promise.reject({type:Ke,reason:"Webinar attendee cannot unmute self audio.",errorCode:wa.AUDIO_ATTENDEE_NOT_ALLOWED})),o(EI(B.Active)),n.mute(a.userId,!1),i.unmuteAudio(),qa(Ii).then((()=>""))):Promise.reject({type:Ye,reason:"host not allow unmute themselves",errorCode:wa.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})}if(Ru(s)){const e=l.concat(p).find((e=>e.userId===t));return e?""===e.audio||null===e?Promise.reject({type:Ke,reason:"no audio joined",errorCode:wa.AUDIO_NOT_STARTED}):(!0===e.muted&&n.mute(t,!1),Promise.resolve("")):Promise.reject({type:Xe,reason:"no matching user",errorCode:wa.STREAM_MISMATCH_USER})}return Promise.reject({type:Ye,errorCode:wa.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})})(this[n],e)}dialOut(e,t,r,o){return((e,t,r,o,n)=>{const{store:{getState:i,dispatch:s},rwgAgent:a}=e,u=i(),{meeting:{callOutCountry:d,isSupportCallOut:c}}=u;if(c&&Array.isArray(d)&&d.findIndex((e=>e.code===t))>-1){const{seq:e}=a.audioDialout(t+r,o,!(null==n||!n.callMe),!(null==n||!n.pressingOne),!(null==n||!n.greeting));return s(V_({sequence:e,phoneNumber:t+r})),za(zi.JoinAudioByCallMe)}return Promise.reject({type:Xe,reason:"no matching country code",errorCode:wa.PSTN_MISMATCH_COUNTRY_CODE})})(this[n],e,t,r,o)}cancelDialOut(e,t,r){return((e,t,r,o)=>{const{rwgAgent:n}=e;return n.audioCancelDialout(t+r,!(null==o||!o.callMe)),za(zi.cancelDialOut)})(this[n],e,t,r)}hangup(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o}=e,n=t(),i=Tu(n);return(null==i?void 0:i.audio)===ye.Phone&&null!==i.userId?(o.audioDrop(i.userId),i.muted||r(yI(V.Inherited)),za(zi.hangup)):Promise.reject({type:Ke,reason:"not joined audio by phone",errorCode:wa.PSTN_NOT_CONNECTED})})(this[n])}switchMicrophone(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{audio:{activeMicrophone:s,mediaPlaybackFile:a,isUsingMediaPlayback:u}}=i,{microphones:d}=await Nr(Ld()),c=d.find((e=>e.deviceId===t));if("default"===t||"string"!=typeof t||c){const e=Tu(i);if((null==e?void 0:e.audio)===ye.Computer){let r=!1;if("string"==typeof t)(t!==s||u)&&(n.changeMicrophone(t,null==c?void 0:c.label,!(null==e||!e.muted)),o(gI(void 0)),pm.getInstance().stopAudioElement(),r=!0);else if(t&&(!u||(null==a?void 0:a.url)!==t.url)){const i=pm.getInstance();i.setAudioElement(t).then((()=>{void 0!==t.playback&&(n.enablePlayAudioFileLocally(!!t.playback),i.audioElement.dataset.playback=t.playback?"1":"0"),n.changeMicrophone(i.audioElement,void 0,!(null==e||!e.muted)),o(gI(t))})),r=!0}if(r)return wr(FI()).then((()=>""))}else"string"==typeof t&&o(q_(t));return Promise.resolve("")}return Promise.reject({type:Pi,errorCode:wa.STREAM_MISMATCH_DEVICE})})(this[n],e)}switchSpeaker(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{audio:{activeSpeaker:i}}=r(),{speakers:s}=await Nr(Ld());if("default"!==t&&-1==s.findIndex((e=>e.deviceId===t)))return Promise.reject({type:Pi,errorCode:wa.STREAM_MISMATCH_DEVICE});var a;if((null===(a=Tu(r()))||void 0===a?void 0:a.audio)===ye.Computer){if(t!==i)return n.changeSpeaker(t),qa(Bi,(e=>e))}else o(K_(t));return Promise.resolve("")})(this[n],e)}muteShareAudio(e){return((e,t)=>{const{mediaAgent:r,rwgAgent:o,store:{getState:n,dispatch:i}}=e,s=n(),{meeting:{userId:a}}=s;if(t&&t!==a)return _N(t,!0,e.store,r);{const{audio:{isSharingAudio:e,isShareAudioEnabled:t,isShareAudioMuted:n}}=s;if(!t)return Promise.reject({type:Ke,reason:"Cannot mute sharing audio when sharing audio is not enable",errorCode:wa.AUDIO_SHARE_AUDIO_CONFLICT});if(n)return Promise.resolve("");{o.muteShareAudio(!0);let t=Promise.resolve();var u;return e&&(t=null===(u=r.leaveSharingAudio(!0))||void 0===u?void 0:u.then((()=>wI(o,s).then((e=>{e.forEach((e=>i(e)))}))))),OI(r,a,!0,s),Promise.all([qa({event:Do,operations:[uo((e=>void 0!==e.bShareAudioOn)),mo(1)]},(e=>!1===e.bShareAudioOn)),t]).then((()=>(i(nI(!0)),e&&(i(iI(!1)),$a(ki,{state:"off"})),"")))}}})(this[n],e)}unmuteShareAudio(e){return((e,t)=>{const{mediaAgent:r,rwgAgent:o,store:{getState:n,dispatch:i}}=e,s=n(),{meeting:{userId:a}}=s;if(t&&t!==a)return _N(t,!1,e.store,r);{const{audio:{isSharingAudio:e,isShareAudioEnabled:t,isShareAudioMuted:n},share:{status:u}}=s;if(!t)return Promise.reject({type:Ke,reason:"Cannot unmute sharing audio when sharing audio is not enable",errorCode:wa.AUDIO_NOT_STARTED});if(!1===n)return Promise.resolve("");{o.muteShareAudio(!1);let t=Promise.resolve();return!1===e&&u===z.Sharing&&(t=MI(r,o,s).then((e=>{e.forEach((e=>i(e)))}))),OI(r,a,!1,s),Promise.all([qa({event:Do,operations:[uo((e=>void 0!==e.bShareAudioOn)),mo(1)]},(e=>!0===e.bShareAudioOn)),t]).then((()=>(i(nI(!1)),!1===e&&u===z.Sharing&&(i(iI(!0)),$a(ki,{state:"on"})),"")))}}})(this[n],e)}subscribeAudioStatisticData(e){return(async(e,t)=>{const{mediaAgent:r,store:{getState:o}}=e,n=o(),i=Tu(n),s=!t||t.decode,a=!t||t.encode;if(!i)return Promise.reject({type:Ke,reason:"Call this function after the 'join' method resolved.",errorCode:wa.STREAM_SESSION_JOIN_REQUIRED});{const{encodeInitStatus:e,decodeInitStatus:t}=BI(n,i);Nd("audio",e,t).subscribe((([e,t])=>{e&&t&&(s&&r.subscribeToQos([Hu.AudioDecode],oe),a&&r.subscribeToQos([Hu.AudioEncode],oe))}))}return""})(this[n],e)}unsubscribeAudioStatisticData(e){return(async(e,t)=>{const{mediaAgent:r,store:{dispatch:o}}=e,n=!t||t.decode,i=!t||t.encode;return n&&(r.unsubscribeFromQos([Hu.AudioDecode]),o(sI(ce))),i&&(r.unsubscribeFromQos([Hu.AudioEncode]),o(aI(ce))),null})(this[n],e)}enableBackgroundNoiseSuppression(e){return((e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,{audio:{isBackgroundNoiseSuppression:i,originalSound:s,isWebRtcAudioCapable:a},meeting:{mediaFeatureOptions:u}}=o();let d=t;return d===!!i||(d&&!kI(u||"",a)?(console.warn("Background noise suppression requires SharedArrayBuffer and is only supported on desktop browser"),d=!1):(d&&s&&(console.warn("Enabling noise suppression will disable original sound."),n(_I(!1))),n(hI(d)),r.changeAudioProfile(RI(o())))),Promise.resolve("")})(this[n],e)}enableSyncButtonsOnHeadset(e){return((e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,i=o(),{audio:{isHIDEnabled:s,microphoneDevicesList:a,activeMicrophone:u}}=i;if(t===!!s)return Promise.resolve("");{const e=Tu(i);var d;return e?(t&&!VI()?console.warn("Sync buttons on headset is not supported on the current platform"):(r.enableSyncButtonsOnHeadset(t,null===(d=a.find((e=>e.deviceId===u)))||void 0===d?void 0:d.label,e.muted),n(mI(t))),Promise.resolve("")):Promise.reject({type:Ke,reason:"Please call `enableSyncButtonsOnHeadset` method after the `join` has been resolved",errorCode:wa.STREAM_SESSION_JOIN_REQUIRED})}})(this[n],e)}enableOriginalSound(e){return((e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,{audio:{isBackgroundNoiseSuppression:i,originalSound:s}}=o(),a=t;return a===s||"object"==typeof t&&fd(t,s)||("object"!=typeof a||!0!==(null==a?void 0:a.stereo)||UI()||(console.warn("Cannot enable stereo audio on current platform due to the browser limitation"),a.stereo=!1),i&&a&&(console.warn("Enabling original sound will disable background noise suppression."),n(hI(!1))),n(_I(a)),r.changeAudioProfile(RI(o()))),Promise.resolve("")})(this[n],e)}callCRCDevice(e,t){return((e,t,r)=>{const{rwgAgent:o,store:{dispatch:n,getState:i}}=e,{seq:s}=o.inviteCRCDevice(t,r);return n(bI({sequence:s,ip:t,protocol:r})),za(zi.crcCallOut).then((()=>{var e;const{audio:{crcDevice:o}}=i();return null===(e=o.find((e=>e.ip===t&&e.protocol===r&&e.sequence===s)))||void 0===e?void 0:e.uuid}))})(this[n],e,t)}cancelCallCRCDevice(e,t){return((e,t,r)=>{const{rwgAgent:o,store:{getState:n}}=e,{audio:{crcDevice:i}}=n(),s=i.find((e=>e.ip===t&&e.protocol===r));return s&&s.returnCode===we.Ringing?(o.cancelInviteCRCDevice(s.transId),Promise.resolve("")):Promise.reject({type:Ke,reason:"Cannot cancel call out ",errorCode:wa.CRC_NOT_CONNECTED})})(this[n],e,t)}muteAllAudio(){return(e=>{const{rwgAgent:t}=e;return t.audioMuteAll(!0),Kd("bMutedAll",!0)})(this[n])}unmuteAllAudio(){return(e=>{const{rwgAgent:t}=e;return t.audioMuteAll(!1),Kd("bMutedAll",!1)})(this[n])}muteAudioUponEntry(e=!0){return((e,t=!0)=>{const{store:{getState:r},rwgAgent:o}=e,{audio:{bMutedUponEntry:n}}=r();return n===t?Promise.resolve(""):(o.setMuteOnEntry(t),Kd("bMutedUponEntry",t))})(this[n],e)}allowUnmuteAudioThemselves(e=!0){return((e,t=!0)=>{const{store:{getState:r},rwgAgent:o}=e,{audio:{bCanUnmute:n}}=r();return n===t?Promise.resolve(""):(o.allowUnmuteAudio(t),Kd("bCanUnmute",t))})(this[n],e)}getMicList(){return(({store:{getState:e}})=>{const t=e();return t.audio?[...t.audio.microphoneDevicesList]:[]})(this[n])}getSpeakerList(){return(({store:{getState:e}})=>{const t=e();return t.audio?[...t.audio.speakerDevicesList]:[]})(this[n])}getAudioState(e){return(({store:{getState:e}},t)=>{const r=e(),{meeting:{isWebinar:o}}=r;let n=null;return null==t?n=Tu(r):(n=r.participants.attendeesList.find((e=>e.userId===t)),o&&!n&&(n=r.participants.xmppAttendeeList.find((e=>e.userId===t)))),n?n.audio:null})(this[n],e)}isAudioMuted(e){return(({store:{getState:e}},t)=>{const r=e(),{meeting:{isWebinar:o}}=r;let n=null;return void 0===t?n=Tu(r):(n=r.participants.attendeesList.find((e=>e.userId===t)),o&&!n&&(n=r.participants.xmppAttendeeList.find((e=>e.userId===t)))),!!n&&!!n.muted})(this[n],e)}getActiveMicrophone(){return(({store:{getState:e}})=>{const t=e();return t.audio?t.audio.activeMicrophone:null})(this[n])}getActiveSpeaker(){return(({store:{getState:e}})=>{const t=e();return t.audio?t.audio.activeSpeaker:null})(this[n])}isSupportCallOut(){return(({store:{getState:e}})=>{const{meeting:{isSupportCallOut:t,callOutCountry:r}}=e();return t&&Array.isArray(r)&&(null==r?void 0:r.length)>0})(this[n])}getDialOutStatus(){return(({store:{getState:e}})=>{const{audio:t}=e();return null==t?void 0:t.dialout[t.dialout.length-1].returnCode})(this[n])}getDialOutCountries(){return(({store:{getState:e}})=>{const{meeting:{callOutCountry:t}}=e();return Array.isArray(t)?t:[]})(this[n])}getShareAudioStatus(){return(({store:{getState:e}})=>{const{audio:{isShareAudioEnabled:t,isShareAudioMuted:r,isSharingAudio:o}}=e();return{isShareAudioEnabled:t,isShareAudioMuted:r,isSharingAudio:o}})(this[n])}isOthersShareAudioMutedLocally(e){return(({store:{getState:e}},t)=>{var r;const{audio:{localShareAudioUserMutedList:o}}=e();return null===(r=o.find((e=>e.userId===t)))||void 0===r?void 0:r.muted})(this[n],e)}getAudioStatisticData(){return(({store:{getState:e}})=>{const{audio:{statistic:t}}=e();return{...t}})(this[n])}getDialInInfo(){return(({store:{getState:e}})=>{const{meeting:{meetingNumber:t,tollNumbers:r,participantID:o,h323Password:n}}=e();return void 0===r?null:{meetingId:t,participantId:o,password:n||"",tollNumbers:r.map((e=>({...e})))}})(this[n])}isSupportMicrophoneAndShareAudioSimultaneously(){return function(e){const{store:{getState:t}}=e,r=t(),{meeting:{mediaFeatureOptions:o}}=r;return ju.isSupportOpenMicWhenShareAudio(o||"")}(this[n])}getAudioMediaPlaybackController(){return(({store:{getState:e},mediaAgent:t})=>{const r=e(),{audio:{isUsingMediaPlayback:o}}=r;if(o){const{audioElement:e}=pm.getInstance();return Jd(e,"audio",r,t)}return null})(this[n])}isAllowToUnmute(){return(({store:{getState:e}})=>{const t=e();return!!t.audio&&!!t.audio.bCanUnmute})(this[n])}getSessionSIPAddress(){return(e=>{const{store:{getState:t}}=e,{meeting:{sipDomain:r,h323Password:o,meetingNumber:n}}=t();return r?`${n}.${null!=o?o:""}@${r}`:null})(this[n])}startVideo(e){return((e,t)=>{var r;const{store:{getState:o,dispatch:n},mediaAgent:i}=e,s=o(),{media:{videoDecodeStatus:a,videoEncodeStatus:u,enforceVirtualBackground:c},video:{isCaptureCameraLoading:l,isCurrentUserStartedVideo:p,isVideoMuted:h,backgroundMode:m},meeting:{isUseWBVideo:g}}=s,S=t?{...t}:void 0;if(p)return Promise.reject({type:Ke,reason:"Video is started",errorCode:wa.VIDEO_MISMATCH_STATE});if(l)return Promise.reject({type:Ke,reason:"Camera is starting,please wait.",errorCode:wa.VIDEO_CAPTURE_LOADING});if(h&&!Ru(s))return Promise.reject({type:Ke,reason:"Video is muted by the host",errorCode:wa.VIDEO_MUTED_BY_HOST});if(Am(g))if(d(null==S?void 0:S.videoElement))console.warn('The "videoElement" option will be removed in version 2.x. Please use the "attachVideo" or "renderVideo" method to render the self-view.');else{console.warn('Rendering self-view on Chromium browser, Android browser without SharedArrayBuffer or iOS browser requires video tag, Please use "attachVideo" or pass a video element instead of a canvas element in the "renderVideo" method');let e=document.body.querySelector(`#${de}`);if(!e){e=document.createElement("video");const t=C.isSafari||C.isIOSMobile?"position:fixed;top:-10000px;left:-10000px":"display:none";e.setAttribute("style",t),e.muted=!0,e.playsInline=!0,e.autoplay=!0,e.id=de,document.body.appendChild(e)}S&&Object.assign(S,{videoElement:e})}return!Fd(c,g)&&null!=S&&S.virtualBackground?Promise.reject({type:Xe,reason:"Virtual background only compatible with Chrome and Edge with SharedArrayBuffer enabled.",errorCode:wa.VIDEO_VB_UNSUPPORTED}):m===fe.VideoProcessor&&null!=S&&S.virtualBackground&&null!=S&&null!==(r=S.virtualBackground)&&void 0!==r&&r.imageUrl?Promise.reject({type:Ke,reason:"Cannot start capture video with virtual background when video processor is enabled",errorCode:wa.VIDEO_VB_PROCESSOR_CONFLICT}):(n(ol(!0)),Nd("video",u,a).subscribe((([e])=>{if(e){const e=o(),{video:{activeCamera:t,isSupportHDVideo:r,virtualBackground:{imageSrc:s},mask:{imageSrc:a},isMirrored:u,hardwareAcceleration:d}}=e,{cameraId:c=t,captureWidth:l=0,captureHeight:p=0,mirrored:h,hd:m,fullHd:g,virtualBackground:v,mask:f}=S||{};Cm(null!=h?h:u,i,e),(m||g)&&(r&&!1!==d.encode&&ju.isCompatibleHardwareForEncode()&&ju.isSupportVideoEncodeHardwareAcceleration().then((e=>{e&&(i.enableHardwareAccelerationForVideoEncode(!0),n(El({encode:e})))})),r||console.warn("Cannot capture HD video due to either account restriction and/or hardware limitation"));const y=v||void 0===v&&!!s&&void 0===f,E=f||void 0===f&&!!a;let _=Promise.resolve({});if(y){const t=v||{imageUrl:void 0,cropped:void 0};_=Pm({...t,captureWidth:l,captureHeight:p,cameraId:c,hd:m},i,e).then((()=>t))}else if(E){const t=f||{imageUrl:void 0,cropped:void 0,clip:void 0,rootWidth:void 0,rootHeight:void 0};t.rootWidth||Object.assign(t,{rootWidth:1280}),t.rootHeight||Object.assign(t,{rootHeight:720}),_=Lm({...t,captureWidth:l,captureHeight:p,cameraId:c,hd:m},i,e).then((()=>t))}null!=S&&S.mediaFile&&!ju.isSupportMediaPlaybackAsVideoInput()&&(console.warn("Cannot use media file as video input due to the browser limitation."),Object.assign(S,{mediaFile:void 0})),_.then((e=>Pd("video",o()).then((()=>e)))).then((t=>{fm(i,e,S).forEach((e=>{n(e)})),y?n(vl(t)):E&&n(Ll(t))})).catch((e=>{n(ol(!1)),$a(jn,{...null!=e?e:{}})}))}else n(ol(!1))})),za(hi.startCaptureVideo).then((()=>{n(nl(!1)),n(el(!1))})).catch((e=>Promise.reject(bm(e)))).finally((()=>{n(ol(!1))})))})(this[n],e)}stopVideo(){return(e=>{const{store:{getState:t},mediaAgent:r}=e,{video:{isCaptureCameraLoading:o,isCurrentUserStartedVideo:n,isUsingMediaPlayback:i}}=t();return o?Promise.reject({type:Ke,reason:"Camera is starting,please wait.",errorCode:wa.VIDEO_CAPTURE_LOADING}):n?(r.stopCaptureVideo(),i&&pm.getInstance().stopVideoElement(),qa(xn,(e=>!0!==(null==e?void 0:e.failed)))):Promise.reject({type:Ke,reason:"camera is closed",errorCode:wa.VIDEO_MISMATCH_STATE})})(this[n])}switchCamera(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{video:{cameraDevicesList:s,isCurrentUserStartedVideo:a,virtualBackground:u,mask:d,mediaPlaybackFile:c,isUsingMediaPlayback:l,customizedVideoOption:p,activeCamera:h}}=i;if("string"==typeof t&&!Sm(t,s))return Promise.reject({type:Xe,reason:"Cannot find cameraDeviceId in camera devices list.",errorCode:wa.STREAM_MISMATCH_DEVICE});const m=h===t;if(a||null!=u&&u.isVBConfigured||d.isMaskConfigured){if("string"==typeof t){const{captureWidth:e,captureHeight:r}=gm(p);n.changeCamera(t,re.includes(t),{width:e,height:r},m),o(Vl(void 0)),pm.getInstance().stopVideoElement()}else if(t&&(!l||(null==c?void 0:c.url)!==t.url)){const e=pm.getInstance();e.setVideoElement(t).then((()=>{n.changeCamera(e.videoElement),o(Vl(t))}))}return null!=p&&p.customVideoConstraints&&!m&&o(Yl()),za(hi.switchCameraVideo).then((()=>{o(nl(!1)),o(el(!1))})).catch((e=>(n.stopCaptureVideo(),Promise.reject(bm(e)))))}return"string"==typeof t&&o(Yc(t)),Promise.resolve()})(this[n],e)}createProcessor(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{media:{videoEncodeStatus:s,audioEncodeStatus:a,sharingEncodeStatus:u},processor:{processorCreatedList:d},meeting:{mediaFeatureOptions:c}}=i,{type:l,name:p}=t;if(!(l in ON)||!ON[l].detectAction(c||""))throw{type:Ke,reason:`Your browser does not support ${l} processor.`,errorCode:ON[l].errorCode.unsupported};if(d.some((({name:e,type:t})=>e===p&&t===l)))throw{type:Xe,reason:"You have already created this Processor",errorCode:ON[l].errorCode.duplicateCreate};const h={video:s,audio:a,share:u}[l],m=await Nr(Nd(l,h,"success").pipe(Ao((([e])=>{if(e)return co(br(n.addProcessor(t)).pipe(Ur((e=>({result:e})))),ro(1e4).pipe(Ur((()=>{throw{type:Qe,errorCode:wa.OPERATION_TIMEOUT}}))));throw{type:Je,reason:`${r=l,Nh(Sh(r).toLowerCase())} encode status is failed`,errorCode:wa.INTERNAL_ERROR};var r})),lo((e=>{if(null!=e&&e.type)throw e;throw{type:Je,reason:"An error occurred while creating a Processor.",errorCode:wa.INTERNAL_ERROR}}))));if(!m.result)throw{type:Je,reason:"An error occurred while creating a Processor.",errorCode:wa.INTERNAL_ERROR};return o(hT(t)),m.result})(this[n],e)}addProcessor(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{processor:{processorCreatedList:s,processorInstanceList:a},video:{backgroundMode:u,mask:d,virtualBackground:c}}=i,{name:l,type:p}=t,h=["video","share"].includes(p);if(!s.some((({name:e,type:t})=>e===l&&t===p)))throw{type:Xe,reason:"Processor not found.",errorCode:ON[p].errorCode.mismatchProcessor};if(a.some((({type:e,name:t})=>e===p&&(h||l===t))))throw{type:Ke,reason:h?`Currently we only support using one ${p} processor at a time.`:"Cannot add this processor again.",errorCode:ON[p].errorCode.limitExceed};if("video"===p){if((u===fe.VirtualBackground||u===fe.Mask)&&(d.imageSrc||c.imageSrc))throw{type:Ke,reason:"Cannot use video processor when virtual background or mask is enabled",errorCode:wa.VIDEO_VB_PROCESSOR_CONFLICT};o(Pl(fe.VideoProcessor))}return await n.startProcessor(t),o(mT({name:l,type:p})),""})(this[n],e)}removeProcessor(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{processor:{processorInstanceList:s}}=i,{name:a,type:u}=t;if(!s.some((({name:e,type:t})=>e===a&&t===u)))throw{type:Xe,reason:"Processor not found.",errorCode:ON[u].errorCode.mismatchProcessor};return await n.stopProcessor(t),o(gT({name:a,type:u})),"video"===u&&o(Pl(fe.Null)),""})(this[n],e)}renderVideo(e,t,r,o,i,s,a,u,d){return RN(this[n],e,t,r,o,i,s,a,u,d)}stopRenderVideo(e,t,r,o,i=!1,s){return((e,t,r,o,n,i=!1,s)=>{const{store:{getState:a,dispatch:u},mediaAgent:c}=e,l=a(),{video:{subscribedVideoList:p,renderedVideoList:h},meeting:{userId:m}}=l;if(p.includes(r)){const e=o||se;if(Am()&&r===m&&d(t))return t.pause(),u(ul(r)),u(Kl(t.id)),Promise.resolve("");if(h.find((o=>o.userId===r&&o.key===e&&o.canvasId===t.id))&&(c.stopRenderVideo(t.id,r,e,mm(n),i),1==h.filter((e=>e.userId===r)).length&&(r!==m&&c.unsubscribeVideo(r),u(ul(r))),u(pl({userId:r,key:e,canvasId:t.id}))),s&&m!==s){const{video:{subscribedVideoList:e,prefetchedVideo:t}}=a();CN(l).find((e=>e.userId===s))&&!e.includes(s)&&(null==t?void 0:t.userId)!==s&&u(Bl({userId:s,lastCopy:t}))}}return Promise.resolve("")})(this[n],e,t,r,o,i,s)}updateVideoCanvasDimension(e,t,r){return((e,t,r,o)=>{const{mediaAgent:n}=e;return r>=0&&o>=0&&n.updateRenderedVideoCanvasDimension(t,r,o),Promise.resolve("")})(this[n],e,t,r)}adjustRenderedVideoPosition(e,t,r,o,i,s,a){return((e,t,r,o,n,i,s,a)=>{const{store:{getState:u,dispatch:c},mediaAgent:l}=e,{video:{subscribedVideoList:p}}=u();if(p.includes(r)){if(d(t))return Promise.resolve("");const e=a||se;l.adjustRenderedVideoPosition(t.id,r,e,i,s,o,n,mm("#000")),c(ll({userId:r,key:e,canvasId:t.id,aspectRatio:n?o/n:0}))}else console.warn("Cannot adjust the size or position of the video as the video has not been rendered yet.");return Promise.resolve("")})(this[n],e,t,r,o,i,s,a)}clearVideoCanvas(e,t){return((e,t,r)=>{const{mediaAgent:o}=e;return o.clearVideoCanvas(t.id,mm(r)),Promise.resolve("")})(this[n],e,t)}mirrorVideo(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{video:{isCurrentUserStartedVideo:s,virtualBackground:a,isMirrored:u}}=i;return u===t||((s||null!=a&&a.isVBConfigured)&&Cm(t,n,i),o(zl(t))),Promise.resolve("")})(this[n],e)}enableHardwareAcceleration(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{video:{isSupportHDVideo:i}}=r(),s=[];if("boolean"==typeof t||void 0!==t.decode){const e="boolean"==typeof t?t:!!t.decode;e?s.push(ju.isSupportVideoDecodeHardwareAcceleration().then((e=>(e&&n.enableHardwareAccelerationForVideoDecode(e),o(El({decode:e})),e)))):(n.enableHardwareAccelerationForVideoDecode(e),o(El({decode:e})),s.push(!0))}if("boolean"==typeof t||void 0!==t.encode){const e="boolean"==typeof t?t:!!t.encode;i?e?ju.isCompatibleHardwareForEncode()?s.push(ju.isSupportVideoEncodeHardwareAcceleration().then((e=>(e&&n.enableHardwareAccelerationForVideoEncode(e),o(El({encode:e})),e)))):(console.warn("Can not turn on hardware acceleration with your graphic card due to the technical limitation"),s.push(!1)):(n.enableHardwareAccelerationForVideoEncode(!1),o(El({encode:!1})),s.push(!0)):"boolean"!=typeof t&&null!=t&&t.encode&&(console.warn("Can not use the hardware acceleration for video encoding due to the account restriction"),s.push(!1))}return Promise.all(s).then((e=>e.every((e=>!!e))))})(this[n],e)}subscribeVideoStatisticData(e){return(async(e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,{media:{videoDecodeStatus:i,videoEncodeStatus:s},video:{subscriptionStatus:a}}=o(),u=!t||t.decode,d=!t||t.encode;return Nd("video",s,i).subscribe((([e,o])=>{const i={};u&&o&&!a.decode&&(r.subscribeToQos([Hu.VideoDecode],oe),Object.assign(i,{decode:!0})),d&&e&&!a.encode&&(r.subscribeToQos([Hu.VideoEncode],oe),Object.assign(i,{encode:!0})),null!=t&&t.detailed&&o&&!a.detailed&&(r.enableVideoObserver(!0),Object.assign(i,{detailed:!0})),n(Hl(i))})),null})(this[n],e)}unsubscribeVideoStatisticData(e){return(async(e,t)=>{const{mediaAgent:r,store:{dispatch:o}}=e,n=!t||t.decode,i=!t||t.encode,s={};return n&&(r.unsubscribeFromQos([Hu.VideoDecode]),o(fl(le)),Object.assign(s,{decode:!1})),i&&(r.unsubscribeFromQos([Hu.VideoEncode]),o(yl(le)),Object.assign(s,{encode:!1})),null!=t&&t.detailed&&(r.enableVideoObserver(!1),Object.assign(s,{detailed:!1})),o(Hl(s)),null})(this[n],e)}previewVirtualBackground(e,t,r,o){return((e,t,r,o,n)=>{const{store:{getState:i,dispatch:s},mediaAgent:a}=e,u=i();return Pm({imageUrl:r,cropped:o,cameraId:n},a,u,t).then((e=>("object"==typeof e&&null!=e&&e.type&&s(e),s(vl({imageUrl:r,cropped:o})),!0))).catch((e=>Promise.reject({type:Ke,...null!=e?e:{}})))})(this[n],e,t,r,o)}updateVirtualBackgroundImage(e,t){return((e,t,r)=>{const{store:{getState:o,dispatch:n},mediaAgent:i}=e,s=o(),{video:{virtualBackground:{imageSrc:a,cropped:u},backgroundMode:d}}=s;return t===a&&r===u?Promise.resolve(!0):d===fe.Mask||d===fe.VideoProcessor?Promise.reject({type:Ke,reason:`Cannot update virtual background in the ${d===fe.Mask?"mask":"video processor"} mode`,errorCode:wa.VIDEO_VB_PROCESSOR_CONFLICT}):Pm({imageUrl:t,cropped:r},i,s).then((e=>("object"==typeof e&&null!=e&&e.type&&n(e),n(vl({imageUrl:t,cropped:r})),!0))).catch((e=>Promise.reject({type:Ke,...null!=e?e:{}})))})(this[n],e,t)}stopPreviewVirtualBackground(){return(e=>{const{store:{getState:t},mediaAgent:r}=e,{video:{virtualBackground:{isVBConfigured:o}}}=t();return o?(r.stopVirtualBackgroundSetting(),Promise.resolve(!0)):Promise.reject({type:Ke,reason:"Cannot stop preview virtual background before start",errorCode:wa.VIDEO_VB_MISMATCH_STATE})})(this[n])}previewVideoMask(e,t){return((e,t,r)=>{const{store:{getState:o,dispatch:n},mediaAgent:i}=e,s=o();return r.rootWidth&&r.rootHeight||Object.assign(r,{rootWidth:t.width,rootHeight:t.height}),Lm(r,i,s,t).then((e=>("object"==typeof e&&null!=e&&e.type&&n(e),n(Ll(r)),!0))).catch((e=>Promise.reject({type:Ke,...null!=e?e:{}})))})(this[n],e,t)}updateVideoMask(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{video:{mask:s,backgroundMode:a}}=i,{isMaskConfigured:u}=s;if(a===fe.VirtualBackground||a===fe.VideoProcessor)return Promise.reject({type:Ke,reason:`Cannot update mask in the ${a===fe.VirtualBackground?"virtual background":"video processor"} mode`,errorCode:wa.VIDEO_MASK_PROCESSOR_CONFLICT});if(u){const e={...t};return["imageUrl","cropped","clip","rootHeight","rootWidth"].forEach((r=>{void 0===(null==t?void 0:t[r])&&("imageUrl"===r?Object.assign(e,{imageUrl:s.imageSrc}):Object.assign(e,{[`${r}`]:s[r]}))})),Lm(e,n,i).then((t=>("object"==typeof t&&null!=t&&t.type&&o(t),o(Ll(e)),!0))).catch((e=>Promise.reject({type:Ke,...null!=e?e:{}})))}return Promise.reject({type:Ke,reason:"Cannot update mask",errorCode:wa.VIDEO_MASK_IMAGE_INACCESSIBLE})})(this[n],e)}stopPreviewVideoMask(){return(e=>{const{store:{getState:t},mediaAgent:r}=e,{video:{mask:{isMaskConfigured:o}}}=t();return o?(r.stopMaskSetting(),Promise.resolve(!0)):Promise.reject({type:Ke,reason:"Cannot stop preview mask before start",errorCode:wa.VIDEO_MASK_IMAGE_INACCESSIBLE})})(this[n])}requestFarEndCameraControl(e){return((e,t)=>{const{store:{getState:r},rwgAgent:o}=e,n=r(),{meeting:{userId:i},video:{farEndCameraControlStatus:{controlledUserList:s}}}=n;return i===t?Promise.reject({type:Ke,reason:'Using "stream.controlCamera" method to control self camera',errorCode:wa.FAR_END_CAMERA_CONTROL_MISMATCH_STATE}):-1===CN(n).findIndex((e=>e.userId===t))?Promise.reject({type:Xe,reason:"Cannot request control camera with video off",errorCode:wa.FAR_END_CAMERA_CONTROL_MISMATCH_STATE}):-1!==TN(n).findIndex((e=>e.userId===t))?(s.includes(t)||o.sendFarEndCameraControl(pe.Request,t),Promise.resolve("")):Promise.reject({type:Ke,reason:"The far end camera does not support PTZ",errorCode:wa.FAR_END_CAMERA_CONTROL_DEVICE_UNSUPPORTED})})(this[n],e)}approveFarEndCameraControl(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n}=e,{video:{currentCameraControlStatus:{isRequested:i,isInControl:s,controllingUserId:a},ptz:u,activeCamera:d}}=r();if(i){if(s&&(!a||t===a))return Promise.resolve("");n.sendFarEndCameraControl(pe.Approve,t);const e=null==u?void 0:u[d];return void 0!==e&&n.sendCameraAblity({pan:!!e.pan,tilt:!!e.tilt,zoom:!!e.zoom}),o(bl(!1)),o(Cl({isInControl:!0,userId:t})),$a(ri,{isControlled:!0,userId:t}),Promise.resolve("")}return Promise.reject({type:Ke,reason:"Cannot approve before request",errorCode:wa.FAR_END_CAMERA_CONTROL_MISMATCH_STATE})})(this[n],e)}declineFarEndCameraControl(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n}=e,{video:{currentCameraControlStatus:{isInControl:i,isRequested:s}}}=r();return s||i?(n.sendFarEndCameraControl(pe.Decline,t),o(bl(!1)),o(Cl({isInControl:!1,userId:0})),$a(ri,{isControlled:!1}),Promise.resolve("")):Promise.reject({type:Ke,reason:"Cannot decline before request",errorCode:wa.FAR_END_CAMERA_CONTROL_MISMATCH_STATE})})(this[n],e)}giveUpFarEndCameraControl(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n}=e,{video:{farEndCameraControlStatus:{controlledUserList:i}}}=r();return i.includes(t)?(n.sendFarEndCameraControl(pe.GiveUp,t),o(Rl(t)),Promise.resolve("")):Promise.reject({type:Ke,reason:"Cannot give up control befire aquired",errorCode:wa.FAR_END_CAMERA_CONTROL_MISMATCH_STATE})})(this[n],e)}controlCamera(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{video:{isCurrentUserStartedVideo:i,ptz:s,activeCamera:a}}=r();if(i){const{cmd:e,range:r,reset:i}=t,u=s[a];if(u){const t=_m(u)||{},{key:s,range:d}=Em(e,r);if(u[s])return Object.assign(t,{[s]:i?0:ym(u[s].capability,u[s].value,d)}),n.movePTZCamera(t).then((()=>{o(Dl({constraints:t,deviceId:a}))})).catch((e=>Promise.reject({type:Je,reason:e,errorCode:wa.INTERNAL_ERROR})))}return Promise.resolve("")}return Promise.reject({type:Ke,reason:"Cannot control the camera before it's started",errorCode:wa.FAR_END_CAMERA_CONTROL_MISMATCH_STATE})})(this[n],e)}controlFarEndCamera(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n}=e,i=r(),{video:{farEndCameraControlStatus:{controlledUserList:s,isControlling:a}}}=i,{userId:u,cmd:d,range:c}=t;if(a)return Promise.reject({type:Ke,reason:"Cannot send new command while the previous control is not done",errorCode:wa.FAR_END_CAMERA_RATE_LIMIT});if(s.includes(u)){if(d===he.SwitchCamera)return n.sendFarEndCameraControl(pe.SwitchCamera,u,he.SwitchCamera),Promise.resolve("");{const e=TN(i).find((e=>e.userId===u));if(null==e||!e.nFECC)return Promise.reject({type:Ke,reason:"The far end camera does not support PTZ",errorCode:wa.FAR_END_CAMERA_CONTROL_DEVICE_UNSUPPORTED});if(c&&c>0){const e=c/100*1e4;return n.sendFarEndCameraControl(pe.StartControl,u,d),o(wl(!0)),oo(200).pipe(bo(ro(e-100).pipe(mo(1)))).subscribe((()=>{n.sendFarEndCameraControl(pe.ContinueControl,u,d)})),Nr(ro(e).pipe(To((()=>{n.sendFarEndCameraControl(pe.StopControl,u,d),o(wl(!1))})))).then((()=>""))}return Promise.reject({type:Xe,reason:"Range cannot be negative or 0",errorCode:wa.FAR_END_CAMERA_INVALID_RANGE})}}return Promise.reject({type:Ke,reason:"Cannot control before request granted",errorCode:wa.FAR_END_CAMERA_PERMISSION_REQUIRED})})(this[n],e)}attachVideo(e,t,r){return((e,t,r,o)=>{const{store:{getState:n,dispatch:i},mediaAgent:s}=e,a=n(),{meeting:{userId:u,isUseWBVideo:d},media:{enforceMultipleVideos:c,alternativeNameForVideoPlayer:l,disableRenderLimits:p},video:{videoAttachments:h,subscribedVideoList:m}}=a,g=ju.getMaxCountRender(d,!!c,p),S=m.filter((e=>e!==u)).length;if(g>1&&t!==u&&!m.includes(t)&&S>=g)return Promise.reject({type:Ke,reason:`subscribe video counts greater than maximum size (${g})`,errorCode:wa.VIDEO_RENDER_LIMIT_EXCEED});if(-1===CN(a).findIndex((e=>e.userId===t)))return Promise.reject({type:Xe,reason:"user is not send video",errorCode:wa.STREAM_MISMATCH_USER});const{media:{videoDecodeStatus:v}}=a;let f;const y=null!=l?l:"video-player";if(o){var E;const[e,r]=rc(o,y);if(!e)return Promise.reject(r);f=r;const n=Number(null!==(E=f.getAttribute("node-id"))&&void 0!==E?E:"0");if(n!==t&&Am()&&[n,t].includes(u)){var _;const e=document.createElement(y);for(const t of f.attributes)e.setAttribute(t.name,t.value);n&&(f.setAttribute("node-id","0"),i(Wl({userId:n,element:f}))),null===(_=f.parentElement)||void 0===_||_.replaceChild(e,f),f=e}}else f=document.createElement(y);return Nd("video","success",v).subscribe((async([e,o])=>{if(o){const e=h[`${t}`];var n;(null==e?void 0:e.some((e=>uc(e,f))))?f.setAttribute("video-quality",`${r}`):null===(n=f)||void 0===n||n.setAttribute("node-id",`${t}`),i(Fl({userId:t,element:f})),t!==u&&s.subscribeVideo(t,r,!1),m.includes(t)||i(al(t)),i(ll({userId:t,key:se,canvasId:ue,videoQuality:r,aspectRatio:16/9}))}})),Promise.resolve(f)})(this[n],e,t,r)}detachVideo(e,t){return((e,t,r)=>{const{store:{getState:o,dispatch:n},mediaAgent:i}=e,s=o(),{video:{subscribedVideoList:a,videoAttachments:u},meeting:{userId:d},media:{alternativeNameForVideoPlayer:c}}=s;if(a.includes(t)){let e;const s=null!=c?c:"video-player";if(r){const[t,o]=rc(r,s);e=t?o:void 0}const a=u[`${t}`];let p;if(a&&0!==a.length){var l;if(e)a.find((t=>uc(t,e)))?(p=e,p.setAttribute("node-id","0"),n(Wl({userId:t,element:p}))):console.warn(`${r} has not been attached with userID:${t}`);else{const e=sc(a);p=e,e.forEach((e=>{e.setAttribute("node-id","0")})),n(Wl({userId:t,element:e}))}const{video:{videoAttachments:s,renderedVideoList:u}}=o();0===(null===(l=s[`${t}`])||void 0===l?void 0:l.length)&&(0===u.filter((e=>e.userId===t&&e.canvasId!==ue)).length&&(t!==d&&i.unsubscribeVideo(t),n(ul(t))),n(pl({userId:t,key:se,canvasId:ue})))}else console.warn(`UserId:${t} has not been attached.`);return Promise.resolve(p)}return Promise.resolve(void 0)})(this[n],e,t)}spotlight(e,t){return((e,t,r)=>{const{store:{getState:o},rwgAgent:n}=e,i=o(),{video:{spotlightUserList:s}}=i;return s.includes(t)?Promise.reject({type:Xe,reason:`userId:${t} has already spotlighted`,errorCode:wa.VIDEO_SPOTLIGHT_MISMATCH_STATE}):-1===CN(i).findIndex((e=>e.userId===t))?Promise.reject({type:Xe,reason:`userId:${t} has not started video`,errorCode:wa.STREAM_MISMATCH_USER}):(n.spotlightVideo(t,{bReplace:r,bSpotlight:!0,bUnSpotlightAll:!1}),qa($n,(e=>{const{spotlightList:r}=e;return r.includes(t)})))})(this[n],e,t)}removeSpotlight(e){return((e,t)=>{const{store:{getState:r},rwgAgent:o}=e,n=r(),{meeting:{userId:i},video:{spotlightUserList:s}}=n,a=t||i,u=Nu(n);if(!s.includes(a)||-1===u.findIndex((e=>e.userId===a)))return Promise.reject({type:Xe,reason:`userId:${t} is not spotlighted`,errorCode:wa.VIDEO_SPOTLIGHT_MISMATCH_STATE});const d=Ru(n);if(s.length>1&&a===i&&!d)return Promise.reject({type:Ke,reason:"Cannot remove spotlight for self when the host has multiple spotlighted videos",errorCode:wa.VIDEO_SPOTLIGHT_MULTI_CONFLICT});if(a!==i&&!d)return Promise.reject({type:Ye,reason:"only host or co-host can cancel others spotlight",errorCode:wa.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED});o.spotlightVideo(a,{bReplace:!1,bSpotlight:!1,bUnSpotlightAll:!1});const c=a===i&&1===s.length?di:$n;return qa(c,(e=>{const{spotlightList:t}=e;return!t.includes(a)}))})(this[n],e)}removeAllSpotlights(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,{video:{spotlightUserList:o}}=t();return 0===o.length?Promise.resolve(""):(r.spotlightVideo(null,{bUnSpotlightAll:!0}),qa($n,(e=>{const{spotlightList:t}=e;return 0===t.length})))})(this[n])}screenshotVideo(e){return(async(e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,{video:{subscribedVideoList:i,selfPreviewVideoList:s,customizedVideoOption:a}}=o(),u=Tu(o()),d=t===(null==u?void 0:u.userId)&&u.bVideoOn&&(s.length>0||!(null==a||!a.videoElement));if(!i.includes(t)&&!d)return Promise.reject({type:Xe,reason:"user is not send video",errorCode:wa.STREAM_MISMATCH_USER});try{const e=await r.screenshot(t,"video");return t!==(null==u?void 0:u.userId)&&n(qc({targetUser:t,userId:null==u?void 0:u.userId,displayName:null==u?void 0:u.displayName})),e}catch(e){return Promise.reject({type:Je,reason:e,errorCode:wa.INTERNAL_ERROR})}})(this[n],e)}subscribeWebRTCStatsReportData(){return(async e=>{const{mediaAgent:t,store:{getState:r,dispatch:o}}=e,{video:{webrtcStatisticSubscription:n}}=r();return n||(t.subscribeWebRTCStatistics(!0,oe),o(Zl(!0))),""})(this[n])}unsubscribeWebRTCStatsReportData(){return(async e=>{const{mediaAgent:t,store:{getState:r,dispatch:o}}=e,{video:{webrtcStatisticSubscription:n}}=r();return n&&(t.subscribeWebRTCStatistics(!1,oe),o(Zl(!1))),""})(this[n])}subscribeSystemResourceUsage(){return(async e=>{const{mediaAgent:t,store:{dispatch:r}}=e;return t.subscribeToQos([Hu.Common],oe),r(Hl({common:!0})),""})(this[n])}unsubscribeSystemResourceUsage(){return(async e=>{const{mediaAgent:t,store:{dispatch:r}}=e;return t.unsubscribeFromQos([Hu.Common]),r(Hl({common:!1})),""})(this[n])}isCapturingVideo(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.video&&r.video.isCurrentUserStartedVideo})(this[n])}isCameraTaken(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.video&&r.video.isCameraTaken})(this[n])}isCaptureForbidden(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.video&&r.video.isCaptureForbidden})(this[n])}getCameraList(){return(e=>{const{store:{getState:t}}=e,r=t();if(!r.video)return[];const{video:{cameraDevicesList:o}}=r;return o.map((e=>Object.assign({},e)))})(this[n])}getActiveCamera(){return(e=>{const{store:{getState:t}}=e,r=t();return r.video?r.video.activeCamera:""})(this[n])}getActiveVideoId(){return(e=>{const{store:{getState:t}}=e,r=t();return r.video?r.video.activeVideoId:0})(this[n])}getVideoMaxQuality(){return(e=>{const{store:{getState:t}}=e,r=t();return r.video?r.video.receivedVideoMaxQuality:q.Video_90P})(this[n])}getReceivedVideoDimension(){return(e=>{const{store:{getState:t}}=e,r=t();return r.video?r.video.receivedVideoDimension:null})(this[n])}getCapturedVideoResolution(){return(e=>{const{store:{getState:t}}=e;return{...t().video.capturedVideoDimension}})(this[n])}isSupportMultipleVideos(){return(e=>{const{store:{getState:t}}=e,{meeting:{isUseWBVideo:r},media:{enforceMultipleVideos:o,disableRenderLimits:n}}=t();return ju.getMaxCountRender(r,o,n)>1})(this[n])}isSupportHDVideo(){return(e=>{var t;const{store:{getState:r}}=e;return null===(t=r().video)||void 0===t?void 0:t.isSupportHDVideo})(this[n])}getHardwareAccelerationStatus(){return(e=>{var t;const{store:{getState:r}}=e;return null===(t=r().video)||void 0===t?void 0:t.hardwareAcceleration})(this[n])}getVideoStatisticData(){return(({store:{getState:e}})=>{const{video:{statistic:t}}=e();return{...t}})(this[n])}isSupportVirtualBackground(){return(e=>{const{store:{getState:t}}=e,r=t();return Fd(r.media.enforceVirtualBackground,r.meeting.isUseWBVideo)})(this[n])}getVirtualbackgroundStatus(){return(e=>{const{store:{getState:t}}=e;return{...t().video.virtualBackground}})(this[n])}isRenderSelfViewWithVideoElement(){return Am(this[e].getState().meeting.isUseWBVideo)}getNetworkQuality(e){return((e,t)=>{var r;const{store:{getState:o}}=e,n=o(),{video:i,meeting:{userId:s}}=n,a=null!=t?t:s,u=null==i||null===(r=i.networkQuality)||void 0===r?void 0:r[`${a}`];if(u){const e={};return u.uplink&&Object.assign(e,{uplink:u.uplink.level}),u.downlink&&Object.assign(e,{downlink:u.downlink.level}),e}return null})(this[n],e)}getFarEndCameraPTZCapability(e){return((e,t)=>{const{store:{getState:r}}=e,o=TN(r()).find((e=>e.userId===t));return void 0!==(null==o?void 0:o.nFECC)?Im(null==o?void 0:o.nFECC):{pan:!1,tilt:!1,zoom:!1}})(this[n],e)}getCameraPTZCapability(e){return((e,t)=>{const{store:{getState:r}}=e,{video:{ptz:o,activeCamera:n}}=r(),i=o[null!=t?t:n];return{pan:!(null==i||!i.pan),tilt:!(null==i||!i.tilt),zoom:!(null==i||!i.zoom)}})(this[n],e)}isBrowserSupportPTZ(){const{pan:e,tilt:t,zoom:r}=ju.getPTZCapability();return e||t||r}getVideoMaskStatus(){return(e=>{var t;const{store:{getState:r}}=e,o=r(),{isMaskConfigured:n,imageSrc:i,...s}=(null===(t=o.video)||void 0===t?void 0:t.mask)||{};return{...s,imageUrl:i}})(this[n])}isVideoMirrored(){return(e=>{const{store:{getState:t}}=e,{video:{isMirrored:r}}=t();return r})(this[n])}getSpotlightedUserList(){return(e=>{const{store:{getState:t}}=e,r=t();if(!r.video)return[];const{video:{spotlightUserList:o}}=r;return Nu(r).filter((e=>o.includes(e.userId))).map((e=>bO(e)))})(this[n])}getVideoMediaPlaybackController(){return(({store:{getState:e},mediaAgent:t})=>{const r=e(),{video:{isUsingMediaPlayback:o}}=r;if(o){const{videoElement:e}=pm.getInstance();return Jd(e,"video",r,t)}return null})(this[n])}getMaxRenderableVideos(){return(e=>{const{store:{getState:t}}=e,{meeting:{isUseWBVideo:r},media:{enforceMultipleVideos:o,disableRenderLimits:n}}=t();return ju.getMaxCountRender(r,o,n)})(this[n])}getWebRTCStatsReportData(){return(({store:{getState:e}})=>{const{video:{webrtcStatistic:t}}=e();return{...t}})(this[n])}startShareView(e,t,r){return(async(e,t,r,o)=>{var n;const{store:{getState:i,dispatch:s},mediaAgent:a,rwgAgent:u}=e;await async function(e,t,r,o){var n,i;const{share:{isReceiveSharing:s,isRemoteSharingActive:a,activeNodeId:u,isSimultaneousShareView:d,status:c,annotationUsers:l,isReceiveSharingFromMainSession:p,ssrc:h},whiteboard:m}=r;if(null!=m&&null!==(n=m.whiteboardSharer)&&void 0!==n&&n.presenterID&&null!=m&&null!==(i=m.whiteboardSharer)&&void 0!==i&&i.dcsID)return Promise.reject(sC(wa.WHITEBOARD_AND_SHARING_CONFLICT));if(d){if(!e)return Promise.reject({type:Xe,reason:"",errorCode:wa.STREAM_MISMATCH_USER});if(p){if(t!==u)return Promise.reject({type:Xe,reason:"",errorCode:wa.STREAM_MISMATCH_USER})}else{const e=IC(qE(r),t);if(e)return e}if(s)return Promise.reject({type:Ke,reason:"",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE});const n=_C(l,h,o);if(n)return n;await Nr(oc(r))}else{if(!e||t!==u)return Promise.reject({type:Xe,reason:"",errorCode:wa.STREAM_MISMATCH_USER});if(!a||s||c!==z.End)return Promise.reject({type:Ke,reason:"",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE})}return""}(t,r,i(),a);const{share:{renderedEnsuredCanvas:d,isReceiveSharingFromMainSession:c,shareViewAttachments:l},media:{sharingDecodeStatus:p,alternativeNameForVideoPlayer:h}}=i();t.id||(t.id=_d("__ZOOM_SDK_SHARE_CANVAS_@__"));const m=!!o;var g,S;if(g=sc(null!==(n=l[`${r}`])&&void 0!==n?n:[]),S=t.id,!(null==g?void 0:g.find((e=>e.isDummy&&e.canvasId===S)))){const e=cC(r,t.id,null!=h?h:"video-player");e.setAttribute("share-source",c?"main":""),s(UA({userId:r,element:e}))}return Nd("sharing","success",p).subscribe((([,e])=>{if(e){let e=t;d.includes(t.id)||(e=Ud(t),s(pA(t.id))),s(KI(!0)),lC(u,i(),r),a.renderSharing(r,e,m,o,c),EC(r,i(),a)}})),"failed"===p?Promise.reject({type:Je,reason:"",errorCode:wa.INTERNAL_ERROR}):qa(Yi,(e=>!!e),6e4)})(this[n],e,t,r)}stopShareView(){return(e=>{const{store:{dispatch:t,getState:r},rwgAgent:o,mediaAgent:n}=e,{share:{isReceiveSharing:i,activeNodeId:s,shareViewAttachments:a},breakoutRoom:u}=r();if(!i)return Promise.resolve("");let d=!1;(null==u?void 0:u.currentRoom.status)===gu.InRoom&&u.mainSessionAttendeeList.length>0&&(d=u.mainSessionAttendeeList.findIndex((e=>e.userId===s))>-1);const c=a[`${s}`],l=(null==(p=sc(null!=c?c:[]))?void 0:p.filter((e=>e.isDummy)))||[];var p;l&&l.length>0&&t(VA({userId:s,element:l})),n.stopRenderSharing(),o.unsubscribeSharing(s,d);const{share:{shareViewAttachments:h}}=r();return Object.entries(h).every((([,e])=>0===e.length))&&t(KI(!1)),Promise.resolve("")})(this[n])}switchShareView(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n,mediaAgent:i}=e,s=r(),{share:{isReceiveSharing:a,activeNodeId:u,isReceiveSharingFromMainSession:d},breakoutRoom:c}=s;if(!a)return Promise.reject({type:Ke,errorCode:wa.SCREEN_SHARE_MISMATCH_STATE});if(!ZE(s))return Promise.reject({type:Ke,errorCode:wa.SCREEN_SHARE_MISMATCH_STATE,reason:"Cannot use `switchShareView` to switch when using `attachShareView`. Please use the sequence `detachShareView(oldUserId)`  `attachShareView(newUserId)` to perform the switch."});if(t===u)return Promise.resolve("");let l=[];if(l=d?c.mainSessionAttendeeList.filter((e=>e.bShareToBORooms&&e.sharerOn)):qE(s),!(l.findIndex((e=>e.userId===u))>-1))return Promise.reject({type:Xe,reason:"no matching user id",errorCode:wa.STREAM_MISMATCH_USER});{var p;const e=null!==(p=CC(t,s))&&void 0!==p?p:t,r=OC(u,t,e,{state:s,rwgAgent:n,mediaAgent:i});Array.isArray(r)&&r.length>0&&r.forEach((e=>o(e))),o(qI({bStatus:1,activeNodeID:t,ssrc:e})),$a(ss,{userId:t})}return Promise.resolve("")})(this[n],e)}updateSharingCanvasDimension(e,t){return((e,t,r)=>{const{store:{getState:o},mediaAgent:n}=e,i=o(),{share:{isReceiveSharing:s,isGrabRemoteControl:a,remoteControlViewportDomSelector:u}}=i;if(s&&(n.updateRenderedSharingDimension(t,r),a&&u)){const e=document.querySelector(u);n.updateRemoteControlProperties({dimension:e&&kd(e)})}return Promise.resolve("")})(this[n],e,t)}startShareScreen(e,t){return IN(this[n],e,t)}startShareCamera(e,t,r){const o={secondaryCameraId:t||"default",optimizedForSharedVideo:!1};return r&&Object.assign(o,{captureWidth:1280,captureHeight:720}),IN(this[n],e,o,!0)}stopShareScreen(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o,mediaAgent:n}=e,{share:{status:i,isCameraFeedSharing:s,isSimultaneousShareView:a},meeting:{userId:u}}=t();return i===z.End?Promise.resolve(""):(o.stopSharing(u),n.stopDesktopSharing(),s&&r(kA(!1)),r(YI(z.End)),a&&r(LA(!1)),qa(Do,(e=>!1===e.sharerOn)))})(this[n])}pauseShareScreen(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o,mediaAgent:n}=e,i=t(),{share:{status:s},breakoutRoom:a}=i;if(s===z.Sharing){if(o.pauseSharing(),n.pauseDesktopSharing(),a&&OO(i)){const e=Tu(i);return Promise.resolve("").then((()=>{if(e){const{userId:t,sharerOn:o,bShareAudioOn:n,bVideoShare:i}=e,s={userId:t,sharerOn:o,sharerPause:!0,bShareAudioOn:n,bVideoShare:i};r(qv({update:[s]})),r(YI(z.Paused)),$a(Do,s)}}))}return qa(Do,(e=>!0===e.sharerPause)).then((()=>(r(YI(z.Paused)),"")))}return Promise.reject({type:Ke,errorCode:wa.SCREEN_SHARE_MISMATCH_STATE})})(this[n])}resumeShareScreen(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o,mediaAgent:n}=e,i=t(),{share:{status:s},breakoutRoom:a}=i;if(s===z.Paused){if(o.resumeSharing(),n.resumeDesktopSharing(),a&&OO(i)){const e=Tu(i);return Promise.resolve("").then((()=>{if(e){const{userId:t,sharerOn:o,bShareAudioOn:n,bVideoShare:i}=e,s={userId:t,sharerOn:o,sharerPause:!1,bShareAudioOn:n,bVideoShare:i};r(qv({update:[s]})),r(YI(z.Sharing)),$a(Do,s)}}))}return qa(Do,(e=>!0===e.sharerOn&&!1===e.sharerPause)).then((()=>(r(YI(z.Sharing)),"")))}return Promise.reject({type:Ke,errorCode:wa.SCREEN_SHARE_MISMATCH_STATE})})(this[n])}setSharePrivilege(e){return AN(this[n],e)}lockShare(e){return((e,t)=>AN(e,t?G.OnlyHost:G.HostGrab))(this[n],e)}shareToBreakoutRoom(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o,mediaAgent:n}=e,{meeting:{userId:i},breakoutRoom:s,share:{isSharingToBreakoutRoom:a,status:u}}=t();return u===z.End?Promise.reject({type:Ke,reason:"Invalid sharing status",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE}):a?Promise.resolve(""):s.currentRoom.status===gu.InRoom?Promise.reject({type:Ke,reason:"Unable to share screen to breakout room when in the room",errorCode:wa.SCREEN_SHARE_SUBSESSION_CONFLICT}):(o.startShareToBreakoutRoom(i),r(nA(!0)),n.enableShareAudioToBreakoutRoom(!0),Promise.resolve(""))})(this[n])}stopShareToBreakoutRoom(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o,mediaAgent:n}=e,{meeting:{userId:i},share:{isSharingToBreakoutRoom:s}}=t();return s&&(o.stopShareToBreakoutRoom(i),r(nA(!1)),n.enableShareAudioToBreakoutRoom(!1)),Promise.resolve("")})(this[n])}muteOthersScreenShare(e){return((e,t)=>{const{store:{getState:r},rwgAgent:o}=e,n=r(),{meeting:{userId:i}}=n,s=qE(n);return t===i?Promise.reject({type:Ke,reason:"Cannot mute self share, use 'stopScreenShare' instead",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE}):-1===s.findIndex((e=>e.userId===t))?Promise.reject({type:Xe,reason:"Target user is not sharing",errorCode:wa.STREAM_MISMATCH_USER}):(o.stopSharing(t),qa(No,(e=>e.some((e=>e.userId===t&&!1===e.sharerOn)))))})(this[n],e)}enableOptimizeForSharedVideo(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n,rwgAgent:i}=e,{share:{status:s,isOptimizedForSharedVideo:a,isSharingToBreakoutRoom:u,sharePrivilege:d,isCameraFeedSharing:c},audio:{isSharingAudio:l},meeting:{userId:p}}=r();return s!==z.End?c?Promise.reject({type:Ke,reason:"Cannot enable optimize for shared video during camera sharing.",errorCode:wa.SCREEN_SHARE_OPTIMIZE_VIDEO_UNSUPPORTED}):a===t?Promise.resolve(""):d!==G.MultipleShare?t&&!ju.isSupportVideoShareSend()?Promise.reject({type:Ke,reason:"Cannot enable optimize for shared video due to the platform is not supported ",errorCode:wa.SCREEN_SHARE_OPTIMIZE_VIDEO_UNSUPPORTED}):(i.startSharing(p,{bShareAudio:l,bShareToBO:u,bShareVideo:t}),n.switchSharingMode(t?ve.VideoMode:ve.Normal),qa({event:Do,operations:[uo((e=>void 0!==e.bVideoShare)),mo(1)]},(e=>e.bVideoShare===t)).then((()=>(o(uA(t)),"")))):Promise.reject({type:Ke,reason:"Cannot enable optimize for shared video when enabling multiple screen shares",errorCode:wa.SCREEN_SHARE_OPTIMIZE_VIDEO_CONFLICT}):Promise.reject({type:Ke,reason:"Cannot enable optimize for shared video when screen share is not started",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE})})(this[n],e)}updateSharedVideoQuality(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n}=e,i=r(),{share:{shareQuality:s,activeNodeId:a,isReceiveSharing:u}}=i,d=KE(i);return u&&0!==a?(d&&s!==t&&(lC(n,i,a,t),o(XI(t))),Promise.resolve("")):Promise.reject({type:Ke,reason:"Cannot update shared video quality when screen share is not started",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE})})(this[n],e)}subscribeShareStatisticData(e){return(async(e,t)=>{const{mediaAgent:r,store:{getState:o}}=e,n=o(),{media:{sharingEncodeStatus:i,sharingDecodeStatus:s},share:{isCameraFeedSharing:a}}=o(),u=Tu(n),d=!t||t.decode,c=!t||t.encode;if(!u)return Promise.reject({type:Ke,reason:"Call this function after the 'join' method resolved.",errorCode:wa.STREAM_SESSION_JOIN_REQUIRED});{const e=lu(u.userRole)||!C.isSupportSendScreenSharing&&!a?"failed":i;Nd("sharing",e,s).subscribe((([e,t])=>{d&&t&&r.subscribeToQos([Hu.SharingDecode],oe),c&&e&&r.subscribeToQos([Hu.SharingEncode],oe)}))}return""})(this[n],e)}unsubscribeShareStatisticData(e){return(async(e,t)=>{const{mediaAgent:r,store:{dispatch:o}}=e,n=!t||t.decode,i=!t||t.encode;return n&&(r.unsubscribeFromQos([Hu.SharingDecode]),o(cA(le))),i&&(r.unsubscribeFromQos([Hu.SharingEncode]),o(cA(le))),null})(this[n],e)}screenshotSharedContent(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{share:{isReceiveSharing:i,activeNodeId:s,shareViewAttachments:a}}=r();if(!i)return Promise.reject({type:Ke,reason:"Cannot take screenshot when screen share is not started",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE});{let i=s;if(t){if(!Object.entries(a).some((([e,r])=>Number(e)===t&&r.length>0)))return Promise.reject({type:Xe,reason:"User is not in the shared content rendering list",errorCode:wa.STREAM_MISMATCH_USER});i=t}const u=Tu(r());try{const e=await n.screenshot(i,"sharing");return o(GI({targetUser:i,userId:null==u?void 0:u.userId,displayName:null==u?void 0:u.displayName})),e}catch(e){return Promise.reject({type:Je,errorCode:wa.INTERNAL_ERROR,reason:e})}}})(this[n],e)}attachShareView(e,t){return(async(e,t,r)=>{const{store:{getState:o,dispatch:n},mediaAgent:i,rwgAgent:s}=e;await function(e,t,r){const{share:{isSimultaneousShareView:o,annotationUsers:n,ssrc:i,status:s,isReceiveSharing:a,remoteControlledUserList:u,isReceiveSharingFromMainSession:d,activeNodeId:c},meeting:{userId:l},breakoutRoom:p}=t,h=[];if(d){var m;const e=Tu(t);h.push(...null!==(m=null==p?void 0:p.mainSessionAttendeeList.filter((t=>!t.bid&&!t.bHold&&t.userGUID!==(null==e?void 0:e.userGUID))))&&void 0!==m?m:[])}else{var g,S;h.push(...null!==(g=null===(S=qE(t))||void 0===S?void 0:S.filter((e=>e.userId!==l)))&&void 0!==g?g:[])}if(e!==c){const t=IC(h,e);if(t)return t}if(o){const e=_C(n,i,r);if(e)return e}else if(s!==z.End)return Promise.reject({type:Ke,reason:"Screen share is in progress",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE});if(a){if(n.some((e=>e.isInitialized)))return Promise.reject({type:Ke,reason:"Cannot attach multiple share views due to annotation is in progress",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE});if(u.length>0)return Promise.reject({type:Ke,reason:"Cannot attach multiple share views due to remote control is in progress",errorCode:wa.SCREEN_SHARE_MISMATCH_STATE});const e=QE(t),r=AC();if(e>=r)return Promise.reject({type:Ke,reason:`Cannot attach multiple share views exceeding the maximum allowed limit(${r})`,errorCode:wa.SCREEN_SHARE_LIMIT_EXCEED})}return""}(t,o(),i);const a=o(),{media:{sharingDecodeStatus:u,alternativeNameForVideoPlayer:d}}=a,c=null!=d?d:"video-player";let l;if(r){const[e,t]=rc(r,c);if(!e)return Promise.reject(t);l=t}else l=document.createElement(c);return await Nr(Nd("sharing","success",u).pipe($r((async([,e])=>{if(e){await wr(oc(o()));const e=o(),{share:{isReceiveSharing:a,shareViewAttachments:u,isReceiveSharingFromMainSession:d}}=e,c=u[`${t}`];var r;l&&c&&c.some((e=>uc(e,l)))?console.warn("Share view already attached"):(l.setAttribute("media-type","share"),l.setAttribute("share-source",d?"main":""),l.setAttribute("node-id",`${t}`)),n(UA({userId:t,element:l})),lC(s,e,t,void 0,a),a||(n(KI(!0)),n(qI({bStatus:1,activeNodeID:t,ssrc:null!==(r=CC(t,e))&&void 0!==r?r:t})),TC(t,{state:e,rwgAgent:s,mediaAgent:i}))}})))),Promise.resolve(l)})(this[n],e,t)}detachShareView(e,t){return(async(e,t,r)=>{const{store:{getState:o,dispatch:n},rwgAgent:i,mediaAgent:s}=e,a=o(),{share:{shareViewAttachments:u},media:{alternativeNameForVideoPlayer:d}}=a;if(u[`${t}`]){var c;const e=RC(t,{state:a,rwgAgent:i,mediaAgent:s});let h;Array.isArray(e)&&e.length>0&&e.forEach((e=>n(e)));const m=null!=d?d:"video-player";if(r){const[e,t]=rc(r,m);h=e?t:void 0}let g;const S=u[`${t}`];h?-1!==S.findIndex((e=>uc(e,h)))?(g=h,g.setAttribute("node-id","0"),n(VA({userId:t,element:g}))):console.warn(`${r} has not been attached with userID:${t}`):(g=[...sc(S).filter((e=>!e.isDummy))],g.forEach((e=>{e.setAttribute("node-id","0")})),n(VA({userId:t,element:g})));const{share:{shareViewAttachments:v},breakoutRoom:f}=o();if(0===(null===(c=v[`${t}`])||void 0===c?void 0:c.length)){let e=!1;(null==f?void 0:f.currentRoom.status)===gu.InRoom&&f.mainSessionAttendeeList.length>0&&(e=f.mainSessionAttendeeList.findIndex((e=>e.userId===t))>-1);const r=Object.entries(v).filter((([,e])=>0!=e.length)).length,o=[0,1].includes(r),s=0===r;if(i.unsubscribeSharing(t,e,!o),s&&n(KI(!1)),1===r){var l;const e=null===(l=Object.entries(v).find((([,e])=>0!==e.length)))||void 0===l?void 0:l[0];if(e){var p;const t=Number(e);n(qI({bStatus:1,activeNodeID:t,ssrc:null!==(p=CC(t,a))&&void 0!==p?p:t}))}}}return Promise.resolve(g)}return Promise.resolve(void 0)})(this[n],e,t)}startAnnotation(){return(async e=>{const{store:{getState:t,dispatch:r},mediaAgent:o}=e,n=t(),{share:{ssrc:i,activeSsrc:s,isReceiveSharing:a,status:u,annotationVanishingToolTimer:d}}=n,c=u!==z.End,l=await async function(e){var t,r;const{share:{ssrc:o,activeSsrc:n,annotationCapability:i,isReceiveSharing:s,status:a,isReceiveSharingFromMainSession:u,annotationUsers:d},whiteboard:c}=e,l=a!==z.End;if(!l&&!s)return Promise.reject({type:Ke,reason:"No active share session",errorCode:wa.SCREEN_SHARE_ANNOTATION_NO_ACTIVE_SHARE});if(null!=c&&null!==(t=c.whiteboardSharer)&&void 0!==t&&t.presenterID&&null!=c&&null!==(r=c.whiteboardSharer)&&void 0!==r&&r.dcsID)return Promise.reject(sC(wa.WHITEBOARD_AND_ANNOTATION_CONFLICT));if(0===i||l&&1===i)return Promise.reject({type:Ke,reason:"Annotation is not enabled for your account.",errorCode:wa.SCREEN_SHARE_ANNOTATION_ACCOUNT_DISABLE});const p=d.find((e=>e.ssrc===(s?n:o)));if(s){if(u)return Promise.reject({type:Ke,reason:"You cannot annotation on share to subsession content.",errorCode:wa.SCREEN_SHARE_ANNOTATION_NOT_SUPPORT});if(null!=p&&p.isDisabled)return Promise.reject({type:Ke,reason:"Annotation is disabled for the current share session by sharer.",errorCode:wa.SCREEN_SHARE_ANNOTATION_PRESENTER_DISABLED});if(null!=p&&p.isStarted)return Promise.reject({type:Ke,reason:"Annotation is already started",errorCode:wa.SCREEN_SHARE_ANNOTATION_DUPLICATE_START})}else if(l&&null!=p&&p.isStarted)return Promise.reject({type:Ke,reason:"Annotation is already started",errorCode:wa.SCREEN_SHARE_ANNOTATION_DUPLICATE_START});return p}(n),p=Tu(n);setTimeout((()=>{a?(o.startViewerAnnotation(i,s,(null==p?void 0:p.displayName)||""),o.annotateAction(Be.UPDATE_VANISHING_TOOL_TIME,{displayTime:2e3,outTime:2e3})):c&&(o.startPresenterAnnotation(i,i,(null==p?void 0:p.displayName)||""),o.annotateAction(Be.UPDATE_VANISHING_TOOL_TIME,{displayTime:d.displayTime,outTime:d.vanishingTime}))}),0);const h=a?s:i;return null!=l&&l.isInitialized?(r(DA({ssrc:h,isStarted:!0})),Promise.resolve("")):(r(DA({ssrc:h,isInitialized:!0,isStarted:!0})),qa(Es,(e=>(e&&r(DA({ssrc:h,isInitialized:!1,isStarted:!1})),!e))))})(this[n])}stopAnnotation(){return(e=>{const{store:{getState:t,dispatch:r},mediaAgent:o}=e,{share:{isReceiveSharing:n,activeSsrc:i,ssrc:s,annotationUsers:a}}=t(),u=n?i:s,d=a.find((e=>e.ssrc===u));if(null==d||!d.isInitialized||!d.isStarted)return Promise.reject({type:Ke,reason:"Annotation is not started.",errorCode:wa.SCREEN_SHARE_ANNOTATION_NOT_START});r(DA({ssrc:d.ssrc,isStarted:!1}));const c={toolType:je.None};return o.annotateAction(Be.SELECT_TOOL,c),r(PA(je.None)),o.annotateAction(Be.CLOSE_TOOL_BAR),Promise.resolve("")})(this[n])}changeAnnotationPrivilege(e){return((e,t)=>{const{store:{getState:r},rwgAgent:o}=e,{meeting:{userId:n}}=r();return o.toggleShareAnnotation(t,n),qa(_s,(e=>!!e))})(this[n],e)}requestShareCamera(e,t,r){return((e,t,r,o)=>{const{store:{getState:n},rwgAgent:i}=e,{meeting:{userId:s},participants:{attendeesList:a}}=n();if(!(null==a?void 0:a.find((e=>(null==e?void 0:e.userId)===t))))return Promise.reject({type:Ke,reason:`Cannot find a user with userId: ${t}`,errorCode:wa.SHARE_CAMERA_MESSAGE_ERROR});if(![te.User,te.Environment].includes(r))return Promise.reject({type:Ke,reason:"Invalid share source.",errorCode:wa.SHARE_CAMERA_MESSAGE_ERROR});const u=r===te.User?xe.FrontCamera:xe.RearCamera;return i.requestRemoteShare(s,t,u,o),Promise.resolve("")})(this[n],e,t,r)}approveShareCamera(e,t){return bN(this[n],e,t,0)}declineShareCamera(e,t){return bN(this[n],e,t,1)}informShareCameraStatus(e,t,r){return((e,t,r,o)=>{const{store:{getState:n},rwgAgent:i}=e,{meeting:{userId:s},participants:{attendeesList:a}}=n();return(null==a?void 0:a.find((e=>(null==e?void 0:e.userId)===r)))?[$e.Success,$e.Failed].includes(o)?(i.respondStatusToRemoteShareRequest(t,s,r,o),Promise.resolve("")):Promise.reject({type:Ke,reason:"Invalid status",errorCode:wa.SHARE_CAMERA_MESSAGE_ERROR}):Promise.reject({type:Ke,reason:`Cannot find a user with userId: ${r}`,errorCode:wa.SHARE_CAMERA_MESSAGE_ERROR})})(this[n],e,t,r)}showAnnotatorName(e){return((e,t)=>{const{store:{getState:r},mediaAgent:o}=e,{share:{status:n}}=r();return n!==z.End?(o.annotateAction(Be.SHOW_ANNOTATOR_NAME,{toShow:t}),Promise.resolve("")):Promise.reject({type:Ke,reason:"Only the share presenter can control the name display during a session session.",errorCode:wa.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER})})(this[n],e)}canDoAnnotation(){return(e=>{var t,r,o;const{store:{getState:n}}=e,{share:{isReceiveSharing:i,activeNodeId:s,status:a,annotationCapability:u,isReceiveSharingFromMainSession:d,isSimultaneousShareView:c,annotationUsers:l},whiteboard:p,meeting:{userId:h}}=n();if(null!=p&&null!==(t=p.whiteboardSharer)&&void 0!==t&&t.presenterID&&null!=p&&null!==(r=p.whiteboardSharer)&&void 0!==r&&r.dcsID)return!1;const m=a!==z.End;if(!m&&!i)return!1;if(0===u||m&&1===u)return!1;const g=i?s:h,S=null!==(o=CC(g,n()))&&void 0!==o?o:g,v=l.find((e=>{var t;return e.ssrc===S||yd(S,null!==(t=e.userId)&&void 0!==t?t:0)})),f=null==v?void 0:v.isDisabled;return!(i&&(d||f)||c||YE(n()))})(this[n])}getAnnotationController(){return(e=>({setToolType:t=>((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{share:{annotationToolColor:i,annotationSpotlightColor:s,annotationToolWidth:a,status:u}}=r();if(!Object.values(je).includes(t))return Promise.reject({type:Ke,reason:`toolType = ${t} is invalid`,errorCode:wa.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const d=u!==z.End,c=t===je.Spotlight;if(c&&!d)return Promise.reject({type:Ke,reason:"Only the share presenter can spotlight",errorCode:wa.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const l={toolType:t,color:c?s:i,width:a};return n.annotateAction(Be.SELECT_TOOL,l),o(PA(t)),Promise.resolve("")})(e,t),setToolWidth:t=>((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{share:{annotationToolType:i,annotationToolColor:s}}=r(),a=Math.ceil(t),u={toolType:i,color:s,width:a};return n.annotateAction(Be.SELECT_TOOL,u),o(MA(a)),Promise.resolve("")})(e,t),setToolColor:t=>((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{share:{annotationToolType:i,annotationToolWidth:s}}=r(),a={toolType:i,color:t,width:s};return n.annotateAction(Be.SELECT_TOOL,a),o(i===je.Spotlight?NA(t):wA(t)),Promise.resolve("")})(e,t),getToolWidth:()=>(e=>{const{store:{getState:t}}=e,{share:{annotationToolWidth:r}}=t();return r})(e),getToolColor:()=>(e=>{const{store:{getState:t}}=e,{share:{annotationToolType:r,annotationToolColor:o,annotationSpotlightColor:n}}=t();return r===je.Spotlight?n:o})(e),getToolType:()=>(e=>{const{store:{getState:t}}=e,{share:{annotationToolType:r}}=t();return r})(e),undo:()=>(e=>{const{mediaAgent:t}=e;return t.annotateAction(Be.UNDO),Promise.resolve("")})(e),redo:()=>(e=>{const{mediaAgent:t}=e;return t.annotateAction(Be.REDO),Promise.resolve("")})(e),clear:t=>((e,t)=>{const{store:{getState:r},mediaAgent:o}=e,{share:{status:n,isReceiveSharing:i},meeting:{isHost:s}}=r();if(!Object.values(He).includes(t))return Promise.reject({type:Ke,reason:`clearType = ${t} is invalid`,errorCode:wa.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const a=n!==z.End;if(t===He.All&&i&&!s)return Promise.reject({type:Ke,reason:"As a viewer, you cannot clear all annotation",errorCode:wa.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});if(t===He.Viewer&&!a)return Promise.reject({type:Ke,reason:"You must be the presenter to clear the annotation from the viewer",errorCode:wa.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const u={clearType:t,isHost:s};return o.annotateAction(Be.CLEAR,u),Promise.resolve("")})(e,t),setVanishingToolTimer:t=>((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{share:{annotationVanishingToolTimer:i}}=r(),{displayTime:s,vanishingTime:a}=t;if(s&&(s<0||s>15e3))return Promise.reject({type:Ke,reason:"Vanishing tool display time should be within range of [0, 15] seconds",errorCode:wa.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});if(a&&(a<1e3||a>15e3))return Promise.reject({type:Ke,reason:"Vanishing tool vanishing time should be within range of [1, 15] seconds",errorCode:wa.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const u={displayTime:null!=s?s:i.displayTime,outTime:null!=a?a:i.vanishingTime};return n.annotateAction(Be.UPDATE_VANISHING_TOOL_TIME,u),o(BA({displayTime:u.displayTime,vanishingTime:u.outTime})),Promise.resolve("")})(e,t),getVanishingToolTimer:()=>(e=>{const{store:{getState:t}}=e,{share:{annotationVanishingToolTimer:r}}=t();return r})(e)}))(this[n])}getShareUserList(){return(e=>{const{store:{getState:t}}=e,r=t();if(!r.share)return[];const{share:{isReceiveSharingFromMainSession:o}}=r;if(o){const{breakoutRoom:{mainSessionAttendeeList:e}}=r;return e.filter((e=>e.bShareToBORooms&&(e.sharerOn||e.sharerPause))).map((e=>bO(e)))}return qE(r).map((e=>bO(e)))})(this[n])}getActiveShareUserId(){return(e=>{const{store:{getState:t}}=e,r=t();return r.share&&r.share.isRemoteSharingActive?r.share.activeNodeId:0})(this[n])}isReceiveSharing(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.isReceiveSharing})(this[n])}getShareViewDimension(){return(e=>{const{store:{getState:t}}=e,r=t();if(r.share){if(r.share.status!==z.End)return{...r.share.shareDimension};{const{share:{receivedShareDimension:e}}=r;return{width:e.width,height:e.height}}}return null})(this[n])}getShareStatus(){return(e=>{const{store:{getState:t}}=e,r=t();return r.share?r.share.status:null})(this[n])}isShareLocked(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.sharePrivilege===G.OnlyHost})(this[n])}isReceiveSharingFromMainSession(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.isReceiveSharingFromMainSession})(this[n])}getSharePrivilege(){return(e=>{const{store:{getState:t}}=e,r=t();return r.share?r.share.sharePrivilege:null})(this[n])}isStartShareScreenWithVideoElement(){return C.isSupportMediaStreamTrackProcessor}isOptimizeForSharedVideoEnabled(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&!!r.share.isOptimizedForSharedVideo})(this[n])}isSupportOptimizedForSharedVideo(){return ju.isSupportVideoShareSend()}isSupportVideoProcessor(){return DN(this[n],"video")}isSupportAudioProcessor(){return DN(this[n],"audio")}isSupportShareProcessor(){return DN(this[n],"share")}getShareStatisticData(){return(({store:{getState:e}})=>{const{share:{statistic:t}}=e();return{...t}})(this[n])}getMaxRenderableShareViews(){return AC()}requestRemoteControl(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,{share:{isReceiveSharing:o,activeNodeId:n,isRemoteControlEnabled:i}}=t();return i?wN(e,n)?o?JE(t())?Promise.reject({type:Ke,reason:"Already get the approval",errorCode:wa.REMOTE_CONTROL_MISMATCH_STATE}):(r.sharingRequestRemoteControl(n,!0),new Promise((e=>{Ka(as,1).subscribe((t=>{e(t)}))}))):Promise.reject({type:Ke,reason:"Cannot request control due to no sharing available",errorCode:wa.REMOTE_CONTROL_MISMATCH_STATE}):Promise.reject({type:Xe,errorCode:wa.REMOTE_CONTROL_MISMATCH_STATE}):Promise.reject({type:Ke,reason:"Cannot request control due to the feature is not enabled.",errorCode:wa.REMOTE_CONTROL_ACCOUNT_DISABLE})})(this[n])}giveUpRemoteControl(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,{share:{isGrabRemoteControl:o,activeNodeId:n}}=t();return JE(t())?(o&&r.subscribeGrabRemoteControl(n,!1),r.sharingRequestRemoteControl(n,!1),qa(as,(e=>!1===e))):Promise.reject({type:Ke,errorCode:wa.REMOTE_CONTROL_MISMATCH_STATE})})(this[n])}startRemoteControl(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n,rwgAgent:i}=e,{share:{isSDKGrabControl:s,activeNodeId:a}}=r();if(!JE(r()))return Promise.reject({type:Ke,reason:"required to be approved",errorCode:wa.REMOTE_CONTROL_PERMISSION_REQUIRED});if(await fC(a,t,r(),i,n),t.dataset.zmrvId||t.setAttribute("data-zmrv-id",_d("__ZOOM_SDK_RC_VIEWPORT_DATA_ID_@__")),o(CA(`${t.tagName}[data-zmrv-id="${t.dataset.zmrvId}"]`)),s){const{share:{isGrabRemoteControl:e}}=r();return e?Promise.resolve(""):qa(us,(e=>!!e))}return za({success:cs,fail:[ls]})})(this[n],e)}grabRemoteControl(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,{share:{isGrabRemoteControl:o,activeNodeId:n}}=t();return JE(t())?o?Promise.resolve(""):(r.subscribeGrabRemoteControl(n,!0),qa(us,(e=>!!e))):Promise.reject({type:Ke,reason:"should be approved before grab",errorCode:wa.REMOTE_CONTROL_PERMISSION_REQUIRED})})(this[n])}updateRemoteControlViewportDimension(e){return((e,t)=>{const{store:{getState:r},mediaAgent:o}=e;return JE(r())&&o.updateRemoteControlProperties({dimension:{scaleWidth:t.width,scaleHeight:t.height,srcOffsetX:t.left,srcOffsetY:t.top}}),Promise.resolve("")})(this[n],e)}approveRemoteControl(e,t){return((e,t,r)=>{const{store:{getState:o,dispatch:n},rwgAgent:i,mediaAgent:s}=e,a=o(),{share:{status:u,isEnableAutoDeleteRcApp:d,remoteControllingSsrc:c},meeting:{userId:l}}=a;if(u===z.End)return Promise.reject({type:Ke,reason:"Cannot approve remote control when sharing is not ongoing.",errorCode:wa.REMOTE_CONTROL_MISMATCH_STATE});if(u===z.Paused&&(i.resumeSharing(),s.resumeDesktopSharing(),n(YI(z.Sharing))),s.isSharingEntireScreen()){var p,h;c&&!yd(c,t)&&(vC(a,i),n(_A("")));const e=null!==(p=CC(t,a))&&void 0!==p?p:t,{isMacOS:o}=C,u=null===(h=Nu(a).find((t=>yd(t.userId,e))))||void 0===h?void 0:h.displayName;return i.remoteControlConsent(Ee.Approve,e,l,{...s.getShareStreamInfo(),platform:C.isMacOS?"mac":"win",controllerName:u?cd(u):""},d,o?void 0:r?1:0),n(gA(e)),qa(fs)}return Promise.reject({type:Ke,reason:"Cannot approve remote control when not sharing entire screen.",errorCode:wa.REMOTE_CONTROL_MISMATCH_DISPLAY_SURFACE})})(this[n],e,t)}declineRemoteControl(e){return((e,t)=>{var r;const{store:{getState:o},rwgAgent:n,mediaAgent:i}=e,s=o(),{meeting:{userId:a},share:{isEnableAutoDeleteRcApp:u}}=s,d=null!==(r=CC(t,s))&&void 0!==r?r:t;return n.remoteControlConsent(Ee.Decline,d,a,{...i.getShareStreamInfo(),platform:C.isMacOS?"mac":"win"},u),Promise.resolve("")})(this[n],e)}stopRemoteControl(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o}=e;return vC(t(),o),r(_A("")),r(gA(0)),Promise.resolve("")})(this[n])}launchRemoteControlApp(e){return((e,t)=>{const{store:{getState:r,dispatch:o}}=e,n=r(),{share:{remoteControlAppLaunchSheme:i}}=n;return i?(o(_A(t?`${i}&bAutoDelete=1`:i)),o(vA(_e.Unknown)),Promise.resolve("")):Promise.reject({type:Ke,reason:"Cannot launch app due to no permission",errorCode:wa.REMOTE_CONTROL_INVALID_LAUNCH_SCHEME})})(this[n],e)}isRemoteControlEnabled(){return(e=>{var t;const{store:{getState:r}}=e;return!(null===(t=r().share)||void 0===t||!t.isRemoteControlEnabled)})(this[n])}getRemoteControlAppDownloadUrl(){return(e=>{const{store:{getState:t}}=e,r=t();return r.share?r.share.remoteControlAppDownloadUrl:null})(this[n])}isTargetShareSupportRemoteControl(e){return wN(this[n],e)}isRemotelyControlApproved(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&JE(r)})(this[n])}isControllingUserRemotely(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.isGrabRemoteControl})(this[n])}getRemotelyControllingUser(){return(e=>{const{store:{getState:t}}=e,r=t();if(r.share){const{remoteControllingSsrc:e}=r.share;if(e)return Nu(r).find((t=>yd(t.userId,e)))}return null})(this[n])}getShareStreamSettings(){return(({store:{getState:e},mediaAgent:t})=>{const{share:{status:r}}=e();return r!==z.End?t.getShareStreamInfo(!0):null})(this[n])}},AS(RP.prototype,"startAudio",[NS,NN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"startAudio"),RP.prototype),AS(RP.prototype,"stopAudio",[NS,MN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"stopAudio"),RP.prototype),AS(RP.prototype,"muteAudio",[NS,PN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"muteAudio"),RP.prototype),AS(RP.prototype,"unmuteAudio",[NS,LN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"unmuteAudio"),RP.prototype),AS(RP.prototype,"dialOut",[NS,kN,UN],Object.getOwnPropertyDescriptor(RP.prototype,"dialOut"),RP.prototype),AS(RP.prototype,"cancelDialOut",[NS,VN,BN],Object.getOwnPropertyDescriptor(RP.prototype,"cancelDialOut"),RP.prototype),AS(RP.prototype,"hangup",[NS,HN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"hangup"),RP.prototype),AS(RP.prototype,"switchMicrophone",[NS,jN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"switchMicrophone"),RP.prototype),AS(RP.prototype,"switchSpeaker",[NS,FN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"switchSpeaker"),RP.prototype),AS(RP.prototype,"muteShareAudio",[NS,WN,xN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"muteShareAudio"),RP.prototype),AS(RP.prototype,"unmuteShareAudio",[NS,$N,GN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"unmuteShareAudio"),RP.prototype),AS(RP.prototype,"subscribeAudioStatisticData",[NS,zN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"subscribeAudioStatisticData"),RP.prototype),AS(RP.prototype,"unsubscribeAudioStatisticData",[NS,qN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"unsubscribeAudioStatisticData"),RP.prototype),AS(RP.prototype,"enableBackgroundNoiseSuppression",[NS,KN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"enableBackgroundNoiseSuppression"),RP.prototype),AS(RP.prototype,"enableSyncButtonsOnHeadset",[NS,JN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"enableSyncButtonsOnHeadset"),RP.prototype),AS(RP.prototype,"enableOriginalSound",[NS,QN,OP],Object.getOwnPropertyDescriptor(RP.prototype,"enableOriginalSound"),RP.prototype),AS(RP.prototype,"callCRCDevice",[NS,YN,ZN],Object.getOwnPropertyDescriptor(RP.prototype,"callCRCDevice"),RP.prototype),AS(RP.prototype,"cancelCallCRCDevice",[NS,XN,eM],Object.getOwnPropertyDescriptor(RP.prototype,"cancelCallCRCDevice"),RP.prototype),AS(RP.prototype,"muteAllAudio",[PS,NS,tM],Object.getOwnPropertyDescriptor(RP.prototype,"muteAllAudio"),RP.prototype),AS(RP.prototype,"unmuteAllAudio",[PS,NS,rM],Object.getOwnPropertyDescriptor(RP.prototype,"unmuteAllAudio"),RP.prototype),AS(RP.prototype,"muteAudioUponEntry",[PS,NS,oM],Object.getOwnPropertyDescriptor(RP.prototype,"muteAudioUponEntry"),RP.prototype),AS(RP.prototype,"allowUnmuteAudioThemselves",[PS,NS,nM],Object.getOwnPropertyDescriptor(RP.prototype,"allowUnmuteAudioThemselves"),RP.prototype),AS(RP.prototype,"startVideo",[NS,iM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"startVideo"),RP.prototype),AS(RP.prototype,"stopVideo",[NS,sM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"stopVideo"),RP.prototype),AS(RP.prototype,"switchCamera",[NS,aM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"switchCamera"),RP.prototype),AS(RP.prototype,"createProcessor",[NS,uM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"createProcessor"),RP.prototype),AS(RP.prototype,"addProcessor",[NS,dM,NP],Object.getOwnPropertyDescriptor(RP.prototype,"addProcessor"),RP.prototype),AS(RP.prototype,"removeProcessor",[NS,cM,NP],Object.getOwnPropertyDescriptor(RP.prototype,"removeProcessor"),RP.prototype),AS(RP.prototype,"renderVideo",[kP,NS,lM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"renderVideo"),RP.prototype),AS(RP.prototype,"stopRenderVideo",[VP,NS,pM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"stopRenderVideo"),RP.prototype),AS(RP.prototype,"updateVideoCanvasDimension",[UP,NS,hM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"updateVideoCanvasDimension"),RP.prototype),AS(RP.prototype,"adjustRenderedVideoPosition",[VP,NS,mM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"adjustRenderedVideoPosition"),RP.prototype),AS(RP.prototype,"clearVideoCanvas",[UP,NS,gM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"clearVideoCanvas"),RP.prototype),AS(RP.prototype,"mirrorVideo",[NS,SM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"mirrorVideo"),RP.prototype),AS(RP.prototype,"enableHardwareAcceleration",[NS,vM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"enableHardwareAcceleration"),RP.prototype),AS(RP.prototype,"subscribeVideoStatisticData",[NS,fM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"subscribeVideoStatisticData"),RP.prototype),AS(RP.prototype,"unsubscribeVideoStatisticData",[NS,yM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"unsubscribeVideoStatisticData"),RP.prototype),AS(RP.prototype,"previewVirtualBackground",[NS,EM,_M],Object.getOwnPropertyDescriptor(RP.prototype,"previewVirtualBackground"),RP.prototype),AS(RP.prototype,"updateVirtualBackgroundImage",[NS,IM,AM],Object.getOwnPropertyDescriptor(RP.prototype,"updateVirtualBackgroundImage"),RP.prototype),AS(RP.prototype,"stopPreviewVirtualBackground",[NS,bM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"stopPreviewVirtualBackground"),RP.prototype),AS(RP.prototype,"previewVideoMask",[LP,NS,CM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"previewVideoMask"),RP.prototype),AS(RP.prototype,"updateVideoMask",[NS,TM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"updateVideoMask"),RP.prototype),AS(RP.prototype,"stopPreviewVideoMask",[NS,RM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"stopPreviewVideoMask"),RP.prototype),AS(RP.prototype,"requestFarEndCameraControl",[NS,OM,MP],Object.getOwnPropertyDescriptor(RP.prototype,"requestFarEndCameraControl"),RP.prototype),AS(RP.prototype,"approveFarEndCameraControl",[NS,DM,MP],Object.getOwnPropertyDescriptor(RP.prototype,"approveFarEndCameraControl"),RP.prototype),AS(RP.prototype,"declineFarEndCameraControl",[NS,wM,MP],Object.getOwnPropertyDescriptor(RP.prototype,"declineFarEndCameraControl"),RP.prototype),AS(RP.prototype,"giveUpFarEndCameraControl",[NS,NM,MP],Object.getOwnPropertyDescriptor(RP.prototype,"giveUpFarEndCameraControl"),RP.prototype),AS(RP.prototype,"controlCamera",[NS,MM,MP],Object.getOwnPropertyDescriptor(RP.prototype,"controlCamera"),RP.prototype),AS(RP.prototype,"controlFarEndCamera",[NS,PM,MP],Object.getOwnPropertyDescriptor(RP.prototype,"controlFarEndCamera"),RP.prototype),AS(RP.prototype,"attachVideo",[NS,LM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"attachVideo"),RP.prototype),AS(RP.prototype,"detachVideo",[NS,kM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"detachVideo"),RP.prototype),AS(RP.prototype,"spotlight",[PS,NS,UM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"spotlight"),RP.prototype),AS(RP.prototype,"removeSpotlight",[NS,VM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"removeSpotlight"),RP.prototype),AS(RP.prototype,"removeAllSpotlights",[LS,NS,BM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"removeAllSpotlights"),RP.prototype),AS(RP.prototype,"screenshotVideo",[NS,HM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"screenshotVideo"),RP.prototype),AS(RP.prototype,"subscribeWebRTCStatsReportData",[NS,jM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"subscribeWebRTCStatsReportData"),RP.prototype),AS(RP.prototype,"unsubscribeWebRTCStatsReportData",[NS,FM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"unsubscribeWebRTCStatsReportData"),RP.prototype),AS(RP.prototype,"subscribeSystemResourceUsage",[NS,WM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"subscribeSystemResourceUsage"),RP.prototype),AS(RP.prototype,"unsubscribeSystemResourceUsage",[NS,xM,DP],Object.getOwnPropertyDescriptor(RP.prototype,"unsubscribeSystemResourceUsage"),RP.prototype),AS(RP.prototype,"startShareView",[LP,NS,$M,wP],Object.getOwnPropertyDescriptor(RP.prototype,"startShareView"),RP.prototype),AS(RP.prototype,"stopShareView",[NS,GM,wP],Object.getOwnPropertyDescriptor(RP.prototype,"stopShareView"),RP.prototype),AS(RP.prototype,"switchShareView",[NS,zM,wP],Object.getOwnPropertyDescriptor(RP.prototype,"switchShareView"),RP.prototype),AS(RP.prototype,"updateSharingCanvasDimension",[NS,qM,wP],Object.getOwnPropertyDescriptor(RP.prototype,"updateSharingCanvasDimension"),RP.prototype),AS(RP.prototype,"startShareScreen",[NS,KM,wP],Object.getOwnPropertyDescriptor(RP.prototype,"startShareScreen"),RP.prototype),AS(RP.prototype,"startShareCamera",[NS,JM,wP],Object.getOwnPropertyDescriptor(RP.prototype,"startShareCamera"),RP.prototype),AS(RP.prototype,"stopShareScreen",[NS,QM,wP],Object.getOwnPropertyDescriptor(RP.prototype,"stopShareScreen"),RP.prototype),AS(RP.prototype,"pauseShareScreen",[NS,YM,wP],Object.getOwnPropertyDescriptor(RP.prototype,"pauseShareScreen"),RP.prototype),AS(RP.prototype,"resumeShareScreen",[NS,ZM,wP],Object.getOwnPropertyDescriptor(RP.prototype,"resumeShareScreen"),RP.prototype),AS(RP.prototype,"setSharePrivilege",[PS,XM,NS,wP],Object.getOwnPropertyDescriptor(RP.prototype,"setSharePrivilege"),RP.prototype),AS(RP.prototype,"lockShare",[PS,eP,NS,wP],Object.getOwnPropertyDescriptor(RP.prototype,"lockShare"),RP.prototype),AS(RP.prototype,"shareToBreakoutRoom",[NS,PS,tP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"shareToBreakoutRoom"),RP.prototype),AS(RP.prototype,"stopShareToBreakoutRoom",[NS,PS,rP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"stopShareToBreakoutRoom"),RP.prototype),AS(RP.prototype,"muteOthersScreenShare",[NS,PS,oP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"muteOthersScreenShare"),RP.prototype),AS(RP.prototype,"enableOptimizeForSharedVideo",[NS,nP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"enableOptimizeForSharedVideo"),RP.prototype),AS(RP.prototype,"updateSharedVideoQuality",[NS,iP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"updateSharedVideoQuality"),RP.prototype),AS(RP.prototype,"subscribeShareStatisticData",[NS,sP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"subscribeShareStatisticData"),RP.prototype),AS(RP.prototype,"unsubscribeShareStatisticData",[NS,aP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"unsubscribeShareStatisticData"),RP.prototype),AS(RP.prototype,"screenshotSharedContent",[NS,uP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"screenshotSharedContent"),RP.prototype),AS(RP.prototype,"attachShareView",[NS,dP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"attachShareView"),RP.prototype),AS(RP.prototype,"detachShareView",[NS,cP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"detachShareView"),RP.prototype),AS(RP.prototype,"startAnnotation",[NS,lP,wP,BP],Object.getOwnPropertyDescriptor(RP.prototype,"startAnnotation"),RP.prototype),AS(RP.prototype,"stopAnnotation",[NS,pP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"stopAnnotation"),RP.prototype),AS(RP.prototype,"changeAnnotationPrivilege",[NS,hP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"changeAnnotationPrivilege"),RP.prototype),AS(RP.prototype,"requestShareCamera",[NS,mP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"requestShareCamera"),RP.prototype),AS(RP.prototype,"approveShareCamera",[NS,gP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"approveShareCamera"),RP.prototype),AS(RP.prototype,"declineShareCamera",[NS,SP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"declineShareCamera"),RP.prototype),AS(RP.prototype,"informShareCameraStatus",[NS,vP,wP],Object.getOwnPropertyDescriptor(RP.prototype,"informShareCameraStatus"),RP.prototype),AS(RP.prototype,"requestRemoteControl",[NS,fP,PP,HP],Object.getOwnPropertyDescriptor(RP.prototype,"requestRemoteControl"),RP.prototype),AS(RP.prototype,"giveUpRemoteControl",[NS,yP,PP],Object.getOwnPropertyDescriptor(RP.prototype,"giveUpRemoteControl"),RP.prototype),AS(RP.prototype,"startRemoteControl",[NS,EP,PP],Object.getOwnPropertyDescriptor(RP.prototype,"startRemoteControl"),RP.prototype),AS(RP.prototype,"grabRemoteControl",[NS,_P,PP],Object.getOwnPropertyDescriptor(RP.prototype,"grabRemoteControl"),RP.prototype),AS(RP.prototype,"updateRemoteControlViewportDimension",[NS,IP,PP],Object.getOwnPropertyDescriptor(RP.prototype,"updateRemoteControlViewportDimension"),RP.prototype),AS(RP.prototype,"approveRemoteControl",[NS,AP,PP],Object.getOwnPropertyDescriptor(RP.prototype,"approveRemoteControl"),RP.prototype),AS(RP.prototype,"declineRemoteControl",[NS,bP,PP],Object.getOwnPropertyDescriptor(RP.prototype,"declineRemoteControl"),RP.prototype),AS(RP.prototype,"stopRemoteControl",[NS,CP,PP],Object.getOwnPropertyDescriptor(RP.prototype,"stopRemoteControl"),RP.prototype),AS(RP.prototype,"launchRemoteControlApp",[NS,TP,PP],Object.getOwnPropertyDescriptor(RP.prototype,"launchRemoteControlApp"),RP.prototype),RP);var FP,WP,xP,$P,GP,zP,qP,KP,JP;const QP=kE("Audio"),YP=kE("Sharing");let ZP=(FP=kS("share"),WP=kS("audio"),xP=kS("audio"),$P=kS("audio"),GP=kS("audio"),zP=kS("audio"),qP=kS("audio"),KP=kS("audio"),JP=class extends jP{switchSharingSecondaryCamera(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{video:{cameraDevicesList:s},share:{status:a,isSharingWithSecondCamera:u}}=i;return"default"!==t&&-1===s.map((e=>e.deviceId)).indexOf(t)?Promise.reject({type:Xe,reason:"Cannot find cameraDeviceId in camera devices list.",errorCode:wa.STREAM_MISMATCH_DEVICE}):(a===z.Sharing&&u&&n.changeSharingSecondCamera(t),o(sA(t)),Promise.resolve())})(this[n],e)}muteUserAudioLocally(e){return((e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,i=o(),{audio:{locallyMutedAudioList:s}}=i,a=Nu(i).filter((e=>e.audio===ye.Computer));return s.includes(t)||-1===a.findIndex((e=>e.userId===t))||(r.muteOrUnmuteOtherAudio(t,!0),n(uI(t))),Promise.resolve("")})(this[n],e)}unmuteUserAudioLocally(e){return((e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,{audio:{locallyMutedAudioList:i}}=o();return i.includes(t)?(r.muteOrUnmuteOtherAudio(t,!1),n(dI(t)),Promise.resolve("")):Promise.resolve("")})(this[n],e)}adjustUserAudioVolumeLocally(e,t){return((e,t,r)=>{const{mediaAgent:o,store:{getState:n,dispatch:i}}=e,s=n();return-1!==Nu(s).findIndex((e=>e.userId===t))&&(o.adjustOtherAudioVolume(t,r),i(cI({userId:t,volume:r}))),Promise.resolve("")})(this[n],e,t)}muteAllUserAudioLocally(){return(e=>{const{mediaAgent:t,store:{getState:r,dispatch:o}}=e,{audio:{isStopAllImcomingAudio:n}}=r();return n||(t.stopAllIncomingAudio(!0),o(SI(!0))),Promise.resolve("")})(this[n])}unmuteAllUserAudioLocally(){return(e=>{const{mediaAgent:t,store:{getState:r,dispatch:o}}=e,{audio:{isStopAllImcomingAudio:n,locallyMutedAudioList:i}}=r();return n&&(t.stopAllIncomingAudio(!1),o(SI(!1)),i.length>0&&i.forEach((e=>{t.muteOrUnmuteOtherAudio(e,!1),o(dI(e))}))),Promise.resolve("")})(this[n])}startSecondaryAudio(e,t){return(async(e,t,r)=>{const{mediaAgent:o,rwgAgent:n,store:{getState:i,dispatch:s}}=e,a=i(),{audio:{microphoneDevicesList:u,activeMicrophone:d,isWebRtcAudioCapable:c},share:{status:l}}=a,p=Tu(a);if(!ju.isSupportShare2ndAudioDevice(c))return Promise.reject({type:Ke,reason:"Cannot start secondary audio due to platform is not supported",errorCode:wa.SECONDARY_AUDIO_UNSUPPORTED});if((null==p?void 0:p.audio)===ye.Computer&&d===t)return Promise.reject({type:Ke,reason:"Cannot start secondary audio with the same microphone",errorCode:wa.SECONDARY_AUDIO_DEVICE_CONFLICT});if(l!==z.End)return Promise.reject({type:Ke,reason:"Cannot start secondary audio while screen sharing is in progress",errorCode:wa.SECONDARY_AUDIO_SCREEN_SHARING_CONFLICT});let h=u;if(0===u.length){const{microphones:e}=await Nr(Ld());h=e}return t&&-1===h.findIndex((e=>e.deviceId===t))?Promise.reject({type:Xe,reason:"Cannot find the microphone",errorCode:wa.STREAM_MISMATCH_DEVICE}):(n.muteShareAudio(!1,!0),o.share2ndAudio(t,r),s(AI(t)),qa(Hi))})(this[n],e,t)}stopSecondaryAudio(){return(async e=>{const{mediaAgent:t,rwgAgent:r,store:{getState:o,dispatch:n}}=e,i=o(),{audio:{secondaryAudioMicrophoneId:s}}=i;if(!s)return Promise.reject({type:Ke,reason:"Cannot stop secondary audio due to not started ",errorCode:wa.SECONDARY_AUDIO_NOT_STARTED});r.muteShareAudio(!0,!0),t.leaveSharingAudio(!1),n(AI(void 0))})(this[n])}isUserAudioMutedLocally(e){return(({store:{getState:e}},t)=>{const{audio:{locallyMutedAudioList:r}}=e();return r.includes(t)})(this[n],e)}getUserVolumeLocally(e){return(({store:{getState:e}},t)=>{var r,o;const{audio:{localUserAudioVolumeList:n,locallyMutedAudioList:i}}=e();return null!==(r=null===(o=n.find((e=>e.userId===t)))||void 0===o?void 0:o.volume)&&void 0!==r?r:i.includes(t)?0:100})(this[n],e)}},AS(JP.prototype,"switchSharingSecondaryCamera",[NS,FP,YP],Object.getOwnPropertyDescriptor(JP.prototype,"switchSharingSecondaryCamera"),JP.prototype),AS(JP.prototype,"muteUserAudioLocally",[NS,WP,QP],Object.getOwnPropertyDescriptor(JP.prototype,"muteUserAudioLocally"),JP.prototype),AS(JP.prototype,"unmuteUserAudioLocally",[NS,xP,QP],Object.getOwnPropertyDescriptor(JP.prototype,"unmuteUserAudioLocally"),JP.prototype),AS(JP.prototype,"adjustUserAudioVolumeLocally",[NS,$P,QP],Object.getOwnPropertyDescriptor(JP.prototype,"adjustUserAudioVolumeLocally"),JP.prototype),AS(JP.prototype,"muteAllUserAudioLocally",[NS,GP,QP],Object.getOwnPropertyDescriptor(JP.prototype,"muteAllUserAudioLocally"),JP.prototype),AS(JP.prototype,"unmuteAllUserAudioLocally",[NS,zP,QP],Object.getOwnPropertyDescriptor(JP.prototype,"unmuteAllUserAudioLocally"),JP.prototype),AS(JP.prototype,"startSecondaryAudio",[NS,qP,QP],Object.getOwnPropertyDescriptor(JP.prototype,"startSecondaryAudio"),JP.prototype),AS(JP.prototype,"stopSecondaryAudio",[NS,KP,QP],Object.getOwnPropertyDescriptor(JP.prototype,"stopSecondaryAudio"),JP.prototype),JP);const XP={controlStatus:hu.NotStarted,sequenceId:1,rooms:[],isHugeBO:!1,allocationPattern:pu.Automatically,currentRoom:{status:gu.Initial,boStatus:mu.NoToken,boConfId:"",boId:"",name:"",boToken:""},options:{isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60,isAutoMoveBackToMainSession:!1,isRoomSelectionEnabled:!1},mainSessionAttendeeList:[],preAssignedRooms:[],meetingElapsedTime:0,startRoomElapsedTime:0,closingRoomTime:0,broadcastMessage:"",hostReplyToQuestionerType:void 0,hostReplyToRequestId:void 0,isUserRoleUpdated:!1,mainSessionConfId:"",isEnableBOBroadcast:!1,isEnableBreakoutRoom:!1,isEnableBOViewActivityStatus:!1,inRoomUserActivityStatusMap:{},isEnableBOBroadcastVoice:!1,isBroadcastVoice:!1},eL=zc({[`${PT}`]:sy(((e,{payload:t})=>{Array.isArray(t)?e.rooms.push(...t):e.rooms.push(t)})),[`${LT}`]:sy(((e,{payload:t})=>{e.allocationPattern=t})),[`${kT}`]:sy(((e,{payload:t})=>{e.sequenceId=t})),[`${UT}`]:sy(((e,{payload:t})=>{e.meetingElapsedTime=t})),[`${VT}`]:sy(((e,{payload:t})=>{e.startRoomElapsedTime=t})),[`${BT}`]:sy(((e,{payload:t})=>{const{options:r}=e;Object.assign(r,t)})),[`${HT}`]:sy(((e,{payload:t})=>{e.controlStatus=t})),[`${jT}`]:sy(((e,{payload:t})=>{e.rooms=t})),[`${FT}`]:sy(((e,{payload:t})=>{const{currentRoom:r}=e;Object.assign(r,t)})),[`${WT}`]:sy(((e,{payload:t})=>{const{currentRoom:r}=e;r.status=t})),[`${xT}`]:sy(((e,{payload:t})=>{const{currentRoom:r}=e;r.boConfId=t})),[`${$T}`]:sy(((e,{payload:t})=>{const{currentRoom:r}=e;r.boToken=t})),[`${zT}`]:sy(((e,{payload:t})=>{e.closingRoomTime=t})),[`${qT}`]:sy(((e,{payload:t})=>{e.broadcastMessage=t})),[`${KT}`]:sy(((e,{payload:t})=>{e.hostReplyToQuestionerType=t})),[`${JT}`]:sy(((e,{payload:t})=>{e.hostReplyToRequestId=t})),[`${QT}`]:sy(((e,{payload:t})=>{void 0!==t.add&&t.add.length>0&&t.add.forEach((t=>{const r=e.mainSessionAttendeeList.find((e=>e.userId===t.userId));void 0!==r?Object.assign(r,t):cu(t.userRole)||e.mainSessionAttendeeList.push(t)})),void 0!==t.update&&t.update.length>0&&t.update.forEach((t=>{const r=e.mainSessionAttendeeList.find((e=>e.userId===t.userId));void 0!==r&&Object.assign(r,t)})),void 0!==t.remove&&t.remove.length>0&&t.remove.forEach((t=>{const r=e.mainSessionAttendeeList.findIndex((e=>e.userId===t.userId));-1!==r&&e.mainSessionAttendeeList.splice(r,1)}))})),[`${YT}`]:sy(((e,{payload:t})=>{e.isHugeBO=t})),[`${XT}`]:sy(((e,{payload:t})=>{e.isUserRoleUpdated=t})),[`${ZT}`]:sy(((e,{payload:t})=>{e.preAssignedRooms=t})),[`${eR}`]:sy(((e,{payload:t})=>{e.isEnableBreakoutRoom=t.isEnableBreakoutRoom,e.isEnableBOBroadcast=t.isEnableBOBroadcast,e.isEnableBOViewActivityStatus=t.isEnableBOViewActivityStatus,e.isEnableBOBroadcastVoice=t.isEnableBOBroadcastVoice})),[`${tR}`]:sy(((e,{payload:t})=>{const{userGuid:r,status:o}=t,{inRoomUserActivityStatusMap:n}=e;n[`${r}`]=o})),[`${rR}`]:sy(((e,{payload:t})=>{e.isBroadcastVoice=t})),[`${GT}`]:e=>{const{currentRoom:{status:t}}=e;return t===gu.Joining?{...XP,preAssignedRooms:e.preAssignedRooms,currentRoom:e.currentRoom,closingRoomTime:e.closingRoomTime}:t===gu.Leaving?{...XP,preAssignedRooms:e.preAssignedRooms,closingRoomTime:e.closingRoomTime}:{...XP,preAssignedRooms:e.preAssignedRooms}}},XP);var tL=Uint8Array,rL=Uint16Array,oL=Uint32Array,nL=new tL([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),iL=new tL([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sL=new tL([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aL=function(e,t){for(var r=new rL(31),o=0;o<31;++o)r[o]=t+=1<<e[o-1];var n=new oL(r[30]);for(o=1;o<30;++o)for(var i=r[o];i<r[o+1];++i)n[i]=i-r[o]<<5|o;return[r,n]},uL=aL(nL,2),dL=uL[0],cL=uL[1];dL[28]=258,cL[258]=28;for(var lL=aL(iL,0),pL=lL[0],hL=lL[1],mL=new rL(32768),gL=0;gL<32768;++gL){var SL=(43690&gL)>>>1|(21845&gL)<<1;SL=(61680&(SL=(52428&SL)>>>2|(13107&SL)<<2))>>>4|(3855&SL)<<4,mL[gL]=((65280&SL)>>>8|(255&SL)<<8)>>>1}var vL=function(e,t,r){for(var o=e.length,n=0,i=new rL(t);n<o;++n)e[n]&&++i[e[n]-1];var s,a=new rL(t);for(n=0;n<t;++n)a[n]=a[n-1]+i[n-1]<<1;if(r){s=new rL(1<<t);var u=15-t;for(n=0;n<o;++n)if(e[n])for(var d=n<<4|e[n],c=t-e[n],l=a[e[n]-1]++<<c,p=l|(1<<c)-1;l<=p;++l)s[mL[l]>>>u]=d}else for(s=new rL(o),n=0;n<o;++n)e[n]&&(s[n]=mL[a[e[n]-1]++]>>>15-e[n]);return s},fL=new tL(288);for(gL=0;gL<144;++gL)fL[gL]=8;for(gL=144;gL<256;++gL)fL[gL]=9;for(gL=256;gL<280;++gL)fL[gL]=7;for(gL=280;gL<288;++gL)fL[gL]=8;var yL=new tL(32);for(gL=0;gL<32;++gL)yL[gL]=5;var EL=vL(fL,9,0),_L=vL(fL,9,1),IL=vL(yL,5,0),AL=vL(yL,5,1),bL=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},CL=function(e,t,r){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(7&t)&r},TL=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},RL=function(e){return(e+7)/8|0},OL=function(e,t,r){(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length);var o=new(2==e.BYTES_PER_ELEMENT?rL:4==e.BYTES_PER_ELEMENT?oL:tL)(r-t);return o.set(e.subarray(t,r)),o},DL=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],wL=function(e,t,r){var o=new Error(t||DL[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,wL),!r)throw o;return o},NL=function(e,t,r){r<<=7&t;var o=t/8|0;e[o]|=r,e[o+1]|=r>>>8},ML=function(e,t,r){r<<=7&t;var o=t/8|0;e[o]|=r,e[o+1]|=r>>>8,e[o+2]|=r>>>16},PL=function(e,t){for(var r=[],o=0;o<e.length;++o)e[o]&&r.push({s:o,f:e[o]});var n=r.length,i=r.slice();if(!n)return[jL,0];if(1==n){var s=new tL(r[0].s+1);return s[r[0].s]=1,[s,1]}r.sort((function(e,t){return e.f-t.f})),r.push({s:-1,f:25001});var a=r[0],u=r[1],d=0,c=1,l=2;for(r[0]={s:-1,f:a.f+u.f,l:a,r:u};c!=n-1;)a=r[r[d].f<r[l].f?d++:l++],u=r[d!=c&&r[d].f<r[l].f?d++:l++],r[c++]={s:-1,f:a.f+u.f,l:a,r:u};var p=i[0].s;for(o=1;o<n;++o)i[o].s>p&&(p=i[o].s);var h=new rL(p+1),m=LL(r[c-1],h,0);if(m>t){o=0;var g=0,S=m-t,v=1<<S;for(i.sort((function(e,t){return h[t.s]-h[e.s]||e.f-t.f}));o<n;++o){var f=i[o].s;if(!(h[f]>t))break;g+=v-(1<<m-h[f]),h[f]=t}for(g>>>=S;g>0;){var y=i[o].s;h[y]<t?g-=1<<t-h[y]++-1:++o}for(;o>=0&&g;--o){var E=i[o].s;h[E]==t&&(--h[E],++g)}m=t}return[new tL(h),m]},LL=function(e,t,r){return-1==e.s?Math.max(LL(e.l,t,r+1),LL(e.r,t,r+1)):t[e.s]=r},kL=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new rL(++t),o=0,n=e[0],i=1,s=function(e){r[o++]=e},a=1;a<=t;++a)if(e[a]==n&&a!=t)++i;else{if(!n&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(n),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(n);i=1,n=e[a]}return[r.subarray(0,o),t]},UL=function(e,t){for(var r=0,o=0;o<t.length;++o)r+=e[o]*t[o];return r},VL=function(e,t,r){var o=r.length,n=RL(t+2);e[n]=255&o,e[n+1]=o>>>8,e[n+2]=255^e[n],e[n+3]=255^e[n+1];for(var i=0;i<o;++i)e[n+i+4]=r[i];return 8*(n+4+o)},BL=function(e,t,r,o,n,i,s,a,u,d,c){NL(t,c++,r),++n[256];for(var l=PL(n,15),p=l[0],h=l[1],m=PL(i,15),g=m[0],S=m[1],v=kL(p),f=v[0],y=v[1],E=kL(g),_=E[0],I=E[1],A=new rL(19),b=0;b<f.length;++b)A[31&f[b]]++;for(b=0;b<_.length;++b)A[31&_[b]]++;for(var C=PL(A,7),T=C[0],R=C[1],O=19;O>4&&!T[sL[O-1]];--O);var D,w,N,M,P=d+5<<3,L=UL(n,fL)+UL(i,yL)+s,k=UL(n,p)+UL(i,g)+s+14+3*O+UL(A,T)+(2*A[16]+3*A[17]+7*A[18]);if(P<=L&&P<=k)return VL(t,c,e.subarray(u,u+d));if(NL(t,c,1+(k<L)),c+=2,k<L){D=vL(p,h,0),w=p,N=vL(g,S,0),M=g;var U=vL(T,R,0);for(NL(t,c,y-257),NL(t,c+5,I-1),NL(t,c+10,O-4),c+=14,b=0;b<O;++b)NL(t,c+3*b,T[sL[b]]);c+=3*O;for(var V=[f,_],B=0;B<2;++B){var H=V[B];for(b=0;b<H.length;++b){var j=31&H[b];NL(t,c,U[j]),c+=T[j],j>15&&(NL(t,c,H[b]>>>5&127),c+=H[b]>>>12)}}}else D=EL,w=fL,N=IL,M=yL;for(b=0;b<a;++b)if(o[b]>255){j=o[b]>>>18&31,ML(t,c,D[j+257]),c+=w[j+257],j>7&&(NL(t,c,o[b]>>>23&31),c+=nL[j]);var F=31&o[b];ML(t,c,N[F]),c+=M[F],F>3&&(ML(t,c,o[b]>>>5&8191),c+=iL[F])}else ML(t,c,D[o[b]]),c+=w[o[b]];return ML(t,c,D[256]),c+w[256]},HL=new oL([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),jL=new tL(0),FL=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,o=9;--o;)r=(1&r&&-306674912)^r>>>1;e[t]=r}return e}(),WL=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8};function xL(e,t){t||(t={});var r=function(){var e=-1;return{p:function(t){for(var r=e,o=0;o<t.length;++o)r=FL[255&r^t[o]]^r>>>8;e=r},d:function(){return~e}}}(),o=e.length;r.p(e);var n=function(e,t,r,o){return function(e,t,r,o,n,i){var s=e.length,a=new tL(o+s+5*(1+Math.ceil(s/7e3))+n),u=a.subarray(o,a.length-n),d=0;if(!t||s<8)for(var c=0;c<=s;c+=65535){var l=c+65535;l>=s&&(u[d>>3]=i),d=VL(u,d+1,e.subarray(c,l))}else{for(var p=HL[t-1],h=p>>>13,m=8191&p,g=(1<<r)-1,S=new rL(32768),v=new rL(g+1),f=Math.ceil(r/3),y=2*f,E=function(t){return(e[t]^e[t+1]<<f^e[t+2]<<y)&g},_=new oL(25e3),I=new rL(288),A=new rL(32),b=0,C=0,T=(c=0,0),R=0,O=0;c<s;++c){var D=E(c),w=32767&c,N=v[D];if(S[w]=N,v[D]=w,R<=c){var M=s-c;if((b>7e3||T>24576)&&M>423){d=BL(e,u,0,_,I,A,C,T,O,c-O,d),T=b=C=0,O=c;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)A[P]=0}var L=2,k=0,U=m,V=w-N&32767;if(M>2&&D==E(c-V))for(var B=Math.min(h,M)-1,H=Math.min(32767,c),j=Math.min(258,M);V<=H&&--U&&w!=N;){if(e[c+L]==e[c+L-V]){for(var F=0;F<j&&e[c+F]==e[c+F-V];++F);if(F>L){if(L=F,k=V,F>B)break;var W=Math.min(V,F-2),x=0;for(P=0;P<W;++P){var $=c-V+P+32768&32767,G=$-S[$]+32768&32767;G>x&&(x=G,N=$)}}}V+=(w=N)-(N=S[w])+32768&32767}if(k){_[T++]=268435456|cL[L]<<18|hL[k];var z=31&cL[L],q=31&hL[k];C+=nL[z]+iL[q],++I[257+z],++A[q],R=c+L,++b}else _[T++]=e[c],++I[e[c]]}}d=BL(e,u,i,_,I,A,C,T,O,c-O,d)}return OL(a,0,o+RL(d)+n)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,r,o,!0)}(e,t,function(e){return 10+(e.filename&&e.filename.length+1||0)}(t),8),i=n.length;return function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&WL(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var o=0;o<=r.length;++o)e[o+10]=r.charCodeAt(o)}}(n,t),WL(n,i-8,r.d()),WL(n,i-4,o),n}var $L="undefined"!=typeof TextEncoder&&new TextEncoder,GL="undefined"!=typeof TextDecoder&&new TextDecoder;try{GL.decode(jL,{stream:!0})}catch(mf){}const{WebclientBreakoutRoomAttendeeStatus:zL,WebclientBreakoutRoomCommand:qL}=by,KL=NE(ju.getInstance());function JL(e,t){let r=0;for(;r<e.length;r++){const o=e[r],{attendeeGuidList:n}=o;if(null!=n&&n.includes(t))break}return r<e.length?e[r]:void 0}function QL(){Ay.remove(zL),Ay.remove(qL)}function YL(){return E_.createAgent().leaveBO(1),$a($o,{reason:ko.BackToMainSession}),QL(),[WT(gu.Leaving),Mg(Fo.NormalCase)]}function ZL(e,t){return $a($o,{reason:ko.JoinBreakoutRoom,roomName:e}),t===gu.InRoom&&E_.createAgent().leaveBO(1),[WT(gu.Joining),Mg(Fo.NormalCase)]}function XL(e){return $a($o,{reason:ko.MoveToBreakoutRoom,roomName:e}),E_.createAgent().leaveBO(1),[WT(gu.Joining),Mg(Fo.NormalCase)]}function ek(e){return e!==gu.InRoom&&e!==gu.Joining&&e!==gu.Leaving}function tk(e,t=!1){const r=t?gu.InRoom:gu.Invited;return Ay.set(zL,JSON.stringify({status:r,boId:e.boId}),_y.SessionStorage),FT({status:r,boId:e.boId,name:e.name,boStatus:e.boStatus})}function rk(e){const{breakoutRoom:{isUserRoleUpdated:t,currentRoom:{boConfId:r}}}=e.value,o=Tu(e.value);if(o&&(!r||r&&t))return Cr(o.isHost);{const t=r?Ka(aa,1):Ka(Oo,1).pipe($r((e=>uu(e.userRole)?br([1]):co(Ka(Do).pipe(uo((e=>void 0!==e.userRole&&void 0===e.displayName||void 0!==e.bVideoConnect)),mo(1)),Ka(wo).pipe(uo((e=>e.some((e=>uu(e.userRole))))),mo(1)),ro(3e3)))));return t.pipe(_r(Zt),Ro(e),Ur((([,e])=>Tu(e).isHost)))}}function ok(e){return Jr({boIdList:Ka(Ys).pipe(Eo(((e,t)=>[...e,t]),[]),mo(e))}).pipe(Lr(1e4))}const nk=[{mask:_u.Connect,key:"audio",value:""},{mask:_u.Voip,key:"audio",value:"computer"},{mask:_u.Muted,key:"muted",value:!0},{mask:Iu.Connect,key:"bVideoOn",value:!1},{mask:Iu.On,key:"bVideoOn",value:!0},{mask:Au.Share,key:"sharerOn",value:!0},{mask:Au.ShareAudio,key:"bShareAudioOn",value:!0}];function ik(e,t){const r=(OO(t)?t.breakoutRoom.mainSessionAttendeeList:t.participants.attendeesList).find((t=>t.userId===Number(e)));return r?{inviterId:r.userId,inviterGuid:r.userGUID,inviterName:r.displayName}:{}}const sk=E_.createAgent(),ak=["userRole","bCoHost","bCCEditor","bHold"],uk=E_.createAgent(),dk=NE(ju.getInstance());var ck;const lk=E_.createAgent(),pk=NE(ju.getInstance()),hk=kE("Breakout Room");let mk=(ck=class extends I_{createRooms(e,o){const n=this[t](),i=this[r],{breakoutRoom:{isHugeBO:s,sequenceId:a,rooms:u,controlStatus:d,isEnableBreakoutRoom:c}}=n;if(!c)return Promise.reject({type:Ke,reason:"Breakout room feature is not enabled.",errorCode:wa.SUBSESSION_ACCOUNT_DISABLE});if(d===hu.InProgress||d===hu.Closing)return Promise.reject({type:Ke,reason:"breakout room has started!",errorCode:wa.SUBSESSION_MISMATCH_STATE});let l;l="string"==typeof e?[e]:"number"==typeof e?Array.from({length:e}).map(((e,t)=>`${vu} ${t+a}`)):e;const p=s?100:50;return l.length<1||u.length+l.length>p?Promise.reject({type:Xe,reason:"exceed maximum size",errorCode:wa.SUBSESSION_EXCEED_CAPACITY}):(lk.batchCreateBOToken(l),new Promise(((e,t)=>{ok(l.length).subscribe({next({boIdList:t}){let r=t.map(((e,t)=>({boId:e,name:l[t]})));if(o===pu.Automatically){const e=DO(n),t=r.length,o=e.length;r=r.map(((r,n)=>{const i=[];let s=n;for(;s<o;)i.push(e[s]),s+=t;return{...r,attendeeList:i}}))}const s=r.map((({boId:e,name:t,attendeeList:r})=>({boId:e,name:t,attendeeGuidList:r&&r.map((e=>e.userGUID))})));if(i(PT(s)),i(LT(o)),i(kT(a+r.length)),o===pu.Automatically){const t=r.map((e=>({roomId:e.boId,name:e.name,attendeeList:e.attendeeList.map((e=>({userId:e.userId,avatar:e.avatar,displayName:e.displayName})))})));e(t)}else e(r.map((e=>({roomId:e.boId,name:e.name,attendeeList:[]}))))},error(){t({type:Je,errorCode:wa.INTERNAL_ERROR})}})})))}recreateRooms(e,o){const n=this[t](),i=this[r],{breakoutRoom:{isHugeBO:s,sequenceId:a,controlStatus:u,isEnableBreakoutRoom:d}}=n;if(!d)return Promise.reject({type:Ke,reason:"Breakout room feature is not enabled.",errorCode:wa.SUBSESSION_ACCOUNT_DISABLE});if(u===hu.InProgress||u===hu.Closing)return Promise.reject({type:Ke,reason:"breakout room has started!",errorCode:wa.SUBSESSION_MISMATCH_STATE});let c;c="string"==typeof e?[e]:"number"==typeof e?Array.from({length:e}).map(((e,t)=>`${vu} ${t+a}`)):e;const l=s?100:50;return c.length<1||c.length>l?Promise.reject({type:Xe,reason:"exceed maximum size",errorCode:wa.SUBSESSION_EXCEED_CAPACITY}):(lk.batchCreateBOToken(c),new Promise(((e,t)=>{ok(c.length).subscribe((({boIdList:t})=>{let r=t.map(((e,t)=>({boId:e,name:c[t]})));if(o===pu.Automatically){const e=r.length,t=wO(n),o=t.length;r=r.map(((r,n)=>{const i=[];let s=n;for(;s<o;)i.push(t[s]),s+=e;return{...r,attendeeList:i}}))}const s=r.map((({boId:e,name:t,attendeeList:r})=>({boId:e,name:t,attendeeGuidList:r&&r.map((e=>e.userGUID))})));if(i(jT(s)),i(LT(o)),i(kT(a+r.length)),o===pu.Automatically){const t=r.map((e=>({roomId:e.boId,name:e.name,attendeeList:e.attendeeList.map((e=>({userId:e.userId,avatar:e.avatar,displayName:e.displayName})))})));e(t)}else e(r.map((e=>({roomId:e.boId,name:e.name,attendeeList:[]}))))}),(()=>{t({type:Je,errorCode:wa.INTERNAL_ERROR})}))})))}openRooms(e,r){var o;const n=this[t](),i={isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60,isAutoMoveBackToMainSession:!1,isRoomSelectionEnabled:!1},{breakoutRoom:{controlStatus:s,rooms:a,sequenceId:u,isHugeBO:d}}=n;if(s===hu.InProgress||s===hu.Closing)return Promise.reject({type:Ke,reason:"breakout room has started!",errorCode:wa.SUBSESSION_MISMATCH_STATE});if(e.some((e=>-1===a.findIndex((t=>t.boId===e.roomId)))))return Promise.reject({type:Xe,reason:"roomId is wrong",errorCode:wa.SUBSESSION_MISMATCH_ID});const c=Nu(n);if(e.reduce(((e,t)=>e.concat(t.attendeeList)),[]).some((e=>-1===c.findIndex((t=>t.userId===e.userId)))))return Promise.reject({type:Xe,reason:"Invalid user",errorCode:wa.SUBSESSION_MISMATCH_USER});const l=e.map((e=>{const{attendeeList:t}=e,r=t.map((e=>{const t=c.find((t=>t.userId===e.userId));return null==t?void 0:t.userGUID}));return{BID:e.roomId,MeetingTitle:e.name,MeetingToken:void 0,Status:mu.Started,HostID:"",ParticipantList:r}})),p=r?{...i,...r}:i,h={ControlStatus:hu.InProgress,NameIndex:u,IsAutoJoinEnabled:+p.isAutoJoinRoom,IsBackToMainSessionEnabled:+p.isBackToMainSessionEnabled,IsTimerEnabled:+p.isTimerEnabled,TimerDuration:p.timerDuration,IsTimerAutoEndEnabled:+p.isTimerAutoEnabled,WaitSeconds:p.waitSeconds<0?0:p.waitSeconds,StartTimeOnMMR:void 0,ItemList:l,IsAutoMovetoMainSessionEnabled:p.isAutoMoveBackToMainSession,IsParticipantsChooseRoomEnabled:+p.isRoomSelectionEnabled};let m=pd(JSON.stringify(h));if(d&&(m=(e=>dd(xL(function(e){if($L)return $L.encode(e);for(var t=e.length,r=new tL(e.length+(e.length>>1)),o=0,n=function(e){r[o++]=e},i=0;i<t;++i){if(o+5>r.length){var s=new tL(o+8+(t-i<<1));s.set(r),r=s}var a=e.charCodeAt(i);a<128?n(a):a<2048?(n(192|a>>6),n(128|63&a)):a>55295&&a<57344?(n(240|(a=65536+(1047552&a)|1023&e.charCodeAt(++i))>>18),n(128|a>>12&63),n(128|a>>6&63),n(128|63&a)):(n(224|a>>12),n(128|a>>6&63),n(128|63&a))}return OL(r,0,o)}(e))))(m)),null!==(o=Tu(n))&&void 0!==o&&o.isHost)lk.startBO(m);else{const e=NO(n);e&&lk.coHostStartBO(m,e.userId)}return qa(na,(e=>e.controlStatus===hu.InProgress))}joinRoom(e){const r=this[t](),o=Tu(r),{breakoutRoom:{controlStatus:n,rooms:i,options:{isRoomSelectionEnabled:s},currentRoom:{status:a,boId:u}},meeting:{userGUID:d}}=r;if(n!==hu.InProgress)return Promise.reject({type:Ke,reason:"Breakout room is not started",errorCode:wa.SUBSESSION_MISMATCH_STATE});if(null!=o&&o.isHost){const t=i.find((t=>t.boId===e));if(!t)return Promise.reject({type:Xe,reason:"Room ID is not correct",errorCode:wa.SUBSESSION_MISMATCH_ID});lk.joinBO(t.boId)}else if(null!=o&&o.bCoHost){if(!i.find((t=>t.boId===e)))return Promise.reject({type:Xe,reason:"Room ID is not correct",errorCode:wa.SUBSESSION_MISMATCH_ID});{const t=NO(r);if(!t)return Promise.reject({type:Ke,reason:"No host in the meeting, cannot join the room",errorCode:wa.SUBSESSION_MISMATCH_STATE});lk.wantJoinBO(null==t?void 0:t.userId,e)}}else{if(a===gu.InRoom&&u===e)return Promise.resolve("");{let t=!1;const o=JL(i,d);if(o&&o.boId===e)lk.joinBO(o.boId);else if(s)if(-1!==i.findIndex((t=>t.boId===e))){const t=NO(r);if(!t)return Promise.reject({type:Ke,reason:"No host in the meeting, cannot join the room",errorCode:wa.SUBSESSION_MISMATCH_STATE});lk.wantJoinBO(t.userId,e)}else t=!0;else t=!0;if(t)return Promise.reject({type:Xe,reason:"Room ID is not correct",errorCode:wa.SUBSESSION_MISMATCH_ID})}}return qa(ia,(t=>t.boId===e))}leaveRoom(){const e=this[t](),o=this[r],{breakoutRoom:{controlStatus:n,options:i,currentRoom:{status:s}}}=e;if(n!==hu.InProgress&&n!==hu.Closing||s!==gu.InRoom)return Promise.reject({type:Ke,errorCode:wa.SUBSESSION_MISMATCH_STATE});{const t=Ru(e);if(!i.isBackToMainSessionEnabled&&!t)return Promise.reject({type:Ye,reason:"Can not return main session during the breakout room",errorCode:wa.SUBSESSION_EXIT_RESTRICTED});YL().forEach((e=>o(e)))}return Promise.resolve("")}askForHelp(){const e=this[t](),{breakoutRoom:{controlStatus:r,mainSessionAttendeeList:o,currentRoom:{status:n}},participants:{attendeesList:i}}=e,s=Ru(e);if(r!==hu.InProgress||n!==gu.InRoom)return Promise.reject({type:Ke,reason:"you are not in breakout room",errorCode:wa.SUBSESSION_MISMATCH_STATE});if(s)return Promise.reject({type:Ke,reason:"host or co-host can not ask for help",errorCode:wa.SUBSESSION_MISMATCH_USER});{const e=o.find((e=>e.isHost));if(e){if(i.findIndex((t=>t.zoomID===e.zoomID))>-1)return Promise.reject({type:Ke,reason:"host is in room",errorCode:wa.SUBSESSION_MISMATCH_STATE});lk.askForHelpBO(e.userId)}}return qa(oa,(e=>e.result===fu.Received))}postponeHelping(e){const o=this[t](),n=this[r],{breakoutRoom:{mainSessionAttendeeList:i,currentRoom:{status:s}},participants:{attendeesList:a}}=o;let u=a;return s===gu.InRoom&&(u=i),u.findIndex((t=>t.userId===e))>-1?(lk.askForHelpResultBO(e,fu.Ignore),n(KT(fu.Ignore)),Promise.resolve("")):Promise.reject({type:Xe,reason:"user id is not correct",errorCode:wa.SUBSESSION_MISMATCH_USER})}broadcast(e){const{breakoutRoom:{isEnableBOBroadcast:r}}=this[t]();return r?e?Sb.beginEncrypt({text:e,type:pb.BO_BROADCAST}).then((e=>(lk.broadcastBO(e),Promise.resolve("")))):Promise.reject({type:Xe,reason:"content empty",errorCode:wa.SUBSESSION_BROADCAST_INVALID_CONTENT}):Promise.reject({type:Ke,reason:"Cannot broadcast message due to the feature is not enable",errorCode:wa.SUBSESSION_BROADCAST_DISABLE})}startBroadcastVoice(){const e=this[t](),o=this[r],{breakoutRoom:{isEnableBOBroadcast:n,isEnableBOBroadcastVoice:i,isBroadcastVoice:s}}=e;if(n&&i){if(OO(e))return Promise.reject({type:Ke,reason:"Cannot broadcast voice in the room",errorCode:wa.SUBSESSION_BROADCAST_VOICE_RESTRICTED});{if(s)return Promise.resolve("");const t=Tu(e);return(null==t?void 0:t.audio)===ye.Computer&&!1===t.muted?(lk.broadcastVoiceReq(!0),pk.broadcastVoiceToBreakoutRoom(!0),o(rR(!0)),Promise.resolve("")):Promise.reject({type:Ke,reason:"Start audio and unmute to broadcast",errorCode:wa.SUBSESSION_BROADCAST_VOICE_MISMATCH_STATE})}}return Promise.reject({type:Ke,reason:"Cannot broadcast voice due to the feature is not enable",errorCode:wa.SUBSESSION_BROADCAST_VOICE_DISABLE})}stopBroadcastVoice(){const e=this[t](),o=this[r],{breakoutRoom:{isBroadcastVoice:n}}=e;return n?(lk.broadcastVoiceReq(!1),pk.broadcastVoiceToBreakoutRoom(!1),o(rR(!1)),Promise.resolve("")):Promise.reject({type:Ke,reason:"Cannot stop broadcast voice due to it is not started",errorCode:wa.SUBSESSION_BROADCAST_VOICE_MISMATCH_STATE})}assignUserToRoom(e,r){const o=this[t](),{breakoutRoom:{rooms:n}}=o,i=DO(o).find((t=>t.userId===e));if(!(i&&n.findIndex((e=>e.boId===r))>-1))return Promise.reject({type:Xe,reason:"Invalid user",errorCode:wa.SUBSESSION_MISMATCH_USER});var s;if(null!==(s=Tu(o))&&void 0!==s&&s.isHost)lk.assignToBO(e,r);else{const e=NO(o);e&&lk.coHostAssignToBO(i.userGUID,r,e.userId)}return qa(na,(e=>{const{controlStatus:t,roomList:o}=e,n=o.find((e=>e.boId===r));return t===hu.InProgress&&n&&n.attendeeGuidList.includes(i.userGUID)}))}moveUserToRoom(e,r){const o=this[t](),{breakoutRoom:{rooms:n,mainSessionAttendeeList:i},participants:{attendeesList:s}}=o,a=(OO(o)?i:s).find((t=>t.userId===e));if(!a)return Promise.reject({type:Xe,reason:"user id not correct",errorCode:wa.SUBSESSION_MISMATCH_USER});{const t=JL(n,a.userGUID);if(!t)return Promise.reject({type:Ke,reason:"user not in a room",errorCode:wa.SUBSESSION_MISMATCH_USER});if(t.boId===r)return Promise.reject({type:Ke,reason:"user already in the target room",errorCode:wa.SUBSESSION_MISMATCH_STATE});{const t=n.find((e=>e.boId===r));if(!t)return Promise.reject({type:Xe,reason:"invalid room id",errorCode:wa.SUBSESSION_MISMATCH_ID});var u;if(null!==(u=Tu(o))&&void 0!==u&&u.isHost)lk.switchBO(e,t.boId);else{const e=NO(o);e&&lk.coHostAssignToBO(a.userGUID,t.boId,e.userId)}}}return qa(na,(e=>{const{controlStatus:t,roomList:o}=e,n=o.find((e=>e.boId===r));return t===hu.InProgress&&n&&n.attendeeGuidList.includes(a.userGUID)}))}moveBackToMainSession(e){const r=this[t](),{breakoutRoom:{rooms:o,mainSessionAttendeeList:n},participants:{attendeesList:i}}=r,s=(OO(r)?n:i).find((t=>t.userId===e));if(!s)return Promise.reject({type:Xe,reason:"user id not correct",errorCode:wa.SUBSESSION_MISMATCH_USER});if(!JL(o,s.userGUID))return Promise.reject({type:Ke,reason:"user not in a room",errorCode:wa.SUBSESSION_MISMATCH_USER});var a;if(null!==(a=Tu(r))&&void 0!==a&&a.isHost)lk.moveToMainSession(s.userGUID);else{const e=NO(r);e&&lk.coHostMoveToMainSession(s.userGUID,e.userId)}return qa(na,(e=>{const{controlStatus:t,roomList:r}=e;return t===hu.InProgress&&r.some((e=>{const{attendeeGuidList:t}=e;return t.includes(s.userGUID)}))}))}closeRoom(){const e=this[t](),{breakoutRoom:{controlStatus:r}}=e;if(r!==hu.InProgress)return Promise.reject({type:Ke,reason:"room is not started",errorCode:wa.SUBSESSION_MISMATCH_STATE});var o;if(null!==(o=Tu(e))&&void 0!==o&&o.isHost)lk.stopBO(hu.Closing);else{const t=NO(e);t&&lk.coHostStopBO(hu.Closing,t.userId)}return qa(na,(e=>e.controlStatus===hu.Closing))}loadPreAssignedRooms(){const e=this[t](),{meeting:{meetingOptions:r},breakoutRoom:{controlStatus:o}}=e;return!r.isAllowBreakoutRoomPreAssign||o!==hu.NotStarted&&o!==hu.Closed?Promise.reject({type:Ke,errorCode:wa.SUBSESSION_MISMATCH_STATE}):(lk.preAssignBreakoutRoom(),qa(ua))}getUnassignedAttendeeList(){const e=this[t](),r=Tu(e);return null!=r&&r.isHost||null!=r&&r.bCoHost?DO(e).map((e=>bO(e))):[]}getRoomList(){const e=this[t](),{breakoutRoom:{rooms:r,currentRoom:{status:o,boId:n},mainSessionAttendeeList:i,inRoomUserActivityStatusMap:s,options:{isRoomSelectionEnabled:a}},participants:{attendeesList:u}}=e,d=Tu(e);if(d&&(d.isHost||d.bCoHost||a)){const e=o===gu.InRoom,t=e?i:u;return r.map((r=>{const{attendeeGuidList:o,boId:i,name:a}=r,u=(o||[]).map((e=>t.find((t=>t.userGUID===e)))).filter((e=>!(null!=e&&e.isHost))).filter(Boolean);return e&&d.isHost&&i===n&&u.unshift(d),{roomId:i,name:a,attendeeList:u.filter((e=>!!e)).map((e=>{var t;const r=null!==(t=s[e.userGUID])&&void 0!==t?t:{};return{userId:e.userId,displayName:e.displayName,avatar:e.avatar,isInRoom:e.bid===i,userGuid:e.userGUID,...r}}))}}))}return e.breakoutRoom.rooms.map((e=>{const{boId:t,name:r}=e;return{roomId:t,name:r,attendeeList:[]}}))}getAttendeeStatus(){return this[t]().breakoutRoom.currentRoom.status}getRoomStatus(){return this[t]().breakoutRoom.controlStatus}getCurrentRoom(){const e=this[t](),{breakoutRoom:{currentRoom:{status:r,name:o,boId:n}}}=e;return{attendeeStatus:r,name:o,roomId:n}}getRoomOptions(){const e=this[t](),{breakoutRoom:{options:r}}=e,{whoStart:o,whoStop:n,...i}=r;return{...i}}isBreakoutRoomEnabled(){const e=this[t](),{breakoutRoom:{isEnableBreakoutRoom:r}}=e;return!!r}},AS(ck.prototype,"createRooms",[NS,PS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"createRooms"),ck.prototype),AS(ck.prototype,"recreateRooms",[NS,PS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"recreateRooms"),ck.prototype),AS(ck.prototype,"openRooms",[NS,PS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"openRooms"),ck.prototype),AS(ck.prototype,"joinRoom",[NS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"joinRoom"),ck.prototype),AS(ck.prototype,"leaveRoom",[NS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"leaveRoom"),ck.prototype),AS(ck.prototype,"askForHelp",[NS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"askForHelp"),ck.prototype),AS(ck.prototype,"postponeHelping",[LS,NS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"postponeHelping"),ck.prototype),AS(ck.prototype,"broadcast",[PS,NS],Object.getOwnPropertyDescriptor(ck.prototype,"broadcast"),ck.prototype),AS(ck.prototype,"startBroadcastVoice",[LS,NS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"startBroadcastVoice"),ck.prototype),AS(ck.prototype,"stopBroadcastVoice",[LS,NS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"stopBroadcastVoice"),ck.prototype),AS(ck.prototype,"assignUserToRoom",[PS,NS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"assignUserToRoom"),ck.prototype),AS(ck.prototype,"moveUserToRoom",[PS,NS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"moveUserToRoom"),ck.prototype),AS(ck.prototype,"moveBackToMainSession",[PS,NS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"moveBackToMainSession"),ck.prototype),AS(ck.prototype,"closeRoom",[PS,NS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"closeRoom"),ck.prototype),AS(ck.prototype,"loadPreAssignedRooms",[LS,NS,hk],Object.getOwnPropertyDescriptor(ck.prototype,"loadPreAssignedRooms"),ck.prototype),ck);const gk={breakoutRoomSharingEpics0:(e,t)=>_v(e,Rv).pipe(uo((e=>{var t;const{payload:{body:r}}=e;return null==r||null===(t=r.update)||void 0===t?void 0:t.some((e=>void 0!==e.bShareToBORooms||void 0!==e.bShareOn))})),Ro(t),Ur((([e,t])=>{const{payload:{body:{update:r}}}=e,{breakoutRoom:{mainSessionAttendeeList:o}}=t,n=r.filter((e=>e.bShareOn&&e.bShareToBORooms)),i=r.filter((e=>!e.bShareOn||!e.bShareToBORooms)),s=o.filter((e=>e.sharerOn&&e.bShareToBORooms));return n.length>0&&n.forEach((e=>{-1===s.findIndex((t=>t.userId===e.id))&&$a(rs,{...e,isFromMainSession:!0})})),i.length>0&&i.filter((e=>s.findIndex((t=>t.userId===e.id))>-1)).forEach((e=>{$a(os,{...e,isFromMainSession:!0})})),r.map((e=>{if(e.bShareOn&&e.bShareToBORooms){if(0===o.filter((t=>t.sharerOn&&t.bShareToBORooms&&t.userId!==e.id)).length)return{activeNodeID:e.id,bStatus:1,ssrc:e.shareSsrc};{const t=o.find((t=>t.userId===e.id));if(null!=t&&t.isHost)return{activeNodeID:e.id,bStatus:1,ssrc:e.shareSsrc}}}else if(!e.bShareOn||!e.bShareToBORooms){const t=o.filter((e=>e.bShareToBORooms&&e.sharerOn));if(1===t.length&&t[0].userId===e.id)return{activeNodeID:e.id,bStatus:0,ssrc:0};{const r=t.filter((t=>t.userId!==e.id)),o=r.find((e=>e.isHost));if(o)return{activeNodeID:o.userId,bStatus:1,ssrc:o.shareSsrc};{const e=r[0];if(e)return{activeNodeID:e.userId,bStatus:1,ssrc:e.shareSsrc}}}}})).filter(Boolean)})),$r((e=>{const{share:{status:r},meeting:{userId:o}}=t.value,n=[];return e.map((e=>{const{activeNodeID:i,bStatus:s,ssrc:a}=e,u=1===s;n.push(oA(u)),u&&r!==z.End&&(uk.stopSharing(o),dk.stopDesktopSharing(),n.push(YI(z.End)),$a(es));let d={activeNodeID:i,bStatus:s,ssrc:a,fromMainSession:!0};if(!u){const{participants:{attendeesList:e}}=t.value,r=e.filter((e=>e.sharerOn));if(r.length>0){const e=r[0];d={activeNodeID:e.userId,bStatus:1,ssrc:e.shareSsrc||0}}}n.push(xS({evt:Cv,body:d}))})),br(n)}))),breakoutRoomSharingEpics1:(e,t)=>_v(e,Nv).pipe(Ao((r=>{const{payload:{body:{userID:o,confID:n}}}=r;return no(...["sharing","audio"].map((r=>function(e,t,r,o,n){return _v(t,"audio"===e?Dv:Tv).pipe(mo(1),To((t=>{const{payload:{body:{encryptKey:i,additionalType:s}}}=t,{media:{sharingDecodeStatus:a,audioDecodeStatus:u},meeting:{svcUrl:d,meetingNumber:c,conId:l,zoomId:p,meetingId:h}}=r.value;Nd(e,"success","audio"===e?u:a).subscribe((([,t])=>{if(t){const t=`wss://${d}/wc/media/${c}?type=${"audio"===e?"ma":"ms"}&cid=${l}&mode=1`;KL.createMainSessionChannel(e,t),KL.updateMediaParams({iVType:"audio"===e?cb.AUDIO_DECODE:cb.SHARING_DECODE,isFromMainSession:!0,updateParams:{userId:o,sn:md(p),confId:n,encryptType:s,encryptKey:md(i),meetingId:h,meetingNumber:c}});const{breakoutRoom:{mainSessionAttendeeList:a}}=r.value;if((null==a?void 0:a.length)>0){const t=a.map((e=>({userid:e.userId,sn:e.zoomID&&md(e.zoomID)})));KL.updateUserMediaSN({added:t,isFromMainSession:!0,iVType:"audio"===e?cb.AUDIO_DECODE:cb.SHARING_DECODE})}}}))})),$r((()=>or)))}(r,e,t,o,n))))})))},Sk={epics0:(e,t)=>e.pipe(BS(`${Kg}`),Ao((e=>{const{breakoutRoom:r,meeting:{meetingOptions:o}}=t.value,{payload:{hugeBO:n,elapsed:i}}=e,s=[];return r&&(o&&(s.push(YT(n&&!0===o.isBO100Enabled)),s.push(eR({isEnableBreakoutRoom:o.isEnableBreakoutRoom,isEnableBOBroadcast:o.isEnableBOBroadcast,isEnableBOViewActivityStatus:o.isEnableBOViewActivityStatus,isEnableBOBroadcastVoice:o.isEnableBOBroadcastVoice}))),r.currentRoom.boConfId&&s.push(zS()),void 0!==i&&s.push(UT(i))),br(s)}))),epics1:e=>Ev(e,4174).pipe(To((e=>{$a(Ys,e.payload.body.bid)})),yo(or)),epics2:(e,t)=>Av(e,7950).pipe(Ro(t),Ao((([e,r])=>{const{payload:{body:{proto:o}}}=e,{breakoutRoom:{isHugeBO:n,currentRoom:{status:i,boId:s}},meeting:{userGUID:a}}=r;let u=o;n&&(u=function(e){if(GL)return GL.decode(e);var t=function(e){for(var t="",r=0;;){var o=e[r++],n=(o>127)+(o>223)+(o>239);if(r+n>e.length)return[t,OL(e,r-1)];n?3==n?(o=((15&o)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,t+=String.fromCharCode(55296|o>>10,56320|1023&o)):t+=1&n?String.fromCharCode((31&o)<<6|63&e[r++]):String.fromCharCode((15&o)<<12|(63&e[r++])<<6|63&e[r++]):t+=String.fromCharCode(o)}}(e),r=t[0];return t[1].length&&wL(8),r}(function(e){return function(e,t,r){var o=e.length;if(!o||r&&r.f&&!r.l)return t||new tL(0);var n=!t||r,i=!r||r.i;r||(r={}),t||(t=new tL(3*o));var s=function(e){var r=t.length;if(e>r){var o=new tL(Math.max(2*r,e));o.set(t),t=o}},a=r.f||0,u=r.p||0,d=r.b||0,c=r.l,l=r.d,p=r.m,h=r.n,m=8*o;do{if(!c){a=CL(e,u,1);var g=CL(e,u+1,3);if(u+=3,!g){var S=e[(R=RL(u)+4)-4]|e[R-3]<<8,v=R+S;if(v>o){i&&wL(0);break}n&&s(d+S),t.set(e.subarray(R,v),d),r.b=d+=S,r.p=u=8*v,r.f=a;continue}if(1==g)c=_L,l=AL,p=9,h=5;else if(2==g){var f=CL(e,u,31)+257,y=CL(e,u+10,15)+4,E=f+CL(e,u+5,31)+1;u+=14;for(var _=new tL(E),I=new tL(19),A=0;A<y;++A)I[sL[A]]=CL(e,u+3*A,7);u+=3*y;var b=bL(I),C=(1<<b)-1,T=vL(I,b,1);for(A=0;A<E;){var R,O=T[CL(e,u,C)];if(u+=15&O,(R=O>>>4)<16)_[A++]=R;else{var D=0,w=0;for(16==R?(w=3+CL(e,u,3),u+=2,D=_[A-1]):17==R?(w=3+CL(e,u,7),u+=3):18==R&&(w=11+CL(e,u,127),u+=7);w--;)_[A++]=D}}var N=_.subarray(0,f),M=_.subarray(f);p=bL(N),h=bL(M),c=vL(N,p,1),l=vL(M,h,1)}else wL(1);if(u>m){i&&wL(0);break}}n&&s(d+131072);for(var P=(1<<p)-1,L=(1<<h)-1,k=u;;k=u){var U=(D=c[TL(e,u)&P])>>>4;if((u+=15&D)>m){i&&wL(0);break}if(D||wL(2),U<256)t[d++]=U;else{if(256==U){k=u,c=null;break}var V=U-254;if(U>264){var B=nL[A=U-257];V=CL(e,u,(1<<B)-1)+dL[A],u+=B}var H=l[TL(e,u)&L],j=H>>>4;if(H||wL(3),u+=15&H,M=pL[j],j>3&&(B=iL[j],M+=TL(e,u)&(1<<B)-1,u+=B),u>m){i&&wL(0);break}n&&s(d+131072);for(var F=d+V;d<F;d+=4)t[d]=t[d-M],t[d+1]=t[d+1-M],t[d+2]=t[d+2-M],t[d+3]=t[d+3-M];d=F}}r.l=c,r.p=k,r.b=d,r.f=a,c&&(a=1,r.m=p,r.d=l,r.n=h)}while(!a);return d==t.length?t:OL(t,0,d)}(e.subarray(function(e){31==e[0]&&139==e[1]&&8==e[2]||wL(6,"invalid gzip data");var t=e[3],r=10;4&t&&(r+=e[10]|2+(e[11]<<8));for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[r++]);return r+(2&t)}(e),-8),new tL(function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}(e)))}(md(o))));const d=[];let c;try{const r=JSON.parse(ld(u)),{ControlStatus:o,NameIndex:n,IsAutoJoinEnabled:l,IsBackToMainSessionEnabled:p,IsParticipantsChooseRoomEnabled:h,IsTimerEnabled:m,TimerDuration:g,IsTimerAutoEndEnabled:S,WaitSeconds:v,StartTimeOnMMR:f,ItemList:y,WhoStart:E,WhoStop:_,IsAutoMovetoMainSessionEnabled:I}=r,A={isAutoJoinRoom:l,isBackToMainSessionEnabled:p,isTimerEnabled:m,timerDuration:g,isTimerAutoEnabled:S,waitSeconds:v,isAutoMoveBackToMainSession:I,isRoomSelectionEnabled:h,whoStart:E,whoStop:_};d.push(BT(A)),d.push(VT(f)),d.push(kT(n)),d.push(HT(o));const b=y&&y.map((e=>({boId:e.BID,name:e.MeetingTitle,boStatus:e.Status,hostId:e.HostID,attendeeGuidList:e.ParticipantList||[]})))||[];switch(d.push(jT(b)),$a(na,{controlStatus:o,roomList:b}),o){case hu.InProgress:if(i!==gu.InRoom&&i!==gu.Joining){const e=function(e,t){const{meeting:{isHost:r,userGUID:o},breakoutRoom:{currentRoom:{status:n,boId:i}}}=t.value,s=Ay.get(zL),a=[];if(s)try{const{status:u,boId:d}=JSON.parse(s);if(u===gu.Invited)if(r)QL();else{const t=JL(e,o);t&&(a.push(tk(t)),n!==gu.Initial&&i===t.boId||$a(Zs,{roomId:t.boId,name:t.name}))}else if(u===gu.InRoom){let n;if(n=r?e.find((e=>e.boId===d)):JL(e,o),n){a.push(tk(n));const e=n.boId;Md(t).subscribe((()=>{E_.createAgent().joinBO(e)}))}QL()}}catch(e){console.error(e)}return a}(b,t);if(0===e.length){const e=JL(b,a);e&&d.push(tk(e))}else d.push(...e)}else if(i===gu.InRoom&&e.type===`${KS}`){const e=JL(b,a);e&&rk(t).subscribe((t=>{s===e.boId||t||sk.joinBO(e.boId)}))}A.isTimerEnabled&&A.timerDuration>0&&(c=function(e,t,r){return rk(e).pipe(Ro(e),Ao((([o,n])=>{const{breakoutRoom:{currentRoom:{status:i},meetingElapsedTime:s},meeting:{joinMeetingTimeStamp:a}}=n,u=a-1e3*s+1e3*r+1e3*t;if(performance.now()<u){if(o)return oo(1e3).pipe(Ur((()=>Math.floor((u-performance.now())/1e3))),Ro(e),Co((([e,t])=>{const{breakoutRoom:{controlStatus:r,currentRoom:{status:o}},socket:{zoomSocketStatus:n},meeting:{isHost:i}}=t;return e>=0&&i&&r===hu.InProgress&&(o===gu.InRoom||o===gu.MainSession||o===gu.Initial)&&n===N_.Connected})),To((([e])=>{$a(ea,{countdown:e})})),uo((([e])=>0===e)),To((([,e])=>{const{breakoutRoom:{options:t}}=e;t.isTimerAutoEnabled?E_.createAgent().stopBO(hu.Closing):$a(sa)})),$r((()=>or)));if(i===gu.InRoom)return oo(1e3).pipe(Ur((()=>Math.floor((u-performance.now())/1e3))),Ro(e),Co((([e,t])=>{const{breakoutRoom:{currentRoom:{status:r}},meeting:{isHost:o},socket:{zoomSocketStatus:n}}=t;return e>=0&&r===gu.InRoom&&!o&&n===N_.Connected})),To((([e])=>{$a(ea,{countdown:e})})),$r((()=>or)))}return or})))}(t,A.timerDuration,f));break;case hu.Closing:c=rk(t).pipe(uo((e=>e)),$r((()=>{const e=[],{breakoutRoom:{closingRoomTime:r,currentRoom:{status:o}},participants:{attendeesList:n}}=t.value;let i=A.waitSeconds;if(0!==r&&A.waitSeconds>0){const e=Math.floor((performance.now()-r)/1e3);i=Math.max(A.waitSeconds-e,0)}if(0===i)return sk.stopBO(hu.Closed),or;{if(o!==gu.InRoom&&n.length>1&&n.every((e=>!e.bid)))return sk.stopBO(hu.Closed),or;r||e.push(zT(performance.now()));const s=performance.now()+1e3*i;return no(br(e),ro(0,1e3).pipe(Ur((()=>Math.floor((s-performance.now())/1e3))),Ro(t),Co((([,e])=>{const{breakoutRoom:{controlStatus:t},meeting:{isHost:r},socket:{zoomSocketStatus:o}}=e;return t===hu.Closing&&o===N_.Connected&&r})),To((([e])=>{e>=0&&$a(Xs,{countdown:e})})),uo((([e])=>e<=0)),To((()=>{sk.stopBO(hu.Closed)})),$r((()=>or))))}})));break;case hu.Closed:d.push(zT(0)),i===gu.Leaving?d.push(WT(gu.MainSession)):i===gu.Invited?d.push(WT(gu.Initial)):i!==gu.InRoom&&i!==gu.Joining||d.push(...YL()),QL()}}catch(e){console.error(e)}return c?no(br(d),c):br(d)}))),epics3:(e,t)=>Av(e,4194).pipe(Ro(t),Ao((([e,t])=>{const{payload:{body:{bid:r,botoken:o,confID:n}}}=e,{meeting:{isHost:i},breakoutRoom:{rooms:s,currentRoom:{status:a}}}=t,u=[],d=s.find((e=>e.boId===r));return d&&(u.push(tk(d,i)),u.push(xT(n)),u.push($T(o)),$a(ia,{boId:r}),i||a!==gu.InRoom?u.push(...ZL(d.name,a)):u.push(...XL(d.name))),br(u)}))),epics4:(e,t)=>e.pipe(BS(`${xS}`,`${KS}`),uo((e=>7949===e.payload.evt)),Ro(t),$r((([e,r])=>{var o;const{payload:{body:n}}=e,{meeting:{userGUID:i},breakoutRoom:{rooms:s,options:{isAutoJoinRoom:a,isAutoMoveBackToMainSession:u},currentRoom:{status:d},mainSessionAttendeeList:c},participants:{attendeesList:l}}=r,{commandType:p}=n,h=[];let m;const g=null===(o=(ek(d)?l:c).find((e=>e.userGUID===i)))||void 0===o?void 0:o.userId;switch(p){case Su.Join:{const{targetBID:e,botoken:t,confID:o,joinReason:u,requestSourceID:d}=n,c=JL(s,i);if(c&&c.boId===e){h.push(xT(o)),h.push($T(t));const n=Number(u)===Eu.Active&&g===Number(d);a||n?(n&&$a(ia,{boId:e}),h.push(...ZL(c.name))):(Ay.set(by.WebclientBreakoutRoomCommand,p,_y.SessionStorage),$a(Zs,{roomId:e,name:c.name,...ik(d,r)}))}break}case Su.Switch:{const{targetBID:e,botoken:t,confID:o,joinMethod:u,requestSourceID:c}=n,l=JL(s,i);l&&l.boId===e&&(h.push(FT({boId:l.boId,boToken:t,boConfId:o,name:l.name})),g===Number(c)&&Number(u)===yu.AskToLeave&&$a(ia,{boId:e}),d===gu.Invited?(Ay.set(by.WebclientBreakoutRoomCommand,p,_y.SessionStorage),a||g===Number(c)?h.push(...ZL(l.name)):$a(Zs,{roomId:e,name:l.name,...ik(c,r)})):h.push(...XL(l.name)));break}case Su.Leave:{const{waitTime:e,joinMethod:o}=n;if(ek(d))h.push(FT({boId:"",boToken:"",boConfId:"",status:gu.Initial}));else{const i=Number(e);if(i>0){const e=performance.now()+1e3*i;m=ro(0,1e3).pipe(Ur((()=>Math.floor((e-performance.now())/1e3))),Ro(t),Co((([e,t])=>{const{breakoutRoom:{controlStatus:r,currentRoom:{status:o}},meeting:{isHost:n},socket:{zoomSocketStatus:i}}=t;return e>=0&&i===N_.Connected&&r===hu.Closing&&o===gu.InRoom&&!n})),To((([e])=>{e>=0&&$a(Xs,{countdown:e})})),yo(or))}else if(Number(o)!==yu.AskToLeave||u)h.push(...YL());else{var S,v,f;const{requestSourceID:e}=n,t=Number(e),{participants:{attendeesList:o}}=r;let i=o.find((e=>e.userId===t));if(!i){const{breakoutRoom:{mainSessionAttendeeList:e}}=r;i=e.find((e=>e.userId===t))}$a(ca,{inviterId:null===(S=i)||void 0===S?void 0:S.userId,inviterGuid:null===(v=i)||void 0===v?void 0:v.userGUID,inviterName:null===(f=i)||void 0===f?void 0:f.displayName})}QL()}break}case Su.Broadcast:{const{textContent:e,requestID:t}=n;if(e){const{meeting:{encType:o},participants:{attendeesList:n},breakoutRoom:{mainSessionAttendeeList:i}}=r;let s="";if(o===lb.AES_GCM){const e=(ek(d)?n:i).find((e=>e.userId===Number(t)));e&&(s=e.zoomID)}m=br(Sb.beginDecrypt({decryptedText:e,type:pb.BO_BROADCAST,zoomId:s}).then((({message:e})=>($a(ta,{message:e}),qT(e)))))}break}case Su.HelpReq:{const{requestID:e}=n,{breakoutRoom:{mainSessionAttendeeList:t,rooms:o,currentRoom:{boId:i},hostReplyToQuestionerType:s,hostReplyToRequestId:a},participants:{attendeesList:u}}=r;if(e){if(d===gu.InRoom){const r=t.find((t=>t.userId===e));if(r&&r.bid===i){sk.askForHelpResultBO(e,fu.AlreadyInRoom);break}}if(s===fu.Received&&a!==e)sk.askForHelpResultBO(e,fu.Busy);else{sk.askForHelpResultBO(e,fu.Received),h.push(KT(fu.Received),JT(e));const r=(d===gu.InRoom?t:u).find((t=>t.userId===e));if(r){const t=r.bid,n=o.find((e=>e.boId===t));n&&$a(ra,{userId:e,userGuid:r.userGUID,displayName:r.displayName,roomName:n.name,roomId:n.boId})}}}break}case Su.HelpRes:{const{helpResult:e}=n;$a(oa,{result:Number(e)});break}case Su.BOActivity:{var y;const{activityRoster:e,activityTalking:t,requestID:o}=n,i=null===(y=(OO(r)?r.breakoutRoom.mainSessionAttendeeList:r.participants.attendeesList).find((e=>e.userId===o)))||void 0===y?void 0:y.userGUID;if(i){const{breakoutRoom:{rooms:n}}=r,s=JL(n,i),a=function(e,t){const r={isTalking:1===t};return nk.forEach((t=>{const{mask:o,key:n,value:i}=t;(o&e)===o&&Object.assign(r,{[`${n}`]:i})})),r}(Number(e),Number(t));h.push(tR({userGuid:i,status:a})),$a(la,{...a,userId:o,userGuid:i,roomId:null==s?void 0:s.boId,roomName:null==s?void 0:s.name})}break}}return m?no(br(h),m):br(h)}))),epics5:(e,t)=>_v(e,Nv).pipe(Ro(t),Ao((([e,t])=>{const{payload:{body:{res:r,elapsed:o}}}=e,n=[];return r===KD.MeetingHasClosed||r===KD.UserHasBeenRemoved?(QL(),n.push(...yO(t,!1))):r===KD.Success&&(n.push(UT(o)),n.push(WT(gu.InRoom)),Ay.set(by.WebclientBreakoutRoomAttendeeStatus,JSON.stringify({status:gu.InRoom,boId:t.breakoutRoom.currentRoom.boId}),_y.SessionStorage)),br(n)}))),epics6:e=>_v(e,Rv).pipe(Ur((e=>af(e.payload.body))),$r((e=>{const t=[QT(e)];return $a(da),br(t)}))),epics7:(e,t)=>_v(e,Rv).pipe(Ur((e=>af(e.payload.body))),Ur((e=>{const t=[];return["add","update"].forEach((r=>e[r]&&t.push(...e[r]))),t.filter((e=>[...ak,"bAudioUnencrytped"].some((t=>void 0!==e[t]))))})),uo((e=>e.length>0)),_r(Zt),$r((e=>{const r=[],{participants:{attendeesList:o},breakoutRoom:{mainSessionAttendeeList:n,isUserRoleUpdated:i},meeting:{userId:s}}=t.value,a=e.map((e=>{const t=n.find((t=>t.userId===e.userId)),a=o.find((e=>e.userGUID===(null==t?void 0:t.userGUID)));if(a){if(void 0!==e.bCCEditor&&r.push(vT({editorId:e.bCCEditor?a.userId:"",isEditor:!!e.bCCEditor,editorZoomId:e.bCCEditor?a.zoomID:""})),delete e.bRaiseHand,delete e.bCapsPinMultiVideo,delete e.bInFailover,delete e.uniqueIndex,!i&&a.userId===s){const o={};uu(e.userRole)?Object.assign(o,e):(n.some((e=>e.isHost))||void 0!==e.bAudioUnencrytped)&&Object.assign(o,t),void 0!==o.userId&&(r.push(XT(!0)),$a(aa,e))}return{...e,userId:a.userId}}})).filter((e=>!!e&&ak.some((t=>void 0!==e[t]))));return a.length>0&&($a(No,a),r.push(qv({update:a}))),br(r)}))),epics8:e=>_v(e,Ov).pipe(uo((e=>{const{payload:{body:t}}=e;return void 0!==(null==t?void 0:t.bAllowAttendeeRename)||void 0!==(null==t?void 0:t.chatPriviledge)||void 0!==(null==t?void 0:t.lockShare)})),Ur((e=>{const{payload:{body:t}}=e;return void 0!==t.bAllowAttendeeRename?Jg(e.payload.body):void 0!==t.chatPriviledge?XC(t.chatPriviledge):void 0!==t.lockShare?zI(t.lockShare):void 0}))),epics9:(e,t)=>Ev(e,Rv).pipe(Ro(t),uo((([,e])=>{const{meeting:{isHost:t},breakoutRoom:{controlStatus:r,currentRoom:{status:o}}}=e;return t&&r===hu.Closing&&o!==gu.InRoom})),_r(Zt),To((()=>{const{participants:{attendeesList:e}}=t.value;e.every((e=>!e.bid))&&e.length>1&&sk.stopBO(hu.Closed)})),yo(or)),epics10:(e,t)=>Ev(e,4214).pipe(Ro(t),Ao((([e,r])=>{const{payload:{body:{proto:o}}}=e,{breakoutRoom:{rooms:n,isHugeBO:i}}=r;try{const e=JSON.parse(ld(o)),r=[];if(e&&e.PreAssignBoList&&Array.isArray(e.PreAssignBoList)){const o=e.PreAssignBoList.map((e=>({name:e.BoName,emails:e.email})));r.push(ZT(o));const s=i?100:50;if(n.length+o.length<s){const e=o.map((e=>e.name));return sk.batchCreateBOToken(e),no(br(r),ok(e.length).pipe(Ro(t),$r((([{boIdList:e},t])=>{const r=Nu(t),n=o.map(((t,o)=>{const{emails:n,name:i}=t;let s=[];return n&&Array.isArray(n)&&(s=n.map((e=>r.filter((t=>t.userEmail===e)).map((e=>e.userGUID)))).reduce(((e,t)=>[...e,...t]),[])),{boId:e[o],name:i,attendeeGuidList:s}})),i=n.map(((e,t)=>({roomId:e.boId,name:e.name,emails:o[t].emails})));return $a(ua,{rooms:i}),br([jT(n),ZT(i)])}))))}return br(r)}}catch(e){console.error("pre assign proto is not valid")}return or}))),epics11:(e,t)=>Av(e,Rv).pipe(Ro(t),uo((([e,t])=>{const{meeting:{isHost:r,meetingStatus:o,meetingOptions:n},breakoutRoom:{controlStatus:i}}=t,{payload:{body:s}}=e;return o===Ho.Joined&&(null==n?void 0:n.isAllowBreakoutRoomPreAssign)&&r&&(i===hu.NotStarted||i===hu.InProgress)&&Array.isArray(s.add)})),$r((([e,t])=>{const{breakoutRoom:{controlStatus:r,rooms:o,preAssignedRooms:n,currentRoom:{status:i}},participants:{failoverAttendeesList:s}}=t,a=null==n?void 0:n.filter((e=>o.findIndex((t=>t.boId===e.roomId))>-1)),{payload:{body:{add:u}}}=e,d=[];return a.length>0&&u.filter((e=>e.userEmail&&e.userGUID)).filter((e=>-1===s.findIndex((t=>t.zoomID===e.zoomID)))).forEach((t=>{if(!JL(o,t.userGUID))for(let n=0;n<(null==a?void 0:a.length);n++){const s=a[n];if(s.emails.includes(t.userEmail)){if(r===hu.NotStarted){const e=sy(o,(e=>{const r=e.find((e=>e.boId===s.roomId));null==r||r.attendeeGuidList.push(t.userGUID)}));d.push(jT(e))}else r===hu.InProgress&&(i===gu.InRoom&&e.type===`${KS}`?sk.assignToBO(t.id,String(s.roomId)):i!==gu.Initial&&i!==gu.MainSession||sk.assignToBO(t.id,String(s.roomId)));break}}})),br(d)}))),epics12:(e,t)=>Ev(e,Rv).pipe(uo((e=>{const{breakoutRoom:{mainSessionAttendeeList:r}}=t.value,{payload:{body:o}}=e;return r.length>0&&(void 0!==o.add||void 0!==o.update)})),_r(Xt),Ur((e=>af(e.payload.body))),$r((e=>{const{breakoutRoom:{mainSessionAttendeeList:r,isUserRoleUpdated:o},participants:{attendeesList:n}}=t.value;let i=[];const s=[];["add","update"].forEach((t=>e[t]&&i.push(...e[t])));const a=[...ak,"isHost"];i=i.filter((e=>a.some((t=>void 0!==e[t]))));const u=i.filter((e=>void 0!==e.zoomID));return i=i.map((e=>{var t,i,d,c;const l=null!==(t=null!==(i=e.zoomID)&&void 0!==i?i:null===(d=u.find((t=>t.userId===e.userId)))||void 0===d?void 0:d.zoomID)&&void 0!==t?t:null===(c=n.find((t=>t.userId===e.userId)))||void 0===c?void 0:c.zoomID;if(l){const t=r.find((e=>e.zoomID===l));if(t)return o||(s.push(XT(!0)),$a(aa,t)),Object.keys(e).filter((t=>Object.prototype.hasOwnProperty.call(e,t))).filter((e=>a.includes(e))).reduce(((r,o)=>{const n=t[o];if(void 0!==n||"bCoHost"===o){const t="boolean"==typeof e[o]?!!n:n;Object.assign(r,{[o]:t})}return r}),{userId:e.userId})}})).filter(Boolean),i.length>0&&($a(No,i),s.push(qv({update:i}))),br(s)}))),epics13:e=>_v(e,7999).pipe(To((e=>{const{payload:{body:{bStatus:t}}}=e;$a(pa,{status:!!t})})),$r((()=>or))),epics14:(e,t)=>Ev(e,7940).pipe($r((e=>{const{payload:{body:{bHost:r}}}=e,{breakoutRoom:{isBroadcastVoice:o}}=t.value,n=[];return!r&&o&&(ju.getInstance().broadcastVoiceToBreakoutRoom(!1),n.push(rR(!1))),br(n)})))},vk=yv(Sk,gk);let fk=function(e){return e[e.Ready=0]="Ready",e[e.UserSub=1]="UserSub",e[e.ManualCaptionerEnabled=2]="ManualCaptionerEnabled",e[e.ManualCaptionerDisabled=3]="ManualCaptionerDisabled",e}({}),yk=function(e){return e[e.Unspecified=-1]="Unspecified",e[e.English=0]="English",e[e["Chinese (Simplified)"]=1]="Chinese (Simplified)",e[e.Japanese=2]="Japanese",e[e.German=3]="German",e[e.French=4]="French",e[e.Russian=5]="Russian",e[e.Portuguese=6]="Portuguese",e[e.Spanish=7]="Spanish",e[e.Korean=8]="Korean",e[e.Italian=9]="Italian",e[e.Reserved=10]="Reserved",e[e.Vietnamese=11]="Vietnamese",e[e.Dutch=12]="Dutch",e[e.Ukrainian=13]="Ukrainian",e[e.Arabic=14]="Arabic",e[e["Chinese (Traditional)"]=16]="Chinese (Traditional)",e[e.Czech=17]="Czech",e[e.Estonian=18]="Estonian",e[e.Finnish=19]="Finnish",e[e.Hebrew=21]="Hebrew",e[e.Hindi=22]="Hindi",e[e.Hungarian=23]="Hungarian",e[e.Indonesian=24]="Indonesian",e[e.Malay=25]="Malay",e[e.Persian=26]="Persian",e[e.Polish=27]="Polish",e[e.Romanian=28]="Romanian",e[e.Swedish=29]="Swedish",e[e.Tamil=30]="Tamil",e[e.Telugu=31]="Telugu",e[e.Tagalog=32]="Tagalog",e[e.Turkish=33]="Turkish",e[e["French (Canada)"]=34]="French (Canada)",e[e.Danish=35]="Danish",e[e.Thai=37]="Thai",e[e.Cantonese=44]="Cantonese",e[e.Catalan=48]="Catalan",e[e.NoTranslation=400]="NoTranslation",e[e.DefaultManualInput=401]="DefaultManualInput",e[e.Customized=500]="Customized",e}({}),Ek=function(e){return e[e.Unknown=0]="Unknown",e[e.Close=1]="Close",e[e.New=2]="New",e[e.Insert=3]="Insert",e[e.Delete=4]="Delete",e[e.Reset=5]="Reset",e[e.Audiodesc=6]="Audiodesc",e[e.Speaker=7]="Speaker",e[e.Error=8]="Error",e}({}),_k=function(e){return e[e.TranslateNotSupport=1]="TranslateNotSupport",e}({}),Ik=function(e){return e[e.Unspecified=0]="Unspecified",e[e.InMeetingManual=1]="InMeetingManual",e[e.ExternalCaptioner=2]="ExternalCaptioner",e[e.ASR=4]="ASR",e}({});const Ak={en:0,zh:1,ja:2,de:3,fr:4,ru:5,pt:6,es:7,ko:8,it:9,en1:10,vi:11,nl:12,uk:13,ar:14,"zh-hant":16,cs:17,et:18,fi:19,he:21,hi:22,hu:23,id:24,ms:25,fa:26,pl:27,ro:28,sv:29,ta:30,te:31,tl:32,tr:33,"fr-ca":34,da:35,th:37,"zh-yue":44,ca:48},bk=Object.keys(yk).filter((e=>/\d+/.test(yk[e]))).reduce(((e,t)=>({...e,[`${yk[t]}`]:t})),{}),Ck=Object.keys(Ak).reduce(((e,t)=>(Object.assign(e,{[`${Ak[`${t}`]}`]:t}),e)),{}),Tk="zoom-sdk-live-transcription",Rk="live-transcription";let Ok=function(e){return e[e.English=0]="English",e[e.Chinese=1]="Chinese",e[e.Japanese=2]="Japanese",e[e.German=3]="German",e[e.French=4]="French",e[e.Russian=5]="Russian",e[e.Portuguese=6]="Portuguese",e[e.Spanish=7]="Spanish",e[e.Korean=8]="Korean",e[e.Italian=9]="Italian",e[e.Reserved=10]="Reserved",e[e.Vietnamese=11]="Vietnamese",e[e.Dutch=12]="Dutch",e[e.Ukrainian=13]="Ukrainian",e[e.Arabic=14]="Arabic",e[e["Chinese (Traditional)"]=16]="Chinese (Traditional)",e[e.Czech=17]="Czech",e[e.Estonian=18]="Estonian",e[e.Finnish=19]="Finnish",e[e.Hebrew=21]="Hebrew",e[e.Hindi=22]="Hindi",e[e.Hungarian=23]="Hungarian",e[e.Indonesian=24]="Indonesian",e[e.Malay=25]="Malay",e[e.Persian=26]="Persian",e[e.Polish=27]="Polish",e[e.Romanian=28]="Romanian",e[e.Swedish=29]="Swedish",e[e.Tamil=30]="Tamil",e[e.Telugu=31]="Telugu",e[e.Tagalog=32]="Tagalog",e[e.Turkish=33]="Turkish",e[e["French (Canada)"]=34]="French (Canada)",e[e.Danish=35]="Danish",e[e.Thai=37]="Thai",e[e.Cantonese=44]="Cantonese",e[e.Catalan=48]="Catalan",e[e.NoTranslation=400]="NoTranslation",e[e.DefaultManualInput=401]="DefaultManualInput",e}({}),Dk=function(e){return e.English="en",e["Chinese (Simplified)"]="zh",e.Japanese="ja",e.German="de",e.French="fr",e.Russian="ru",e.Portuguese="pt",e.Spanish="es",e.Korean="ko",e.Italian="it",e.Reserved="en1",e.Vietnamese="vi",e.Dutch="nl",e.Ukrainian="uk",e.Arabic="ar",e["Chinese (Traditional)"]="zh-hant",e.Czech="cs",e.Estonian="et",e.Finnish="fi",e.Hebrew="he",e.Hindi="hi",e.Hungarian="hu",e.Indonesian="id",e.Malay="ms",e.Persian="fa",e.Polish="pl",e.Romanian="ro",e.Swedish="sv",e.Tamil="ta",e.Telugu="te",e.Tagalog="tl",e.Turkish="tr",e["French (Canada)"]="fr-ca",e.Danish="da",e.Thai="th",e.Cantonese="zh-yue",e.Catalan="ca",e}({}),wk=function(e){return e.Individual="individual",e.Session="session",e}({});function Nk(e){const t=e===yk.Unspecified?yk.Reserved:e;ju.getInstance().selectLanguageChannelForNewLTT(t)}function Mk(e,t,r){const{state:o,rwgAgent:n}=r,{liveTranscription:{isSomeoneTranslating:i,isHostLockSpeakingLanguage:s},meeting:{isWebinar:a}}=o,u=null!=e?e:yk.English;var d;s||a?n.setSpokenLanguage(u):((null===(d=Tu(o))||void 0===d?void 0:d.audio)===ye.Computer&&Nk(null!=e?e:yk.Unspecified),void 0!==e&&t&&(i||n.setTranscriptionLanguage(u,0)))}const Pk=eu(Xa,(function(e,t){return cm(e,t)}))([Nu,({meeting:{gatewayUserList:e}})=>e],((e,t)=>{const r={};return e.forEach((e=>{Object.assign(r,{[`${e.userId}`]:e.zoomID})})),null==t||t.forEach((e=>{Object.assign(r,{[`${e.userId}`]:e.sn})})),r})),Lk=tu([Nu],(e=>e.find((e=>!0===e.bCCEditor)))),kk=tu([Nu,ou],((e,t)=>e.some((e=>!0===e.bCCEditor&&e.userId===t)))),Uk=E_.createAgent(),Vk={isEnableTranslatedCaptions:!1,isHostLockSpeakingLanguage:!1,transcriptionLang:[],isEnableAutomatedCaptions:!1,supportedTranscriptionLanguage:[],isLiveTranscriptionEnabled:!1,isHostDisableCaptions:!1,isManualCaptionerEnabled:!1,gatewayId:void 0,isLiveTranscriptionSubscribed:!1,messageRecords:[],isRecordsReduced:!1,reducedRecordsCount:0,isSomeoneSetSessionTranscription:!1,isSomeoneTranslating:!1,isTranscriptionLanguageLocked:!1,isExternalCaptionerCaptioning:!1,externalCcUrl:void 0,transcriptionMode:wk.Individual},Bk=zc({[`${RR}`]:sy(((e,{payload:t})=>{e.isLiveTranscriptionEnabled=t})),[`${OR}`]:sy(((e,{payload:t})=>{const{transcriptionLang:r,translatedSetting:o,...n}=t;if(r&&(e.transcriptionLang=r.split(";").map((e=>{const t=e&&Ak[e];return void 0!==t?{lang:e,code:t}:null})).filter(Boolean)),o){const t=Object.keys(o).map((e=>{const t=o[e];if(t){const r=t.split(";").map((e=>{const t=e&&Ak[e];return void 0!==t?{lang:e,code:t}:null})).filter(Boolean);return{lang:e,code:Ak[e],translatedToLanguage:r}}return null})).filter(Boolean),r=t.reduce(((e,t)=>(t.translatedToLanguage.forEach((t=>{-1===e.findIndex((e=>e.code===t.code))&&e.push(t)})),e)),[]);e.translatedSetting=t,e.translationLang=r}Object.assign(e,n)})),[`${DR}`]:sy(((e,{payload:t})=>{e.isManualCaptionerEnabled=t})),[`${wR}`]:sy(((e,{payload:t})=>{e.gatewayId=t})),[`${WR}`]:sy(((e,{payload:t})=>{e.isHostDisableCaptions=t})),[`${NR}`]:sy(((e,{payload:t})=>{e.supportedTranscriptionLanguage=t})),[`${PR}`]:sy(((e,{payload:t})=>{e.currentTranscriptionLang=t})),[`${LR}`]:sy(((e,{payload:t})=>{e.currentTranslationLang=t})),[`${kR}`]:sy(((e,{payload:t})=>{e.messageRecords.push(t)})),[`${UR}`]:sy(((e,{payload:t})=>{const r=e.messageRecords.find((e=>e.msgId===t.msgId));r&&Object.assign(r,t)})),[`${VR}`]:sy(((e,{payload:t})=>{const{remains:r,reducedRecordsCount:o}=t,n=e.messageRecords.length-r;e.isRecordsReduced=!0,e.reducedRecordsCount=o,e.messageRecords.splice(0,n)})),[`${MR}`]:sy(((e,{payload:t})=>{e.isLiveTranscriptionSubscribed=t})),[`${BR}`]:sy(((e,{payload:t})=>{e.liveTransEngineType=t})),[`${HR}`]:sy((e=>{e.stateBeforeFailover=void 0})),[`${jR}`]:sy(((e,{payload:t})=>{e.lastManualCaption=t})),[`${xR}`]:sy(((e,{payload:t})=>{e.isSomeoneSetSessionTranscription=t})),[`${$R}`]:sy(((e,{payload:t})=>{e.isSomeoneTranslating=t})),[`${GR}`]:sy(((e,{payload:t})=>{e.isTranscriptionLanguageLocked=t})),[`${zR}`]:sy(((e,{payload:t})=>{e.isExternalCaptionerCaptioning=t})),[`${qR}`]:sy(((e,{payload:t})=>{e.externalCcUrl=t})),[`${KR}`]:sy(((e,{payload:t})=>{e.transcriptionMode=t})),[`${FR}`]:(e,{payload:t})=>t?{...Vk,stateBeforeFailover:{currentTranscriptionLang:e.currentTranscriptionLang,currentTranslationLang:e.currentTranslationLang,isLiveTranscriptionSubscribed:e.isLiveTranscriptionSubscribed,transcriptionMode:e.transcriptionMode},messageRecords:e.messageRecords,isRecordsReduced:e.isRecordsReduced,reducedRecordsCount:e.reducedRecordsCount}:{...Vk}},Vk);var Hk;const jk=E_.createAgent(),Fk=kE("Live transcription");let Wk=(Hk=class extends I_{startLiveTranscription(){const{[t]:e,[r]:o}=this,{liveTranscription:{isLiveTranscriptionEnabled:n,isEnableTranslatedCaptions:i,isLiveTranscriptionSubscribed:s,isHostDisableCaptions:a}}=e();return s?Promise.resolve(""):a?Promise.reject({type:Ke,reason:"Captions has been disabled by host.",errorCode:wa.TRANSCRIPTION_FEATURE_DISABLE}):n?(jk.enableNewLLT(),qa(en).then((()=>{const{liveTranscription:{currentTranscriptionLang:t,transcriptionMode:r,isSomeoneSetSessionTranscription:n}}=e(),s=null!=t?t:yk.English;return Mk(t,r===wk.Session&&!n,{state:e(),rwgAgent:jk}),o(PR(s)),i&&jk.setTranslationLanguage(),qa({event:en,operations:[uo((e=>!0===e.autoCaption&&void 0!==e.lang)),mo(1)]})}))):Promise.reject({type:Ke,reason:"Live transcription is not enabled.",errorCode:wa.TRANSCRIPTION_ACCOUNT_DISABLE})}disableCaptions(e){const{[t]:r}=this,{liveTranscription:{isHostDisableCaptions:o}}=r();return e===o?Promise.resolve():(jk.disableCaptions(e),qa(rn,(t=>t===e)))}setSpeakingLanguage(e,o){const{[t]:n,[r]:i}=this,s=n(),{liveTranscription:{isLiveTranscriptionSubscribed:a,transcriptionLang:u,isTranscriptionLanguageLocked:d}}=s,c=Tu(s);if(d&&(null==c||!c.isHost))return Promise.reject({type:Ke,reason:"Transcription language has been locked, only host can set the language.",errorCode:wa.TRANSCRIPTION_LANGUAGE_LOCKED});const l=u.find((t=>t.lang===e));if(l){const{code:e}=l;return(null==o?void 0:o.mode)===wk.Session?a&&Mk(e,!0,{state:s,rwgAgent:jk}):Mk(e,!1,{state:s,rwgAgent:jk}),i(PR(e)),null!=o&&o.mode&&i(KR(o.mode)),Promise.resolve("")}return Promise.reject({type:Xe,reason:"Unsupported transcription language",errorCode:wa.TRANSCRIPTION_LANGUAGE_UNSUPPORTED})}setTranslationLanguage(e){const{[t]:o,[r]:n}=this,i=o(),{liveTranscription:{isEnableTranslatedCaptions:s,isLiveTranscriptionSubscribed:a,translationLang:u}}=i;if(!s)return Promise.reject({type:Ke,reason:"Live translation is not enabled.",errorCode:wa.TRANSLATION_ACCOUNT_DISABLE});if(!a)return Promise.reject({type:Ke,reason:"Cannot set translation language before starting live transcription",errorCode:wa.TRANSCRIPTION_MISMATCH_STATE});if(e){const t=null==u?void 0:u.find((t=>t.lang===e));return t?(jk.setTranslationLanguage(t.code),qa({event:en,operations:[uo((e=>!0===e.autoCaption&&e.lang===t.code)),mo(1)]},(({lang:e})=>e===t.code))):Promise.reject({type:Ke,reason:`Cannot support translating to ${e}`,errorCode:wa.TRANSLATION_LANGUAGE_UNSUPPORTED})}return jk.setTranslationLanguage(),n(LR(void 0)),Promise.resolve("")}lockTranscriptionLanguage(e){const{[t]:r}=this,{liveTranscription:{isTranscriptionLanguageLocked:o,isEnableTranslatedCaptions:n}}=r();return n?Promise.reject({type:Ke,reason:"Cannot lock transcription language due to translation is enabled",errorCode:wa.TRANSCRIPTION_MISMATCH_STATE}):e!==o?(jk.lockTranscriptionLanguage(e),qa(on,(t=>t===e))):Promise.resolve("")}enableManualCaptioner(){const{[t]:e}=this,{meeting:{meetingOptions:r},liveTranscription:{isManualCaptionerEnabled:o,isHostDisableCaptions:n}}=e();if(n)return Promise.reject({type:Ke,reason:"Captions has been disabled by host.",errorCode:wa.MANUAL_CAPTION_FEATURE_DISABLE});const{isEnableManualCaptions:i,isEnableClosedCaption:s}=r;return(null!=i?i:s)?o?Promise.resolve():(jk.enableManualCaption(!0),qa(en,(({autoCaption:e})=>!1===e))):Promise.reject({type:Ke,reason:"Manual caption is not enabled.",errorCode:wa.MANUAL_CAPTION_ACCOUNT_DISABLE})}disableManualCaptioner(){const{[t]:e}=this,{liveTranscription:{isManualCaptionerEnabled:r}}=e();return r?(jk.enableManualCaption(!1),qa(en,(({autoCaption:e})=>!0===e))):Promise.resolve()}assignManualCaption(e){var r;const{[t]:o}=this,n=o(),{liveTranscription:{isManualCaptionerEnabled:i},participants:{attendeesList:s},meeting:{userId:a}}=n;if(!i)return Promise.reject({type:Ke,reason:"Cannot assign caption editor due to the manual captioner is not enabled.",errorCode:wa.MANUAL_CAPTION_FEATURE_DISABLE});if((null===(r=Lk(n))||void 0===r?void 0:r.userId)===e)return Promise.resolve("");const u=s.find((t=>t.userId===e));return u?(jk.assignCC(e,!0),qa({event:a===e?Do:No,operations:[uo((t=>t.userId===e)),mo(1)]},(e=>!0===e.bCCEditor))):Promise.reject({type:Xe,reason:"Cannot find the user",errorCode:wa.MANUAL_CAPTION_MISMATCH_USER})}sendCaptionTextManually(e,o){var n;const{[t]:i,[r]:s}=this,a=i(),{liveTranscription:{lastManualCaption:u},meeting:{userId:d}}=a,c=Tu(a);let l=Promise.resolve();const p=null===(n=Lk(a))||void 0===n?void 0:n.userId;return null!=c&&c.isHost&&p!==d&&(l=this.assignManualCaption(d)),l.then((()=>kk(i())?function(e,t,r){const o=e.length,n=[];var i;if(r)n.push({op:"close",text:e,msgId:null!==(i=null==t?void 0:t.msgId)&&void 0!==i?i:vd()});else if(t&&null!=t&&t.text){const r=t.text.length;let i=0,s=0;for(;e[i]===t.text[i]&&i<o;)s+=gd(e[i]),i+=1;i===r&&i===o?n.push({op:"same"}):i===r&&i<o?n.push({op:"insert",text:e.slice(i),size:0,pos:s,msgId:t.msgId}):i<r&&i===o?n.push({op:"delete",size:0,pos:s,msgId:t.msgId}):(n.push({op:"delete",size:0,pos:s,msgId:t.msgId}),n.push({op:"insert",text:e.slice(i),pos:s,msgId:t.msgId}))}else o>0&&n.push({op:"start",text:e,pos:0,size:0,msgId:vd()});return n.filter((e=>"same"!==e.op))}(e,u,o):Promise.reject({type:Ye,reason:"Cannot type caption ",errorCode:wa.MANUAL_CAPTION_INSUFFICIENT_PRIVILEGE}))).then((e=>Array.isArray(e)?(e.forEach((e=>{const{text:t,...r}=e;Sb.beginEncrypt({text:null!=t?t:"",type:pb.CC_MESSAGE}).then((n=>{jk.sendManualCaption({text:n,...r});const i=o?void 0:{text:t,msgId:e.msgId};s(jR(i))}))})),qa(Xo,(e=>e.source===Ik.InMeetingManual))):""))}getLiveTranscriptionStatus(){const{[t]:e}=this,{liveTranscription:{isLiveTranscriptionEnabled:r,isEnableTranslatedCaptions:o,isManualCaptionerEnabled:n,transcriptionLang:i,translatedSetting:s,isHostDisableCaptions:a,isTranscriptionLanguageLocked:u}}=e();return{isLiveTranscriptionEnabled:r,isLiveTranslationEnabled:o,isHostDisableCaptions:a,isManualCaptionerEnabled:n,isHostLockTranscriptionLanguage:u,transcriptionLanguage:i.map((e=>e.lang)).join(";"),translationLanguage:null==s?void 0:s.map((e=>({speakingLanguage:e.lang,translatedToLanguage:e.translatedToLanguage.map((e=>e.lang)).join(";")})))}}getLiveTranscriptionSetting(){const{[t]:e}=this,{meeting:{meetingOptions:r}}=e(),{isEnableManualCaptions:o,isEnableLiveTranscription:n,isEnableClosedCaption:i,isEnableAllowThirdPartyCCToken:s,isEnableViewFullTranscript:a,isEnableSaveCaptions:u}=r||{};return{isEnableManualCaptions:o,isEnableLiveTranscription:n,isEnableClosedCaption:i,isEnableAllowThirdPartyCCToken:s,isEnableViewFullTranscript:a,isEnableSaveCaptions:u}}getCurrentTranscriptionLanguage(){const{[t]:e}=this,{liveTranscription:{currentTranscriptionLang:r}}=e();return void 0!==r?{code:Ck[r],name:bk[r]}:null}getCurrentTranslationLanguage(){const{[t]:e}=this,{liveTranscription:{currentTranslationLang:r}}=e();return void 0!==r?{code:Ck[r],name:bk[r]}:null}getLatestTranscription(){const{[t]:e}=this,{liveTranscription:{messageRecords:r,isManualCaptionerEnabled:o}}=e(),n=o?yk.DefaultManualInput:yk.NoTranslation,i=r.filter((e=>e.language===n));return i.length?i[i.length-1].text:""}getLatestTranslation(){const{[t]:e}=this,{liveTranscription:{messageRecords:r,currentTranslationLang:o,isEnableTranslatedCaptions:n}}=e();if(n||void 0!==o){const e=r.filter((e=>e.language===o));return e.length?e[e.length-1].text:""}return""}getFullTranscriptionHistory(){const{[t]:e}=this,r=e(),{liveTranscription:{messageRecords:o,isRecordsReduced:n}}=r;return n?function(e){return void 0!==window.indexedDB?new Promise((t=>{const r=window.indexedDB.open(Tk,1);r.addEventListener("success",(()=>{const o=r.result;if(o.objectStoreNames.contains(Rk)){const r=o.transaction([Rk],"readonly").objectStore(Rk),n=[],i=e.meeting.meetingId,s=r.index("mid"),a=IDBKeyRange.only(i),u=s.openCursor(a);u.onsuccess=()=>{const e=u.result;e?(n.push(...e.value.records),e.continue()):(t(n),o.close())},u.onerror=()=>{t(""),o.close()}}else t("")})),r.addEventListener("error",(()=>{t("")}))})):Promise.resolve("")}(r).then((e=>Array.isArray(e)?e.concat(o):[...o])):[...o]}getManualCaptionEditor(){const{[t]:e}=this,r=e(),{closedCaption:{editorId:o}}=r;let n;if(!o)return{};if(n=Nu(r).find((e=>e.userId===o)),!n)return{};const{userId:i,isHost:s,displayName:a,avatar:u,bCoHost:d,zoomID:c}=n;return{userId:i,isHost:s,displayName:a,avatar:u,bCoHost:d,zoomID:c}}getManualCaptionUrl(){const{[t]:e}=this,{meeting:{meetingOptions:r,ccUrl:o,confId:n},breakoutRoom:i,liveTranscription:{externalCcUrl:s}}=e(),{isEnableManualCaptions:a,isEnableAllowThirdPartyCCToken:u}=r||{};if(!a||!u)return console.warn("you not enable manual caption"),"";const d=s||o;return i&&OO(e())?`${d}&${new URLSearchParams({subconfid:n}).toString()}`:d}},AS(Hk.prototype,"startLiveTranscription",[NS,Fk],Object.getOwnPropertyDescriptor(Hk.prototype,"startLiveTranscription"),Hk.prototype),AS(Hk.prototype,"disableCaptions",[LS,NS,Fk],Object.getOwnPropertyDescriptor(Hk.prototype,"disableCaptions"),Hk.prototype),AS(Hk.prototype,"setSpeakingLanguage",[NS,Fk],Object.getOwnPropertyDescriptor(Hk.prototype,"setSpeakingLanguage"),Hk.prototype),AS(Hk.prototype,"setTranslationLanguage",[NS,Fk],Object.getOwnPropertyDescriptor(Hk.prototype,"setTranslationLanguage"),Hk.prototype),AS(Hk.prototype,"lockTranscriptionLanguage",[LS,NS,Fk],Object.getOwnPropertyDescriptor(Hk.prototype,"lockTranscriptionLanguage"),Hk.prototype),AS(Hk.prototype,"enableManualCaptioner",[LS,NS,Fk],Object.getOwnPropertyDescriptor(Hk.prototype,"enableManualCaptioner"),Hk.prototype),AS(Hk.prototype,"disableManualCaptioner",[LS,NS,Fk],Object.getOwnPropertyDescriptor(Hk.prototype,"disableManualCaptioner"),Hk.prototype),AS(Hk.prototype,"assignManualCaption",[NS,LS,Fk],Object.getOwnPropertyDescriptor(Hk.prototype,"assignManualCaption"),Hk.prototype),AS(Hk.prototype,"sendCaptionTextManually",[NS,Fk],Object.getOwnPropertyDescriptor(Hk.prototype,"sendCaptionTextManually"),Hk.prototype),Hk);const xk={epics0:e=>e.pipe(BS(`${Hg}`),Ur((e=>{const{payload:{liveTranscription:t}}=e;return OR(t)}))),epics1:(e,t)=>Ev(e,Ov).pipe(uo((e=>{var t,r;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.NewLttAvaliable)||void 0!==(null===(r=e.payload.body)||void 0===r?void 0:r.LiveTransEngineType)})),Ur((e=>{const{payload:{body:{NewLttAvaliable:r,LiveTransEngineType:o}}}=e,{liveTranscription:{isEnableAutomatedCaptions:n}}=t.value;return void 0!==r?($a(tn,!!r),RR(n&&!!r)):BR(o)}))),epics2:(e,t)=>Ev(e,7982).pipe($r((e=>{const{payload:{body:{status:r,gwId:o}}}=e,n=[];switch(r){case fk.Ready:n.push(wR(o));break;case fk.ManualCaptionerEnabled:$a(en,{autoCaption:!1}),n.push(DR(!0));break;case fk.ManualCaptionerDisabled:$a(en,{autoCaption:!0}),n.push(vT({editorId:"",isEditor:!1,editorZoomId:""})),n.push(DR(!1));break;case fk.UserSub:{$a(en,{autoCaption:t.value.liveTranscription.isLiveTranscriptionEnabled});const{liveTranscription:{stateBeforeFailover:e,transcriptionMode:r,isSomeoneSetSessionTranscription:o}}=t.value;if(null!=e&&e.isLiveTranscriptionSubscribed){var i;Uk.enableNewLLT();const s=null!==(i=e.currentTranscriptionLang)&&void 0!==i?i:yk.English;Mk(e.currentTranscriptionLang,r===wk.Session&&!o,{state:t.value,rwgAgent:Uk}),n.push(PR(s)),void 0!==e.currentTranslationLang&&Uk.setTranslationLanguage(e.currentTranslationLang),n.push(HR())}break}}return br(n)}))),epics3:e=>Ev(e,7984).pipe(Ur((e=>{const{payload:{body:{langs:t}}}=e;return NR(t)}))),epics4:e=>Ev(e,8011).pipe($r((e=>{const{payload:{body:{disabled:t}}}=e,r=[];return $a(rn,t),r.push(WR(t)),t&&r.push(MR(!1)),br(r)}))),epics5:(e,t)=>Ev(e,7985).pipe(uo((e=>{var t;return!0===(null===(t=e.payload.body)||void 0===t?void 0:t.success)})),$r((e=>{const{payload:{body:{src:r,lang:o,success:n}}}=e,{liveTranscription:{transcriptionLang:i}}=t.value,s=[];var a;return n&&s.push(MR(!0)),r===Ik.ASR?(o===yk.NoTranslation?s.push(LR(void 0)):s.push(LR(o)),$a(en,{autoCaption:!0,lang:o,language:null===(a=i.find((e=>e.code===o)))||void 0===a?void 0:a.lang})):[Ik.InMeetingManual,Ik.ExternalCaptioner].includes(r)&&$a(en,{autoCaption:!1}),br(s)}))),epics6:(e,t)=>Ev(e,7986).pipe(Ro(t),$r((([e,t])=>{const r=Tu(t),{liveTranscription:{currentTranscriptionLang:o,isSomeoneSetSessionTranscription:n,transcriptionLang:i}}=t,{payload:{body:s}}=e,a=[xR(!0)];if(void 0!==(null==s?void 0:s.lang)){const{lang:e}=s,t=o!==e;var u;n&&!t||$a(en,{autoCaption:!0,sessionLang:e,sessionLanguage:null===(u=i.find((t=>t.code===e)))||void 0===u?void 0:u.lang}),(null==r?void 0:r.audio)===ye.Computer&&t&&Nk(e),a.push(PR(e))}return br(a)}))),epics7:(e,t)=>bv(e,L.JoinComputerAudioComplete).pipe(uo((()=>{const{liveTranscription:{transcriptionMode:e,isLiveTranscriptionSubscribed:r,currentTranscriptionLang:o}}=t.value;return void 0!==o&&(e===wk.Individual||e===wk.Session&&r)})),To((()=>{const{liveTranscription:{currentTranscriptionLang:e}}=t.value;e&&Nk(e)})),go()),epics8:(e,t)=>Ev(e,7983).pipe(uo((e=>void 0!==e.payload.body)),$r((e=>{const{payload:{body:{msgType:r,errorCode:o,language:n,source:i,content:s,keyNodeId:a,msgId:u,nodeId:d,pos:c,size:l,audioLanguage:p}}}=e;if(r===Ek.Error){if(o===_k.TranslateNotSupport){const{liveTranscription:{currentTranslationLang:e}}=t.value;e&&$a(Xo,{error:_k.TranslateNotSupport,errorMessage:`${bk[p]} to ${bk[e]} translation is not supported!`,audioLanguage:p,translationLang:e})}}else{const e=t.value,o=Nu(e),{liveTranscription:{isManualCaptionerEnabled:p}}=e;if(p&&i===Ik.ASR)return Promise.resolve();if(function(e,t){const{liveTranscription:{isEnableTranslatedCaptions:r,isLiveTranscriptionEnabled:o},meeting:{meetingOptions:n}}=t,{isEnableManualCaptions:i,isEnableAllowHostAssignTypeCC:s,isEnableClosedCaption:a,isEnableAllowThirdPartyCCToken:u}=n;return e===Ik.ASR?r||o:e===Ik.InMeetingManual?i&&s||void 0===i&&a:e===Ik.ExternalCaptioner?u:void 0}(i,e)&&s&&a){const h=Pk(e)[a];if(h)return Sb.beginDecrypt({decryptedText:s,type:pb.CC_MESSAGE,zoomId:h}).then((({message:e})=>{const{liveTranscription:{messageRecords:s}}=t.value,a=[],h=s.find((e=>e.msgId===u));if(h){const{text:t}=h,o=((e,t)=>{if(!e||0===t)return"";let r=0;for(let o=0;o<e.length;o++)if(r+=gd(e[o]),r===t)return e.slice(0,o+1);return e})(t,c);let n;r===Ek.Insert&&0===l||r===Ek.Delete&&0===l?n={...h,text:o+e,msgType:r}:r===Ek.Close&&(n={...h,text:e,msgType:r,done:!0}),n&&(a.push(UR(n)),$a(Xo,n))}else if([Ek.New,Ek.Close].includes(r)||p&&r===Ek.Insert){const t=o.find((e=>e.userId===d)),s={msgId:u,userId:d,displayName:null==t?void 0:t.displayName,avatar:null==t?void 0:t.avatar,text:e,source:i,language:n,timestamp:(new Date).getTime(),done:r===Ek.Close};a.push(kR({...s,msgType:r})),$a(Xo,s)}return a}))}}return Promise.resolve()})),$r((e=>Array.isArray(e)?br(e):or))),epics9:(e,t)=>e.pipe(BS(`${kR}`),_r(Zt),$r((()=>{const{liveTranscription:{messageRecords:e}}=t.value;return e.length>=1e5?function(e){const{meeting:{meetingId:t},liveTranscription:{messageRecords:r,reducedRecordsCount:o}}=e;return void 0!==window.indexedDB?new Promise((e=>{const n=window.indexedDB.open(Tk,1);n.addEventListener("upgradeneeded",(()=>{const e=n.result;if(!e.objectStoreNames.contains(Rk)){const t=e.createObjectStore(Rk,{keyPath:["startIndex","mid"],autoIncrement:!1});t.createIndex("mid","mid",{unique:!1}),t.transaction.oncomplete=()=>{console.log(`Create objectStore [${Rk}] complete`)}}})),n.addEventListener("success",(()=>{const i=n.result,s=r.length,a=.9*s,u=s-a,d=r.slice(0,a),c=o+d.length,l=i.transaction([Rk],"readwrite");l.objectStore(Rk).put({startIndex:o,mid:t,records:d}),l.oncomplete=()=>{e(VR({remains:u,reducedRecordsCount:c})),i.close()},l.onerror=()=>{e(""),i.close()}}))})):Promise.resolve("")}(t.value):Promise.resolve("")})),uo((e=>"object"==typeof e))),epics10:(e,t)=>e.pipe(BS(`${Pg}`,`${kg}`),uo((()=>t.value.liveTranscription.isRecordsReduced)),To((()=>{!function(){if(void 0!==window.indexedDB){const e=window.indexedDB.open(Tk,1);e.addEventListener("success",(()=>{const t=e.result;t.objectStoreNames.contains(Rk)&&(window.indexedDB.deleteDatabase(Tk),t.close())}))}}()})),go()),epics11:(e,t)=>bv(e,[L.AudiobridgeSetCcLangSuccess,L.AudiobridgeSetCcLangFailure]).pipe($r((e=>{const{payload:{type:r,data:o}}=e,{liveTranscription:{currentTranscriptionLang:n}}=t.value,i=[];return r===L.AudiobridgeSetCcLangSuccess&&o!==n?i.push(PR(o)):r===L.AudiobridgeSetCcLangFailure&&i.push(PR(void 0)),br(i)}))),epics12:e=>Ev(e,8014).pipe(uo((e=>!!e.payload.body)),$r((e=>{const{payload:{body:{delivered:t,type:r}}}=e,o=[];return"translationstarted"===r?t&&(o.push($R(!0)),$a(en,{autoCaption:!0,translationStarted:!0})):"meetinglanglocked"===r?(o.push(GR(t)),$a(on,t)):"tcap"===r&&t&&o.push(zR(!0)),br(o)}))),epics13:e=>Ev(e,8026).pipe(uo((e=>{var t;return!(null===(t=e.payload.body)||void 0===t||!t.url)})),Ur((e=>qR(e.payload.body.url)))),epics14:e=>Ev(e,8027).pipe(Ur((e=>{var t;return PR(null===(t=e.payload.body)||void 0===t?void 0:t.speaking_language_id)})))},$k=yv(xk),Gk={isLiveStreamEnable:!1,status:0,channelName:"",viewerUrl:"",liveStreamOn:!1},zk=zc({[`${dO}`]:sy(((e,{payload:t})=>{e.isLiveStreamEnable=t})),[`${cO}`]:sy(((e,{payload:t})=>{e.status=t})),[`${lO}`]:sy(((e,{payload:t})=>{e.channelName=t.channelName,e.viewerUrl=t.viewerUrl,e.liveStreamOn=t.liveStreamOn})),[`${pO}`]:(e,{payload:t})=>t?{...e}:{...Gk}},Gk);let qk=function(e){return e[e.Ended=0]="Ended",e[e.InProgress=1]="InProgress",e[e.Connecting=2]="Connecting",e[e.Timeout=3]="Timeout",e}({});var Kk;const Jk=E_.createAgent();let Qk=(Kk=class extends I_{startLiveStream(e,o,n){const{[t]:i,[r]:s}=this,{liveStream:{isLiveStreamEnable:a,status:u},meeting:{zlkJwtToken:d}}=i();return d?u===qk.InProgress?Promise.reject({type:Ke,reason:"Live stream is already on",errorCode:wa.LIVE_STREAM_MISMATCH_STATE}):a?e&&o&&n?(Jk.startLiveStream(e,o,n),qa({event:Ca,operations:[uo((e=>e===qk.InProgress)),mo(1)]},void 0,3e4).then((()=>"")).catch((()=>{const{liveStream:{status:e}}=i();return e===qk.Connecting?($a(Ca,qk.Timeout),s(cO(qk.Timeout)),Promise.reject({type:Je,errorCode:wa.INTERNAL_ERROR})):Promise.resolve("")}))):Promise.reject({type:Xe,reason:"parameter cannot be empty",errorCode:wa.LIVE_STREAM_INVALID_PARAMETER}):Promise.reject({type:Ke,reason:"Live stream is not enabled",errorCode:wa.LIVE_STREAM_ACCOUNT_DISABLE}):Promise.reject({type:Ke,reason:"meeting sdk don't support start live stream use startLiveStream",errorCode:wa.LIVE_STREAM_INVALID_PARAMETER})}stopLiveStream(){const{[t]:e,[r]:o}=this,{liveStream:{status:n}}=e();return n===qk.InProgress&&(Jk.stopLiveStream(),$a(Ca,qk.Ended),o(cO(qk.Ended))),Promise.resolve("")}getLiveStreamInfo(){const e=this[t](),{meeting:{liveStreamInfo:r,zlkJwtToken:o,isHost:n}}=e;return o?(console.warn("video sdk don't support get live stream info"),null):n?r&&0!==Object.keys(r).length?r:(console.warn("can not get live stream info"),null):(console.warn("only host get live stream info"),null)}isLiveStreamEnabled(){const{[t]:e}=this,{liveStream:r,meeting:{liveStreamInfo:o,zlkJwtToken:n}}=e();return(n||(null==o?void 0:o.isEnabledLiveStream))&&!(null==r||!r.isLiveStreamEnable)}getLiveStreamStatus(){const{[t]:e}=this,{liveStream:{liveStreamOn:r,channelName:o,viewerUrl:n,status:i}}=e();return{liveStreamOn:r,channelName:o,viewerUrl:n,status:i}}},AS(Kk.prototype,"startLiveStream",[LS],Object.getOwnPropertyDescriptor(Kk.prototype,"startLiveStream"),Kk.prototype),AS(Kk.prototype,"stopLiveStream",[LS],Object.getOwnPropertyDescriptor(Kk.prototype,"stopLiveStream"),Kk.prototype),Kk);const Yk=yv({epics0:e=>e.pipe(BS(`${Hg}`),Ur((e=>{const{payload:{liveStreamInfo:t}}=e;return dO(!(null==t||!t.isEnabledLiveStream))}))),epics1:e=>Ev(e,7970).pipe($r((e=>{const{payload:{body:{channelName:t,liveStreamOn:r,_isApiCall:o,status:n,viewerUrl:i}}}=e;return $a(Ca,n),br([lO({channelName:t,viewerUrl:i,liveStreamOn:r}),cO(n)])})))}),{setSummaryEnable:Zk,setSmartSummaryStatus:Xk,resetSummary:eU}=Fc("SET_SUMMARY_ENABLE","SET_SMART_SUMMARY_STATUS","RESET_SUMMARY"),{setMeetingQueryEnable:tU,setMeetingQueryStatus:rU}=Fc("SET_MEETING_QUERY_ENABLE","SET_MEETING_QUERY_STATUS");let oU=function(e){return e.Default="",e.Start="Start",e.Paused="Paused",e.Stopped="Stopped",e}({}),nU=function(e){return e[e.GW_IND_NONE=0]="GW_IND_NONE",e[e.GW_IND_START=1]="GW_IND_START",e[e.GW_IND_PAUSE=2]="GW_IND_PAUSE",e[e.GW_IND_STOP=3]="GW_IND_STOP",e}({}),iU=function(e){return e.Default="",e.Start="Start",e.Paused="Paused",e.Stopped="Stopped",e}({}),sU=function(e){return e[e.GW_IND_NONE=0]="GW_IND_NONE",e[e.GW_IND_START=1]="GW_IND_START",e[e.GW_IND_PAUSE=2]="GW_IND_PAUSE",e[e.GW_IND_STOP=3]="GW_IND_STOP",e}({});const aU={summaryStatus:nU.GW_IND_STOP,summaryEnable:!1,meetingQueryStatus:sU.GW_IND_STOP,meetingQueryEnable:!1},uU=zc({[`${Zk}`]:sy(((e,{payload:t})=>{e.summaryEnable=t})),[`${Xk}`]:sy(((e,{payload:t})=>{e.summaryStatus=t})),[`${tU}`]:sy(((e,{payload:t})=>{e.meetingQueryEnable=t})),[`${rU}`]:sy(((e,{payload:t})=>{e.meetingQueryStatus=t})),[`${eU}`]:()=>({...aU})},aU);var dU,cU,lU,pU,hU;const mU=E_.createAgent();let gU=(dU=kS("summary"),cU=kS("summary"),lU=kS("summary"),pU=kS("summary"),AS((hU=class extends I_{startSummary(){const e=this[t](),{summary:{summaryEnable:r,summaryStatus:o}}=e;return r?o===nU.GW_IND_START?Promise.resolve(""):(mU.summaryMeeting(!0),qa(_a,(e=>e.status===oU.Start))):Promise.reject({type:Ke,reason:"The account of the meeting disabled the smart summary",errorCode:wa.SUMMARY_ACCOUNT_DISABLE})}stopSummary(){const e=this[t](),{summary:{summaryStatus:r}}=e;return r!==nU.GW_IND_START?Promise.resolve("not start summary, do nothing"):(mU.summaryMeeting(!1),qa(_a,(e=>e.status===oU.Stopped)))}getSummaryStatus(){const e=this[t](),{summary:{summaryStatus:r}}=e;return r===nU.GW_IND_START?oU.Start:r===nU.GW_IND_STOP?oU.Stopped:oU.Default}isSummaryEnabled(){const e=this[t](),{summary:{summaryEnable:r}}=e;return r}startMeetingQuery(){const e=this[t](),{summary:{meetingQueryEnable:r,meetingQueryStatus:o}}=e;return r?o===sU.GW_IND_START?Promise.resolve(""):(mU.startMeetingQuery(!0),qa(Ia,(e=>e.status===iU.Start))):Promise.reject({type:Ke,reason:"The account of the meeting disabled the smart summary",errorCode:wa.SUMMARY_ACCOUNT_DISABLE})}stopMeetingQuery(){const e=this[t](),{summary:{meetingQueryStatus:r}}=e;return r!==sU.GW_IND_START?Promise.resolve("not start meeting query, do nothing"):(mU.startMeetingQuery(!1),qa(Ia,(e=>e.status===iU.Stopped)))}getMeetingQueryStatus(){const e=this[t](),{summary:{meetingQueryStatus:r}}=e;return r===sU.GW_IND_START?iU.Start:r===sU.GW_IND_STOP?iU.Stopped:iU.Default}isMeetingQueryEnabled(){const e=this[t](),{summary:{meetingQueryEnable:r}}=e;return r}}).prototype,"startSummary",[LS,NS,dU],Object.getOwnPropertyDescriptor(hU.prototype,"startSummary"),hU.prototype),AS(hU.prototype,"stopSummary",[LS,NS,cU],Object.getOwnPropertyDescriptor(hU.prototype,"stopSummary"),hU.prototype),AS(hU.prototype,"startMeetingQuery",[LS,NS,lU],Object.getOwnPropertyDescriptor(hU.prototype,"startMeetingQuery"),hU.prototype),AS(hU.prototype,"stopMeetingQuery",[LS,NS,pU],Object.getOwnPropertyDescriptor(hU.prototype,"stopMeetingQuery"),hU.prototype),hU);const SU=yv({moduleEpics0:e=>Ev(e,8007).pipe(uo((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.supported)})),Ur((e=>{const{supported:t}=e.payload.body;return $a(_a,{supported:t}),Zk(t)}))),moduleEpics1:(e,t)=>Ev(e,8008).pipe(uo((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.status)})),Ro(t),$r((([e,t])=>{const{status:r}=e.payload.body,{summary:{summaryStatus:o}}=t,n=[];if(r!==o)switch(r){case nU.GW_IND_START:$a(_a,{status:oU.Start});break;case nU.GW_IND_PAUSE:$a(_a,{status:oU.Paused});break;case nU.GW_IND_STOP:$a(_a,{status:oU.Stopped});break;default:$a(_a,{status:""})}return n.push(Xk(r)),br(n)}))),moduleEpics2:(e,t)=>Ev(e,8015).pipe(uo((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.supported)})),Ro(t),Ur((([e,t])=>{const{supported:r}=e.payload.body;$a(Ia,{supported:r});const{meeting:{zlkJwtToken:o}}=t;if(o){const{auto_transcription:e}=Ad(o);e&&(r?E_.createAgent().startMeetingQuery(!0):console.warn("You account don't support auto transcription"))}return tU(r)}))),moduleEpics3:(e,t)=>Ev(e,8016).pipe(uo((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.status)})),Ro(t),$r((([e,t])=>{const{status:r}=e.payload.body,{summary:{meetingQueryStatus:o}}=t,n=[];if(r!==o)switch(r){case sU.GW_IND_START:$a(Ia,{status:iU.Start});break;case sU.GW_IND_PAUSE:$a(Ia,{status:iU.Paused});break;case sU.GW_IND_STOP:$a(Ia,{status:iU.Stopped});break;default:$a(Ia,{status:""})}return n.push(rU(r)),br(n)})))});let vU=function(e){return e[e.Init=0]="Init",e[e.Pending=1]="Pending",e[e.InProgress=2]="InProgress",e[e.Closing=3]="Closing",e[e.Closed=4]="Closed",e}({}),fU=function(e){return e[e.Start=1]="Start",e[e.Stop=2]="Stop",e}({});const yU=TE.getInstance();function EU(e){yU.report(e,["Broadcast streaming"])}const _U={utk:"",status:vU.Init,channelId:"",channelName:"",isBroadcastStreamingEnable:!1},IU=zc({[`${hO}`]:(e,t)=>sy(e,(e=>{e.utk=t.payload})),[`${mO}`]:(e,t)=>sy(e,(e=>{const{channelId:r,channelName:o}=t.payload;e.channelId=r,e.channelName=o})),[`${gO}`]:(e,t)=>sy(e,(e=>{e.status=t.payload})),[`${SO}`]:(e,t)=>sy(e,(e=>{e.isBroadcastStreamingEnable=t.payload})),[`${vO}`]:(e,{payload:t})=>t?{...e}:{..._U}},_U);var AU;const bU=E_.createAgent(),CU=kE("Broadcast streaming");let TU=(AU=class extends I_{startBroadcast(){const{[t]:e,[r]:o}=this,{broadcastStreaming:{isBroadcastStreamingEnable:n,status:i},meeting:{meetingNumber:s,topic:a,lang:u},breakoutRoom:d}=e();return n?(null==d?void 0:d.controlStatus)===hu.InProgress&&OO(e())?Promise.reject({type:Ke,reason:"Cannot start broadcast in a breakout room.",errorCode:wa.BROADCAST_STREAMING_MISMATCH_STATE}):i===vU.Init||i===vU.Closed?(bU.requestUserInfoToken(4,1),wr(Ka(Ra,1).pipe(Ao((e=>{const t=`https://${y()}/live/createAndStartStream`,r=function(e){return e.slice(0,128).padEnd(5,"*")}(null!=a?a:""),n={meetingNumber:`${s}`,channelName:r};return XO({url:t,method:"POST",headers:{utk:e,lang:u,"Content-Type":"application/json"},crossDomain:Id(t),body:n}).pipe(bo(Ja()),$r((e=>{const{status:t,errorCode:n,errorMessage:i,result:s}=e.response;return t&&0===n?(o(mO({channelName:r,channelId:null==s?void 0:s.channelId,type:fU.Start})),Ay.set(by.VIDEO_SDK_BROADCAST_STREAMING_CHANNEL_ID,null==s?void 0:s.channelId,_y.SessionStorage),Promise.resolve(s.channelId)):(EU(`Start broadcast streaming error: errorCode: ${n}; message:${i},tid:${null===(a=e.responseHeaders)||void 0===a?void 0:a["x-zm-trackingid"]}`),Promise.reject({type:Je,errorCode:wa.INTERNAL_ERROR}));var a})),lo((e=>(EU(`Start broadcast streaming error: ${e.name};${e.message}`),Promise.reject({type:Je,errorCode:wa.INTERNAL_ERROR})))))}))))):Promise.reject({type:Ke,reason:"Broadcast streaming is already in progress",errorCode:wa.BROADCAST_STREAMING_MISMATCH_STATE}):Promise.reject({type:Ke,reason:"Broadcast streaming is not enabled",errorCode:wa.BROADCAST_STREAMING_ACCOUNT_DISABLE})}stopBroadcast(e){const{[t]:o,[r]:n}=this,{broadcastStreaming:{status:i,utk:s,channelId:a,channelName:u},meeting:{meetingNumber:d,lang:c}}=o(),l=e||a;if(!l)return Promise.reject({type:Xe,reason:"Channel ID is required to stop broadcast streaming",errorCode:wa.BROADCAST_STREAMING_INVALID_CHANNEL_ID});if(i===vU.InProgress){const e=`https://${y()}/live/stopStream`,t={meetingNumber:`${d}`,channelId:l};let r=Promise.resolve(s);return s||(bU.requestUserInfoToken(4,1),r=wr(Ka(Ra,1))),r.then((r=>wr(XO({url:e,method:"POST",headers:{utk:r,lang:c,"Content-Type":"application/json"},crossDomain:Id(e),body:t}).pipe(bo(Ja()),$r((e=>{const{status:t,errorCode:r,errorMessage:o}=e.response;return t&&0===r?(n(mO({channelName:u,channelId:l,type:fU.Stop})),Promise.resolve(l)):(EU(`Stop broadcast streaming error: errorCode: ${r}; message:${o}, tid:${null===(i=e.responseHeaders)||void 0===i?void 0:i["x-zm-trackingid"]}`),Promise.reject({type:Je,errorCode:wa.INTERNAL_ERROR}));var i}))))))}return Promise.reject({type:Ke,reason:"Broadcast streaming is not in progress",errorCode:wa.BROADCAST_STREAMING_MISMATCH_STATE})}getBroadcastStreamingStatus(){const{[t]:e}=this,{broadcastStreaming:{status:r,channelId:o}}=e();return{status:r,channelId:o}}isBroadcastStreamingEnable(){const{[t]:e}=this,{broadcastStreaming:{isBroadcastStreamingEnable:r}}=e();return r}},AS(AU.prototype,"startBroadcast",[NS,LS,CU],Object.getOwnPropertyDescriptor(AU.prototype,"startBroadcast"),AU.prototype),AS(AU.prototype,"stopBroadcast",[NS,LS,CU],Object.getOwnPropertyDescriptor(AU.prototype,"stopBroadcast"),AU.prototype),AU);const RU=yv({epics0:e=>e.pipe(BS(`${Hg}`),$r((e=>{const{payload:{enableVsdkInteractiveLiveStream:t}}=e,r=[];r.push(SO(!!t));const o=Ay.get(by.VIDEO_SDK_BROADCAST_STREAMING_CHANNEL_ID);return o&&r.push(mO({channelId:o})),br(r)}))),epics1:e=>Ev(e,4310).pipe($r((e=>{const{payload:{body:t}}=e,r=[];if(4===(null==t?void 0:t.type)){const{utk:e}=t;r.push(hO(e)),$a(Ra,e)}return br(r)}))),epics2:(e,t)=>Ev(e,7995).pipe($r((e=>{const{payload:{body:{status:r}}}=e,{broadcastStreaming:{status:o}}=t.value,n=[];return r&&o!==vU.InProgress&&(n.push(gO(vU.InProgress)),$a(Oa,{status:vU.InProgress})),br(n)}))),epics3:(e,t)=>e.pipe(BS(`${mO}`),uo((e=>!!e.payload.type)),Ao((e=>{const r=`https://${y()}/live/getStreamState`,{broadcastStreaming:{utk:o},meeting:{meetingNumber:n}}=t.value,{payload:{channelId:i,type:s}}=e,a={meetingNumber:`${n}`,channelId:i};return Kr((()=>XO({url:r,method:"POST",headers:{utk:o,"Content-Type":"application/json"},crossDomain:Id(r),body:a}))).pipe((u=e=>{const{status:t,errorCode:n,result:i}=e.response;if(t&&0===n){const t=s===fU.Start?vU.InProgress:vU.Closed;if((null==i?void 0:i.state)===t)return Cr(e)}return Kr((()=>XO({url:r,method:"POST",headers:{utk:o,"Content-Type":"application/json"},crossDomain:Id(r),body:a}))).pipe(vo((()=>ro(1e3))))},void 0===d&&(d=1/0),d=(d||0)<1?1/0:d,Mt((function(e,t){return xr(e,t,u,d,0,!0,undefined)}))),bo(Ja()),Co((e=>{const{status:t,errorCode:r,result:o,errorMessage:n}=e.response;if(t&&0===r){const e=s===fU.Start?vU.InProgress:vU.Closed;return(null==o?void 0:o.state)!==e}var i;return EU(`Query broadcast streaming status failed. errorCode: ${r}, errorMessage: ${n},tid:${null===(i=e.responseHeaders)||void 0===i?void 0:i["x-zm-trackingid"]}`),!1}),!0),Lr(6e4),$r((e=>{const{status:t,errorCode:r,result:o}=e.response,n=[];return t&&0===r&&($a(Oa,{status:o.state}),n.push(gO(o.state))),n})),lo((e=>(EU(`Query broadcast streaming status failed. error: ${e.name}; ${e.message}`),or))));var u,d})))});var OU;const DU={chat:{epic:OD,reducer:AD,Client:TD},logger:{epic:jw,reducer:Uw,Client:class extends I_{getLogs(t){return Lw.getLogs(this[e],t)}setLogOptions(t){t&&this[e].dispatch(iO(t))}isAutoReportInAccountSettingEnabled(){const{meeting:{zlkJwtToken:t,enableAutoLog:r,collectionToggleEnable:o,zsk:n}}=this[e].getState();return!!t||(n?r&&o:r)}reportMeetingProblem(t){var r;const{product:o,problem:n,timeOfOccurrence:i,description:s,ticket:a,isLogIncluded:u}=t,{meeting:{userId:d,confId:c,conId:l,svcUrl:p}}=this[e].getState(),h=`'product':${o}\n'problem':${n}\n'timeOfOccurrence':${i}\n'description':${s}\n'ticketID':${a}\n'isLogIncluded':${u?"Logs included":""}\n'nodeId':${d}\n'confId':${c}\n'conId':${l}\n'svcUrl':${p}`,m=["REPORT_NOTIFICATION"];return null===(r=Lw.makeLogger(m).logWithExtraProperties("",{IM_NOTIFICATION:`${h}\nTrackingId:${Lw.trackingId}`}))||void 0===r?void 0:r.then((()=>{Lw.reportToGlobalTracing(u?void 0:m,!0)}))}reportToGlobalTracing(e){return Pw.beforeReportToGlobalTracing(),Lw.reportToGlobalTracing(e,!0)}reportRating(t,r){const{meeting:o,media:n,socket:i}=this[e].getState();if(o){var s,a,u,d;const{zlkJwtToken:e,meetingStatus:c}=o,{assetsPath:l,enforceMultipleVideos:p,enforceVirtualBackground:h,disableRenderLimits:m}=n;Lw.report(`rating:${t}, feedback:${r}, appKey:${e?null===(s=Ad(e))||void 0===s?void 0:s.app_key:""}, CPU:${navigator.hardwareConcurrency}, GPU:${null!==(a=C.gpu)&&void 0!==a?a:""}, browser:${C.browser} ${C.browserVersion}, OS:${C.os} ${C.osVersion}, SharedArrayBuffer:${!!C.isSupportSharedArrayBuffer},\n         OffscreenCanvas:${!!C.isSupportOffscreenCanvas},\n         assetPath:${l},\n          enforceMultipleVideos:${p},\n          disableRenderLimits:${m},\n          enforceVirtualBackground:${h}, ${c===Ho.Joined?`session duration:${Math.floor((performance.now()-(null!==(u=null==o?void 0:o.pingRWCTimestamp)&&void 0!==u?u:0))/1e3)}, rwg:${null==i||null===(d=i.rwgServerList)||void 0===d||null===(d=d[i.retryCount])||void 0===d?void 0:d.rwg}, failover count:${null==o?void 0:o.failover.count}`:""}`,"User Rating","info"),Number(t)<=2&&this.reportToGlobalTracing()}return Promise.resolve()}}},recording:{epic:oN,reducer:xw,Client:tN},cmd:{epic:EN,reducer:SN,Client:fN},breakoutRoom:{epic:vk,reducer:eL,Client:mk},liveTranscription:{epic:$k,reducer:Bk,Client:Wk},liveStream:{epic:Yk,reducer:zk,Client:Qk},summary:{epic:SU,reducer:uU,Client:gU},broadcastStreaming:{epic:RU,reducer:IU,Client:TU}},wU=E_.createAgent();let NU=(OU=class extends VO{constructor(e){super(e),this.mediaStream=void 0,this[o]=DU}getMediaStream(){return void 0===this.mediaStream&&(this.mediaStream=new ZP(this[e])),this.mediaStream}joinInstant(e,o,n,i,s,a){const{[t]:u,[r]:d}=this,{meeting:{lang:c,meetingStatus:l},socket:{zoomSocketStatus:p}}=u();return o?l!==Ho.Joined&&p===N_.Closed?(d(wg({topic:null==e?void 0:e.toLowerCase(),password:s||"",userName:n,zlk:o,lang:c,cv:i})),a&&d(cS(a)),za(Yo.JoinMeeting)):Promise.reject({type:Ke,reason:"duplicated operation",errorCode:wa.CLIENT_DUPLICATED_JOIN}):Promise.reject({type:Xe,reason:"invalid  signature",errorCode:wa.CLIENT_INVALID_JOIN_PARAMETER})}removeUser(t){const r=this[e].getState(),{participants:{attendeesList:o},breakoutRoom:n}=r,i=o.find((e=>e.userId===t));if(i){let e=t;if((null==n?void 0:n.controlStatus)===hu.InProgress&&OO(r)){const t=n.mainSessionAttendeeList.find((e=>e.userGUID===(null==i?void 0:i.userGUID)));t&&(e=t.userId)}return wU.expel(e),qa(Mo,(e=>e.some((e=>e.userId===t))))}return Promise.reject({type:Xe,reason:"no matched user",errorCode:wa.CLIENT_MISMATCH_USER})}},AS(OU.prototype,"removeUser",[PS,NS],Object.getOwnPropertyDescriptor(OU.prototype,"removeUser"),OU.prototype),OU);function MU(e){return MU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MU(e)}function PU(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=MU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t);if("object"!=MU(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==MU(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function kU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LU(Object(r),!0).forEach((function(t){PU(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LU(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function UU(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var VU="function"==typeof Symbol&&Symbol.observable||"@@observable",BU=function(){return Math.random().toString(36).substring(7).split("").join(".")},HU={INIT:"@@redux/INIT"+BU(),REPLACE:"@@redux/REPLACE"+BU(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+BU()}};function jU(e,t,r){var o;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(UU(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(UU(1));return r(jU)(e,t)}if("function"!=typeof e)throw new Error(UU(2));var n=e,i=t,s=[],a=s,u=!1;function d(){a===s&&(a=s.slice())}function c(){if(u)throw new Error(UU(3));return i}function l(e){if("function"!=typeof e)throw new Error(UU(4));if(u)throw new Error(UU(5));var t=!0;return d(),a.push(e),function(){if(t){if(u)throw new Error(UU(6));t=!1,d();var r=a.indexOf(e);a.splice(r,1),s=null}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(UU(7));if(void 0===e.type)throw new Error(UU(8));if(u)throw new Error(UU(9));try{u=!0,i=n(i,e)}finally{u=!1}for(var t=s=a,r=0;r<t.length;r++)(0,t[r])();return e}return p({type:HU.INIT}),(o={dispatch:p,subscribe:l,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw new Error(UU(10));n=e,p({type:HU.REPLACE})}})[VU]=function(){var e,t=l;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(UU(11));function r(){e.next&&e.next(c())}return r(),{unsubscribe:t(r)}}})[VU]=function(){return this},e},o}function FU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}const WU=E_.createAgent(),xU=TE.getInstance();let $U,GU;const zU=E_.createAgent();let qU=null;var KU,JU={exports:{}},QU=(KU||(KU=1,JU.exports=function(){function e(e){var t=new Date,r="";return e&&(r+="".concat(t.getMonth()+1,"/").concat(t.getDate(),"/").concat(t.getFullYear()," ")),"[".concat(r).concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds(),".").concat(t.getMilliseconds(),"]:\n")}var t=function(e,t){var r={mode:"cors"};return t&&Object.assign(r,{signal:t}),Promise.any(e.map((function(e){return function(e,t,r,o){function n(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(t,r){function i(e){try{a(o.next(e))}catch(e){r(e)}}function s(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){e.done?t(e.value):n(e.value).then(i,s)}a((o=o.apply(e,[])).next())}))}(void 0,0,void 0,(function(){var t,o,n,i,s;return function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return u([e,t])}}function u(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,fetch(e.url,r)];case 1:if(!(t=a.sent()).ok)throw new Error("HTTP error! status: ".concat(t.status));return[4,t.json()];case 2:return o=a.sent(),n=t.headers.get("call-id"),[2,{response:o,server:e,callId:n}];case 3:throw i=a.sent(),s="server: ".concat(e.domain,", message: ").concat(i.message),new Error(s);case 4:return[2]}}))}))}))).catch((function(e){var t="";return e instanceof AggregateError&&e.errors.forEach((function(e,r){t+="".concat(e.message,"\n")})),Promise.reject(t)}))};var r=function(){function r(){this.MAX_RETRY_TIMES=5}return r.prototype.setRetryTimes=function(e){void 0===e&&(e=5),this.MAX_RETRY_TIMES=e},r.prototype.init=function(t){this.serverList=t,this.delayTime=Array.from(new Set(this.serverList.map((function(e){return e.dl})))),this.excludedServer=[],this.tryTimes=1,this.log="".concat(e(),"initial server list: ").concat(JSON.stringify(function(e){return e.map((function(e){return{domain:e.domain,dl:e.dl,dc:e.dc}}))}(this.serverList)),"\n")},r.prototype.ping=function(e){return this.init(e),this.tryPing()},r.prototype.retry=function(){return this.tryTimes+=1,this.filter(),0===this.serverList.length||this.MAX_RETRY_TIMES>0&&this.tryTimes>this.MAX_RETRY_TIMES?Promise.reject("no usable RWC any more:\n".concat(this.log)):this.tryPing()},r.prototype.cancelPing=function(){this.abortPingController&&(this.abortPingController.abort(),this.abortPingController=void 0)},r.prototype.tryPing=function(){var r,o=this;this.cancelPing(),this.log+="".concat(e(!0),"Try Times: ").concat(this.tryTimes,"\n"),this.abortPingController=function(){if("function"==typeof AbortController)return new AbortController}();var n=null===(r=this.abortPingController)||void 0===r?void 0:r.signal;return new Promise((function(r,i){var s=o.delayTime.reduce((function(e,t){return e+t}),0),a=setTimeout((function(){o.log+="ping time out ".concat(s+1e4,"s\n"),o.serverList=[],o.cancelPing()}),s+1e4),u=function(e){var t=e.reduce((function(e,t){var r=t.dl;return e[r]||(e[r]=[]),e[r].push(t),e}),{});return Object.entries(t).map((function(e){var t,r=e[0],o=e[1];return[null!==(t=Number(r))&&void 0!==t?t:0,o]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[0],e[1]}))}(o.serverList);Promise.any(u.map((function(r,i){var s=o.delayTime[i];return function(e,t,r){return new Promise((function(o,n){var i;if(null==r?void 0:r.aborted)return n(new Error("Promise was cancelled"));var s=setTimeout((function(){e().then(o).catch(n).finally((function(){var e;return null===(e=null==r?void 0:r.removeEventListener)||void 0===e?void 0:e.call(r,"abort",a)}))}),t),a=function(){var e;clearTimeout(s),null===(e=null==r?void 0:r.removeEventListener)||void 0===e||e.call(r,"abort",a),n(new Error("Promise was cancelled"))};null===(i=null==r?void 0:r.addEventListener)||void 0===i||i.call(r,"abort",a)}))}((function(){return o.log+="".concat(e(),"ping[dl=").concat(s,"][groupIndex=").concat(i,"]--\x3e").concat(JSON.stringify(r.map((function(e){return e.domain}))),"\n"),t(r,n)}),s,n)}))).then((function(t){var n=t.response,i=t.server,s=t.callId;o.log+="".concat(e(),"ping resolved: request server:").concat(i.domain,"\n response:").concat(JSON.stringify(n),"\n Call-ID:").concat(s,"\n"),o.lastServer=i,r({response:n,request:i,log:o.log})})).catch((function(t){return t instanceof AggregateError?(o.log+=e(),t.errors.forEach((function(e,t){o.log+="ping failed [groupIndex=".concat(t,"]:\n").concat(e,"\n")}))):o.log+="".concat(e(),"ping failed. Errors(unknown): ").concat(t.message,"\n"),i(o.log)})).finally((function(){clearTimeout(a),o.cancelPing()}))}))},r.prototype.filter=function(){var t,r=this;this.serverList=this.serverList.filter((function(e){var o;return e.domain!==r.lastServer.domain&&e.dc!==t||(t||(t=null===(o=r.excludedServer.find((function(e){return e.dc===r.lastServer.dc})))||void 0===o?void 0:o.dc),r.excludedServer.push(r.lastServer),!1)})),this.log+="".concat(e(),"excludedServer ").concat(JSON.stringify(this.excludedServer.map((function(e){return e.domain}))),"\n")},r.prototype.getLog=function(){return this.log},r}();return new r}()),JU.exports),YU=pc(QU);const ZU=TE.getInstance();YU.setRetryTimes(0);const XU=e=>Ot(bo(Ja().pipe(To((()=>{YU.cancelPing(),ZU.report(`ping rwc canceled. ping rwc log:${YU.getLog()}`,["Join Meeting Flow","Ping RWC Error"],"warn")})))),$r((e=>{const{response:t,request:r}=e;let o={};return o=t?{...t,rwc:r.domain,fromNginx:!1}:{rwc:r.domain,rwg:r.domain,rwcToken:r.rwcToken,fromNginx:!0},br([QS(o),HS()])})),lo((()=>{const t=YU.getLog(),{meeting:{meetingId:r,meetingNumber:o,userName:n}}=e.value;return ZU.report(`ping rwc error,${JSON.stringify({meetingId:r,meetingNumber:_E(o),userName:_E(n)})}, ping rwc log: ${t}`,["Join Meeting Flow","Ping RWC Error"],"error"),$a(xo,{reason:"connection error",errorCode:YD.CommonError}),br([...yO(e.value)])}))),eV=(e,t)=>e.pipe(BS(`${Ng}`),Ro(t),uo((([,e])=>void 0!==e.meeting.encryptedRWC||void 0!==e.meeting.encryptedGEORWC&&e.meeting.encryptedGEORWC.length>0)),Ao((([,e])=>br(YU.ping((e=>{const{meeting:{encryptedRWC:t,encryptedGEORWC:r,meetingOptions:o,meetingNumber:n,ts:i,auth:s,enableHybridRWG:a,accountId:u},breakoutRoom:d,video:c,audio:l}=e,p=null==o?void 0:o.isEnableGeoFenceRWC,h=null!=c&&c.isWebrtcVideoCapable||null!=l&&l.isWebRtcAudioCapable&&(null==l?void 0:l.webRtcAudioMode)&ke.WebRTCAudio2?null==c?void 0:c.miniRwgOptionValue:0;let m;return a&&(m=u),p&&r&&(null==r?void 0:r.length)>0?r.map((e=>{const{dc:t,dl:r,rwc:o,rwcToken:a}=e;return{url:fO(o,n,a,i,s,null==d?void 0:d.currentRoom.boConfId,h,m),domain:o,rwcToken:a,dl:r,dc:t}})):t?Object.keys(t).map((e=>{const r=t[e];return{url:fO(e,n,r,i,s,null==d?void 0:d.currentRoom.boConfId,h,m),domain:e,rwcToken:r,dl:0,dc:"AP"}})):[]})(e))).pipe(XU(t),Io(qg(performance.now()))))));let tV=0;const rV=TE.getInstance(),oV={meetingStatus:Ho.Initial,isWindowOpen:!1,apiKey:"",signature:"",signatureType:"",lang:"en-US",tk:"",customerKey:"",mtkGuid:"",pingRWCTimestamp:0,meetingInfoTimestamp:0,passWord:"",meetingNumber:0,userName:"",userEmail:"",sdkUrl:"",sdkOrigin:"",proxy:1,cv:"",meetingId:"",tid:"",ts:"",auth:"",sign:"",isSupportCallOut:!1,tollNumbers:void 0,recordingEnable:!1,callOutCountry:void 0,inviteEmail:"",xmppConfig:null,isSupportH323:!1,h323GatewayInfo:"",h323Password:"",trackAuth:"",isOriginHost:!1,isWebinar:!1,encryptedRWC:void 0,meetingOptions:{},meetingTopic:"",bLock:!1,bHoldUponEntry:!1,viewOnly:0,listenOnlyPhone:0,bAllowRaiseHand:!1,bAllowAttendeeRename:!1,bBroadcast:void 0,bAllowPlayChimeForEnterOrExit:!1,bIbDisableShare:!1,bIbDisableChat:!1,bAllowShowCount:!1,encryptKey:"",bNoHostTimeOut:!1,confId:"",conId:"",e2eEncrypt:!1,zoomId:"",jid:"",xtoken:"",groups:void 0,svcUrl:"",encType:NaN,userGUID:"",userId:NaN,isHost:!1,isCoHost:!1,participantID:0,isOnHold:!1,isMeetingReset:!1,bRecord:!1,audioVideoBeforeOnHold:void 0,region:void 0,network:void 0,joinMeetingTimeStamp:0,activeAppInfo:void 0,recordingDisclaimerForRecorder:{},recordingDisclaimer:{},ccUrl:"",sessionIdleTimeoutMins:40,reportDomain:"",discardedRwcList:[],sharePronounType:void 0,stayAwake:!1,wrInfo:{},meetingInfo:{},isNewJoinFlow:!1,gatewayUserList:[],logConfig:"",failover:{count:0,isCurrentFailoverRecorded:!1,reason:-1,interval:0,joinMeetingSuccessTimestamp:0,sequence:""},isUseWBVideo:!1,isUseWBAudio:!1,enableLongPollingCheckStart:!1,rsPwd:"",chatModerationPolicy:{},uid:"",isAlternativeHost:!1,isAssistant:!1,isRlbTP:!1,isRlbTPReady:!1,isUIToolkit:!1,liveStreamInfo:{},enableHybridRWG:!1},nV=zc({[`${Hg}`]:sy(((e,{payload:t})=>{t.customerKey=e.customerKey||t.customerKey||"",Object.assign(e,t),e.meetingStatus=Ho.Initial})),[`${jg}`]:sy(((e,{payload:t})=>{t.customerKey=e.customerKey||t.customerKey||"",Object.assign(e,t)})),[`${Fg}`]:sy(((e,{payload:t})=>{e.isWindowOpen=t})),[`${Wg}`]:sy(((e,{payload:t})=>{t.useSDK?e.signatureType="sdk":e.signatureType="api",e.apiKey=t.apiKey,e.signature=t.signature,e.lang=t.language})),[`${xg}`]:sy(((e,{payload:t})=>{e.ztk=t})),[`${$g}`]:sy(((e,{payload:t})=>{e.zsk=t})),[`${Gg}`]:sy(((e,{payload:t})=>{e.obfToken=t})),[`${zg}`]:sy(((e,{payload:t})=>{e.tk=t.tk,e.mtkGuid=t.mtkGuid})),[`${qg}`]:sy(((e,{payload:t})=>{e.pingRWCTimestamp=t})),[`${fS}`]:sy(((e,{payload:t})=>{e.meetingInfoTimestamp=t})),[`${Kg}`]:sy(((e,{payload:t})=>{e.confId=t.confID,e.conId=t.conID,e.e2eEncrypt=t.e2eEncrypt,e.meetingNumber=parseInt(t.mn,10),e.zoomId=t.zoomID,e.meetingStatus=Ho.Joined,e.jid=t.jid,e.xtoken=t.xtoken,e.groups=t.groups,e.svcUrl=t.svcUrl,e.encType=t.encType,e.userGUID=t.userGUID,e.userId=t.userID,e.role=t.role,e.participantID=t.participantID,e.reportDomain=t.reportDomain,e.abToken=t.ABtoken,e.supportLocalAB=!!t.supportLocalAB,e.isUseWBVideo=!!t.useWBVideo,e.mediasdkConfig=t.mediasdkConfig,e.isUseWBAudio=!!t.useWBAudio,t.enableWebTransport&&(e.enableWebtransport=t.enableWebTransport,e.webtransportPort=t.WebTransportPort)})),[`${Jg}`]:sy(((e,{payload:t})=>{if(t.gatewayUser){var r;const{userId:n,sn:i}=t.gatewayUser,s=null===(r=e.gatewayUserList)||void 0===r?void 0:r.find((e=>e.userId===n));var o;s?s.sn=i:null===(o=e.gatewayUserList)||void 0===o||o.push(t.gatewayUser)}else Object.assign(e,t)})),[`${Yg}`]:sy(((e,{payload:t})=>{e.isHost=t})),[`${Zg}`]:sy(((e,{payload:t})=>{e.isCoHost=t})),[`${Xg}`]:sy(((e,{payload:t})=>{e.isOnHold=t})),[`${eS}`]:sy(((e,{payload:t})=>{e.isMeetingReset=t})),[`${tS}`]:sy(((e,{payload:t})=>{e.audioVideoBeforeOnHold=t})),[`${rS}`]:sy(((e,{payload:t})=>{e.currentUserAudioBeforeReset=t})),[`${oS}`]:sy(((e,{payload:t})=>{e.isCurrentUserMutedBeforeReset=t})),[`${nS}`]:sy(((e,{payload:t})=>{e.meetingStatus=t})),[`${iS}`]:sy(((e,{payload:t})=>{e.region=t.region,e.network=t.network})),[`${sS}`]:sy(((e,{payload:t})=>{e.isCurrentUserStartVideoBeforeReset=t})),[`${aS}`]:sy(((e,{payload:t})=>{e.joinMeetingTimeStamp=t})),[`${uS}`]:sy(((e,{payload:t})=>{e.activeAppInfo=t})),[`${dS}`]:sy(((e,{payload:t})=>{e.idleStartTime=t})),[`${cS}`]:sy(((e,{payload:t})=>{e.sessionIdleTimeoutMins=t})),[`${lS}`]:sy(((e,{payload:t})=>{var r;const o=null===(r=e.encryptedGEORWC)||void 0===r||null===(r=r.find((e=>e.rwc===t)))||void 0===r?void 0:r.dc;if(o){var n;const r=null===(n=e.encryptedGEORWC)||void 0===n?void 0:n.filter((e=>e.dc===o));r&&e.discardedRwcList.some((e=>(null==r?void 0:r.findIndex((t=>t.rwc===e)))>=0))&&e.discardedRwcList.push(...r.map((e=>e.rwc))),e.discardedRwcList.push(t)}})),[`${pS}`]:sy(((e,{payload:t})=>{e.sharePronounType=t})),[`${hS}`]:sy(((e,{payload:t})=>{e.stayAwake=t})),[`${mS}`]:sy(((e,{payload:t})=>{e.failover.joinMeetingSuccessTimestamp=t})),[`${gS}`]:sy((e=>{Object.assign(e.failover,{...oV.failover,count:e.failover.count,joinMeetingSuccessTimestamp:e.failover.joinMeetingSuccessTimestamp})})),[`${SS}`]:sy(((e,{payload:t})=>{const{count:r,reason:o,interval:n,sequence:i}=t;e.failover.count=r,e.failover.reason=o,e.failover.interval=n,e.failover.isCurrentFailoverRecorded=!0,e.failover.sequence=i})),[`${vS}`]:sy(((e,{payload:t})=>{e.quicklyLeave=t})),[`${yS}`]:sy(((e,{payload:t})=>{e.isEnableZmkFromRWG=t})),[`${ES}`]:sy(((e,{payload:t})=>{e.isRlbTP=t})),[`${_S}`]:sy(((e,{payload:t})=>{e.isRlbTPReady=t})),[`${Bg}`]:sy(((e,{payload:t})=>{e.isUIToolkit=t})),[`${Qg}`]:(e,{payload:t})=>{const{isFailover:r}=t,o={isMeetingReset:!0,apiKey:e.apiKey,signatureType:e.signatureType,signature:e.signature,lang:e.lang,proxy:1,stayAwake:e.stayAwake};var n;return r&&Object.assign(o,{currentUserAudioBeforeReset:e.audioVideoBeforeOnHold?e.audioVideoBeforeOnHold.audio:t.audio,isCurrentUserMutedBeforeReset:e.audioVideoBeforeOnHold?e.audioVideoBeforeOnHold.muted:null!==(n=e.isCurrentUserMutedBeforeReset)&&void 0!==n?n:t.muted,isCurrentUserStartVideoBeforeReset:e.audioVideoBeforeOnHold?e.audioVideoBeforeOnHold.video:t.video,meetingNumber:e.meetingNumber,userName:e.userName,passWord:e.passWord,userEmail:e.userEmail,sdkUrl:e.sdkUrl,sdkOrigin:e.sdkOrigin,cv:e.cv,zsk:e.zsk,ztk:e.ztk,obfToken:e.obfToken,idleStartTime:e.idleStartTime,sessionIdleTimeoutMins:e.sessionIdleTimeoutMins,customerKey:e.customerKey,failover:e.failover,stayAwake:e.stayAwake,quicklyLeave:e.quicklyLeave}),{...oV,...o}}},oV),iV={meetingFailoverReportEpic0:(e,t)=>e.pipe(BS(`${Hg}`),Ao((()=>{const r=0===t.value.meeting.failover.joinMeetingSuccessTimestamp&&!!Ay.get(by.WebclientZoomId);return e.pipe(BS(`${Kg}`),mo(1),$r((()=>{const e=[],{count:o,sequence:n}=Ay.get(by.WebclientFailoverCount)||{};let{meeting:{failover:{count:i,reason:s,interval:a}}}=t.value;const{meeting:{pingRWCTimestamp:u}}=t.value;if(r){i=(null!=o?o:0)+1,s=Fo.RefreshPage,a=0;const t=n?`${n}-${s}`:`${s}`;Ay.set(by.WebclientFailoverCount,{count:i,sequence:t},_y.SessionStorage),e.push(SS({count:i,reason:s,interval:a,sequence:t}))}const d=performance.now();let c=`WCL_M, JMCT(${d-u})`;return i>0&&s!==Fo.NormalCase&&(c=`${c},FAILOVER(${i},${s},${(a/1e3).toFixed(1)})`),zU.sendRWGConnectionPerformance(c),e.push(gS(),mS(d)),br(e)})))}))),meetingFailoverReportEpic1:(e,t)=>e.pipe(BS(`${Mg}`),$r((e=>{const{payload:r}=e,{meeting:{failover:{joinMeetingSuccessTimestamp:o,isCurrentFailoverRecorded:n},userGUID:i,userId:s,meetingId:a}}=t.value,u=[];if(!n){let{count:e,sequence:t}=Ay.get(by.WebclientFailoverCount)||{};t=t?`${t}-${r}`:`${r}`,r!==Fo.NormalCase&&(e+=1,Ay.set(by.WebclientFailoverCount,{count:e,sequence:t},_y.SessionStorage));const n=performance.now()-o;u.push(SS({reason:r,count:e,interval:n,sequence:t,userGUID:i,userId:s,meetingId:a}))}return br(u)})))},sV={sessionIdleEpic0:(e,t)=>e.pipe(BS(`${Kg}`),Ro(t),uo((([,e])=>void 0!==e.meeting.zlkJwtToken)),Ao((()=>($U&&$U.complete(),$U=new Vt,GU=oo(6e4).pipe(Ur((()=>performance.now()))).subscribe($U),$U.pipe(Ur((e=>Ug(e)))))))),sessionIdleEpic1:e=>e.pipe(BS(`${FS}`)).pipe(To((()=>{$U&&($U.complete(),GU.unsubscribe())})),yo(or)),sessionIdleEpic2:(e,t)=>e.pipe(BS(`${Ug}`),Ro(t),$r((([e,t])=>{var r;const{meeting:{idleStartTime:o,sessionIdleTimeoutMins:n,isOriginHost:i,isWebinar:s},participants:{attendeesList:a,xmppAttendeeList:u},recording:d,breakoutRoom:c}=t,l=e.payload,p=[];if(1!==a.length||s&&0!==u.length||(null==c||null===(r=c.currentRoom)||void 0===r?void 0:r.status)===gu.InRoom||(null==d?void 0:d.cmrStatus)===yn.Start)p.push(dS(void 0));else if(o){const e=i&&uu(a[0].userRole)?n:40;l-o>60*e*1e3&&(console.warn(`No active for ${e} minutes, will end the session.`),xU.report(`Session idle timeout(${e} minutes), end the session automatically!`,["Join Meeting Flow","Session idle"],"warn"),p.push(kg()),ro(500).subscribe((()=>{Qa()})))}else p.push(dS(l));return br(p)}))),sessionIdleEpic3:(e,t)=>e.pipe(BS(`${xS}`),uo((e=>[Rv,Ov].includes(e.payload.evt)&&void 0!==t.value.meeting.idleStartTime)),_r(Xt),$r((()=>{var e;const{participants:{attendeesList:r,xmppAttendeeList:o},recording:n,breakoutRoom:i}=t.value,s=[];return(r.length>1||o.length>0||(null==n?void 0:n.cmrStatus)===yn.Start||(null==i||null===(e=i.currentRoom)||void 0===e?void 0:e.status)===gu.InRoom)&&s.push(dS(void 0)),br(s)}))),sessionIdleEpic4:e=>e.pipe(BS(`${Pg}`,`${kg}`),So(dS(void 0)))},aV={meetingMainEpics0:(e,t)=>Ev(e,0).pipe(To((e=>{var r;if("READY"===(null===(r=e.payload.body)||void 0===r?void 0:r.status)){const{meeting:{zlkJwtToken:e,signatureType:r,sign:o,passWord:n,isHost:i,isOriginHost:s,ztk:a,zsk:u,tk:d,userEmail:c},breakoutRoom:l}=t.value,p=e?{zlkJwtToken:e}:{signType:r,sign:o};if(n&&""!==n&&(e?Object.assign(p,{mpwd:cd(n)}):i&&s||Object.assign(p,{mpwd:n})),(null==l?void 0:l.currentRoom.status)===gu.Joining){const{currentRoom:{boId:e,boConfId:t,boToken:r}}=l;e&&t&&r&&Object.assign(p,{botk:r})}if(!e){const{meeting:{obfToken:e}}=t.value,r=sessionStorage.getItem(by.WebclientObfToken),o=e||r,n=sessionStorage.getItem(by.WebclientZsk)||u;o?Object.assign(p,{obfToken:o}):(a&&Object.assign(p,{zak:a}),n&&Object.assign(p,{zak:n})),d&&Object.assign(p,{tk:d});const i=Ay.get(by.WebclientWebinarToken);void 0!==i&&Object.assign(p,{tk:i});const s=sessionStorage.getItem(by.WebclientRecordingToken);s&&Object.assign(p,{localRecordToken:s}),c&&Object.assign(p,{email:c})}WU.sendLaunchParams(p);const h=Ay.get(by.WebclientMeetingToken);h&&WU.joinMeeting(h)}})),yo(or)),meetingMainEpics1:(e,t)=>{return Ev(e,Nv).pipe(Ro(t),uo((([,e])=>e.socket.zoomSocketStatus===N_.Connected)),(r=([e,t])=>{const{payload:{body:{res:r,userID:o,zoomID:n,mn:i,participantID:s,meetingtoken:a,role:u}}}=e,{meeting:{userEmail:d,userName:c,isMeetingReset:l,apiKey:p,zsk:h,signatureType:m}}=t;if(KD.Success===r){const{WebclientParticipantId:t,WebclientZoomId:r,WebclientUserEmail:g,WebclientUserName:S,WebclientMeetingToken:v}=by;Ay.set(r,n,_y.SessionStorage),Ay.set(t,s,_y.SessionStorage),d&&Ay.set(g,d,_y.SessionStorage),Ay.set(S,c,_y.SessionStorage),a&&Ay.set(v,a,_y.SessionStorage),h&&WU.sendSdkKeyToMonitor(m,p,o);const f=[Kg(e.payload.body),aS(performance.now())];return l&&f.push(eS(!1)),(u&iu.Owner)===iu.Owner&&($a(xo,{reason:"dont support assisnt join through widget",errorCode:-1}),WU.leaveMeeting()),$a(Wo,{meetingNumber:i}),br(f)}if(KD.MeetingLocked===r)$a(xo,ew(r));else if(KD.UserFull===r)$a(xo,Object.assign({},ew(r),{lmUrl:e.payload.body.lmURL}));else if(KD.MeetingIsOver===r)$a(xo,ew(r));else if(KD.MMRIBReject===r)$a(xo,ew(r));else if(KD.MMRConfParticipantExists===r)$a(xo,ew(r));else if([KD.UserHasBeenRemoved,KD.WebinarBlockedEmail].includes(r))$a(xo,ew(r));else if(KD.MeetingNotStarted===r){var g;const e=ew(r),{meeting:{meetingNumber:o,passWord:n,userName:i,userEmail:s,inviteEmail:a,meetingTopic:u,region:d,network:c,userId:l,lang:p,meetingId:h,participantID:m,wrInfo:S,meetingInfo:v,isNewJoinFlow:f,enableLongPollingCheckStart:E,tid:_,signature:I,rsPwd:A}}=t;Object.assign(e,{meetingInfo:{meetingNumber:o,password:n,userName:i,userEmail:s,inviteEmail:a,meetingTopic:u,region:d,network:c,userId:l,lang:p,webEndpoint:y(),meetingId:h,participantId:m,wrInfo:Object.assign({},S,{isNew:f}),scheduleInfo:v,enableLongPollingCheckStart:E,rid:IO(_),role:Number(null===(g=Ad(I))||void 0===g?void 0:g.role),rsPwd:A}}),$a(xo,e)}else $a(xo,ew(r));return br(yO(t,!1))},Ot(Ao(((e,t)=>r(e)||or)))));var r},meetingMainEpics2:(e,t)=>Ev(e,Ov).pipe(Ro(t),Ur((([e,t])=>{const{payload:{body:r}}=e,{meeting:{zoomId:o,encType:n,gcmSessinKey:i}}=t;if(void 0!==(null==r?void 0:r.encryptKey)&&Sb.init(o,r.encryptKey,n),void 0!==(null==r?void 0:r.gatewayKey)){const e=ju.getInstance(),[,t,o]=r.gatewayKey.split(".");e.sendUserNodeList([{userid:Number(t),sn:o&&md(o)}],i)}return $a(qo,r),Jg(r)}))),meetingMainEpics3:(e,t)=>Ev(e,7939).pipe(Ro(t),$r((([e,t])=>{const{payload:{body:r}}=e;if(void 0!==r.reason){if(JD.Reconnect===r.reason)return QD.WaitingRoomFailover===r.subReason?$a($o,{reason:ko.OnHold}):$a($o,{reason:ko.Failover}),Cr(Mg(Fo.NormalCase));JD.KickedByHost===r.reason?$a(Go,{reason:"kicked by host"}):[JD.EndByHost,JD.EndByNone,JD.EndByAdmin,JD.EndByHostStartAnotherMeeting].includes(r.reason)?$a(Go,{reason:"ended by host"}):JD.FreeMeetingTimeout===r.reason?$a(Go,{reason:"free meeting ended"}):[JD.DuplicateSession,JD.MeetingTransfer].includes(r.reason)&&$a(Go,{reason:"duplicated session"})}return t.meeting.isMeetingReset?or:br(yO(t,!1))}))),meetingMainEpics4:(e,t)=>e.pipe(BS(`${Mg}`),Ro(t),$r((([,e])=>{const t=yO(e,!0);let r;if(e.meeting.zlkJwtToken){const t=function(e){if(e){const{meeting:{topic:t,passWord:r,userName:o,zlkJwtToken:n,lang:i,cv:s,customerKey:a}}=e;return{topic:t,passWord:r,userName:o,zlkJwtToken:n,lang:i,cv:s,customerKey:a}}return null}(e),o={topic:null==t?void 0:t.topic,password:null==t?void 0:t.passWord,userName:null==t?void 0:t.userName,zlk:null==t?void 0:t.zlkJwtToken,lang:null==t?void 0:t.lang,cv:null==t?void 0:t.cv,customerKey:null==t?void 0:t.customerKey};r=Cr(wg(o)).pipe(fo(1e3))}else{const t=function(e){var t;const{meeting:{apiKey:r,signature:o,signatureType:n,meetingNumber:i,userName:s,lang:a,passWord:u,userEmail:d,sdkUrl:c,sdkOrigin:l,proxy:p,cv:h,ztk:m,zsk:g,tk:S,obfToken:v}}=e,f=sessionStorage.getItem(by.WebclientObfToken),y=v||f;let E=m||sessionStorage.getItem(by.WebclientZtk),_=g||sessionStorage.getItem(by.WebclientZsk);const I=1===Number(null===(t=Ad(o))||void 0===t?void 0:t.role);return y?(E="",_=""):I||(E=_,_=""),{apiKey:r,signature:o,signatureType:n,meetingNumber:i,userName:s,lang:a,passWord:u?encodeURIComponent(u):"",userEmail:d,sdkUrl:c,sdkOrigin:l,proxy:p,cv:h,ztk:E,zsk:_,tk:S||sessionStorage.getItem(by.WebclientTk),ulsm:I&&_?1:0}}(e);r=Cr(Dg(t)).pipe(fo(1e3))}return qr(br(t),r)}))),meetingMainEpics5:e=>Av(e,7940).pipe(To((e=>{$a("MEETING_HOST_CHANGE_INDICATION",e.payload.body.bHost)})),Ur((e=>Yg(e.payload.body)))),meetingMainEpics6:e=>Av(e,7941).pipe(To((e=>{$a("MEETING_COHOST_CHANGE_INDICATION",e.payload.body.bCoHost)})),Ur((e=>Zg(e.payload.body)))),meetingMainEpics7:e=>Av(e,7945).pipe(To((e=>{const{payload:{body:{opt:t}}}=e;Ay.set(by.WebclientOpt,t,_y.SessionStorage)})),yo(or)),meetingMainEpics8:(e,t)=>Ev(e,7942).pipe(To((e=>{const{payload:{body:{bHold:t}}}=e;Ay.set(by.WebclientIsOnHold,t?1:0,_y.SessionStorage),$a(zo,t)})),Ro(t),$r((([e,t])=>{const r=[Xg(e.payload.body.bHold)];if(e.payload.body.bHold){const e=Tu(t);if(e){r.push(tS({audio:e.audio,video:e.bVideoOn,muted:e.muted}));const o=NE(ju.getInstance());if("computer"===e.audio&&(o.leaveComputerAudio(),WU.joinOrLeaveVoip(!1)),e.bVideoOn&&o.stopCaptureVideo(),e.sharerOn&&(WU.stopSharing(e.userId),o.stopDesktopSharing(),r.push(YI(z.End))),t.video&&t.video.subscribedVideoList.length>0&&t.video.subscribedVideoList.forEach((e=>{o.unsubscribeVideo(e)})),t.share&&t.share.isReceiveSharing){const e=t.share.activeNodeId;t.share.remoteControlledUserList.length>0&&(t.share.remoteControlledUserList.forEach((e=>{WU.sharingRequestRemoteControl(e,!1)})),JE(t)&&o.stopRemoteControl()),WU.unsubscribeSharing(e),o.stopRenderSharing(),r.push(KI(!1))}}}return br(r)}))),meetingMainEpics9:e=>Ev(e,7954).pipe(Ur((e=>iS(e.payload.body)))),meetingMainEpics10:e=>Ev(e,4216).pipe(To((e=>{$a("MEETING_CLAIM_HOST_KEY_RESPONSE",e.payload.body.bresult)})),yo(or)),meetingMainEpics11:(e,t)=>e.pipe(BS(`${Pg}`,`${kg}`),Ro(t),$r((([e,t])=>{const r=Vu(t),{socket:{zoomSocketStatus:o},meeting:{meetingId:n}}=t;return o===N_.Connected&&(e.type===`${Pg}`?WU.leaveMeeting(r):e.type===`${kg}`&&WU.endMeeting()),n&&$a(Go,{}),br(yO(t,!1))}))),meetingMainEpics12:(e,t)=>e.pipe(BS(`${Lg}`),Ro(t),$r((([e,t])=>{if(e.type===`${Lg}`&&t.meeting.meetingNumber&&!t.meeting.zlkJwtToken){const e={mn:t.meeting.meetingNumber.toString(),name:t.meeting.userName,customerKey:t.meeting.customerKey?cd(t.meeting.customerKey):""},{jbhLeave:r}={jbhLeave:`https://${m}/wc/jbhLeave`},o=`${r}/?${new URLSearchParams(e).toString()}`;fetch(o,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"}})}return or}))),meetingMainEpics13:e=>Ev(e,2).pipe(To((()=>{console.warn("Upgrade to latest version to optimize meeting experience")})),yo(or)),meetingMainEpics14:e=>Ev(e,1).pipe(To((e=>{const{payload:{body:{upgradeVersion:t}}}=e,r=ew(1e4);if(r&&r.reason){const e=r.reason.replace(/{(\d+)}/g,(()=>t));r.reason=e}$a(xo,r)})),yo(or)),meetingMainEpics15:e=>Ev(e,4265).pipe(Ur((e=>{const{payload:{body:t}}=e,{nShareType:r}=t;return $a(Ko,{userSharePronounType:r}),pS(r)}))),meetingMainEpics16:e=>Ev(e,4128).pipe(To((e=>{const{payload:{body:{meetingtoken:t}}}=e,{WebclientMeetingToken:r}=by;t&&Ay.set(r,t,_y.SessionStorage)})),yo(or)),meetingMainEpics17:(e,t)=>e.pipe(BS(`${Kg}`),uo((()=>!!t.value.meeting.quicklyLeave)),Ao((()=>Xr(window,"beforeunload").pipe(To((()=>{WU.leaveMeeting()})),yo(or))))),meetingMainEpics18:(e,t)=>Ev(e,8025).pipe(uo((e=>!!e.payload.body.Zmk&&!!t.value.meeting.isEnableZmkFromRWG)),Ur((e=>{const{payload:{body:{Zmk:t}}}=e;return Jg({zmk:t})}))),meetingMainEpics19:(e,t)=>e.pipe(BS(`${Hg}`),$r((e=>{const{payload:{mediaFeatureOptions:r,mediaSDKPath:o}}=e,{media:{skipJsMedia:n,patchJsMedia:s,assetsPath:a}}=t.value;if(function(e){return 1===function(e){try{if(47>e.length)return 0;const t=e.slice(e.length-47-1+1,e.length-47+1);if(t)return parseInt(t,16)}catch(e){}return 0}(e)}(r)){const e=`${!n&&s&&wd(a)&&o?bd(o):a}/tp.min.js`;return br(void 0===window.ZoomTPModule||"function"!=typeof window.ZoomTPModule.ZoomTPWebSocket?new Promise(((t,r)=>i(e,(()=>t("")),(()=>r())))):Promise.resolve("")).pipe($r((()=>{const{meeting:{mediaFeatureOptions:e},logger:r}=t.value,o=r?TE.getInstance().makeLogger(["TP MODULE"]):void 0;return br(window.ZoomTPModule.initTPModule({options:e,logInstance:o}).then((()=>($a(Jo,!0),_S(!0)))).catch((()=>($a(Jo,!1),ES(!1)))))})),lo((()=>(setTimeout((()=>{TE.getInstance().report(`Unable to load tp.min.js,url:${e}`,["TP MODULE"],"error")}),5e3),$a(Jo,!1),br([ES(!1)])))),Io(ES(!0)))}return or})))},uV=yv(aV,{wakeLockEpic0:(e,t)=>e.pipe(BS(`${Kg}`),Ro(t),uo((([,e])=>!!e.meeting.stayAwake)),To((async()=>{try{const{isSafari:e,isIOSMobile:t}=C;qU&&qU.release().then((()=>{qU=null})),"wakeLock"in navigator&&((e||t)&&await Nr(co(Xr(document,"click").pipe(mo(1)),Xr(document,"touchend").pipe(mo(1)))),qU=await navigator.wakeLock.request("screen"),qU.addEventListener("release",(()=>{})))}catch(e){}})),Ao((()=>Xr(document,"visibilitychange").pipe($r((async()=>{if("visible"===document.visibilityState){const{isSafari:e,isIOSMobile:t}=C;qU&&qU.release().then((()=>{qU=null})),"wakeLock"in navigator&&((e||t)&&await Nr(co(Xr(document,"click").pipe(mo(1)),Xr(document,"touchend").pipe(mo(1)))),qU=await navigator.wakeLock.request("screen"))}else qU&&qU.release().then((()=>{qU=null}))})),yo(or))))),wakeLockEpic1:e=>e.pipe(BS(`${FS}`)).pipe(To((()=>{qU&&qU.release().then((()=>{qU=null}))})),yo(or))},iV,sV,{meetingInfoEpic:(e,t)=>e.pipe(BS(`${wg}`),Ao((r=>{const o=Object.assign({},r.payload,{password:cd(r.payload.password),topic:cd(r.payload.topic)}),{videoSDKUrl:n}={meetingSDKUrl:`https://${m}/api/v1/wc/info`,videoSDKUrl:`https://${m}/wc/lsdk`};return((e,t,r="zoomsdkjsonpcallback")=>new wt((o=>{tV++;const n=`${r}${tV}`,i=document.createElement("script");Object.keys(t).forEach((e=>(void 0===t[e]||null===t[e])&&delete t[e])),i.src=`${e}?${new URLSearchParams(Object.assign(t,{callback:n})).toString()}`,i.async=!0,i.onerror=e=>o.error(e),document.getElementsByTagName("head")[0].appendChild(i),window[n]=e=>{i.parentNode&&i.parentNode.removeChild(i),delete window[n],o.next(e),o.complete()}})))(n,o).pipe(bo(e.pipe(BS(`${Pg}`),To((()=>{$a(Go,{})})),mo(1))),lo((e=>Cr({status:!1,result:e.toString(),errorCode:-3e3}))),$r((e=>{const[o,n]=(i=Cr(e),[uo(s=e=>!0===e.status&&void 0!==e.result,a)(fr(i)),uo(ao(s,a))(fr(i))]);var i,s,a;return n.subscribe((e=>{rV.report(`get meeting info error, ${JSON.stringify(e)}`,["Join Meeting Flow","Get Meeting Info Error"],"error"),e.status||(3e3===e.errorCode&&"Meeting password is incorrect"===e.errorMessage?$a(xo,{errorCode:YD.WrongPasscode,reason:"Incorrect passcode."}):3e3===e.errorCode&&"The role type error"===e.errorMessage?$a(xo,{errorCode:YD.RoleTypeMissing,reason:"Role type error"}):-3e3===e.errorCode?$a(xo,{errorCode:YD.CommonError,reason:"connection error"}):3e3===e.errorCode?$a(xo,{reason:e.errorMessage,errorCode:YD.CommonError}):300===e.errorCode?$a(xo,{reason:"This account does not exist or does not belong to you",errorCode:YD.CommonError}):124===e.errorCode&&"Parse lite sdk topic and pwd fail"===e.errorMessage?$a(xo,{reason:"Topic is invalid",errorCode:YD.CommonError}):124===e.errorCode&&"The java web token is expired or more than 2 days or ineffective."===e.errorMessage?$a(xo,{reason:"The token has expired, is over 2 days old, or is ineffective.",errorCode:YD.CommonError}):124===e.errorCode&&$a(xo,{reason:"Verify JWT failed",errorCode:YD.CommonError}))})),o.pipe(T_((e=>{if(!0===e.status){const{result:{mid:n,websdkClientFeatureOptions:i,showRecommendVersion:s}}=e;Ay.init(n);const a=((e,t)=>{if(e.result){const{result:{mn:r,ts:o,auth:n,track_auth:i,mid:s,tid:a,webMediaBlockConfig:u,encryptedRWC:d,encryptedGEORWC:c,user_identity:l,meetingOptions:p,can_recording:h,wcXMPPConfig:m,call_out_country_json:g,isOriginalHost:S,support_call_out:v,liveTranscription:f,logConfig:y,toll_numbers_json:E,h323Password:_,liveStreamInfo:I,rc_auto_delete:A,jwt_rc:b,op_rc:C,mediaSDKVersion:T,mediaSDKPathPrefix:R,zmk:O,fileTransfer:D,fileServerDomain:w,accountId:N,whiteboardCdnPath:M,mediaFeatureOptions:P,websdkClientFeatureOptions:L,sipDomain:k,enableVsdkInteractiveLiveStream:U,enableHybridRWG:V}}=e,{lang:B,password:H,topic:j,zlk:F,cv:W,userName:x}=t;return{meetingNumber:r,meetingId:s,tid:a,ts:o,auth:n,passWord:H,trackAuth:i,customerKey:l,encryptedRWC:JSON.parse(d||"{}"),encryptedGEORWC:JSON.parse(c||"{}"),meetingOptions:JSON.parse(p||"{}"),recordingEnable:"1"===h,topic:j,userName:Ay.get(by.WebclientUserName)||x,cv:W,zlkJwtToken:F,webMediaBlockConfig:u,xmppConfig:JSON.parse(m||"{}"),callOutCountry:JSON.parse(g||"{}"),lang:B,isOriginHost:S,isSupportCallOut:"1"===v,liveTranscription:JSON.parse(f||"{}"),logConfig:y,tollNumbers:void 0===E?void 0:JSON.parse(E),h323Password:_,liveStreamInfo:JSON.parse(I||"{}"),rcAutoDelete:A,jwtRc:b,opRc:C,mediaSDKPath:T&&R?`${bd(R)}/${T}`:void 0,zmk:O,fileTransfer:JSON.parse(D||"{}"),fileServerDomain:w,accountId:N,mediaFeatureOptions:P,websdkClientFeatureOptions:L,sipDomain:k,enableVsdkInteractiveLiveStream:U,whiteboardCdnPath:M,enableHybridRWG:V}}return e})(e,r.payload);var o;s&&(null==r||null===(o=r.payload)||void 0===o||o.lang,console.log("Update VideoSDK-Web to the latest version to optimize meeting experience","https://developers.zoom.us/docs/video-sdk/web/"));const u=[Cr(Hg(a)),vv(eV,t,Ng())],d=(e=>{const t=[];if(e){const r=e.split("").reverse();Object.keys(jo).filter((e=>/M:\d+(,\d+)*;V:\d+(,\d+)*/.test(jo[e]))).forEach((e=>{const o=jo[e];let[n,i]=o.split(";");n.startsWith("V:")&&([n,i]=[i,n]);const s=i.slice(2).split(",").map((e=>r[Number(e)-1])).reverse().join(""),a=parseInt(s,16),u=_O[o];u&&(Array.isArray(u)?u:[u]).forEach((e=>{const r=e.mask?(a&e.mask)>0:a;t.push(Cr(e.action(r)))}))}))}return t})(i);return d.length>0&&u.unshift(...d),qr(...u)}})))})),Io(fS(performance.now())))}))),pingRWCEpic:eV,retryPingRWCEpic:(e,t)=>e.pipe(BS(`${YS}`),_r(Xt),uo((()=>t.value.meeting.meetingStatus===Ho.Initial&&t.value.socket.zoomSocketStatus===N_.Closed)),Ao((()=>{const{meeting:{meetingId:e,meetingNumber:r,userName:o},socket:{retryCount:n,rwgServerList:i}}=t.value,s=null==i?void 0:i[n-1];return ZU.makeLogger(["Join Meeting Flow"]).info(`ping rwc retry. Last failed rwc:${null==s?void 0:s.rwc}, last failed rwg:${null==s?void 0:s.rwg}, retry count:${n}, meeting detail:${JSON.stringify({meetingId:e,meetingNumber:_E(r),userName:_E(o)})}, rwc log:${YU.getLog()}`,["Ping RWC Retry"]),br(YU.retry()).pipe(XU(t))})))});function dV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)e[o]=r[o]}return e}var cV=function e(t,r){function o(e,o,n){if("undefined"!=typeof document){"number"==typeof(n=dV({},r,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in n)n[s]&&(i+="; "+s,!0!==n[s]&&(i+="="+n[s].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+i}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],o={},n=0;n<r.length;n++){var i=r[n].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(o[a]=t.read(s,a),e===a)break}catch(e){}}return e?o[e]:o}},remove:function(e,t){o(e,"",dV({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,dV({},this.attributes,t))},withConverter:function(t){return e(dV({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const{WebclientIsOnHold:lV,WebclientOpt:pV,WebclientParticipantId:hV,WebclientZoomId:mV,WebclientMeetingToken:gV}=by,{WebclientDeviceId:SV}=Cy;function vV({retryCount:e,rwgServerList:t,userName:r,auth:o,trackAuth:n,meetingId:i,customerKey:s,tid:a,lang:u,ts:d,bid:c,botk:l,confID:p,zlkJwtToken:h,isWebRtcAudioCapable:m,isMeetingReset:g,cameraDevicesList:S,whiteboardCapability:v,isWebrtcVideoCapable:f,webRtcAudioMode:y,mediaFeatureOptions:E}){const _=cV.get("_zm_mtk_guid");let I=Ay.get(SV);if(I||(I=Ey(),Ay.set(SV,I,_y.LocalStorage)),t.length>e){var A;const b=t[e],T={dn2:cd(r),auth:o,browser:`${C.browser}${C.browserVersion} ${null!==(A=window)&&void 0!==A&&A.crossOriginIsolated?"SAB":""}`,trackAuth:n,mid:i,tid:a,lang:u,ts:d,"ZM-CID":I,_ZM_MTG_TRACK_ID:_||"",customer_key:cd(s),cfs:0,islch:1};if(h)try{const{vendor:e}=Ad(h);e&&Object.assign(T,{vendor:e})}catch(e){console.log(e)}b.rwcAuth?Object.assign(T,{rwcAuth:b.rwcAuth}):b.rwcToken&&Object.assign(T,{rwcToken:b.rwcToken});const R=C.isIE?1:C.isIE||C.isSupportEssentialAudioAndVideoAbility?2:0;Object.assign(T,{as_type:R}),[{key:pV,queryKey:"opt"},{key:hV,queryKey:"participantID"},{key:mV,queryKey:"zoomid"}].forEach((e=>{const t=Ay.get(e.key);void 0!==t&&(T[e.queryKey]=t)}));const O=c&&l&&p;O&&Object.assign(T,{bid:cd(c),confID:p}),Ay.get(gV)&&Object.assign(T,{isdj:1}),Object.assign(T,{from:C.isAndroidBrowser?"android":C.isIOSMobile?"ios":"other"}),m&&Object.assign(T,{useABAudio:y}),Object.assign(T,{clientCaps:fV({isAudioBridgeEnabled:m,isBO:O,mediaFeatureOptions:E})}),Object.assign(T,{clientCapsEx:yV({whiteboardCapability:v})}),Object.assign(T,{useWBVideo:f?1:0});const D=g?S.length>0?1:0:1;return Object.assign(T,{isCamera:D}),Object.assign(T,{clientOS:C.isAndroidOrIOSBrowser||C.isHarmonyOS?C.isIOSMobile?"ios":"android":C.isMacOS?"mac":"win"}),Object.assign(T,{audioFeature:ju.getAudioFeatureFlag(m)}),{queryObject:{...T},rwgServer:b}}return null}function fV(e){const{isAudioBridgeEnabled:t,isBO:r,mediaFeatureOptions:o}=e;let n=P_.WebCameraIndication|P_.SendMeetingTokenSeparately|P_.SmartSummary|P_.LocalRecording|P_.LocalRecordingGrantPermission|P_.UnifyErrorType;const i=ju.getPTZCapability();return(i.pan||i.tilt||i.zoom)&&(n|=P_.SupportFarEndCameraControl),ju.isSupportVideoShare()&&(n|=P_.SupportVideoShare),t&&ju.isSupportAudioBridgeAVSync()&&(n|=P_.WebrtcAudioRtcpTime),ju.isSupportShareMultiStream()&&(n|=P_.ShareMultiStream),ju.isSupportVideoLTR()&&(n|=P_.VideoLTR),r||(n|=P_.RequestRemoteControl),ju.isSupportFullHDVideo(o||"")&&(n|=P_.SupportSend1080PVideo),ju.isSupportFullHDVideoShare(o||"")&&(n|=P_.SupportSend1080PVideoShare),n}function yV({whiteboardCapability:e}){let t=L_.SupportPresenterAnnotation;return t|=L_.SupportMMRCommandChannel,t|=L_.SupportShareCameraFeed,t|=L_.SupportAudioShareNetworkQuality,t}function EV(e,t){const r=()=>{const{socket:{zoomSocketStatus:t},meeting:{meetingStatus:r,isMeetingReset:o}}=e.value;return t!==N_.Closed&&r===Ho.Joined&&!o};return t?Ot(fo(t),uo(r)):Ot(uo(r))}const _V=E_.createAgent();let IV;const AV=b_.getInstance();let bV;const CV=__.getInstance();let TV;const RV={zoomSocketStatus:N_.Closed,xmppSocketStatus:N_.Closed,mainSessionSocketStatus:N_.Closed,retryCount:0,rwgServerList:[],xmppRetryCount:0},OV=zc({[`${JS}`]:sy(((e,{payload:t})=>{e.zoomSocketStatus=t.status})),[`${QS}`]:sy(((e,{payload:t})=>{const{rwgServerList:r}=e;r.find((e=>e.rwg===t.rwg))||r.push(t)})),[`${YS}`]:sy(((e,{payload:t})=>{e.retryCount=t})),[`${ZS}`]:sy(((e,{payload:t})=>{e.xmppSocketStatus=t})),[`${XS}`]:sy(((e,{payload:t})=>{e.mainSessionSocketStatus=t})),[`${ev}`]:sy(((e,{payload:t})=>{e.xmppRetryCount=t})),[`${tv}`]:()=>RV},RV),DV={mainSessionEpics0:(e,t)=>e.pipe(BS(`${zS}`),Ro(t),uo((([,e])=>"closed"===e.socket.mainSessionSocketStatus)),Ao((([,e])=>{const{meeting:{svcUrl:t,meetingNumber:r,conId:o,isRlbTP:n}}=e,i=function(e,t,r){return`wss://${e}/wc/media/${t}?type=m&cid=${r}&mode=2`}(t,r,o);return((e,t)=>(CV.connect(e,t),TV=new Vt,to((e=>CV.on(v_.Message,e)),(e=>CV.off(v_.Message,e))).pipe(Ur((e=>e.data))).subscribe(TV),TV))(i,n).pipe(Ur((e=>{try{return JSON.parse(e)}catch(e){return console.error(e),{evt:0}}})),uo((e=>0!==e.evt)),w_(),Ur((e=>KS(e))),Io(XS(N_.Connecting)))}))),mainSessionEpics1:(e,t)=>e.pipe(BS(`${zS}`),Ao((()=>{const[e,r,o]=[v_.Open,v_.Close,v_.Error].map((e=>to((t=>CV.on(e,t)),(t=>CV.off(e,t)))));return no(e.pipe(So(XS(N_.Connected))),r.pipe(EV(t,500),Ur((()=>($a($o,{reason:ko.Failover}),Mg(Fo.DisconnectMChannel))))),o.pipe(EV(t,500),Ur((()=>($a($o,{reason:ko.Failover}),Mg(Fo.OnErrorMChannel))))))}))),mainSessionEpics2:e=>e.pipe(BS(`${qS}`),So(XS(N_.Closed)),To((()=>{var e;CV.close(),null===(e=TV)||void 0===e||e.complete()})))},wV={epics0:(e,t)=>e.pipe(BS(`${HS}`),Ro(t),uo((([,e])=>e.socket.zoomSocketStatus===N_.Closed&&!!e.meeting.meetingId)),Ao((([,e])=>function(e){const{media:{patchedMediaSDKStatus:t},meeting:{isRlbTP:r,isRlbTPReady:o}}=e;return Jr([t===Ce.Loading?Ka(zs,1).pipe(_r(Zt)):br([0]),r?o?br([0]):Ka(Jo,1).pipe(_r(Zt)):br([0])])}(e).pipe(Ao((()=>{const{socket:{retryCount:e,rwgServerList:r},meeting:o,breakoutRoom:n,audio:i,video:s,whiteboard:a}=t.value;let u;const d={...o,retryCount:e,rwgServerList:r};if(i){const{isWebRtcAudioCapable:e,webRtcAudioMode:t}=i;Object.assign(d,{isWebRtcAudioCapable:e,webRtcAudioMode:t})}if(s){const{cameraDevicesList:e,isWebrtcVideoCapable:t}=s;Object.assign(d,{cameraDevicesList:e,isWebrtcVideoCapable:t})}if(a)if(o.zlkJwtToken&&n&&n.currentRoom.status===gu.Joining);else{const{whiteboardCapability:e}=a;Object.assign(d,{whiteboardCapability:e})}if(n&&n.currentRoom.status===gu.Joining){const{currentRoom:{boId:e,boConfId:t,boToken:r}}=n;Object.assign(d,{bid:e,botk:r,confID:t})}if(u=o.zlkJwtToken?function(e){const t=vV(e);if(t){const{queryObject:r,rwgServer:o}=t,{topic:n,cv:i,meetingNumber:s,isUIToolkit:a}=e;return Object.assign(r,{topic:cd(n),iccv:i}),a&&Object.assign(r,{browser:r.browser+" UIToolkit"}),`wss://${o.rwg}/instantsdk/${s}?${new URLSearchParams(r).toString()}`}return null}(d):function(e){const t=vV(e);if(t){const{queryObject:r,rwgServer:o}=t,{cv:n,meetingNumber:i}=e;return Object.assign(r,{jscv:n,browser:r.browser+" ComponentView"}),[{key:lV,queryKey:"cfs"}].forEach((e=>{const t=Ay.get(e.key);void 0!==t&&(r[e.queryKey]=t)})),`wss://${o.rwg}/wc/api/${i}?${new URLSearchParams(r).toString()}`}return null}(d),u){const e=(c=u,l=o.isRlbTP,_V.connect(c,l),IV=new Vt,to((e=>_V.on(v_.Message,e)),(e=>_V.off(v_.Message,e)),(e=>e.data)).subscribe(IV),IV);return no(e.pipe(uo((e=>"string"==typeof e)),Ur((e=>{try{return JSON.parse(e)}catch(e){return console.error(e),{evt:0}}})),w_(),C_((e=>{if(0!==e.evt||!e.body||"invalid parameters!"!==e.body.test)return xS(e);$a(xo,{errorCode:YD.InvalidParameter,reason:"Invalid parameter"})})),Io(JS({status:N_.Connecting,rwgUrl:u}))),e.pipe(uo((e=>e instanceof ArrayBuffer)),Ur((e=>$S(e)))))}var c,l;return or})))))),epics1:(e,t)=>e.pipe(BS(`${HS}`),Ro(t),uo((([,e])=>e.socket.zoomSocketStatus===N_.Closed&&!!e.meeting.meetingId)),Ao((()=>{const[e,r,o,n]=[v_.Open,v_.Close,v_.Error,v_.Inactive].map((e=>to((t=>_V.on(e,t)),(t=>_V.off(e,t)))));return no(e.pipe($r((()=>no(Cr(JS({status:N_.Connected})),ro(6e4).pipe(Ro(t),uo((([,e])=>e.meeting.meetingStatus===Ho.Initial&&!e.meeting.isMeetingReset)),Ur((()=>($a($o,{reason:ko.Failover}),Mg(Fo.NoHeartbeat))))))))),r.pipe(EV(t),Ur((()=>($a($o,{reason:ko.Failover}),Mg(Fo.Disconnect))))),n.pipe(EV(t),Ur((()=>($a($o,{reason:ko.Failover}),Mg(Fo.NoHeartbeat))))),o.pipe(Ro(t),$r((([,e])=>{const{meeting:{meetingStatus:t,isMeetingReset:r},socket:{rwgServerList:o,retryCount:n}}=e,i=[];return t===Ho.Initial&&null!=o&&o.length?i.push(YS(n+1),FS({retry:!0})):r||t!==Ho.Joined||($a($o,{reason:ko.Failover}),i.push(Mg(Fo.OnError))),br(i)}))))}))),epics2:(e,t)=>e.pipe(BS(`${FS}`),Ao((e=>{const r=[JS({status:N_.Closed})];return e.payload&&e.payload.retry?br(r):br(r).pipe(fo(100),To((()=>{var e;t.value.socket.zoomSocketStatus===N_.Closed&&(_V.close(),null===(e=IV)||void 0===e||e.complete())})))})))},NV=yv(wV,{xmppEpics0:(e,t)=>e.pipe(BS(`${Kg}`),$r((()=>{const{meeting:{meetingOptions:e,zlkJwtToken:r,isWebinar:o}}=t.value,n=[];return(e.isPollingEnabled||r||o)&&n.push(jS()),br(n)}))),xmppEpics1:(e,t)=>e.pipe(BS(`${jS}`),Ro(t),uo((([,e])=>e.socket.xmppSocketStatus===N_.Closed)),Ao((([,e])=>{const{meeting:{svcUrl:t,meetingNumber:r,conId:o,isRlbTP:n}}=e,i=function(e,t,r){return`wss://${e}/wc/media/${t}?type=x&cid=${r}`}(t,r,o);return((e,t)=>(AV.connect(e,t),bV=new Vt,to((e=>AV.on(A_.Message,e)),(e=>AV.off(A_.Message,e))).subscribe(bV),bV))(i,n).pipe(uo((e=>void 0!==(null==e?void 0:e.evt))),Ur((e=>GS(e))),Io(ZS(N_.Connecting)))}))),xmppEpics2:(e,t)=>e.pipe(BS(`${jS}`),Ao((()=>{const[e,r,o]=[A_.Open,A_.Close,A_.Error].map((e=>to((t=>AV.on(e,t)),(t=>AV.off(e,t))))),n=e=>$r((()=>{const{socket:{xmppSocketStatus:r,xmppRetryCount:o}}=t.value,n=[];return r===N_.Connecting&&o<3?(n.push(ev(o+1)),n.push(WS({retry:!0}))):(r===N_.Connected||o>=3)&&($a($o,{reason:ko.Failover}),n.push(Mg(e))),br(n)}));return no(e.pipe(To((()=>{const e=function(){const{isSupportEssentialAudioAndVideoAbility:e,isSupportAudioWorklet:t}=C;return e&&t?11:10}();AV.join(e)})),Ur((()=>ZS(N_.Connected)))),r.pipe(EV(t,500),n(Fo.DisconnectXmpp)),o.pipe(EV(t,500),n(Fo.OnErrorXmppChannel)))}))),xmppEpics3:(e,t)=>e.pipe(BS(`${WS}`),Ao((e=>{var r;const o=[ZS(N_.Closed)];return null!==(r=e.payload)&&void 0!==r&&r.retry?br(o):br(o).pipe(fo(100),To((()=>{var e;t.value.socket.xmppSocketStatus===N_.Closed&&(AV.close(),null===(e=bV)||void 0===e||e.complete())})))}))),xmppEpics4:(e,t)=>e.pipe(BS(`${ev}`),uo((e=>e.payload<=3)),$r((e=>br([e]).pipe(fo(1e3*Math.pow(2,e.payload-1))))),EV(t),Ur((()=>jS())))},DV),MV={audioEncodeStatus:"initial",audioDecodeStatus:"initial",videoEncodeStatus:"initial",videoDecodeStatus:"initial",sharingEncodeStatus:"initial",sharingDecodeStatus:"initial",assetsPath:"",mediaConstraints:void 0,enforceMultipleVideos:!1,enforceVirtualBackground:!1,isMediaAgentInitialized:!1,disableRenderLimits:!1},PV=zc({[`${iv}`]:sy(((e,{payload:t})=>{e.audioDecodeStatus=t})),[`${nv}`]:sy(((e,{payload:t})=>{e.audioEncodeStatus=t})),[`${dv}`]:sy(((e,{payload:t})=>{e.sharingDecodeStatus=t})),[`${uv}`]:sy(((e,{payload:t})=>{e.sharingEncodeStatus=t})),[`${av}`]:sy(((e,{payload:t})=>{e.videoDecodeStatus=t})),[`${sv}`]:sy(((e,{payload:t})=>{e.videoEncodeStatus=t})),[`${cv}`]:sy(((e,{payload:t})=>{e.mediaConstraints=t.mediaConstraints,e.assetsPath=t.assetsPath,e.enforceMultipleVideos=!!t.enforceMultipleVideos,e.enforceVirtualBackground=t.enforceVirtualBackground,e.skipJsMedia=t.skipJsMedia,e.patchJsMedia=t.patchJsMedia,e.alternativeNameForVideoPlayer=t.alternativeNameForVideoPlayer,t.enforceMultipleVideos&&"object"==typeof t.enforceMultipleVideos&&(e.disableRenderLimits=!!t.enforceMultipleVideos.disableRenderLimits)})),[`${lv}`]:sy(((e,{payload:t})=>{const{type:r,encryptKey:o,additionalType:n}=t,i={encryptKey:o,additionalType:n};"audio"===r?e.audioEncrypt=i:"video"===r?e.videoEncrypt=i:"sharing"===r&&(e.sharingEncrypt=i)})),[`${pv}`]:sy(((e,{payload:t})=>{e.isEnableDecoderInWorklet=t})),[`${hv}`]:sy(((e,{payload:t})=>{e.patchedMediaSDKStatus=t})),[`${mv}`]:sy(((e,{payload:t})=>{e.assetsPath=t})),[`${gv}`]:sy(((e,{payload:t})=>{e.isMediaAgentInitialized=t})),[`${Sv}`]:e=>({...MV,mediaConstraints:e.mediaConstraints,assetsPath:e.assetsPath,enforceMultipleVideos:e.enforceMultipleVideos,disableRenderLimits:e.disableRenderLimits,enforceVirtualBackground:e.enforceVirtualBackground,alternativeNameForVideoPlayer:e.alternativeNameForVideoPlayer})},MV),{InitSuccessVideo:LV,InitSuccessAudio:kV,InitSuccessSharing:UV,InitFailedVideo:VV,InitFailedAudio:BV,InitFailedSharing:HV,HealthCheckFailed:jV,AudioWebsocketBroken:FV,VideoWebsocketBroken:WV,AudioStreamFailed:xV,VideoStreamFailed:$V,WebglContextInvalid:GV,WasmMemoryFail:zV,AudioStreamMuted:qV,RecoverWebrtcAudio:KV,AudioBridgeSocketConnectionError:JV,VideoStreamMuted:QV}=L,YV=NE(ju.getInstance()),ZV=TE.getInstance(),XV=ZV.makeLogger(["Media Agent"]),eB=[],tB={epics0:(e,t)=>e.pipe(BS(`${Hg}`),Ao((r=>{var o;const{meeting:{isMeetingReset:n}}=t.value;return C.mediaFeatureOptions=null===(o=r.payload)||void 0===o?void 0:o.mediaFeatureOptions,e.pipe(bo(e.pipe(BS(`${FS}`),uo((e=>{var t;return!(null!==(t=e.payload)&&void 0!==t&&t.retry)})),mo(1))),BS(`${Kg}`),mo(1),R_((()=>{var e;const{logger:r,media:{mediaConstraints:o,assetsPath:i,enforceMultipleVideos:s,enforceVirtualBackground:a},meeting:{meetingId:u,meetingNumber:d,mediaFeatureOptions:c,webMediaBlockConfig:l}}=t.value,p=null!=r&&null!==(e=r.options)&&void 0!==e&&e.enable?TE.getInstance().makeLogger(["MEDIA SDK"]):void 0;return function(e){const{media:{patchedMediaSDKStatus:t}}=e;return t===Ce.Loading?Nr(Ka(zs,1)):Promise.resolve()}(t.value).then((()=>{const e=[];return YV.init({...$d(s,a),globalTracingLogger:ME(p),mid:u,meetingNumber:d,mediaSDKConfig:{mediaFeatureOptions:c,webMediaBlockConfig:l,mediaSDKCDNPath:i},rwgAgent:E_.createAgent()}),e.push(gv(!0)),n&&void 0!==o&&void 0!==i&&e.push(rv()),e})).catch((()=>[]))})))}))),epics1:(e,t)=>e.pipe(BS(`${Hg}`),uo((e=>{const{payload:{mediaSDKPath:r}}=e,{media:{skipJsMedia:o,patchJsMedia:n,assetsPath:i},meeting:{isMeetingReset:s}}=t.value;return!o&&wd(i)&&!!n&&!!r&&!s})),Ao((e=>{const{payload:{mediaSDKPath:t}}=e,r=bd(t);return br(new Promise(((e,t)=>{const o=`${r}/${Uo}`;"JsMediaSDK_Instance"in window&&(window.JsMediaSDK_Instance_backup=window.JsMediaSDK_Instance,delete window.JsMediaSDK_Instance),i(o,(()=>{"JsMediaSDK_Instance_backup"in window&&delete window.JsMediaSDK_Instance_backup,XV.info(`patched media sdk url:${o}`),e("")}),(()=>{"JsMediaSDK_Instance_backup"in window&&(window.JsMediaSDK_Instance=window.JsMediaSDK_Instance_backup,delete window.JsMediaSDK_Instance_backup),XV.error(`cannot load patched media sdk :${o}`),t()}))}))).pipe($r((()=>($a(zs),br([hv(Ce.Done),mv(r)])))),lo((()=>($a(zs),br([hv(Ce.Done)])))),Io(hv(Ce.Loading)))}))),epics2:(e,t)=>function(e,t){return e.pipe(BS(`${rv}`),uo((()=>{const{media:{assetsPath:e,mediaConstraints:r}}=t.value;return void 0!==e&&void 0!==r})),Ao((()=>{const{media:{isMediaAgentInitialized:r}}=t.value;return r?br([0]):e.pipe(BS(`${gv}`),uo((e=>!!e.payload)),mo(1))})))}(e,t).pipe(To((()=>{const{media:{assetsPath:e,mediaConstraints:r}}=t.value;YV.notifySDKMeetingReady(),e&&r&&YV.setAssetsAndConstraint(e,r),Md(t).pipe(Ao((e=>br(qd.acquire().then((()=>e)))))).subscribe((e=>{const{meeting:{svcUrl:r,meetingNumber:o,conId:n,e2eEncrypt:i,userId:s,isWebinar:a,enableWebtransport:u,webtransportPort:d,isUseWBVideo:c,mediasdkConfig:l,reportDomain:p,abToken:h,confId:m},media:{alternativeNameForVideoPlayer:g,enforceMultipleVideos:S,disableRenderLimits:v},audio:f,video:y}=t.value;var E;e&&(YV.connect({svcUrl:r,meetingNumber:o,conId:n,confId:m,e2eEncrypt:i,isViewOnly:lu(e.userRole),currentUserId:s,isWebinar:a,reportDomain:p,abToken:null!=h?h:"",enableWebtransport:!!u,webtransportPort:null!=d?d:0,isWebRtcVideoCapable:c,isWebRtcAudioCapable:!(null==f||!f.isWebRtcAudioCapable),rendererType:null!==(E=null==y?void 0:y.rendererType)&&void 0!==E?E:0,webrtcMode:Xd(!(null==f||!f.isWebRtcAudioCapable),c),mediasdkConfig:null!=l?l:{},enforceMultipleVideos:S,disableRenderLimits:v}),ju.initVideoPlayer({mediaSDK:()=>YV.instance,tagName:g,failover:"1"}))}))})),Ao((()=>to((e=>YV.registerCallback(e)),(e=>YV.unregisterCallback(e)),((e,t)=>({type:e,data:t}))).pipe(Ur((e=>ov(e))))))),epics3:e=>bv(e,[LV,kV,UV,VV,BV,HV]).pipe(T_((e=>{const{payload:{type:t,data:r}}=e;if(t===kV||t===BV){if(r===k.EncodeSuccess)return $a(Ps),Cr(nv("success"));if(r===k.DecodeSuccess)return $a(Ls),Cr(iv("success"));if(r===k.EncodeFailed)return $a(Hs),Cr(nv("failed"));if(r===k.DecodeFailed)return $a(js),Cr(iv("failed"))}else if(t===LV||t===VV){if(r===k.EncodeSuccess)return $a(ks),Cr(sv("success"));if(r===k.DecodeSuccess)return $a(Us),Cr(av("success"));if(r===k.EncodeFailed)return $a(Fs),Cr(sv("failed"));if(r===k.DecodeFailed)return $a(Ws),Cr(av("failed"))}else if(t===UV||t===HV){if(r===k.EncodeSuccess)return $a(Vs),Cr(uv("success"));if(r===k.DecodeSuccess)return $a(Bs),Cr(dv("success"));if(r===k.EncodeFailed)return $a(xs),Cr(uv("failed"));if(r===k.DecodeFailed)return $a($s),Cr(dv("failed"));if(t===UV&&void 0===r)return $a(Bs),Cr(dv("success"))}}))),epics4:(e,t)=>bv(e,[LV,kV]).pipe(Ao((()=>"object"==typeof navigator.mediaDevices?no(Ld(),no(bv(e,L.StartVideoCaptureSuccess),bv(e,L.DeviceChangeEvent),bv(e,L.UserGrantCaptureAudio).pipe(uo((()=>!t.value.audio.isUserGrantCaptureAudio))),bv(e,L.JoinComputerAudioComplete).pipe(uo((e=>{var t;return!(null===(t=e.payload.data)||void 0===t||!t.isPassive)}))),Ka(qs).pipe(uo((e=>"granted"===e.state)))).pipe($r((()=>Ld().pipe(To((()=>{setTimeout((()=>{$a(Gs)}),50)}))))))).pipe(Ro(t),$r((([e,t])=>{const r=[G_(e.microphones),z_(e.speakers),Qc(e.cameras)];if(t.audio){const{audio:{activeMicrophone:i,activeSpeaker:s,microphoneDevicesList:a,speakerDevicesList:u,isUsingMediaPlayback:d},video:{cameraDevicesList:c,activeCamera:l,isUsingMediaPlayback:p}}=t,h=Tu(t),{microphones:m,speakers:g,cameras:S}=e,v=a.filter((e=>-1===m.findIndex((t=>t.deviceId===e.deviceId)))),f=u.filter((e=>-1===g.findIndex((t=>t.deviceId===e.deviceId)))),y=c.filter((e=>-1===S.findIndex((t=>t.deviceId===e.deviceId))));if(v.length>0){if(v.some((e=>Gd(e,i,a)))){const e=zd(m);d||YV.changeMicrophone("default",null==e?void 0:e.label,!(null==h||!h.muted)),r.push(q_("default"))}}else if("default"===i){const e=zd(a),t=zd(m);!d&&a.length>0&&(null==e?void 0:e.label)!==(null==t?void 0:t.label)&&YV.changeMicrophone("default",null==t?void 0:t.label,!(null==h||!h.muted))}var o,n;f.length>0?f.some((e=>Gd(e,s,u)))&&(YV.changeSpeaker("default"),r.push(K_("default"))):"default"===s&&u.length>0&&(null===(o=zd(u))||void 0===o?void 0:o.label)!==(null===(n=zd(g))||void 0===n?void 0:n.label)&&YV.changeSpeaker("default"),y.length>0&&y.some((e=>Gd(e,l,c)))&&(p||YV.stopCaptureVideo(),r.push(Yc(C.isAndroidOrIOSBrowser?te.User:"default")))}return br(r)}))):or))),epics5:(e,t)=>Av(e,Rv).pipe(To((e=>{const{type:r,payload:{body:o}}=e,n=r===`${KS}`;if(o.add){const e=o.add.map((e=>({userid:e.id,sn:e.zoomID&&md(e.zoomID)})));if(!n){const{meeting:{gcmSessinKey:r}}=t.value;YV.sendUserNodeList(e,r)}YV.updateUserMediaSN({added:e,isFromMainSession:n,iVType:cb.SHARING_DECODE}),n&&YV.updateUserMediaSN({added:e,isFromMainSession:n,iVType:cb.AUDIO_DECODE})}if(o.remove&&o.remove.length>0){if(!n){const{meeting:{gcmSessinKey:e}}=t.value;YV.sendUserNodeList(o.remove.map((e=>({userid:e.id,bremove:!0}))),e)}YV.updateUserMediaSN({removed:o.remove.map((e=>e.id)),isFromMainSession:n,iVType:cb.SHARING_DECODE}),n&&YV.updateUserMediaSN({removed:o.remove.map((e=>e.id)),isFromMainSession:n,iVType:cb.AUDIO_DECODE})}})),yo(or)),epics6:e=>bv(e,L.AesGcmIvResponse).pipe(To((e=>{const{payload:{data:{workerType:t,iv:r}}}=e,o=Ay.get(by.WebclientIVState);if(o){const e={...o,[t]:r};Ay.set(by.WebclientIVState,e,_y.SessionStorage)}})),yo(or)),epics7:e=>e.pipe(BS(`${xS}`),uo((e=>[Dv,wv,Tv].includes(e.payload.evt))),Ur((e=>{const{payload:{evt:t,body:{encryptKey:r,additionalType:o}}}=e;return lv({type:t===Dv?"audio":t===wv?"video":"sharing",encryptKey:r,additionalType:o})}))),epics8:e=>e.pipe(BS(`${cv}`),To((e=>{const{payload:t}=e;Fm.setMediaOption({assetsPath:t.assetsPath,enforceMultipleVideos:t.enforceMultipleVideos,enforceVirtualBackground:t.enforceVirtualBackground,alternativeNameForVideoPlayer:t.alternativeNameForVideoPlayer})})),yo(or)),epics9:e=>e.pipe(BS(`${wg}`,`${Dg}`),To((()=>{qe.getInstance().inProgress&&(qe.getInstance().disconnect(),qd.watch(qe.getInstance().destroy()))})),yo(or)),epics10:e=>e.pipe(BS(`${wg}`,`${Dg}`),Ao((()=>"permissions"in navigator?["microphone","camera"].map((e=>{navigator.permissions.query({name:e}).then((t=>{const r=()=>{$a(qs,{name:e,state:t.state})};r(),t.addEventListener("change",r),eB.push((()=>{t.removeEventListener("change",r)}))})).catch((()=>{}))})):or)),yo(or)),epics11:e=>e.pipe(BS(`${nS}`),uo((e=>e.payload===Ho.Closed)),To((()=>{eB.length>0&&(eB.forEach((e=>e())),eB.length=0)})),yo(or)),epics12:(e,t)=>bv(e,[jV,VV,BV,HV,FV,WV,xV,$V,GV,zV,qV,KV,JV,QV]).pipe($r((r=>{const{payload:{type:o,data:n}}=r;let i,s;if(o===FV||o===JV)i={message:"Audio connection failed. Please refresh your browser to reconnect.",type:"audio",code:Me.AudioConnectionFailed};else if(o===WV)i={message:"Connection to remote video has failed. Please refresh your browser to try again.",type:"video",code:Me.VideoConnectionFailed};else if(o===xV)n===Ne.Exception?i={message:"Can't access your microphone. Please refresh your browser to try again.",type:"audio",code:Me.AudioStreamEnded}:n===Ne.PermissionReset&&(i={message:"Your browser is preventing access to your microphone.Please grant the permission.",type:"audio",code:Me.MicrophonePermissionReset});else if(o===$V)n===Ne.Exception?i={message:"Can't access your camera. Please refresh your browser to try again.",type:"video",code:Me.VideoStreamEnded}:n===Ne.PermissionReset&&(i={message:"Your browser is preventing access to your camera.Please grant the permission.",type:"video",code:Me.CameraPermissionReset});else if(o===GV)i={message:"Oops! Something went wrong. Please close all browsers and rejoin the meeting.",type:"video",code:Me.WebGlContextInvalid};else if(o===zV)i={message:"Uh-oh! Youre running low on memory. Please close all browsers and rejoin the meeting.",type:"video",code:Me.WasmOutOfMemory};else if(o===jV){let[e,t]=["",0];-129===n?(e="sharing",t=Me.SharingStreamFailed):[-130,-135].includes(n)?(e="video",t=Me.VideoStreamFailed):[-131,-136].includes(n)&&(e="audio",t=Me.AudioStreamFailed),i={message:"Oops! Something went wrong. Please close all browsers and rejoin the meeting.",type:e,code:t}}else if(o===qV){const r="audio";let[o,a]=[0,""];n?(o=Me.MicrophoneMuted,a="Your mic is muted in system or browser settings. Please open your settings to unmute and adjust the level."):(o=Me.AudioStreamMuted,a="Audio was interrupted by the system. Please click anywhere to resume playback.",s=Qd().pipe(bo(bv(e,L.AudioStreamUnmuted).pipe(mo(1))),To((()=>{Yd(YV,t.value)})))),i={message:a,type:r,code:o}}else if(o===KV)!1===n&&(i={message:"Audio playback was interrupted. Please click anywhere to resume playback.",type:"audio",code:Me.AudioPlaybackInterrupted});else if(o===QV&&t.value.video.isCurrentUserStartedVideo){const r="video",o=Me.VideoStreamMuted,n="Video was interrupted by the system. Please click anywhere to resume.";s=Qd().pipe(bo(bv(e,L.VideoStreamUnmuted).pipe(mo(1))),To((()=>{!function(e,t){const{video:{isCurrentUserStartedVideo:r,activeCamera:o,isUsingMediaPlayback:n,customizedVideoOption:i}}=t;if(r&&!n){const{captureWidth:t,captureHeight:r}=gm(i);e.changeCamera(o,re.includes(o),{width:t,height:r},!0)}}(YV,t.value)}))),i={message:n,type:r,code:o}}var a;return i&&(ZV.report(`active media failed. reason:${o}; message:${i.message}`,`${null===(a=i.type)||void 0===a?void 0:a.replace(/^./,(e=>e.toUpperCase()))} exception flow`),$a(Ks,i)),null!=s?s:br([])})),$r((()=>or))),epics13:e=>Ev(e,4366).pipe(To((e=>{const{payload:t}=e;YV.bypassMediaMessage(t)})),$r((()=>or))),epics14:(e,t)=>bv(e,L.NotifyUIFailover).pipe(uo((()=>!t.value.meeting.isMeetingReset&&t.value.meeting.meetingStatus===Ho.Joined)),Ur((e=>{const{payload:{data:t}}=e;$a($o,{reason:ko.Failover});let r=Fo.NotifyUiFailover;return void 0!==(null==t?void 0:t.audio)&&(C.isAndroidOrIOSBrowser||C.isHarmonyOS||t.audio!==Pe.FallbackToWasm||Ay.set(by.VideoSDKWebRTCAudioFallbackWasm,1,_y.SessionStorage)),void 0!==(null==t?void 0:t.video)&&(r=Fo.NotifyUIWMSCFailover,t.video===Pe.FallbackToWasm&&Ay.set(by.VideoSDKWebRTCVideoFallbackWasm,1,_y.SessionStorage)),Mg(r)})))},rB=yv(tB),oB={processorCreatedList:[],processorInstanceList:[]},nB={meeting:nV,socket:OV,participants:uy,media:PV,processor:zc({[`${hT}`]:sy(((e,{payload:t})=>{e.processorCreatedList.push(t)})),[`${mT}`]:sy(((e,{payload:t})=>{e.processorInstanceList.push(t)})),[`${gT}`]:sy(((e,{payload:t})=>{const r=e.processorInstanceList.findIndex((e=>e.name===t.name&&e.type===t.type));r>=0&&e.processorInstanceList.splice(r,1)})),[`${ST}`]:()=>({...oB})},oB)},iB=FU;function sB(e){return function(e){for(var t=Object.keys(e),r={},o=0;o<t.length;o++){var n=t[o];"function"==typeof e[n]&&(r[n]=e[n])}var i,s=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:HU.INIT}))throw new Error(UU(12));if(void 0===r(void 0,{type:HU.PROBE_UNKNOWN_ACTION()}))throw new Error(UU(13))}))}(r)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var o=!1,n={},a=0;a<s.length;a++){var u=s[a],d=r[u],c=e[u],l=d(c,t);if(void 0===l)throw t&&t.type,new Error(UU(14));n[u]=l,o=o||l!==c}return(o=o||s.length!==Object.keys(e).length)?n:e}}({...nB,...e})}let aB=!1,uB=!1;function dB(){return aB&&uB}function cB(e,t){i(`${e}/dist/js/whiteboard-sdk.js`,(()=>{aB=!0,t(aB,uB)}),(()=>{aB=!1,t(aB,uB)})),function(e,t,r){const o=document.createElement("link");o.readyState?o.onreadystatechange=()=>{"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,t())}:(o.onload=()=>{t()},o.onerror=()=>{r()}),o.href=e,o.type="text/css",o.rel="stylesheet",o.media="screen,print",window.crossOriginIsolated&&(o.crossOrigin="anonymous"),"function"==typeof document.body.append?document.getElementsByTagName("head")[0].append(o):document.getElementsByTagName("head")[0].appendChild(o)}(`${e}/dist/css/whiteboard-sdk.css`,(()=>{uB=!0,t(aB,uB)}),(()=>{uB=!1,t(aB,uB)}))}ju.getInstance();const lB=E_.createAgent();var pB;const hB=E_.createAgent(),mB=ju.getInstance(),gB=kE("Whiteboard");pB=class extends I_{updateToken(e){return(0,this[r])(Pb(e)),Promise.resolve()}startDashboard(e="ZOOM_WHITEBOARD_DASHBOARD"){const o=this[t](),n=this[r],{whiteboard:{isShowWhiteboardWindow:i,dashboardStatus:s,whiteboardToken:a,dashboardId:u},meeting:{zlkJwtToken:d,lang:c}}=o;if(d)return iC(wa.WHITEBOARD_VIDEOSDK_NOT_SUPPORT_DASHBOARD);if(s===OS.LOADING)return Promise.resolve("Dashboard already loading");const l=function(e,t){const r=document.getElementById(t);return!!r&&(r.src=e,r.sandbox="allow-scripts allow-same-origin allow-forms",!0)}(`https://${y()}/wb/embed/dashboard?clientType=meetingSdk&deviceType=desktop&_zm_lang=${c}`,e);return l?i?Promise.resolve("Dashboard already open"):(n(Tb(!0)),$a(Ma,OS.LOADING),n(Ob(OS.LOADING)),oC({messageName:"REFRESH_DATA"},e),(e=>{const{meeting:{isWebinar:t,meetingTopic:r,meetingOptions:o},whiteboard:{dashboardId:n}}=e,i={messageName:"RESPONSE_BASIC_INFO",supportNewFromClient:!0,meetingName:r,isDisableNewWhiteboard:!Ib(e),isWebinar:t,isDisableSaveCloudWhiteboard:!o.isWebclientInMeetingWBEnabledSave2Cloud,zmCalBindDocs:_b.isEmpty(o.meetingDocIds)?[]:[o.meetingDocIds]};oC(i,n)})(this[t]()),e&&e!==u&&n(Db(e)),Promise.resolve()):iC(wa.WHITEBOARD_DASHBOARD_IFRAME_NOT_FOUND)}stopDashboard(){const e=this[t](),o=this[r],{whiteboard:{isShowWhiteboardWindow:n}}=e;return n?(o(Tb(!1)),o(Ob(OS.CLOSE)),Promise.resolve()):Promise.resolve("you had closed wb dashboard, do nothing")}isNeedInit(e,t){return e===RS.DEFAULT||e===RS.READY||t===wa.WHITEBOARD_LOAD_WHITEBOARD_JS_CSS_ERROR}initWhiteboard(){const e=this[t](),o=this[r],{whiteboard:{whiteboardStatus:n,whiteboardToken:i,whiteboardCdnPath:s,whiteboardError:{errorCode:a}},meeting:{zmk:u}}=e;return i||o(Lb()),!this.isNeedInit(n,a)||n!==RS.DEFAULT&&n!==RS.READY&&a!==wa.WHITEBOARD_LOAD_WHITEBOARD_JS_CSS_ERROR?Promise.resolve("You had init whiteboard"):(cB(s,((e,r)=>{var n;e&&r?(u||nC(o,wa.WHITEBOARD_GET_INIT_TOKEN_FAIL),((e,t)=>{const r=`https://${y()}`;window.addEventListener("message",(e=>{if(e.origin===r&&e&&e.data&&e.data.type===DS){const n=e.data.data;if(n.messageName)switch(n.messageName){case"REQUEST_TOKEN":{const{whiteboard:{whiteboardToken:n}}=t();var o;return void(n&&(null==e||null===(o=e.source)||void 0===o||o.postMessage({type:DS,data:{messageName:"RESPONSE_TOKEN",whiteboardToken:n}},{targetOrigin:r})))}case"REFRESH_TOKEN":return void $a(La,{type:"refresh"});case"REQUEST_BASIC_INFO":return void $a(La,{type:"basic"});case"OPEN_WHITEBOARD":return void $a(La,{type:"open",wbInfo:n.wbInfo});case"NEW_WHITEBOARD":return void $a(La,{type:"new",wbInfo:n.wbInfo});default:return}}}))})(0,this[t]),o(Rb(RS.INIT)),$a(Na,{type:RS.INIT}),void 0===(null===(n=window)||void 0===n?void 0:n.whiteboardSDKCdnPath)&&(window.whiteboardSDKCdnPath=s)):e||r||(o(Rb(RS.ERROR)),o(zb(sC(wa.WHITEBOARD_LOAD_WHITEBOARD_JS_CSS_ERROR))))})),qa(Na,(e=>{const{type:t}=e;return t===RS.INIT}),1e4))}startWhiteboard(e,o){var n,i,s;let a=o;const u=this[t](),d=this[r],{meeting:{userId:c,zlkJwtToken:l},whiteboard:{whiteboardStatus:p,whiteboardToken:h,whiteboardError:{errorCode:m}},share:{status:g,isRemoteSharingActive:S},breakoutRoom:v}=u;this.isNeedInit(p,m)&&this.initWhiteboard();const f=p===RS.OPENED;if(!e)return iC(wa.WHITEBOARD_ELEMENT_NOT_FOUND);if(f)return iC(wa.WHITEBOARD_ALREADY_OPEN);if(g===z.Sharing||g===z.Paused)return iC(wa.WHITEBOARD_REQUIRE_SHARING_STOP);if(S)return iC(wa.WHITEBOARD_AND_SHARING_CONFLICT);let y=!1;const E=null==v?void 0:v.currentRoom;if(E&&null!=E&&E.status&&(null==E?void 0:E.status)===gu.InRoom&&(y=!0),y&&l)return iC(wa.WHITEBOARD_INSUFFICIENT_PRIVILEGES);let _=(null===(n=a)||void 0===n?void 0:n.haveAccessAfterMeeting)||!1;if(l&&(_=!1),!h)return d(Lb()),nC(d,wa.WHITEBOARD_GET_INIT_TOKEN_FAIL);if(p===RS.ERROR&&dB())d(Rb(RS.READY)),d(sC(wa.WHITEBOARD_NOT_INIT_SUCCESS));else if(p===RS.ERROR&&!dB())return $a(Na,{type:RS.ERROR,payload:{errorCode:wa.WHITEBOARD_NOT_INIT,errorMessage:wS[wa.WHITEBOARD_NOT_INIT]}}),iC(wa.WHITEBOARD_NOT_INIT);var I;if(d(qb(e)),null!==(i=a)&&void 0!==i&&i.isDisableExport&&d(Kb(null===(I=a)||void 0===I?void 0:I.isDisableExport)),null!==(s=a)&&void 0!==s&&s.docId)((e,t,r)=>{const{whiteboard:{whiteboardStatus:o,whiteboardConfig:n,whiteboardSharer:i,whiteboardToken:s,whiteboardElement:a,whiteboardOpenType:u},meeting:{zlkJwtToken:d},breakoutRoom:c}=e,{haveAccessAfterMeeting:l,sharingrole:p,docId:h}=r;if(!h&&n.docId&&i.dcsID)return;let m=!1;const g=null==c?void 0:c.currentRoom;g&&null!=g&&g.status&&(null==g?void 0:g.status)===gu.InRoom&&(m=!0),d||"dashboard"!==u?t(Zb({presenterID:i.presenterID,dcsID:i.dcsID,element:a})):lB.openWhiteboard({haveAccessAfterMeeting:l,sharingrole:p,docId:h,isInRoom:m,boToken:null==g?void 0:g.boToken,whiteboardToken:s})})(this[t](),d,a);else{var A,b,C,T,R,O,D,w,N,M,P,L;d(Gb(_));const e={templateId:null!==(A=a)&&void 0!==A&&A.templateId?null===(b=a)||void 0===b?void 0:b.templateId:"",docName:null!==(C=a)&&void 0!==C&&C.docName?null===(T=a)||void 0===T?void 0:T.docName:"My temp whiteboard",docType:null!==(R=a)&&void 0!==R&&R.docType?null===(O=a)||void 0===O?void 0:O.docType:"",accountId:null!==(D=a)&&void 0!==D&&D.accountId?null===(w=a)||void 0===w?void 0:w.accountId:"",templateType:null!==(N=a)&&void 0!==N&&N.templateType?null===(M=a)||void 0===M?void 0:M.templateType:0,sharingrole:null!==(P=a)&&void 0!==P&&P.sharingrole?null===(L=a)||void 0===L?void 0:L.sharingrole:CS.EDITOR,haveAccessAfterMeeting:_,whiteboardToken:h};((e,t,r)=>{const{whiteboard:{whiteboardStatus:o}}=e;o===RS.DEFAULT||o===RS.ERROR?sC(wa.WHITEBOARD_NOT_INIT_SUCCESS):(lB.newWhiteboard(r),t(Rb(RS.LOADING)),$a(Na,{type:RS.LOADING}),Promise.resolve())})(this[t](),d,e)}return qa("WHITEBOARD_INDICATION_MESSAGE_EVENTS",(e=>{const{presenterID:t,dcsID:r}=e;return!(!t||t!==c||!r)}),3e4)}stopWhiteboard(e){const r=this[t](),{meeting:{userId:o},whiteboard:{whiteboardStatus:n,whiteboardSharer:{presenterID:i},whiteboardConfig:{docId:s}},share:{ssrc:a}}=r;if(n!==RS.OPENED)return Promise.resolve("You not open WB.");if(!e&&!s)return iC(wa.WHITEBOARD_DOC_ID_NOT_AVAILABLE);if(!this.canStopWhiteboard())return iC(wa.WHITEBOARD_INSUFFICIENT_PRIVILEGES);if(i&&s){hB.closeWhiteboard(s),mB.stopShareWhiteboard(a);const e=db();return null==e||e.destroy(),(e=>{ub=e})(null),qa(Na,(e=>e.type===RS.CLOSE),4e3).then((()=>!0))}return iC(wa.WHITEBOARD_INVALID_STATE)}leaveWhiteboard(){const e=this[t](),o=this[r],{meeting:{isWebinar:n,userId:i,zoomId:s},whiteboard:{whiteboardStatus:a,whiteboardSharer:{presenterID:u,dcsID:d},whiteboardConfig:c},share:{ssrc:l},media:{sharingEncrypt:p}}=e;if(a!==RS.OPENED)return Promise.resolve("You not open WB.");if(u&&!n&&c.EncodedSn&&null!=p&&p.encryptKey&&d){if(u!==i){var h;o(Rb(RS.OPEN));const e=db(),t=null==e||null===(h=e.conn)||void 0===h?void 0:h.getLeaveMessage();return mB.notifyWBMessage({message:t,nodeId:l,sn:md(s),encryptKey:md(null==p?void 0:p.encryptKey),dcsId:d,EncodedSn:md(c.EncodedSn)}),null==e||e.destroy(),Promise.resolve()}return Promise.reject({type:Ze,reason:"You are the presenter, you cant leave whiteboard, please use closeWhiteboard",errorCode:wa.WHITEBOARD_PRESENTER_LEAVE})}return iC(wa.WHITEBOARD_INVALID_STATE)}getStatus(){const e=this[t](),{whiteboard:{whiteboardStatus:r,dashboardStatus:o,whiteboardSharer:n,whiteboardPermissionCode:i,whiteboardConfig:{docId:s},whiteboardCapability:a,whiteboardInitRole:u,isWhiteboardInitWithoutHost:d,haveAccessAfterMeeting:c,whiteboardError:l},meeting:{lang:p,zlkJwtToken:h,meetingOptions:m}}=e;return{wb:r,dashboard:o,enable:a,wbInfo:{docId:s,haveAccessAfterMeeting:c,sharingrole:CS.EDITOR,dcsID:null==n?void 0:n.dcsID,presenterID:null==n?void 0:n.presenterID},isWhiteboardShareOptionsLocked:null==m?void 0:m.isWhiteboardShareOptionsLocked,whiteboardInitRole:u,isWhiteboardInitWithoutHost:d,whiteboardPermissionCode:i,error:l}}encodePrivilegeToCode({whiteboardPermissionCode:e,isWhiteboardShareOptionsLocked:t,isWhiteboardInitWithoutHost:r,whiteboardInitRole:o}){const n=((e,t,r,o)=>{const n=o.isWhiteboardShareOptionsLocked,i=r?32:0;let s=0;t===TS.InternalUser?s=8:t===TS.AllParticipants&&(s=16);const a=n?4:0;let u=0;return e===bS.WbSettingHostGrab?u=1:e===bS.WbSettingAnyoneGrab&&(u=3),i|s|a|u})(e,o,r,{isWhiteboardShareOptionsLocked:t});return n}decodeToPrivilege(e){let t=e;const r=(24&t)>>3,o=(e=>!!((32&e)>>5))(t),n=!o;return t=(e=>3&e)(t),{whiteboardPermissionCode:t,isWhiteboardShareOptionsLocked:n,isWhiteboardInitWithoutHost:o,whiteboardInitRole:r}}setWhiteboardPermissionCode(e){const r=this[t](),{whiteboard:{whiteboardCapability:o}}=r;if(!o)return iC(wa.WHITEBOARD_NOT_AVAILABLE);try{return hB.changeWhiteboardPermission({wbLockShare:e}),qa(Pa,(e=>void 0!==e.privilege||void 0!==e.isLock),2e3).then((()=>!0)).catch((e=>(console.error("Failed to set whiteboard privilege",e),iC(wa.WHITEBOARD_INSUFFICIENT_PRIVILEGES))))}catch(e){return console.error("Failed to set whiteboard privilege",e),iC(wa.WHITEBOARD_INSUFFICIENT_PRIVILEGES)}}changeWhiteboardUserRole(e,r){const o=this[t](),{whiteboard:{whiteboardCapability:n}}=o;if(!n)return iC(wa.WHITEBOARD_NOT_AVAILABLE);try{const t=hB.changeWhiteboardShareRole(e,r);return qa(Pa,(e=>void 0!==e.privilege||void 0!==e.isLock),2e3).then((()=>t)).catch((e=>(console.error("User role change request timed out",e),iC(wa.WHITEBOARD_INSUFFICIENT_PRIVILEGES))))}catch(e){return console.error("Failed to change user whiteboard role",e),iC(wa.WHITEBOARD_INSUFFICIENT_PRIVILEGES)}}lockWhiteboard(e){const r=this[t](),{whiteboard:{isWhiteboardInitWithoutHost:o,whiteboardInitRole:n},meeting:{zlkJwtToken:i,meetingOptions:s}}=r;if(!i)return iC(wa.WHITEBOARD_LOCK_API_NOT_AVAILABLE);const a=this.encodePrivilegeToCode({whiteboardPermissionCode:e?bS.WbSettingLockShare:bS.WbSettingHostGrab,isWhiteboardShareOptionsLocked:null==s?void 0:s.isWhiteboardShareOptionsLocked,isWhiteboardInitWithoutHost:o,whiteboardInitRole:n});return this.setWhiteboardPermissionCode(a)}isOtherSharingWhiteboard(){const e=this[t]();return aC(e)}canStopWhiteboard(){const e=this[t](),{whiteboard:{whiteboardSharer:{presenterID:r}},meeting:{userId:o,isHost:n,isCoHost:i,meetingStatus:s}}=e;return Boolean(s===Ho.Joined&&(r===o||n||i))}canStartWhiteboard(){return(e=>{const{whiteboard:{whiteboardStatus:t,whiteboardInitRole:r,isWhiteboardShareOptionsLocked:o,whiteboardPermissionCode:n},meeting:{meetingStatus:i,isHost:s,isCoHost:a,zlkJwtToken:u},share:{status:d,isRemoteSharingActive:c},breakoutRoom:l}=e;if(i!==Ho.Joined)return!1;if(aC(e))return!1;if(t===RS.OPENED)return!1;if(d===z.Sharing||d===z.Paused)return!1;if(c)return!1;let p=!1;const h=null==l?void 0:l.currentRoom;if(h&&null!=h&&h.status&&(null==h?void 0:h.status)===gu.InRoom&&(p=!0),p&&u)return!1;let m=!1;if(n===bS.WbSettingLockShare)m=s||a;else{switch(r){case TS.HostOnly:m=s||a;break;case TS.InternalUser:case TS.AllParticipants:m=!0;break;default:m=s||a}!o||s||a||(m=!1)}return m})(this[t]())}exportWhiteboard(e,r,o){const n=this[t](),{whiteboard:{whiteboardStatus:i},meeting:{topic:s}}=n;if(i!==RS.OPENED)return iC(wa.WHITEBOARD_NOT_OPENED);if("png"!==e&&"pdf"!==e)return iC(wa.WHITEBOARD_INVALID_EXPORT_FORMAT);const a=db(),u=r?`${r}.${e}`:`${s}-whiteboard.${e}`;return(null==a?void 0:a.exporter.exportToWeb({name:u,format:e,includeComments:o||!1})).then((e=>(function(e,t){const r=function(e,t="image/png"){const r=atob(e),o=new ArrayBuffer(r.length),n=new Uint8Array(o);for(let e=0;e<r.length;e++)n[e]=r.charCodeAt(e);return new Blob([o],{type:t})}(e),o=URL.createObjectURL(r),n=document.createElement("a");n.href=o,n.download=t,n.click(),URL.revokeObjectURL(o)}(e,u),Promise.resolve())))}},AS(pB.prototype,"updateToken",[NS,gB],Object.getOwnPropertyDescriptor(pB.prototype,"updateToken"),pB.prototype),AS(pB.prototype,"startDashboard",[NS,gB,MS],Object.getOwnPropertyDescriptor(pB.prototype,"startDashboard"),pB.prototype),AS(pB.prototype,"stopDashboard",[NS,gB,MS],Object.getOwnPropertyDescriptor(pB.prototype,"stopDashboard"),pB.prototype),AS(pB.prototype,"initWhiteboard",[gB],Object.getOwnPropertyDescriptor(pB.prototype,"initWhiteboard"),pB.prototype),AS(pB.prototype,"startWhiteboard",[gB,MS,NS],Object.getOwnPropertyDescriptor(pB.prototype,"startWhiteboard"),pB.prototype),AS(pB.prototype,"stopWhiteboard",[NS,gB,MS],Object.getOwnPropertyDescriptor(pB.prototype,"stopWhiteboard"),pB.prototype),AS(pB.prototype,"leaveWhiteboard",[NS,gB,MS],Object.getOwnPropertyDescriptor(pB.prototype,"leaveWhiteboard"),pB.prototype),AS(pB.prototype,"setWhiteboardPermissionCode",[PS,NS,gB,MS],Object.getOwnPropertyDescriptor(pB.prototype,"setWhiteboardPermissionCode"),pB.prototype),AS(pB.prototype,"changeWhiteboardUserRole",[PS,NS,gB,MS],Object.getOwnPropertyDescriptor(pB.prototype,"changeWhiteboardUserRole"),pB.prototype),AS(pB.prototype,"lockWhiteboard",[PS,NS,gB,MS],Object.getOwnPropertyDescriptor(pB.prototype,"lockWhiteboard"),pB.prototype),AS(pB.prototype,"exportWhiteboard",[NS,gB,MS],Object.getOwnPropertyDescriptor(pB.prototype,"exportWhiteboard"),pB.prototype);class SB extends IS{static createClient(){if(!this.meetingClient){const e=function(){const e=function(e){void 0===e&&(e={});var t,r=new rr.constructor(rr.schedulerActionCtor),o=new Vt,n=function(n){t=n;var i=new Vt,s=new Vt,a=i.asObservable().pipe(_r(r)),u=new US(s.pipe(_r(r)),t.getState());return o.pipe(Ur((function(t){var r=t(a,u,e.dependencies);if(!r)throw new TypeError('Your root Epic "'+(t.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return r})),$r((function(e){return br(e).pipe(Ir(r),_r(r))}))).subscribe(t.dispatch),function(e){return function(r){var o=e(r);return s.next(t.getState()),i.next(r),o}}};return n.run=function(e){o.next(e)},n}(),{epicSubject:t,rootEpic:r}=function(){const e=new Ht(fv(uV,NV,cy,rB));return{epicSubject:e,rootEpic:(t,r,o)=>e.pipe(bo(t.pipe(BS(`${Vg}`))),$r((e=>e(t,r,o))))}}(),o=[e],n=jU(sB(),iB(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),o=function(){throw new Error(UU(15))},n={getState:r.getState,dispatch:function(){return o.apply(void 0,arguments)}},i=t.map((function(e){return e(n)}));return o=FU.apply(void 0,i)(r.dispatch),kU(kU({},r),{},{dispatch:o})}}}(...o)));return n.asyncReducers={},n.injectReducer=(e,t)=>{void 0===n.asyncReducers[e]&&(n.asyncReducers[e]=t,n.replaceReducer(sB(n.asyncReducers)))},n.injectEpic=e=>{t.next(e)},e.run(r),n}();this.meetingClient=new NU(e)}return this.meetingClient}}function vB(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function yB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fB(Object(r),!0).forEach((function(t){vB(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fB(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function EB(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;r[o]=e[o]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const _B="2.3.0",IB="INVALID_PARAMETERS",AB="https://dmogdx0jrul3u.cloudfront.net/videosdk/".concat(_B,"/lib"),bB="https://source.zoom.us/videosdk/".concat(_B,"/lib"),CB="https://jssdk.zoomus.cn/videosdk/".concat(_B,"/lib"),TB=e=>"string"==typeof e&&e.length>0,RB=e=>{let t="";switch(e){case"Global":t=bB;break;case"CN":t=CB;break;case"CDN":t=AB;break;default:t=e}return t},OB=["userId","avatar","displayName","isHost","audio","muted","bVideoOn","sharerOn","sharerPause","userIdentity","isSpeakerOnly","bVideoShare","bShareAudioOn","userGuid","isPhoneUser","isInFailover",{from:"isCoHost",to:"isManager"},{from:"bAllowISORecord",to:"isAllowIndividualRecording"},{from:"bVideoConnect",to:"isVideoConnect"},{from:"bShareToBORooms",to:"bShareToSubsession"},{from:"bid",to:"subsessionId"},{from:"phoneNumber",to:e=>void 0===e?{}:{phoneNumber:e}}],DB=[...OB,{from:"userGUID",to:"userGuid"},{from:"bCoHost",to:e=>({isManager:!!e})},{from:"userType",to:e=>({isPhoneUser:!(5&~e)})},{from:"bid",to:e=>e?{subsessionId:e}:{}},{from:"bInFailover",to:"isInFailover"}],wB=DB.map((e=>"string"==typeof e?e:e.from));function NB(e,t){return"string"==typeof e?{["".concat(e)]:t}:"string"==typeof e.to?{["".concat(e.to)]:t}:e.to(t)}function MB(e){if(e)return OB.reduce(((t,r)=>{const o="string"==typeof r?r:r.from,n=NB(r,e[o]);return yB(yB({},t),n)}),{})}function PB(e){if(e)return Object.keys(e).reduce(((t,r)=>{const o=wB.indexOf(r);if(o>-1){const r=DB[o],n="string"==typeof r?r:r.from,i=NB(r,e[n]);return yB(yB({},t),i)}return t}),{})}const LB=Symbol("stream");class kB{constructor(e){this[LB]=void 0,this[LB]=e}startAudio(e){return this[LB].startAudio(e)}stopAudio(){return this[LB].stopAudio()}muteAudio(e){return this[LB].muteAudio(e)}unmuteAudio(e){return this[LB].unmuteAudio(e)}inviteByPhone(e,t,r,o){return this[LB].dialOut(e,t,r,o)}cancelInviteByPhone(e,t,r){return this[LB].cancelDialOut(e,t,r)}hangup(){return this[LB].hangup()}getCurrentSessionCallinInfo(){return this[LB].getDialInInfo()}muteShareAudio(e){return this[LB].muteShareAudio(e)}unmuteShareAudio(e){return this[LB].unmuteShareAudio(e)}subscribeAudioStatisticData(e){return this[LB].subscribeAudioStatisticData(e)}unsubscribeAudioStatisticData(e){return this[LB].unsubscribeAudioStatisticData(e)}muteUserAudioLocally(e){return this[LB].muteUserAudioLocally(e)}unmuteUserAudioLocally(e){return this[LB].unmuteUserAudioLocally(e)}adjustUserAudioVolumeLocally(e,t){return this[LB].adjustUserAudioVolumeLocally(e,t)}enableBackgroundNoiseSuppression(e){return this[LB].enableBackgroundNoiseSuppression(e)}enableSyncButtonsOnHeadset(e){return this[LB].enableSyncButtonsOnHeadset(e)}muteAllUserAudioLocally(){return this[LB].muteAllUserAudioLocally()}unmuteAllUserAudioLocally(){return this[LB].unmuteAllUserAudioLocally()}enableOriginalSound(e){return this[LB].enableOriginalSound(e)}callCRCDevice(e,t){return this[LB].callCRCDevice(e,t)}cancelCallCRCDevice(e,t){return this[LB].cancelCallCRCDevice(e,t)}startSecondaryAudio(e,t){return this[LB].startSecondaryAudio(e,t)}stopSecondaryAudio(){return this[LB].stopSecondaryAudio()}muteAllAudio(){return this[LB].muteAllAudio()}unmuteAllAudio(){return this[LB].unmuteAllAudio()}muteAudioUponStartAudio(e){return this[LB].muteAudioUponEntry(e)}allowAudioUnmutedBySelf(e){return this[LB].allowUnmuteAudioThemselves(e)}isAudioMuted(e){return this[LB].isAudioMuted(e)}getMicList(){return this[LB].getMicList()}getSpeakerList(){return this[LB].getSpeakerList()}getActiveMicrophone(){return this[LB].getActiveMicrophone()}getActiveSpeaker(){return this[LB].getActiveSpeaker()}switchMicrophone(e){return this[LB].switchMicrophone(e)}switchSpeaker(e){return this[LB].switchSpeaker(e)}isSupportPhoneFeature(){return this[LB].isSupportCallOut()}getSupportCountryInfo(){return this[LB].getDialOutCountries()}getInviteByPhoneStatus(){return this[LB].getDialOutStatus()}getShareAudioStatus(){return this[LB].getShareAudioStatus()}isOthersShareAudioMutedLocally(e){return this[LB].isOthersShareAudioMutedLocally(e)}getAudioStatisticData(){return this[LB].getAudioStatisticData()}isUserAudioMutedLocally(e){return this[LB].isUserAudioMutedLocally(e)}getUserVolumeLocally(e){return this[LB].getUserVolumeLocally(e)}isSupportMicrophoneAndShareAudioSimultaneously(){return this[LB].isSupportMicrophoneAndShareAudioSimultaneously()}getAudioMediaPlaybackController(){return this[LB].getAudioMediaPlaybackController()}isAllowAudioUnmutedBySelf(){return this[LB].isAllowToUnmute()}getSessionSIPAddress(){return this[LB].getSessionSIPAddress()}startVideo(e){return this[LB].startVideo(e)}stopVideo(){return this[LB].stopVideo()}createProcessor(e){return this[LB].createProcessor(e)}addProcessor(e){return this[LB].addProcessor(e)}removeProcessor(e){return this[LB].removeProcessor(e)}renderVideo(e,t,r,o,n,i,s,a){return this[LB].renderVideo(e,t,r,o,n,i,s,a)}stopRenderVideo(e,t,r,o){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0;return this[LB].stopRenderVideo(e,t,r,o,n,i)}updateVideoCanvasDimension(e,t,r){return this[LB].updateVideoCanvasDimension(e,t,r)}adjustRenderedVideoPosition(e,t,r,o,n,i,s){return this[LB].adjustRenderedVideoPosition(e,t,r,o,n,i,s)}clearVideoCanvas(e,t){return this[LB].clearVideoCanvas(e,t)}mirrorVideo(e){return this[LB].mirrorVideo(e)}enableHardwareAcceleration(e){return this[LB].enableHardwareAcceleration(e)}previewVirtualBackground(e,t,r,o){return this[LB].previewVirtualBackground(e,t,r,o)}updateVirtualBackgroundImage(e,t){return this[LB].updateVirtualBackgroundImage(e,t)}stopPreviewVirtualBackground(){return this[LB].stopPreviewVirtualBackground()}previewVideoMask(e,t){return this[LB].previewVideoMask(e,t)}updateVideoMask(e){return this[LB].updateVideoMask(e)}stopPreviewVideoMask(){return this[LB].stopPreviewVideoMask()}switchCamera(e){return this[LB].switchCamera(e)}subscribeVideoStatisticData(e){return this[LB].subscribeVideoStatisticData(e)}unsubscribeVideoStatisticData(e){return this[LB].unsubscribeVideoStatisticData(e)}attachVideo(e,t,r){return this[LB].attachVideo(e,t,r)}detachVideo(e,t){return this[LB].detachVideo(e,t)}spotlightVideo(e,t){return this[LB].spotlight(e,null!=t&&t)}removeSpotlightedVideo(e){return this[LB].removeSpotlight(e)}removeAllSpotlightedVideos(){return this[LB].removeAllSpotlights()}screenshotVideo(e){return this[LB].screenshotVideo(e)}subscribeSystemResourceUsage(){return this[LB].subscribeSystemResourceUsage()}unsubscribeSystemResourceUsage(){return this[LB].unsubscribeSystemResourceUsage()}subscribeWebRTCStatsReportData(){return this[LB].subscribeWebRTCStatsReportData()}unsubscribeWebRTCStatsReportData(){return this[LB].unsubscribeWebRTCStatsReportData()}isCapturingVideo(){return this[LB].isCapturingVideo()}isCameraTaken(){return this[LB].isCameraTaken()}getActiveVideoId(){return this[LB].getActiveVideoId()}getActiveCamera(){return this[LB].getActiveCamera()}getCameraList(){return this[LB].getCameraList()}isCaptureForbidden(){return this[LB].isCaptureForbidden()}getVideoMaxQuality(){return this[LB].getVideoMaxQuality()}getReceivedVideoDimension(){return this[LB].getReceivedVideoDimension()}isSupportMultipleVideos(){return this[LB].isSupportMultipleVideos()}getMaxRenderableVideos(){return this[LB].getMaxRenderableVideos()}isSupportHDVideo(){return this[LB].isSupportHDVideo()}isSupportVirtualBackground(){return this[LB].isSupportVirtualBackground()}isSupportVideoProcessor(){return this[LB].isSupportVideoProcessor()}isSupportAudioProcessor(){return this[LB].isSupportAudioProcessor()}isSupportShareProcessor(){return this[LB].isSupportShareProcessor()}getVirtualbackgroundStatus(){return this[LB].getVirtualbackgroundStatus()}getVideoStatisticData(){return this[LB].getVideoStatisticData()}isRenderSelfViewWithVideoElement(){return this[LB].isRenderSelfViewWithVideoElement()}getCapturedVideoResolution(){return this[LB].getCapturedVideoResolution()}getVideoMaskStatus(){return this[LB].getVideoMaskStatus()}isVideoMirrored(){return this[LB].isVideoMirrored()}getSpotlightedUserList(){return this[LB].getSpotlightedUserList().map((e=>MB(e)))}getVideoMediaPlaybackController(){return this[LB].getVideoMediaPlaybackController()}getWebRTCStatsReportData(){return this[LB].getWebRTCStatsReportData()}startShareView(e,t){return this[LB].startShareView(e,t)}stopShareView(){return this[LB].stopShareView()}attachShareView(e,t){return this[LB].attachShareView(e,t)}detachShareView(e,t){return this[LB].detachShareView(e,t)}switchShareView(e){return this[LB].switchShareView(e)}startShareScreen(e,t){return void 0!==(null==t?void 0:t.broadcastToSubsession)&&Object.assign(t||{},{broadcastToBreakoutRoom:null==t?void 0:t.broadcastToSubsession}),this[LB].startShareScreen(e,t)}startShareCamera(e,t,r){return this[LB].startShareCamera(e,t,r)}pauseShareScreen(){return this[LB].pauseShareScreen()}resumeShareScreen(){return this[LB].resumeShareScreen()}stopShareScreen(){return this[LB].stopShareScreen()}lockShare(e){return this[LB].lockShare(e)}updateSharingCanvasDimension(e,t){return this[LB].updateSharingCanvasDimension(e,t)}switchSharingSecondaryCamera(e){return this[LB].switchSharingSecondaryCamera(e)}setSharePrivilege(e){return this[LB].setSharePrivilege(e)}shareToSubsession(){return this[LB].shareToBreakoutRoom()}stopShareToSubsession(){return this[LB].stopShareToBreakoutRoom()}enableOptimizeForSharedVideo(e){return this[LB].enableOptimizeForSharedVideo(e)}updateSharedVideoQuality(e){return this[LB].updateSharedVideoQuality(e)}subscribeShareStatisticData(e){return this[LB].subscribeShareStatisticData(e)}unsubscribeShareStatisticData(e){return this[LB].unsubscribeShareStatisticData(e)}screenshotShareView(e){return this[LB].screenshotSharedContent(e)}isShareLocked(){return this[LB].isShareLocked()}getSharePrivilege(){return this[LB].getSharePrivilege()}getActiveShareUserId(){return this[LB].getActiveShareUserId()}getShareStatus(){return this[LB].getShareStatus()}getShareUserList(){return this[LB].getShareUserList().map((e=>MB(e)))}isStartShareScreenWithVideoElement(){return this[LB].isStartShareScreenWithVideoElement()}isOptimizeForSharedVideoEnabled(){return this[LB].isOptimizeForSharedVideoEnabled()}isSupportOptimizedForSharedVideo(){return this[LB].isSupportOptimizedForSharedVideo()}getShareStatisticData(){return this[LB].getShareStatisticData()}getShareStreamSettings(){return this[LB].getShareStreamSettings()}getMaxRenderableShareViews(){return this[LB].getMaxRenderableShareViews()}requestFarEndCameraControl(e){return this[LB].requestFarEndCameraControl(e)}approveFarEndCameraControl(e){return this[LB].approveFarEndCameraControl(e)}declineFarEndCameraControl(e){return this[LB].declineFarEndCameraControl(e)}giveUpFarEndCameraControl(e){return this[LB].giveUpFarEndCameraControl(e)}controlCamera(e){return this[LB].controlCamera(e)}controlFarEndCamera(e){return this[LB].controlFarEndCamera(e)}getFarEndCameraPTZCapability(e){return this[LB].getFarEndCameraPTZCapability(e)}getCameraPTZCapability(e){return this[LB].getCameraPTZCapability(e)}isBrowserSupportPTZ(){return this[LB].isBrowserSupportPTZ()}getNetworkQuality(e){return this[LB].getNetworkQuality(e)}requestRemoteControl(){return this[LB].requestRemoteControl()}giveUpRemoteControl(){return this[LB].giveUpRemoteControl()}startRemoteControl(e){return this[LB].startRemoteControl(e)}grabRemoteControl(){return this[LB].grabRemoteControl()}approveRemoteControl(e,t){return this[LB].approveRemoteControl(e,t)}declineRemoteControl(e){return this[LB].declineRemoteControl(e)}stopRemoteControl(){return this[LB].stopRemoteControl()}launchRemoteControlApp(e){return this[LB].launchRemoteControlApp(e)}isRemotelyControlApproved(){return this[LB].isRemotelyControlApproved()}isControllingUserRemotely(){return this[LB].isControllingUserRemotely()}isTargetShareSupportRemoteControl(e){return this[LB].isTargetShareSupportRemoteControl(e)}getRemoteControlAppDownloadUrl(){return this[LB].getRemoteControlAppDownloadUrl()}getRemotelyControllingUser(){return this[LB].getRemotelyControllingUser()}isRemoteControlEnabled(){return this[LB].isRemoteControlEnabled()}startAnnotation(){return this[LB].startAnnotation()}stopAnnotation(){return this[LB].stopAnnotation()}changeAnnotationPrivilege(e){return this[LB].changeAnnotationPrivilege(e)}showAnnotatorName(e){return this[LB].showAnnotatorName(e)}canDoAnnotation(){return this[LB].canDoAnnotation()}getAnnotationController(){return this[LB].getAnnotationController()}requestShareCamera(e,t,r){return this[LB].requestShareCamera(e,t,r)}approveShareCamera(e,t){return this[LB].approveShareCamera(e,t)}declineShareCamera(e,t){return this[LB].declineShareCamera(e,t)}informShareCameraStatus(e,t,r){return this[LB].informShareCameraStatus(e,t,r)}}const UB=["isCoHost"],VB=Symbol("chat");class BB{constructor(e){this[VB]=void 0,this[VB]=e}send(e,t){return this[VB].send(e,t)}sendToAll(e){return this[VB].send(e,r_.All)}sendFile(e,t){return this[VB].sendFile(e,t)}downloadFile(e,t,r){return this[VB].downloadFile(e,t,r)}setPrivilege(e){return this[VB].setPrivilege(e)}getPrivilege(){return this[VB].getPrivilege()}getReceivers(){return this[VB].getReceivers().map((e=>{const{isCoHost:t}=e;return yB({isManager:t},EB(e,UB))}))}getHistory(){return this[VB].getHistory()}isFileTransferEnabled(){return this[VB].isFileTransferEnabled()}getFileTransferSetting(){return this[VB].getFileTransferSetting()}}const HB=Symbol("recording");class jB{constructor(e){this[HB]=void 0,this[HB]=e}canStartRecording(){return this[HB].isRecordingEnabled()}startCloudRecording(){return this[HB].startRecording()}pauseCloudRecording(){return this[HB].pauseRecording()}resumeCloudRecording(){return this[HB].startRecording()}stopCloudRecording(){return this[HB].stopRecording()}getCloudRecordingStatus(){return this[HB].getRecordingStatus()}acceptIndividualRecording(){return this[HB].accept()}declineIndividualRecording(){return this[HB].decline()}}const FB=Symbol("command");class WB{constructor(e){this[FB]=void 0,this[FB]=e}send(e,t){return this[FB].send(e,t)}}const xB=["isInRoom"],$B=["isAutoJoinRoom","isRoomSelectionEnabled"],GB=Symbol("breakout-room");class zB{constructor(e){this[GB]=void 0,this[GB]=e}createSubsessions(e,t){return this[GB].createRooms(e,t).then((e=>e.map((e=>({subsessionId:e.roomId,subsessionName:e.name,userList:e.attendeeList})))))}openSubsessions(e,t){const r=t?yB(yB({},t),{},{isAutoJoinRoom:t.isAutoJoinSubsession,isRoomSelectionEnabled:t.isSubsessionSelectionEnabled}):void 0,o=e.map((e=>({roomId:e.subsessionId,name:e.subsessionName,attendeeList:e.userList})));return this[GB].openRooms(o,r)}joinSubsession(e){return this[GB].joinRoom(e)}leaveSubsession(){return this[GB].leaveRoom()}askForHelp(){return this[GB].askForHelp()}postponeHelping(e){return this[GB].postponeHelping(e)}broadcast(e){return this[GB].broadcast(e)}assignUserToSubsession(e,t){return this[GB].assignUserToRoom(e,t)}moveUserToSubsession(e,t){return this[GB].moveUserToRoom(e,t)}moveBackToMainSession(e){return this[GB].moveBackToMainSession(e)}closeAllSubsessions(){return this[GB].closeRoom()}startBroadcastVoice(){return this[GB].startBroadcastVoice()}stopBroadcastVoice(){return this[GB].stopBroadcastVoice()}getUnassignedUserList(){return this[GB].getUnassignedAttendeeList().map((e=>MB(e)))}getSubsessionList(){return this[GB].getRoomList().map((e=>{const{roomId:t,name:r,attendeeList:o}=e;return{subsessionId:t,subsessionName:r,userList:o.map((e=>{const t=e,{isInRoom:r}=t;return yB({isInSubsession:r},EB(t,xB))}))}}))}getUserStatus(){return this[GB].getAttendeeStatus()}getSubsessionStatus(){return this[GB].getRoomStatus()}getCurrentSubsession(){const{attendeeStatus:e,name:t,roomId:r}=this[GB].getCurrentRoom();return{userStatus:e,subsessionName:t,subsessionId:r}}getSubsessionOptions(){const e=this[GB].getRoomOptions(),{isAutoJoinRoom:t,isRoomSelectionEnabled:r}=e;return yB({isAutoJoinSubsession:t,isSubsessionSelectionEnabled:r},EB(e,$B))}isSubsessionEnabled(){return this[GB].isBreakoutRoomEnabled()}}const qB=Symbol("liveTranscription");class KB{constructor(e){this[qB]=void 0,this[qB]=e}startLiveTranscription(){return this[qB].startLiveTranscription()}setSpeakingLanguage(e,t){return this[qB].setSpeakingLanguage(e,t)}setTranslationLanguage(e){return this[qB].setTranslationLanguage(e)}disableCaptions(e){return this[qB].disableCaptions(e)}lockTranscriptionLanguage(e){return this[qB].lockTranscriptionLanguage(e)}getLiveTranscriptionStatus(){return this[qB].getLiveTranscriptionStatus()}getCurrentTranscriptionLanguage(){return this[qB].getCurrentTranscriptionLanguage()}getCurrentTranslationLanguage(){return this[qB].getCurrentTranslationLanguage()}getLatestTranscription(){return this[qB].getLatestTranscription()}getLatestTranslation(){return this[qB].getLatestTranslation()}getFullTranscriptionHistory(){return this[qB].getFullTranscriptionHistory()}}const JB=Symbol("liveStream");class QB{constructor(e){this[JB]=void 0,this[JB]=e}startLiveStream(e,t,r){return this[JB].startLiveStream(e,t,r)}stopLiveStream(){return this[JB].stopLiveStream()}isLiveStreamEnabled(){return this[JB].isLiveStreamEnabled()}getLiveStreamStatus(){return this[JB].getLiveStreamStatus().status}}const YB=Symbol("logger");class ZB{constructor(e,t){if(this[YB]=void 0,this[YB]=e,t){const{debugMode:e,trackingId:r}=t;this[YB].setLogOptions({debugMode:e,trackingId:r})}}reportToGlobalTracing(e){return this[YB].reportToGlobalTracing(e)}reportRating(e,t){return this[YB].reportRating(e,t)}}const XB=Symbol("broadcastStreaming");class eH{constructor(e){this[XB]=void 0,this[XB]=e}startBroadcast(){return this[XB].startBroadcast()}stopBroadcast(e){return this[XB].stopBroadcast(e)}isBroadcastStreamingEnable(){return this[XB].isBroadcastStreamingEnable()}getBroadcastStreamingStatus(){return this[XB].getBroadcastStreamingStatus()}}const tH=["roomName"],rH=["roomId","roomName"],oH=[{event:"connection-change",originalEvent:"connection-change",payloadTransform:e=>{const{roomName:t}=e,r=EB(e,tH);return t?yB(yB({},r),{},{subsessionName:t}):e}},{event:"user-added",originalEvent:"user-added",payloadTransform:e=>e.map((e=>PB(e)))},{event:"user-updated",originalEvent:"user-updated",payloadTransform:e=>e.map((e=>PB(e)))},{event:"user-removed",originalEvent:"user-removed",payloadTransform:e=>e.map((e=>PB(e)))},{event:"subsession-invite-to-join",originalEvent:"invite-to-join",payloadTransform:e=>({subsessionId:e.roomId,subsessionName:e.name})},{event:"subsession-countdown",originalEvent:"room-countdown"},{event:"subsession-time-up",originalEvent:"room-time-up"},{event:"closing-subsession-countdown",originalEvent:"closing-room-countdown"},{event:"subsession-broadcast-message",originalEvent:"broadcast-message"},{event:"subsession-broadcast-voice",originalEvent:"broadcast-voice"},{event:"subsession-ask-for-help",originalEvent:"ask-for-help",payloadTransform:e=>({userId:e.userId,userGuid:e.userGuid,displayName:e.displayName,subsessionId:e.roomId,subsessionName:e.roomName})},{event:"subsession-ask-for-help-response",originalEvent:"ask-for-help-response"},{event:"subsession-invite-back-to-main-session",originalEvent:"invite-back-to-main-session"},{event:"subsession-state-change",originalEvent:"room-state-change"},{event:"host-ask-unmute-audio",originalEvent:"unmute-audio-consent"},{event:"subsession-user-update",originalEvent:"room-user-update",payloadTransform:e=>{const{roomId:t,roomName:r}=e;return yB({subsessionId:t,subsessionName:r},EB(e,rH))}},{event:"active-media-failed",originalEvent:"media-internal-error"}],nH=Symbol("summary");class iH{constructor(e){this[nH]=void 0,this[nH]=e}startSummary(){return this[nH].startSummary()}stopSummary(){return this[nH].stopSummary()}isSummaryEnabled(){return this[nH].isSummaryEnabled()}getSummaryStatus(){return this[nH].getSummaryStatus()}startMeetingQuery(){return this[nH].startMeetingQuery()}stopMeetingQuery(){return this[nH].stopMeetingQuery()}isMeetingQueryEnabled(){return this[nH].isMeetingQueryEnabled()}getMeetingQueryStatus(){return this[nH].getMeetingQueryStatus()}}const sH=Symbol("Client"),aH=new WeakMap;class uH{constructor(){this[sH]=void 0,this.stream=void 0,this.chat=void 0,this.command=void 0,this.recording=void 0,this.subsession=void 0,this.liveTranscription=void 0,this.logger=void 0,this.liveStream=void 0,this.aiClient=void 0,this.broadcastStreaming=void 0,this.whiteboardClient=void 0,this[sH]=SB.createClient(),aH.set(this,new Map)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",t=arguments.length>2?arguments[2]:void 0;const r=RB(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global");return!1===window.isSecureContext&&console.warn("The page is not in a secure context, to use audio, video, screen, a secure context must be enabled."),function(){const e="__ZOOM_VIDEO_SDK_DOM_STORAGE_TEST__";try{return localStorage.setItem(e,e),localStorage.removeItem(e),sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return!1}}()||console.warn("localstorage or sessionstorage is not enabled, please enable to use the video sdk,"),this[sH].init("","",{language:e,dependentAssets:r,constraints:yB(yB({},SB.checkSystemRequirements()),{},{screen:"object"==typeof WebAssembly&&"function"==typeof Worker}),additionalFeatures:["chat","cmd","recording","breakoutRoom","liveTranscription","logger","liveStream","summary","broadcastStreaming","whiteboard"],webEndpoint:(null==t?void 0:t.webEndpoint)||"zoom.us",skipJsMedia:null==t?void 0:t.skipJsMedia,enforceMultipleVideos:null==t?void 0:t.enforceMultipleVideos,stayAwake:null==t?void 0:t.stayAwake,enforceVirtualBackground:null==t?void 0:t.enforceVirtualBackground,quicklyLeaveMeeting:null==t?void 0:t.leaveOnPageUnload,patchJsMedia:null==t?void 0:t.patchJsMedia,alternativeNameForVideoPlayer:null==t?void 0:t.alternativeNameForVideoPlayer,isUIToolkit:null==t?void 0:t.isUIToolkit,isLogDetailed:null==t?void 0:t.isLogDetailed})}join(e,t,r,o,n){return TB(e)&&TB(t)&&TB(r)?e.length>200?Promise.reject({type:IB,reason:"The maximum length of topic is 200",errorCode:wa.CLIENT_INVALID_JOIN_PARAMETER}):r.length>200?Promise.reject({type:IB,reason:"The maximum length of username is 200",errorCode:wa.CLIENT_INVALID_JOIN_PARAMETER}):o&&("string"!=typeof o||o.length>10)?Promise.reject({type:IB,reason:"The maximum length of password is 10",errorCode:wa.CLIENT_INVALID_JOIN_PARAMETER}):this[sH].joinInstant(e,t,r,_B,o,n):Promise.reject({type:IB,reason:"Topic, token and userName must be string and required",errorCode:wa.CLIENT_INVALID_JOIN_PARAMETER})}leave(){var e;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(null===(e=aH.get(this))||void 0===e||e.clear(),this[sH].end()):this[sH].leave()}on(e,t){const r=oH.find((t=>t.event===e));if(r){const{originalEvent:o,payloadTransform:n}=r;if(n){const r=e=>{const r=n(e);t(r)};this[sH].on(o,r);const i=aH.get(this);if(i){i.has(e)||i.set(e,[]);const o=i.get(e);null==o||o.push({originalCb:t,newCb:r})}}else this[sH].on(o,t)}else this[sH].on(e,t)}off(e,t){const r=oH.find((t=>t.event===e));if(r){const{originalEvent:o,payloadTransform:n}=r;if(n){const r=aH.get(this);if(r){const n=r.get(e),i=null==n?void 0:n.find((e=>e.originalCb===t));if(i&&n){this[sH].off(o,i.newCb);const s=null==n?void 0:n.filter((e=>e.originalCb!==t));r.set(e,s)}}}else this[sH].off(o,t)}else this[sH].off(e,t)}getMediaStream(){return this.stream||(this.stream=new kB(this[sH].getMediaStream())),this.stream}getChatClient(){return this.chat||(this.chat=new BB(this[sH].getFeatureModule("chat"))),this.chat}getRecordingClient(){return this.recording||(this.recording=new jB(this[sH].getFeatureModule("recording"))),this.recording}getCommandClient(){return this.command||(this.command=new WB(this[sH].getFeatureModule("cmd"))),this.command}getSubsessionClient(){return this.subsession||(this.subsession=new zB(this[sH].getFeatureModule("breakoutRoom"))),this.subsession}getLiveTranscriptionClient(){return this.liveTranscription||(this.liveTranscription=new KB(this[sH].getFeatureModule("liveTranscription"))),this.liveTranscription}getLoggerClient(e){return this.logger||(this.logger=new ZB(this[sH].getFeatureModule("logger"),e)),this.logger}getLiveStreamClient(){return this.liveStream||(this.liveStream=new QB(this[sH].getFeatureModule("liveStream"))),this.liveStream}getBroadcastStreamingClient(){return this.broadcastStreaming||(this.broadcastStreaming=new eH(this[sH].getFeatureModule("broadcastStreaming"))),this.broadcastStreaming}getAIClient(){return this.aiClient||(this.aiClient=new iH(this[sH].getFeatureModule("summary"))),this.aiClient}getSessionInfo(){const e=this[sH].getMeetingInfo();return{isInMeeting:e.isInMeeting||!1,password:e.password||"",topic:e.topic,userName:e.userName,userId:e.userId,sessionId:e.meetingId}}getCurrentUserInfo(){return MB(this[sH].getCurrentUserInfo())}getUser(e){return MB(this[sH].getParticipantsList().find((t=>t.userId===e)))}getAllUser(){return this[sH].getParticipantsList().map((e=>MB(e)))}changeName(e,t){return this[sH].changeName(e,t)}makeHost(e){return this[sH].makeHost(e)}removeUser(e){return this[sH].removeUser(e)}makeManager(e){return this[sH].makeCoHost(e)}revokeManager(e){return this[sH].revokeCoHost(e)}reclaimHost(){return this[sH].reclaimHost()}isHost(){return this[sH].isHost()}isOriginalHost(){return this[sH].isOriginHost()}getSessionHost(){return MB(this[sH].getMeetingHost())}isManager(){return this[sH].isCoHost()}}class dH{static createClient(){return this.videoClient||(this.videoClient=new uH),this.videoClient}static destroyClient(){return this.videoClient?this.videoClient.leave().then((()=>(this.videoClient=null,SB.destroyClient()))):Promise.resolve(void 0)}static checkSystemRequirements(){return SB.checkSystemRequirements()}static checkFeatureRequirements(){return SB.checkFeatureRequirements()}static getDevices(e){return SB.getDevices(e)}static createLocalAudioTrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return SB.createLocalAudioTrack(e)}static createLocalVideoTrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return SB.createLocalVideoTrack(e)}static preloadDependentAssets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global";SB.preloadDependentAssets(RB(e))}}dH.videoClient=void 0,dH.VERSION=_B;let cH=function(e){return e[e.All=1]="All",e[e.NoOne=4]="NoOne",e[e.EveryonePublicly=5]="EveryonePublicly",e}({}),lH=function(e){return e[e.All=0]="All",e}({}),pH=function(e){return e[e.Automatically=pu.Automatically]="Automatically",e[e.Manually=pu.Manually]="Manually",e}({}),hH=function(e){return e[e.Initial=gu.Initial]="Initial",e[e.Invited=gu.Invited]="Invited",e[e.Joining=gu.Joining]="Joining",e[e.InSubsession=gu.InRoom]="InSubsession",e[e.Leaving=gu.Leaving]="Leaving",e[e.MainSession=gu.MainSession]="MainSession",e}({}),mH=function(e){return e[e.NotStarted=hu.NotStarted]="NotStarted",e[e.InProgress=hu.InProgress]="InProgress",e[e.Closing=hu.Closing]="Closing",e[e.Closed=hu.Closed]="Closed",e}({}),gH=function(e){return e[e.Failover=ko.Failover]="Failover",e[e.JoinSubsession=ko.JoinBreakoutRoom]="JoinSubsession",e[e.MoveToSubsession=ko.MoveToBreakoutRoom]="MoveToSubsession",e[e.BackToMainSession=ko.BackToMainSession]="BackToMainSession",e}({}),SH=function(e){return e[e.Unlocked=G.HostGrab]="Unlocked",e[e.Locked=G.OnlyHost]="Locked",e[e.MultipleShare=G.MultipleShare]="MultipleShare",e}({}),vH=function(e){return e[e.Unknown=_e.Unknown]="Unknown",e[e.Uninstalled=_e.Uninstalled]="Uninstalled",e[e.Installed=_e.Installed]="Installed",e[e.Unlaunched=Ie.Unlaunched]="Unlaunched",e[e.Launched=Ie.Launched]="Launched",e}({});export{Me as ActiveMediaFailedCode,He as AnnotationClearType,je as AnnotationToolType,Y as ApprovedState,fu as AskHostHelpResponse,j as AudioChangeAction,vU as BroadcastStreamingStatus,De as CRCProtocol,we as CRCReturnCode,ge as CameraControlCmd,g_ as ChatFileDownloadStatus,m_ as ChatFileUploadStatus,lH as ChatMsgType,cH as ChatPrivilege,Bo as ConnectionState,F as DialoutState,wa as ExceptionCode,Se as FarEndCameraControlDeclinedReason,H as LeaveAudioSource,qk as LiveStreamStatus,Dk as LiveTranscriptionLanguage,Ok as LiveTranscriptionLanguageCode,Ik as LiveTranscriptionMessageSource,te as MobileVideoFacingMode,V as MutedSource,Z as PassiveStopShareReason,gH as ReconnectReason,fn as RecordingStatus,vH as RemoteControlAppStatus,Ae as RemoteControlSessionStatus,SH as SharePrivilege,z as ShareStatus,pH as SubsessionAllocationPattern,mH as SubsessionStatus,hH as SubsessionUserStatus,We as SystemCPUPressureLevel,wk as TranscriptionMode,K as VideoActiveState,Q as VideoCapturingState,q as VideoQuality,dH as default};
