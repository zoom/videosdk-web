!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).WebVideoSDK={})}(this,(function(e){"use strict";const t=Symbol("store"),r=Symbol("getState"),o=Symbol("dispatch"),n=Symbol("additionFeatures"),i=Symbol("mediaContext");function s(e,t,r){const o=document.createElement("script");o.type="text/javascript",o.readyState?o.onreadystatechange=()=>{"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,t())}:(o.onload=()=>{t()},o.onerror=()=>{r()}),o.src=e,window.crossOriginIsolated&&(o.crossOrigin="anonymous"),"function"==typeof document.body.append?document.getElementsByTagName("head")[0].append(o):document.getElementsByTagName("head")[0].appendChild(o)}function a(e,t){let r=e;/^https?:\/\//.test(r)||(r=`https://${e}`);try{const e=new URL(r);if(!t)return e.href;if(t.hostname)return e.hostname;if(t.path)return e.pathname}catch(e){return""}return""}function u(e){if(e){var t;const r=document.getElementById(e);null==r||null===(t=r.parentNode)||void 0===t||t.removeChild(r)}}function d(e,t){if(!e||"string"==typeof e)return!1;if(e.ownerDocument===window.document)return e instanceof t;{var r;const o=null===(r=e.ownerDocument)||void 0===r?void 0:r.defaultView;let n;return!!o&&("HTMLVideoElement"===t.name?n=o.HTMLVideoElement:"HTMLCanvasElement"===t.name?n=o.HTMLCanvasElement:"HTMLElement"===t.name&&(n=o.HTMLElement),!!n&&e instanceof n||e instanceof t)}}function c(e){return d(e,HTMLVideoElement)}function l(e){return d(e,HTMLCanvasElement)}function p(e,t){return Array.from(document.getElementsByTagName(t)).some((t=>t.contains(e)))}function h(e,t,r){const o=e.parentElement;if(!o)return null;const n=document.createElement("canvas");n.id=t,null==o||o.appendChild(n);let i=null;function s(){r&&r()}return"undefined"!=typeof ResizeObserver?(i=new ResizeObserver(s),i.observe(e),o&&i.observe(o)):window.addEventListener("resize",s),s(),n._overlayCleanup=function(){i?(i.unobserve(e),o&&i.unobserve(o),i.disconnect(),i=null):window.removeEventListener("resize",s),"function"==typeof n.remove?n.remove():o&&o.removeChild(n)},n}function m(e){var t;const r=e.getBoundingClientRect(),o=null===(t=e.parentElement)||void 0===t?void 0:t.getBoundingClientRect(),n=getComputedStyle(e),i=parseFloat(n.borderTopWidth)||0,s=parseFloat(n.borderLeftWidth)||0,a=s+(parseFloat(n.borderRightWidth)||0),u=i+(parseFloat(n.borderBottomWidth)||0),d=Math.max(e.width/(r.width-a),e.height/(r.height-u)),c={width:e.width/d,height:e.height/d},l=r.top-((null==o?void 0:o.top)||0),p=r.left-((null==o?void 0:o.left)||0);return{size:c,position:{top:`${l+((r.height-u-c.height)/2+i)}px`,left:`${p+((r.width-a-c.width)/2+s)}px`}}}let g="zoom.us";const S="4.1.0",v=`https://dmogdx0jrul3u.cloudfront.net/${S}/lib/av`,f=`https://source.zoom.us/${S}/lib/av`,y=`https://jssdk.zoomus.cn/${S}/lib/av`,E=()=>g;function _(e,t){const r=t.match(e);return r&&r.length>0&&r[1]||""}function I(e,t){const r=t.match(e);return r&&r.length>1&&r[2]||""}const A=/version\/(\d+(\.?_?\d+)+)/i,b=[{test:[/opera/i],describe:e=>["Opera(Legacy)",_(A,e)||_(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e)]},{test:[/opr\/|opios/i],describe:e=>["Opera",_(/(?:opr|opios)[\s/](\S+)/i,e)||_(A,e)]},{test:[/SamsungBrowser/i],describe:e=>["Samsung Internet for Android",_(A,e)||_(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e)]},{test:[/micromessenger/i],describe:e=>["WeChat",_(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||_(A,e)]},{test:[/qqbrowser/i],describe:e=>[/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser",_(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||_(A,e)]},{test:[/msie|trident/i],describe:e=>["Internet Explorer",_(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e)]},{test:[/\sedg\//i],describe:e=>["Microsoft Edge",_(/\sedg\/(\d+(\.?_?\d+)+)/i,e)]},{test:[/edg([ea]|ios)/i],describe:e=>["Microsoft Edge(Legacy)",I(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e)]},{test:[/firefox|iceweasel|fxios/i],describe:e=>["Firefox",_(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e)]},{test:[/electron/i],describe:e=>["Electron",_(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e)]},{test:[/chromium/i],describe:e=>["Chromium",_(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||_(A,e)]},{test:[/chrome|crios|crmo/i],describe:e=>["Chrome",_(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e)]},{test:e=>!/like android/i.test(e)&&/android/i.test(e),describe:e=>["Android Browser",_(A,e)]},{test:[/safari|applewebkit/i],describe:e=>["Safari",_(A,e)]}],C=[{test:e=>{const t=e.match(/OpenHarmony (\d+\.?\d*)/);return(null==t?void 0:t.length)&&Number(t[1])>=5},describe:e=>["HarmonyOS",_(/OpenHarmony (\d+\.?\d*)/i,e)]},{test:[/windows /i],describe:e=>["Windows",_(/Windows ((NT|XP)( \d\d?.\d)?)/i,e)]},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:e=>["iOS",I(/(Version\/)(\d[\d.]+)/,e)]},{test:[/macintosh/i],describe:e=>["macOS",_(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,".")]},{test:[/(ipod|iphone|ipad)/i],describe:e=>["iOS",_(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".")]},{test:e=>!/like android/i.test(e)&&/android/i.test(e),describe:e=>["Android",_(/android[\s/-](\d+(\.\d+)*)/i,e)]},{test:[/linux/i],describe:()=>["Linux"]},{test:[/CrOS/],describe:()=>["Chrome OS"]}],T=new class{constructor(){this._browser=void 0,this._os=void 0,this._browserVersion=void 0,this._osVersion=void 0,this._clientHintsData=void 0,this._mediaFeatureOptions=void 0,"userAgentData"in navigator&&navigator.userAgentData.getHighEntropyValues(["architecture","bitness","formFactor","model","platformVersion","wow64"]).then((e=>{this._clientHintsData=e,this._os&&this._osVersion&&this._clientHintsData.platform&&this._clientHintsData.platformVersion&&(this._os=this._clientHintsData.platform,this._osVersion=this._clientHintsData.platformVersion)})).catch((e=>{console.warn(e)}))}_getBrowserVersion(){var e;if(null!==(e=this._clientHintsData)&&void 0!==e&&null!==(e=e.brands)&&void 0!==e&&e.length){const e=this._clientHintsData.brands.filter((e=>!/(Chromium|Not.*Brand)/i.test(e.brand)))[0];e&&(this._browser=e.brand);const t=this._clientHintsData.brands.find((e=>{var t;return"chromium"===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}));t?(this._browserVersion=t.version,this._browser||(this._browser=t.brand)):this._browserVersion=e.version}else{const e=navigator.userAgent,t=b.find((t=>"function"==typeof t.test?t.test(e):t.test.some((t=>t.test(e)))));if(t){const r=t.describe(e);this._browser=r[0],this._browserVersion=r[1],this.isIOSMobile&&(this._browser="ios-safari")}else this._browser="unknown",this._browserVersion="0"}}_getOSVersion(){var e,t;if(null!==(e=this._clientHintsData)&&void 0!==e&&e.platform&&null!==(t=this._clientHintsData)&&void 0!==t&&t.platformVersion)this._os=this._clientHintsData.platform,this._osVersion=this._clientHintsData.platformVersion;else{const e=navigator.userAgent,t=C.find((t=>"function"==typeof t.test?t.test(e):t.test.some((t=>t.test(e)))));if(t){const r=t.describe(e);this._os=r[0],this._osVersion=r[1]}else this._os="unknown",this._osVersion="0"}}get browser(){return this._browser||this._getBrowserVersion(),this._browser}get browserVersion(){return this._browserVersion||this._getBrowserVersion(),this._browserVersion}get os(){return this._os||this._getOSVersion(),this._os}get osVersion(){return this._osVersion||this._getOSVersion(),this._osVersion}get isIE(){return"Internet Explorer"===this.browser}get isLegacyEdge(){return"Microsoft Edge(Legacy)"===this.browser}get isLegacyOpera(){return"Opera(Legacy)"===this.browser}get isFirefox(){return"Firefox"===this.browser}get isSafari(){return"Safari"===this.browser}get isChrome(){var e,t;if(null!==(e=this._clientHintsData)&&void 0!==e&&null!==(e=e.brands)&&void 0!==e&&e.length)return null===(t=this._clientHintsData)||void 0===t?void 0:t.brands.some((e=>{var t;return"chromium"===(null===(t=e.brand)||void 0===t?void 0:t.toLocaleLowerCase())}));const{userAgent:r}=navigator;return!this.isLegacyOpera&&!this.isLegacyEdge&&/chrome/i.test(r)&&/webkit/i.test(r)}get isLegacyChrome(){var e;return this.isChrome&&"function"!=typeof(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getDisplayMedia)}get isMacOS(){return"macOS"===this.os}get isIPad(){var e;return/iPad/i.test(navigator.userAgent)||this.isMacOS&&(null===(e=navigator)||void 0===e?void 0:e.maxTouchPoints)>2}get isHarmonyOS(){return"HarmonyOS"===this.os}get isIOSMobile(){return"iOS"===this.os||this.isIPad}get architecture(){var e,t;return null!==(e=null===(t=this._clientHintsData)||void 0===t?void 0:t.architecture)&&void 0!==e?e:""}get isArm(){return this.architecture?"arm"===this.architecture:/arm/i.test(navigator.userAgent)}get isChromeOS(){return"Chrome OS"===this.os}get isAndroidBrowser(){var e;return"android"===(null===(e=this.os)||void 0===e?void 0:e.toLowerCase())}get isArmChromeOS(){return this.isArm&&this.isChromeOS}get isAndroidOrIOSBrowser(){return this.isAndroidBrowser||this.isIOSMobile}get isSupportEssentialAudioAndVideoAbility(){return"object"==typeof WebAssembly&&"function"==typeof Worker}get isSupportAudioWorklet(){return"function"==typeof AudioWorklet}get isSupportImageCapture(){return"ImageCapture"in window}get isSupportMediaStreamTrackProcessor(){var e;return this._mediaFeatureOptions?!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||!e.isSupportMediaStreamTrackProcessor(this._mediaFeatureOptions)):"MediaStreamTrackProcessor"in window}get isSupportOffscreenCanvas(){var e;return null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e?void 0:e.isSupportOffscreenCanvas()}get gpu(){var e;return this.isSupportOffscreenCanvas?null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||null===(e=e.getGpuInfo())||void 0===e?void 0:e.renderInfo:""}get bitness(){var e,t;return null!==(e=null===(t=this._clientHintsData)||void 0===t?void 0:t.bitness)&&void 0!==e?e:""}get model(){var e,t;return null!==(e=null===(t=this._clientHintsData)||void 0===t?void 0:t.model)&&void 0!==e?e:""}get wow64(){var e;if("windows"===this.os.toLowerCase())return null===(e=this._clientHintsData)||void 0===e?void 0:e.wow64}get isSupportSendScreenSharing(){return"getDisplayMedia"in navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getDisplayMedia}get isSupportSharedArrayBuffer(){return"function"==typeof SharedArrayBuffer}get is32bitChrome(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||!e.is32bitBrowser())}get isSwiftShader(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||!e.isUsingSwiftShader())}set mediaFeatureOptions(e){this._mediaFeatureOptions=e}get isWeakRefSupported(){return"undefined"!=typeof WeakRef}};function R(){var e;return"webkit"in window&&!("chrome"in window)&&!(null===(e=window.webkit.messageHandlers)||void 0===e||!e.jsOCHelper)}function O(){var e;const{isAndroidBrowser:t,isIOSMobile:r,osVersion:o,browserVersion:n,isChrome:i,isFirefox:s,isSafari:a}=T;var u,d;if(r)return Number(null===(u=o.match(/^\d+/))||void 0===u?void 0:u[0])>=15;if(t)return Number(null===(d=o.match(/^\d+/))||void 0===d?void 0:d[0])>=10;const c=Number(null===(e=n.match(/^\d+/))||void 0===e?void 0:e[0]);return!!(i&&c>=69)||!!(a&&c>14)||!!(s&&c>=76)}function D(){const{isSupportAudioWorklet:e,isSupportEssentialAudioAndVideoAbility:t,isAndroidOrIOSBrowser:r,isSupportSendScreenSharing:o}=T,n=void 0!==navigator.mediaDevices&&(t&&e||r),i=t&&void 0!==navigator.mediaDevices&&void 0!==navigator.mediaCapabilities,s="function"==typeof"".replaceAll;return{audio:s&&n,video:s&&i,screen:s&&t&&o}}class w{constructor(e){this.instant=void 0,this.context=void 0,this.script=void 0,this.mic=void 0,this.instant=0,this.context=e,this.mic=null,this.script=e.createScriptProcessor(2048,1,1),this.script.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);let r,o=0;for(r=0;r<t.length;++r)o+=t[r]*t[r];this.instant=Math.sqrt(o/t.length)}}connectToSource(e){console.log("InputMicDetector is listening");try{var t;this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),null===(t=this.script)||void 0===t||t.connect(this.context.destination)}catch(e){console.error(e)}}stop(){var e,t;console.log("Audio Previewer stopped"),null===(e=this.mic)||void 0===e||e.disconnect(),this.mic=null,null===(t=this.script)||void 0===t||t.disconnect(),this.script=null}getMicVolume(){return this.instant}}const N="https://st1.zoom.us/web_client/4qu8baa/audio/ring.mp3";class M{constructor(){this.sampleAudio=void 0,this.audioCtx=void 0,this.destinationNode=void 0,this.audioPlayer=void 0,this.analyzserInterval=void 0,this.analyserNode=void 0,this.analyserNodeBufferDataArray=void 0,this.analyserCallback=void 0,this.sourceNode=void 0,this.mAudioStream=void 0,this.mSourceNode=void 0,this.mediaRecorder=void 0,this.isRecording=void 0,this.recorderChunks=[],this.recorderObjUrl=void 0,this.recorderPlayer=void 0,this.maximumRecordingTimer=void 0,this.shouldPlayAfterRecording=!0,this.isRunning=!1}testSpeaker(e){var t;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||!AudioContext.prototype.decodeAudioData)return void console.warn("Cannot test the speaker due to the browser capability");const{speakerId:r,sampleAudioUrl:o=N,onAnalyseFrequency:n}=e||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext(),((null===(t=this.sampleAudio)||void 0===t?void 0:t.url)===o&&this.sampleAudio.data?Promise.resolve(this.sampleAudio.data):window.fetch(o).then((e=>e.arrayBuffer())).then((e=>this.audioCtx.decodeAudioData(e))).then((e=>(this.sampleAudio={url:o,data:e},e)))).then((e=>{var t,o,i;this.sourceNode=this.audioCtx.createBufferSource(),this.sourceNode.buffer=e,this.sourceNode.loop=!0,r&&null!==(t=this.audioPlayer)&&void 0!==t&&t.setSinkId&&this.audioPlayer.setSinkId(r),n?"function"==typeof AudioContext.prototype.createAnalyser?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=n,this.initAnalyserNode(),this.analyserNode&&this.sourceNode.connect(this.analyserNode)):(this.sourceNode.connect(this.destinationNode),console.warn("Cannot analyze the stream due to the browser capability")):(this.analyserCallback=void 0,this.sourceNode.connect(this.destinationNode)),this.sourceNode.start(0),"running"!==(null===(o=this.audioCtx)||void 0===o?void 0:o.state)&&(null===(i=this.audioCtx)||void 0===i||i.resume()),this.audioPlayer&&(this.audioPlayer.muted=!1,this.audioPlayer.currentTime=0,this.audioPlayer.play())}));const i=()=>{this.isRunning=!1,this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.sourceNode&&(this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode.buffer=null,this.sourceNode=void 0)};return{stop:i,destroy:()=>{var e;i(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(e=this.audioCtx)||void 0===e||e.close(),this.audioCtx=void 0}}}testMicrophone(e){var t;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||"function"!=typeof AudioContext.prototype.createMediaStreamSource||"function"!=typeof(null===(t=navigator.mediaDevices)||void 0===t?void 0:t.getUserMedia))return void console.warn("Cannot test the microphone due to the browser capability");const{microphoneId:r,speakerId:o,recordAndPlay:n,maxRecordDuration:i,onAnalyseFrequency:s,onStartRecording:a,onStopRecording:u,onStartPlayRecording:d,onStopPlayRecording:c}=e||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext();const l=()=>{n&&this.mediaRecorder&&this.isRecording&&(this.shouldPlayAfterRecording=!0,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop())};window.navigator.mediaDevices.getUserMedia({audio:!r||{deviceId:{exact:r}}}).then((e=>{var t,r,p,h;this.mAudioStream=e,this.mSourceNode=null===(t=this.audioCtx)||void 0===t?void 0:t.createMediaStreamSource(e),this.audioPlayer.muted=!0,s?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=s,this.initAnalyserNode(),this.analyserNode&&(null===(p=this.mSourceNode)||void 0===p||p.connect(this.analyserNode))):this.analyserCallback=void 0,n&&("function"==typeof MediaRecorder?(this.recorderObjUrl&&window.URL.revokeObjectURL(this.recorderObjUrl),this.mediaRecorder=new MediaRecorder(this.mAudioStream),this.mediaRecorder.ondataavailable=e=>{e.data&&this.recorderChunks.push(e.data)},this.mediaRecorder.onstop=()=>{if(this.isRecording=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),null==u||u(),this.recorderChunks.length>0){var e;const t=new Blob(this.recorderChunks,{type:(null===(e=this.recorderChunks[0])||void 0===e?void 0:e.type)||"audio/ogg; codecs=opus"});this.recorderObjUrl=window.URL.createObjectURL(t),this.shouldPlayAfterRecording&&this.playRecording(this.recorderObjUrl,o,d,c).catch((e=>{this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),console.warn(e)})),this.recorderChunks=[],this.mediaRecorder&&(this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,this.mediaRecorder=void 0)}},this.mediaRecorder.start(),this.isRecording=!0,null==a||a(),this.maximumRecordingTimer=window.setTimeout((()=>{l()}),i||1e4)):console.warn("Cannot record the sound due to the browser capability")),"running"!==(null===(r=this.audioCtx)||void 0===r?void 0:r.state)&&(null===(h=this.audioCtx)||void 0===h||h.resume()),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.play())}));const p=()=>{this.isRunning=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.mSourceNode&&(s&&this.analyserNode&&this.mSourceNode.disconnect(this.analyserNode),this.mSourceNode=void 0),this.mAudioStream&&(this.mAudioStream.getAudioTracks().forEach((e=>{e.stop()})),this.mAudioStream=void 0),this.mediaRecorder&&(this.shouldPlayAfterRecording=!1,this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop(),this.isRecording=!1,this.mediaRecorder=void 0,this.recorderChunks=[]),this.recorderPlayer&&(this.recorderPlayer.currentTime=0,this.recorderPlayer.pause())};return{stop:p,stopRecording:l,destroy:()=>{var e;p(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(e=this.audioCtx)||void 0===e||e.close(),this.audioCtx=void 0}}}initAudioContext(){this.audioCtx&&this.audioPlayer||(this.audioCtx=new AudioContext,this.destinationNode=new MediaStreamAudioDestinationNode(this.audioCtx),this.audioPlayer=new Audio,this.audioPlayer.loop=!0,this.audioPlayer.srcObject=this.destinationNode.stream)}initAnalyserNode(){if(!this.audioCtx)return;this.analyserNode||(this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.connect(this.destinationNode),this.analyserNode.fftSize=1024);const e=this.analyserNode.frequencyBinCount;this.analyserNodeBufferDataArray=new Uint8Array(e),this.analyzserInterval=window.setInterval(this.audioAnalyserCallback.bind(this),20)}audioAnalyserCallback(){if(this.analyserNodeBufferDataArray&&this.analyserNode&&this.analyserCallback){this.analyserNode.getByteFrequencyData(this.analyserNodeBufferDataArray);let e=0;for(const t of this.analyserNodeBufferDataArray)e+=t;const t=e/this.analyserNodeBufferDataArray.length;this.analyserCallback(t)}}playRecording(e,t,r,o){this.recorderPlayer=new Audio,this.recorderPlayer.src=e,this.recorderPlayer.currentTime=0,this.recorderPlayer.setSinkId&&t&&this.recorderPlayer.setSinkId(t);const n=()=>{null==o||o(),this.recorderPlayer&&(this.recorderPlayer.onpause=null,this.recorderPlayer.onended=null,this.recorderPlayer=void 0,this.isRunning=!1)};return new Promise(((e,t)=>{this.recorderPlayer&&(this.recorderPlayer.onpause=()=>{e(!0)},this.recorderPlayer.onended=()=>{e(!0)},this.recorderPlayer.onerror=t,null==r||r(),this.recorderPlayer.play().catch(t))})).finally((()=>{window.URL.revokeObjectURL(e),n()}))}}const P="AudioNotStartedError";class L{constructor(e=""){this.audioContext=void 0,this.inputMicDetector=void 0,this.isMicUnmuted=void 0,this.isAudioStarted=void 0,this.audioStream=void 0,this.deviceId=void 0,this.tester=void 0,this.audioContext=null,this.inputMicDetector=null,this.isMicUnmuted=!1,this.isAudioStarted=!1,this.audioStream=null,this.deviceId=e,this.tester=new M}async start(){if(this.audioStream||this.isAudioStarted)throw new Error("AudioAlreadyStartedError");try{const e=await navigator.mediaDevices.getUserMedia(this.getAudioConstraints());this.audioStream=e,this.isAudioStarted=!0}catch(e){throw e}}async unmute(){if(!this.audioStream||!this.isAudioStarted)throw new Error(P);if(this.isMicUnmuted)throw new Error("AudioAlreadyUnmutedError");return this.toggleMicIsMuted(!0)}async mute(){if(!this.audioStream||!this.isAudioStarted)throw new Error(P);if(!this.isMicUnmuted)throw new Error("AudioAlreadyMutedError");return this.toggleMicIsMuted(!1)}getCurrentVolume(){return this.inputMicDetector?this.inputMicDetector.getMicVolume():0}async stop(){if(!this.audioStream||!this.isAudioStarted)throw new Error(P);this.audioStream.getAudioTracks().forEach((e=>e.stop())),this.audioStream=null,this.isAudioStarted=!1}async toggleMicIsMuted(e){if(e){if(!this.audioContext){const e=window.AudioContext||window.webkitAudioContext;this.audioContext=new e}this.inputMicDetector=new w(this.audioContext),this.inputMicDetector.connectToSource(this.audioStream)}else this.inputMicDetector&&this.inputMicDetector.stop(),this.inputMicDetector=null;this.isMicUnmuted=e}getAudioConstraints(){return{audio:""===this.deviceId||{deviceId:{exact:this.deviceId}},video:!1}}testSpeaker(e){return this.tester.testSpeaker(e)}testMicrophone(e){return this.tester.testMicrophone(e)}}let k=function(e){return e[e.InitSuccess=1]="InitSuccess",e[e.InitSuccessVideo=1.1]="InitSuccessVideo",e[e.InitSuccessAudio=1.2]="InitSuccessAudio",e[e.InitSuccessSharing=1.3]="InitSuccessSharing",e[e.UserGrantCaptureAudio=2]="UserGrantCaptureAudio",e[e.CurrentVideoResolution=3]="CurrentVideoResolution",e[e.JpegDecThreadOk=4]="JpegDecThreadOk",e[e.JpegData=5]="JpegData",e[e.SharingPara=6]="SharingPara",e[e.VideoDecodeMaxSize=7]="VideoDecodeMaxSize",e[e.CurrentCaptureVideoWidthHeight=8]="CurrentCaptureVideoWidthHeight",e[e.StartVideoCaptureSuccess=9]="StartVideoCaptureSuccess",e[e.StopVideoCaptureSuccess=10]="StopVideoCaptureSuccess",e[e.StartRemoteControlSuccess=11]="StartRemoteControlSuccess",e[e.CancelRemoteControlSuccess=12]="CancelRemoteControlSuccess",e[e.RemoteControlCopiedTextNotify=13]="RemoteControlCopiedTextNotify",e[e.MonitorLog=14]="MonitorLog",e[e.CurrentDesktopSharingWidthHeight=15]="CurrentDesktopSharingWidthHeight",e[e.DesktopSharingCaptureSuccess=16]="DesktopSharingCaptureSuccess",e[e.CheckChromeSharingExtensionResponse=17]="CheckChromeSharingExtensionResponse",e[e.SharingDecodeMaxSize=18]="SharingDecodeMaxSize",e[e.DataChannelOffer=19]="DataChannelOffer",e[e.AesGcmIvResponse=21]="AesGcmIvResponse",e[e.SharingDesktopStreamHaveAudio=23]="SharingDesktopStreamHaveAudio",e[e.JoinComputerAudioComplete=24]="JoinComputerAudioComplete",e[e.JoinSharingAudioComplete=25]="JoinSharingAudioComplete",e[e.LeaveComputerAudioComplete=26]="LeaveComputerAudioComplete",e[e.LeaveSharingAudioComplete=27]="LeaveSharingAudioComplete",e[e.HidStatusMute=28]="HidStatusMute",e[e.AudioStreamFailed=31]="AudioStreamFailed",e[e.VideoStreamFailed=32]="VideoStreamFailed",e[e.AudioSpeakerSetSuccess=33]="AudioSpeakerSetSuccess",e[e.AudiobridgeSetCcLangSuccess=36]="AudiobridgeSetCcLangSuccess",e[e.AudioLevelIndicator=38]="AudioLevelIndicator",e[e.SyncRendererTypeResponse=39]="SyncRendererTypeResponse",e[e.SendRemoteControlQrCode=55]="SendRemoteControlQrCode",e[e.StartVideoStreamInMaskSettingSuccess=66]="StartVideoStreamInMaskSettingSuccess",e[e.CurrentDecodeVideoQuality=66.5]="CurrentDecodeVideoQuality",e[e.CurrentDecodeVideoFps=66.6]="CurrentDecodeVideoFps",e[e.SharingFirstDecodeFrameReceivedSsrc=70]="SharingFirstDecodeFrameReceivedSsrc",e[e.StartVideoStreamInVbSettingSuccess=94]="StartVideoStreamInVbSettingSuccess",e[e.VbModelPreloading_3S=96]="VbModelPreloading_3S",e[e.VbModelPreloading_10S=97]="VbModelPreloading_10S",e[e.VbModelPreloadingOk=98]="VbModelPreloadingOk",e[e.NewActiveSpeakerFirstFrameCallback=111]="NewActiveSpeakerFirstFrameCallback",e[e.AudioBridgeFirstRecvData=114]="AudioBridgeFirstRecvData",e[e.AudioBridgeCanSendData=115]="AudioBridgeCanSendData",e[e.SpeakingWhenMute=121]="SpeakingWhenMute",e[e.StartAnnotationSuccess=158]="StartAnnotationSuccess",e[e.DeviceChangeEvent=159]="DeviceChangeEvent",e[e.RecaptureAudio=160]="RecaptureAudio",e[e.MediaStatsLog=209]="MediaStatsLog",e[e.InitFailed=-1]="InitFailed",e[e.InitFailedVideo=-1.1]="InitFailedVideo",e[e.InitFailedAudio=-1.2]="InitFailedAudio",e[e.InitFailedSharing=-1.3]="InitFailedSharing",e[e.AudioCaptureFailed=-2]="AudioCaptureFailed",e[e.AudioWebsocketBroken=-3]="AudioWebsocketBroken",e[e.VideoWebsocketBroken=-4]="VideoWebsocketBroken",e[e.SharingDecThreadFailed=-5]="SharingDecThreadFailed",e[e.AudioZeroData=-6]="AudioZeroData",e[e.AudioCtxSamplerate=-7]="AudioCtxSamplerate",e[e.UserForbiddedCaptureVideo=-8]="UserForbiddedCaptureVideo",e[e.UserCameraIsTakenByOtherPrograms=-9]="UserCameraIsTakenByOtherPrograms",e[e.StopVideoCaptureFailed=-10]="StopVideoCaptureFailed",e[e.StartRemoteControlFailed=-11]="StartRemoteControlFailed",e[e.CancelRemoteControlFailed=-12]="CancelRemoteControlFailed",e[e.RemoteControlPasteTextLengthOverflow=-14]="RemoteControlPasteTextLengthOverflow",e[e.UserStopDesktopSharing=-15]="UserStopDesktopSharing",e[e.UserCancelPermissionRequest=-16]="UserCancelPermissionRequest",e[e.DesktopSharingChromeExtensionUninstalled=-17]="DesktopSharingChromeExtensionUninstalled",e[e.DesktopSharingPermissionDenied=-18]="DesktopSharingPermissionDenied",e[e.DesktopSharingTimeOut=-19]="DesktopSharingTimeOut",e[e.DesktopSharingError=-20]="DesktopSharingError",e[e.AudioSpeakerSetError=-21]="AudioSpeakerSetError",e[e.DesktopSharingSystemError=-22]="DesktopSharingSystemError",e[e.SharingDesktopStreamHaveNoAudio=-27]="SharingDesktopStreamHaveNoAudio",e[e.AudioBridgeSocketConnectionError=-28]="AudioBridgeSocketConnectionError",e[e.AudioBridgeReconnectStart=-29]="AudioBridgeReconnectStart",e[e.AudioBridgeReconnectEnd=-31]="AudioBridgeReconnectEnd",e[e.WebglLostInMultiView=-32]="WebglLostInMultiView",e[e.MaskSettingParaError=-33]="MaskSettingParaError",e[e.VbSettingParaError=-34]="VbSettingParaError",e[e.NotifyUIFailover=-35]="NotifyUIFailover",e[e.AudiobridgeSetCcLangFailure=-39]="AudiobridgeSetCcLangFailure",e[e.NotifyUIWMSCFailover=-42]="NotifyUIWMSCFailover",e[e.NotifyUIWMSCWSSDisconnected=-43]="NotifyUIWMSCWSSDisconnected",e[e.RecoverWebrtcAudio=-44]="RecoverWebrtcAudio",e[e.WebglContextInvalid=-51]="WebglContextInvalid",e[e.WasmMemoryFail=-52]="WasmMemoryFail",e[e.WorkletProcessExceptions=-53]="WorkletProcessExceptions",e[e.NotSupportExternalCanvasInVTagRenderer=-55]="NotSupportExternalCanvasInVTagRenderer",e[e.HealthCheckFailed=-129]="HealthCheckFailed",e[e.StartAnnotationFailed=-130]="StartAnnotationFailed",e.AudioQosData="AUDIO_QOS_DATA",e.VideoQosData="VIDEO_QOS_DATA",e.ShareQosData="VIDEOSHARE_QOS_DATA",e.CommonQosData="COMMON_QOS_DATA",e.NetworkQualityChange="NETWORK_QUALITY_CHANGE",e.NetworkQualityChangeAudio="NETWORK_QUALITY_CHANGE_AUDIO",e.NetworkQualityChangeSharing="NETWORK_QUALITY_CHANGE_SHARING",e.AudioStreamMuted="AUDIO_STREAM_MUTED",e.AudioStreamUnmuted="AUDIO_STREAM_UNMUTED",e.AnnotationRedoStatus="ANNO_REDO_STATUS",e.AnnotationUndoStatus="ANNO_UNDO_STATUS",e.AnnoViewerRequestDraw="ANNO_VIEWER_REQUEST_DRAW",e[e.WHITEBOARD_SUCCESS=30]="WHITEBOARD_SUCCESS",e.VideoStreamMuted="VIDEO_STREAM_MUTED",e.VideoStreamUnmuted="VIDEO_STREAM_UNMUTED",e}({}),U=function(e){return e[e.EncodeSuccess=1]="EncodeSuccess",e[e.DecodeSuccess=2]="DecodeSuccess",e[e.EncodeFailed=-1]="EncodeFailed",e[e.DecodeFailed=-2]="DecodeFailed",e}({}),V=function(e){return e.Spotlight="Spotlight",e.Unmute="Unmute",e.AllowToTalk="Allow to talk",e}({}),B=function(e){return e.Inherited="inherited",e.Active="active",e.PassiveByMuteOne="passive(mute one)",e.PassiveByMuteAll="passive(mute all)",e.SharingAudio="sharing audio",e}({}),H=function(e){return e.Inherited="inherited",e.Active="active",e.Passive="passive",e.SharingAudio="sharing audio",e}({}),j=function(e){return e.Active="active",e.Failover="failover",e.EndedBySystem="audio stream is ended by system",e.Pstn="pstn",e.MicrophoneError="microphone error",e}({}),F=function(e){return e.Join="join",e.Leave="leave",e.Muted="muted",e.Unmuted="unmuted",e}({}),W=function(e){return e[e.Calling=1]="Calling",e[e.Ringing=2]="Ringing",e[e.Accepted=3]="Accepted",e[e.Busy=4]="Busy",e[e.NotAvailable=5]="NotAvailable",e[e.HangUp=6]="HangUp",e[e.Fail=7]="Fail",e[e.Success=8]="Success",e[e.Timeout=9]="Timeout",e[e.Canceling=10]="Canceling",e[e.Canceled=11]="Canceled",e[e.CancelFailed=12]="CancelFailed",e[e.NoAnswer=13]="NoAnswer",e[e.BlockNoHost=14]="BlockNoHost",e[e.BlockHighRate=15]="BlockHighRate",e[e.BlockTooFrequent=16]="BlockTooFrequent",e}({});const x=(()=>{const e=new ArrayBuffer(684),t=new Uint32Array(e);return t.set([1179011410,676,1163280727,544501094,16,65539,16e3,64e3,2097156,1635017060,640],0),new Blob([t],{type:"audio/wav"})})(),$=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]),G=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);let z=function(e){return e[e.HostGrab=0]="HostGrab",e[e.OnlyHost=1]="OnlyHost",e[e.AnyoneGrab=2]="AnyoneGrab",e[e.MultipleShare=3]="MultipleShare",e}({}),q=function(e){return e.Sharing="sharing",e.Paused="paused",e.End="ended",e}({}),K=function(e){return e[e.Video_90P=0]="Video_90P",e[e.Video_180P=1]="Video_180P",e[e.Video_360P=2]="Video_360P",e[e.Video_720P=3]="Video_720P",e[e.Video_1080P=4]="Video_1080P",e}({}),J=function(e){return e.Active="Active",e.Inactive="Inactive",e}({}),Q=function(e){return e.Muted="Muted",e.Unmuted="Unmuted",e}({}),Y=function(e){return e.Started="Started",e.Stopped="Stopped",e.Failed="Failed",e}({}),Z=function(e){return e.Approved="Approved",e.Rejected="Rejected",e}({}),X=function(e){return e.PrivilegeChange="PrivilegeChange",e.StopScreenCapture="StopScreenCapture",e.ShareFromMainSession="ShareFromMainSession",e.StopCameraCapture="StopCameraCapture",e}({}),ee=function(e){return e[e.ImageNotMatch=2]="ImageNotMatch",e[e.CanvasNotMatch=3]="CanvasNotMatch",e[e.VBModelNotMatch=4]="VBModelNotMatch",e}({});const te="blur";let re=function(e){return e.User="user",e.Environment="environment",e.Left="left",e.Right="right",e}({});const oe=Object.values(re),ne=1e3,ie="__ZOOM_SDK_SHARING_VIDEO__",se="__ZOOM_SDK_ANNOTATION_CANVAS_@__",ae="__ZOOM_SDK_VIDEO_ZONE__",ue="__ZOOM_SDK_MEDIA_PLAYBACK_SOURCE_VIDEO__",de="__ZOOM_SDK_DYMMY_VIDEO_PLAYER_CANVAS_ID__",ce="__ZOOM_SDK_DUMMY_HIDDEN_SELF_VIEW_VIDEO_ID__",le={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,rate:0,bandwidth:0}},pe={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,rate:0,bandwidth:0}};let he=function(e){return e[e.Request=11]="Request",e[e.Decline=12]="Decline",e[e.Approve=13]="Approve",e[e.GiveUp=14]="GiveUp",e[e.StartControl=15]="StartControl",e[e.ContinueControl=16]="ContinueControl",e[e.StopControl=17]="StopControl",e[e.SwitchCamera=20]="SwitchCamera",e}({}),me=function(e){return e[e.Bk=0]="Bk",e[e.Center=1]="Center",e[e.ZoomIn=2]="ZoomIn",e[e.ZoomOut=3]="ZoomOut",e[e.Left=4]="Left",e[e.Right=5]="Right",e[e.Up=6]="Up",e[e.Down=7]="Down",e[e.SwitchCamera=8]="SwitchCamera",e}({}),ge=function(e){return e[e.Pan=192]="Pan",e[e.Tilt=48]="Tilt",e[e.Zoom=12]="Zoom",e[e.Focus=3]="Focus",e}({}),Se=function(e){return e[e.ZoomIn=2]="ZoomIn",e[e.ZoomOut=3]="ZoomOut",e[e.Left=4]="Left",e[e.Right=5]="Right",e[e.Up=6]="Up",e[e.Down=7]="Down",e[e.SwitchCamera=8]="SwitchCamera",e}({}),ve=function(e){return e[e.None=0]="None",e[e.ApproveAnother=3]="ApproveAnother",e[e.Stop=5]="Stop",e}({}),fe=function(e){return e[e.Null=0]="Null",e[e.Normal=1]="Normal",e[e.VideoMode=2]="VideoMode",e[e.CameraMode=3]="CameraMode",e}({}),ye=function(e){return e[e.Null=0]="Null",e[e.VirtualBackground=1]="VirtualBackground",e[e.Mask=2]="Mask",e[e.VideoProcessor=3]="VideoProcessor",e}({}),Ee=function(e){return e.Computer="computer",e.Phone="phone",e}({}),_e=function(e){return e[e.Decline=0]="Decline",e[e.Approve=1]="Approve",e[e.CacheClean=2]="CacheClean",e}({}),Ie=function(e){return e.Unknown="unknown",e.Uninstalled="uninstalled",e.Installed="installed",e}({}),Ae=function(e){return e.Unlaunched="unlaunched",e.Launched="launched",e}({}),be=function(e){return e.Started="started",e.Ended="ended",e}({}),Ce=function(e){return e[e.Max=30]="Max",e[e.Min=10]="Min",e[e.Default=24]="Default",e}({}),Te=function(e){return e[e.Loading=1]="Loading",e[e.Done=2]="Done",e}({}),Re=function(e){return e.Browser="Browser",e.Zoom="Zoom",e}({}),Oe=function(e){return e.Denoise="backgroundNoiseSuppression",e.OriginalSound="originalSound",e}({}),De=function(e){return e[e.Undefined=0]="Undefined",e[e.WebGL=1]="WebGL",e[e.WebGPU=2]="WebGPU",e[e.WebGL2=3]="WebGL2",e}({}),we=function(e){return e[e.H323=1]="H323",e[e.SIP=2]="SIP",e}({}),Ne=function(e){return e[e.Success=0]="Success",e[e.Ringing=1]="Ringing",e[e.Timeout=2]="Timeout",e[e.Busy=101]="Busy",e[e.Fail=104]="Fail",e}({}),Me=function(e){return e[e.Exception=-1]="Exception",e[e.PermissionReset=-2]="PermissionReset",e[e.LostAccess=-3]="LostAccess",e}({}),Pe=function(e){return e[e.AudioConnectionFailed=101]="AudioConnectionFailed",e[e.AudioStreamEnded=102]="AudioStreamEnded",e[e.MicrophonePermissionReset=103]="MicrophonePermissionReset",e[e.AudioStreamFailed=104]="AudioStreamFailed",e[e.MicrophoneMuted=105]="MicrophoneMuted",e[e.AudioStreamMuted=106]="AudioStreamMuted",e[e.AudioPlaybackInterrupted=107]="AudioPlaybackInterrupted",e[e.VideoConnectionFailed=201]="VideoConnectionFailed",e[e.VideoStreamEnded=202]="VideoStreamEnded",e[e.CameraPermissionReset=203]="CameraPermissionReset",e[e.WebGlContextInvalid=204]="WebGlContextInvalid",e[e.WasmOutOfMemory=205]="WasmOutOfMemory",e[e.VideoStreamFailed=206]="VideoStreamFailed",e[e.VideoStreamMuted=207]="VideoStreamMuted",e[e.SharingStreamFailed=301]="SharingStreamFailed",e}({}),Le=function(e){return e[e.NoFallback=0]="NoFallback",e[e.FallbackToWasm=1]="FallbackToWasm",e}({}),ke=function(e){return e[e.WebRTCAudio=1]="WebRTCAudio",e[e.WebRTCVideo=2]="WebRTCVideo",e}({}),Ue=function(e){return e[e.WebRTCAudio=1]="WebRTCAudio",e[e.WebRTCAudio2=2]="WebRTCAudio2",e}({}),Ve=function(e){return e[e.BROWSER_NOT_SUPPORTED=-3]="BROWSER_NOT_SUPPORTED",e[e.DEVICE_UNSUPPORTED=-4]="DEVICE_UNSUPPORTED",e[e.OTHER_ERROR=-7]="OTHER_ERROR",e[e.DEVICE_UNVERIFIED=-8]="DEVICE_UNVERIFIED",e[e.FEATURE_DISABLED=-9]="FEATURE_DISABLED",e[e.FORCE_SAME_AV_STRATEGY=-10]="FORCE_SAME_AV_STRATEGY",e}({});const Be={[Ve.BROWSER_NOT_SUPPORTED]:"Your browser does not support WebRTC Video.",[Ve.DEVICE_UNSUPPORTED]:"WebRTC video cannot currently run on this environment. We are evaluating support for it in the future.",[Ve.OTHER_ERROR]:"An error occurred with WebRTC video.",[Ve.DEVICE_UNVERIFIED]:"WebRTC video has not been verified in this environment. We are evaluating it for future support.",[Ve.FEATURE_DISABLED]:"We disabled WebRTC video for this environment.",[Ve.FORCE_SAME_AV_STRATEGY]:"The same AV strategy is forced."};let He=function(e){return e[e.SELECT_MOUSE=0]="SELECT_MOUSE",e[e.SELECT_TOOL=1]="SELECT_TOOL",e[e.SELECT_ERASER=2]="SELECT_ERASER",e[e.UNDO=3]="UNDO",e[e.REDO=4]="REDO",e[e.CLEAR=5]="CLEAR",e[e.CLOSE_TOOL_BAR=6]="CLOSE_TOOL_BAR",e[e.UPDATE_PARAMS=7]="UPDATE_PARAMS",e[e.PAUSE_ANNOTATION=8]="PAUSE_ANNOTATION",e[e.SHOW_ANNOTATOR_NAME=9]="SHOW_ANNOTATOR_NAME",e[e.ANNOTATOR_ID_TO_NAME=10]="ANNOTATOR_ID_TO_NAME",e[e.ANNO_CANVAS_SIZE_UPDATE=11]="ANNO_CANVAS_SIZE_UPDATE",e[e.STAMP=12]="STAMP",e[e.SPOTLIGHT=13]="SPOTLIGHT",e[e.TEXTBOX=14]="TEXTBOX",e[e.SELECT_OBJ=15]="SELECT_OBJ",e[e.UPDATE_REMOTE_POSITION_INFO=16]="UPDATE_REMOTE_POSITION_INFO",e[e.UPDATE_VANISHING_TOOL_TIME=17]="UPDATE_VANISHING_TOOL_TIME",e}({}),je=function(e){return e[e.Mine=0]="Mine",e[e.Viewer=1]="Viewer",e[e.All=2]="All",e}({}),Fe=function(e){return e[e.None=0]="None",e[e.Pen=1]="Pen",e[e.Highlighter=2]="Highlighter",e[e.Spotlight=3]="Spotlight",e[e.Arrow=4]="Arrow",e[e.Eraser=7]="Eraser",e[e.Line=11]="Line",e[e.Arrow1=12]="Arrow1",e[e.Rectangle=14]="Rectangle",e[e.RectangleSemiFill=15]="RectangleSemiFill",e[e.Ellipse=18]="Ellipse",e[e.EllipseSemiFill=19]="EllipseSemiFill",e[e.DoubleArrow=20]="DoubleArrow",e[e.RectangleFill=21]="RectangleFill",e[e.EllipseFill=23]="EllipseFill",e[e.Diamond=24]="Diamond",e[e.StampArrow=25]="StampArrow",e[e.StampCheck=26]="StampCheck",e[e.StampX=27]="StampX",e[e.StampStar=31]="StampStar",e[e.StampHeart=32]="StampHeart",e[e.StampQuestionMark=33]="StampQuestionMark",e[e.VanishingPen=36]="VanishingPen",e[e.DiamondSemiFill=37]="DiamondSemiFill",e[e.DiamondFill=38]="DiamondFill",e[e.VanishingArrow=43]="VanishingArrow",e[e.VanishingDoubleArrow=44]="VanishingDoubleArrow",e[e.VanishingDiamond=45]="VanishingDiamond",e[e.VanishingEllipse=46]="VanishingEllipse",e[e.VanishingRectangle=47]="VanishingRectangle",e}({}),We=function(e){return e[e.White=4294967295]="White",e[e.Red=4294908185]="Red",e[e.Yellow=4294958642]="Yellow",e[e.Green=4286760838]="Green",e[e.Blue=4281240831]="Blue",e[e.LightPurple=4290017791]="LightPurple",e[e.Pink=4294916295]="Pink",e[e.Orange=4294937088]="Orange",e[e.LimeTreeGreen=4283029022]="LimeTreeGreen",e[e.IceBlue=4283554027]="IceBlue",e[e.DarkGrey=4278190080]="DarkGrey",e[e.DarkRed=4286513152]="DarkRed",e[e.Brown=4286006280]="Brown",e[e.DarkGreen=4278940200]="DarkGreen",e[e.DarkBlue=4279521219]="DarkBlue",e}({}),xe=function(e){return e[e.Nominal=0]="Nominal",e[e.Fair=1]="Fair",e[e.Serious=2]="Serious",e[e.Critical=3]="Critical",e}({}),$e=function(e){return e.FrontCamera="frontCam",e.RearCamera="rearCam",e}({}),Ge=function(e){return e[e.Success=0]="Success",e[e.Failed=1]="Failed",e}({});const ze=152,qe=[{name:"audio_simd.min.js",category:"audio",type:"worker",tag:"simd",alias:"audioSIMDWorkletPath"},{name:"audio.simd.wasm",category:"audio",type:"wasm",tag:"simd",alias:"audioSIMDWasm"},{name:"js_audio_process.min.js",category:"audio",type:"worker",tag:"",alias:"audioWorkerPath"},{name:"audio.encode.wasm",category:"audio",type:"wasm",tag:"",alias:"audioWasm"},{name:"js_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletPath"},{name:"js_audio_worklet_simd.min.js",category:"audio",type:"worklet",tag:"simd",alias:"audioWorkletSIMDPath"},{name:"js_audio_worklet_process.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletProcessPath"},{name:"js_sharing_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"sharingAudioWorkletPath"},{name:"js_audio_level_worklet_process.min.js",category:"audio",type:"worklet",tag:"",alias:"audioLevelWorkletPath"},{name:"video_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"videoMSIMDWorkerPath"},{name:"video.mtsimd.wasm",category:"video",type:"wasm",tag:"simd,thread,videoShare",alias:"videoMSIMDWasm"},{name:"video_m.min.js",category:"video",type:"worker",tag:"thread",alias:"videoMtWorkerPath"},{name:"video.mt.wasm",category:"video",type:"wasm",tag:"thread",alias:"videoMtWasm"},{name:"video_simd.min.js",category:"video",type:"worker",tag:"simd",alias:"videoSIMDWorkerPath"},{name:"video.simd.wasm",category:"video",type:"wasm",tag:"simd",alias:"videoSIMDWasm"},{name:"video_s.min.js",category:"video",type:"worker",tag:"",alias:"videoWorkerPath"},{name:"video.decode.wasm",category:"video",type:"wasm",tag:"",alias:"videoWasm"},{name:"video_share_mtsimd.min.js",category:"video",type:"worker",tag:"videoShare",alias:"vsmiworkerpath"},{name:"sharing_mtsimd.min.js",category:"sharing",type:"worker",tag:"simd,thread",alias:"sharingMSIMDWorkerPath"},{name:"sharing_m.min.js",category:"sharing",type:"worker",tag:"thread",alias:"sharingMtWorkerPath"},{name:"sharing_simd.min.js",category:"sharing",type:"worker",tag:"simd",alias:"sharingSIMDWorkerPath"},{name:"sharing_s.min.js",category:"sharing",type:"worker",tag:"",alias:"sharingWorkerPath"},{name:"net_thread.min.js",category:"common",type:"worker",tag:"thread",alias:"netThreadPath"}];class Ke{constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.mediaWorkersPath=void 0,this.mediaOptions=void 0,this.inProgress=void 0,this.callbackList=[]}static getInstance(){return void 0===this.agentInstance&&(this.agentInstance=new Ke),this.agentInstance}static isSupportMultipleView(){var e;return null===(e=window.JsMediaSDK_Instance)||void 0===e?void 0:e.util.isSupportMultiViewAPI()}static getMaxCountRender(e,t,r){var o;const n=r?{disableRenderLimits:!0}:t;return null===(o=window.JsMediaSDK_Instance)||void 0===o?void 0:o.util.getMaxCountRender(e,n)}static initVideoPlayer(e){var t;return null===(t=window.JsMediaSDK_Instance)||void 0===t?void 0:t.initVideoPlayer(e)}init(e,t,r){var o,n,i,s;!this.instance&&window.JsMediaSDK_Instance&&(this.instance=new window.JsMediaSDK_Instance({...null!=t?t:{},mediaSDKConfig:{mediaSDKCDNPath:e}})),this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this),this.mediaOptions=t,null===(o=this.instance)||void 0===o||o.setProps({callback:this.onMediaSDKCallback,isPreviewMode:!0,meetingParams:{cid:"",userId:0,rwgHost:"",nginxHost:"",abToken:"",confId:"",e2eEncrypt:!0,enableWebtransport:!1,webtransportPort:0,rwgToMediaSDKConfig:{},webrtcMode:0},mediaParams:{videoDecodeThreadNum:null!==(n=Ke.getMaxCountRender(!1,null===(i=this.mediaOptions)||void 0===i?void 0:i.enableMultiDecodeVideoWithoutSAB,r))&&void 0!==n?n:1,rendererType:1,isEnableHD:!0,isEnableHW:!0}}),null===(s=this.instance)||void 0===s||s.initVideoEncode(),this.inProgress=!0}onMediaSDKCallback(e,t){this.callbackList.length>0&&this.callbackList.forEach((r=>r(e,t)))}registerCallback(e){this.callbackList.push(e)}unregisterCallback(e){this.callbackList=this.callbackList.filter((t=>t!==e))}async destroy(){var e;this.callbackList=[],await(null===(e=this.instance)||void 0===e?void 0:e.destroy()),this.instance=null,this.inProgress=!1}disconnect(){var e,t;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(17,{}),null===(t=this.instance)||void 0===t||t.JsMediaSDK_UnInit()}startVirtualBackgroundSetting(e,t,r,o,n,i,s=!1,a){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(91,{canvas:e,bgdom:t,width:n,height:i,ssid:0,VideoSelectValue:"default"===o?null:o,disableOriginalRatio:s,usingFacingMode:["user","environment"].includes(o),id:a})}updateVirtualBackgroundImage(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(92,{bgdom:e})}stopVirtualBackgroundSetting(e=!1){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(93,{isSwitch:e})}startMaskSetting(e,t,r,o,n,i,s,a,u){var d;null===(d=this.instance)||void 0===d||d.Notify_MeidaSDK(62,{canvas:e,maskdom:null,bgdom:null,dx:0,dy:0,dWidth:170,dHeight:170,width:1280,height:720,ssid:0,originWidth:379,originHeight:213,VideoSelectValue:"default"===n?null:n,usingFacingMode:["user","environment"].includes(n)})}stopMaskSetting(e=!1){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(65,{isSwitch:e})}}Ke.agentInstance=void 0;const Je="INVALID_OPERATION",Qe="INTERNAL_ERROR",Ye="OPERATION_TIMEOUT",Ze="INSUFFICIENT_PRIVILEGES",Xe="IMPROPER_MEETING_STATE",et="INVALID_PARAMETERS",tt="OPERATION_CANCELLED";var rt=function(e,t){return rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},rt(e,t)};function ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}rt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var nt=function(){return nt=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},nt.apply(this,arguments)};function it(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function st(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function at(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s}function ut(e,t){for(var r=0,o=t.length,n=e.length;r<o;r++,n++)e[n]=t[r];return e}function dt(e){return this instanceof dt?(this.v=e,this):new dt(e)}function ct(e){return"function"==typeof e}function lt(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pt=lt((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function ht(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var mt=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,o,n;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var s=st(i),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else i.remove(this);var u=this.initialTeardown;if(ct(u))try{u()}catch(e){n=e instanceof pt?e.errors:[e]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var c=st(d),l=c.next();!l.done;l=c.next()){var p=l.value;try{vt(p)}catch(e){n=null!=n?n:[],e instanceof pt?n=ut(ut([],at(n)),at(e.errors)):n.push(e)}}}catch(e){r={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}}if(n)throw new pt(n)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)vt(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ht(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&ht(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),gt=mt.EMPTY;function St(e){return e instanceof mt||e&&"closed"in e&&ct(e.remove)&&ct(e.add)&&ct(e.unsubscribe)}function vt(e){ct(e)?e():e.unsubscribe()}var ft=void 0;function yt(e){!function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];setTimeout.apply(void 0,ut([e,t],at(r)))}((function(){throw e}))}function Et(){}function _t(e){e()}var It=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,St(t)&&t.add(r)):r.destination=Tt,r}return ot(t,e),t.create=function(e,t,r){return new bt(e,t,r)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(mt),At=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Ct(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Ct(e)}else Ct(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Ct(e)}},e}(),bt=function(e){function t(t,r,o){var n,i=e.call(this)||this;return n=ct(t)||!t?{next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=o?o:void 0}:t,i.destination=new At(n),i}return ot(t,e),t}(It);function Ct(e){yt(e)}var Tt={closed:!0,next:Et,error:function(e){throw e},complete:Et},Rt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ot(e){return e}function Dt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return wt(e)}function wt(e){return 0===e.length?Ot:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Nt=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var o,n=this,i=(o=e)&&o instanceof It||function(e){return e&&ct(e.next)&&ct(e.error)&&ct(e.complete)}(o)&&St(o)?e:new bt(e,t,r);return _t((function(){var e=n,t=e.operator,r=e.source;i.add(t?t.call(i,r):r?n._subscribe(i):n._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=Mt(t))((function(t,o){var n=new bt({next:function(t){try{e(t)}catch(e){o(e),n.unsubscribe()}},error:o,complete:t});r.subscribe(n)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Rt]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return wt(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Mt(e))((function(e,r){var o;t.subscribe((function(e){return o=e}),(function(e){return r(e)}),(function(){return e(o)}))}))},e.create=function(t){return new e(t)},e}();function Mt(e){var t;return null!==(t=null!=e?e:ft)&&void 0!==t?t:Promise}function Pt(e){return function(t){if(function(e){return ct(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Lt(e,t,r,o,n){return new Ut(e,t,r,o,n)}var kt,Ut=function(e){function t(t,r,o,n,i,s){var a=e.call(this,t)||this;return a.onFinalize=i,a.shouldUnsubscribe=s,a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=n?function(e){try{n(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=o?function(){try{o()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return ot(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(It),Vt=lt((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Bt=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return ot(t,e),t.prototype.lift=function(e){var t=new Ht(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Vt},t.prototype.next=function(e){var t=this;_t((function(){var r,o;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var n=st(t.currentObservers),i=n.next();!i.done;i=n.next())i.value.next(e)}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}}}))},t.prototype.error=function(e){var t=this;_t((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}}))},t.prototype.complete=function(){var e=this;_t((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this,o=r.hasError,n=r.isStopped,i=r.observers;return o||n?gt:(this.currentObservers=null,i.push(e),new mt((function(){t.currentObservers=null,ht(i,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,o=t.thrownError,n=t.isStopped;r?e.error(o):n&&e.complete()},t.prototype.asObservable=function(){var e=new Nt;return e.source=this,e},t.create=function(e,t){return new Ht(e,t)},t}(Nt),Ht=function(e){function t(t,r){var o=e.call(this)||this;return o.destination=t,o.source=r,o}return ot(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:gt},t}(Bt),jt=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return ot(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){var e=this,t=e.hasError,r=e.thrownError,o=e._value;if(t)throw r;return this._throwIfClosed(),o},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Bt),Ft=function(){return Date.now()},Wt=function(e){function t(t,r){return e.call(this)||this}return ot(t,e),t.prototype.schedule=function(e,t){return this},t}(mt),xt=function(e){function t(t,r){var o=e.call(this,t,r)||this;return o.scheduler=t,o.work=r,o.pending=!1,o}return ot(t,e),t.prototype.schedule=function(e,t){var r;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var o=this.id,n=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(n,o,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return setInterval.apply(void 0,ut([e,t],at(r)))}(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&function(e){clearInterval(e)}(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,o=!1;try{this.work(e)}catch(e){o=!0,r=e||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,o=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,ht(o,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Wt),$t=1,Gt={};function zt(e){return e in Gt&&(delete Gt[e],!0)}var qt=function(e){var t=$t++;return Gt[t]=!0,kt||(kt=Promise.resolve()),kt.then((function(){return zt(t)&&e()})),t},Kt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qt.apply(void 0,ut([],at(e)))},Jt=function(e){return function(e){zt(e)}(e)},Qt=function(e){function t(t,r){var o=e.call(this,t,r)||this;return o.scheduler=t,o.work=r,o}return ot(t,e),t.prototype.requestAsyncId=function(t,r,o){return void 0===o&&(o=0),null!==o&&o>0?e.prototype.requestAsyncId.call(this,t,r,o):(t.actions.push(this),t._scheduled||(t._scheduled=Kt(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,r,o){var n;if(void 0===o&&(o=0),null!=o?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,o);var i=t.actions;null!=r&&(null===(n=i[i.length-1])||void 0===n?void 0:n.id)!==r&&(Jt(r),t._scheduled===r&&(t._scheduled=void 0))},t}(xt),Yt=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=Ft,e}(),Zt=function(e){function t(t,r){void 0===r&&(r=Yt.now);var o=e.call(this,t,r)||this;return o.actions=[],o._active=!1,o}return ot(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(Yt),Xt=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ot(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var r,o=this.actions;e=e||o.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=o[0])&&e.id===t&&o.shift());if(this._active=!1,r){for(;(e=o[0])&&e.id===t&&o.shift();)e.unsubscribe();throw r}},t}(Zt))(Qt),er=new Zt(xt),tr=er,rr=function(e){function t(t,r){var o=e.call(this,t,r)||this;return o.scheduler=t,o.work=r,o}return ot(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,o){return void 0===o&&(o=0),null!=o&&o>0||null==o&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,o):(t.flush(this),0)},t}(xt),or=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ot(t,e),t}(Zt))(rr),nr=new Nt((function(e){return e.complete()}));function ir(e){return e&&ct(e.schedule)}function sr(e){return e[e.length-1]}function ar(e){return ct(sr(e))?e.pop():void 0}function ur(e){return ir(sr(e))?e.pop():void 0}var dr=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function cr(e){return ct(null==e?void 0:e.then)}function lr(e){return ct(e[Rt])}function pr(e){return Symbol.asyncIterator&&ct(null==e?void 0:e[Symbol.asyncIterator])}function hr(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var mr,gr="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Sr(e){return ct(null==e?void 0:e[gr])}function vr(e){return function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=r.apply(e,t||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(e){n[e]&&(o[e]=function(t){return new Promise((function(r,o){i.push([e,t,r,o])>1||a(e,t)}))})}function a(e,t){try{!function(e){e.value instanceof dt?Promise.resolve(e.value.v).then(u,d):c(i[0][2],e)}(n[e](t))}catch(e){c(i[0][3],e)}}function u(e){a("next",e)}function d(e){a("throw",e)}function c(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}(this,arguments,(function(){var t,r,o;return it(this,(function(n){switch(n.label){case 0:t=e.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,dt(t.read())];case 3:return r=n.sent(),o=r.value,r.done?[4,dt(void 0)]:[3,5];case 4:return[2,n.sent()];case 5:return[4,dt(o)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function fr(e){return ct(null==e?void 0:e.getReader)}function yr(e){if(e instanceof Nt)return e;if(null!=e){if(lr(e))return n=e,new Nt((function(e){var t=n[Rt]();if(ct(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(dr(e))return o=e,new Nt((function(e){for(var t=0;t<o.length&&!e.closed;t++)e.next(o[t]);e.complete()}));if(cr(e))return r=e,new Nt((function(e){r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,yt)}));if(pr(e))return Er(e);if(Sr(e))return t=e,new Nt((function(e){var r,o;try{for(var n=st(t),i=n.next();!i.done;i=n.next()){var s=i.value;if(e.next(s),e.closed)return}}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}e.complete()}));if(fr(e))return Er(vr(e))}var t,r,o,n;throw hr(e)}function Er(e){return new Nt((function(t){(function(e,t){var r,o,n,i;return function(e,t,r,o){return new(r||(r=Promise))((function(t,n){function i(e){try{a(o.next(e))}catch(e){n(e)}}function s(e){try{a(o.throw(e))}catch(e){n(e)}}function a(e){var o;e.done?t(e.value):(o=e.value,o instanceof r?o:new r((function(e){e(o)}))).then(i,s)}a((o=o.apply(e,[])).next())}))}(this,0,void 0,(function(){var s,a;return it(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=st(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(r){t[r]=e[r]&&function(t){return new Promise((function(o,n){!function(e,t,r,o){Promise.resolve(o).then((function(t){e({value:t,done:r})}),t)}(o,n,(t=e[r](t)).done,t.value)}))}}}(e),u.label=1;case 1:return[4,r.next()];case 2:if((o=u.sent()).done)return[3,4];if(s=o.value,t.next(s),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=u.sent(),n={error:a},[3,11];case 6:return u.trys.push([6,,9,10]),o&&!o.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function _r(e,t,r,o,n){void 0===o&&(o=0),void 0===n&&(n=!1);var i=t.schedule((function(){r(),n?e.add(this.schedule(null,o)):this.unsubscribe()}),o);if(e.add(i),!n)return i}function Ir(e,t){return void 0===t&&(t=0),Pt((function(r,o){r.subscribe(Lt(o,(function(r){return _r(o,e,(function(){return o.next(r)}),t)}),(function(){return _r(o,e,(function(){return o.complete()}),t)}),(function(r){return _r(o,e,(function(){return o.error(r)}),t)})))}))}function Ar(e,t){return void 0===t&&(t=0),Pt((function(r,o){o.add(e.schedule((function(){return r.subscribe(o)}),t))}))}function br(e,t){if(!e)throw new Error("Iterable cannot be null");return new Nt((function(r){_r(r,t,(function(){var o=e[Symbol.asyncIterator]();_r(r,t,(function(){o.next().then((function(e){e.done?r.complete():r.next(e.value)}))}),0,!0)}))}))}function Cr(e,t){return t?function(e,t){if(null!=e){if(lr(e))return function(e,t){return yr(e).pipe(Ar(t),Ir(t))}(e,t);if(dr(e))return function(e,t){return new Nt((function(r){var o=0;return t.schedule((function(){o===e.length?r.complete():(r.next(e[o++]),r.closed||this.schedule())}))}))}(e,t);if(cr(e))return function(e,t){return yr(e).pipe(Ar(t),Ir(t))}(e,t);if(pr(e))return br(e,t);if(Sr(e))return function(e,t){return new Nt((function(r){var o;return _r(r,t,(function(){o=e[gr](),_r(r,t,(function(){var e,t,n;try{t=(e=o.next()).value,n=e.done}catch(e){return void r.error(e)}n?r.complete():r.next(t)}),0,!0)})),function(){return ct(null==o?void 0:o.return)&&o.return()}}))}(e,t);if(fr(e))return function(e,t){return br(vr(e),t)}(e,t)}throw hr(e)}(e,t):yr(e)}function Tr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Cr(e,ur(e))}function Rr(e,t){var r=ct(e)?e:function(){return e};return new Nt((function(e){return e.error(r())}))}!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(mr||(mr={}));var Or=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){return Dr(this,e)},e.prototype.do=function(e,t,r){var o=this,n=o.kind,i=o.value,s=o.error;return"N"===n?null==e?void 0:e(i):"E"===n?null==t?void 0:t(s):null==r?void 0:r()},e.prototype.accept=function(e,t,r){var o;return ct(null===(o=e)||void 0===o?void 0:o.next)?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){var e=this,t=e.kind,r=e.value,o=e.error,n="N"===t?Tr(r):"E"===t?Rr((function(){return o})):"C"===t?nr:0;if(!n)throw new TypeError("Unexpected notification kind "+t);return n},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function Dr(e,t){var r,o,n,i=e,s=i.kind,a=i.value,u=i.error;if("string"!=typeof s)throw new TypeError('Invalid notification, missing "kind"');"N"===s?null===(r=t.next)||void 0===r||r.call(t,a):"E"===s?null===(o=t.error)||void 0===o||o.call(t,u):null===(n=t.complete)||void 0===n||n.call(t)}var wr=lt((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function Nr(e,t){return new Promise((function(t,r){var o,n=!1;e.subscribe({next:function(e){o=e,n=!0},error:r,complete:function(){n?t(o):r(new wr)}})}))}function Mr(e,t){return new Promise((function(t,r){var o=new bt({next:function(e){t(e),o.unsubscribe()},error:r,complete:function(){r(new wr)}});e.subscribe(o)}))}function Pr(e){return e instanceof Date&&!isNaN(e)}var Lr=lt((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function kr(e,t){var r=Pr(e)?{first:e}:"number"==typeof e?{each:e}:e,o=r.first,n=r.each,i=r.with,s=void 0===i?Ur:i,a=r.scheduler,u=void 0===a?er:a,d=r.meta,c=void 0===d?null:d;if(null==o&&null==n)throw new TypeError("No timeout provided.");return Pt((function(e,t){var r,i,a=null,d=0,l=function(e){i=_r(t,u,(function(){try{r.unsubscribe(),yr(s({meta:c,lastValue:a,seen:d})).subscribe(t)}catch(e){t.error(e)}}),e)};r=e.subscribe(Lt(t,(function(e){null==i||i.unsubscribe(),d++,t.next(a=e),n>0&&l(n)}),void 0,void 0,(function(){(null==i?void 0:i.closed)||null==i||i.unsubscribe(),a=null}))),!d&&l(null!=o?"number"==typeof o?o:+o-u.now():n)}))}function Ur(e){throw new Lr(e)}function Vr(e,t){return Pt((function(r,o){var n=0;r.subscribe(Lt(o,(function(r){o.next(e.call(t,r,n++))})))}))}var Br=Array.isArray;function Hr(e){return Vr((function(t){return function(e,t){return Br(t)?e.apply(void 0,ut([],at(t))):e(t)}(e,t)}))}var jr=Array.isArray,Fr=Object.getPrototypeOf,Wr=Object.prototype,xr=Object.keys;function $r(e,t,r,o,n,i,s,a){var u=[],d=0,c=0,l=!1,p=function(){!l||u.length||d||t.complete()},h=function(e){return d<o?m(e):u.push(e)},m=function(e){i&&t.next(e),d++;var n=!1;yr(r(e,c++)).subscribe(Lt(t,(function(e){i?h(e):t.next(e)}),(function(){n=!0}),void 0,(function(){if(n)try{d--;for(var e=function(){var e=u.shift();s||m(e)};u.length&&d<o;)e();p()}catch(e){t.error(e)}})))};return e.subscribe(Lt(t,h,(function(){l=!0,p()}))),function(){}}function Gr(e,t,r){return void 0===r&&(r=1/0),ct(t)?Gr((function(r,o){return Vr((function(e,n){return t(r,e,o,n)}))(yr(e(r,o)))}),r):("number"==typeof t&&(r=t),Pt((function(t,o){return $r(t,o,e,r)})))}function zr(e){return void 0===e&&(e=1/0),Gr(Ot,e)}function qr(){return zr(1)}function Kr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qr()(Cr(e,ur(e)))}function Jr(e){return new Nt((function(t){yr(e()).subscribe(t)}))}function Qr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ar(e),o=function(e){if(1===e.length){var t=e[0];if(jr(t))return{args:t,keys:null};if((o=t)&&"object"==typeof o&&Fr(o)===Wr){var r=xr(t);return{args:r.map((function(e){return t[e]})),keys:r}}}var o;return{args:e,keys:null}}(e),n=o.args,i=o.keys,s=new Nt((function(e){var t=n.length;if(t)for(var r=new Array(t),o=t,s=t,a=function(t){var a=!1;yr(n[t]).subscribe(Lt(e,(function(e){a||(a=!0,s--),r[t]=e}),(function(){return o--}),void 0,(function(){o&&a||(s||e.next(i?function(e,t){return e.reduce((function(e,r,o){return e[r]=t[o],e}),{})}(i,r):r),e.complete())})))},u=0;u<t;u++)a(u);else e.complete()}));return r?s.pipe(Hr(r)):s}var Yr=["addListener","removeListener"],Zr=["addEventListener","removeEventListener"],Xr=["on","off"];function eo(e,t,r,o){if(ct(r)&&(o=r,r=void 0),o)return eo(e,t,r).pipe(Hr(o));var n=at(function(e){return ct(e.addEventListener)&&ct(e.removeEventListener)}(e)?Zr.map((function(o){return function(n){return e[o](t,n,r)}})):function(e){return ct(e.addListener)&&ct(e.removeListener)}(e)?Yr.map(to(e,t)):function(e){return ct(e.on)&&ct(e.off)}(e)?Xr.map(to(e,t)):[],2),i=n[0],s=n[1];if(!i&&dr(e))return Gr((function(e){return eo(e,t,r)}))(yr(e));if(!i)throw new TypeError("Invalid event target");return new Nt((function(e){var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.next(1<t.length?t:t[0])};return i(t),function(){return s(t)}}))}function to(e,t){return function(r){return function(o){return e[r](t,o)}}}function ro(e,t,r){return r?ro(e,t).pipe(Hr(r)):new Nt((function(r){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1===e.length?e[0]:e)},n=e(o);return ct(t)?function(){return t(o,n)}:void 0}))}function oo(e,t,r){void 0===e&&(e=0),void 0===r&&(r=tr);var o=-1;return null!=t&&(ir(t)?r=t:o=t),new Nt((function(t){var n=Pr(e)?+e-r.now():e;n<0&&(n=0);var i=0;return r.schedule((function(){t.closed||(t.next(i++),0<=o?this.schedule(void 0,o):t.complete())}),n)}))}function no(e,t){return void 0===e&&(e=0),void 0===t&&(t=er),e<0&&(e=0),oo(e,e,t)}function io(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ur(e),o=function(e){return"number"==typeof sr(e)?e.pop():1/0}(e),n=e;return n.length?1===n.length?yr(n[0]):zr(o)(Cr(n,r)):nr}var so=new Nt(Et),ao=Array.isArray;function uo(e,t){return function(r,o){return!e.call(t,r,o)}}function co(e,t){return Pt((function(r,o){var n=0;r.subscribe(Lt(o,(function(r){return e.call(t,r,n++)&&o.next(r)})))}))}function lo(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 1===(t=1===(e=t).length&&ao(e[0])?e[0]:e).length?yr(t[0]):new Nt(function(e){return function(t){for(var r=[],o=function(o){r.push(yr(e[o]).subscribe(Lt(t,(function(e){if(r){for(var n=0;n<r.length;n++)n!==o&&r[n].unsubscribe();r=null}t.next(e)}))))},n=0;r&&!t.closed&&n<e.length;n++)o(n)}}(t))}function po(e){return Pt((function(t,r){var o,n=null,i=!1;n=t.subscribe(Lt(r,void 0,void 0,(function(s){o=yr(e(s,po(e)(t))),n?(n.unsubscribe(),n=null,o.subscribe(r)):i=!0}))),i&&(n.unsubscribe(),n=null,o.subscribe(r))}))}function ho(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ur(e);return Pt((function(t,o){qr()(Cr(ut([t],at(e)),r)).subscribe(o)}))}function mo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ho.apply(void 0,ut([],at(e)))}function go(e){return e<=0?function(){return nr}:Pt((function(t,r){var o=0;t.subscribe(Lt(r,(function(t){++o<=e&&(r.next(t),e<=o&&r.complete())})))}))}function So(){return Pt((function(e,t){e.subscribe(Lt(t,Et))}))}function vo(e){return Vr((function(){return e}))}function fo(e,t){return Gr((function(t,r){return yr(e(t,r)).pipe(go(1),vo(t))}))}function yo(e,t){void 0===t&&(t=er);var r=oo(e,t);return fo((function(){return r}))}function Eo(e,t,r){return void 0===r&&(r=1/0),ct(t)?Gr((function(){return e}),t,r):Gr((function(){return e}),r)}function _o(e,t){return Pt(function(e,t,r){return function(o,n){var i=r,s=t,a=0;o.subscribe(Lt(n,(function(t){var r=a++;s=i?e(s,t,r):(i=!0,t),n.next(s)}),undefined))}}(e,t,arguments.length>=2))}function Io(e){return Pt((function(t,r){var o=!1,n=0;t.subscribe(Lt(r,(function(t){return(o||(o=!e(t,n++)))&&r.next(t)})))}))}function Ao(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ur(e);return Pt((function(t,o){(r?Kr(e,t,r):Kr(e,t)).subscribe(o)}))}function bo(e,t){return Pt((function(r,o){var n=null,i=0,s=!1,a=function(){return s&&!n&&o.complete()};r.subscribe(Lt(o,(function(r){null==n||n.unsubscribe();var s=0,u=i++;yr(e(r,u)).subscribe(n=Lt(o,(function(e){return o.next(t?t(r,e,u,s++):e)}),(function(){n=null,a()})))}),(function(){s=!0,a()})))}))}function Co(e){return Pt((function(t,r){yr(e).subscribe(Lt(r,(function(){return r.complete()}),Et)),!r.closed&&t.subscribe(r)}))}function To(e,t){return void 0===t&&(t=!1),Pt((function(r,o){var n=0;r.subscribe(Lt(o,(function(r){var i=e(r,n++);(i||t)&&o.next(r),!i&&o.complete()})))}))}function Ro(e,t,r){var o=ct(e)||t||r?{next:e,error:t,complete:r}:e;return o?Pt((function(e,t){var r;null===(r=o.subscribe)||void 0===r||r.call(o);var n=!0;e.subscribe(Lt(t,(function(e){var r;null===(r=o.next)||void 0===r||r.call(o,e),t.next(e)}),(function(){var e;n=!1,null===(e=o.complete)||void 0===e||e.call(o),t.complete()}),(function(e){var r;n=!1,null===(r=o.error)||void 0===r||r.call(o,e),t.error(e)}),(function(){var e,t;n&&(null===(e=o.unsubscribe)||void 0===e||e.call(o)),null===(t=o.finalize)||void 0===t||t.call(o)})))})):Ot}function Oo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ar(e);return Pt((function(t,o){for(var n=e.length,i=new Array(n),s=e.map((function(){return!1})),a=!1,u=function(t){yr(e[t]).subscribe(Lt(o,(function(e){i[t]=e,a||s[t]||(s[t]=!0,(a=s.every(Ot))&&(s=null))}),Et))},d=0;d<n;d++)u(d);t.subscribe(Lt(o,(function(e){if(a){var t=ut([e],at(i));o.next(r?r.apply(void 0,ut([],at(t))):t)}})))}))}const Do="ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",wo="UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",No="ADD_USER_PARTICIPANT_ATTRIBUTE",Mo="UPDATE_USER_PARTICIPANT_ATTRIBUTE",Po="REMOVE_USER_PARTICIPANT_ATTRIBUTE",Lo="UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",ko="REMOVE_WEBINAR_ATTENDEE_ATTRIBUTE";let Uo=function(e){return e.Failover="failover",e.OnHold="on hold",e.Promote="promote",e.Depromote="depromote",e.JoinBreakoutRoom="join breakout room",e.MoveToBreakoutRoom="move to breakout room",e.BackToMainSession="back to main session",e}({});const Vo="js_media.min.js";let Bo=function(e){return e.CDN="CDN",e.Global="Global",e.CN="CN",e}({}),Ho=function(e){return e.Connected="Connected",e.Reconnecting="Reconnecting",e.Closed="Closed",e.Fail="Fail",e}({}),jo=function(e){return e.Initial="initial",e.Joined="joined",e.Closed="closed",e}({}),Fo=function(e){return e.AudioDecodeInWorklet="M:6;V:3",e.VideoWebRTCEnable="M:10;V:6",e.VideoHalfWebRTCEnable="M:11;V:7",e.WebGL2Render="M:20;V:8",e.WebGPURender="M:21;V:9",e.ZMKFromRWG="M:19;V:10",e}({}),Wo=function(e){return e[e.NormalCase=-1]="NormalCase",e[e.NoHeartbeat=0]="NoHeartbeat",e[e.NoHeartbeatMChannel=1]="NoHeartbeatMChannel",e[e.NetworkChange=2]="NetworkChange",e[e.NotifyUiFailover=3]="NotifyUiFailover",e[e.InvalidParameters=4]="InvalidParameters",e[e.OnError=5]="OnError",e[e.OnErrorMChannel=6]="OnErrorMChannel",e[e.Disconnect=7]="Disconnect",e[e.DisconnectMChannel=8]="DisconnectMChannel",e[e.DisconnectXmpp=9]="DisconnectXmpp",e[e.RefreshPage=10]="RefreshPage",e[e.NotifyUIWMSCFailover=11]="NotifyUIWMSCFailover",e[e.NotifyUIWMSCWSSDisconnected=12]="NotifyUIWMSCWSSDisconnected",e[e.OnErrorXmppChannel=15]="OnErrorXmppChannel",e}({});const xo="JOIN_MEETING_SUCCESS",$o="JOIN_MEETING_FAILED",Go="RECONNECTING_MEETING",zo="LEAVING_MEETING",qo="MEETING_IN_WAITING_ROOM",Ko="UPDATE_MEETING_ATTRIBUTE",Jo="SHARE_PRONOUN_TYPE_UPDATE",Qo="MEETING_RLB_TP_READY_STATUS_CHANGE";var Yo=function(e){return e.ConnectionChange="connection-change",e.OnHoldChange="on-hold-change",e.UserAdd="user-added",e.UserUpdate="user-updated",e.UserRemove="user-removed",e.AttendeeUpdate="attendee-updated",e.MeetingAttributeUpdate="meeting-attribute-updated",e.PromoteAttendeeConsent="promote-attendee-consent",e.ActiveAppsUpdate="active-apps-updated",e.SharePronounTypeUpdate="share-pronoun-type-update",e}(Yo||{});const Zo={JoinMeeting:{success:Do,fail:[$o]}},Xo={[Yo.ConnectionChange]:[{event:xo,payload:()=>({state:Ho.Connected})},{event:$o,payload:e=>({state:Ho.Fail,...e})},{event:Go,payload:e=>({state:Ho.Reconnecting,...e})},{event:zo,payload:e=>({state:Ho.Closed,...e})}],[Yo.OnHoldChange]:[{event:qo,payload:e=>({isOnHold:e})}],[Yo.UserAdd]:[{event:Do,payload:e=>[e]},{event:No,payload:e=>e}],[Yo.UserUpdate]:[{event:wo,payload:e=>[e]},{event:Mo,payload:e=>e}],[Yo.UserRemove]:[{event:Po,payload:e=>e}],[Yo.AttendeeUpdate]:[{event:Lo,payload:e=>e},{event:ko,payload:e=>e}],[Yo.MeetingAttributeUpdate]:[{event:Ko,payload:e=>"bNoHostTimeOut"in e?{isHostLost:e.bNoHostTimeOut}:null}],[Yo.PromoteAttendeeConsent]:[{event:"MEETING_WEBINAR_PROMOTE_CONSENT_REQ",payload:({req_id:e,sender_id:t})=>({reqId:e,senderId:t})}],[Yo.ActiveAppsUpdate]:[{event:"ACTIVE_APPS_UPDATE",payload:()=>{}}],[Yo.SharePronounTypeUpdate]:[{event:Jo,payload:e=>e}]},en="LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",tn="LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",rn="LIVE_TRANSCRIPTION_STATUS_CHANGE",on="LIVE_TRANSCRIPTION_HOST_DISABLE_CHANGE",nn="LIVE_TRANSCRIPTION_LANGUAGE_LOCK_CHANGE",sn={"caption-message":[{event:en,payload:e=>e}],"caption-status":[{event:tn,payload:e=>e}],"caption-enable":[{event:rn,payload:e=>e}],"caption-host-disable":[{event:on,payload:e=>e}],"caption-language-lock":[{event:nn,payload:e=>e}]},an="CHAT_RECEIVE_MESSAGE_EVENTS",un="CHAT_PRIVILEGE_CHANGE",dn="CHAT_MESSAGE_RESPONSE",cn="CHAT_DELETE_MESSAGE_REPONSE",ln="CHAT_FILE_CHAT_UPLOAD_PROGRESS",pn="CHAT_FILE_CHAT_DOWNLOAD_PROGRESS";let hn=function(e){return e.ChatOnMessage="chat-on-message",e.ChatPrivilegeChange="chat-privilege-change",e.ChatDeleteMessage="chat-delete-message",e.ChatFileUploadProgress="chat-file-upload-progress",e.ChatFileDownloadProgress="chat-file-download-progress",e}({});const mn={[hn.ChatOnMessage]:[{event:an,payload:e=>e}],[hn.ChatPrivilegeChange]:[{event:un,payload:e=>e}],[hn.ChatDeleteMessage]:[{event:cn,payload:e=>e}],[hn.ChatFileUploadProgress]:[{event:ln,payload:e=>e}],[hn.ChatFileDownloadProgress]:[{event:pn,payload:e=>e}]},gn="COMMAND_RECEIVE_MESSAGE_EVENTS",Sn="COMMAND_STATUS_EVENTS";let vn=function(e){return e.CommandChannelStatus="command-channel-status",e.CommandChannelMessage="command-channel-message",e}({});const fn={[vn.CommandChannelStatus]:[{event:Sn,payload:e=>e}],[vn.CommandChannelMessage]:[{event:gn,payload:e=>e}]};let yn=function(e){return e.Recording="Recording",e.Paused="Paused",e.Stopped="Stopped",e.Ask="Ask",e.Accept="Accept",e.Decline="Decline",e}({}),En=function(e){return e[e.None=0]="None",e[e.Init=1]="Init",e[e.Start=2]="Start",e[e.Pause=3]="Pause",e[e.Stop=4]="Stop",e}({}),_n=function(e){return e[e.Stop=0]="Stop",e[e.Start=1]="Start",e[e.Pause=2]="Pause",e}({}),In=function(e){return e[e.None=0]="None",e[e.Deny=1]="Deny",e[e.Allow=2]="Allow",e}({}),An=function(e){return e[e.None=0]="None",e[e.DenyAllRequest=1]="DenyAllRequest",e[e.AllowAllRequest=2]="AllowAllRequest",e}({});const bn="CLOUD_RECORDING_STATUS_CHANGE",Cn="CLOUD_RECORDING_ISO_STATUS_CHANGE",Tn="LOCAL_RECORDING_CHANGE",Rn="LOCAL_RECORDING_PERMISSION_CHANGE",On="RECORDING_FOR_IQ_STATUS_CHANGE",Dn="RECORDING_FOR_IQ_OPERATION_CHANGE";let wn=function(e){return e.RecordingChange="recording-change",e.IndividualRecordingChange="individual-recording-change",e.LocalRecordingChange="local-recording-change",e.LocalRecordingPermissionChange="local-recording-permission-change",e.MediaCaptureStatusChange="media-capture-status-change",e.MediaCapturePermissionChange="media-capture-permission-change",e.RecordingIqChange="recording-iq-change",e}({});const Nn={[wn.RecordingChange]:[{event:bn,payload:e=>{const{cmrServerStatus:t}=e;return t===En.Start?yn.Recording:t===En.Pause?yn.Paused:yn.Stopped}}],[wn.IndividualRecordingChange]:[{event:Cn,payload:e=>e}],[wn.LocalRecordingChange]:[{event:Tn,payload:e=>e}],[wn.LocalRecordingPermissionChange]:[{event:Rn,payload:e=>e}],[wn.MediaCaptureStatusChange]:[{event:Tn,payload:e=>e}],[wn.MediaCapturePermissionChange]:[{event:Rn,payload:e=>e}],[wn.RecordingIqChange]:[{event:On,payload:e=>e}]},Mn="RECEIVE_VIDEO_ACTIVE_INDICATION",Pn="RECEIVE_VIDEO_MUTE_INDICATION",Ln="ASK_FOR_START_VIDEO_CONSENT",kn="RECEIVE_VIDEO_DIMENSION_CHANGE",Un="CAPTURED_VIDEO_DIMENSION_CHANGE",Vn="CAN_NOT_DETECT_CAMERA",Bn="CAN_NOT_FIND_CAMERA",Hn="VIDEO_USER_FORBIDDEN_CAPTURE",jn="VIDEO_CAMERA_IS_TAKEN",Fn="VIDEO_BACKGROUND_FAILED",Wn="VIDEO_ESTABLISH_STREAM_ERROR",xn="VIDEO_CAPTURE_START_SUCCESS",$n="VIDEO_CAPTURE_STOP_RESULT",Gn="VIDEO_SPOTLIGHT_CHANGE",zn="VIDEO_FOLLOW_HOST_ORDER_CHANGE",qn="VIDEO_HOST_DRAG_LAYOUT_CHANGE",Kn="VIDEO_NEW_USER_START",Jn="VIDEO_OLD_USER_STOP",Qn="VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",Yn="VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",Zn="VIDEO_STATISTIC_DATA",Xn="VIDEO_CELL_DETAILED_DATA",ei="VIDEO_NETWORK_QUALITY_CHANGE",ti="VIDEO_FAR_END_CAMERA_CONTROL_REQUEST",ri="VIDEO_FAR_END_CAMERA_CONTROL_RESPONSE",oi="VIDEO_FAR_END_CAMERA_IN_CONTROL_CHANGE",ni="VIDEO_FAR_END_CAMERA_CAPABILITY_CHANGE",ii="VIDEO_MASK_SETTING_SUCCESS",si="VIDEO_CAPTURE_SDK_SUCCESS",ai="VIDEO_PREFETCH_VIDEO_FRAME_CALLBACK",ui="VIDEO_CURRENT_USER_SSRC",di="VIDEO_RENDER_ASPECT_RATIO_CHANGE",ci="VIDEO_LEADERSHIP_USER_CHANGE",li="VIDEO_SCREENSHOT_TAKEN_NOTIFICATION",pi="WEB_RTC_STATISTIC_DATA",hi="SYSTEM_RESOURCE_USAGE_CHANGE",mi={startCaptureVideo:{success:xn,fail:[Vn,Bn,Hn,Wn,jn,Fn]},switchCameraVideo:{success:si,fail:[Vn,Bn,Hn,jn]}};let gi=function(e){return e.VideoActiveChange="video-active-change",e.PeerVideoStateChange="peer-video-state-change",e.VideoSpotlightChange="video-spotlight-change",e.VideoMutedChange="video-muted-change",e.VideoCapturingChange="video-capturing-change",e.AskForStartVideoConsent="ask-for-start-video-consent",e.VideoDimensionChange="video-dimension-change",e.VideoFollowHostOrder="video-follow-host-order-change",e.VideoHostLayoutChange="video-host-layout-change",e.VideoVBPreloadChange="video-virtual-background-preload-change",e.VideoStatisticDataChange="video-statistic-data-change",e.VideoDetailedDataChange="video-detailed-data-change",e.VideoAspectRatioChange="video-aspect-ratio-change",e.NetworkQualityChange="network-quality-change",e.FarEndCameraRequestControl="far-end-camera-request-control",e.FarEndCameraResponseControl="far-end-camera-response-control",e.FarEndCameraInControlChange="far-end-camera-in-control-change",e.FarEndCameraCapabilityChange="far-end-camera-capability-change",e.VideoScreenshotTaken="video-screenshot-taken",e.WebrtcStatsReportDataChange="webrtc-stats-report-data-change",e.SystemResourceUsageChange="system-resource-usage-change",e}({});const Si={[gi.VideoActiveChange]:[{event:Mn,payload:e=>({state:e.bVideoOn?J.Active:J.Inactive,userId:e.userId})}],[gi.VideoCapturingChange]:[{event:xn,payload:()=>({state:Y.Started})},{event:$n,payload:e=>({state:null!=e&&e.failed?Y.Failed:Y.Stopped})}],[gi.VideoMutedChange]:[{event:Pn,payload:e=>({state:e.isVideoMuted?Q.Muted:Q.Unmuted,userId:e.id})}],[gi.AskForStartVideoConsent]:[{event:Ln,payload:e=>({state:e.isVideoMuted?Q.Muted:Q.Unmuted,userId:e.id})}],[gi.VideoSpotlightChange]:[{event:Gn,payload:e=>({spotlightList:e.spotlightList&&e.spotlightList.map((e=>({userId:e})))})},{event:ci,payload:e=>{var t;return{spotlightList:null===(t=e.spotlightList)||void 0===t?void 0:t.map((e=>({userId:e})))}}}],[gi.VideoDimensionChange]:[{event:kn,payload:e=>({type:"received",width:e.width,height:e.height})},{event:Un,payload:e=>({type:"captured",width:e.width,height:e.height})}],[gi.VideoFollowHostOrder]:[{event:zn,payload:e=>({isFollowHostOrder:e.bOn})}],[gi.VideoHostLayoutChange]:[{event:qn,payload:e=>Array.isArray(e.layout)?e.layout.map((e=>({userId:e}))):[]}],[gi.PeerVideoStateChange]:[{event:Kn,payload:e=>({action:"Start",...e})},{event:Jn,payload:e=>({action:"Stop",...e})}],[gi.VideoVBPreloadChange]:[{event:Qn,payload:e=>({isReady:e})}],[gi.VideoStatisticDataChange]:[{event:Zn,payload:e=>{const{data:{rate:t,...r},...o}=null!=e?e:{data:{}};return{data:{bitrate:t,...r},...o}}}],[gi.VideoDetailedDataChange]:[{event:Xn,payload:e=>e}],[gi.VideoAspectRatioChange]:[{event:di,payload:e=>e}],[gi.NetworkQualityChange]:[{event:ei,payload:e=>e}],[gi.FarEndCameraRequestControl]:[{event:ti,payload:e=>e}],[gi.FarEndCameraResponseControl]:[{event:ri,payload:e=>e}],[gi.FarEndCameraInControlChange]:[{event:oi,payload:e=>e}],[gi.FarEndCameraCapabilityChange]:[{event:ni,payload:e=>e}],[gi.VideoScreenshotTaken]:[{event:li,payload:e=>e}],[gi.WebrtcStatsReportDataChange]:[{event:pi,payload:e=>e}],[gi.SystemResourceUsageChange]:[{event:hi,payload:e=>e}]},vi="AUDIO_ACTIVE_SPEAKER",fi="AUDIO_UNMUTE_CONSENT",yi="AUDIO_CURRENT_USER_JOIN_BY_VOIP",Ei="AUDIO_CURRENT_USER_JOIN_BY_PHONE",_i="AUDIO_CURRENT_USER_LEAVE_AUDIO",Ii="AUDIO_CURRENT_USER_MUTED",Ai="AUDIO_CURRENT_USER_UNMUTED",bi="AUDIO_PARTICIPANT_AUDIO_UPDATE",Ci="AUDIO_DIALOUT_RESULT_CODE",Ti="AUDIO_DIALOUT_RESULT_SUCCESS",Ri="AUDIO_DIALOUT_RESULT_FAIL",Oi="AUDIO_DIALOUT_CANCEL_SUCCESS",Di="DIALOUT_CANCEL_FAIL",wi="AUDIO_MERGE_AUDIO_INDICATION",Ni="AUDIO_CAPTURE_FAILED",Mi="ESTABLISH_AUDIO_STREAM_ERROR",Pi="AUDIO_AUTO_PLAY_FAILED",Li="INVALID_DEVICE_ID",ki="AUDIO_ALLOW_TALK_CHANGE",Ui="SHARE_AUDIO_STATE_CHANGE",Vi="AUDIO_STATISTIC_DATA",Bi="AUDIO_CURRENT_USER_SSRC",Hi="AUDIO_SET_SPEAKER_RESULT",ji="AUDIO_SHARE_SECONDARY_AUDIO_SUCCESS",Fi="AUDIO_CRC_CALL_OUT_RESULT_CODE",Wi="AUDIO_CRC_CALL_OUT_RESULT_SUCCESS",xi="AUDIO_CRC_CALL_OUT_RESULT_FAIL",$i="AUDIO_CURRENT_AUDIO_LEVEL_CHANGE",Gi="AUDIO_SPEAKING_WHILE_MUTED";let zi=function(e){return e.ActiveSpeaker="active-speaker",e.UnmuteAudioConsent="unmute-audio-consent",e.CurrentAudioChange="current-audio-change",e.CurrentAudioLevelChange="current-audio-level-change",e.DialoutStateChange="dialout-state-change",e.MergeAudio="merged-audio",e.AutoPlayFailed="auto-play-audio-failed",e.AllowTalkChange="allow-talk-change",e.ShareAudioChange="share-audio-change",e.AudioStatisticDataChange="audio-statistic-data-change",e.CrcCallOutStateChange="crc-call-out-state-change",e.SpeakingWhileMuted="speaking-while-muted",e}({});const qi={JoinComputerAudio:{success:yi,fail:[Ni,Mi]},JoinAudioByCallMe:{success:Ti,fail:[Ri]},cancelDialOut:{success:Oi,fail:[Di]},hangup:{success:_i},crcCallOut:{success:Wi,fail:[xi]}},Ki={[zi.ActiveSpeaker]:[{event:vi,payload:e=>e}],[zi.UnmuteAudioConsent]:[{event:fi,payload:e=>({reason:e})}],[zi.CurrentAudioChange]:[{event:Ei,payload:()=>({action:F.Join,type:Ee.Phone})},{event:yi,payload:()=>({action:F.Join,type:Ee.Computer})},{event:_i,payload:({source:e})=>({action:F.Leave,source:e})},{event:Ii,payload:({source:e})=>({action:F.Muted,source:e})},{event:Ai,payload:({source:e})=>({action:F.Unmuted,source:e})}],[zi.DialoutStateChange]:[{event:Ci,payload:e=>e}],[zi.MergeAudio]:[{event:wi,payload:e=>e}],[zi.AutoPlayFailed]:[{event:Pi,payload:()=>{}}],[zi.AllowTalkChange]:[{event:ki,payload:e=>({enabled:e})}],[zi.ShareAudioChange]:[{event:Ui,payload:e=>e}],[zi.AudioStatisticDataChange]:[{event:Vi,payload:e=>{const{data:{rate:t,...r},...o}=null!=e?e:{data:{}};return{data:{bitrate:t,...r},...o}}}],[zi.CrcCallOutStateChange]:[{event:Fi,payload:e=>e}],[zi.CurrentAudioLevelChange]:[{event:$i,payload:e=>e}],[zi.SpeakingWhileMuted]:[{event:Gi,payload:e=>e}]},Ji="SHARE_ACTIVE_INDICATION",Qi="SHARE_START_DESKTOP_SHARE_FAILED",Yi="SHARE_DIMENSION_CHANGE",Zi="SHARE_RECEIVED_DIMENSION_CHANGE",Xi="SHARE_VIDEO_STREAMS_END",es="SHARE_PASSIVE_STOP_SHARE",ts="SHARE_PASSIVE_BO_STOP",rs="SHARE_CAMERA_PASSIVE_STOP",os="SHARE_NEW_USER_ADD",ns="SHARE_USER_REMOVE",is="SHARE_USER_PAUSED",ss="SHARE_USER_RESUMED",as="SHARE_AUTO_CHANGE_SOURCE",us="SHARE_REMOTE_CONTROL_APPROVE",ds="SHARE_GRAB_REMOTE_CONTROL_CHANGE",cs="SHARE_REMOTE_CONTROL_CLIPBOARD_CHANGE",ls="SHARE_REMOTE_CONTROL_SUCCESS",ps="SHARE_REMOTE_CONTROL_FAILED",hs="SHARE_PRIVILEGE_CHANGE",ms="SHARE_READ_RECEIPT",gs="SHARE_STATISTIC_DATA",Ss="SHARE_REMOTE_CONTROL_REQUEST",vs="SHARE_REMOTE_CONTROL_APP_STATUS",fs="SHARE_REMOTE_CONTROL_SESSION_STATUS",ys="SHARE_REMOTE_CONTROL_APP_SCHEME",Es="SHARE_SCREENSHOT_TAKEN_NOTIFICATION",_s="ANNOTATION_START_RESULT",Is="ANNOTATION_PRIVILEGE_CHANGE",As="ANNOTATION_UNDO_STATUS",bs="ANNOTATION_REDO_STATUS",Cs="ANNOTATION_DRAW_REQUEST",Ts="SHARE_REMOTE_CAMERA_REQUEST",Rs="SHARE_REMOTE_CAMERA_RESPONSE",Os="SHARE_REMOTE_CAMERA_STATUS";let Ds=function(e){return e.ShareActiveChange="active-share-change",e.ShareDimensionChange="share-content-dimension-change",e.SharePassiveStop="passively-stop-share",e.SharePeerStateChange="peer-share-state-change",e.ShareContentChange="share-content-change",e.SharePrivilegeChange="share-privilege-change",e.ShareReadReceipt="share-can-see-screen",e.ShareStatisticDataChange="share-statistic-data-change",e.RemoteControlApprovedChange="remote-control-approved-change",e.RemoteControlInControlChange="remote-control-in-control-change",e.RemoteControlClipboardChange="remote-control-clipboard-change",e.RemoteControlRequestChange="remote-control-request-change",e.RemoteControlAppStatusChange="remote-control-app-status-change",e.RemoteControlControlledStatusChange="remote-control-controlled-status-change",e.ShareScreenshotTaken="share-content-screenshot-taken",e.AnnotationPrivilegeChange="annotation-privilege-change",e.AnnotationRedoStatus="annotation-redo-status",e.AnnotationUndoStatus="annotation-undo-status",e.AnnotationDrawRequest="annotation-viewer-draw-request",e.ShareRemoteCameraRequest="share-camera-request",e.ShareRemoteCameraApproveChange="share-camera-approve-change",e.ShareRemoteCameraStatus="share-camera-status",e}({});const ws={[Ds.ShareActiveChange]:[{event:Ji,payload:e=>{const{isActive:t,activeUserId:r,...o}=e;return{state:t?"Active":"Inactive",userId:r,...o}}}],[Ds.ShareDimensionChange]:[{event:Yi,payload:e=>({type:"sended",width:e.width,height:e.height,userId:e.userId})},{event:Zi,payload:e=>({type:"received",width:e.width,height:e.height,userId:e.nodeid})}],[Ds.SharePassiveStop]:[{event:Xi,payload:()=>({reason:X.StopScreenCapture})},{event:es,payload:()=>({reason:X.PrivilegeChange})},{event:ts,payload:()=>({reason:X.ShareFromMainSession})},{event:rs,payload:()=>({reason:X.StopCameraCapture})}],[Ds.SharePeerStateChange]:[{event:os,payload:e=>{var t;return{userId:e.id,action:"Start",isFromMainSession:null!==(t=null==e?void 0:e.isFromMainSession)&&void 0!==t&&t}}},{event:ns,payload:e=>{var t;return{userId:e.id,action:"Stop",isFromMainSession:null!==(t=null==e?void 0:e.isFromMainSession)&&void 0!==t&&t}}},{event:is,payload:e=>({userId:e.id,action:"Pause"})},{event:ss,payload:e=>({userId:e.id,action:"Resume"})}],[Ds.ShareContentChange]:[{event:as,payload:e=>e}],[Ds.SharePrivilegeChange]:[{event:hs,payload:e=>({privilege:e})}],[Ds.ShareReadReceipt]:[{event:ms,payload:()=>{}}],[Ds.ShareStatisticDataChange]:[{event:gs,payload:e=>{const{data:{rate:t,...r},...o}=null!=e?e:{data:{}};return{data:{bitrate:t,...r},...o}}}],[Ds.RemoteControlApprovedChange]:[{event:us,payload:e=>({state:e?Z.Approved:Z.Rejected})}],[Ds.RemoteControlInControlChange]:[{event:ds,payload:e=>({isControlling:e})}],[Ds.RemoteControlClipboardChange]:[{event:cs,payload:e=>e}],[Ds.RemoteControlRequestChange]:[{event:Ss,payload:e=>e}],[Ds.RemoteControlAppStatusChange]:[{event:vs,payload:e=>e}],[Ds.RemoteControlControlledStatusChange]:[{event:fs,payload:e=>e}],[Ds.ShareScreenshotTaken]:[{event:Es,payload:e=>e}],[Ds.AnnotationPrivilegeChange]:[{event:Is,payload:e=>e}],[Ds.AnnotationRedoStatus]:[{event:bs,payload:e=>e}],[Ds.AnnotationUndoStatus]:[{event:As,payload:e=>e}],[Ds.AnnotationDrawRequest]:[{event:Cs,payload:e=>e}],[Ds.ShareRemoteCameraRequest]:[{event:Ts,payload:e=>e}],[Ds.ShareRemoteCameraApproveChange]:[{event:Rs,payload:e=>e}],[Ds.ShareRemoteCameraStatus]:[{event:Os,payload:e=>e}]};let Ns=function(e){return e.Question="question",e.UpdateQuestion="updateQuestion",e.Answer="answer",e.DeleteComment="deleteComment",e.DeleteQuestion="deleteQuestion",e.Dismiss="dismiss",e.Reopen="reopen",e.Upvote="upvote",e.AnswerLive="answerLive",e}({}),Ms=function(e){return e.QaSettingChange="qa-setting-change",e.QaActionChange="qa-action-change",e}({});const Ps={[Ms.QaSettingChange]:[{event:"QA_SETTING_OPTION_CHANGE",payload:e=>e}],[Ms.QaActionChange]:[{event:"QA_NEW_ASK_QUESTION",payload:e=>({action:Ns.Question,data:e})},{event:"QA_UPDATE_ANONYMOUS_QUESTION",payload:e=>({action:Ns.UpdateQuestion,data:e})},{event:"QA_ANSWER_QUESTION",payload:e=>({action:Ns.Answer,data:e})},{event:"QA_ANSWER_REMOVE_COMMENT",payload:e=>({action:Ns.DeleteComment,data:e})},{event:"QA_ANSWER_REMOVE_QUESTION",payload:e=>({action:Ns.DeleteQuestion,data:e})},{event:"QA_ANSWER_DISMISS_QUESTION",payload:e=>({action:Ns.Dismiss,data:e})},{event:"QA_ANSWER_REOPEN_QUESTION",payload:e=>({action:Ns.Reopen,data:e})},{event:"QA_ANSWER_VOTE_QUESTION",payload:e=>({action:Ns.Upvote,data:e})},{event:"QA_ANSWER_QUESTION_LIVE",payload:e=>({action:Ns.AnswerLive,data:e})}]},Ls="AUDIO_ENCODE_SUCCESS",ks="AUDIO_DECODE_SUCCESS",Us="VIDEO_ENCODE_SUCCESS",Vs="VIDEO_DECODE_SUCCESS",Bs="SHARING_ENCODE_SUCCESS",Hs="SHARING_DECODE_SUCCESS",js="AUDIO_ENCODE_FAIL",Fs="AUDIO_DECODE_FAIL",Ws="VIDEO_ENCODE_FAIL",xs="VIDEO_DECODE_FAIL",$s="SHARING_ENCODE_FAIL",Gs="SHARING_DECODE_FAIL",zs="MEDIA_DEVICE_CHANGE",qs="MEDIS_SDK_PATHCH_LOADED",Ks="DEVICE_PERMISSION_CHANGE",Js="MEDIA_HEALTH_CHECK_FAILED";let Qs=function(e){return e.DeviceChange="device-change",e.MediaSDKChange="media-sdk-change",e.DevicePermissionChange="device-permission-change",e.MediaInternalError="media-internal-error",e}({});const Ys={[Qs.DeviceChange]:[{event:zs,payload:()=>({})}],[Qs.MediaSDKChange]:[{event:Ls,payload:()=>({type:"audio",action:"encode",result:"success"})},{event:js,payload:()=>({type:"audio",action:"encode",result:"fail"})},{event:ks,payload:()=>({type:"audio",action:"decode",result:"success"})},{event:Fs,payload:()=>({type:"audio",action:"decode",result:"fail"})},{event:Us,payload:()=>({type:"video",action:"encode",result:"success"})},{event:Ws,payload:()=>({type:"video",action:"encode",result:"fail"})},{event:Vs,payload:()=>({type:"video",action:"decode",result:"success"})},{event:xs,payload:()=>({type:"video",action:"decode",result:"fail"})},{event:Bs,payload:()=>({type:"share",action:"encode",result:"success"})},{event:$s,payload:()=>({type:"share",action:"encode",result:"fail"})},{event:Hs,payload:()=>({type:"share",action:"decode",result:"success"})},{event:Gs,payload:()=>({type:"share",action:"decode",result:"fail"})}],[Qs.DevicePermissionChange]:[{event:Ks,payload:e=>e}],[Qs.MediaInternalError]:[{event:Js,payload:e=>e}]},Zs="BREAKOUT_ROOM_ADD_TOKEN",Xs="BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",ea="BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",ta="BREAKOUT_ROOM_ROOM_COUNTDOWN",ra="BREAKOUT_ROOM_BROADCAST_MESSAGE",oa="BREAKOUT_ROOM_ASK_HELP_REQUEST",na="BREAKOUT_ROOM_ASK_HELP_RESPONSE",ia="BREAKOUT_ROOM_ATTRIBUTE_INDICATION",sa="BREAKOUT_ROOM_JOIN_BO_RESPONSE",aa="BREAKOUT_ROOM_ROOM_COUNTDOWN_TIME_UP",ua="BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",da="BREAKOUT_ROOM_LOAD_PRE_ASSIGNED_ROOMS",ca="BREAKOUT_ROOM_MAIN_SESSION_USER_UPDATE",la="BREAKOUT_ROOM_INVITE_TO_BACK_NOTIFICATION",pa="BREAKOUT_ROOM_IN_ROOM_USER_STATUS_UPDATE",ha="BREAKOUT_ROOM_BROADCAST_VOICE";let ma=function(e){return e.InviteToJoin="invite-to-join",e.RoomCountdown="room-countdown",e.RoomTimeUp="room-time-up",e.ClosingRoomCountdown="closing-room-countdown",e.BroadcastMessage="broadcast-message",e.AskForHelp="ask-for-help",e.AskForHelpResponse="ask-for-help-response",e.RoomStateChange="room-state-change",e.MainSessionUserUpdate="main-session-user-updated",e.InviteToBack="invite-back-to-main-session",e.RoomUserUpdate="room-user-update",e.BroadcastVoice="broadcast-voice",e}({});const ga={[ma.InviteToJoin]:[{event:Xs,payload:e=>e}],[ma.RoomCountdown]:[{event:ta,payload:e=>e}],[ma.RoomTimeUp]:[{event:aa,payload:e=>e}],[ma.ClosingRoomCountdown]:[{event:ea,payload:e=>e}],[ma.BroadcastMessage]:[{event:ra,payload:e=>e}],[ma.AskForHelp]:[{event:oa,payload:e=>e}],[ma.AskForHelpResponse]:[{event:na,payload:e=>e}],[ma.RoomStateChange]:[{event:ia,payload:e=>({status:e.controlStatus})}],[ma.MainSessionUserUpdate]:[{event:ca,payload:()=>({})}],[ma.InviteToBack]:[{event:la,payload:e=>e}],[ma.RoomUserUpdate]:[{event:pa,payload:e=>e}],[ma.BroadcastVoice]:[{event:ha,payload:e=>e}]};var Sa=function(e){return e.StatusUpdate="archiving-status-update",e.OptionsUpdate="archiving-options-update",e}(Sa||{});const va={[Sa.StatusUpdate]:[{event:"ARCHIVING_STATUS_UPDATE",payload:e=>e}],[Sa.OptionsUpdate]:[{event:"ARCHIVING_OPTIONS_UPDATE",payload:e=>e}]};let fa=function(e){return e.PollDataChange="poll-data-change",e.PollSizeUpdate="poll-size-update",e.PollStatusUpdate="poll-status-update",e}({});const ya={[fa.PollDataChange]:[{event:"POLL_DATA_CHANGE",payload:e=>e}],[fa.PollSizeUpdate]:[{event:"POLL_SIZE_UPDATE",payload:e=>e}],[fa.PollStatusUpdate]:[{event:"POLL_STATUS_UPDATE",payload:e=>e}]};let Ea=function(e){return e.ReactionReceived="reaction-received",e.ReactionRemoved="reaction-removed",e}({});const _a={[Ea.ReactionReceived]:[{event:"REACTION_RECEIVED",payload:e=>e}],[Ea.ReactionRemoved]:[{event:"REACTION_REMOVED",payload:e=>e}]},Ia="SMART_SUMMARY_STATUS_CHANGE",Aa="MEETING_QUERY_STATUS_CHANGE";let ba=function(e){return e.SummaryChange="summary-status-change",e.MeetingQueryChang="meeting-query-status-change",e}({});const Ca={[ba.SummaryChange]:[{event:Ia,payload:e=>e}],[ba.MeetingQueryChang]:[{event:Aa,payload:e=>e}]},Ta="LIVE_STREAM_STATUS_CHANGE",Ra={"live-stream-status":[{event:Ta,payload:e=>e}]},Oa="BROADCAST_STREAM_UTK_UPDATE",Da="BROADCAST_STREAM_STATUS_CHANGE",wa={"broadcast-streaming-status":[{event:Da,payload:e=>e}]};let Na=function(e){return e[e.OPERATION_TIMEOUT=1]="OPERATION_TIMEOUT",e[e.INTERNAL_ERROR=2]="INTERNAL_ERROR",e[e.OPERATION_CANCELLED=3]="OPERATION_CANCELLED",e[e.SESSION_FETCH_INFO_ERROR=200]="SESSION_FETCH_INFO_ERROR",e[e.SESSION_IN_ANOTHER_SESSION=3e3]="SESSION_IN_ANOTHER_SESSION",e[e.SESSION_INCORRECT_PASSCODE=3004]="SESSION_INCORRECT_PASSCODE",e[e.SESSION_NOT_STARTED=3008]="SESSION_NOT_STARTED",e[e.SESSION_USER_REMOVED=3009]="SESSION_USER_REMOVED",e[e.SESSION_ROLE_TYPE_ERROR=3010]="SESSION_ROLE_TYPE_ERROR",e[e.SESSION_WEBINAR_USER_REMOVED=3620]="SESSION_WEBINAR_USER_REMOVED",e[e.SESSION_INVALID_PARAMETER=4003]="SESSION_INVALID_PARAMETER",e[e.SESSION_ENDED=4004]="SESSION_ENDED",e[e.SESSION_LOCKED=4006]="SESSION_LOCKED",e[e.SESSION_IB_BLOCKED=4007]="SESSION_IB_BLOCKED",e[e.SESSION_PARTICIPANT_EXIST=4008]="SESSION_PARTICIPANT_EXIST",e[e.CLIENT_PLATFORM_UNSUPPORTED=5e3]="CLIENT_PLATFORM_UNSUPPORTED",e[e.CLIENT_DEPENDENT_ASSETS_INACCESSIBLE=5001]="CLIENT_DEPENDENT_ASSETS_INACCESSIBLE",e[e.CLIENT_SESSION_STATE_CLOSED=5002]="CLIENT_SESSION_STATE_CLOSED",e[e.CLIENT_SESSION_STATE_RECONNECTING=5003]="CLIENT_SESSION_STATE_RECONNECTING",e[e.CLIENT_SESSION_STATE_ON_HOLD=5004]="CLIENT_SESSION_STATE_ON_HOLD",e[e.CLIENT_SESSION_NOT_WEBINAR=5005]="CLIENT_SESSION_NOT_WEBINAR",e[e.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED=5006]="CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED",e[e.CLIENT_HOST_PERMISSION_REQUIRED=5007]="CLIENT_HOST_PERMISSION_REQUIRED",e[e.CLIENT_ORIGIN_HOST_PERMISSION_REQUIRED=5008]="CLIENT_ORIGIN_HOST_PERMISSION_REQUIRED",e[e.CLIENT_ATTENDEE_APPLICABLE_ONLY=5009]="CLIENT_ATTENDEE_APPLICABLE_ONLY",e[e.CLIENT_PARTICIPANT_APPLICABLE_ONLY=5010]="CLIENT_PARTICIPANT_APPLICABLE_ONLY",e[e.CLIENT_MISMATCH_USER=5011]="CLIENT_MISMATCH_USER",e[e.CLIENT_DUPLICATED_JOIN=5012]="CLIENT_DUPLICATED_JOIN",e[e.CLIENT_INVALID_JOIN_PARAMETER=5013]="CLIENT_INVALID_JOIN_PARAMETER",e[e.CLIENT_HOST_DISALLOW_RENAME=5014]="CLIENT_HOST_DISALLOW_RENAME",e[e.STREAM_MISMATCH_DEVICE=6e3]="STREAM_MISMATCH_DEVICE",e[e.STREAM_MISMATCH_USER=6001]="STREAM_MISMATCH_USER",e[e.STREAM_SESSION_JOIN_REQUIRED=6002]="STREAM_SESSION_JOIN_REQUIRED",e[e.STREAM_MISMATCH_RENDER_ELEMENT=6003]="STREAM_MISMATCH_RENDER_ELEMENT",e[e.AUDIO_CAPTURE_FAILED=6010]="AUDIO_CAPTURE_FAILED",e[e.AUDIO_CAPTURE_LOADING=6011]="AUDIO_CAPTURE_LOADING",e[e.AUDIO_IN_PSTN=6012]="AUDIO_IN_PSTN",e[e.AUDIO_ENCODING_REQUIRED=6013]="AUDIO_ENCODING_REQUIRED",e[e.AUDIO_SHARE_AUDIO_CONFLICT=6014]="AUDIO_SHARE_AUDIO_CONFLICT",e[e.AUDIO_NOT_STARTED=6015]="AUDIO_NOT_STARTED",e[e.AUDIO_ATTENDEE_NOT_ALLOWED=6016]="AUDIO_ATTENDEE_NOT_ALLOWED",e[e.SECONDARY_AUDIO_UNSUPPORTED=6017]="SECONDARY_AUDIO_UNSUPPORTED",e[e.SECONDARY_AUDIO_DEVICE_CONFLICT=6018]="SECONDARY_AUDIO_DEVICE_CONFLICT",e[e.SECONDARY_AUDIO_SCREEN_SHARING_CONFLICT=6019]="SECONDARY_AUDIO_SCREEN_SHARING_CONFLICT",e[e.SECONDARY_AUDIO_NOT_STARTED=6020]="SECONDARY_AUDIO_NOT_STARTED",e[e.PSTN_MISMATCH_COUNTRY_CODE=6021]="PSTN_MISMATCH_COUNTRY_CODE",e[e.PSTN_NOT_CONNECTED=6022]="PSTN_NOT_CONNECTED",e[e.CRC_NOT_CONNECTED=6023]="CRC_NOT_CONNECTED",e[e.AUDIO_ALLOW_TALK_UNSUPPORTED=6024]="AUDIO_ALLOW_TALK_UNSUPPORTED",e[e.AUDIO_ALLOW_TALK_MISMATCH_USER=6025]="AUDIO_ALLOW_TALK_MISMATCH_USER",e[e.AUDIO_PROCESSOR_UNSUPPORTED=6026]="AUDIO_PROCESSOR_UNSUPPORTED",e[e.AUDIO_PROCESSOR_DUPLICATE_CREATE=6027]="AUDIO_PROCESSOR_DUPLICATE_CREATE",e[e.AUDIO_PROCESSOR_MISMATCH_PROCESSOR=6028]="AUDIO_PROCESSOR_MISMATCH_PROCESSOR",e[e.AUDIO_PROCESSOR_LIMIT_EXCEED=6029]="AUDIO_PROCESSOR_LIMIT_EXCEED",e[e.VIDEO_CAMERA_PERMISSION_DENIED=6100]="VIDEO_CAMERA_PERMISSION_DENIED",e[e.VIDEO_NO_CAMERA=6101]="VIDEO_NO_CAMERA",e[e.VIDEO_MISMATCH_CAMERA=6102]="VIDEO_MISMATCH_CAMERA",e[e.VIDEO_CAMERA_TAKEN=6103]="VIDEO_CAMERA_TAKEN",e[e.VIDEO_VB_INITIALIZE_ERROR=6104]="VIDEO_VB_INITIALIZE_ERROR",e[e.VIDEO_CAPTURE_LOADING=6105]="VIDEO_CAPTURE_LOADING",e[e.VIDEO_MUTED_BY_HOST=6106]="VIDEO_MUTED_BY_HOST",e[e.VIDEO_VB_UNSUPPORTED=6107]="VIDEO_VB_UNSUPPORTED",e[e.VIDEO_VB_PROCESSOR_CONFLICT=6108]="VIDEO_VB_PROCESSOR_CONFLICT",e[e.VIDEO_MISMATCH_STATE=6109]="VIDEO_MISMATCH_STATE",e[e.VIDEO_ESTABLISH_STREAM_ERROR=6110]="VIDEO_ESTABLISH_STREAM_ERROR",e[e.VIDEO_RENDER_LIMIT_EXCEED=6111]="VIDEO_RENDER_LIMIT_EXCEED",e[e.VIDEO_METHOD_DEPRECATED=6112]="VIDEO_METHOD_DEPRECATED",e[e.VIDEO_VB_IMAGE_INACCESSIBLE=6113]="VIDEO_VB_IMAGE_INACCESSIBLE",e[e.VIDEO_VB_MISMATCH_STATE=6114]="VIDEO_VB_MISMATCH_STATE",e[e.VIDEO_MASK_IMAGE_INACCESSIBLE=6115]="VIDEO_MASK_IMAGE_INACCESSIBLE",e[e.VIDEO_MASK_PROCESSOR_CONFLICT=6116]="VIDEO_MASK_PROCESSOR_CONFLICT",e[e.VIDEO_SPOTLIGHT_MISMATCH_STATE=6117]="VIDEO_SPOTLIGHT_MISMATCH_STATE",e[e.VIDEO_SPOTLIGHT_MULTI_CONFLICT=6118]="VIDEO_SPOTLIGHT_MULTI_CONFLICT",e[e.VIDEO_PROCESSOR_UNSUPPORTED=6119]="VIDEO_PROCESSOR_UNSUPPORTED",e[e.VIDEO_PROCESSOR_LIMIT_EXCEED=6120]="VIDEO_PROCESSOR_LIMIT_EXCEED",e[e.VIDEO_PROCESSOR_DUPLICATE_CREATE=6121]="VIDEO_PROCESSOR_DUPLICATE_CREATE",e[e.VIDEO_PROCESSOR_MISMATCH_PROCESSOR=6122]="VIDEO_PROCESSOR_MISMATCH_PROCESSOR",e[e.FAR_END_CAMERA_CONTROL_DEVICE_UNSUPPORTED=6150]="FAR_END_CAMERA_CONTROL_DEVICE_UNSUPPORTED",e[e.FAR_END_CAMERA_CONTROL_MISMATCH_STATE=6151]="FAR_END_CAMERA_CONTROL_MISMATCH_STATE",e[e.FAR_END_CAMERA_PERMISSION_REQUIRED=6152]="FAR_END_CAMERA_PERMISSION_REQUIRED",e[e.FAR_END_CAMERA_INVALID_RANGE=6153]="FAR_END_CAMERA_INVALID_RANGE",e[e.FAR_END_CAMERA_RATE_LIMIT=6154]="FAR_END_CAMERA_RATE_LIMIT",e[e.SCREEN_SHARE_USER_DENIED=6200]="SCREEN_SHARE_USER_DENIED",e[e.SCREEN_SHARE_SYSTEM_DENIED=6201]="SCREEN_SHARE_SYSTEM_DENIED",e[e.SCREEN_SHARE_UNSUPPORTED=6202]="SCREEN_SHARE_UNSUPPORTED",e[e.SCREEN_SHARE_SUBSESSION_CONFLICT=6203]="SCREEN_SHARE_SUBSESSION_CONFLICT",e[e.SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED=6204]="SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED",e[e.SCREEN_SHARE_MISMATCH_STATE=6205]="SCREEN_SHARE_MISMATCH_STATE",e[e.SCREEN_SHARE_OPTIMIZE_VIDEO_UNSUPPORTED=6206]="SCREEN_SHARE_OPTIMIZE_VIDEO_UNSUPPORTED",e[e.SCREEN_SHARE_OPTIMIZE_VIDEO_CONFLICT=6207]="SCREEN_SHARE_OPTIMIZE_VIDEO_CONFLICT",e[e.SCREEN_SHARE_INVALID_PRIVILEGE=6208]="SCREEN_SHARE_INVALID_PRIVILEGE",e[e.SCREEN_SHARE_IB_DENIED=6209]="SCREEN_SHARE_IB_DENIED",e[e.SCREEN_SHARE_LIMIT_EXCEED=6218]="SCREEN_SHARE_LIMIT_EXCEED",e[e.SCREEN_SHARE_ANNOTATION_ACCOUNT_DISABLE=6210]="SCREEN_SHARE_ANNOTATION_ACCOUNT_DISABLE",e[e.SCREEN_SHARE_ANNOTATION_NO_ACTIVE_SHARE=6211]="SCREEN_SHARE_ANNOTATION_NO_ACTIVE_SHARE",e[e.SCREEN_SHARE_ANNOTATION_PRESENTER_DISABLED=6212]="SCREEN_SHARE_ANNOTATION_PRESENTER_DISABLED",e[e.SCREEN_SHARE_ANNOTATION_DUPLICATE_START=6213]="SCREEN_SHARE_ANNOTATION_DUPLICATE_START",e[e.SCREEN_SHARE_ANNOTATION_START_ERROR=6214]="SCREEN_SHARE_ANNOTATION_START_ERROR",e[e.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER=6215]="SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER",e[e.SCREEN_SHARE_ANNOTATION_NOT_SUPPORT=6216]="SCREEN_SHARE_ANNOTATION_NOT_SUPPORT",e[e.SCREEN_SHARE_ANNOTATION_NOT_START=6217]="SCREEN_SHARE_ANNOTATION_NOT_START",e[e.SHARE_CAMERA_MESSAGE_ERROR=6219]="SHARE_CAMERA_MESSAGE_ERROR",e[e.SHARED_PROCESSOR_UNSUPPORTED=6223]="SHARED_PROCESSOR_UNSUPPORTED",e[e.SHARED_PROCESSOR_DUPLICATE_CREATE=6224]="SHARED_PROCESSOR_DUPLICATE_CREATE",e[e.SHARED_PROCESSOR_MISMATCH_PROCESSOR=6225]="SHARED_PROCESSOR_MISMATCH_PROCESSOR",e[e.SHARED_PROCESSOR_LIMIT_EXCEED=6226]="SHARED_PROCESSOR_LIMIT_EXCEED",e[e.REMOTE_CONTROL_ACCOUNT_DISABLE=6300]="REMOTE_CONTROL_ACCOUNT_DISABLE",e[e.REMOTE_CONTROL_MISMATCH_STATE=6301]="REMOTE_CONTROL_MISMATCH_STATE",e[e.REMOTE_CONTROL_PERMISSION_REQUIRED=6302]="REMOTE_CONTROL_PERMISSION_REQUIRED",e[e.REMOTE_CONTROL_MISMATCH_DISPLAY_SURFACE=6303]="REMOTE_CONTROL_MISMATCH_DISPLAY_SURFACE",e[e.REMOTE_CONTROL_INVALID_LAUNCH_SCHEME=6304]="REMOTE_CONTROL_INVALID_LAUNCH_SCHEME",e[e.CHAT_EMPTY_MESSAGE=7e3]="CHAT_EMPTY_MESSAGE",e[e.CHAT_MISMATCH_USER=7001]="CHAT_MISMATCH_USER",e[e.CHAT_INSUFFICIENT_PRIVILEGE=7002]="CHAT_INSUFFICIENT_PRIVILEGE",e[e.CHAT_INVALID_PRIVILEGE=7003]="CHAT_INVALID_PRIVILEGE",e[e.CHAT_SUBSESSION_CONFLICT=7004]="CHAT_SUBSESSION_CONFLICT",e[e.CHAT_EMPTY_FILE=7005]="CHAT_EMPTY_FILE",e[e.CHAT_INVALID_RETRY_TOKEN=7006]="CHAT_INVALID_RETRY_TOKEN",e[e.CHAT_MISMATCH_FILE_TYPE=7007]="CHAT_MISMATCH_FILE_TYPE",e[e.CHAT_EXCEED_FILE_SIZE=7008]="CHAT_EXCEED_FILE_SIZE",e[e.CHAT_INVALID_MSG_ID_OR_URL=7009]="CHAT_INVALID_MSG_ID_OR_URL",e[e.CHAT_FILE_ACCOUNT_DISABLE=7010]="CHAT_FILE_ACCOUNT_DISABLE",e[e.CHAT_DELETE_ACCOUNT_DISABLE=7011]="CHAT_DELETE_ACCOUNT_DISABLE",e[e.CMD_EMPTY_MESSAGE=7100]="CMD_EMPTY_MESSAGE",e[e.CMD_MISMATCH_USER=7101]="CMD_MISMATCH_USER",e[e.CMD_INVALID_MESSAGE_TYPE=7102]="CMD_INVALID_MESSAGE_TYPE",e[e.CMD_EXCEED_MESSAGE_LENGTH=7103]="CMD_EXCEED_MESSAGE_LENGTH",e[e.CMD_CHANNEL_NOT_READY=7104]="CMD_CHANNEL_NOT_READY",e[e.RECORDING_ACCOUNT_DISABLE=7200]="RECORDING_ACCOUNT_DISABLE",e[e.RECORDING_STOP_FORBIDDEN=7201]="RECORDING_STOP_FORBIDDEN",e[e.RECORDING_MISMATCH_STATE=7202]="RECORDING_MISMATCH_STATE",e[e.RECORDING_ISO_DISABLE=7203]="RECORDING_ISO_DISABLE",e[e.RECORDING_IQ_DISABLE=7204]="RECORDING_IQ_DISABLE",e[e.RECORDING_IQ_PERMISSION_REQUIRED=7205]="RECORDING_IQ_PERMISSION_REQUIRED",e[e.RECORDING_IQ_MISMATCH_STATE=7206]="RECORDING_IQ_MISMATCH_STATE",e[e.LOCAL_RECORDING_ACCOUNT_DISABLE=7207]="LOCAL_RECORDING_ACCOUNT_DISABLE",e[e.LOCAL_RECORDING_INVALID_VALUE=7208]="LOCAL_RECORDING_INVALID_VALUE",e[e.LOCAL_RECORDING_MISMATCH_STATE=7209]="LOCAL_RECORDING_MISMATCH_STATE",e[e.TRANSCRIPTION_ACCOUNT_DISABLE=7300]="TRANSCRIPTION_ACCOUNT_DISABLE",e[e.TRANSCRIPTION_FEATURE_DISABLE=7301]="TRANSCRIPTION_FEATURE_DISABLE",e[e.TRANSCRIPTION_LANGUAGE_UNSUPPORTED=7302]="TRANSCRIPTION_LANGUAGE_UNSUPPORTED",e[e.TRANSCRIPTION_MISMATCH_STATE=7303]="TRANSCRIPTION_MISMATCH_STATE",e[e.TRANSLATION_ACCOUNT_DISABLE=7304]="TRANSLATION_ACCOUNT_DISABLE",e[e.TRANSLATION_LANGUAGE_UNSUPPORTED=7305]="TRANSLATION_LANGUAGE_UNSUPPORTED",e[e.MANUAL_CAPTION_ACCOUNT_DISABLE=7306]="MANUAL_CAPTION_ACCOUNT_DISABLE",e[e.MANUAL_CAPTION_FEATURE_DISABLE=7307]="MANUAL_CAPTION_FEATURE_DISABLE",e[e.MANUAL_CAPTION_MISMATCH_USER=7308]="MANUAL_CAPTION_MISMATCH_USER",e[e.MANUAL_CAPTION_INSUFFICIENT_PRIVILEGE=7309]="MANUAL_CAPTION_INSUFFICIENT_PRIVILEGE",e[e.TRANSCRIPTION_LANGUAGE_LOCKED=7310]="TRANSCRIPTION_LANGUAGE_LOCKED",e[e.LIVE_STREAM_ACCOUNT_DISABLE=7400]="LIVE_STREAM_ACCOUNT_DISABLE",e[e.LIVE_STREAM_INVALID_PARAMETER=7401]="LIVE_STREAM_INVALID_PARAMETER",e[e.LIVE_STREAM_MISMATCH_STATE=7402]="LIVE_STREAM_MISMATCH_STATE",e[e.SUBSESSION_ACCOUNT_DISABLE=7500]="SUBSESSION_ACCOUNT_DISABLE",e[e.SUBSESSION_EXCEED_CAPACITY=7501]="SUBSESSION_EXCEED_CAPACITY",e[e.SUBSESSION_MISMATCH_ID=7502]="SUBSESSION_MISMATCH_ID",e[e.SUBSESSION_MISMATCH_USER=7503]="SUBSESSION_MISMATCH_USER",e[e.SUBSESSION_MISMATCH_STATE=7504]="SUBSESSION_MISMATCH_STATE",e[e.SUBSESSION_EXIT_RESTRICTED=7505]="SUBSESSION_EXIT_RESTRICTED",e[e.SUBSESSION_BROADCAST_DISABLE=7506]="SUBSESSION_BROADCAST_DISABLE",e[e.SUBSESSION_BROADCAST_INVALID_CONTENT=7507]="SUBSESSION_BROADCAST_INVALID_CONTENT",e[e.SUBSESSION_BROADCAST_VOICE_DISABLE=7508]="SUBSESSION_BROADCAST_VOICE_DISABLE",e[e.SUBSESSION_BROADCAST_VOICE_RESTRICTED=7509]="SUBSESSION_BROADCAST_VOICE_RESTRICTED",e[e.SUBSESSION_BROADCAST_VOICE_MISMATCH_STATE=7510]="SUBSESSION_BROADCAST_VOICE_MISMATCH_STATE",e[e.REACTION_ACCOUNT_DISABLE=7600]="REACTION_ACCOUNT_DISABLE",e[e.REACTION_INVALID_PARAMETER=7601]="REACTION_INVALID_PARAMETER",e[e.SUMMARY_ACCOUNT_DISABLE=7700]="SUMMARY_ACCOUNT_DISABLE",e[e.QA_INVALID_PARAMETER=7800]="QA_INVALID_PARAMETER",e[e.QA_INSUFFICIENT_PRIVILEGE=7801]="QA_INSUFFICIENT_PRIVILEGE",e[e.BROADCAST_STREAMING_ACCOUNT_DISABLE=7900]="BROADCAST_STREAMING_ACCOUNT_DISABLE",e[e.BROADCAST_STREAMING_MISMATCH_STATE=7901]="BROADCAST_STREAMING_MISMATCH_STATE",e[e.BROADCAST_STREAMING_INVALID_CHANNEL_ID=7902]="BROADCAST_STREAMING_INVALID_CHANNEL_ID",e[e.WHITEBOARD_NOT_INIT=8e3]="WHITEBOARD_NOT_INIT",e[e.WHITEBOARD_NOT_INIT_SUCCESS=8001]="WHITEBOARD_NOT_INIT_SUCCESS",e[e.WHITEBOARD_PRESENTER_LEAVE=8002]="WHITEBOARD_PRESENTER_LEAVE",e[e.WHITEBOARD_TOKEN_NOT_AVAILABLE=8003]="WHITEBOARD_TOKEN_NOT_AVAILABLE",e[e.WHITEBOARD_BACKEND_ERROR=8004]="WHITEBOARD_BACKEND_ERROR",e[e.WHITEBOARD_GET_INIT_TOKEN_FAIL=8005]="WHITEBOARD_GET_INIT_TOKEN_FAIL",e[e.WHITEBOARD_LOAD_WHITEBOARD_JS_CSS_ERROR=8006]="WHITEBOARD_LOAD_WHITEBOARD_JS_CSS_ERROR",e[e.WHITEBOARD_VIDEOSDK_NOT_SUPPORT_DASHBOARD=8007]="WHITEBOARD_VIDEOSDK_NOT_SUPPORT_DASHBOARD",e[e.WHITEBOARD_MEETING_NOT_JOINED=8008]="WHITEBOARD_MEETING_NOT_JOINED",e[e.WHITEBOARD_ELEMENT_NOT_FOUND=8009]="WHITEBOARD_ELEMENT_NOT_FOUND",e[e.WHITEBOARD_WEBINAR_NOT_SUPPORTED=8010]="WHITEBOARD_WEBINAR_NOT_SUPPORTED",e[e.WHITEBOARD_DOC_ID_NOT_AVAILABLE=8011]="WHITEBOARD_DOC_ID_NOT_AVAILABLE",e[e.WHITEBOARD_INSUFFICIENT_PRIVILEGES=8012]="WHITEBOARD_INSUFFICIENT_PRIVILEGES",e[e.WHITEBOARD_INVALID_STATE=8013]="WHITEBOARD_INVALID_STATE",e[e.WHITEBOARD_NOT_AVAILABLE=8014]="WHITEBOARD_NOT_AVAILABLE",e[e.WHITEBOARD_PRIVILEGE_SET_FAILED=8015]="WHITEBOARD_PRIVILEGE_SET_FAILED",e[e.WHITEBOARD_USER_ROLE_CHANGE_FAILED=8016]="WHITEBOARD_USER_ROLE_CHANGE_FAILED",e[e.WHITEBOARD_LOCK_API_NOT_AVAILABLE=8017]="WHITEBOARD_LOCK_API_NOT_AVAILABLE",e[e.WHITEBOARD_NOT_OPENED=8018]="WHITEBOARD_NOT_OPENED",e[e.WHITEBOARD_INVALID_EXPORT_FORMAT=8019]="WHITEBOARD_INVALID_EXPORT_FORMAT",e[e.WHITEBOARD_NEED_RETRY=8020]="WHITEBOARD_NEED_RETRY",e[e.WHITEBOARD_REQUIRE_SHARING_STOP=8021]="WHITEBOARD_REQUIRE_SHARING_STOP",e[e.WHITEBOARD_ALREADY_OPEN=8022]="WHITEBOARD_ALREADY_OPEN",e[e.WHITEBOARD_AND_SHARING_CONFLICT=8023]="WHITEBOARD_AND_SHARING_CONFLICT",e[e.WHITEBOARD_AND_ANNOTATION_CONFLICT=8024]="WHITEBOARD_AND_ANNOTATION_CONFLICT",e[e.WHITEBOARD_DASHBOARD_IFRAME_NOT_FOUND=8030]="WHITEBOARD_DASHBOARD_IFRAME_NOT_FOUND",e}({});const Ma="WHITEBOARD_STATUS_EVENTS",Pa="WHITEBOARD_DASHBOARD_STATUS_EVENTS",La="WHITEBOARD_PRIVILEGE_STATUS_EVENTS",ka="WHITEBOARD_MESSAGE_EVENTS";let Ua=function(e){return e.WhiteboardStatusChange="whiteboard-status-change",e.WhiteboardDashboardStatusChange="whiteboard-dashboard-status-change",e.WhiteboardPrivilegeStatus="whiteboard-privilege-change",e}({});const Va={...Xo,...sn,...mn,...fn,...Nn,...Ki,...Si,...Ps,...ws,...Ys,...ga,...va,"closed-caption-message":[{event:"CC_RECEIVE_MESSAGE",payload:e=>e}],"closed-caption-lt-status":[{event:"LT_STATUS_CHANGE",payload:e=>e}],"closed-caption-lt-message":[{event:"LT_RECEIVE_MESSAGE",payload:e=>e}],"closed-caption-status":[{event:"CC_ASSIGN_CC_EDITOR_SUCCESS",payload:e=>e},{event:"CC_STATUS_CHANGE",payload:e=>e}],...ya,..._a,...Ca,...Ra,...wa,[Ua.WhiteboardStatusChange]:[{event:Ma,payload:e=>e}],[Ua.WhiteboardDashboardStatusChange]:[{event:Pa,payload:e=>e}],[Ua.WhiteboardPrivilegeStatus]:[{event:La,payload:e=>e}]},Ba=function(e){return{all:e=e||new Map,on:function(t,r){var o=e.get(t);o?o.push(r):e.set(t,[r])},off:function(t,r){var o=e.get(t);o&&(r?o.splice(o.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var o=e.get(t);o&&o.slice().map((function(e){e(r)})),(o=e.get("*"))&&o.slice().map((function(e){e(t,r)}))}}}(),Ha=new Map,ja=new Array,Fa=[zo,$o,Go];let Wa,xa;function $a(){return e=>e.pipe(Pt((function(e,t){e.subscribe(Lt(t,(function(e){t.next(Or.createNext(e))}),(function(){t.next(Or.createComplete()),t.complete()}),(function(e){t.next(Or.createError(e)),t.complete()})))})),Gr((e=>"C"===e.kind?Tr(e).pipe(Ir(er)):Tr(e))),Pt((function(e,t){e.subscribe(Lt(t,(function(e){return Dr(e,t)})))})))}const Ga=(e,t=void 0)=>{Ba.emit(e,t)};function za(e){return Fa.includes(e)?eo(Ba,e):(Wa&&xa||(Wa=new Bt,xa=io(...Fa.map((e=>eo(Ba,e)))).subscribe(Wa)),eo(Ba,e).pipe(Co(Wa)))}const qa=e=>new Promise(((t,r)=>{if(e.fail&&e.fail.length>0){var o;const n=Fa.filter((t=>{var r;return!(null!==(r=e.fail)&&void 0!==r&&r.includes(t))})),i=n.length>0?io(...n.map((e=>za(e).pipe(go(1),Vr((()=>({type:tt,reason:e,errorCode:Na.OPERATION_CANCELLED}))))))):so;lo(za(e.success).pipe(go(1),$a(),mo(null!==(o=e.fail)&&void 0!==o&&o.some((e=>Fa.includes(e)))?so:nr)),io(...e.fail.map((e=>za(e).pipe(go(1),$a(),Gr((t=>Rr({type:e,payload:t}))))))),i).subscribe({next:e=>e&&e.type===tt?r(e):t(e),error(e){if("object"==typeof e.payload){const t={...e.payload};e.payload instanceof Error&&Object.assign(t,{name:e.payload.name,message:e.payload.message}),r({type:e.type,...t})}else void 0===e.payload?r({type:e.type}):r(e)}})}else za(e.success).pipe(go(1)).subscribe((e=>t(e)))})),Ka=(e,t,r=1e4)=>new Promise(((o,n)=>{let i=nr;"string"==typeof e?i=za(e).pipe(go(1)):(i=za(e.event),e.operations&&(i=e.operations.reduce(((e,t)=>e.pipe(t)),i))),lo(i,oo(r).pipe(Gr((()=>Rr("timeout"))))).subscribe({next(e){if(t){const r=t(e);"boolean"==typeof r?r?o(""):n({type:Qe,errorCode:Na.INTERNAL_ERROR}):0===r.ret?o(r.body):n({type:Qe,errorCode:Na.INTERNAL_ERROR,reason:r.body})}else o(e)},error(){n({type:Ye,errorCode:Na.OPERATION_TIMEOUT})}})})),Ja=(e,t)=>void 0!==t?za(e).pipe(go(t)):za(e);function Qa(e){const t=Fa.map((e=>Ja(e,1)));return e&&t.push(e),lo(...t)}const Ya=()=>{var e;ja.forEach((e=>{e.unsubscribe()})),ja.length=0,Ha.clear(),Wa&&(Wa.complete(),null===(e=xa)||void 0===e||e.unsubscribe(),Wa=void 0)};var Za="NOT_FOUND",Xa=function(e,t){return e===t};function eu(e,t){var r,o,n="object"==typeof t?t:{equalityCheck:t},i=n.equalityCheck,s=void 0===i?Xa:i,a=n.maxSize,u=void 0===a?1:a,d=n.resultEqualityCheck,c=function(e){return function(t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var o=t.length,n=0;n<o;n++)if(!e(t[n],r[n]))return!1;return!0}}(s),l=1===u?(r=c,{get:function(e){return o&&r(o.key,e)?o.value:Za},put:function(e,t){o={key:e,value:t}},getEntries:function(){return o?[o]:[]},clear:function(){o=void 0}}):function(e,t){var r=[];function o(e){var o=r.findIndex((function(r){return t(e,r.key)}));if(o>-1){var n=r[o];return o>0&&(r.splice(o,1),r.unshift(n)),n.value}return Za}return{get:o,put:function(t,n){o(t)===Za&&(r.unshift({key:t,value:n}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(u,c);function p(){var t=l.get(arguments);if(t===Za){if(t=e.apply(null,arguments),d){var r=l.getEntries().find((function(e){return d(e.value,t)}));r&&(t=r.value)}l.put(arguments,t)}return t}return p.clearCache=function(){return l.clear()},p}function tu(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];var i,s=0,a={memoizeOptions:void 0},u=o.pop();if("object"==typeof u&&(a=u,u=o.pop()),"function"!=typeof u)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof u+"]");var d=a.memoizeOptions,c=void 0===d?r:d,l=Array.isArray(c)?c:[c],p=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}(o),h=e.apply(void 0,[function(){return s++,u.apply(null,arguments)}].concat(l)),m=e((function(){for(var e=[],t=p.length,r=0;r<t;r++)e.push(p[r].apply(null,arguments));return i=h.apply(null,e)}));return Object.assign(m,{resultFunc:u,memoizedResultFunc:h,dependencies:p,lastResult:function(){return i},recomputations:function(){return s},resetRecomputations:function(){return s=0}}),m}}var ru=tu(eu);const ou=({participants:{attendeesList:e}})=>e,nu=({meeting:{userId:e}})=>e,iu=({participants:{xmppAttendeeList:e}})=>e;let su=function(e){return e[e.Attendee=0]="Attendee",e[e.Host=1]="Host",e[e.Owner=4]="Owner",e[e.ViewOnly=8]="ViewOnly",e[e.HostOwner=5]="HostOwner",e[e.ViewOnlyCanTalk=24]="ViewOnlyCanTalk",e}({}),au=function(e){return e[e.Host=10]="Host",e[e.Panelist=20]="Panelist",e[e.Attendee=30]="Attendee",e}({}),uu=function(e){return e[e.Client=9]="Client",e[e.Phone=5]="Phone",e[e.H323=15]="H323",e[e.Assitant=51]="Assitant",e}({});const du=e=>(e&su.Host)===su.Host,cu=e=>(e&uu.Phone)===uu.Phone,lu=e=>e===su.ViewOnlyCanTalk,pu=e=>(e&su.ViewOnly)===su.ViewOnly;let hu=function(e){return e[e.Automatically=1]="Automatically",e[e.Manually=2]="Manually",e[e.SelfSelect=3]="SelfSelect",e}({}),mu=function(e){return e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Closing=3]="Closing",e[e.Closed=4]="Closed",e}({}),gu=function(e){return e[e.NoToken=1]="NoToken",e[e.GotToken=2]="GotToken",e[e.Started=3]="Started",e[e.Closing=4]="Closing",e[e.Closed=5]="Closed",e}({}),Su=function(e){return e.Initial="initial",e.Invited="invited",e.Joining="joining",e.InRoom="in room",e.Leaving="leaving",e.TimeUp="time up",e.MainSession="main session",e}({}),vu=function(e){return e.Join="joinRequest",e.Switch="switchRequest",e.Leave="leaveRequest",e.Broadcast="messageText",e.HelpReq="helpRequest",e.HelpRes="helpResponse",e.CoHostWantJoinThisBo="wantJoinThisBO",e.BOActivity="BOActivity",e}({});const fu="Subsession";let yu=function(e){return e[e.Received=0]="Received",e[e.Busy=1]="Busy",e[e.Ignore=2]="Ignore",e[e.AlreadyInRoom=3]="AlreadyInRoom",e}({}),Eu=function(e){return e[e.AskToLeave=0]="AskToLeave",e[e.ClosingRoom=1]="ClosingRoom",e}({}),_u=function(e){return e[e.Active=0]="Active",e[e.Ask=1]="Ask",e}({}),Iu=function(e){return e[e.Connect=1]="Connect",e[e.Muted=2]="Muted",e[e.Voip=4]="Voip",e}({}),Au=function(e){return e[e.Connect=8]="Connect",e[e.On=16]="On",e}({}),bu=function(e){return e[e.Share=32]="Share",e[e.ShareAudio=64]="ShareAudio",e}({});const Cu=({breakoutRoom:e})=>e&&e.controlStatus,Tu=({breakoutRoom:e})=>e&&e.currentRoom.status,Ru=ru([nu,ou],((e,t)=>t.find((t=>t.userId===e)))),Ou=ru([Ru],(e=>(null==e?void 0:e.isHost)||(null==e?void 0:e.bCoHost))),Du=ru([Ru],(e=>null==e?void 0:e.isHost)),wu=ru([iu],(e=>e.filter((e=>e.userRole===au.Attendee)))),Nu=ru([ou],(e=>e.filter((e=>e.bHold&&!e.bid)))),Mu=ru([ou,Cu,Tu],((e,t,r)=>t!==mu.InProgress&&t!==mu.Closing||r!==Su.InRoom?e.filter((e=>!e.bHold&&!e.bid)):e.filter((e=>!e.bHold)))),Pu=ru([({participants:{assistantList:e}})=>e],(e=>e)),Lu=ru([Mu],(e=>e.find((e=>e.isHost)))),ku=ru([Mu],(e=>e.filter((e=>e.bCoHost)))),Uu=ru([Ru,Mu],((e,t)=>t.filter((t=>t.userId!==(null==e?void 0:e.userId)))));ru([iu],(e=>e.reduce(((e,t)=>{const{jid:r}=t;return Object.assign(e,{[r]:t}),e}),{}))),ru([iu,({meeting:{jid:e}})=>e],((e,t)=>{var r;return null===(r=e.find((e=>e.jid===t)))||void 0===r?void 0:r.userId}));const Vu=ru([ou],((e=[])=>e.some((e=>(null==e?void 0:e.bLocalRecord)===_n.Start)))),Bu=ru([Cu,({meeting:e})=>e&&e.meetingOptions,ou,Du],((e,t,r,o)=>{const n=r.filter((e=>e.bCoHost)),{moveToWRIfHostLeave:i}=t,s=e===mu.InProgress;return o&&!!i&&n.length<=0&&!s&&r.length>1}));ru([ou,Tu,({breakoutRoom:e})=>e&&e.mainSessionAttendeeList],((e,t,r)=>(t===Su.InRoom?r:e).filter((e=>{return!(e.bHold||e.isHost||e.audio===Ee.Phone||cu(null==e?void 0:e.userType)||(t=null==e?void 0:e.caps,r=null==e?void 0:e.bMultiStreamVideoUser,((e,t)=>(e=>!!(128&e))(e)&&void 0!==t)(t,r)&&r));var t,r}))));class Hu{constructor(e){this._cancelError=new Error("request for lock canceled"),this._locked=void 0,this._queue=[],this._waiters=[],this._currentReleaser=void 0,e&&(this._cancelError=e),this._locked=!1}acquire(){const e=this.isLocked(),t=new Promise(((e,t)=>this._queue.push({resolve:e,reject:t})));return e||this._dispatch(),t}async runExclusive(e){const t=await this.acquire();try{return await e()}finally{t()}}async waitForUnlock(){return this.isLocked()?new Promise((e=>this._waiters.push({resolve:e}))):Promise.resolve()}isLocked(){return this._locked}release(){if(this._currentReleaser){const e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach((e=>e.reject(this._cancelError))),this._queue=[]}_dispatch(){const e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._locked=!1,this._resolveWaiters(),this._dispatch())},this._locked=!0,e.resolve(this._currentReleaser)}_resolveWaiters(){this._waiters.forEach((e=>e.resolve())),this._waiters=[]}}let ju=function(e){return e.VideoEncode="0",e.VideoDecode="1",e.AudioEncode="2",e.AudioDecode="3",e.SharingEncode="4",e.SharingDecode="5",e.Common="7",e}({});class Fu{static getInstance(){return void 0===this.agentInstance&&(this.agentInstance=new Fu),this.agentInstance}constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.constraints=void 0,this.svcUrl=void 0,this.meetingNumber=void 0,this.confId=void 0,this.currentUserId=void 0,this.receivedSharingCanvas=void 0,this.sharingCanvas=void 0,this.annotationCanvas=void 0,this.annotationPresenterCanvas=void 0,this.mediaOptions=void 0,this.inProgress=void 0,this.callbackList=[]}init(e){!this.instance&&window.JsMediaSDK_Instance&&(this.instance=new window.JsMediaSDK_Instance(e))}setAssetsAndConstraint(e,t){this.assetsPath=e,this.constraints=t,this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this)}onMediaSDKCallback(e,t){this.callbackList.length>0&&this.callbackList.forEach((r=>r(e,t)))}registerCallback(e){this.callbackList.push(e)}unregisterCallback(e){this.callbackList=this.callbackList.filter((t=>t!==e))}static isSupportVideoEncodeHardwareAcceleration(){return window.JsMediaSDK_Instance.util.IsSupportVideoEncodeHardwareAcceleration()}static isSupportVideoDecodeHardwareAcceleration(){return window.JsMediaSDK_Instance.util.IsSupportVideoDecodeHardwareAcceleration()}static isCompatibleHardwareForEncode(){var e;return T.isSupportOffscreenCanvas&&0==(null===(e=window.JsMediaSDK_Instance)||void 0===e?void 0:e.util.AdapterWhiteListCheckForEncoder())}static getPTZCapability(){var e,t,r,o,n,i;return{pan:!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||null===(t=e.isSupportCameraPan)||void 0===t||!t.call(e)),tilt:!(null===(r=window.JsMediaSDK_Instance)||void 0===r||null===(r=r.util)||void 0===r||null===(o=r.isSupportCameraTilt)||void 0===o||!o.call(r)),zoom:!(null===(n=window.JsMediaSDK_Instance)||void 0===n||null===(n=n.util)||void 0===n||null===(i=n.isSupportCameraZoom)||void 0===i||!i.call(n))}}static isSupportVideoShare(){var e,t;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||null===(t=e.isSupportVideoShareReceive)||void 0===t||!t.call(e))}static getVideoProcessorCapability(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||null===(t=t.util)||void 0===t||!t.isSupportVideoProcessor(e))}static getAudioProcessorCapability(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||null===(t=t.util)||void 0===t||!t.isSupportAudioProcessor(e))}static getShareProcessorCapability(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||null===(t=t.util)||void 0===t||!t.isSupportShareProcessor(e))}static isSupportVideoShareSend(){var e,t;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||null===(t=e.isSupportVideoShareSend)||void 0===t||!t.call(e))}static isSupportSending720P(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||!e.get720pcapacity())}static isSupportSubscribing1080P(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util)||void 0===e||!e.getsub1080pcapacity())}static isSupportOpenMicWhenShareAudio(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||!t.util.isSupportOpenMicWhenShareAudio(e))}static isSupportMediaPlaybackAsVideoInput(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util.videoToMediaStreamManager)||void 0===e||!e.isSupported())}static isSupportMediaPlaybackAsAudioInput(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||null===(e=e.util.audioToMediaStreamMananger)||void 0===e||!e.isSupported())}static isSupportAudioDenoise(e,t){var r;return!(null===(r=window.JsMediaSDK_Instance)||void 0===r||!r.util.isSupportAudioDenoise(e,t))}static isSupportAudioBridgeAVSync(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||!e.util.isSupportAudioBridgeAvsync())}static getAudioFeatureFlag(e){var t;return null===(t=window.JsMediaSDK_Instance)||void 0===t?void 0:t.util.getAudioFeatureFlags(e)}static isSupportShareMultiStream(){var e;return null===(e=window.JsMediaSDK_Instance)||void 0===e?void 0:e.util.isSupportShareMultiStream()}static isSupportVideoLTR(){var e;return null===(e=window.JsMediaSDK_Instance)||void 0===e?void 0:e.util.isSupportVideoLTR()}static isSupportStereoAudio(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||!e.util.isBrowserSupportStereo())}static isSupportFullHDVideo(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||!t.util.isSupportSendVideoFullHD(e))}static isSupportFullHDVideoShare(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||!t.util.isSupportSendVideoShareFullHD(e))}static isRenderSelfViewWithVideoElement(){var e;return!(null===(e=window.JsMediaSDK_Instance)||void 0===e||!e.util.isSelfPreviewRenderWithVideo())}static getWebRTCCapability(e,t,r){var o;return null===(o=window.JsMediaSDK_Instance)||void 0===o?void 0:o.util.evaluateWebRTCStrategy(e,t,r)}static getMaxCountRender(e,t,r){var o;const n=r?{disableRenderLimits:!0}:t;return null===(o=window.JsMediaSDK_Instance)||void 0===o?void 0:o.util.getMaxCountRender(e,n)}static isSupportMultipleView(){var e;return null===(e=window.JsMediaSDK_Instance)||void 0===e?void 0:e.util.isSupportMultiViewAPI()}static isSupportShare2ndAudioDevice(e){var t;return!(null===(t=window.JsMediaSDK_Instance)||void 0===t||!t.util.isSupportShare2ndAudioDevice(e))}static getWebRtcAudioMode(e,t,r,o){var n;return null===(n=window.JsMediaSDK_Instance)||void 0===n?void 0:n.util.evaluateAudioStrategy(e,t,r,o)}static getAnnotationCapability(e){var t;return null===(t=window.JsMediaSDK_Instance)||void 0===t?void 0:t.util.getAnnotationCapability(e)}static initVideoPlayer(e){var t;return null===(t=window.JsMediaSDK_Instance)||void 0===t?void 0:t.initVideoPlayer(e)}connect({svcUrl:e,meetingNumber:t,conId:r,confId:o,e2eEncrypt:n,isViewOnly:i,currentUserId:s,isWebinar:a,enableWebtransport:u=!1,webtransportPort:d,isWebRtcVideoCapable:c,rendererType:l,isWebRtcAudioCapable:p,mediasdkConfig:h,enforceMultipleVideos:m,disableRenderLimits:g,reportDomain:S,abToken:v,webrtcMode:f}){var y,E,_,I;const{isSupportEssentialAudioAndVideoAbility:A,isSupportAudioWorklet:b,isSupportSendScreenSharing:C}=T;this.svcUrl=e,this.meetingNumber=t,this.confId=r,this.currentUserId=s;const R=Fu.getMaxCountRender(c,m,g);if(null===(y=this.instance)||void 0===y||y.setProps({callback:this.onMediaSDKCallback,isPreviewMode:!1,meetingParams:{cid:r,confId:o,userId:s,rwgHost:e,nginxHost:S,abToken:v,e2eEncrypt:n,enableWebtransport:u,webtransportPort:d,rwgToMediaSDKConfig:h,webrtcMode:f},mediaParams:{videoDecodeThreadNum:R,rendererType:l,isEnableHD:!0,isEnableHW:!0}}),!0===(null===(E=this.constraints)||void 0===E?void 0:E.audio)&&A){const e=b||p;var O,D;(a||e)&&(null===(O=this.instance)||void 0===O||O.initAudioDecode()),!e||a&&i||null===(D=this.instance)||void 0===D||D.initAudioEncode()}var w,N,M,P;!0===(null===(_=this.constraints)||void 0===_?void 0:_.video)&&A&&(null===(w=this.instance)||void 0===w||w.initVideoDecode(),a&&i||null===(N=this.instance)||void 0===N||N.initVideoEncode()),!0===(null===(I=this.constraints)||void 0===I?void 0:I.screen)&&A&&(null===(M=this.instance)||void 0===M||M.initSharingDecode(),!C||a&&i||null===(P=this.instance)||void 0===P||P.initSharingEncode()),this.inProgress=!0}async addProcessor(e){var t;return await(null===(t=this.instance)||void 0===t?void 0:t.addProcessor(e))}async startProcessor(e){var t;await(null===(t=this.instance)||void 0===t?void 0:t.startProcessor(e))}async stopProcessor(e){var t;await(null===(t=this.instance)||void 0===t?void 0:t.stopProcessor(e))}async destroy(){var e;this.callbackList=[],[ju.AudioDecode,ju.AudioEncode,ju.VideoDecode,ju.VideoEncode].forEach((e=>{var t;null===(t=this.instance)||void 0===t||t.updateQosSubscription(!1,e)}));const t=null===(e=this.instance)||void 0===e?void 0:e.destroy.bind(this.instance);this.instance=null,this.inProgress=!1,await(null==t?void 0:t())}disconnect(){var e,t;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(17,{}),null===(t=this.instance)||void 0===t||t.JsMediaSDK_UnInit()}muteAudio(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(8,{ssrc:0})}unmuteAudio(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(7,{ssrc:0,AudioSelectValue:0})}joinComputerAudio(e,t,r,o,n,i,s){var a;const u=s?{...s,enableHID:!0}:{enableHID:!1};return null===(a=this.instance)||void 0===a?void 0:a.Notify_MeidaSDK(22,{CaptureAudio:o,CaptureAudioInfo:{ssrc:e,AudioSelectValue:"default"===t?null:t,...u,audioProfile:n},speakerInfo:{defaultDeviceId:r},audioBridge:!!i})}leaveComputerAudio(){var e;return null===(e=this.instance)||void 0===e?void 0:e.Notify_MeidaSDK(21,null)}joinSharingAudio({ssrc:e,microphoneDeviceId:t,speakerDeviceId:r,isCaptureAudio:o,audioBridge:n}){var i;return null===(i=this.instance)||void 0===i?void 0:i.Notify_MeidaSDK(72,{CaptureAudio:o,CaptureAudioInfo:{ssrc:e,AudioSelectValue:"default"===t?null:t},speakerInfo:{defaultDeviceId:r},checkAutoplay:!1,audioBridge:!!n})}leaveSharingAudio(e){var t;return null===(t=this.instance)||void 0===t?void 0:t.Notify_MeidaSDK(73,{isPause:e?1:0})}changeSpeaker(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(11,{ssrc:0,AudioSelectValue:e})}changeMicrophone(e,t,r){var o;null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(18,{ssrc:0,AudioSelectValue:"default"===e?null:e,microphoneLabel:null!=t?t:"default",defaultMuted:r})}restoreWebRTC(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(19,{ssrc:0,AudioSelectValue:"default"===e?null:e})}renderVideo(e,t,r,o,n,i,s,a,u,d,l){var p;const h={userId:t,width:o,height:n,x:i,y:s,quality:a,isMyself:u,canvas:e,enableWaterMark:l,waterMarkText:d,zone:r};c(e)&&Object.assign(h,{videodom:e}),null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(1,h)}stopRenderVideo(e,t,r,o,n=!1){var i;null===(i=this.instance)||void 0===i||i.Notify_MeidaSDK(2,{canvas:e,userId:t,RGBA:o,doNotClean:n,zone:r})}subscribeVideo(e,t,r){var o;null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(132,[{id:e,size:t,bOn:r}])}unsubscribeVideo(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(133,[{id:e}])}startCaptureVideo(e,t,r,o,n,i,s=!1,a,u,d){var c;const l=a?Fu.getPTZCapability():void 0;null===(c=this.instance)||void 0===c||c.Notify_MeidaSDK(3,{ssid:e,width:r,height:o,fps:u,video:n,usingFacingMode:i,VideoSelectValue:"default"===t?null:t,disableOriginalRatio:s,customConstraints:d,...l})}stopCaptureVideo(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(4,{ssrc:0})}changeCamera(e,t,r,o){var n;const i=o?{}:{customConstraints:void 0};null===(n=this.instance)||void 0===n||n.Notify_MeidaSDK(12,{VideoSelectValue:"default"===e?null:e,usingFacingMode:!!t,...r||{},...i})}switchCanvasForVideoCapture(e){var t;let r=e;"string"==typeof e&&(r=[e]),null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(25,r)}renderSharing(e,t,r=!1,o="",n=!1){var i;this.receivedSharingCanvas=t,null===(i=this.instance)||void 0===i||i.Notify_MeidaSDK(23,{width:0,height:0,ssrc:e,canvas:t,enableWaterMark:r,waterMarkText:o,isFromMainSession:n})}stopRenderSharing(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(24,{})}startShareWhiteboard(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(30.1,{mode:1,ssid:e,canvas:"canvas"})}stopShareWhiteboard(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(31.1,{mode:1,ssid:e,canvas:"canvas"})}messageWhiteboard(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(120,e)}switchSharingSource(e,t=!1){var r;this.receivedSharingCanvas&&(this.stopRenderSharing(),this.renderSharing(e,this.receivedSharingCanvas,!1,"",t)),null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(36,{ssrc:e,isFromMainSession:Number(t)})}ajustmentReceivedSharingCanvas(e,t){if(this.receivedSharingCanvas&&e&&t)try{if(T.isAndroidOrIOSBrowser){const[r,o]=[1280,720],n=Math.max(e/r,t/o,1);this.receivedSharingCanvas.width=Math.floor(e/n),this.receivedSharingCanvas.height=Math.floor(t/n)}else this.receivedSharingCanvas.width=e,this.receivedSharingCanvas.height=t}catch(e){}}startRemoteControl(e,t,r){var o;null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(26,{socketURL:`wss://${this.svcUrl}`,meetingID:this.meetingNumber,condID:this.confId,os:t,dom:e,...r})}stopRemoteControl(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(28)}resendRemoteControlPositionPDU(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(41)}updateRemoteControlProperties(e){var t;const{dimension:r,...o}=e;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(27,{...r,...o})}enableShareEncode(){var e;null===(e=this.instance)||void 0===e||e.initSharingEncode()}startDesktopSharing(e,t,r,o,n=!0,i,s,a,u=!1){var d;this.sharingCanvas=t;const c={};o&&Object.assign(c,{share2ndCamera:!0,share2ndCameraParams:{VideoSelectValue:"default"===o.cameraId?null:o.cameraId,width:o.width,height:o.height}}),void 0!==i&&Object.assign(c,{videoParams:{displaySurface:i}}),void 0!==a&&Object.assign(c,{otherParams:{...a}}),t instanceof HTMLVideoElement&&t.setAttribute("playsinline",""),null===(d=this.instance)||void 0===d||d.Notify_MeidaSDK(30,{ssid:e,canvas:t,video:r,...c,showShareAudioOption:n,sourceId:s,noPreview:!0,isCamFeedShare:u})}stopDesktopSharing(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(31,{})}pauseDesktopSharing(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(32,{})}updateSharingInfo(e,t){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(153,{shareSessionId:e,userName:t})}resumeDesktopSharing(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(33,{})}selectLanguageChannelForNewLTT(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(57,{lang:e})}changeSharingSecondCamera(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(49,{VideoSelectValue:e})}ajustmentSharingCanvas(e,t){if(this.sharingCanvas)try{this.sharingCanvas.width=e,this.sharingCanvas.height=t}catch(e){}}startPresenterAnnotation(e,t,r){const o={shareSessionId:e,presenterId:t,userName:r};var n;this.sharingCanvas&&(this.annotationPresenterCanvas||(this.annotationPresenterCanvas=h(this.sharingCanvas,se+"PRESENTER",(()=>{this.updatePresenterAnnotationCanvas()}))),this.annotationPresenterCanvas&&(Object.assign(o,{localShareCanvas:this.sharingCanvas,annoPresenterCanvas:this.annotationPresenterCanvas,isPresenter:!0}),null===(n=this.instance)||void 0===n||n.Notify_MeidaSDK(150,o),this.updatePresenterAnnotationCanvas()))}startViewerAnnotation(e,t,r){const o={shareSessionId:e,presenterId:t,userName:r};var n,i;this.receivedSharingCanvas?(this.annotationCanvas?(this.annotationCanvas.parentNode&&(this.annotationCanvas.parentNode.style.display="block"),this.annotationCanvas.style.display="block"):this.annotationCanvas=h(this.receivedSharingCanvas,se+"VIEWER",(()=>{this.updateViewerAnnotationCanvas()})),this.annotationCanvas&&(Object.assign(o,{canvas:this.receivedSharingCanvas,annoCanvas:this.annotationCanvas,isPresenter:!1}),null===(n=this.instance)||void 0===n||n.Notify_MeidaSDK(150,o),this.updateViewerAnnotationCanvas())):null===(i=this.instance)||void 0===i||i.Notify_MeidaSDK(150,{...o,isPresenter:!1})}stopPresenterAnnotation(e){var t;this.annotationPresenterCanvas&&"function"==typeof this.annotationPresenterCanvas._overlayCleanup&&(this.annotationPresenterCanvas._overlayCleanup(),this.annotationPresenterCanvas=null),null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(156,{presenterId:e})}hideViewerAnnotationCanvas(){this.annotationCanvas&&(this.annotationCanvas.style.display="none",this.annotationCanvas.parentNode)&&(this.annotationCanvas.parentNode.style.display="none")}removeViewerAnnotationCanvas(){this.annotationCanvas&&"function"==typeof this.annotationCanvas._overlayCleanup&&(this.annotationCanvas._overlayCleanup(),this.annotationCanvas=null)}stopViewerAnnotation(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(156,{presenterId:e})}annotateAction(e,t={}){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(ze,{actionType:e,...t})}updatePresenterAnnotationCanvas(){if(this.sharingCanvas){var e,t;const{size:r,position:o}=m(this.sharingCanvas);null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(ze,{actionType:He.ANNO_CANVAS_SIZE_UPDATE,...r}),null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(ze,{actionType:He.UPDATE_REMOTE_POSITION_INFO,...o})}}updateViewerAnnotationCanvas(){if(this.receivedSharingCanvas){var e,t;const{size:r,position:o}=m(this.receivedSharingCanvas);null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(ze,{actionType:He.ANNO_CANVAS_SIZE_UPDATE,...r}),null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(ze,{actionType:He.UPDATE_REMOTE_POSITION_INFO,...o})}}enableAudioEncode(){var e;null===(e=this.instance)||void 0===e||e.initAudioEncode()}sendUserNodeList(e,t){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(43,{userList:e,encryptKey:t})}updateRenderedSharingDimension(e,t){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(44,{width:e,height:t})}pauseOrResumeAudio(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(45,{bPause:e})}updateRenderedVideoCanvasDimension(e,t,r){var o;null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(46,{canvas:e,width:t,height:r})}clearVideoCanvas(e,t){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(47,{id:e,RGBA:t})}adjustRenderedVideoPosition(e,t,r,o,n,i,s,a){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(48,{userId:t,x:o,y:n,width:i,height:s,canvas:e,zone:r,RGBA:a})}mirrorVideo(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(75,{isMirrorMyVideo:e})}updateUserMediaSN(e){var t,r,o;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(80,{isFromMainSession:Number(e.isFromMainSession),mediaActionType:e.iVType,body:{add:null!==(r=e.added)&&void 0!==r?r:[],remove:null!==(o=e.removed)&&void 0!==o?o:[]}})}updateMediaParams(e){var t;const{iVType:r,isFromMainSession:o,updateParams:n}=e;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(81,{mediaActionType:r,isFromMainSession:Number(o),updateParams:n})}createMainSessionChannel(e,t){var r,o;"sharing"===e?null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(84,t):null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(85,t)}addReceivedSharingChannelType(e){var t;const{isFromMainSession:r,...o}=e;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(82,{isFromMainSession:Number(r),...o})}removeReceivedSharingChannelType(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(83,{isFromMainSession:Number(e.isFromMainSession),ssrc:e.ssrc})}beforeReportToGlobalTracing(){var e,t;null===(e=this.instance)||void 0===e||null===(t=e.beforeReportToGlobalTracing)||void 0===t||t.call(e)}enableHardwareAccelerationForVideoDecode(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(70,{enable:e})}enableHardwareAccelerationForVideoEncode(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(71,{enable:e})}setSharingAudioVolume(e,t,r,o=!1){var n;null===(n=this.instance)||void 0===n||n.Notify_MeidaSDK(74,{userid:e>>10,shareVolume:t?0:100,isFromMainSession:r,isSecondAudio:o})}subscribeToQos(e,t){e.forEach((e=>{var r;null===(r=this.instance)||void 0===r||r.updateQosSubscription(!0,e,t)}))}subscribeWebRTCStatistics(e,t){var r;null===(r=this.instance)||void 0===r||r.updateStatisticsSubscription(e,t)}unsubscribeFromQos(e){e.forEach((e=>{var t;null===(t=this.instance)||void 0===t||t.updateQosSubscription(!1,e)}))}passThroughRWGMessage(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(40,e)}startVirtualBackgroundSetting(e,t,r,o,n,i,s=!1,a){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(91,{canvas:e,bgdom:t,width:n,height:i,ssid:r,VideoSelectValue:"default"===o?null:o,disableOriginalRatio:s,id:a})}updateVirtualBackgroundImage(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(92,{bgdom:e})}stopVirtualBackgroundSetting(e=!1){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(93,{isSwitch:e})}startMaskSetting(e,t,r,o,n,i,s,a,u){var d;null===(d=this.instance)||void 0===d||d.Notify_MeidaSDK(62,{canvas:e,maskdom:r,bgdom:t,dx:0,dy:0,dWidth:i,dHeight:s,width:a,height:u,ssid:o,VideoSelectValue:"default"===n?null:n})}updateMaskBackgroundImage(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(63,{bgdom:e})}updateMaskClip(e,t,r){var o;null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(64,{maskdom:e,dx:0,dy:0,dWidth:t,dHeight:r})}stopMaskSetting(e=!1){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(65,{isSwitch:e})}enableVideoObserver(e,t=!1){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(99,{enable:e,fpsdisbale:t})}enableShareAudioToBreakoutRoom(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(86,{enable:e})}sendUserAudioStatus(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(51,e)}muteOrUnmuteOtherAudio(e,t){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(50,{userId:e,volume:t?0:100})}adjustOtherAudioVolume(e,t){var r;null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(50,{userId:e,volume:t})}notifyWBMessage(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(120,e)}notifySDKMeetingReady(){var e;null===(e=this.instance)||void 0===e||e.Notify_MeidaSDK(113)}movePTZCamera(e){var t;return null===(t=window.JsMediaSDK_Instance)||void 0===t||null===(t=t.util)||void 0===t?void 0:t.queryPTZPermisson().then((t=>{var r;return t?(null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(53,e),Promise.resolve("")):Promise.reject("Cannot move camera without permission granted")}))}switchSharingMode(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(101,{mode:e})}updateVideoHDValue(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK("update_videohd_value",{videohd:e})}updateVideoFullhdValue(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK("update_videofullhd_value",{videofullhd:e})}changeAudioProfile(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(126,e)}enableSyncButtonsOnHeadset(e,t,r){var o;null===(o=this.instance)||void 0===o||o.Notify_MeidaSDK(100,{enable:e,microphoneLabel:t,defaultMuted:r})}stopAllIncomingAudio(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(123,e)}isSharingEntireScreen(){var e,t;const r=null===(e=this.instance)||void 0===e||null===(t=e.getShareStreamInfo)||void 0===t?void 0:t.call(e);if(r){const{displaySurface:e}=r;return!e||"monitor"===e}return!1}getShareStreamInfo(e=!1){var t,r;const o=null===(t=this.instance)||void 0===t||null===(r=t.getShareStreamInfo)||void 0===r?void 0:r.call(t);if(o){const{deviceId:t,width:r,height:n}=o,i={deviceId:t,width:r,height:n};return e&&Object.assign(i,{displaySurface:o.displaySurface}),i}return{}}prefetchVideoSsrc(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(110,{ssrc:e})}cancelPrefetchVideoSsrc(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(112,{ssrc:e,haddata:!1})}setMobileRotateMode(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(124,{isLandScape:e})}changeActiveVideoSsrc(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(13,{ssrc:e})}setAudioCodecMode(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(122,{mode:e})}startRemoteControlQRCheck(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(54,{enable:e})}broadcastVoiceToBreakoutRoom(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(87,{enable:e})}share2ndAudio(e,t){var r;const o={audioOnly:!0,deviceId:"default"===e?null:e};t&&Object.assign(o,t),null===(r=this.instance)||void 0===r||r.Notify_MeidaSDK(129,o)}enablePlayAudioFileLocally(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(138,e)}bypassMediaMessage(e){var t;null===(t=this.instance)||void 0===t||t.Notify_MeidaSDK(128,e)}screenshot(e,t){var r;return null===(r=this.instance)||void 0===r?void 0:r.ScreenShot(e,t)}}Fu.agentInstance=void 0;const Wu="function"==typeof Buffer,xu="function"==typeof TextDecoder?new TextDecoder:void 0,$u="function"==typeof TextEncoder?new TextEncoder:void 0,Gu=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),zu=(()=>{let e={};return Gu.forEach(((t,r)=>e[t]=r)),e})(),qu=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Ku=String.fromCharCode.bind(String),Ju="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Qu=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),Yu=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Zu="function"==typeof btoa?e=>btoa(e):Wu?e=>Buffer.from(e,"binary").toString("base64"):e=>{let t,r,o,n,i="";const s=e.length%3;for(let s=0;s<e.length;){if((r=e.charCodeAt(s++))>255||(o=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");t=r<<16|o<<8|n,i+=Gu[t>>18&63]+Gu[t>>12&63]+Gu[t>>6&63]+Gu[63&t]}return s?i.slice(0,s-3)+"===".substring(s):i},Xu=Wu?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,o=e.length;r<o;r+=4096)t.push(Ku.apply(null,e.subarray(r,r+4096)));return Zu(t.join(""))},ed=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?Ku(192|t>>>6)+Ku(128|63&t):Ku(224|t>>>12&15)+Ku(128|t>>>6&63)+Ku(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return Ku(240|t>>>18&7)+Ku(128|t>>>12&63)+Ku(128|t>>>6&63)+Ku(128|63&t)},td=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,rd=Wu?e=>Buffer.from(e,"utf8").toString("base64"):$u?e=>Xu($u.encode(e)):e=>Zu((e=>e.replace(td,ed))(e)),od=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,nd=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return Ku((t>>>10)+55296)+Ku(56320+(1023&t));case 3:return Ku((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Ku((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},id="function"==typeof atob?e=>atob(Yu(e)):Wu?e=>Buffer.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!qu.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,o,n="";for(let i=0;i<e.length;)t=zu[e.charAt(i++)]<<18|zu[e.charAt(i++)]<<12|(r=zu[e.charAt(i++)])<<6|(o=zu[e.charAt(i++)]),n+=64===r?Ku(t>>16&255):64===o?Ku(t>>16&255,t>>8&255):Ku(t>>16&255,t>>8&255,255&t);return n},sd=Wu?e=>Ju(Buffer.from(e,"base64")):e=>Ju(id(e).split("").map((e=>e.charCodeAt(0)))),ad=Wu?e=>Buffer.from(e,"base64").toString("utf8"):xu?e=>xu.decode(sd(e)):e=>(e=>e.replace(od,nd))(id(e)),ud=(e,t=!1)=>t?Qu(rd(e)):rd(e),dd=e=>ad((e=>Yu(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))))(e)),cd=(e,t=!1)=>t?Qu(Xu(e)):Xu(e);function ld(e){return ud(e,!0)}function pd(e){return dd(e)}function hd(e){return ud(e,!1)}const md={"-":"+",_:"/",".":"="};function gd(e){const t=e.replace(/[-_.]/g,(e=>md[e]));return Uint8Array.from(window.atob(t),(e=>e.charCodeAt(0)))}const Sd=e=>{const t=e.charCodeAt(0);return t<=parseInt("0x7F",16)?1:t<=parseInt("0x7FF",16)?2:t<=parseInt("0xFFFF",16)?3:t<=parseInt("0x1FFFFF",16)?4:t<=parseInt("0x3FFFFFF",16)?5:6},vd=(e,t)=>{const r=e.split(".").map((e=>Number(e))).slice(0,3),o=t.split(".").map((e=>Number(e))).slice(0,3);let n=0;for(let e=0;e<3;e++){const t=e<r.length?r[e]:0,i=e<o.length?o[e]:0;if(t<i){n=-1;break}if(t>i){n=1;break}}return n},fd=e=>{var t;let r=(new Date).getTime(),o=1e3*(null===(t=performance)||void 0===t?void 0:t.now())||0;const n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{let t=16*Math.random();return r>0?(t=(r+t)%16|0,r=Math.floor(r/16)):(t=(o+t)%16|0,o=Math.floor(o/16)),("x"===e?t:3&t|8).toString(16)}));return n+""};function yd(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=Object.keys(e),o=Object.keys(t),n=r.length;if(o.length!==n)return!1;for(let o=0;o<n;o++){const n=r[o];if(e[n]!==t[n]||!Object.prototype.hasOwnProperty.call(t,n))return!1}return!0}const Ed=(e,t)=>e>>10==t>>10,_d=(e,t)=>new Promise((r=>{setTimeout((()=>{r(e())}),t)})),Id=e=>{const t=`${Math.floor(1e4*Math.random())}`;return e.indexOf("@")>-1?e.replace("@",t):`${e}${t}`},Ad=e=>{try{const t=new URL(e);return!("data:"===t.protocol&&"null"===t.origin)&&t.origin!==location.origin}catch(e){return!0}},bd=e=>{const t=e.split(".")[1];if("string"==typeof t){let r=t.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("base64 string is not of the correct length")}try{const e=decodeURIComponent(window.atob(r).replace(/(.)/g,(function(e,t){let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})));return JSON.parse(e)}catch(e){console.error("Invalid token specified: invalid base64")}}};function Cd(e){return e&&e.endsWith("/")?e.slice(0,e.length-1):e}function Td(e){return[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join("")}function Rd(e){return`${e.tagName}${e.id?`#${e.id}`:""}${e.className?`${e.className.split(" ").map((e=>`.${e}`)).join("")}`:""}`}function Od(e){const t=function(e){const t=e&&e.getRootNode();if(t&&"#document"!==t.nodeName&&t.host)return Rd(t.host)}(e);return`${t?`${t}>`:""}${Rd(e)}`}function Dd(e){return"object"==typeof e&&null!==e?d(e,HTMLElement)?Od(e):ArrayBuffer.isView(e)?Td(e.buffer):Array.isArray(e)?e.map((e=>Dd(e))):Object.keys(e).reduce(((t,r)=>({...t,[`${r}`]:Dd(e[r])})),{}):e}const wd=[v,y,f].map((e=>a(e,{hostname:!0})));function Nd(e){return wd.some((t=>new RegExp(`^https://${t}`).test(null!=e?e:"")))}const Md=(e,t,r)=>Qr([t,r].map(((t,r)=>{if("initial"!==t)return Cr(["success"===t]);{const t=0===r?"ENCODE":"DECODE";return lo(Ja(`${e.toUpperCase()}_${t}_SUCCESS`,1).pipe(Vr((()=>!0))),Ja(`${e.toUpperCase()}_${t}_FAIL`,1).pipe(Vr((()=>!1))))}}))),Pd=e=>{const t=Ru(e.value);return t?Tr(t):Ja(Do,1).pipe(Ir(Xt),Oo(e),Vr((([,e])=>Ru(e))))};function Ld(e,t){var r,o,n;const i="audio"===e?null===(r=t.audio)||void 0===r?void 0:r.audioSsrc:null===(o=t.video)||void 0===o?void 0:o.videoSsrc,s="audio"===e?Bi:ui;return"audio"===e&&null!==(n=t.audio)&&void 0!==n&&n.isWebRtcAudioCapable||i?Promise.resolve():Ka(s)}const kd=()=>Cr(navigator.mediaDevices.enumerateDevices()).pipe(Vr((e=>{const t=[],r=[],o=[];return e.forEach((e=>{const{kind:n,deviceId:i,label:s}=e,a=s.replace(/\([\w,\d]+:[\w,\d]+\)/i,"").trim();switch(n){case"audioinput":"communications"===i||/ZoomAudioDevice/i.test(a)||/Zoom-\S*/.test(a)||/CubebAggregateDevice\S*/.test(a)||/Microsoft Teams Audio/i.test(a)||t.push({deviceId:i,label:a});break;case"audiooutput":"communications"===i||/ZoomAudioDevice/i.test(a)||/Microsoft Teams Audio/i.test(a)||r.push({deviceId:i,label:a});break;case"videoinput":o.push({deviceId:i,label:a})}})),{microphones:t,speakers:r,cameras:o}})));function Ud(e){const{x:t,y:r,width:o,height:n}=e.getBoundingClientRect();return{scaleWidth:o,scaleHeight:n,srcOffsetX:t,srcOffsetY:r}}function Vd(e){if(e){let r=e;try{const t=e.width;e.width=t}catch(o){var t;r=e.cloneNode(!0),null===(t=e.parentNode)||void 0===t||t.replaceChild(r,e)}return r}return e}function Bd(){try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate($)}catch(e){return!1}}function Hd(){var e;return null===(e=WebAssembly)||void 0===e?void 0:e.validate(G)}const jd=(()=>{const e=new Hu;return{withAudioAction:t=>(...r)=>new Promise((async(o,n)=>{let i=!1;const s=setTimeout((()=>{i=!0,e.release()}),3e4);try{await e.acquire(),i||clearTimeout(s),o(t(...r))}catch(e){i||(clearTimeout(s),n(e))}})),processAudioAction:t=>e.acquire().then((()=>t())),completeAudioAction:()=>{e.release()},cancelAllAudioAction:()=>{e.cancel()}}})();function Fd(e){const t=["joinComputerAudio","joinSharingAudio","leaveComputerAudio","leaveSharingAudio"];return new Proxy(e,{get:(e,r)=>"string"==typeof r&&t.includes(r)?function(...t){return jd.withAudioAction(e[r].bind(e))(...t)}:Reflect.get(e,r)})}function Wd(e,t){var r;const{browserVersion:o,isChrome:n,isFirefox:i,isSafari:s,isAndroidOrIOSBrowser:a,isSupportMediaStreamTrackProcessor:u,isSupportOffscreenCanvas:d,isSwiftShader:c}=T,l=Number(null==o||null===(r=o.match(/^\d+/))||void 0===r?void 0:r[0]),p=n&&l>=91,h=i&&l>=89,m=s&&vd(o,"17.4")>=0,g=navigator.hardwareConcurrency>2;let S=Fu.isSupportMultipleView();return e&&!S&&(S=u),!a&&!c&&d&&(S||t)&&(p||h||m)&&g}const xd=(e,t)=>{const r=document.createElement("link");return r.rel="preload",r.href=e,r.as=t,r.crossOrigin="anonymous",r},$d=(e,t,r)=>{const o=[],n=[],i=Array.isArray(e)?e:[e];return qe.filter((e=>{var r;return i.includes(e.category)&&(e.tag===t||(null===(r=e.tag)||void 0===r?void 0:r.split(",").includes(t)))})).forEach((e=>{"worker"===e.type?o.push(`${r}${e.name}`):"wasm"===e.type&&n.push(`${r}${e.name}`)})),{workers:o,wasms:n}};function Gd(e,t){const r={},{isSupportSharedArrayBuffer:o,isSupportOffscreenCanvas:n,isSupportMediaStreamTrackProcessor:i,isAndroidOrIOSBrowser:s,isHarmonyOS:a}=T;return o||(Object.assign(r,{enableMultiDecodeVideoWithoutSAB:!!e}),n&&i&&Object.assign(r,{enableVirtualBackgroundWithoutSAB:!!t})),Object.assign(r,{platformMode:{isDesktopMode:!(s||a)}}),r}function zd(e,t,r){if(e.deviceId===t)return!0;if("default"===t){const o=r.find((e=>e.deviceId===t));if(o)return o.label.indexOf(e.label)>-1}return!1}function qd(e){return e.find((e=>"default"===e.deviceId))}const Kd=(()=>{let e,t=!1;return{watch:function(r){t=!0,e=Promise.race([r,_d((()=>!0),1e4)]).then((()=>{e=void 0,t=!1})).finally((()=>{e=void 0,t=!1}))},acquire:function(){return t&&e?e:Promise.resolve()}}})(),Jd=(e,t)=>Ka({event:Ko,operations:[co((t=>void 0!==t[`${e}`])),go(1)]},(r=>r[`${e}`]===t));function Qd(e,t,r,o){const n={play:()=>e.play(),pause:()=>e.pause(),get paused(){return e.paused},get muted(){return e.muted},set muted(t){e.muted=t},get currentTime(){return e.currentTime},set currentTime(t){e.currentTime=t},get loop(){return e.loop},set loop(t){e.loop=t}};if("audio"===t){const{audio:{mediaPlaybackFile:t}}=r;Object.defineProperty(n,"playback",{get(){const r=e.dataset.playback;return void 0!==r?"1"===r:!(null==t||!t.playback)},set(t){o.enablePlayAudioFileLocally(t),e.dataset.playback=t?"1":"0"}})}return n}function Yd(){return lo(eo(document,"click").pipe(go(1)),eo(document,"touchend").pipe(go(1))).pipe(Co(Qa()))}function Zd(e,t){const{audio:{activeMicrophone:r,microphoneDevicesList:o}}=t,n=o.find((e=>e.deviceId===r)),i=Ru(t);e.changeMicrophone(r,null==n?void 0:n.label,!(null==i||!i.muted))}function Xd(e,t,r,o){var n;const{audio:i,share:{isReceiveSharingFromMainSession:s}}=r;if((null==i||null===(n=i.localShareAudioUserMutedList)||void 0===n?void 0:n.length)>0){const{localShareAudioUserMutedList:t}=i,n=t.filter((t=>t.userId!==e));if(n.length){const e=Mu(r);n.forEach((t=>{const r=e.find((e=>e.userId===t.userId));r&&!r.audioShare&&o.setSharingAudioVolume(t.userId,!0,t.isFromMainSession)}))}}o.setSharingAudioVolume(e,t,!!s)}function ec(e,t){let r=0;return e&&(r|=ke.WebRTCAudio),t&&(r|=ke.WebRTCVideo),r}function tc(){var e,t;return"orientation"in window.screen?null===(e=screen.orientation.type)||void 0===e?void 0:e.startsWith("landscape"):"orientation"in window?90===Math.abs(window.orientation):"matchMedia"in window?!(null===(t=window.matchMedia("(orientation: landscape)"))||void 0===t||!t.matches):screen.availWidth>screen.availHeight}function rc(){return"orientation"in window.screen?eo(screen.orientation,"change").pipe(Co(Qa()),Vr((()=>{var e;return null===(e=screen.orientation.type)||void 0===e?void 0:e.startsWith("landscape")}))):eo(window,"orientationchange").pipe(Co(Qa()),Vr((e=>{var t;const r=null===(t=e.target)||void 0===t||null===(t=t.screen)||void 0===t||null===(t=t.orientation)||void 0===t?void 0:t.angle;return 90===Math.abs(r)})))}function oc(e,t){var r;let o;if("string"==typeof e){if(o=document.querySelector(e),!o)return[!1,{type:et,reason:"Cannot find the element",errorCode:Na.STREAM_MISMATCH_RENDER_ELEMENT}]}else o=e;return(null===(r=o)||void 0===r||null===(r=r.tagName)||void 0===r?void 0:r.toUpperCase())!==t.toUpperCase()?[!1,{type:et,reason:"Invalid element type",errorCode:Na.STREAM_MISMATCH_RENDER_ELEMENT}]:[!0,o]}function nc(e){const{share:{isRemoteSharingActive:t,isSimultaneousShareView:r}}=e;return t||r?Tr(!0):Ja(Ji).pipe(co((e=>{const{isActive:t}=e;return t})),go(1),Vr((()=>!0)))}function ic(e){var t;const r=(null===(t=e.dataset)||void 0===t?void 0:t.videoPlayerId)||`vp-${fd()}`;return e.dataset&&!e.dataset.videoPlayerId&&(e.dataset.videoPlayerId=r),!0!==e.isDummy&&T.isWeakRefSupported?{weakRef:new WeakRef(e),playerId:r}:{element:e,playerId:r}}function sc(e){return e.weakRef?e.weakRef.deref()||null:e.element||null}function ac(e){return e.map((e=>sc(e))).filter((e=>null!==e))}function uc(e){return e.filter((e=>null!==sc(e)))}function dc(e,t){var r;return sc(e)===t||e.playerId===(null===(r=t.dataset)||void 0===r?void 0:r.videoPlayerId)}var cc,lc,pc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function hc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mc=(lc||(lc=1,cc=function(e,t,r,o,n,i,s,a){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,o,n,i,s,a],c=0;(u=new Error(t.replace(/%s/g,(function(){return d[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}),cc),gc=hc(mc),Sc=function(e){return"function"==typeof e},vc=function(e){return e.toString()},fc=function(e){return"string"==typeof e},yc="||",Ec=function(e){return e},_c=function(e){return null===e};function Ic(e,t,r){void 0===t&&(t=Ec),gc(Sc(t)||_c(t),"Expected payloadCreator to be a function, undefined or null");var o=_c(t)||t===Ec?Ec:function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),n=1;n<r;n++)o[n-1]=arguments[n];return e instanceof Error?e:t.apply(void 0,[e].concat(o))},n=Sc(r),i=e.toString(),s=function(){var t=o.apply(void 0,arguments),i={type:e};return t instanceof Error&&(i.error=!0),void 0!==t&&(i.payload=t),n&&(i.meta=r.apply(void 0,arguments)),i};return s.toString=function(){return i},s}var Ac,bc,Cc,Tc,Rc,Oc,Dc=function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},wc=function(e){return Array.isArray(e)},Nc=function(e){return null==e};var Mc=hc(function(){if(Oc)return Rc;Oc=1;var e=function(){if(Tc)return Cc;Tc=1;var e=function(){if(bc)return Ac;bc=1,Ac=function(i){return e.test(i)?i.toLowerCase():t.test(i)?(function(e){return e.replace(o,(function(e,t){return t?" "+t:""}))}(i)||i).toLowerCase():r.test(i)?function(e){return e.replace(n,(function(e,t,r){return t+" "+r.toLowerCase().split("").join(" ")}))}(i).toLowerCase():i.toLowerCase()};var e=/\s/,t=/(_|-|\.|:)/,r=/([a-z][A-Z]|[A-Z][a-z])/,o=/[\W_]+(.|$)/g,n=/(.)([A-Z]+)/g;return Ac}();return Cc=function(t){return e(t).replace(/[\W_]+(.|$)/g,(function(e,t){return t?" "+t:""})).trim()}}();return Rc=function(t){return e(t).replace(/\s(\w)/g,(function(e,t){return t.toUpperCase()}))}}()),Pc=function(e){return-1===e.indexOf("/")?Mc(e):e.split("/").map(Mc).join("/")},Lc=function(e,t){return e.reduce((function(e,r){return t(e,r)}),{})},kc=function(e){return"undefined"!=typeof Map&&e instanceof Map};function Uc(e){if(kc(e))return Array.from(e.keys());if("undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys)return Reflect.ownKeys(e);var t=Object.getOwnPropertyNames(e);return"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t}function Vc(e,t){return kc(t)?t.get(e):t[e]}var Bc=function(e){return function t(r,o,n,i){var s=void 0===o?{}:o,a=s.namespace,u=void 0===a?"/":a,d=s.prefix;return void 0===n&&(n={}),void 0===i&&(i=""),Uc(r).forEach((function(o){var s=function(e){return i||!d||d&&new RegExp("^"+d+u).test(e)?e:""+d+u+e}(function(e){var t;if(!i)return e;var r=e.toString().split(yc),o=i.split(yc);return(t=[]).concat.apply(t,o.map((function(e){return r.map((function(t){return""+e+u+t}))}))).join(yc)}(o)),a=Vc(o,r);e(a)?t(a,{namespace:u,prefix:d},n,s):n[s]=a})),n}},Hc=Bc(Dc);function jc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){Fc(e,t,r[t])}))}return e}function Fc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wc(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var n,i=Dc((n=r)[n.length-1])?r.pop():{};return gc(r.every(fc)&&(fc(e)||Dc(e)),"Expected optional object followed by string action types"),fc(e)?$c([e].concat(r),i):jc({},function(e,t){return function(e,t){var r=void 0===t?{}:t,o=r.namespace,n=void 0===o?"/":o,i=r.prefix;function s(t,r,o){var n=Pc(o.shift());0===o.length?r[n]=e[t]:(r[n]||(r[n]={}),s(t,r[n],o))}var a={};return Object.getOwnPropertyNames(e).forEach((function(e){var t=i?e.replace(""+i+n,""):e;return s(e,a,t.split(n))})),a}(xc(Hc(e,t)),t)}(e,i),$c(r,i))}function xc(e,t){var r=void 0===t?{}:t,o=r.prefix,n=r.namespace,i=void 0===n?"/":n;return Lc(Object.keys(e),(function(t,r){var n,s=e[r];gc(function(e){if(Sc(e)||Nc(e))return!0;if(wc(e)){var t=e[0],r=void 0===t?Ec:t,o=e[1];return Sc(r)&&Sc(o)}return!1}(s),"Expected function, undefined, null, or array with payload and meta functions for "+r);var a=o?""+o+i+r:r,u=wc(s)?Ic.apply(void 0,[a].concat(s)):Ic(a,s);return jc({},t,((n={})[r]=u,n))}))}function $c(e,t){var r=xc(Lc(e,(function(e,t){var r;return jc({},e,((r={})[t]=Ec,r))})),t);return Lc(Object.keys(r),(function(e,t){var o;return jc({},e,((o={})[Pc(t)]=r[t],o))}))}var Gc=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var o="function"!=typeof t[t.length-1]&&t.pop(),n=t;if(void 0===o)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];var a=void 0===e,u=void 0===t;return a&&u&&o?o:n.reduce((function(e,r){return r.apply(void 0,[e,t].concat(i))}),a&&!u&&o?o:e)}},zc=Bc((function(e){return(Dc(e)||kc(e))&&!function(e){var t=Uc(e),r=t.every((function(e){return"next"===e||"throw"===e}));return t.length&&t.length<=2&&r}(e)}));function qc(e,t,r){void 0===r&&(r={}),gc(Dc(e)||kc(e),"Expected handlers to be a plain object.");var o=zc(e,r),n=Uc(o).map((function(e){return function(e,t,r){void 0===t&&(t=Ec);var o=vc(e).split(yc);gc(!(void 0===r),"defaultState for reducer handling "+o.join(", ")+" should be defined"),gc(Sc(t)||Dc(t),"Expected reducer to be a function or object with next and throw reducers");var n=Sc(t)?[t,t]:[t.next,t.throw].map((function(e){return Nc(e)?Ec:e})),i=n[0],s=n[1];return function(e,t){void 0===e&&(e=r);var n=t.type;return n&&-1!==o.indexOf(vc(n))?(!0===t.error?s:i)(e,t):e}}(e,Vc(e,o),t)})),i=Gc.apply(void 0,n.concat([t]));return function(e,r){return void 0===e&&(e=t),i(e,r)}}const Kc=Ic("SCREENSHOT_VIDEO_NOTIFICATION"),{setVideoSsrc:Jc,setActiveVideoId:Qc,setCameraList:Yc,setActiveCamera:Zc,setIsCurrentUserStartedVideo:Xc,setSpotlightVideo:el,setIsCaptureForbidden:tl,setVideoMaxQuality:rl,setIsVideoMuted:ol,setIsCaptureCameraLoading:nl,setIsCameraTaken:il,resetVideo:sl,setReceivedVideoDimension:al,addSubscribedVideoId:ul,removeSubscribedVideoId:dl,setIsFollowHostVideoLayout:cl,setHostDragLayout:ll,addRenderedVideoId:pl,removeRenderedVideoId:hl,setIsSupportHdVideo:ml,setIsCanUnmuteVideo:gl,setIsVbPreloadReady:Sl,setIsVbConfiged:vl,setVbImageSrc:fl,setVideoDataEncoding:yl,setVideoDataDecoding:El,setHardwareAccelerationState:_l,setVideoCaptureCustomizedOption:Il,setNetworkQuality:Al,setVideoCameraPtzCapabilities:bl,setIsCurrentUserRequestCameraControlled:Cl,setIsCurrentUserCameraInControl:Tl,addVideoFarEndCameraControlUser:Rl,removeVideoFarEndCameraControlUser:Ol,setVideoPtzCameraMoving:Dl,setVideoPtzCameraValue:wl,setIsControllingFarEndCamera:Nl,setNetworkQualityBroadcastTime:Ml,setIsMaskConfiged:Pl,setVideoBackgroundMode:Ll,setVideoMask:kl,setVideoCapturedDimension:Ul,addVideoRenderedEnsuredCanvas:Vl,setVideoMediaPlaybackFile:Bl,setPrefetchedVideoUser:Hl,setVideoQosSubscriptionStatus:jl,setMiniRwgOptionValue:Fl,addVideoPlayerAttachment:Wl,removeVideoPlayerAttachment:xl,setIsWebGl2RendererType:$l,setIsWebGpuRendererType:Gl,setVideoRendererType:zl,setIsVideoMirrored:ql,addSelfPreviewVideoTag:Kl,removeSelfPreviewVideoTag:Jl,setVideoLeadershipUserId:Ql,setIsWebrtcVideoCapable:Yl,removeCustomVideoConstraints:Zl,setWebrtcStatisticSubscription:Xl,setWebrtcStatisticData:ep}=Wc("SET_VIDEO_SSRC","SET_ACTIVE_VIDEO_ID","SET_CAMERA_LIST","SET_ACTIVE_CAMERA","SET_IS_CURRENT_USER_STARTED_VIDEO","SET_SPOTLIGHT_VIDEO","SET_IS_CAPTURE_FORBIDDEN","SET_VIDEO_MAX_QUALITY","SET_IS_VIDEO_MUTED","SET_IS_CAPTURE_CAMERA_LOADING","SET_IS_CAMERA_TAKEN","RESET_VIDEO","SET_RECEIVED_VIDEO_DIMENSION","ADD_SUBSCRIBED_VIDEO_ID","REMOVE_SUBSCRIBED_VIDEO_ID","SET_IS_FOLLOW_HOST_VIDEO_LAYOUT","SET_HOST_DRAG_LAYOUT","ADD_RENDERED_VIDEO_ID","REMOVE_RENDERED_VIDEO_ID","SET_IS_SUPPORT_HD_VIDEO","SET_IS_CAN_UNMUTE_VIDEO","SET_IS_VB_PRELOAD_READY","SET_IS_VB_CONFIGED","SET_VB_IMAGE_SRC","SET_VIDEO_DATA_ENCODING","SET_VIDEO_DATA_DECODING","SET_HARDWARE_ACCELERATION_STATE","SET_VIDEO_CAPTURE_CUSTOMIZED_OPTION","SET_NETWORK_QUALITY","SET_VIDEO_CAMERA_PTZ_CAPABILITIES","SET_IS_CURRENT_USER_REQUEST_CAMERA_CONTROLLED","SET_IS_CURRENT_USER_CAMERA_IN_CONTROL","ADD_VIDEO_FAR_END_CAMERA_CONTROL_USER","REMOVE_VIDEO_FAR_END_CAMERA_CONTROL_USER","SET_VIDEO_PTZ_CAMERA_MOVING","SET_VIDEO_PTZ_CAMERA_VALUE","SET_IS_CONTROLLING_FAR_END_CAMERA","SET_NETWORK_QUALITY_BROADCAST_TIME","SET_IS_MASK_CONFIGED","SET_VIDEO_BACKGROUND_MODE","SET_VIDEO_MASK","SET_VIDEO_CAPTURED_DIMENSION","ADD_VIDEO_RENDERED_ENSURED_CANVAS","SET_VIDEO_MEDIA_PLAYBACK_FILE","SET_PREFETCHED_VIDEO_USER","SET_VIDEO_QOS_SUBSCRIPTION_STATUS","SET_MINI_RWG_OPTION_VALUE","ADD_VIDEO_PLAYER_ATTACHMENT","REMOVE_VIDEO_PLAYER_ATTACHMENT","SET_IS_WEB_GL2_RENDERER_TYPE","SET_IS_WEB_GPU_RENDERER_TYPE","SET_VIDEO_RENDERER_TYPE","SET_IS_VIDEO_MIRRORED","ADD_SELF_PREVIEW_VIDEO_TAG","REMOVE_SELF_PREVIEW_VIDEO_TAG","SET_VIDEO_LEADERSHIP_USER_ID","SET_IS_WEBRTC_VIDEO_CAPABLE","REMOVE_CUSTOM_VIDEO_CONSTRAINTS","SET_WEBRTC_STATISTIC_SUBSCRIPTION","SET_WEBRTC_STATISTIC_DATA");var tp="object"==typeof global&&global&&global.Object===Object&&global,rp="object"==typeof self&&self&&self.Object===Object&&self,op=tp||rp||Function("return this")(),np=op.Symbol,ip=Object.prototype,sp=ip.hasOwnProperty,ap=ip.toString,up=np?np.toStringTag:void 0,dp=Object.prototype.toString,cp=np?np.toStringTag:void 0;function lp(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":cp&&cp in Object(e)?function(e){var t=sp.call(e,up),r=e[up];try{e[up]=void 0;var o=!0}catch(e){}var n=ap.call(e);return o&&(t?e[up]=r:delete e[up]),n}(e):function(e){return dp.call(e)}(e)}function pp(e){return null!=e&&"object"==typeof e}var hp=Array.isArray,mp=np?np.prototype:void 0,gp=mp?mp.toString:void 0;function Sp(e){if("string"==typeof e)return e;if(hp(e))return function(e,t){for(var r=-1,o=null==e?0:e.length,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}(e,Sp)+"";if(function(e){return"symbol"==typeof e||pp(e)&&"[object Symbol]"==lp(e)}(e))return gp?gp.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function vp(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function fp(e){if(!vp(e))return!1;var t=lp(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var yp,Ep=op["__core-js_shared__"],_p=(yp=/[^.]+$/.exec(Ep&&Ep.keys&&Ep.keys.IE_PROTO||""))?"Symbol(src)_1."+yp:"",Ip=Function.prototype.toString;function Ap(e){if(null!=e){try{return Ip.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var bp=/^\[object .+?Constructor\]$/,Cp=Function.prototype,Tp=Object.prototype,Rp=Cp.toString,Op=Tp.hasOwnProperty,Dp=RegExp("^"+Rp.call(Op).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wp(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!vp(e)||(t=e,_p&&_p in t))&&(fp(e)?Dp:bp).test(Ap(e));var t}(r)?r:void 0}var Np=wp(op,"WeakMap"),Mp=/^(?:0|[1-9]\d*)$/;function Pp(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Mp.test(e))&&e>-1&&e%1==0&&e<t}function Lp(e,t){return e===t||e!=e&&t!=t}function kp(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Up(e){return null!=e&&kp(e.length)&&!fp(e)}var Vp=Object.prototype;function Bp(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Vp)}function Hp(e){return pp(e)&&"[object Arguments]"==lp(e)}var jp=Object.prototype,Fp=jp.hasOwnProperty,Wp=jp.propertyIsEnumerable,xp=Hp(function(){return arguments}())?Hp:function(e){return pp(e)&&Fp.call(e,"callee")&&!Wp.call(e,"callee")},$p="object"==typeof e&&e&&!e.nodeType&&e,Gp=$p&&"object"==typeof module&&module&&!module.nodeType&&module,zp=Gp&&Gp.exports===$p?op.Buffer:void 0,qp=(zp?zp.isBuffer:void 0)||function(){return!1},Kp={};Kp["[object Float32Array]"]=Kp["[object Float64Array]"]=Kp["[object Int8Array]"]=Kp["[object Int16Array]"]=Kp["[object Int32Array]"]=Kp["[object Uint8Array]"]=Kp["[object Uint8ClampedArray]"]=Kp["[object Uint16Array]"]=Kp["[object Uint32Array]"]=!0,Kp["[object Arguments]"]=Kp["[object Array]"]=Kp["[object ArrayBuffer]"]=Kp["[object Boolean]"]=Kp["[object DataView]"]=Kp["[object Date]"]=Kp["[object Error]"]=Kp["[object Function]"]=Kp["[object Map]"]=Kp["[object Number]"]=Kp["[object Object]"]=Kp["[object RegExp]"]=Kp["[object Set]"]=Kp["[object String]"]=Kp["[object WeakMap]"]=!1;var Jp,Qp="object"==typeof e&&e&&!e.nodeType&&e,Yp=Qp&&"object"==typeof module&&module&&!module.nodeType&&module,Zp=Yp&&Yp.exports===Qp&&tp.process,Xp=function(){try{return Yp&&Yp.require&&Yp.require("util").types||Zp&&Zp.binding&&Zp.binding("util")}catch(e){}}(),eh=Xp&&Xp.isTypedArray,th=eh?(Jp=eh,function(e){return Jp(e)}):function(e){return pp(e)&&kp(e.length)&&!!Kp[lp(e)]},rh=Object.prototype.hasOwnProperty;var oh=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),nh=Object.prototype.hasOwnProperty;function ih(e){if(!Bp(e))return oh(e);var t=[];for(var r in Object(e))nh.call(e,r)&&"constructor"!=r&&t.push(r);return t}function sh(e){return Up(e)?function(e){var t=hp(e),r=!t&&xp(e),o=!t&&!r&&qp(e),n=!t&&!r&&!o&&th(e),i=t||r||o||n,s=i?function(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o}(e.length,String):[],a=s.length;for(var u in e)!rh.call(e,u)||i&&("length"==u||o&&("offset"==u||"parent"==u)||n&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Pp(u,a))||s.push(u);return s}(e):ih(e)}var ah=wp(Object,"create"),uh=Object.prototype.hasOwnProperty,dh=Object.prototype.hasOwnProperty;function ch(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function lh(e,t){for(var r=e.length;r--;)if(Lp(e[r][0],t))return r;return-1}ch.prototype.clear=function(){this.__data__=ah?ah(null):{},this.size=0},ch.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ch.prototype.get=function(e){var t=this.__data__;if(ah){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return uh.call(t,e)?t[e]:void 0},ch.prototype.has=function(e){var t=this.__data__;return ah?void 0!==t[e]:dh.call(t,e)},ch.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ah&&void 0===t?"__lodash_hash_undefined__":t,this};var ph=Array.prototype.splice;function hh(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}hh.prototype.clear=function(){this.__data__=[],this.size=0},hh.prototype.delete=function(e){var t=this.__data__,r=lh(t,e);return!(r<0||(r==t.length-1?t.pop():ph.call(t,r,1),--this.size,0))},hh.prototype.get=function(e){var t=this.__data__,r=lh(t,e);return r<0?void 0:t[r][1]},hh.prototype.has=function(e){return lh(this.__data__,e)>-1},hh.prototype.set=function(e,t){var r=this.__data__,o=lh(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this};var mh=wp(op,"Map");function gh(e,t){var r,o,n=e.__data__;return("string"==(o=typeof(r=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map}function Sh(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function vh(e){return null==e?"":Sp(e)}Sh.prototype.clear=function(){this.size=0,this.__data__={hash:new ch,map:new(mh||hh),string:new ch}},Sh.prototype.delete=function(e){var t=gh(this,e).delete(e);return this.size-=t?1:0,t},Sh.prototype.get=function(e){return gh(this,e).get(e)},Sh.prototype.has=function(e){return gh(this,e).has(e)},Sh.prototype.set=function(e,t){var r=gh(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this};var fh=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function yh(e){return fh.test(e)}var Eh="\\ud800-\\udfff",_h="["+Eh+"]",Ih="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ah="\\ud83c[\\udffb-\\udfff]",bh="[^"+Eh+"]",Ch="(?:\\ud83c[\\udde6-\\uddff]){2}",Th="[\\ud800-\\udbff][\\udc00-\\udfff]",Rh="(?:"+Ih+"|"+Ah+")?",Oh="[\\ufe0e\\ufe0f]?",Dh=Oh+Rh+"(?:\\u200d(?:"+[bh,Ch,Th].join("|")+")"+Oh+Rh+")*",wh="(?:"+[bh+Ih+"?",Ih,Ch,Th,_h].join("|")+")",Nh=RegExp(Ah+"(?="+Ah+")|"+wh+Dh,"g");var Mh=function(e){var t=yh(e=vh(e))?function(e){return yh(e)?function(e){return e.match(Nh)||[]}(e):function(e){return e.split("")}(e)}(e):void 0,r=t?t[0]:e.charAt(0),o=t?function(e,t,r){var o=e.length;return r=void 0===r?o:r,!t&&r>=o?e:function(e,t,r){var o=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(n);++o<n;)i[o]=e[o+t];return i}(e,t,r)}(t,1).join(""):e.slice(1);return r.toUpperCase()+o};function Ph(e){var t=this.__data__=new hh(e);this.size=t.size}Ph.prototype.clear=function(){this.__data__=new hh,this.size=0},Ph.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Ph.prototype.get=function(e){return this.__data__.get(e)},Ph.prototype.has=function(e){return this.__data__.has(e)},Ph.prototype.set=function(e,t){var r=this.__data__;if(r instanceof hh){var o=r.__data__;if(!mh||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new Sh(o)}return r.set(e,t),this.size=r.size,this};var Lh=Object.prototype.propertyIsEnumerable,kh=Object.getOwnPropertySymbols,Uh=kh?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,o=null==e?0:e.length,n=0,i=[];++r<o;){var s=e[r];t(s)&&(i[n++]=s)}return i}(kh(e),(function(t){return Lh.call(e,t)})))}:function(){return[]};function Vh(e){return function(e,t,r){var o=t(e);return hp(e)?o:function(e,t){for(var r=-1,o=t.length,n=e.length;++r<o;)e[n+r]=t[r];return e}(o,r(e))}(e,sh,Uh)}var Bh=wp(op,"DataView"),Hh=wp(op,"Promise"),jh=wp(op,"Set"),Fh="[object Map]",Wh="[object Promise]",xh="[object Set]",$h="[object WeakMap]",Gh="[object DataView]",zh=Ap(Bh),qh=Ap(mh),Kh=Ap(Hh),Jh=Ap(jh),Qh=Ap(Np),Yh=lp;(Bh&&Yh(new Bh(new ArrayBuffer(1)))!=Gh||mh&&Yh(new mh)!=Fh||Hh&&Yh(Hh.resolve())!=Wh||jh&&Yh(new jh)!=xh||Np&&Yh(new Np)!=$h)&&(Yh=function(e){var t=lp(e),r="[object Object]"==t?e.constructor:void 0,o=r?Ap(r):"";if(o)switch(o){case zh:return Gh;case qh:return Fh;case Kh:return Wh;case Jh:return xh;case Qh:return $h}return t});var Zh=op.Uint8Array;function Xh(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Sh;++t<r;)this.add(e[t])}function em(e,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(e[r],r,e))return!0;return!1}function tm(e,t,r,o,n,i){var s=1&r,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var d=i.get(e),c=i.get(t);if(d&&c)return d==t&&c==e;var l=-1,p=!0,h=2&r?new Xh:void 0;for(i.set(e,t),i.set(t,e);++l<a;){var m=e[l],g=t[l];if(o)var S=s?o(g,m,l,t,e,i):o(m,g,l,e,t,i);if(void 0!==S){if(S)continue;p=!1;break}if(h){if(!em(t,(function(e,t){if(s=t,!h.has(s)&&(m===e||n(m,e,r,o,i)))return h.push(t);var s}))){p=!1;break}}else if(m!==g&&!n(m,g,r,o,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function rm(e){var t=-1,r=Array(e.size);return e.forEach((function(e,o){r[++t]=[o,e]})),r}function om(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}Xh.prototype.add=Xh.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Xh.prototype.has=function(e){return this.__data__.has(e)};var nm=np?np.prototype:void 0,im=nm?nm.valueOf:void 0,sm=Object.prototype.hasOwnProperty,am="[object Arguments]",um="[object Array]",dm="[object Object]",cm=Object.prototype.hasOwnProperty;function lm(e,t,r,o,n){return e===t||(null==e||null==t||!pp(e)&&!pp(t)?e!=e&&t!=t:function(e,t,r,o,n,i){var s=hp(e),a=hp(t),u=s?um:Yh(e),d=a?um:Yh(t),c=(u=u==am?dm:u)==dm,l=(d=d==am?dm:d)==dm,p=u==d;if(p&&qp(e)){if(!qp(t))return!1;s=!0,c=!1}if(p&&!c)return i||(i=new Ph),s||th(e)?tm(e,t,r,o,n,i):function(e,t,r,o,n,i,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Zh(e),new Zh(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Lp(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=rm;case"[object Set]":var u=1&o;if(a||(a=om),e.size!=t.size&&!u)return!1;var d=s.get(e);if(d)return d==t;o|=2,s.set(e,t);var c=tm(a(e),a(t),o,n,i,s);return s.delete(e),c;case"[object Symbol]":if(im)return im.call(e)==im.call(t)}return!1}(e,t,u,r,o,n,i);if(!(1&r)){var h=c&&cm.call(e,"__wrapped__"),m=l&&cm.call(t,"__wrapped__");if(h||m){var g=h?e.value():e,S=m?t.value():t;return i||(i=new Ph),n(g,S,r,o,i)}}return!!p&&(i||(i=new Ph),function(e,t,r,o,n,i){var s=1&r,a=Vh(e),u=a.length;if(u!=Vh(t).length&&!s)return!1;for(var d=u;d--;){var c=a[d];if(!(s?c in t:sm.call(t,c)))return!1}var l=i.get(e),p=i.get(t);if(l&&p)return l==t&&p==e;var h=!0;i.set(e,t),i.set(t,e);for(var m=s;++d<u;){var g=e[c=a[d]],S=t[c];if(o)var v=s?o(S,g,c,t,e,i):o(g,S,c,e,t,i);if(!(void 0===v?g===S||n(g,S,r,o,i):v)){h=!1;break}m||(m="constructor"==c)}if(h&&!m){var f=e.constructor,y=t.constructor;f==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof f&&f instanceof f&&"function"==typeof y&&y instanceof y||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,r,o,n,i))}(e,t,r,o,lm,n))}var pm=Object.prototype.hasOwnProperty;class hm{constructor(){this.audioPlaybackUrl=void 0,this.videoPlaybackUrl=void 0,this._audioElement=void 0,this._videoElement=void 0,this.videoSrc=void 0,this.isUsingSameFile=void 0}static getInstance(){return void 0===this.instance&&(this.instance=new hm),this.instance}static destroyInstance(){if(this.instance){this.instance.stopAudioElement(),this.instance.stopVideoElement();const t=document.getElementById(ue);var e;t&&(null===(e=t.parentNode)||void 0===e||e.removeChild(t)),this.instance=void 0}}setAudioElement(e){return void 0===this._audioElement&&(this._audioElement=new Audio),new Promise(((t,r)=>{if(this.videoSrc===e.url)this._audioElement.pause(),this.isUsingSameFile=!0,this._videoElement.muted=!1,(n=this._videoElement).currentTime>0&&!n.paused&&!n.ended&&n.readyState>2?t(""):this._videoElement.play().then((()=>{t("")})).catch((()=>{r()}));else{var o;this.isUsingSameFile=!1;const n=T.isFirefox?"canplay":"canplaythrough",i=()=>{this._audioElement.play().then((()=>{this._audioElement.removeEventListener(n,i),t("")}))},s=()=>{this._audioElement.removeEventListener(n,i),this._audioElement.removeEventListener("error",s),r()};this._audioElement.addEventListener(n,i),this._audioElement.addEventListener("error",s),this._audioElement.src=e.url,this._audioElement.loop=!!e.loop,Ad(e.url)&&this._audioElement.setAttribute("crossorigin",""),this._audioElement.currentTime=Math.max(null!==(o=e.currentTime)&&void 0!==o?o:0,1e-4),T.isIOSMobile&&this._audioElement.load()}var n}))}setVideoElement(e){const{isFirefox:t,isSafari:r,isIOSMobile:o}=T;return void 0===this._videoElement&&(this._videoElement=document.createElement("video")),new Promise(((n,i)=>{var s;this.videoSrc=e.url;const a=t?"canplay":"canplaythrough",u=()=>{this._videoElement.play().then((()=>{this._videoElement.removeEventListener(a,u),n("")}))},d=()=>{this._videoElement.removeEventListener(a,u),this._videoElement.removeEventListener("error",d),i()};this._videoElement.addEventListener(a,u),this._videoElement.addEventListener("error",d),this._videoElement.src=e.url,this.isUsingSameFile||(this._videoElement.muted=!0),this._videoElement.loop=!!e.loop,this._videoElement.currentTime=Math.max(null!==(s=e.currentTime)&&void 0!==s?s:0,1e-4),this._videoElement.playsInline=!0,Ad(e.url)&&this._videoElement.setAttribute("crossorigin",""),r&&!document.getElementById(ue)&&(this._videoElement.id=ue,this._videoElement.setAttribute("style","position:fixed;top:-10000px;left:-10000px"),document.body.appendChild(this._videoElement)),(o||r)&&this._videoElement.load()}))}get audioElement(){return this.isUsingSameFile?this._videoElement:this._audioElement}get videoElement(){return this._videoElement}stopAudioElement(){this.isUsingSameFile?this.isUsingSameFile=!1:this._audioElement&&(this._audioElement.currentTime=0,this._audioElement.pause())}stopVideoElement(){this._videoElement&&this._videoElement.pause(),this.videoSrc=void 0}}hm.instance=void 0;const mm=e=>4294966272&e,gm=e=>{let t={R:0,G:0,B:0,A:0};if("string"==typeof e&&e.startsWith("#")){const a=e.slice(1);try{if(3===a.length){const e=Array.from(a).map((e=>e.repeat(2))).map((e=>parseInt(e,16)));t={R:e[0]/255,G:e[1]/255,B:e[2]/255,A:1}}else if(6===a.length||8===a.length){var r,o,n,i,s;const e=null===(r=a.match(/\S{2}/g))||void 0===r?void 0:r.map((e=>parseInt(e,16)));t={R:(null!==(o=null==e?void 0:e[0])&&void 0!==o?o:0)/255,G:(null!==(n=null==e?void 0:e[1])&&void 0!==n?n:0)/255,B:(null!==(i=null==e?void 0:e[2])&&void 0!==i?i:0)/255,A:null!=e&&e[3]?(null!==(s=null==e?void 0:e[3])&&void 0!==s?s:0)/255:1}}}catch(t){console.warn("error color representation:",e)}}else"object"==typeof e&&(t={R:e.R/255,G:e.G/255,B:e.B/255,A:e.A||1});return t};function Sm(e){let{captureWidth:t=0,captureHeight:r=0}=e||{};const{hd:o}=e||{};var n,i;return 0!==t&&0!==r||(o&&Fu.isSupportSending720P()?(t=1280,r=720):(t=640,r=360)),{captureWidth:t,captureHeight:r,isCustomizedResolution:!(null==e||!e.captureWidth||!e.captureHeight||(n=t,i=r,Math.abs(Math.floor(n/i*10)-Math.floor(16/9*10))<=1))}}function vm(e,t){return"default"===e||t.some((t=>t.deviceId===e))||[re.Environment,re.User,re.Left,re.Right].includes(e)}function fm(e,t){if("function"==typeof DOMMatrixReadOnly){if("1"===e.dataset.mirrored===t)return;const r=new DOMMatrixReadOnly(getComputedStyle(e).transform).scale(-1,1).toString();e.style.transform=r,e.dataset.mirrored=t?"1":"0"}}function ym(e,t,r){const o=[],{video:{videoSsrc:n,activeCamera:i},meeting:{mediaFeatureOptions:s}}=t,{cameraId:a=i,videoElement:u,originalRatio:d,ptz:l,hd:p,fullHd:h,mediaFile:m,fps:g,mirrored:S,customVideoConstraints:v}=r||{};let f;if(void 0!==u){let e=c(u)?u:null;if("string"==typeof u){let[t,r]=[document.body,u];if(u.indexOf(">")>-1){const[e,o]=u.split(">");t=document.querySelector(e),r=o}t&&(e=t.querySelector(r))}if(!e)return[];f=e,e.id||(e.id=Id("__ZOOM_SDK_SELF_VIDEO_@__")),void 0!==S&&fm(e,S)}let y=null!=g?g:Ce.Default;y=Math.max(Ce.Min,y),y=Math.min(Ce.Max,y);const{captureWidth:E,captureHeight:_,isCustomizedResolution:I}=Sm(r);if(I)e.updateVideoHDValue(!1);else{e.updateVideoHDValue(!!p||!!h);const t=!!h&&Fu.isSupportFullHDVideo(s||"");e.updateVideoFullhdValue(t)}let A=Promise.resolve(a);if(m&&m.url){const e=hm.getInstance();A=e.setVideoElement(m).then((()=>e.videoElement))}else hm.getInstance().stopVideoElement();return A.then((t=>{e.startCaptureVideo(n,t,E,_,f,T.isAndroidOrIOSBrowser&&oe.includes(t),!d&&function(){var e,t;const{isAndroidOrIOSBrowser:r,isFirefox:o,isSafari:n}=T;return r||!(null!==(e=navigator.mediaDevices)&&void 0!==e&&null!==(t=e.getSupportedConstraints)&&void 0!==t&&t.call(e).aspectRatio)||o||n||R()}(),l,void 0!==g?y:void 0,v)})),o.push(Il({cameraId:a,captureWidth:E,captureHeight:_,videoElement:"string"==typeof u?u:c(u)?Od(u):void 0,originalRatio:d,ptz:l,hd:p,fullHd:h,mediaFile:m,fps:void 0!==g?y:void 0,mirrored:S,customVideoConstraints:v})),o}function Em(e,t,r){const{max:o,min:n,step:i}=e;let s=r/100*(o-n);i&&(s=Math.min(Math.floor(s/i)*i,Math.floor(s)));let a=t+s;return a=Math.min(o,a),a=Math.max(n,a),a}function _m(e,t){let r="",o=t;switch(e){case me.Down:o=-t,r="tilt";break;case me.Up:r="tilt";break;case me.Left:o=-t,r="pan";break;case me.Right:r="pan";break;case me.ZoomIn:r="zoom";break;case me.ZoomOut:o=-t,r="zoom"}return{key:r,range:o}}function Im(e){const t=["pan","tilt","zoom"].reduce(((t,r)=>e[r]&&0!==e[r].value?{...t,[r]:e[r].value}:t),{});return function(e){if(null==e)return!0;if(Up(e)&&(hp(e)||"string"==typeof e||"function"==typeof e.splice||qp(e)||th(e)||xp(e)))return!e.length;var t=Yh(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Bp(e))return!ih(e).length;for(var r in e)if(pm.call(e,r))return!1;return!0}(t)?null:t}function Am(e){return{pan:(e&ge.Pan)===ge.Pan,tilt:(e&ge.Tilt)===ge.Tilt,zoom:(e&ge.Zoom)===ge.Zoom}}function bm(e){return!!e||Fu.isRenderSelfViewWithVideoElement()}function Cm(e){const{errorCode:t,type:r,...o}=null!=e?e:{},n={...o};let i;return void 0!==t&&Object.assign(n,{subCode:t}),r===Vn?i=Na.VIDEO_NO_CAMERA:r===Bn?i=Na.VIDEO_MISMATCH_CAMERA:r===Hn?i=Na.VIDEO_CAMERA_PERMISSION_DENIED:r===Wn?i=Na.VIDEO_ESTABLISH_STREAM_ERROR:r===jn?i=Na.VIDEO_CAMERA_TAKEN:r===Fn&&(i=Na.VIDEO_VB_INITIALIZE_ERROR),Object.assign(n,{errorCode:i,type:r}),n}function Tm(e,t,r){const{video:{selfPreviewVideoList:o,customizedVideoOption:n,videoAttachments:i},meeting:{userId:s}}=r;if(bm()){const t=[];o.length>0&&o.forEach((e=>{t.push(document.getElementById(e))})),null!=n&&n.videoElement&&t.push(document.querySelector(null==n?void 0:n.videoElement)),i&&i[`${s}`]&&i[`${s}`].forEach((e=>{const r=sc(e);var o;r&&t.push(null==r||null===(o=r.render)||void 0===o?void 0:o.el)})),t.filter((e=>!!e)).forEach((t=>{t&&fm(t,e)}))}else t.mirrorVideo(e)}let Rm,Om;async function Dm(e,t,r){const o=Id(e),n=document.createElement("img");return n.src=t,n.id=o,n.style.display="none",Ad(t)&&n.setAttribute("crossorigin",""),await new Promise(((e,o)=>{n.onload=()=>{r&&URL.revokeObjectURL(t),e("")},n.onerror=()=>{r&&URL.revokeObjectURL(t),o("Cannot load  image.")}})),{imageId:o,imgElement:n}}async function wm(e,t,r){if(e===te)return te;{let o=e;if(t){const t=await function(e){return new Promise(((t,r)=>{try{Rm&&Om||(Rm=document.createElement("canvas"),Om=Rm.getContext("2d"));const o=Rm,n=Om;if(n){n.clearRect(0,0,Rm.width,Rm.height);const i=new Image;i.src=e,Ad(e)&&(i.crossOrigin="");const s=16/9,a=1280,u=Math.floor(a/s);o.width=a,o.height=u,i.onload=()=>{const{width:e,height:d}=i,c=d*s;if(c>e){const t=e,r=Math.floor(e/s),o=0,c=(d-r)/2;null==n||n.drawImage(i,o,c,t,r,0,0,a,u)}else{const t=c,r=d,o=(e-t)/2,s=0;n.drawImage(i,o,s,t,r,0,0,a,u)}try{o.toBlob((e=>{t(e)}))}catch(e){e instanceof DOMException&&e.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue"),r(e)}},i.onerror=e=>{r("Cannot load  image.")}}}catch(e){r(e)}}))}(e);o=URL.createObjectURL(t)}if(o){const{imageId:e,imgElement:n}=await Dm("__ZOOM_SDK_VIRTUAL_BACKGROUND_IMAGE_@__",o,!!t);return(null!=r?r:document.body).appendChild(n),e}}return null}async function Nm(e,t,r){var o;const n=null!==(o=r&&r.parentNode)&&void 0!==o?o:document.body,{imageUrl:i,cropped:s,rootWidth:a,rootHeight:u}=e;let d=e;!t.video.customizedVideoOption||e.captureWidth&&e.captureHeight||(d=t.video.customizedVideoOption);const{captureWidth:c,captureHeight:p}=Sm(d),h=document.createElement("div");let m;h.style.display="none",m=i?await wm(i,s,h):null;let g,S=Id("__ZOOM_SDK_VIRTUAL_BACKGROUND_CANVAS_@__");if(r)if(l(r)){const t=Vd(r);t.id?S=t.id:t.id=S,g=t;try{a&&r.width!==a&&(r.width=a),u&&r.height!==u&&(r.height=u)}catch(e){console.warn("Cannot set the canvas width/height, and pay attention the canvas dimension is different from the setting")}}else r.setAttribute("node-id",S),r.setAttribute("media-type","preview"),g=r;else{const e=document.createElement("canvas");e.width=null!=a?a:380,e.height=null!=u?u:214,e.id=S,g=e,h.appendChild(e)}return null==n||n.appendChild(h),{captureWidth:c,captureHeight:p,imageId:m,element:g,divElement:h,id:S}}async function Mm(e,t,r,o){const n=Array.isArray(e)?e:e&&[e];if((null==n?void 0:n.length)>0){Rm&&Om||(Rm=document.createElement("canvas"),Om=Rm.getContext("2d"));const i=Rm,s=Om;if(i.width=t,i.height=r,s)try{s.fillStyle="#fff",s.clearRect(0,0,t,r);for(let e=0;e<n.length;e++){const t=n[e],{type:r,x:o,y:i}=t;if("rectangle"===r){const{width:e,height:r}=t;s.fillRect(o,i,e,r)}else if("square"===r){const{length:e}=t;s.fillRect(o,i,e,e)}else if("circle"===r){const{radius:e}=t;s.beginPath(),s.arc(o,i,e,0,2*Math.PI),s.fill()}else if("svg"===r){const{svg:e,width:r,height:n}=t,a=new Image;a.src=e,Ad(e)&&(a.crossOrigin=""),await new Promise(((e,t)=>{a.onload=()=>{e("")},a.onerror=()=>{t()}}));const{width:u,height:d}=a;s.drawImage(a,0,0,u,d,o,i,r,n)}}const e=await new Promise((e=>{null==i||i.toBlob((t=>{e(t)}))}));if(e){const t=URL.createObjectURL(e),{imageId:r,imgElement:n}=await Dm("__ZOOM_SDK_MASK_CLIP_@__",t,!0);return(null!=o?o:document.body).appendChild(n),r}}catch(e){e instanceof DOMException&&e.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue")}}return null}function Pm(e,t){if(e===t)return!0;if(null==e&&null==t)return!0;const r=Array.isArray(e)?[...e]:[e],o=Array.isArray(t)?[...t]:[t];if(r.length!==o.length)return!1;const n=(e,t)=>e.type<t.type?-1:e.type===t.type?0:1;r.sort(n),o.sort(n);for(let e=0;e<r.length;e++)if(!yd(r[e],o[e]))return!1;return!0}function Lm(e,t,r,o){const{video:{isCurrentUserStartedVideo:n,virtualBackground:{isVBPreloadReady:i,isVBConfigured:s,imageSrc:a},backgroundMode:d},meeting:{isCurrentUserStartVideoBeforeReset:c,isUseWBVideo:p}}=r;return Mr(function(e){return void 0!==e?Cr([e]):Ja(Qn,1).pipe(Vr((e=>e)))}(i)).then((i=>{if(i){if(o||!s&&e.imageUrl!==te&&e.imageUrl){if(l(o)){if(p)return Promise.reject({reason:"When you are in a WebRTC Video meeting, please use VideoPlayer to preview the virtual background.",errorCode:Na.STREAM_MISMATCH_RENDER_ELEMENT});console.warn("The canvas element will be deprecated. Please use the Videoplayer element to preview the virtual background.")}return async function(e,t,r,o){const{element:n,imageId:i,captureHeight:s,captureWidth:a,divElement:u,id:d}=await Nm(e,r,o),{cameraId:c}=e,{video:{videoSsrc:l,activeCamera:p}}=r;return t.startVirtualBackgroundSetting(n,i,l,null!=c?c:p,a,s,void 0,d),u}(e,t,r,o).then((e=>n?vl(!0):Mr(Ja(Yn,1)).then((r=>{var n;return o||t.stopVirtualBackgroundSetting(),r?(null==e||null===(n=e.parentNode)||void 0===n||n.removeChild(e),!0):Promise.reject({reason:"Cannot access the virtual background image.",errorCode:Na.VIDEO_VB_IMAGE_INACCESSIBLE})}))))}return a===e.imageUrl&&d===ye.VirtualBackground&&!c||async function(e,t,r){const{imageUrl:o,cropped:n}=e;if(o){const e=await wm(o,n);e&&(r.video.backgroundMode===ye.Mask&&(t.stopMaskSetting(!0),await _d((()=>{t.stopVirtualBackgroundSetting()}),0)),t.updateVirtualBackgroundImage(e),e!==te&&setTimeout((()=>{u(e)}),0))}else t.updateVirtualBackgroundImage(null)}(e,t,r)}return Promise.reject({reason:"Cannot load virtual background model.",errorCode:Na.VIDEO_VB_MISMATCH_STATE})}))}function km(e,t,r,o){const{video:{mask:{isMaskConfigured:n,imageSrc:i,clip:s},backgroundMode:a,isCurrentUserStartedVideo:d},meeting:{isCurrentUserStartVideoBeforeReset:c}}=r;return o||!n&&e.imageUrl?async function(e,t,r,o){const{element:n,imageId:i,captureHeight:s,captureWidth:a,divElement:u}=await Nm(e,r,o),{cameraId:d,clip:c,rootWidth:l=1280,rootHeight:p=720}=e,h=c?await Mm(c,l,p,u):null,{video:{videoSsrc:m,activeCamera:g}}=r;return h?(t.startMaskSetting(n,i,h,m,null!=d?d:g,l,p,a,s),u):Promise.reject({reason:"Clip is empty",errorCode:Na.VIDEO_MASK_IMAGE_INACCESSIBLE})}(e,t,r,o).then((e=>d?Pl(!0):Mr(Ja(ii,1)).then((r=>{var n;return o||t.stopMaskSetting(),r?(null==e||null===(n=e.parentNode)||void 0===n||n.removeChild(e),!0):Promise.reject({reason:"Cannot set video mask",errorCode:Na.VIDEO_MISMATCH_STATE})})))):a===ye.Mask&&e.imageUrl===i&&Pm(e.clip,s)&&!c?Promise.resolve(!0):async function(e,t,r){const{imageUrl:o,cropped:n,clip:i,rootWidth:s,rootHeight:a}=e,{video:{mask:{imageSrc:d,cropped:c,clip:l},backgroundMode:p}}=r;if(o){if(p===ye.VirtualBackground&&(t.stopVirtualBackgroundSetting(!0),await _d((()=>{t.stopMaskSetting()}),0)),o!==d||n!==c){const e=await wm(o,n);e&&(t.updateMaskBackgroundImage(e),setTimeout((()=>{u(e)}),0))}if((!Pm(i,l)||!d)&&i&&s&&a){const e=await Mm(i,s,a);e&&(t.updateMaskClip(e,s,a),setTimeout((()=>{u(e)}),0))}}else t.updateMaskBackgroundImage(null),t.updateMaskClip(null,s,a)}(e,t,r)}const Um="PREVIEW_VIDEO_ENCODE_SUCCESS",Vm="PREVIEW_VIDEO_VB_MODEL_READY",Bm="PREVIEW_VIDEO_USER_FORBIDDEN_CAPTURE",Hm="PREVIEW_VIDEO_CAMERA_IS_TAKEN",jm="PREVIEW_VB_SETTING_SUCCESS";async function Fm(e,t,r,o){const{imageUrl:n,cropped:i,deviceId:s}=r;let a=Id("__ZOOM_SDK_PREVIEW_VIRTUAL_BACKGROUND_CANVAS_@__"),d=null;l(t)?t.id?a=t.id:t.id=a:(t.setAttribute("node-id",a),t.setAttribute("media-type","preview"));let[c,p]=[640,360];Fu.isSupportSending720P()&&(c=1280,p=720),n&&Wd(o)&&(d=await wm(n,i)),e.startVirtualBackgroundSetting(t,d,0,null!=s?s:"default",c,p,void 0,a),d&&d!==te&&setTimeout((()=>{u(d)}),0)}class Wm{constructor(){this.previewMediaAgent=Ke.getInstance(),this.state=void 0,this.eventHandler=(e,t)=>{switch(e){case k.InitSuccessVideo:t===U.EncodeSuccess&&(Wm.isVideoEncoded=!0,Ga(Um,!0));break;case k.VbModelPreloadingOk:case k.VbModelPreloading_3S:case k.VbModelPreloading_10S:Wm.isVBModelReady=!0,Ga(Vm,!0);break;case k.VbSettingParaError:t===ee.VBModelNotMatch&&(Wm.isVBModelReady=!1,Ga(Vm,!1));break;case k.UserForbiddedCaptureVideo:Ga(Bm,t);break;case k.UserCameraIsTakenByOtherPrograms:Ga(Hm,{reason:"User camera is taken by other programs.",...null!=t?t:{}});break;case k.StartVideoStreamInVbSettingSuccess:Ga(jm,!0)}}}static setMediaOption(e){Wm.mediaOption=e}setup(){if(Wm.mediaOption){if(Fu.getInstance().inProgress)return Promise.resolve("");if(!Ke.getInstance().inProgress){var e,t;let r;Wm.isVideoEncoded=void 0,Wm.isVBModelReady=void 0,this.previewMediaAgent.unregisterCallback(this.eventHandler),null!==(e=Wm.mediaOption)&&void 0!==e&&e.enforceMultipleVideos&&"object"==typeof(null===(t=Wm.mediaOption)||void 0===t?void 0:t.enforceMultipleVideos)&&(r=!!Wm.mediaOption.enforceMultipleVideos.disableRenderLimits);const{assetsPath:o,enforceMultipleVideos:n,enforceVirtualBackground:i,alternativeNameForVideoPlayer:s}=Wm.mediaOption,a={...Gd(!!n,i)};this.previewMediaAgent.init(o,a,r),this.previewMediaAgent.registerCallback(this.eventHandler),Ke.initVideoPlayer({mediaSDK:()=>this.previewMediaAgent.instance,tagName:s,failover:"1"})}return Promise.resolve("")}return Promise.reject({type:Je,reason:"Cannot preview video with virtual background before `client.init` method."})}async startPreview(e,t){if(Fu.getInstance().inProgress){var r;Fm(Fu.getInstance(),e,t,null===(r=Wm.mediaOption)||void 0===r?void 0:r.enforceVirtualBackground)}else{const r=t.imageUrl?Mr(void 0!==Wm.isVBModelReady?Cr([Wm.isVBModelReady]):Ja(Vm,1).pipe(Vr((e=>e)))):Promise.resolve(!0);if(!await r)return Promise.reject({type:Je,reason:"Cannot start video with virtual background"});var o;await Mr(Wm.isVideoEncoded?Cr([!0]):Ja(Um,1))&&(await Fm(Ke.getInstance(),e,t,null===(o=Wm.mediaOption)||void 0===o?void 0:o.enforceVirtualBackground),await Mr(lo(Ja(jm,1).pipe(Vr((()=>!0))),io(...[Bm,Hm].map((e=>Ja(e,1).pipe(Gr((t=>(Ke.getInstance().stopVirtualBackgroundSetting(),Rr({type:e.replace("PREVIEW_",""),reason:t})))))))))),this.state={element:e,vb:t})}}async stopPreview(){Fu.getInstance().inProgress?Fu.getInstance().stopVirtualBackgroundSetting():Ke.getInstance().stopVirtualBackgroundSetting()}async updatePreview(e,t){const r=Fu.getInstance().inProgress?Fu.getInstance():Ke.getInstance();if(e){const o=await wm(e,t);o&&(r.updateVirtualBackgroundImage(o),o!==te&&setTimeout((()=>{u(o)}),0))}else r.updateVirtualBackgroundImage(null)}}Wm.mediaOption=void 0,Wm.isVideoEncoded=void 0,Wm.isVBModelReady=void 0;const xm={width:{min:1024,ideal:1280,max:1920},height:{min:576,ideal:720,max:1080},aspectRatio:{ideal:1.777777778}};class $m{constructor(e=""){this.isVideoStarted=void 0,this.videoStream=void 0,this.deviceId=void 0,this.localPreview=void 0,this.vbPreviewInProgress=void 0,this.videoParams=void 0,this.isVideoStarted=!1,this.videoStream=null,this.vbPreviewInProgress=!1,this.deviceId=e,this.localPreview=new Wm}async start(e,t){if(!e)throw new Error("VideoPlayer DOM element is falsy");if(this.isVideoStarted||this.videoStream)throw new Error("VideoAlreadyStartedError");this.videoParams={element:e,virtualBackground:t};const r=async t=>{if(!t||"OverconstrainedError"!==t.name&&"ConstraintNotSatisfiedError"!==t.name)throw t;console.log(`Warning: detected ${t.name} -- trying to fall back to lower aspect ratio`);try{const t=await navigator.mediaDevices.getUserMedia(this.getVideoConstraints(!0));return this.tryPlayVideo(e,t)}catch(e){throw e}};if(c(e)){if(void 0!==t)throw new Error("Cannot start video with virtual background");try{const t=await navigator.mediaDevices.getUserMedia(this.getVideoConstraints());return this.tryPlayVideo(e,t)}catch(e){return r(e)}}else l(e)&&void 0!==t&&console.warn("The canvas element will be deprecated. Please use the Videoplayer element to preview the virtual background."),await this.localPreview.setup().then((()=>this.localPreview.startPreview(e,{...t,deviceId:this.deviceId}))).then((()=>{this.vbPreviewInProgress=!0,this.isVideoStarted=!0}))}async stop(){if(this.vbPreviewInProgress)await this.localPreview.stopPreview(),this.vbPreviewInProgress=!1,this.isVideoStarted=!1;else{if(!this.videoStream||!this.isVideoStarted)throw new Error("VideoNotStartedError");this.videoStream.getVideoTracks().forEach((e=>e.stop())),this.videoStream=null,this.isVideoStarted=!1}}async switchCamera(e){e!==this.deviceId&&(this.deviceId=e,(this.videoStream||this.isVideoStarted)&&(await this.stop(),this.videoParams&&await this.start(this.videoParams.element,this.videoParams.virtualBackground)))}async updateVirtualBackground(e,t){this.vbPreviewInProgress&&(await this.localPreview.updatePreview(e,t),this.videoParams.virtualBackground={imageUrl:e,cropped:t})}getVideoConstraints(e=!1){let t=xm;return oe.includes(this.deviceId)?{audio:!1,video:{facingMode:this.deviceId}}:(e?t=""===this.deviceId||{deviceId:{exact:this.deviceId}}:""!==this.deviceId&&(t.deviceId={exact:this.deviceId}),{audio:!1,video:t})}async tryPlayVideo(e,t){if(!e)throw new Error("Video DOM element is falsy");try{this.videoStream=t,e.muted=!0,e.playsInline=!0,e.srcObject=this.videoStream,await e.play(),this.isVideoStarted=!0}catch(e){throw e}}}const Gm="SET_MEETING_INFO",zm="SET_MEETING_JOIN_INFO",qm="SET_WINDOWN_OPEN",Km="SET_APPID_SIGNATURE",Jm="SET_ZTK",Qm="SET_ZSK",Ym="SET_OBF_TOKEN",Zm="SET_TK_MTKGUID",Xm="SET_PING_RWC_TIMESTAMP",eg="SET_IN_MEETING_INFO",tg="SET_MEETING_ATTRIBUTE",rg="RESET_MEETING",og="SET_IS_HOST",ng="SET_IS_COHOST",ig="SET_MEETING_IS_ON_HOLD",sg="SET_IS_MEETING_RESET",ag="SET_AUDIO_VIDEO_BEFORE_ON_HOLD",ug="SET_CURRENT_USER_AUDIO_BEFORE_RESET",dg="SET_IS_CURRENT_USER_MUTED_BEFORE_RESET",cg="SET_IS_CURRENT_USER_START_VIDEO_BEFORE_RESET",lg="SET_MEETING_STATUS",pg="SET_MEETING_REGION",hg="SET_JOIN_MEETING_TIME_STAMP",mg="SET_ACTIVE_APP_INFO",gg="SET_MEETING_IDLE_START_TIME",Sg="SET_SESSION_IDLE_TIMEOUT_MINUTES",vg="ADD_DISCARDED_RWC_HOST",fg="SET_SHARE_PRONOUN_TYPE",yg="SET_IS_STAY_AWAKE_DURING_THE_SESSION",Eg="SET_MEETING_JOIN_SUCCESS_TIMESTAMP",_g="RESET_FAILOVER_RECORD",Ig="SET_FAILOVER_REASON",Ag="SET_IS_QUICKLY_LEAVE_MEETING_AFTER_REFRESH",bg="SET_MEETING_INFO_TIMESTAMP",Cg="SET_IS_ENABLE_ZMK_FROM_RWG",Tg="SET_IS_RLB_TP",Rg="SET_IS_RLB_TP_READY",Og=["bLock","bHoldUponEntry","viewOnly","listenOnlyPhone","bAllowRaiseHand","bAllowAttendeeRename","bBroadcast","bAllowPlayChimeForEnterOrExit","bIbDisableShare","bIbDisableChat","encryptKey","bNoHostTimeOut","bAllowShowCount","bHasAST","bHasRMC","gatewayKey","encryptKey"],Dg={bChime:"bAllowPlayChimeForEnterOrExit",bHasAST:"hasAst",bHasRMC:"hasRmc",topic:e=>({meetingTopic:pd(e)}),gatewayKey:e=>{const[,t,r]=e.split(".");return t&&r?{gatewayUser:{userId:Number(t),sn:r}}:{}},encryptKey:e=>({gcmSessinKey:gd(e)})},wg=Ic("GET_MEETING_INFO"),Ng=Ic("GET_INSTANT_MEETING_INFO");Ic("LOGON_ZOOM_DOMAIN"),Ic("VERIFY_ZOOM_RECAPTCHA"),Ic("LOGON_THIRD_PARTY_DOMAIN");const Mg=Ic("PING_RWC_SERVER"),Pg=Ic("MEETING_FAILOVER"),Lg=Ic("LEAVE_MEETING"),kg=Ic("LEAVE_WAITING_ROOM"),Ug=Ic("END_MEETING");Ic("REGISTER_WEBINAR");const Vg=Ic("TRIGGER_IDLE_CHECK"),Bg=Ic("END_OF_ZE_WORLD"),Hg=Ic("SET_IS_UITOOLKIT"),{setMeetingInfo:jg,setMeetingJoinInfo:Fg,setWindownOpen:Wg,setAppidSignature:xg,setZtk:$g,setZsk:Gg,setObfToken:zg,setTkMtkguid:qg,setPingRwcTimestamp:Kg,setInMeetingInfo:Jg,setMeetingAttribute:Qg,resetMeeting:Yg,setIsHost:Zg,setIsCohost:Xg,setMeetingIsOnHold:eS,setIsMeetingReset:tS,setAudioVideoBeforeOnHold:rS,setCurrentUserAudioBeforeReset:oS,setIsCurrentUserMutedBeforeReset:nS,setMeetingStatus:iS,setMeetingRegion:sS,setIsCurrentUserStartVideoBeforeReset:aS,setJoinMeetingTimeStamp:uS,setActiveAppInfo:dS,setMeetingIdleStartTime:cS,setSessionIdleTimeoutMinutes:lS,addDiscardedRwcHost:pS,setSharePronounType:hS,setIsStayAwakeDuringTheSession:mS,setMeetingJoinSuccessTimestamp:gS,resetFailoverRecord:SS,setFailoverReason:vS,setIsQuicklyLeaveMeetingAfterRefresh:fS,setMeetingInfoTimestamp:yS,setIsEnableZmkFromRwg:ES,setIsRlbTp:_S,setIsRlbTpReady:IS}=Wc({[Gm]:e=>e,[zm]:e=>e,[qm]:e=>e,[Km]:e=>e,[Jm]:e=>e,[Qm]:e=>e,[Ym]:e=>e,[Zm]:e=>e,[Xm]:e=>e,[eg]:e=>e,[tg]:e=>{if(Og.some((t=>e&&void 0!==e[t]))){let t=e;return Object.keys(Dg).some((t=>void 0!==e[t]))&&(t=Object.keys(e).reduce(((t,r)=>{const o=Dg[r];return"function"==typeof o?Object.assign(t,o(e[r])):"string"==typeof o&&(t[o]=e[r]),t}),{})),t}return{}},[og]:e=>e&&e.bHost,[ng]:e=>e&&e.bCoHost,[rg]:e=>e,[ig]:e=>e,[sg]:e=>e,[ag]:e=>e,[ug]:e=>e,[dg]:e=>e,[lg]:e=>e,[pg]:e=>e,[cg]:e=>e,[hg]:e=>e,[mg]:e=>e,[gg]:e=>e,[Sg]:e=>e,[vg]:e=>e,[fg]:e=>e,[yg]:e=>e,[Eg]:e=>e,[_g]:e=>e,[Ig]:e=>e,[Ag]:e=>e,[bg]:e=>e,[Cg]:e=>e,[Tg]:e=>e,[Rg]:e=>e});class AS{static destroyClient(){if(this.meetingClient){const e=this.meetingClient[o],t=this.meetingClient.leave().then((()=>Mr(oo(500)).then((()=>{null==e||e(Bg()),Ya()}))));return this.meetingClient=null,t}return Promise.resolve(void 0)}static checkFeatureRequirements(){return function(){const e=[],t=[],{isAndroidOrIOSBrowser:r,browser:o,browserVersion:n,os:i,osVersion:s,isChrome:a,isFirefox:u,isSafari:d}=T;!r&&(a||u||d)&&O()?e.push("Virtual Background"):t.push("Virtual Background"),(r||a)&&O()?e.push("Share Chrome Tab Audio"):t.push("Share Chrome Tab Audio"),!r&&O()?(e.push("Screen Share (send)"),e.push("720p Video (receive)"),e.push("Share 2nd Camera")):(t.push("Screen Share (send)"),t.push("720p Video (receive)"),t.push("Share 2nd Camera")),O()?(e.push("Audio"),e.push("Video"),e.push("Screen Share (receive)"),e.push("Chat"),e.push("Closed Captioning"),e.push("Live Transcription"),e.push("Live Translation"),e.push("Cloud Recording"),e.push("Call Out (PSTN)"),e.push("Command Channel"),e.push("RTMP Live Streaming"),e.push("Encryption"),e.push("720p Video (send)"),e.push("Render Multiple Videos")):(t.push("Audio"),t.push("Video"),t.push("Screen Share (receive)"),t.push("Chat"),t.push("Closed Captioning"),t.push("Live Transcription"),t.push("Live Translation"),t.push("Cloud Recording"),t.push("Call Out (PSTN)"),t.push("Command Channel"),t.push("RTMP Live Streaming"),t.push("Encryption"),e.push("720p Video (send)"),e.push("Render Multiple Videos"));const c=r?`${i}${s}`:`${o}${n}`;return t.length>0&&console.log("Some features are not supported on your platform, please refer to https://developers.zoom.us/docs/video-sdk/web/browser-support/"),{platform:c,supportFeatures:e,unSupportFeatures:t}}()}static checkSystemRequirements(){return D()}static getDevices(e){return e?navigator.mediaDevices.enumerateDevices():navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((e=>(e.getTracks().forEach((e=>e.stop())),navigator.mediaDevices.enumerateDevices()))).catch((e=>(console.warn(e),navigator.mediaDevices.enumerateDevices())))}static createLocalAudioTrack(e=""){return new L(e)}static createLocalVideoTrack(e=""){return new $m(e)}static preloadDependentAssets(e){(async e=>{const t=e||f,r=`${t}/${Vo}`,o=[],n=[],i=`${t}/`;if(Hd()){const{workers:e,wasms:t}=$d("audio","simd",i);o.push(...e),n.push(...t)}else{const{workers:e,wasms:t}=$d("audio","",i);o.push(...e),n.push(...t)}if(Hd()&&function(){const{browser:e,browserVersion:t,isAndroidBrowser:r,isSupportSharedArrayBuffer:o}=T;return!r&&"chrome"===e.toLowerCase()&&vd(t,"100")>0&&o}()){const{workers:e,wasms:t}=$d(["video","sharing"],"videoShare",i);o.push(...e),n.push(...t)}else if(Hd()&&Bd()){const{workers:e,wasms:t}=$d(["video","sharing"],"simd,thread",i);o.push(...e),n.push(...t)}else if(Bd()){const{workers:e,wasms:t}=$d(["video","sharing"],"thread",i);o.push(...e),n.push(...t)}else if(Hd()){const{workers:e,wasms:t}=$d(["video","sharing"],"simd",i);o.push(...e),n.push(...t)}else{const{workers:e,wasms:t}=$d(["video","sharing"],"",i);o.push(...e),n.push(...t)}const{workers:s,wasms:a}=$d("common","thread",i);o.push(...s),n.push(...a);const u=[xd(r,"script")];o.forEach((e=>{u.push(xd(e,"fetch"))})),n.forEach((e=>{u.push(xd(e,"fetch"))}));try{document.head.append(...u)}catch(e){}})(e)}}function bS(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,t,i),null):i}AS.meetingClient=void 0,AS.VERSION=S;let CS=function(e){return e[e.WbSettingLockShare=0]="WbSettingLockShare",e[e.WbSettingHostGrab=1]="WbSettingHostGrab",e[e.WbSettingLockShareSecurity=2]="WbSettingLockShareSecurity",e[e.WbSettingAnyoneGrab=3]="WbSettingAnyoneGrab",e}({}),TS=function(e){return e[e.OWNER=0]="OWNER",e[e.COOWNER=1]="COOWNER",e[e.EDITOR=2]="EDITOR",e[e.COMMENTER=3]="COMMENTER",e[e.REVIEWER=4]="REVIEWER",e}({}),RS=function(e){return e[e.HostOnly=0]="HostOnly",e[e.InternalUser=1]="InternalUser",e[e.AllParticipants=2]="AllParticipants",e}({}),OS=function(e){return e.DEFAULT="",e.READY="ready",e.INIT="init",e.OPEN="open",e.LOADING="loading",e.OPENED="opened",e.LEAVE="leave",e.CLOSE="close",e.ERROR="error",e}({});const DS=OS,wS="PWA_WB_DASHBOARD",NS={[Na.WHITEBOARD_BACKEND_ERROR]:"Whiteboard backend error",[Na.WHITEBOARD_GET_INIT_TOKEN_FAIL]:"Whiteboard get token fail, please refresh page",[Na.WHITEBOARD_LOAD_WHITEBOARD_JS_CSS_ERROR]:"Whiteboard load whiteboard js/css error, please refresh page",[Na.WHITEBOARD_VIDEOSDK_NOT_SUPPORT_DASHBOARD]:"VideoSDK does not support dashboard",[Na.WHITEBOARD_MEETING_NOT_JOINED]:"Meeting not joined",[Na.WHITEBOARD_ELEMENT_NOT_FOUND]:"Whiteboard element not found",[Na.WHITEBOARD_WEBINAR_NOT_SUPPORTED]:"Webinar mode not supported",[Na.WHITEBOARD_DOC_ID_NOT_AVAILABLE]:"Document ID not available",[Na.WHITEBOARD_INSUFFICIENT_PRIVILEGES]:"Insufficient privileges for whiteboard operation",[Na.WHITEBOARD_INVALID_STATE]:"Invalid whiteboard state",[Na.WHITEBOARD_NOT_AVAILABLE]:"Whiteboard feature not available",[Na.WHITEBOARD_PRIVILEGE_SET_FAILED]:"Failed to set whiteboard privilege",[Na.WHITEBOARD_USER_ROLE_CHANGE_FAILED]:"Failed to change user whiteboard role",[Na.WHITEBOARD_LOCK_API_NOT_AVAILABLE]:"Lock whiteboard API not available for meetings",[Na.WHITEBOARD_NOT_OPENED]:"Whiteboard is not opened",[Na.WHITEBOARD_INVALID_EXPORT_FORMAT]:"Invalid export format",[Na.WHITEBOARD_PRESENTER_LEAVE]:"You are the presenter, you cant leave whiteboard, please use closeWhiteboard",[Na.WHITEBOARD_TOKEN_NOT_AVAILABLE]:"Whiteboard token is not available, please retry",[Na.WHITEBOARD_NOT_INIT]:"Whiteboard is not initialized",[Na.WHITEBOARD_NOT_INIT_SUCCESS]:"Whiteboard initialization failed",[Na.WHITEBOARD_NEED_RETRY]:"Whiteboard open failed, please retry",[Na.WHITEBOARD_REQUIRE_SHARING_STOP]:"If want to open whiteboard, please stop sharing first",[Na.WHITEBOARD_ALREADY_OPEN]:"Whiteboard is already opened",[Na.WHITEBOARD_AND_SHARING_CONFLICT]:"Unable to share screen when whiteboard is sharing",[Na.WHITEBOARD_AND_ANNOTATION_CONFLICT]:"Unable to start annotation when whiteboard is sharing",[Na.WHITEBOARD_DASHBOARD_IFRAME_NOT_FOUND]:"Whiteboard dashboard iframe not found"};function MS(e,r,o){const n=o.value;o.value=function(...e){const r=this[t];if(r){const{meeting:{isOnHold:e,isMeetingReset:t,meetingStatus:o}}=r.getState();if(o!==jo.Joined)return Promise.reject({type:Xe,reason:"closed",errorCode:Na.CLIENT_SESSION_STATE_CLOSED});if(t)return Promise.reject({type:Xe,reason:"reconnecting",errorCode:Na.CLIENT_SESSION_STATE_RECONNECTING});if(e)return Promise.reject({type:Xe,reason:"on hold",errorCode:Na.CLIENT_SESSION_STATE_ON_HOLD})}return n.apply(this,e)}}function PS(e,r,o){const n=o.value;o.value=function(...e){const r=this[t];if(r){const{whiteboard:{whiteboardStatus:e,dashboardStatus:t}}=r.getState();if(e===OS.DEFAULT&&t===DS.DEFAULT)return Promise.reject({type:Xe,reason:"whiteboard not init success. please call init",errorCode:Na.WHITEBOARD_NOT_INIT});if(e===OS.ERROR&&t===DS.ERROR)return Promise.reject({type:Xe,reason:"whiteboard not init success. please call init",errorCode:Na.WHITEBOARD_NOT_INIT_SUCCESS})}return n.apply(this,e)}}function LS(e,r,o){const n=o.value;o.value=function(...e){const r=this[t];if(r){const e=r.getState();if(!Ou(e))return Promise.reject({type:Ze,reason:"only host or co-host can do the operation",errorCode:Na.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})}return n.apply(this,e)}}function kS(e,r,o){const n=o.value;o.value=function(...e){const r=this[t];if(r){const e=r.getState();if(!Du(e))return Promise.reject({type:Ze,reason:"only host can do the operation",errorCode:Na.CLIENT_HOST_PERMISSION_REQUIRED})}return n.apply(this,e)}}function US(e){return function(r,o,n){const i=n.value;n.value=function(...r){const o=this[t];return o&&void 0===o.getState()[e]?Promise.reject({type:Je,reason:`Module:${e} is not enabled`}):i.apply(this,r)}}}var VS=function(e){function t(t,r){var o=e.call(this,(function(e){var t=o.__notifier.subscribe(e);return t&&!t.closed&&e.next(o.value),t}))||this;return o.__notifier=new Bt,o.value=r,t.subscribe((function(e){e!==o.value&&(o.value=e,o.__notifier.next(e))})),o}return ot(t,e),t}(Nt),BS=function(e,t){return e===t||"function"==typeof t&&e===t.toString()};function HS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;return co(1===r?function(t){return BS(t.type,e[0])}:function(t){for(var o=0;o<r;o++)if(BS(t.type,e[o]))return!0;return!1})}const jS=Ic("CONNECT_ZOOM_SOCKET"),FS=Ic("CONNECT_XMPP_SOCKET"),WS=Ic("CLOSE_ZOOM_SOCKET"),xS=Ic("CLOSE_XMPP_SOCKET"),$S=Ic("RECEIVE_MESSAGE_FROM_ZOOM_SOCKET"),GS=Ic("RECEIVE_SHARING_PAYLOAD_FROM_ZOOM_SOCKET"),zS=Ic("RECEIVE_MESSAGE_FROM_XMPP_SOCKET"),qS=Ic("CONNECT_MAIN_SESSION_SOCKET"),KS=Ic("CLOSE_MAIN_SESSION_SOCKET"),JS=Ic("RECEIVE_MESSAGE_FROM_MAIN_SESSION_SOCKET"),{setZoomSocketStatus:QS,setRwgServersList:YS,setRwgRetryCount:ZS,setXmppSocketStatus:XS,setMainSessionSocketStatus:ev,setXmppSocketRetryCount:tv,resetSocket:rv}=Wc("SET_ZOOM_SOCKET_STATUS","SET_RWG_SERVERS_LIST","SET_RWG_RETRY_COUNT","SET_XMPP_SOCKET_STATUS","SET_MAIN_SESSION_SOCKET_STATUS","SET_XMPP_SOCKET_RETRY_COUNT","RESET_SOCKET"),ov=Ic("CONNECT_TO_MEDIA_STREAM"),nv=Ic("RECEIVE_PAYLOAD_FROM_MEDIA_SDK"),{setAudioEncodeStatus:iv,setAudioDecodeStatus:sv,setVideoEncodeStatus:av,setVideoDecodeStatus:uv,setSharingEncodeStatus:dv,setSharingDecodeStatus:cv,setMediaConstraints:lv,setMediaEncryptKey:pv,setIsEnableDecoderInWorklet:hv,setPatchedMediaSdkStatus:mv,setMediaAssetsPath:gv,setIsMediaAgentInitialized:Sv,resetMedia:vv}=Wc("SET_AUDIO_ENCODE_STATUS","SET_AUDIO_DECODE_STATUS","SET_VIDEO_ENCODE_STATUS","SET_VIDEO_DECODE_STATUS","SET_SHARING_ENCODE_STATUS","SET_SHARING_DECODE_STATUS","SET_MEDIA_CONSTRAINTS","SET_MEDIA_ENCRYPT_KEY","SET_IS_ENABLE_DECODER_IN_WORKLET","SET_PATCHED_MEDIA_SDK_STATUS","SET_MEDIA_ASSETS_PATH","SET_IS_MEDIA_AGENT_INITIALIZED","RESET_MEDIA");function fv(e,t,...r){return e(Tr(...r||[]),t,null)}function yv(...e){const t=(...t)=>io(...e.map((e=>{const r=e(...t);if(!r)throw new TypeError(`combineEpics: one of the provided Epics "${e.name||"<anonymous>"}" does not return a stream. Double check you're not missing a return statement!`);return r.pipe(po(((e,t)=>(setTimeout((()=>{throw e}),0),t))))})));try{Object.defineProperty(t,"name",{value:`combineEpics(${e.map((e=>e.name||"<anonymous>")).join(", ")})`})}catch(e){}return t}function Ev(...e){return yv(...e.flatMap((e=>Object.values(e))))}function _v(e,t){return e.pipe(HS(`${$S}`),co((e=>e.payload.evt===t)))}function Iv(e,t){return e.pipe(HS(`${JS}`),co((e=>e.payload.evt===t)))}function Av(e,t){return e.pipe(HS(`${zS}`),co((e=>e.payload.evt===t)))}function bv(e,t){return e.pipe(HS(`${$S}`,`${JS}`),co((e=>e.payload.evt===t)))}function Cv(e,t){return e.pipe(HS(`${nv}`),co((e=>Array.isArray(t)?t.indexOf(e.payload.type)>-1:e.payload.type===t)))}const Tv=20225,Rv=20234,Ov=7937,Dv=7938,wv=12039,Nv=16138,Mv=4098,Pv=4305,Lv=4343,kv=16428,Uv="SET_ATTENDEES_LIST",Vv="SET_ASSISTANT_LIST",Bv="RESET_PARTICIPANTS",Hv="SET_IS_ADMIT_ALL_SILENT_USERS",jv="SET_CLEAR_RAISE_HAND",Fv="SET_CLEAR_ATTENDEE_FEEDBACK",Wv="ADD_FAILOVER_ATTENDEES",xv="REMOVE_FAILOVER_ATTENDEES",$v="UPDATE_ATTENDEE_DISPLAY_NAME",Gv="REMOVE_XMPP_ATTENDEE_USER",zv="UPDATE_XMPP_ATTENDEE_LIST",qv="SET_ATTENDEE_EXTRA_KEY",{setAttendeesList:Kv,setAssistantList:Jv,setIsAdmitAllSilentUsers:Qv,resetParticipants:Yv,addFailoverAttendees:Zv,removeFailoverAttendees:Xv,setClearRaiseHand:ef,setClearAttendeeFeedback:tf,updateAttendeeDisplayName:rf,removeXmppAttendeeUser:of,updateXmppAttendeeList:nf,setAttendeeExtraKey:sf}=Wc({[Uv]:e=>e,[Vv]:e=>e,[zv]:e=>e,[Bv]:()=>({}),[Hv]:e=>e,[xv]:e=>e,[Wv]:e=>e,[jv]:()=>({}),[Fv]:()=>({}),[$v]:e=>e,[Gv]:e=>e,[qv]:e=>e}),af={id:"userId",type:e=>cu(e)?{userType:e,avatarBackgroundType:Math.floor(8*Math.random())+1}:{userType:e},role:e=>({userRole:e,isHost:du(e)}),dn2:e=>({displayName:pd(e)}),bShareOn:"sharerOn",bSharePause:"sharerPause",bLocalRecordStatus:e=>({bLocalRecord:e}),bGuest:"isGuest",bCapsRequestLT:"isRequestLT",customerKey:"userIdentity",bBotUser:"botUser",BotBrandName:"botBrandName",BotAuthorizerName:"botAuthorizerName"},uf=e=>{const t={};return["add","remove","update"].forEach((r=>{const o=r,n=e[o];null!=n&&(t[o]=n.reduce(((e,t)=>{const r=Object.keys(t).reduce(((e,r)=>{const o=af[r];return"function"==typeof o?Object.assign(e,o(t[r])):"string"==typeof o?Object.assign(e,{[`${o}`]:t[r]}):Object.assign(e,{[`${r}`]:t[r]}),e}),{}),o=e.find((e=>e.userId===r.userId));return void 0!==o?Object.assign(o,r):e.push(r),e}),[]))})),t},df={name:"displayName",node:e=>({userId:Number(e)}),role:e=>({userRole:Number(e)})},cf=e=>Object.keys(e).reduce(((t,r)=>{const o=df[r];return"function"==typeof o?Object.assign(t,o(e[r])):"string"==typeof o?Object.assign(t,{[`${o}`]:e[r]}):Object.assign(t,{[`${r}`]:e[r]}),t}),{});let lf=function(e){return e.Add="add",e.List="list",e.Remove="memberremove",e.rename="rename",e.update="UPDATE",e}({});function pf(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function hf(e){return!!e&&!!e[Zf]}function mf(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Xf}(e)||Array.isArray(e)||!!e[Yf]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Yf])||Ef(e)||_f(e))}function gf(e){return hf(e)||pf(23,e),e[Zf].t}function Sf(e,t,r){void 0===r&&(r=!1),0===vf(e)?(r?Object.keys:ey)(e).forEach((function(o){r&&"symbol"==typeof o||t(o,e[o],e)})):e.forEach((function(r,o){return t(o,r,e)}))}function vf(e){var t=e[Zf];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Ef(e)?2:_f(e)?3:0}function ff(e,t){return 2===vf(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yf(e,t,r){var o=vf(e);2===o?e.set(t,r):3===o?e.add(r):e[t]=r}function Ef(e){return qf&&e instanceof Map}function _f(e){return Kf&&e instanceof Set}function If(e){return e.o||e.t}function Af(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ty(e);delete t[Zf];for(var r=ey(t),o=0;o<r.length;o++){var n=r[o],i=t[n];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[n]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[n]})}return Object.create(Object.getPrototypeOf(e),t)}function bf(e,t){return void 0===t&&(t=!1),Tf(e)||hf(e)||!mf(e)||(vf(e)>1&&(e.set=e.add=e.clear=e.delete=Cf),Object.freeze(e),t&&Sf(e,(function(e,t){return bf(t,!0)}),!0)),e}function Cf(){pf(2)}function Tf(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Rf(e){var t=ry[e];return t||pf(18,e),t}function Of(){return Gf}function Df(e,t){t&&(Rf("Patches"),e.u=[],e.s=[],e.v=t)}function wf(e){Nf(e),e.p.forEach(Pf),e.p=null}function Nf(e){e===Gf&&(Gf=e.l)}function Mf(e){return Gf={p:[],l:Gf,h:e,m:!0,_:0}}function Pf(e){var t=e[Zf];0===t.i||1===t.i?t.j():t.g=!0}function Lf(e,t){t._=t.p.length;var r=t.p[0],o=void 0!==e&&e!==r;return t.h.O||Rf("ES5").S(t,e,o),o?(r[Zf].P&&(wf(t),pf(4)),mf(e)&&(e=kf(t,e),t.l||Vf(t,e)),t.u&&Rf("Patches").M(r[Zf].t,e,t.u,t.s)):e=kf(t,r,[]),wf(t),t.u&&t.v(t.u,t.s),e!==Qf?e:void 0}function kf(e,t,r){if(Tf(t))return t;var o=t[Zf];if(!o)return Sf(t,(function(n,i){return Uf(e,o,t,n,i,r)}),!0),t;if(o.A!==e)return t;if(!o.P)return Vf(e,o.t,!0),o.t;if(!o.I){o.I=!0,o.A._--;var n=4===o.i||5===o.i?o.o=Af(o.k):o.o,i=n,s=!1;3===o.i&&(i=new Set(n),n.clear(),s=!0),Sf(i,(function(t,i){return Uf(e,o,n,t,i,r,s)})),Vf(e,n,!1),r&&e.u&&Rf("Patches").N(o,r,e.u,e.s)}return o.o}function Uf(e,t,r,o,n,i,s){if(hf(n)){var a=kf(e,n,i&&t&&3!==t.i&&!ff(t.R,o)?i.concat(o):void 0);if(yf(r,o,a),!hf(a))return;e.m=!1}else s&&r.add(n);if(mf(n)&&!Tf(n)){if(!e.h.D&&e._<1)return;kf(e,n),t&&t.A.l||Vf(e,n)}}function Vf(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&bf(t,r)}function Bf(e,t){var r=e[Zf];return(r?If(r):e)[t]}function Hf(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var o=Object.getOwnPropertyDescriptor(r,t);if(o)return o;r=Object.getPrototypeOf(r)}}function jf(e){e.P||(e.P=!0,e.l&&jf(e.l))}function Ff(e){e.o||(e.o=Af(e.t))}function Wf(e,t,r){var o=Ef(t)?Rf("MapSet").F(t,r):_f(t)?Rf("MapSet").T(t,r):e.O?function(e,t){var r=Array.isArray(e),o={i:r?1:0,A:t?t.A:Of(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},n=o,i=oy;r&&(n=[o],i=ny);var s=Proxy.revocable(n,i),a=s.revoke,u=s.proxy;return o.k=u,o.j=a,u}(t,r):Rf("ES5").J(t,r);return(r?r.A:Of()).p.push(o),o}function xf(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Af(e)}var $f,Gf,zf="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),qf="undefined"!=typeof Map,Kf="undefined"!=typeof Set,Jf="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Qf=zf?Symbol.for("immer-nothing"):(($f={})["immer-nothing"]=!0,$f),Yf=zf?Symbol.for("immer-draftable"):"__$immer_draftable",Zf=zf?Symbol.for("immer-state"):"__$immer_state",Xf=""+Object.prototype.constructor,ey="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ty=Object.getOwnPropertyDescriptors||function(e){var t={};return ey(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},ry={},oy={get:function(e,t){if(t===Zf)return e;var r=If(e);if(!ff(r,t))return function(e,t,r){var o,n=Hf(t,r);return n?"value"in n?n.value:null===(o=n.get)||void 0===o?void 0:o.call(e.k):void 0}(e,r,t);var o=r[t];return e.I||!mf(o)?o:o===Bf(e.t,t)?(Ff(e),e.o[t]=Wf(e.A.h,o,e)):o},has:function(e,t){return t in If(e)},ownKeys:function(e){return Reflect.ownKeys(If(e))},set:function(e,t,r){var o=Hf(If(e),t);if(null==o?void 0:o.set)return o.set.call(e.k,r),!0;if(!e.P){var n=Bf(If(e),t),i=null==n?void 0:n[Zf];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,n)&&(void 0!==r||ff(e.t,t)))return!0;Ff(e),jf(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==Bf(e.t,t)||t in e.t?(e.R[t]=!1,Ff(e),jf(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=If(e),o=Reflect.getOwnPropertyDescriptor(r,t);return o?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:o.enumerable,value:r[t]}:o},defineProperty:function(){pf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){pf(12)}},ny={};Sf(oy,(function(e,t){ny[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ny.deleteProperty=function(e,t){return ny.set.call(this,e,t,void 0)},ny.set=function(e,t,r){return oy.set.call(this,e[0],t,r,e[0])};var iy=function(){function e(e){var t=this;this.O=Jf,this.D=!0,this.produce=function(e,r,o){if("function"==typeof e&&"function"!=typeof r){var n=r;r=e;var i=t;return function(e){var t=this;void 0===e&&(e=n);for(var o=arguments.length,s=Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];return i.produce(e,(function(e){var o;return(o=r).call.apply(o,[t,e].concat(s))}))}}var s;if("function"!=typeof r&&pf(6),void 0!==o&&"function"!=typeof o&&pf(7),mf(e)){var a=Mf(t),u=Wf(t,e,void 0),d=!0;try{s=r(u),d=!1}finally{d?wf(a):Nf(a)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return Df(a,o),Lf(e,a)}),(function(e){throw wf(a),e})):(Df(a,o),Lf(s,a))}if(!e||"object"!=typeof e){if(void 0===(s=r(e))&&(s=e),s===Qf&&(s=void 0),t.D&&bf(s,!0),o){var c=[],l=[];Rf("Patches").M(e,s,c,l),o(c,l)}return s}pf(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var o=arguments.length,n=Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(n))}))};var o,n,i=t.produce(e,r,(function(e,t){o=e,n=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,o,n]})):[i,o,n]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){mf(e)||pf(8),hf(e)&&(e=function(e){return hf(e)||pf(22,e),function e(t){if(!mf(t))return t;var r,o=t[Zf],n=vf(t);if(o){if(!o.P&&(o.i<4||!Rf("ES5").K(o)))return o.t;o.I=!0,r=xf(t,n),o.I=!1}else r=xf(t,n);return Sf(r,(function(t,n){o&&function(e,t){return 2===vf(e)?e.get(t):e[t]}(o.t,t)===n||yf(r,t,e(n))})),3===n?new Set(r):r}(e)}(e));var t=Mf(this),r=Wf(this,e,void 0);return r[Zf].C=!0,Nf(t),r},t.finishDraft=function(e,t){var r=(e&&e[Zf]).A;return Df(r,t),Lf(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Jf&&pf(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var o=t[r];if(0===o.path.length&&"replace"===o.op){e=o.value;break}}r>-1&&(t=t.slice(r+1));var n=Rf("Patches").$;return hf(e)?n(e,t):this.produce(e,(function(e){return n(e,t)}))},e}(),sy=new iy,ay=sy.produce;sy.produceWithPatches.bind(sy),sy.setAutoFreeze.bind(sy),sy.setUseProxies.bind(sy),sy.applyPatches.bind(sy),sy.createDraft.bind(sy),sy.finishDraft.bind(sy);const uy={attendeesList:[],assistantList:[],xmppAttendeeList:[],allowTalkAttendeesList:[],failoverAttendeesList:[],isAdmitAllSilentUsers:!1},dy=qc({[`${Kv}`]:ay(((e,{payload:t})=>{void 0!==t.add&&t.add.length>0&&t.add.forEach((t=>{if(t.userType===uu.Assitant){const r=e.assistantList.find((e=>e.userId===t.userId));void 0!==r?Object.assign(r,t):e.assistantList.push(t)}else if(lu(t.userRole)){const r=e.allowTalkAttendeesList.find((e=>e.userId===t.userId));void 0!==r?Object.assign(r,t):e.allowTalkAttendeesList.push(t)}else{const r=e.attendeesList.find((e=>e.userId===t.userId));void 0!==r?Object.assign(r,t):e.attendeesList.push(t)}})),void 0!==t.update&&t.update.length>0&&t.update.forEach((t=>{const r=e.attendeesList.find((e=>e.userId===t.userId));if(void 0!==r)Object.assign(r,t);else{const r=e.allowTalkAttendeesList.find((e=>e.userId===t.userId));if(void 0!==r)Object.assign(r,t);else{const r=e.assistantList.find((e=>e.userId===t.userId));void 0!==r&&Object.assign(r,t)}}})),void 0!==t.remove&&t.remove.length>0&&t.remove.forEach((t=>{const r=e.attendeesList.findIndex((e=>e.userId===t.userId));if(-1!==r)e.attendeesList.splice(r,1);else{const r=e.allowTalkAttendeesList.findIndex((e=>e.userId===t.userId));if(-1!==r)e.allowTalkAttendeesList.splice(r,1);else{const r=e.assistantList.findIndex((e=>e.userId===t.userId));-1!==r&&e.assistantList.splice(r,1)}}}))})),[`${nf}`]:ay(((e,{payload:t})=>{const{xmppAttendeeList:r}=e,o=r.map((e=>e.jid));t.forEach((e=>{const{jid:t}=e,n=o.indexOf(t);-1!==n?Object.assign(r[n],e):r.push(e)}))})),[`${Qv}`]:ay(((e,{payload:t})=>{e.isAdmitAllSilentUsers=t})),[`${ef}`]:ay((e=>{e.attendeesList.forEach((e=>{e.bRaiseHand&&(e.bRaiseHand=!1)}))})),[`${tf}`]:ay((e=>{e.attendeesList.forEach((e=>{e.feedback>0&&(e.feedback=0)}))})),[`${Zv}`]:ay(((e,{payload:t})=>{e.failoverAttendeesList.push(t)})),[`${Xv}`]:ay(((e,{payload:t})=>{t.forEach((t=>{const r=e.failoverAttendeesList.findIndex((e=>e.zoomID===t.zoomID));-1!==r&&e.failoverAttendeesList.splice(r,1)}))})),[`${rf}`]:ay(((e,{payload:t})=>{const{jid:r,name:o}=t,n=e.xmppAttendeeList.find((e=>e.jid===r));n&&(n.displayName=o)})),[`${of}`]:ay(((e,{payload:t})=>{const{jid:r}=t,o=e.xmppAttendeeList.findIndex((e=>e.jid===r));-1!==r&&e.xmppAttendeeList.splice(o,1)})),[`${sf}`]:ay(((e,{payload:t})=>{const{userId:r,key:o,value:n}=t,i=e.attendeesList.find((e=>e.userId===r));i&&(i[`${o}`]=n)})),[`${Yv}`]:()=>uy},uy),cy={epics0:(e,t)=>_v(e,Ov).pipe(Vr((e=>uf(e.payload.body))),Oo(t),Gr((([e,t])=>{let r=[Kv(e)];const{meeting:{userId:o,isWebinar:n,isOnHold:i},participants:{attendeesList:s,failoverAttendeesList:a,allowTalkAttendeesList:u}}=t,d=u.map((e=>e.userId));if(e.add){const i=e.add.filter((e=>e.userId===o));i.length>0&&i.forEach((e=>{void 0!==e.bHold&&r.push(eS(e.bHold)),s.some((t=>t.userId===e.userId))?Ga(wo,e):Ga(Do,e)}));const u=e.add.filter((e=>e.userId!==o));if(u.length>0){const e=u.filter((e=>!lu(e.userRole))).map((e=>{const r={...e};if(cu(e.userType)){var o;const n=null===(o=t.audio)||void 0===o?void 0:o.dialout.find((t=>t.phoneNodeId===e.userId));n&&Object.assign(r,{phoneNumber:n.phoneNumber})}const n=a.find((t=>t.zoomID===e.zoomID));return n&&Object.assign(r,{source:n.isOnHold?"on hold":"failover"}),r})),o=e.filter((e=>!!e.source)).map((e=>({zoomID:e.zoomID})));if(r.push(Xv(o)),Ga(No,e),n){const e=u.filter((e=>lu(e.userRole)));e.length>0&&Ga(Lo,e.map((e=>({userId:e.userId,isAllowToTalk:!0}))))}}}if(e.update){const t=e.update.filter((e=>e.userId===o));t.length>0&&t.forEach((e=>{Ga(wo,e),void 0!==e.bHold&&r.push(eS(e.bHold))}));const i=e.update.filter((e=>!(e.userId===o||d.includes(e.userId))));if(i.length>0&&Ga(Mo,i),n){const t=e.update.filter((e=>e.userId!==o&&d.includes(e.userId)));t.length>0&&Ga(Lo,t)}}if(e.remove){const t=e.remove.map((e=>{const t=s.find((t=>t.userId===e.userId));return t?2===e.action&&1===e.nUserStatus?t.bHold?(r.push(Zv({zoomID:t.zoomID,isOnHold:!0})),{...e,...t,reason:"on hold"}):(r.push(Zv({zoomID:t.zoomID,isOnHold:!1})),{...e,...t,reason:"failover"}):{...e,...t}:null})).filter((e=>!!e));if(Ga(Po,t),n){const t=e.remove.filter((e=>d.includes(e.userId)));t.length>0&&Ga(Lo,t.map((e=>({userId:e.userId,isAllowToTalk:!1}))))}}const c=r.filter((e=>e.type===`${eS}`));if(c.length>0){const e=c[c.length-1];r=r.filter((e=>e.type!==`${eS}`)),e.payload!==i&&(r.push(e),Ga(qo,!i))}return Cr(r)}))),epics1:(e,t)=>Av(e,24595).pipe(Gr((e=>{const{payload:{body:{action:r,data:o}}}=e,{meeting:{jid:n},participants:{xmppAttendeeList:i}}=t.value,s=[];if(r===lf.rename){o.forEach((e=>{s.push(rf(e))}));const e=o.map((e=>cf(e)));Ga(Lo,e)}if(r===lf.Remove){o.forEach((e=>{s.push(of(e))}));const e=o.map((e=>({...cf(e),removed:!0})));Ga(ko,e)}if([lf.Add,lf.List,lf.update].includes(r)){const e=o.map((e=>{const t=cf(e);return Object.keys(t).reduce(((e,r)=>(""!==t[r]&&Object.assign(e,{[r]:t[r]}),e)),{})}));if(Ga(Lo,e),s.push(nf(e)),r===lf.update){const e=o.find((e=>e.jid===n));if(e&&void 0!==e.bRaiseHand){const t=i.find((e=>e.jid===n));(null==t?void 0:t.bRaiseHand)!==e.bRaiseHand&&Ga("MEETING_WEBINAR_ATTENDEE_RAISE_HAND",{bRaiseHand:e.bRaiseHand})}}}return Cr(s)}))),epics2:e=>_v(e,7951).pipe(Ro((e=>{!1===e.payload.body.bStarted&&Ga("ADMIT_ALL_SILENT_USERS_END",e.payload.body.bStarted)})),Vr((e=>Qv(e.payload.body.bStarted)))),epics3:e=>_v(e,7946).pipe(co((e=>{var t;return["bRaiseHand","feedback"].includes(null===(t=e.payload.body)||void 0===t?void 0:t.key)&&0===e.payload.body.value})),Vr((e=>(Ga(Mo,{}),"bRaiseHand"===e.payload.body.key?ef():tf()))))},ly=Ev(cy);function py(e){return function(r,o,n){const i=n.value;n.value=function(...r){const o=this[t];if(o){const{meeting:{meetingOptions:t}}=o.getState();if(!0===t[e])return Promise.reject({type:"OPERATION_LOCKED",reason:`${e} is locked`})}return i.apply(this,r)}}}let hy=function(e){return e.Self="Self",e.Other="Other",e.Client="Client",e.Phone="Phone",e.Attendee="Attendee",e}({});function my(e){return function(r,o,n){const i=n.value;n.value=function(r,...o){const n=this[t];if(n){const t=n.getState(),o=Array.isArray(e)?e:[e];let i=Mu(t).find((e=>e.userId===r));if(o.findIndex((e=>e===hy.Attendee))>-1&&(i=wu(t).find((e=>e.userId===r))),!i)return Promise.reject({type:et,reason:"no matching user"});{const{meeting:{userId:e}}=n.getState();for(let t=0;t<o.length;t++){const n=o[t];if(n===hy.Other&&r===e)return Promise.reject({type:Je,reason:"operation is not applicable to self"});if(n===hy.Self&&r!==e)return Promise.reject({type:Je,reason:"operation is only applicable to self "});if(n===hy.Client&&cu(i.userType)||n===hy.Phone&&!cu(i.userType))return Promise.reject({types:Je,reason:"improper target client"})}}}const s=[r,...o];return i.apply(this,s)}}}var gy,Sy=new Uint8Array(16);function vy(){if(!gy&&!(gy="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gy(Sy)}for(var fy=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,yy=[],Ey=0;Ey<256;++Ey)yy.push((Ey+256).toString(16).substr(1));function _y(e,t,r){var o=(e=e||{}).random||(e.rng||vy)();return o[6]=15&o[6]|64,o[8]=63&o[8]|128,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(yy[e[t+0]]+yy[e[t+1]]+yy[e[t+2]]+yy[e[t+3]]+"-"+yy[e[t+4]]+yy[e[t+5]]+"-"+yy[e[t+6]]+yy[e[t+7]]+"-"+yy[e[t+8]]+yy[e[t+9]]+"-"+yy[e[t+10]]+yy[e[t+11]]+yy[e[t+12]]+yy[e[t+13]]+yy[e[t+14]]+yy[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&fy.test(e)}(r))throw TypeError("Stringified UUID is invalid");return r}(o)}let Iy=function(e){return e.LocalStorage="LocalStorage",e.SessionStorage="SessionStorage",e.Memory="Memory",e}({});const Ay=ld("{}");class by{constructor(e){this.sessionStorageKey=void 0,this.localStorageKey=void 0,this.sessionCache=void 0,this.localCache=void 0,this.memoryCache=void 0,this.sessionStorageKey=ld(`zoom-storage-${e}`),this.localStorageKey=ld("zoom-local-storage"),this.memoryCache={};try{this.sessionCache=JSON.parse(pd(sessionStorage.getItem(this.sessionStorageKey)||Ay)),this.localCache=JSON.parse(pd(localStorage.getItem(this.localStorageKey)||Ay))}catch(e){console.error(e),this.sessionCache={},this.localCache={}}}static init(e){this.instance=new by(e)}static get(e){if(void 0===this.instance)throw new Error("read before initial");return this.instance.getValue(e).value}static set(e,t,r){if(void 0===this.instance)throw new Error("set before initial");return this.instance.setValue(e,t,r)}static remove(e){if(void 0===this.instance)throw new Error("remove before initial");return this.instance.removeValue(e)}static clearSession(){if(void 0!==this.instance)return this.instance.memoryCache={},this.instance.sessionCache={},this.instance.localCache={},sessionStorage.removeItem(this.instance.sessionStorageKey);console.warn("clear before initial")}getValue(e){return this.sessionCache.hasOwnProperty(e)?{value:this.sessionCache[e],type:Iy.SessionStorage}:this.localCache.hasOwnProperty(e)?{value:this.localCache[e],type:Iy.LocalStorage}:{value:this.memoryCache[e],type:Iy.Memory}}setValue(e,t,r){if(!e)throw new Error("key is null");switch(r){case Iy.SessionStorage:{const r=this.sessionCache[e];let o=t;return"function"==typeof t&&(o=t(r)),r!==o&&(this.sessionCache[e]=o,this.flushValue(Iy.SessionStorage)),o}case Iy.LocalStorage:{const r=this.localCache[e];let o=t;return"function"==typeof t&&(o=t(r)),r!==o&&(this.localCache[e]=o,this.flushValue(Iy.LocalStorage)),o}case Iy.Memory:{const r=this.memoryCache[e];let o=t;return"function"==typeof t&&(o=t(r)),this.memoryCache[e]=o,o}default:return null}}removeValue(e){const{type:t}=this.getValue(e);switch(t){case Iy.SessionStorage:delete this.sessionCache[e],this.flushValue(Iy.SessionStorage);break;case Iy.LocalStorage:delete this.localCache[e],this.flushValue(Iy.LocalStorage);break;case Iy.Memory:delete this.memoryCache[e]}}flushValue(e){e===Iy.SessionStorage?sessionStorage.setItem(this.sessionStorageKey,ld(JSON.stringify(this.sessionCache))):e===Iy.LocalStorage&&localStorage.setItem(this.localStorageKey,ld(JSON.stringify(this.localCache)))}}by.instance=void 0;let Cy=function(e){return e.WebclientOpt="WEB_CLIENT_OPT",e.WebclientWebinarToken="WEB_CLIENT_WEBINAR_TOKEN",e.WebclientMeetingToken="WEB_CLIENT_MEETING_TOKEN",e.WebclientZtk="WEB_CLIENT_ZTK",e.WebclientZsk="WEB_CLIENT_ZSK",e.WebclientTk="WEB_CLIENT_TK",e.WebclientIVState="WEB_CLIENT_IV_STATE",e.WebclientIsOnHold="WEB_CLIENT_IS_ON_HOLD",e.WebclientParticipantId="WEB_CLIENT_PARTICIPANT_ID",e.WebclientZoomId="WEB_CLIENT_ZOOM_ID",e.WebclientUserName="WEB_CLIENT_USER_NAME",e.WebclientUserEmail="WEB_CLIENT_USER_EMAIL",e.WebclientBreakoutRoomAttendeeStatus="WEB_CLIENT_BO_ATTENDEE_STATUS",e.WebclientBreakoutRoomCommand="WEB_CLIENT_BO_COMMAND",e.WebclientAudioEncryptKey="WEB_CLIENT_AUDIO_ENCRYPT_KEY",e.WebclientVideoEncryptKey="WEB_CLIENT_VIDEO_ENCRYPT_KEY",e.WebclientSharingEncryptKey="WEB_CLIENT_SHARING_ENCRYPT_KEY",e.WebclientFailoverCount="WEB_CLIENT_FAILOVER_COUNT",e.WebclientRecordingToken="WEB_CLIENT_RECORDING_TOKEN",e.VideoSDKWebRTCAudioFallbackWasm="VIDEO_SDK_WEB_RTC_AUDIO_FALLBACK_WASM",e.VideoSDKWebRTCVideoFallbackWasm="VIDEO_SDK_WEB_RTC_VIDEO_FALLBACK_WASM",e.VIDEO_SDK_BROADCAST_STREAMING_CHANNEL_ID="VIDEO_SDK_BROADCAST_STREAMING_CHANNEL_ID",e.WebclientObfToken="WEB_CLIENT_OBF_TOKEN",e.WebclientWhiteboardInfo="WEB_CLIENT_WHITEBOARD_INFO",e}({}),Ty=function(e){return e.WebclientDeviceId="WEBCLIENT_DEVICE_ID",e.VSDKLogTrackingId="ZM_VSDK_LOG_TRACKING_IDS",e}({}),Ry=function(e){return e.DisableAutoReportLogs="DISABLE_AUTO_REPORT_LOGS",e}({});var Oy,Dy;!function(e){e[e.info=0]="info",e[e.debug=1]="debug",e[e.log=2]="log",e[e.warn=3]="warn",e[e.error=4]="error"}(Oy||(Oy={})),function(e){e.afterInit="afterInit",e.beforeLog="beforeLog",e.afterLog="afterLog",e.beforeReport="beforeReport",e.afterReport="afterReport"}(Dy||(Dy={}));class wy{constructor(){}}var Ny,My,Py={exports:{}},Ly={exports:{}},ky=function(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var r=function e(){var r=!1;try{r=this instanceof e}catch{}return r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})})),r}(Object.freeze({__proto__:null,default:{}}));function Uy(){return Ny||(Ny=1,Ly.exports=(e=e||function(e){var t;if("undefined"!=typeof window&&window.crypto&&(t=window.crypto),"undefined"!=typeof self&&self.crypto&&(t=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(t=globalThis.crypto),!t&&"undefined"!=typeof window&&window.msCrypto&&(t=window.msCrypto),!t&&void 0!==pc&&pc.crypto&&(t=pc.crypto),!t)try{t=ky}catch(e){}var r=function(){if(t){if("function"==typeof t.getRandomValues)try{return t.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof t.randomBytes)try{return t.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),n={},i=n.lib={},s=i.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,r=e.words,o=this.sigBytes,n=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<n;i++){var s=r[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=s<<24-(o+i)%4*8}else for(var a=0;a<n;a+=4)t[o+a>>>2]=r[a>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],o=0;o<e;o+=4)t.push(r());return new a.init(t,e)}}),u=n.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o+=2)r[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new a.init(r,t/2)}},c=u.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new a.init(r,t)}},l=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},p=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,o=this._data,n=o.words,i=o.sigBytes,s=this.blockSize,u=i/(4*s),d=(u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0))*s,c=e.min(4*d,i);if(d){for(var l=0;l<d;l+=s)this._doProcessBlock(n,l);r=n.splice(0,d),o.sigBytes-=c}return new a.init(r,c)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=p.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new h.HMAC.init(e,r).finalize(t)}}});var h=n.algo={};return n}(Math),e)),Ly.exports;var e}var Vy,By,Hy=My?Py.exports:(My=1,Py.exports=Uy().enc.Utf8),jy={exports:{}},Fy=(Vy||(Vy=1,jy.exports=(By=Uy(),function(){var e=By,t=e.lib.WordArray;function r(e,r,o){for(var n=[],i=0,s=0;s<r;s++)if(s%4){var a=o[e.charCodeAt(s-1)]<<s%4*2|o[e.charCodeAt(s)]>>>6-s%4*2;n[i>>>2]|=a<<24-i%4*8,i++}return t.create(n,i)}e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,o=this._map;e.clamp();for(var n=[],i=0;i<r;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<r;a++)n.push(o.charAt(s>>>6*(3-a)&63));var u=o.charAt(64);if(u)for(;n.length%4;)n.push(u);return n.join("")},parse:function(e){var t=e.length,o=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var i=0;i<o.length;i++)n[o.charCodeAt(i)]=i}var s=o.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return r(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),By.enc.Base64)),jy.exports);const Wy=e=>{try{return JSON.stringify(e)}catch(e){return"json stringify failed"}};const xy=(e,t=2)=>{let r=`${e}`;for(;r.length<t;)r=`0${r}`;return r},$y=e=>{const t=new Date(e);return`${t.getUTCFullYear()}-${xy(t.getUTCMonth()+1)}-${xy(t.getUTCDate())} ${xy(t.getUTCHours())}:${xy(t.getUTCMinutes())}:${xy(t.getUTCSeconds())}.${xy(t.getUTCMilliseconds(),3)}`},Gy={version:"000001",flag:"0"},zy=(e,t)=>e.reduce(((e,r)=>{const o=((e,t)=>{const{message:r,logLevel:o,tags:n,timestamp:i,id:s}=e,a=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(e,["message","logLevel","tags","timestamp","id"]),u=Object.assign(Object.assign({time:$y(i),logLevel:Oy[o],message:r,tags:n},null!=t?t:{}),a);return Wy(u)})(r,t),n=(e=>{let t=e.length;for(let r=e.length-1;r>=0;r--){const o=e.charCodeAt(r);o>127&&o<=2047?t++:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&r--}return t})(o),i=e[e.length-1];return i.currentSize+n>30720?e.push({messages:[o],ids:[r.id],currentSize:n}):(i.messages.push(o),i.ids.push(r.id),i.currentSize+=n),e}),[{messages:[],ids:[],currentSize:0}]).filter((e=>e.currentSize>0)).map((e=>({messages:e.messages.join("\n"),ids:e.ids,meta:Gy})));function qy(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function Ky(e,t){let r;return(o,n)=>(()=>{if(r)return r;const o=indexedDB.open(e);return o.onupgradeneeded=()=>o.result.createObjectStore(t),r=qy(o),r.then((e=>{e.onclose=()=>r=void 0}),(()=>{})),r})().then((e=>n(e.transaction(t,o).objectStore(t))))}let Jy;function Qy(){return Jy||(Jy=Ky("keyval-store","keyval")),Jy}function Yy(e,t=Qy()){return t("readwrite",(t=>(e.forEach((e=>t.delete(e))),qy(t.transaction))))}function Zy(e=Qy()){return e("readonly",(t=>{if(t.getAll&&t.getAllKeys)return Promise.all([qy(t.getAllKeys()),qy(t.getAll())]).then((([e,t])=>e.map(((e,r)=>[e,t[r]]))));const r=[];return e("readonly",(e=>function(e){return e.openCursor().onsuccess=function(){this.result&&((e=>{r.push([e.key,e.value])})(this.result),this.result.continue())},qy(e.transaction)}(e).then((()=>r))))}))}var Xy=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))};const eE=new class{constructor(){this.queue=[],this.processing=!1}enqueue(e){return new Promise(((t,r)=>{this.queue.push((()=>Xy(this,void 0,void 0,(function*(){try{const r=yield e();t(r)}catch(e){r(e)}})))),this.processing||this.processNext()}))}processNext(){return Xy(this,void 0,void 0,(function*(){if(0===this.queue.length)return void(this.processing=!1);this.processing=!0;const e=this.queue.shift();try{yield e()}catch(e){console.error("Task error:",e)}this.processNext()}))}};var tE=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))};class rE{constructor(e){this.set=(e,t)=>{try{return!this.disableDB&&eE.enqueue((()=>tE(this,void 0,void 0,(function*(){return function(e,t,r=Qy()){return r("readwrite",(r=>(r.put(t,e),qy(r.transaction))))}(e,t,this.store)}))))}catch(e){this.disableDB=!0}},this.makeNextId=()=>(this.nextId+=1,this.nextId),this.addLog=e=>{this.addToMemory(e);const{id:t}=e;return this.set(`${t}`,e)},this.addToMemory=(e,t)=>{this.memoryStoreData=t?[].concat(e):this.memoryStoreData.concat(e)},this.syncFromIDB=()=>tE(this,void 0,void 0,(function*(){var e;const t=yield eE.enqueue((()=>tE(this,void 0,void 0,(function*(){return Zy(this.store)})))),r=t.filter((([e,t])=>!(null==t?void 0:t.id)&&0!==(null==t?void 0:t.id)||!Number.isInteger(Number(e)))).map((e=>e[0])),o=t.filter((([e])=>!r.includes(e))).sort(((e,t)=>{var r,o;return(null===(r=e[1])||void 0===r?void 0:r.id)-(null===(o=t[1])||void 0===o?void 0:o.id)})).map((([,e])=>e));return this.addToMemory(o,!0),r.length>0&&(yield this.deleteLogs(r)),this.nextId=0===this.memoryStoreData.length?0:null===(e=this.memoryStoreData[this.memoryStoreData.length-1])||void 0===e?void 0:e.id,this.memoryStoreData})),this.getStore=()=>this.memoryStoreData,this.filterStore=e=>{let t=[];const r=[e].flatMap((e=>e));return t=!e||0===r.length||r.some((e=>!e))?this.memoryStoreData:this.memoryStoreData.filter((e=>r.some((t=>"string"==typeof t?e.tags.some((e=>t===e)):"function"==typeof t&&t(e))))),t},this.deleteLogs=e=>tE(this,void 0,void 0,(function*(){return this.deleteMemoryLogs(e),eE.enqueue((()=>tE(this,void 0,void 0,(function*(){return Yy(e.map((e=>`${e}`)),this.store)}))))})),this.deleteLogsAfterReport=e=>tE(this,void 0,void 0,(function*(){return this.deleteMemoryLogs(e),Yy(e.map((e=>`${e}`)),this.store)})),this.deleteMemoryLogs=e=>{this.memoryStoreData=this.memoryStoreData.filter((t=>{var r;return!(null===(r=e.includes)||void 0===r?void 0:r.call(e,t.id))}))},this.reset=()=>{this.memoryStoreData=[],eE.enqueue((()=>tE(this,void 0,void 0,(function*(){return function(e=Qy()){return e("readwrite",(e=>(e.clear(),qy(e.transaction))))}(this.store)}))))},this.nextId=0,this.memoryStoreData=[],this.disableDB=!1,eE.enqueue((()=>tE(this,void 0,void 0,(function*(){return Ky(e,e+"-store")})))).then((e=>{this.store=e}))}}function oE(e,t,r){const o=e.plugins;return Array.isArray(o)?o.map((e=>e[t])).reduce(((t,r)=>{const o=null==r?void 0:r(e,t);return null!=o?o:t}),r):r}const nE=e=>new Promise((t=>{if(e.isSendByBeacon)navigator.sendBeacon?(navigator.sendBeacon(e.url,e.data),t({report:e.reportItem})):t({error:"sendBeacon is not supported",report:e.reportItem});else{const r=new XMLHttpRequest;r.open(e.type||"GET",e.url,!0),r.withCredentials=e.withCredentials,r.onerror=r=>{t({error:r,report:e.reportItem})},r.onreadystatechange=function(){if(4===r.readyState){const o=r.status;t(o>=200&&o<300?{report:e.reportItem}:{error:`Request failed, status: ${o}, responseText: ${r.responseText}`,report:e.reportItem})}},Object.entries(e.headers).forEach((([e,t])=>{t&&e&&r.setRequestHeader(e,t)})),r.send(e.data)}}));var iE,sE,aE=function(){if(sE)return iE;sE=1;var e="Expected a function",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,n=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof pc&&pc&&pc.Object===Object&&pc,a="object"==typeof self&&self&&self.Object===Object&&self,u=s||a||Function("return this")(),d=Object.prototype.toString,c=Math.max,l=Math.min,p=function(){return u.Date.now()};function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(h(e)){var s="function"==typeof e.valueOf?e.valueOf():e;e=h(s)?s+"":s}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var a=o.test(e);return a||n.test(e)?i(e.slice(2),a?2:8):r.test(e)?NaN:+e}return iE=function(t,r,o){var n=!0,i=!0;if("function"!=typeof t)throw new TypeError(e);return h(o)&&(n="leading"in o?!!o.leading:n,i="trailing"in o?!!o.trailing:i),function(t,r,o){var n,i,s,a,u,d,g=0,S=!1,v=!1,f=!0;if("function"!=typeof t)throw new TypeError(e);function y(e){var r=n,o=i;return n=i=void 0,g=e,a=t.apply(o,r)}function E(e){var t=e-d;return void 0===d||t>=r||t<0||v&&e-g>=s}function _(){var e=p();if(E(e))return I(e);u=setTimeout(_,function(e){var t=r-(e-d);return v?l(t,s-(e-g)):t}(e))}function I(e){return u=void 0,f&&n?y(e):(n=i=void 0,a)}function A(){var e=p(),t=E(e);if(n=arguments,i=this,d=e,t){if(void 0===u)return function(e){return g=e,u=setTimeout(_,r),S?y(e):a}(d);if(v)return u=setTimeout(_,r),y(d)}return void 0===u&&(u=setTimeout(_,r)),a}return r=m(r)||0,h(o)&&(S=!!o.leading,s=(v="maxWait"in o)?c(m(o.maxWait)||0,r):s,f="trailing"in o?!!o.trailing:f),A.cancel=function(){void 0!==u&&clearTimeout(u),g=0,n=d=i=u=void 0},A.flush=function(){return void 0===u?a:I(p())},A}(t,r,{leading:n,maxWait:r,trailing:i})},iE}(),uE=hc(aE);function dE(){let e=(new Date).getTime(),t=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(r=>{let o=16*Math.random();return e>0?(o=(e+o)%16|0,e=Math.floor(e/16)):(o=(t+o)%16|0,t=Math.floor(t/16)),("x"===r?o:3&o|8).toString(16)}))}const cE=()=>{try{const e=(e=>{try{const t=Hy.parse(e);return Fy.stringify(t)}catch(t){return e}})("laplace-device-id");let t=localStorage.getItem(e);return t||(t=dE(),localStorage.setItem(e,t)),t}catch(e){return null}};var lE=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))};const pE="NOT SET",hE={databaseName:"laplace-default-db"};class mE{constructor(e){this.cacheFilter=[],this.cacheAdditionalContext=pE,this.laplaceSessionId=dE(),this.log=(e,t,r=Oy.log,o={})=>lE(this,void 0,void 0,(function*(){const n=[t,this.publicTags].flatMap((e=>e)),i=((e,t,r,o)=>{const n=Date.now();return Object.assign({message:e,logLevel:r,tags:t,timestamp:n},o)})(e,n,r,Object.assign(Object.assign({laplaceSessionId:this.laplaceSessionId,deviceId:cE()},this.publicAttributes),o)),s=oE(this,Dy.beforeLog,i);return s.id=this.idbManager.makeNextId(),this.idbManager.addLog(s),oE(this,Dy.afterLog,s),s.id})),this.deleteLog=(e,t)=>{if(Array.isArray(t)&&(this.idbManager.deleteLogs(t),!e))return;const r=this.idbManager.filterStore(e).map((e=>e.id));this.idbManager.deleteLogs(r)},this.deleteAll=()=>{this.idbManager.reset()},this.getLogs=e=>this.idbManager.filterStore(e),this.setReportUrl=e=>{this.reportUrl=e},this.setupUnloadListeners=()=>{document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.flushThrottledData()})),window.addEventListener("beforeunload",this.flushThrottledData)},this.flushThrottledData=()=>{if(this.cacheFilter.length>0){const e=this.cacheAdditionalContext!==pE?"string"==typeof this.cacheAdditionalContext?void 0:this.cacheAdditionalContext:void 0;this.reportByFilterImmediately(this.cacheFilter,{additionalContext:e}),this.cacheFilter=[],this.cacheAdditionalContext=pE}},this.throttleReport=uE(((e,t)=>{this.reportByHttps(e,t),this.cacheFilter=[],this.cacheAdditionalContext=pE}),5e3,{leading:!0,trailing:!0}),this.reportByFilter=(e,t)=>{if(null==t?void 0:t.isSendByBeacon)return this.reportByFilterImmediately(e,t);const r=null==t?void 0:t.additionalContext;if(this.cacheAdditionalContext===pE&&(this.cacheAdditionalContext=r),void 0!==r&&this.cacheAdditionalContext&&JSON.stringify(this.cacheAdditionalContext)!==JSON.stringify(r))return this.reportByHttps(e,t);this.cacheFilter=this.cacheFilter.concat(e),this.throttleReport(this.cacheFilter,t)},this.reportByFilterImmediately=(e,t)=>lE(this,void 0,void 0,(function*(){const r=this.idbManager.filterStore(e);if(!r||0===r.length)return;const o=r.map((e=>Object.assign(Object.assign({},e),{tags:[...Array.isArray(e.tags)?e.tags:[],"isSendByBeacon"]}))),n=oE(this,Dy.beforeReport,o),i=zy(n,null==t?void 0:t.additionalContext);return this.commonReport(i,{isSendByBeacon:!0})})),this.reportByHttps=(e,t)=>lE(this,void 0,void 0,(function*(){eE.enqueue((()=>lE(this,void 0,void 0,(function*(){const r=this.idbManager.filterStore(e);if(!r||0===r.length)return;const o=oE(this,Dy.beforeReport,r),n=zy(o,null==t?void 0:t.additionalContext);return this.commonReport(n)}))))})),this.directReport=(e,t)=>lE(this,void 0,void 0,(function*(){var r,o,n,i;const s=null!==(r=t.sampleRate)&&void 0!==r?r:1;if(Math.random()>s)return;let a;return a=t.useRawData?e:Object.assign(Object.assign({message:e,time:$y(Date.now()),tags:[...null!==(o=null==t?void 0:t.tags)&&void 0!==o?o:[],...this.publicTags],logLevel:null!==(n=null==t?void 0:t.logLevel)&&void 0!==n?n:Oy.log,laplaceSessionId:this.laplaceSessionId,deviceId:cE(),isDirectReport:!0},null!==(i=null==t?void 0:t.additionalContext)&&void 0!==i?i:{}),this.publicAttributes),this.commonReport([{messages:a,meta:Gy}],{isSendByBeacon:null==t?void 0:t.isSendByBeacon,deleteLogAfterReport:!1})})),this.commonReport=(e,t)=>lE(this,void 0,void 0,(function*(){if(this.reportUrl)return Promise.all(e.map((e=>({url:this.reportUrl,type:"POST",withCredentials:!1,headers:{},data:Wy({messages:e.messages,meta:e.meta}),reportItem:e,isSendByBeacon:!!(null==t?void 0:t.isSendByBeacon)}))).map(nE)).then((e=>{var r;const o=e.filter((e=>!e.error)).flatMap((e=>e.report.ids));if(oE(this,Dy.afterReport,{removeIds:o}),null===(r=null==t?void 0:t.deleteLogAfterReport)||void 0===r||r)return this.idbManager.deleteLogsAfterReport(o)}))}));const{databaseName:t,reportUrl:r="",plugins:o=[],idbManager:n,publicTags:i=[],publicAttributes:s={}}=e;this.databaseName=t,this.reportUrl=r,this.plugins=o,this.idbManager=n,this.publicTags=i,this.publicAttributes=s,this.setupUnloadListeners(),oE(this,Dy.afterInit)}}mE.init=e=>lE(void 0,void 0,void 0,(function*(){const{databaseName:t="laplace-default-db"}=e,r=new rE(t);return yield r.syncFromIDB(),new mE(Object.assign(Object.assign(Object.assign({},hE),e),{idbManager:r}))}));class gE extends wy{constructor(e){super(),this.config={verbose:!1},this.beforeLog=(e,t)=>{const{verbose:r}=this.config;switch(r&&console.log("beforeLog, ","state: ",t,"meta: ",e),t.logLevel){case Oy.error:console.error(t);break;case Oy.warn:console.warn(t);break;case Oy.log:console.log(t);break;case Oy.debug:console.debug(t);break;case Oy.info:console.info(t)}},this.afterLog=(e,t)=>{const{verbose:r}=this.config;r&&console.log("afterLog, ","state: ",t,"meta: ",t)},this.beforeReport=(e,t)=>{const{verbose:r}=this.config;r&&console.log("beforeReport, ","pluginParams: ",t,"meta: ",e)},this.afterReport=(e,t)=>{const{verbose:r}=this.config;r&&console.log("afterReport, ","pluginParams: ",t,"laplace: ",e)},e&&(this.config=e)}}class SE extends wy{constructor(e){super(),this.config={debug:!1},this.debugLog=e=>{const{debug:t}=this.config;t&&console.log(`[AutoCleanLogPlugin]: ${e}`)},this.afterInit=e=>{const{expireBefore:t}=this.config;if(!t)return void this.debugLog("early return on beforeInit because expireBefore is falsy");const r=e.idbManager.getStore(),o=("function"==typeof t?r.filter(t):r.filter((e=>e.timestamp<t))).map((e=>e.id));e.deleteLog(void 0,o),this.debugLog(`afterInit, clean log id: ${o}`)},e&&(this.config=e)}}const vE=["RESOURCE_ERROR","JS_ERROR","UNHANDLED_PROMISE_REJECTION"];class fE extends wy{constructor(e){super(),this.config={debug:!1,publicTags:[]},this.errorCount=0,this.hashErrors={},this.addPublicTags=e=>{var t;return null===(t=this.config.publicTags)||void 0===t?void 0:t.concat(e).filter((e=>e))},this.debugLog=e=>{const{debug:t}=this.config;t&&console.log("[AutoLogErrorPlugin]:",e)},this.ignore=e=>{var t,r,o,n,i;return void 0!==(null===(t=this.config)||void 0===t?void 0:t.maxErrorCount)&&this.errorCount>=(null===(r=this.config)||void 0===r?void 0:r.maxErrorCount)||!!(null===(o=this.config)||void 0===o?void 0:o.ignoredErrorMsgKeywords)&&e&&(null===(i=null===(n=this.config)||void 0===n?void 0:n.ignoredErrorMsgKeywords)||void 0===i?void 0:i.some((t=>null==e?void 0:e.includes(t))))},this.report=uE((e=>{}),600,{trailing:!0,leading:!1}),this.afterInit=e=>{if(!self.addEventListener)return;const t=(t,r,o,n)=>{this.debugLog(o),this.errorCount+=1;try{return function(e){const t=(new TextEncoder).encode(e);return crypto.subtle.digest("SHA-1",t).then((e=>Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("")))}(t).then((o=>this.hashErrors[o]?"dismissed":(this.hashErrors[o]=!0,e.log(t,this.addPublicTags([].concat(r)),null!=n?n:Oy.error,{extraProperties:{messageHash:o}}).then((()=>e.reportByFilter(vE)))))).catch(console.error)}catch(e){return console.error(e),Promise.resolve(e)}};try{self.addEventListener("error",(e=>{var r,o,n,i,s,a,u;if(!this.ignore(null==e?void 0:e.message)){if("function"==typeof this.config.onError){const{message:r,tags:o,logLevel:n}=this.config.onError(e);return t(r,["JS_ERROR",...o],e,n)}if((null==e?void 0:e.target)&&((null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.src)||(null===(o=null==e?void 0:e.target)||void 0===o?void 0:o.href))){const r=`Load Resource Error in ${null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.tagName} element: ${(null===(i=null==e?void 0:e.target)||void 0===i?void 0:i.src)||(null===(s=null==e?void 0:e.target)||void 0===s?void 0:s.href)}`;return t(r,"RESOURCE_ERROR",e)}{const r=`Javascript Runtime Error in ${null==e?void 0:e.filename} (${null==e?void 0:e.lineno}:${null==e?void 0:e.colno}): ${null==e?void 0:e.message}\nStack: ${null!==(u=null===(a=null==e?void 0:e.error)||void 0===a?void 0:a.stack)&&void 0!==u?u:null==e?void 0:e.stack}`;return t(r,"JS_ERROR",e)}}})),self.addEventListener("unhandledrejection",(e=>{var r;if(!this.ignore(null===(r=null==e?void 0:e.reason)||void 0===r?void 0:r.message)){if("function"==typeof this.config.onError){const{message:r,tags:o,logLevel:n}=this.config.onError(e);return t(r,["UNHANDLED_PROMISE_REJECTION",...o],e,n)}{let r;const o=null==e?void 0:e.reason;return r="string"==typeof o?`Promise Error: ${o}`:o instanceof Error?`Promise Error: ${o.message} ${o.name} ${o.stack}`:"object"==typeof o?`Promise Error with reason: ${Wy(o)}`:`Promise Error with unrecognized reason: ${o}`,t(r,"UNHANDLED_PROMISE_REJECTION",e)}}}))}catch(e){console.error(e)}this.debugLog("afterInit, add listener")},e&&(this.config=e),this.config.publicTags=[].concat(null==e?void 0:e.publicTags)}}let yE=function(e){return e[e.info=0]="info",e[e.debug=1]="debug",e[e.log=2]="log",e[e.warn=3]="warn",e[e.error=4]="error",e}({}),EE=function(e){return e.DeviceAudioStreamCaptured="device audio stream captured",e.AudioJoinComplete="audio join complete",e.AudioLeaveComplete="audio leave complete",e.SharingAudioStartComplete="sharing audio start complete",e.SharingAudioStopComplete="sharing audio stop complete",e.AudioBridgeReconnectStart="audio bridge reconnect start",e.AudioBridgeReconnectEnd="audio bridge reconnect end",e}({}),_E=function(e){return e.VBSettingSuccess="video VB setting success",e.VBSettingFailed="init video VB failed",e.VBPreloadSuccess="preload video VB success",e.VBPreloading3S="preload video VB 3s",e.VBPreloading10S="preload video VB 10s",e.StartCaptureVideoSuccess="start capture video success",e.StopCaptureVideoSuccess="stop capture video success",e}({});function IE(e){return`{E}${e}{/E}`}const AE={enable:!1,enableReport:!1,gatewayEndPoint:"",newGatewayEndPoint:"",logLevel:{debug:!1,log:!1,info:!1,print:!1,warn:!1,error:!1},performanceReportRatio:.25,trackingCount:7},bE=["debug","log","info","print","warn","error"],CE=(e,t)=>[...e,...t].filter((e=>!!e)),TE=["JOIN_MEETING_FAILED","Join Meeting Flow","UNAVAILABLE_RWG","connection_info_map","exception flow"];class RE{static getInstance(){return this.agentInstance||(this.agentInstance=new RE),this.agentInstance}constructor(){this.laplace=void 0,this.trackingId=void 0,this.logConfig=void 0,this.reportUrl=void 0,this.publicTags=void 0,this.accountId=void 0,this.disableAutoReport=void 0,this.initConfig=async e=>{let t=AE;try{e.logConfig&&(t=JSON.parse(e.logConfig),t.gatewayEndPoint&&(this.reportUrl=t.gatewayEndPoint),t.newGatewayEndPoint&&(this.reportUrl=t.newGatewayEndPoint));const{enable:r,enableReport:o,reportUrl:n,logLevel:i,trackingId:s,accountId:a}=e;if(void 0!==r&&(t={...t,enable:!!r}),void 0!==o&&(t={...t,enableReport:!!o}),n&&(this.reportUrl=n),"string"==typeof i){const e=bE.indexOf(i),r=bE.reduce(((t,r,o)=>o<e?{...t,[`${r}`]:!1}:{...t,[`${r}`]:!0}),{});t={...t,logLevel:r}}else void 0!==i&&(t={...t,logLevel:i});s&&(this.trackingId=s,t={...t,enable:!0,enableReport:!0}),void 0!==a&&(this.accountId=a)}catch(e){console.error("parse log config error",e)}const r=(new Date).getTime()-6048e5;this.publicTags=["VideoSDK",this.trackingId],e.isUIToolkit&&this.publicTags.push("UI-Toolkit");const o=[e.debugMode&&new gE({verbose:!1}),new SE({debug:!1,cleanAfterReport:!0,expireBefore:r}),new fE({debug:!1,ignoredErrorMsgKeywords:["table index is out of bounds"],maxErrorCount:223,publicTags:this.accountId?[...this.publicTags,IE(this.accountId)]:this.publicTags})].filter(Boolean);return{laplaceConfig:{databaseName:"ZM-VSDK-LOG-DATABASE",reportUrl:this.reportUrl,plugins:o,publicTags:this.publicTags},logConfig:t}},this.handleInitLaplaceSuccess=(e,t)=>{var r;this.laplace=e;const o=by.get(Ty.VSDKLogTrackingId);let n=[];try{n=JSON.parse(o?window.atob(o):"[]")}catch(e){}n.length>=(null!==(r=null==t?void 0:t.trackingCount)&&void 0!==r?r:7)&&n.shift();const i=n.reduce(((e,t)=>({...e,[`${t}`]:!0})),{});e.deleteLog((e=>{var t;return!(null!==(t=e.tags)&&void 0!==t&&t.some((e=>i[e])))})),n.push(this.trackingId),by.set(Ty.VSDKLogTrackingId,window.btoa(JSON.stringify(n)),Iy.LocalStorage)},this.init=async e=>{const{laplaceConfig:t,logConfig:r}=await this.initConfig(e);return r.enable?(this.logConfig=r,mE.init(t).then((e=>{this.handleInitLaplaceSuccess(e,r)})).catch((e=>{throw{type:Qe,reason:"Logger init failed.",error:e,errorCode:Na.INTERNAL_ERROR}}))):Promise.reject({type:Je,reason:"Logger feature is not enabled."})},this.check=e=>{var t;return!(!this.checkLaplace()||(null===(t=this.logConfig)||void 0===t||null===(t=t.logLevel)||void 0===t||!t[e])&&(console.warn(`Logger ${e} is not enabled.`),1))},this.log=(e,t,r)=>{if(this.check("log"))try{var o;return null===(o=this.laplace.log(e,CE(t,r),yE.log))||void 0===o?void 0:o.catch((()=>{}))}catch(e){return}},this.logWithExtraProperties=(e,t,r)=>{if(this.check("log"))try{var o;return null===(o=this.laplace.log(e,t,yE.log,r))||void 0===o?void 0:o.catch((()=>{}))}catch(e){return}},this.warn=(e,t,r)=>{if(this.check("warn"))try{var o;return null===(o=this.laplace.log(e,CE(t,r),yE.warn))||void 0===o?void 0:o.catch((()=>{}))}catch(e){return}},this.info=(e,t,r)=>{if(this.check("info"))try{var o;return null===(o=this.laplace.log(e,CE(t,r),yE.info))||void 0===o?void 0:o.catch((()=>{}))}catch(e){return}},this.debug=(e,t,r)=>{if(this.check("debug"))try{var o;return null===(o=this.laplace.log(e,CE(t,r),yE.debug))||void 0===o?void 0:o.catch((()=>{}))}catch(e){return}},this.error=(e,t,r)=>{if(this.check("error"))try{var o;return null===(o=this.laplace.log(e,CE(t,r),yE.error))||void 0===o?void 0:o.catch((()=>{}))}catch(e){return}},this.checkLaplace=()=>{var e;return!(null===(e=this.laplace)||void 0===e||!e.log)},this.makeLogger=e=>({log:(t,r)=>this.log(t,e,null!=r?r:[]),logWithExtraProperties:(t,r)=>this.logWithExtraProperties(t,e,r),warn:(t,r)=>this.warn(t,e,null!=r?r:[]),info:(t,r)=>this.info(t,e,null!=r?r:[]),debug:(t,r)=>this.debug(t,e,null!=r?r:[]),error:(t,r)=>this.error(t,e,null!=r?r:[]),directReport:(e,t)=>{const r="string"!=typeof e?JSON.stringify(e):e,o=(Array.isArray(t)?t:[t]).filter(Boolean);o.push("MEDIA SDK Direct"),this.report(r,o,"info")}}),this.reportToGlobalTracing=async(e,t=!1,r=!1)=>{var o;if(!this.checkLaplace())return Promise.reject({type:Je,reason:"Logger has not been enabled or initialized."});if(null===(o=this.logConfig)||void 0===o||!o.enableReport||!this.reportUrl)return Promise.reject({type:Je,reason:"Please use getLogs to obtain log data and report by yourself."});if(function(){try{return!!by.get(Ry.DisableAutoReportLogs)}catch(e){return!1}}()&&!t){const t=Array.isArray(e)?e.some((e=>TE.some((t=>"string"==typeof e&&e.includes(t))))):TE.some((t=>`${e}`.includes(t)));if(!t)return Promise.resolve()}return this.laplace.reportByFilter.bind(this.laplace)(e,{isSendByBeacon:r,additionalContext:{trackingId:this.trackingId}})},this.report=(e,t,r="warn")=>{if(this.checkLaplace()&&this.logConfig.enableReport&&this.reportUrl){var o,n;const i=Array.isArray(t)?t:[t],s=this.accountId?[...i,IE(this.accountId)]:i;null===(o=(n=this.makeLogger(s))[`${r}`])||void 0===o||null===(o=o.call(n,e))||void 0===o||o.then((()=>{this.reportToGlobalTracing(i)}))}},this.getLogs=(e,t)=>{if(!this.checkLaplace())return console.warn("Logger has not been enabled or initialized."),[];const r=e.getState(),{meeting:{meetingNumber:o,userId:n,userEmail:i,userName:s}}=r,a={meetingNumber:o,userId:n,userEmail:i,userName:s},u=this.laplace.getLogs(t),d=[];for(const e of u)d.push({...e,...a});return d},this.trackingId=_y()}}RE.agentInstance=void 0;const OE=RE.getInstance(),DE=[{type:"MediaMeta",methods:["sendUserNodeList","updateUserMediaSN","updateMediaParams","subscribeToQos","unsubscribeFromQos","sendUserAudioStatus","destroy","createMainSessionChannel","notifySDKMeetingReady"]},{type:"Audio",methods:["joinComputerAudio","leaveComputerAudio","joinSharingAudio","leaveSharingAudio","changeSpeaker","changeMicrophone","enableAudioEncode","pauseOrResumeAudio","setSharingAudioVolume","enableShareAudioToBreakoutRoom","enableAudioDenoise","enableSyncButtonsOnHeadset","stopAllIncomingAudio","setAudioCodecMode","muteOrUnmuteOtherAudio","adjustOtherAudioVolume","changeAudioProfile","unmuteAudio","muteAudio"]},{type:"Video",methods:["startCaptureVideo","stopCaptureVideo","renderVideo","stopRenderVideo","changeCamera","updateRenderedVideoCanvasDimension","adjustRenderedVideoPosition","mirrorVideo","enableHardwareAccelerationForVideoDecode","enableHardwareAccelerationForVideoEncode","startVirtualBackgroundSetting","updateVirtualBackgroundImage","stopVirtualBackgroundSetting","startMaskSetting","updateMaskBackgroundImage","updateMaskClip","stopMaskSetting","enableVideoObserver","prefetchVideoSsrc","cancelPrefetchVideoSsrc","setMobileRotateMode","changeActiveVideoSsrc","updateVideoHDValue","updateVideoFullhdValue","clearVideoCanvas"]},{type:"Sharing",methods:["stopDesktopSharing","startDesktopSharing","pauseDesktopSharing","resumeDesktopSharing","renderSharing","stopRenderSharing","switchSharingSource","ajustmentReceivedSharingCanvas","changeSharingSecondCamera","updateRenderedSharingDimension","addReceivedSharingChannelType","removeReceivedSharingChannelType","switchSharingMode","ajustmentSharingCanvas"]},{type:"RemoteControl",methods:["startRemoteControl","stopRemoteControl","resendRemoteControlPositionPDU","updateRemoteControlProperties","ajustmentReceivedSharingCanvas","startRemoteControlQRCheck"]},{type:"LiveTranscription",methods:["selectLanguageChannelForNewLTT"]},{type:"RemoteCamera",methods:["movePTZCamera"]}].reduce(((e,t)=>{const{type:r,methods:o}=t;return[...e,...o.map((e=>({name:e,type:r})))]}),[]),wE=DE.map((e=>e.name)),NE=(e,...t)=>{const r=DE.find((t=>t.name===e));if(r){const{type:o}=r,n=null==t?void 0:t.map((e=>Dd(e)));OE.makeLogger([o,`${o} Media SDK`]).info(`${e},params:${JSON.stringify(n)}`)}};function ME(e){return new Proxy(e,{get:(e,t)=>"string"==typeof t&&wE.includes(t)?function(...r){try{Reflect.apply(NE,void 0,[t,...r])}catch(e){}return Reflect.apply(Reflect.get(e,t),e,r)}:Reflect.get(e,t)})}function PE(e){return e?new Proxy(e,{get:(e,t)=>"string"==typeof t&&"error"===t?function(...e){try{var t;OE.report(e[0],["MEDIA SDK",...null!==(t=e[1])&&void 0!==t?t:[]],"error")}catch(e){}}:Reflect.get(e,t)}):e}const LE=RE.getInstance();function kE(e,t){return e.toLowerCase().includes("url")&&t.startsWith("http")||"displayName"===e?`[${e.toUpperCase()}]`:t}function UE(e,r){return function(o,n,i){const s=i.value;i.value=function(...o){let i="";if("Video"===e){var a;const e=this[t];i=`${null==e||null===(a=e.getState())||void 0===a||null===(a=a.meeting)||void 0===a?void 0:a.isUseWBVideo}`}if(LE.checkLaplace())try{var u;const t=LE.makeLogger([e]),a=null===(u=r?o.map(((e,t)=>r.includes(t+1)?IE(e):e)):o)||void 0===u?void 0:u.map((e=>Dd(e)));return t.info(`${n},params:${JSON.stringify(a,kE)}`),s.apply(this,o).then((e=>(t.info(`${n} success`),e))).catch((t=>{const r=`${n},params:${JSON.stringify(a,kE)},return failed,${i?`isUseWBVideo:${i},`:""}${function(e){if(!e)return"";if("object"==typeof e){let t="";return e.type&&(t+=`type:${e.type},`),e.errorCode&&(t+=`errorCode:${e.errorCode},`),e.reason&&(t+=`reason:${e.reason},`),e.subCode&&(t+=`subCode:${e.subCode},`),e.name&&(t+=`name:${e.name},`),e.message&&(t+=`message:${e.message},`),t}return`${e}`}(t)}`;return LE.report(r,`${e} exception flow`,"error"),Promise.reject(t)}))}catch(e){}return s.apply(this,o)}}}function VE(e,t,r){return function(o,n,i){const s=i.value;i.value=function(...o){var n,i;const a=o[t];let u=e;return Array.isArray(u)||(u=[u]),!u.some((e=>d(a,e)))||r&&!r.every((e=>!!a[e]))?Promise.reject({type:et,reason:`Expected to accept ${null===(n=u)||void 0===n?void 0:n.map((e=>e.name)).join(" or ")}, but actual it is ${"object"==typeof a&&null!==a?null===(i=Object.getPrototypeOf(a))||void 0===i?void 0:i.constructor.name:a}`,errorCode:Na.STREAM_MISMATCH_RENDER_ELEMENT}):s.apply(this,o)}}}let BE=function(e){return e[e.Unknown=0]="Unknown",e[e.Windows=1]="Windows",e[e.Mac=2]="Mac",e[e.Pad=3]="Pad",e[e.Mobile=4]="Mobile",e[e.CallIn=5]="CallIn",e[e.Linux=6]="Linux",e[e.WebClient=7]="WebClient",e[e.ChromeOs=8]="ChromeOs",e}({});const HE=262144,jE=1048576,FE=16777216,WE=e=>!(4&~e),xE=e=>(e&jE)===jE,$E=({share:{isReceiveSharing:e}})=>e,GE=({share:{activeNodeId:e}})=>e,zE=({share:{shareViewAttachments:e}})=>e,qE=ru([Mu,$E,GE],((e=[],t,r)=>{if(t){const t=e.find((e=>e.userId===r&&!0===e.sharerOn));if(t){let{os:e}=t;const{pwaOS:r}=t;return"mac"===r?e=BE.Mac:"win"===r&&(e=BE.Windows),{...t,os:e}}}return null})),KE=ru([Mu],(e=>e.filter((e=>e.sharerOn)))),JE=ru([KE],(e=>e.some((e=>!!e.bVideoShare)))),QE=ru([({share:{remoteControlledUserList:e}})=>e,$E,GE],((e,t,r)=>!!t&&e.some((e=>Ed(e,r))))),YE=ru([$E,zE],((e,t)=>e?Object.entries(t).reduce(((e,t)=>{const[,r]=t;return r&&r.length>0&&(e+=r.length),e}),0):0)),ZE=ru([YE],(e=>e>1)),XE=ru([YE,zE],((e,t)=>1===e&&Object.entries(t).every((([,e])=>e.every((e=>sc(e).isDummy))))));function e_(e){return function(r,o,n){const i=n.value;n.value=async function(...r){const o=this[t],n=null==o?void 0:o.getState();if(null!=n&&n.share){const{share:{isSimultaneousShareView:t,isReceiveSharing:r}}=n;if(r){if(t)return Promise.reject({type:Je,reason:`Cannot start ${e} due to multiple sharing views are currently in progress.`,errorCode:Na.SCREEN_SHARE_MISMATCH_STATE});if(ZE(n))return Promise.reject({type:Je,reason:`Cannot start ${e} due to multiple sharing views are currently in progress.`,errorCode:Na.SCREEN_SHARE_MISMATCH_STATE})}}return i.apply(this,r)}}}let t_=function(e){return e[e.NoAttendee=0]="NoAttendee",e[e.All=1]="All",e[e.AllPanelist=2]="AllPanelist",e[e.Host=3]="Host",e[e.NoOne=4]="NoOne",e[e.EveryonePublicly=5]="EveryonePublicly",e}({}),r_=function(e){return e[e.AllPanelist=1]="AllPanelist",e[e.Everyone=2]="Everyone",e[e.Invalid=0]="Invalid",e}({}),o_=function(e){return e[e.All=0]="All",e[e.Panelist=1]="Panelist",e[e.IndividualCcPanelist=2]="IndividualCcPanelist",e[e.Individual=3]="Individual",e[e.SilentModeUsers=4]="SilentModeUsers",e}({}),n_=function(e){return e[e.None=0]="None",e[e.Delete=1]="Delete",e[e.Modify=2]="Modify",e}({}),i_=function(e){return e[e.Success=0]="Success",e[e.Delete=1]="Delete",e[e.Block=3]="Block",e}({});const s_=[t_.All,t_.Host,t_.NoOne,t_.EveryonePublicly],a_=[t_.NoOne,t_.All,t_.AllPanelist],u_={AllPanelist:11,Everyone:12},d_={[u_.AllPanelist]:r_.AllPanelist,[u_.Everyone]:r_.Everyone},c_={userId:o_.All,displayName:"Everyone",isHost:!1,isCoHost:!1},l_={userId:o_.Panelist,displayName:"All panelists"},p_={userId:o_.SilentModeUsers,displayName:"Everyone (in Waiting Room)",isHost:!1,isCoHost:!1};let h_=function(e){return e[e.Local=0]="Local",e[e.ThirdParty=1]="ThirdParty",e}({}),m_=function(e){return e[e.ChunkSize=20971520]="ChunkSize",e[e.EncodeBlockSize=32768]="EncodeBlockSize",e[e.DecodeBlockSize=32803]="DecodeBlockSize",e[e.MaxSize=2147483648]="MaxSize",e[e.ReaderChunkSize=1073741824]="ReaderChunkSize",e}({}),g_=function(e){return e[e.Init=0]="Init",e[e.InProgress=1]="InProgress",e[e.Success=2]="Success",e[e.Fail=3]="Fail",e[e.Cancel=4]="Cancel",e[e.Complete=5]="Complete",e}({}),S_=function(e){return e[e.InProgress=1]="InProgress",e[e.Success=2]="Success",e[e.Fail=3]="Fail",e[e.Cancel=4]="Cancel",e}({});const v_={"7z":"application/x-7z-compressed",avi:"video/x-msvideo",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",gif:"image/gif",gz:"application/gzip",html:"text/html",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",mid:"audio/midi",mov:"video/*",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/*",mpg:"video/*",pdf:"application/pdf",png:"image/png",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",txt:"text/plain",wav:"audio/wav",webp:"image/webp",wma:"audio/*",wmv:"video/*",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",zip:"application/zip"};let f_=function(e){return e.Open="open",e.Message="message",e.Error="error",e.Close="close",e.Inactive="inactive",e}({});var y_=function(e){return e[e.SelectTranslationLanguage=1]="SelectTranslationLanguage",e[e.ShowTranscription=2]="ShowTranscription",e[e.OffTranslation=3]="OffTranslation",e[e.DisableCaption=4]="DisableCaption",e[e.LockTranscriptionLanguage=5]="LockTranscriptionLanguage",e[e.SelectTranscriptionLanguage=6]="SelectTranscriptionLanguage",e[e.SelectSimuliveLanguage=7]="SelectSimuliveLanguage",e}(y_||{});class E_{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.intervalsToBeCleardWhenSocketClose=[],this.isAlive=!1,this.isRlbTP=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1,this.isRlbTP=!1}on(e,t){let r=this.eventHandlers.get(e);r||(r=[]),r.push(t),this.eventHandlers.set(e,r)}off(e,t){const r=this.eventHandlers.get(e);if(r){const o=r.filter((e=>e!==t));this.eventHandlers.set(e,o)}}emit(e,t){const r=this.eventHandlers.get(e);r&&r instanceof Array&&r.slice(0).forEach((e=>{try{e(t)}catch(e){console.error(e)}}))}sendMessageToRwg(e){this.seq+=1;const t=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(e,{seq:t}))),t}connect(e,t){this.websocket=t?new window.ZoomTPModule.ZoomTPWebSocket(e):new WebSocket(e),this.websocket.binaryType="arraybuffer",this.isRlbTP=t,this.addWebSocketEventListeners()}close(){var e;null===(e=this.websocket)||void 0===e||e.close()}addHeartBeat(){const e=T.isAndroidOrIOSBrowser?15e3:2e4,t=setInterval((()=>{this.isAlive||this.emit(f_.Inactive,{}),this.sendMessageToRwg({evt:0}),this.isAlive=!1}),e);this.intervalsToBeCleardWhenSocketClose.push(t)}clearIntervals(){this.intervalsToBeCleardWhenSocketClose.forEach((e=>clearInterval(e))),this.isAlive=!1}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",(e=>{this.isRlbTP||this.addHeartBeat(),this.emit(f_.Open,e)})),this.websocket.addEventListener("message",(e=>{this.isAlive=!0,this.emit(f_.Message,e)})),this.websocket.addEventListener("close",(e=>{this.clearIntervals(),this.emit(f_.Close,e)})),this.websocket.addEventListener("error",(e=>{this.clearIntervals(),this.emit(f_.Error,e)})))}sendLaunchParams(e){return{seq:this.sendMessageToRwg({evt:4301,body:e})}}joinMeeting(e){return{seq:this.sendMessageToRwg({evt:4097,body:{meetingtoken:e}})}}lockMeeting(e){return{seq:this.sendMessageToRwg({evt:4099,body:{bLock:e}})}}endMeeting(){return{seq:this.sendMessageToRwg({evt:4101,body:{}})}}leaveMeeting(e=!1){const t=e?4364:4103;return{seq:this.sendMessageToRwg({evt:t,body:{}})}}recordMeeting(e,t){return{seq:this.sendMessageToRwg({evt:4105,body:{bRecord:e,bPause:t}})}}localRecordingGrantPermission(e,t,r){return{seq:this.sendMessageToRwg({evt:Lv,body:{cmdType:"permission_request_answer",userId:e,agreed:t,saveAgreed:r}})}}hostGrantPermission(e,t){return{seq:this.sendMessageToRwg({evt:Lv,body:{cmdType:"grant_permission",userId:e,grant:t}})}}localRecordingRequestPermission(){return{seq:this.sendMessageToRwg({evt:Lv,body:{cmdType:"request_permission"}})}}localRecordingMeeting(e){return{seq:this.sendMessageToRwg({evt:Lv,body:{cmdType:"change_recording_status",status:e}})}}summaryMeeting(e){return{seq:this.sendMessageToRwg({evt:8009,body:{type:e?"start":"stop"}})}}startMeetingQuery(e){return{seq:this.sendMessageToRwg({evt:8017,body:{type:e?"start":"stop"}})}}allowSelfRecord(e){return{seq:this.sendMessageToRwg({evt:4325,body:{bAllowISORecord:e}})}}enableZoomIQRecord(e){return{seq:this.sendMessageToRwg({evt:4318,body:{check:e}})}}expel(e){return{seq:this.sendMessageToRwg({evt:4107,body:{id:e}})}}expelAttendee(e,t){return{seq:this.sendMessageToRwg({evt:4205,body:{jid:e,nodeID:t}})}}rename(e,t,r){return{seq:this.sendMessageToRwg({evt:4109,body:{id:e,dn2:t,olddn2:r}})}}assignHost(e,t){return{seq:this.sendMessageToRwg({evt:4111,body:{id:e,bCoHost:t}})}}reclaimHost(e,t=!1){return{seq:this.sendMessageToRwg({evt:4133,body:{id:e,bCoHost:t}})}}revokeCoHost(e){return{seq:this.sendMessageToRwg({evt:4195,body:{id:e}})}}putOnHold(e,t){return{seq:this.sendMessageToRwg({evt:4113,body:{id:e,bHold:t}})}}setMuteOnEntry(e){return{seq:this.sendMessageToRwg({evt:4115,body:{bOn:e}})}}setHoldOnEntry(e){return{seq:this.sendMessageToRwg({evt:4117,body:{bOn:e}})}}inviteCRCDevice(e,t,r=2){return{seq:this.sendMessageToRwg({evt:4119,body:{ip:e,type:t,encrypt:r}})}}cancelInviteCRCDevice(e){return{seq:this.sendMessageToRwg({evt:4121,body:{transID:e}})}}sendCloseCaption(e){return{seq:this.sendMessageToRwg({evt:4125,body:{...e}})}}allowViewParticipantNumber(e){return{seq:this.sendMessageToRwg({evt:4127,body:{bOn:e}})}}lowerAllHands(){return{seq:this.sendMessageToRwg({evt:4129,body:{}})}}raiseLowerHand(e,t){return{seq:this.sendMessageToRwg({evt:4131,body:{id:e,bOn:t}})}}chat(e,t,r,o,n,i){const s={text:e,destNodeID:t};return r&&Object.assign(s,{sn:r}),o&&Object.assign(s,{attendeeNodeID:o}),n&&Object.assign(s,{xmppMsgData:n}),i&&Object.assign(s,{msgID:i}),{seq:this.sendMessageToRwg({evt:4135,body:s})}}assignCC(e,t){return{seq:this.sendMessageToRwg({evt:4137,body:{id:e,bCCEditor:t}})}}enableLT(e){return{seq:this.sendMessageToRwg({evt:4227,body:{op:e?2:4}})}}enableNewLLT(){return{seq:this.sendMessageToRwg({evt:4285})}}disableCaptions(e){return{seq:this.sendMessageToRwg({evt:Pv,body:{type:y_.DisableCaption,disableNewLtt:e}})}}enableManualCaption(e){return{seq:this.sendMessageToRwg({evt:4291,body:{op:e?1:0}})}}setTranslationLanguage(e){return void 0!==e?{seq:this.sendMessageToRwg({evt:Pv,body:{type:y_.SelectTranslationLanguage,lang:e}})}:{seq:this.sendMessageToRwg({evt:Pv,body:{type:y_.OffTranslation}})}}setTranscriptionLanguage(e,t){return{seq:this.sendMessageToRwg({evt:Pv,body:{type:y_.SelectTranscriptionLanguage,lang:e,nodeid:null!=t?t:0}})}}lockTranscriptionLanguage(e){return{seq:this.sendMessageToRwg({evt:Pv,body:{type:y_.LockTranscriptionLanguage,lock:e}})}}setSimuliveLanguage(e){return{seq:this.sendMessageToRwg({evt:Pv,body:{type:y_.SelectSimuliveLanguage,lang:e}})}}setSpokenLanguage(e){return{seq:this.sendMessageToRwg({evt:4287,body:{lang:e}})}}allowAskLT(e){return{seq:this.sendMessageToRwg({evt:4263,body:{bAnonymous:e}})}}approveLT(){return{seq:this.sendMessageToRwg({evt:4262,body:{bApproved:!0}})}}askLT(e){return{seq:this.sendMessageToRwg({evt:4261,body:{bAnonymous:e}})}}setChatPriviledge(e){return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:e}})}}setPanelistChatPrivilege(e){if(!Object.values(u_).includes(e))throw Error("Invalid panelist chat privilege req value");return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:e}})}}sendFeedback(e){return{seq:this.sendMessageToRwg({evt:4143,body:{feedback:e}})}}clearFeedback(){return{seq:this.sendMessageToRwg({evt:4145,body:{}})}}allowUnmuteVideo(e){return{seq:this.sendMessageToRwg({evt:4147,body:{bOn:e}})}}allowUnmuteAudio(e){return{seq:this.sendMessageToRwg({evt:4149,body:{bOn:e}})}}allowRaiseHand(e){return{seq:this.sendMessageToRwg({evt:4151,body:{bOn:e}})}}boToken(e){return{seq:this.sendMessageToRwg({evt:4173,body:{topic:e}})}}startBO(e){return{seq:this.sendMessageToRwg({evt:4175,body:{proto:e}})}}stopBO(e){return{seq:this.sendMessageToRwg({evt:4177,body:{status:e}})}}assignToBO(e,t){return{seq:this.sendMessageToRwg({evt:4179,body:{targetID:e,targetBID:t}})}}switchBO(e,t){return{seq:this.sendMessageToRwg({evt:4181,body:{targetID:e,targetBID:t}})}}wantJoinBO(e,t){return{seq:this.sendMessageToRwg({evt:4183,body:{targetID:e,targetBID:t}})}}joinBO(e){return{seq:this.sendMessageToRwg({evt:4193,body:{targetBID:e}})}}leaveBO(e=1){return{seq:this.sendMessageToRwg({evt:4185,body:{reason:e}})}}broadcastBO(e){return{seq:this.sendMessageToRwg({evt:4187,body:{textContent:e}})}}askForHelpBO(e){return{seq:this.sendMessageToRwg({evt:4189,body:{targetID:e}})}}askForHelpResultBO(e,t){return{seq:this.sendMessageToRwg({evt:4191,body:{targetID:e,helpResult:t}})}}coHostStartBO(e,t){return{seq:this.sendMessageToRwg({evt:4241,body:{proto:e,targetID:t}})}}coHostStopBO(e,t){return{seq:this.sendMessageToRwg({evt:4243,body:{status:e,targetID:t}})}}coHostAssignToBO(e,t,r){return{seq:this.sendMessageToRwg({evt:4245,body:{userGUID:e,targetID:r,targetBID:t}})}}moveToMainSession(e){return{seq:this.sendMessageToRwg({evt:4247,body:{userGUID:e}})}}coHostMoveToMainSession(e,t){return{seq:this.sendMessageToRwg({evt:4249,body:{userGUID:e,targetID:t}})}}allowParticipantRename(e){return{seq:this.sendMessageToRwg({evt:4163,body:{bOn:e}})}}allowMessageFeedbackNotify(e,t){return{seq:this.sendMessageToRwg({evt:4171,body:{bOn:e,id:t}})}}setPlayChime(e,t){return{seq:this.sendMessageToRwg({evt:4197,body:{bOn:e,id:t}})}}admitAllSilentUsers(){return{seq:this.sendMessageToRwg({evt:4199,body:{}})}}bindTeleUser(e,t,r){return{seq:this.sendMessageToRwg({evt:4201,body:{teleUserID:e,targetUserID:t,bBind:r}})}}practiceSession(){return{seq:this.sendMessageToRwg({evt:4207,body:null})}}roleChangeWebinar(e,t,r,o){return{seq:this.sendMessageToRwg({evt:4209,body:{jid:t,userID:r,clientCap:o,bPromote:e}})}}sendPromoteConsent(e,t){return{seq:this.sendMessageToRwg({evt:4254,body:{agreed:e,req_id:t}})}}batchCreateBOToken(e){const t=e.map(((e,t)=>({topic:e,index:t})));return{seq:this.sendMessageToRwg({evt:4211,body:t})}}mute(e,t){return{seq:this.sendMessageToRwg({evt:8193,body:{bMute:t,id:e}})}}audioDrop(e){return{seq:this.sendMessageToRwg({evt:8195,body:{id:e}})}}audioDialout(e,t,r,o,n){return{seq:this.sendMessageToRwg({evt:8197,body:{pn:e,dn2:ld(t),bCallme:r,bPressOne:o,bGreeting:n}})}}audioCancelDialout(e,t){return{seq:this.sendMessageToRwg({evt:8199,body:{pn:e,bCallme:t}})}}audioMuteAll(e){return{seq:this.sendMessageToRwg({evt:8201,body:{bMute:e}})}}allowToTalk(e,t){return{seq:this.sendMessageToRwg({evt:8204,body:{id:e,bAllowTalk:t}})}}muteAttendeeVideo(e,t){return{seq:this.sendMessageToRwg({evt:12297,body:{id:e,bOn:t}})}}notifyRwgIsMuteVideo(e,t){return this.muteAttendeeVideo(e,t)}pauseSharing(){return{seq:this.sendMessageToRwg({evt:16385,body:{}})}}resumeSharing(){return{seq:this.sendMessageToRwg({evt:16387,body:{}})}}allowAnonymousQuestion(e,t){return{seq:this.sendMessageToRwg({evt:4155,body:{userId:e,bOn:t}})}}allowViewAll(e,t){return{seq:this.sendMessageToRwg({evt:4157,body:{userId:e,bOn:t}})}}allowVote(e,t){return{seq:this.sendMessageToRwg({evt:4159,body:{userId:e,bOn:t}})}}allowComment(e,t){return{seq:this.sendMessageToRwg({evt:4161,body:{userId:e,bOn:t}})}}sharingRequestRemoteControl(e,t){return{seq:this.sendMessageToRwg({evt:16389,body:{id:e,bOn:t}})}}subscribeGrabRemoteControl(e,t){return{seq:this.sendMessageToRwg({evt:16393,body:{id:e,bOn:t}})}}subscribeSharing(e,t,r,o,n){const i={id:e,size:t};return r&&Object.assign(i,{bShareToBO:!0}),void 0!==o&&Object.assign(i,{bVideoShare:o}),void 0!==n&&Object.assign(i,{bEnableViewMultiShareMode:n}),{seq:this.sendMessageToRwg({evt:16415,body:i})}}unsubscribeSharing(e,t,r){const o={id:e};return t&&Object.assign(o,{bShareToBO:!0}),void 0!==r&&Object.assign(o,{bEnableViewMultiShareMode:r}),{seq:this.sendMessageToRwg({evt:16417,body:o})}}sendRWGConnectionPerformance(e){return{seq:this.sendMessageToRwg({evt:4167,body:{data:e}})}}sendSdkKeyToMonitor(e,t,r){return{seq:this.sendMessageToRwg({evt:4167,body:{data:`ZoomConferenceClient,videoapp_HTML5_sdk_web_join,${r},2,${t},${e}`}})}}sendDatachannelOffer(e){return{seq:this.sendMessageToRwg({evt:24321,offer:e})}}joinOrLeaveVoip(e,t){return{seq:this.sendMessageToRwg({evt:8203,body:{bOn:e,mute:t}})}}startSharing(e,t){return{seq:this.sendMessageToRwg({evt:16409,body:{id:e,bOn:!1,...null!=t?t:{}}})}}stopSharing(e,t){return{seq:this.sendMessageToRwg({evt:16409,body:{id:e,bOn:!0,...null!=t?t:{}}})}}lockSharing(e){return{seq:this.sendMessageToRwg({evt:4169,body:{lockShare:e}})}}changeWhiteboardPermission(e){const t=null==e?void 0:e.wbLockShare,r=null==e?void 0:e.shareWbPermission,o={};return void 0!==t&&Object.assign(o,{wbLockShare:t}),void 0!==r&&Object.assign(o,{shareWbPermission:r}),{seq:this.sendMessageToRwg({evt:28677,body:o})}}changeWhiteboardShareToAll(){return{seq:this.sendMessageToRwg({evt:28675,body:{}})}}changeWhiteboardShareRole(e,t){return{seq:this.sendMessageToRwg({evt:28676,body:{userId:e,role:t}})}}startShareToBreakoutRoom(e){return{seq:this.sendMessageToRwg({evt:16425,body:{id:e,bShareToBO:!0}})}}stopShareToBreakoutRoom(e){return{seq:this.sendMessageToRwg({evt:16425,body:{id:e,bShareToBO:!1}})}}preAssignBreakoutRoom(){return{seq:this.sendMessageToRwg({evt:4213,body:{}})}}claimHost(e){return{seq:this.sendMessageToRwg({evt:4215,body:{hostKey:e}})}}allowMultiplePin(e,t){return{seq:this.sendMessageToRwg({evt:4217,body:{userID:e,bOn:t}})}}spotlightVideo(e,t){return{seq:this.sendMessageToRwg({evt:4219,body:{id:e,...t}})}}connectCamera(e,t){const r={evt:12307,body:{id:e,bOn:t}};return{seq:this.sendMessageToRwg(r)}}followHostLayout(e){return{seq:this.sendMessageToRwg({evt:4223,body:{bFollowHostVideo:e}})}}setVideoDragLayout(e){return{seq:this.sendMessageToRwg({evt:4218,body:{drag_list:e}})}}chatCmdReq(e,t){return{seq:this.sendMessageToRwg({evt:4237,body:{msgID:e,cmd:t}})}}activeAppLinkReq(e){return{seq:this.sendMessageToRwg({evt:4257,body:{appId:e}})}}activeAppInfoReq(){return{seq:this.sendMessageToRwg({evt:4255,body:{}})}}muteShareAudio(e,t){const r={bOn:!0,bShareAudio:!e};return t&&Object.assign(r,{bShareAudioOnly:!0}),{seq:this.sendMessageToRwg({evt:16423,body:r})}}localMuteAudio(e,t){return{seq:this.sendMessageToRwg({evt:8209,body:{id:e,bMute:t}})}}changeSharePronoun(e,t){return{seq:this.sendMessageToRwg({evt:4264,body:{bPronoun:e,strPronoun:t}})}}sendReceivingSharingReady(e){return{seq:this.sendMessageToRwg({evt:16421,body:{ssrc:e}})}}sendManualCaption(e){return{seq:this.sendMessageToRwg({evt:4289,body:{...e}})}}sendPollingAction(e,t,r){return{seq:this.sendMessageToRwg({evt:4224,body:{action:e,PollingId:t,...r}})}}broadcastUserNetworkQuality(e){const t={type:e.isUplink,level:e.level,bwLevel:e.bwLevel,mediaType:e.mediaType};return{seq:this.sendMessageToRwg({evt:4331,body:t})}}sendFarEndCameraControl(e,t,r){return{seq:this.sendMessageToRwg({evt:4329,body:{cmd:e,userID:t,buttonID:r}})}}sendCameraAblity(e){return{seq:this.sendMessageToRwg({evt:4330,body:{...e,focus:!1}})}}sendReaction(e){return{seq:this.sendMessageToRwg({evt:4259,body:{...e}})}}remoteControlConsent(e,t,r,o,n=!1,i){const{deviceId:s,...a}=o,u=void 0!==i?{runAsAdmin:i}:{};return{seq:this.sendMessageToRwg({evt:16427,body:{DeviceID:s,op:e,SendUserID:r,AssignUserID:t,...a,bAutoDelete:n,...u}})}}takeBackRemoteControlPermission(e,t){return{seq:this.sendMessageToRwg({evt:16431,body:{SendUserID:e,ReceiverUserID:t}})}}syncSharedContentMetaWithRcApp(e){const{deviceId:t,...r}=e;return{seq:this.sendMessageToRwg({evt:16429,body:{DeviceID:t,...r}})}}startLiveStream(e,t,r){return{seq:this.sendMessageToRwg({evt:7977,body:{action:1,streamingURL:e,streamingKey:t,broadcastURL:r}})}}stopLiveStream(){return{seq:this.sendMessageToRwg({evt:7977,body:{action:0}})}}sendRemoteControlAuth(e){return{seq:this.sendMessageToRwg({evt:16433,body:{auth:e}})}}chatFileTransfer(e){return{seq:this.sendMessageToRwg({evt:4307,body:{...e,fileType:0,receiverType:0}})}}broadcastVoiceReq(e){return{seq:this.sendMessageToRwg({evt:4314,body:{broadcastVoice:e}})}}requestUserInfoToken(e,t){return{seq:this.sendMessageToRwg({evt:4309,body:{type:e,reqId:t}})}}toggleShareAnnotation(e,t){return{seq:this.sendMessageToRwg({evt:20241,body:{annotationOff:e?0:1,activeNodeId:t}})}}requestRemoteShare(e,t,r,o){return{seq:this.sendMessageToRwg({evt:16444,body:{requestId:_y(),userId:e,destUserId:t,shareSource:r,startAnnotation:o}})}}respondRemoteShareRequest(e,t,r,o){return{seq:this.sendMessageToRwg({evt:16445,body:{requestId:e,userId:t,destUserId:r,status:o}})}}respondStatusToRemoteShareRequest(e,t,r,o){return{seq:this.sendMessageToRwg({evt:16446,body:{requestId:e,userId:t,destUserId:r,status:o}})}}sendCommandMessage(e,t){return{seq:this.sendMessageToRwg({evt:4383,body:{recieverID:t,commandContent:e}})}}openWhiteboard({docId:e,sharingrole:t,haveAccessAfterMeeting:r,isInRoom:o,boToken:n,whiteboardToken:i}){return{seq:this.sendMessageToRwg({evt:28673,body:{docId:e,sharingrole:t,haveAccessAfterMeeting:!!r,boToken:o?n:"",whiteboardToken:i}})}}newWhiteboard({sharingrole:e,docName:t,haveAccessAfterMeeting:r,templateId:o,accountId:n,whiteboardToken:i,templateType:s,boToken:a,isInRoom:u}){return{seq:this.sendMessageToRwg({evt:28673,body:{sharingrole:e,docName:t,haveAccessAfterMeeting:!!r,boToken:u?a:"",templateId:o,templateType:""!==s?s:0,accountId:n,whiteboardToken:i}})}}closeWhiteboard(e){return{seq:this.sendMessageToRwg({evt:28674,body:{docid:e}})}}updateWhiteboardProperties(e,t){return"ChangeTempUserRole"===e?{seq:this.sendMessageToRwg({evt:28676,body:{docid:t.docid,role:t.role}})}:"ShareToAll"===e?{seq:this.sendMessageToRwg({evt:28675,body:{docid:t.docid,bPermanent:!0}})}:null}subscribeWhiteboardSharing(){return{seq:this.sendMessageToRwg({evt:16415,body:{bWb:!0}})}}unsubscribeWhiteboardSharing(){return{seq:this.sendMessageToRwg({evt:16417,body:{bWb:!0}})}}}class __ extends E_{static createAgent(){return this.rwgInstance||(this.rwgInstance=new __),this.rwgInstance}}__.rwgInstance=null;class I_ extends E_{static getInstance(){return this.instance||(this.instance=new I_),this.instance}}I_.instance=null;class A_{constructor(e){this[t]=void 0,this[o]=void 0,this[r]=void 0,this[n]=void 0,this[t]=e,this[o]=e.dispatch,this[r]=e.getState}}let b_=function(e){return e.Open="open",e.Message="message",e.Error="error",e.Close="close",e}({});class C_{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1}static getInstance(){return this.xmppInstance||(this.xmppInstance=new C_),this.xmppInstance}on(e,t){let r=this.eventHandlers.get(e);r||(r=[]),r.push(t),this.eventHandlers.set(e,r)}off(e,t){const r=this.eventHandlers.get(e);if(r){const o=r.filter((e=>e!==t));this.eventHandlers.set(e,o)}}emit(e,t){const r=this.eventHandlers.get(e);r&&r instanceof Array&&r.slice(0).forEach((e=>{try{e(t)}catch(e){console.error(e)}}))}sendMessageToRwg(e){this.seq+=1;const t=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(e,{seq:t}))),t}connect(e,t){this.websocket=t?new window.ZoomTPModule.ZoomTPWebSocket(e):new WebSocket(e),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var e;null===(e=this.websocket)||void 0===e||e.close()}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",(e=>{this.emit(b_.Open,e)})),this.websocket.addEventListener("message",(e=>{const{data:t}=e;var r;if(t instanceof ArrayBuffer)0===new Uint8Array(t)[0]&&(null===(r=this.websocket)||void 0===r||r.send(t));else try{this.emit(b_.Message,JSON.parse(t))}catch(e){console.warn("Unsupported format",t)}})),this.websocket.addEventListener("close",(e=>{this.emit(b_.Close,e)})),this.websocket.addEventListener("error",(e=>{this.emit(b_.Error,e)})))}join(e){return{seq:this.sendMessageToRwg({evt:24576,body:{clientCap:e}})}}raiseHand(){return{seq:this.sendMessageToRwg({evt:24580,body:null})}}lowerHand(e){return{seq:this.sendMessageToRwg({evt:24578,jids:e||[]})}}sendWebinarMseeage(e,t,r,o=!1){const n={msg:e,jid:t?[t]:[],type:r,bcm:o};return{seq:this.sendMessageToRwg({evt:24582,body:n})}}sendAnswer(e,t,r){return{seq:this.sendMessageToRwg({evt:24584,body:{question_attendeejid:t.jid,question_attendeename:t.displayName,question_text:t.questionText,question_id:t.questionId,question_anonymous:t.isAnonymous,question_time:t.questionTime,text:e,isPrivate:r}})}}answerOnline(e,t){return{seq:this.sendMessageToRwg({evt:24586,body:{question_attendeejid:e.jid,question_attendeename:e.displayName,question_text:e.questionText,question_id:e.questionId,question_anonymous:e.isAnonymous,question_time:e.questionTime,isLiveStart:t}})}}dismissQuestion(e){return{seq:this.sendMessageToRwg({evt:24590,body:{question_attendeejid:e.jid,question_attendeename:e.displayName,question_text:e.questionText,question_id:e.questionId,question_anonymous:e.isAnonymous,question_time:e.questionTime,bOpen:!1}})}}deleteQuestion(e){return{seq:this.sendMessageToRwg({evt:24614,body:{question_id:e,bDelete:!0}})}}deleteComment(e){return{seq:this.sendMessageToRwg({body:{comment_id:e,bDelete:!0},evt:24616})}}reopenQuestion(e){return{seq:this.sendMessageToRwg({body:{question_attendeejid:e.jid,question_attendeename:e.displayName,question_text:e.questionText,question_id:e.questionId,question_anonymous:e.isAnonymous,question_time:e.questionTime,bOpen:!0},evt:24590})}}askQuestion(e,t,r=!1,o){const n=fd();return{seq:this.sendMessageToRwg({body:{id:n,text:e,isAnonymous:r,bAllowAttendeeViewAllQuestion:o,name:t},evt:24592}),questionId:n}}upOrDownVote(e,t){return{seq:this.sendMessageToRwg({body:{question_attendeejid:e.jid,question_attendeename:e.displayName,question_text:e.questionText,question_id:e.questionId,question_anonymous:e.isAnonymous,question_time:e.questionTime,bUpVote:t},evt:24598})}}rename(e,t){return{seq:this.sendMessageToRwg({body:{jid:e,displayName:t},evt:24600})}}setSkinTome(e){return{seq:this.sendMessageToRwg({body:{skinTone:e},evt:24618})}}}function T_(e){return Dt(Vr(((t,r)=>e(t,r))),co((e=>null!=e)))}function R_(e){return Dt(Gr(((t,r)=>e(t,r)||nr)))}function O_(e){return Dt(Gr(((t,r)=>e(t,r))),Gr((e=>Array.isArray(e)?Cr(e):Tr(e))))}C_.xmppInstance=null;const D_={period:500,rules:[{peak:50,throttle:300},{peak:60,throttle:400}]},w_={[`${Ov}`]:()=>({payloads:{add:[],update:[],remove:[]},onThrottle(e){e.add&&this.payloads.add.push(...e.add),e.update&&this.payloads.update.push(...e.update),e.remove&&this.payloads.remove.push(...e.remove)}})};function N_(e=D_){return t=>new Nt((r=>{const o=new Map;let n=0,i=null;const{period:s,rules:a}=e;let u=null;i||(i=((e,t)=>{const r=performance.now();let o=0,n=!1;return setTimeout((function i(){o+=t,e();const s=performance.now()-r-o,a=setTimeout(i,Math.max(t-s,0));n&&clearTimeout(a)}),t),()=>{n=!0}})((()=>{n=0}),s));const d=Object.keys(w_),c=t.subscribe({next(e){if(e&&e.evt&&null!==i){n+=1;const{evt:t,body:i}=e,s=String(t);if(d.indexOf(s)>=0)if(u){const e=o.get(s);if(e)e.onThrottle(i);else{const e=w_[s]();e.onThrottle(i),o.set(s,e)}}else{let t=0;if(a.forEach((e=>{n>e.peak&&(t=e.throttle)})),t>0){const e=w_[s]();e.onThrottle(i),o.set(s,e),u=setTimeout((()=>{o.forEach(((e,t)=>{const o={evt:Number(t),body:e.payloads};r.next(o)})),o.clear(),u=null}),t)}else r.next(e)}else r.next(e)}else r.next(e)},error(e){r.error(e)},complete(){r.complete()}});return()=>{c.unsubscribe(),i&&(i(),i=null),n=0}}))}let M_=function(e){return e.Closed="closed",e.Connecting="connecting",e.Connected="connected",e}({});function P_(e){return 1<<e-1}let L_=function(e){return e[e.SupportASL=P_(1)]="SupportASL",e[e.SidecarPhase2=P_(2)]="SidecarPhase2",e[e.SupportBroadcastVoice=P_(4)]="SupportBroadcastVoice",e[e.SendMeetingTokenSeparately=P_(5)]="SendMeetingTokenSeparately",e[e.SupportPreview=P_(6)]="SupportPreview",e[e.WebCameraIndication=P_(7)]="WebCameraIndication",e[e.SupportFarEndCameraControl=P_(9)]="SupportFarEndCameraControl",e[e.SupportVideoShare=P_(10)]="SupportVideoShare",e[e.UnifyErrorType=P_(11)]="UnifyErrorType",e[e.WhiteBoard=P_(12)]="WhiteBoard",e[e.RequestRemoteControl=P_(14)]="RequestRemoteControl",e[e.SmartSummary=P_(15)]="SmartSummary",e[e.LocalRecording=P_(16)]="LocalRecording",e[e.LocalRecordingGrantPermission=P_(17)]="LocalRecordingGrantPermission",e[e.ShareMultiStream=P_(18)]="ShareMultiStream",e[e.VideoLTR=P_(19)]="VideoLTR",e[e.WebrtcAudioRtcpTime=P_(20)]="WebrtcAudioRtcpTime",e[e.SupportSend1080PVideo=P_(29)]="SupportSend1080PVideo",e[e.SupportSend1080PVideoShare=P_(30)]="SupportSend1080PVideoShare",e[e.SupportWhiteboard=P_(12)]="SupportWhiteboard",e}({}),k_=function(e){return e[e.SupportPresenterAnnotation=P_(5)]="SupportPresenterAnnotation",e[e.SupportShareCameraFeed=P_(15)]="SupportShareCameraFeed",e[e.SupportMMRCommandChannel=P_(11)]="SupportMMRCommandChannel",e[e.SupportAudioShareNetworkQuality=P_(17)]="SupportAudioShareNetworkQuality",e[e.SupportWhiteboard=P_(13)]="SupportWhiteboard",e}({});const{setAsnIds:U_,setIsCanUnmute:V_,setDialoutSequence:B_,setDialoutResultCode:H_,setIsAllowToTalk:j_,setAudioSsrc:F_,setIsMutedUponEntry:W_,setIsUserGrantCaptureAudio:x_,setIsMicrophoneForbidden:$_,setWebrtcRestartCount:G_,setMicrophoneList:z_,setSpeakerList:q_,setActiveMicrophone:K_,setActiveSpeaker:J_,setCanPlayAudio:Q_,resetAudio:Y_,setIsComputerAudioLoading:Z_,setIsAllowToTalkAttendeeConnected:X_,setIsMuteBeforeSharingAudio:eI,addLocalShareAudioUser:tI,updateLocalShareAudioUser:rI,setIsJoinComputerAudioBeforeSharingAudio:oI,setIsShareAudioEnabled:nI,setIsShareAudioMuted:iI,setIsSharingAudio:sI,setAudioDataEncoding:aI,setAudioDataDecoding:uI,addLocallyMutedAudio:dI,removeLocallyMutedAudio:cI,updateUserAudioVolumeLocally:lI,removeLocalUserAudioVolume:pI,setCustomizedAudioOption:hI,setIsBackgroundNoiseSuppression:mI,setIsHidEnabled:gI,setAudioMediaPlaybackFile:SI,setIsStopAllIncomingAudio:vI,setIsVerifiedAudioPermissionOnIosMobile:fI,setIsAudioBridgeSignalReconnecting:yI,setAudioMutedSource:EI,setAudioUnmutedSource:_I,setAudioOriginalSound:II,setLeaveAudioSource:AI,setSecondaryAudioMicrophoneId:bI,setCrcCallOutSequence:CI,setCrcCallOutReturnCode:TI,setWebRtcAudioCapable:RI}=Wc("SET_ASN_IDS","SET_IS_CAN_UNMUTE","SET_DIALOUT_SEQUENCE","SET_DIALOUT_RESULT_CODE","SET_IS_ALLOW_TO_TALK","SET_AUDIO_SSRC","SET_IS_MUTED_UPON_ENTRY","SET_IS_USER_GRANT_CAPTURE_AUDIO","SET_IS_MICROPHONE_FORBIDDEN","SET_WEBRTC_RESTART_COUNT","SET_MICROPHONE_LIST","SET_SPEAKER_LIST","SET_ACTIVE_MICROPHONE","SET_ACTIVE_SPEAKER","SET_CAN_PLAY_AUDIO","RESET_AUDIO","SET_IS_COMPUTER_AUDIO_LOADING","SET_IS_ALLOW_TO_TALK_ATTENDEE_CONNECTED","SET_IS_MUTE_BEFORE_SHARING_AUDIO","SET_IS_SHARING_AUDIO","ADD_LOCAL_SHARE_AUDIO_USER","UPDATE_LOCAL_SHARE_AUDIO_USER","SET_IS_JOIN_COMPUTER_AUDIO_BEFORE_SHARING_AUDIO","SET_IS_SHARE_AUDIO_ENABLED","SET_IS_SHARE_AUDIO_MUTED","SET_AUDIO_DATA_ENCODING","SET_AUDIO_DATA_DECODING","ADD_LOCALLY_MUTED_AUDIO","REMOVE_LOCALLY_MUTED_AUDIO","UPDATE_USER_AUDIO_VOLUME_LOCALLY","REMOVE_LOCAL_USER_AUDIO_VOLUME","SET_CUSTOMIZED_AUDIO_OPTION","SET_IS_BACKGROUND_NOISE_SUPPRESSION","SET_IS_HID_ENABLED","SET_AUDIO_MEDIA_PLAYBACK_FILE","SET_IS_STOP_ALL_INCOMING_AUDIO","SET_IS_VERIFIED_AUDIO_PERMISSION_ON_IOS_MOBILE","SET_IS_AUDIO_BRIDGE_SIGNAL_RECONNECTING","SET_AUDIO_MUTED_SOURCE","SET_AUDIO_UNMUTED_SOURCE","SET_AUDIO_ORIGINAL_SOUND","SET_LEAVE_AUDIO_SOURCE","SET_SECONDARY_AUDIO_MICROPHONE_ID","SET_CRC_CALL_OUT_SEQUENCE","SET_CRC_CALL_OUT_RETURN_CODE","SET_WEB_RTC_AUDIO_CAPABLE");function OI(e){const{audio:{isBackgroundNoiseSuppression:t,originalSound:r,highBitrate:o}}=e,n={currentSelect:Oe.Denoise},i={highfidelity:!1,stereo:!1};if(r){Object.assign(n,{currentSelect:Oe.OriginalSound});const e={};"boolean"==typeof r?Object.assign(e,i):Object.assign(e,{highfidelity:!!r.hifi,stereo:!!r.stereo}),Object.assign(n,{originalSound:e})}return Object.assign(n,{backgroundNoiseSuppression:t?Re.Zoom:Re.Browser,highBitrate:o}),n}function DI(e,t,r,o){const{meeting:{userId:n}}=o;return Xd(t,r,o,e),t===n?iI(r):rI({userId:t,muted:r})}async function wI(e,t,r){var o,n;const{audio:{audioSsrc:i,activeMicrophone:s,activeSpeaker:a,isAllowToTalk:u,customizeAudioOption:{speakerOnly:d,mute:c,microphoneId:l,speakerId:p},isUsingMediaPlayback:h,mediaPlaybackFile:m,isHIDEnabled:g,microphoneDevicesList:S,isVerifiedAudioPermissionOnIOSMobile:v,speakerDevicesList:f,isWebRtcAudioCapable:y},meeting:{userId:E}}=t,_=Ru(t),I=!!d||pu(_.userRole)&&!u,A=null!=r?r:!I;let b=s,C=a;if(void 0!==l||void 0!==p){let e=S,t=f;if(0===S.length){const{microphones:r,speakers:o}=await Mr(kd());e=r,t=o}l&&e.findIndex((e=>e.deviceId===l))>-1&&(b=l),p&&t.findIndex((e=>e.deviceId===p))>-1&&(C=p)}if(h&&null!=m&&m.url){const t=hm.getInstance();await t.setAudioElement(m),b=t.audioElement,void 0!==m.playback&&(e.enablePlayAudioFileLocally(!!m.playback),b.dataset.playback=m.playback?"1":"0")}else hm.getInstance().stopAudioElement();return I&&!v&&T.isIOSMobile&&await async function(){await navigator.mediaDevices.getUserMedia({audio:!0})}(),null===(o=e.joinComputerAudio(i,b,C,A,OI(t),y,g?{microphoneLabel:null===(n=S.find((e=>e.deviceId===s)))||void 0===n?void 0:n.label,defaultMuted:!(null==_||!_.muted)}:void 0))||void 0===o?void 0:o.then((()=>{c&&__.createAgent().mute(E,!0)}))}async function NI(e,t){const r=[],{audio:{isJoinComputerAudioBeforeSharingAudio:o,mutedBeforeSharingAudio:n}}=t,i=Ru(t);return!0===o&&(r.push(oI(void 0)),!1===n&&(r.push(_I(H.SharingAudio)),e.mute(i.userId,!1)),r.push(eI(void 0))),r}async function MI(e,t,r){const{audio:{isSharingAudio:o},meeting:{userId:n},share:{isReceiveSharingFromMainSession:i}}=r,s=[];if(e.setSharingAudioVolume(n,!0,!!i),s.push(iI(!0)),o){await e.leaveSharingAudio(!1),s.push(sI(!1));const o=await NI(t,r);s.push(...o),setTimeout((()=>{Ga(Ui,{state:"off"})}),0)}return s.push(nI(!1)),s}async function PI(e,t,r){const{audio:{audioSsrc:o,activeMicrophone:n,activeSpeaker:i,isWebRtcAudioCapable:s},meeting:{mediaFeatureOptions:a}}=r,u=Ru(r),d=[];if(!Fu.isSupportOpenMicWhenShareAudio(a||"")){const t=await async function(e,t){const r=[],o=Ru(t),{audio:{isMicrophoneForbidden:n}}=t;return(null==o?void 0:o.audio)===Ee.Computer&&(r.push(oI(!0)),r.push(eI(o.muted)),o.muted||e.muteAudio(),r.push(G_(0)),n&&r.push($_(!1))),r}(e,r);d.push(...t)}return await e.leaveSharingAudio(!0),await e.joinSharingAudio({ssrc:o,microphoneDeviceId:n,speakerDeviceId:i,isCaptureAudio:pu(u.userRole),audioBridge:s}),d.push(nI(!0)),d.push(sI(!0)),d.push(DI(e,u.userId,!1,r)),d.findIndex((e=>e.type===`${oI}`&&!0===e.payload))>-1&&(d.push(EI(B.SharingAudio)),t.mute(r.meeting.userId,!0)),setTimeout((()=>{Ga(Ui,{state:"on"})}),0),d}const LI=()=>{if(R())return!0;{var e;let{browser:r}=T;if(r=null===(e=r)||void 0===e?void 0:e.toLocaleLowerCase(),r.indexOf("safari")>-1&&-1===r.indexOf("ios-safari")){var t;const e=null===(t=navigator.userAgent.match(/version\/(\d+\.?\d+)/i))||void 0===t?void 0:t[1];return vd(e||"","15.2")>=0&&vd(e||"","17.1")<0}return!1}};function kI(e,t,r){for(let o=0;o<r.length&&0!==t.length;o++){const{userId:n,displayName:i}=r[o];if(t.includes(n)){const r=e.find((e=>e.userId===n));r&&(r.displayName=i,t.splice(t.indexOf(n),1))}}}function UI(e,t){return Fu.isSupportAudioDenoise(e,t)}function VI(){return Fu.isSupportStereoAudio()}function BI(){var e;return"function"==typeof(null===(e=window.navigator.hid)||void 0===e?void 0:e.requestDevice)}function HI(e,t,r){const{audio:{isAllowToTalk:o,customizeAudioOption:n},media:{audioDecodeStatus:i,audioEncodeStatus:s}}=e;return{encodeInitStatus:pu(t.userRole)&&!o||r||null!=n&&n.speakerOnly?"success":s,decodeInitStatus:i}}function jI(e){const{audio:{bMutedUponEntry:t,isUserGrantCaptureAudio:r,isAllowToTalk:o}}=e,n=Ru(e);return!(r||null!=n&&n.isHost||o)&&t}function FI(e,t){const{audio:{customizeAudioOption:r}}=t,o=!(null==r||!r.mute)||jI(t);e.joinOrLeaveVoip(!0,o)}function WI(){return lo(Ja(qi.JoinComputerAudio.success,1),io(...qi.JoinComputerAudio.fail.map((e=>Ja(e,1).pipe(Gr((t=>{const{errorCode:r,...o}=null!=t?t:{},n={...o};return void 0!==r&&Object.assign(n,{subCode:r}),Rr({type:Ze,reason:e,errorCode:Na.AUDIO_CAPTURE_FAILED,...n})})))))),oo(45e3).pipe(Gr((()=>Rr({type:Ye,errorCode:Na.OPERATION_TIMEOUT})))))}const xI=__.createAgent(),$I=Fd(ME(Fu.getInstance())),GI=e=>!e.muted,zI=Ic("SCREENSHOT_SHARING_NOTIFICATION"),{setSharePrivilege:qI,setShareActiveNode:KI,setIsReceiveSharing:JI,setIsScreenShareForbidden:QI,setShareDimension:YI,setShareStatus:ZI,setShareSsrc:XI,setShareQuality:eA,setReceivedShareDimension:tA,setIsGrabRemoteControl:rA,setIsSdkGrabControl:oA,setIsReceiveSharingFromMainSession:nA,setIsSharingToBreakoutRoom:iA,setIsSharingWithSecondCamera:sA,setShringSecondCameraId:aA,setIsRequireReadReceipt:uA,setIsOptimizedForSharedVideo:dA,setShareDataEncoding:cA,setShareDataDecoding:lA,addShareCapturedEnsuredCanvas:pA,addShareRenderedEnsuredCanvas:hA,setRemoteControlCurrentSsrc:mA,setRemoteControllingSsrc:gA,setApprovedRemoteControlSsrc:SA,setRemoteControlAppDownloadUrl:vA,setRemoteControlAppInstallStatus:fA,remoteControlAppStatusFallbackCheck:yA,remoteControlAppLaunchedCheck:EA,setIsEnableAutoDeleteRcApp:_A,setRemoteControlAppLaunchSheme:IA,addRemoteControlledUser:AA,removeRemoteControlledUser:bA,setRemoteControlSetting:CA,setRemoteControlViewportDomSelector:TA,setAnnotationCapability:RA,setIsAnnotationInitialized:OA,setIsAnnotationStarted:DA,setAnnotationUser:wA,setAnnotationToolColor:NA,setAnnotationSpotlightColor:MA,setAnnotationToolWidth:PA,setAnnotationToolType:LA,setIsSimultaneousShareView:kA,setIsCameraFeedSharing:UA,addShareViewAttachment:VA,removeShareViewAttachment:BA,setAnnotationVanishingToolTimer:HA,resetShare:jA}=Wc("SET_SHARE_PRIVILEGE","SET_SHARE_ACTIVE_NODE","SET_IS_RECEIVE_SHARING","SET_IS_SCREEN_SHARE_FORBIDDEN","SET_SHARE_DIMENSION","SET_SHARE_STATUS","SET_SHARE_SSRC","SET_SHARE_QUALITY","SET_RECEIVED_SHARE_DIMENSION","SET_IS_GRAB_REMOTE_CONTROL","SET_IS_SDK_GRAB_CONTROL","SET_IS_RECEIVE_SHARING_FROM_MAIN_SESSION","SET_IS_SHARING_TO_BREAKOUT_ROOM","SET_IS_SHARING_WITH_SECOND_CAMERA","SET_SHRING_SECOND_CAMERA_ID","SET_IS_REQUIRE_READ_RECEIPT","SET_IS_OPTIMIZED_FOR_SHARED_VIDEO","SET_SHARE_DATA_ENCODING","SET_SHARE_DATA_DECODING","ADD_SHARE_CAPTURED_ENSURED_CANVAS","ADD_SHARE_RENDERED_ENSURED_CANVAS","SET_REMOTE_CONTROL_CURRENT_SSRC","SET_REMOTE_CONTROLLING_SSRC","SET_APPROVED_REMOTE_CONTROL_SSRC","SET_REMOTE_CONTROL_APP_DOWNLOAD_URL","SET_REMOTE_CONTROL_APP_INSTALL_STATUS","REMOTE_CONTROL_APP_STATUS_FALLBACK_CHECK","REMOTE_CONTROL_APP_LAUNCHED_CHECK","SET_IS_ENABLE_AUTO_DELETE_RC_APP","SET_REMOTE_CONTROL_APP_LAUNCH_SHEME","ADD_REMOTE_CONTROLLED_USER","REMOVE_REMOTE_CONTROLLED_USER","SET_REMOTE_CONTROL_SETTING","SET_REMOTE_CONTROL_VIEWPORT_DOM_SELECTOR","SET_ANNOTATION_CAPABILITY","SET_IS_ANNOTATION_INITIALIZED","SET_IS_ANNOTATION_STARTED","SET_ANNOTATION_USER","SET_ANNOTATION_TOOL_COLOR","SET_ANNOTATION_SPOTLIGHT_COLOR","SET_ANNOTATION_TOOL_WIDTH","SET_ANNOTATION_TOOL_TYPE","SET_IS_SIMULTANEOUS_SHARE_VIEW","SET_IS_CAMERA_FEED_SHARING","ADD_SHARE_VIEW_ATTACHMENT","REMOVE_SHARE_VIEW_ATTACHMENT","SET_ANNOTATION_VANISHING_TOOL_TIMER","RESET_SHARE"),FA=__.createAgent(),WA=Fd(ME(Fu.getInstance())),xA=__.createAgent(),$A=Fd(ME(Fu.getInstance())),GA=[W.Canceled,W.CancelFailed],zA={asnIds:{asn1:{userId:0,displayName:null},asn2:{userId:0,displayName:null},asn3:{userId:0,displayName:null}},microphoneDevicesList:[],speakerDevicesList:[],activeMicrophone:"default",activeSpeaker:"default",isMicrophoneForbidden:!1,audioSsrc:0,bCanUnmute:!1,bMutedUponEntry:!1,isAllowToTalk:void 0,dialout:[],crcDevice:[],canPlayAudio:!1,mutedSource:void 0,unmutedSource:void 0,isUserGrantCaptureAudio:!1,webrtcRestartCount:0,isComputerAudioLoading:!1,isUsingMediaPlayback:!1,customizeAudioOption:{},localShareAudioUserMutedList:[],locallyMutedAudioList:[],localUserAudioVolumeList:[],isStopAllImcomingAudio:!1,isWebRtcAudioCapable:!1,webRtcAudioMode:0,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,bandwidth:0,bitrate:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,bandwidth:0,bitrate:0}}},qA=qc({[`${U_}`]:ay(((e,{payload:t})=>{e.asnIds={...t}})),[`${V_}`]:ay(((e,{payload:t})=>{e.bCanUnmute=t})),[`${B_}`]:ay(((e,{payload:t})=>{const{sequence:r,phoneNumber:o}=t;-1===e.dialout.findIndex((e=>e.sequence===r))&&e.dialout.push({sequence:r,phoneNumber:o,returnCode:-1,uuid:_y()})})),[`${H_}`]:ay(((e,{payload:t})=>{const{sequence:r,code:o,nodeId:n}=t,i=e.dialout.find((e=>e.sequence===r));i&&(i.returnCode=o,n&&(i.phoneNodeId=n))})),[`${j_}`]:ay(((e,{payload:t})=>{e.isAllowToTalk=t,e.isAllowToTalkAttendeeConnected=!1})),[`${EI}`]:ay(((e,{payload:t})=>{e.mutedSource=t})),[`${_I}`]:ay(((e,{payload:t})=>{e.unmutedSource=t})),[`${F_}`]:ay(((e,{payload:t})=>{e.audioSsrc=t})),[`${W_}`]:ay(((e,{payload:t})=>{e.bMutedUponEntry=t})),[`${x_}`]:ay(((e,{payload:t})=>{e.isUserGrantCaptureAudio=t})),[`${$_}`]:ay(((e,{payload:t})=>{e.isMicrophoneForbidden=t})),[`${G_}`]:ay(((e,{payload:t})=>{e.webrtcRestartCount=t})),[`${z_}`]:ay(((e,{payload:t})=>{e.microphoneDevicesList=t})),[`${q_}`]:ay(((e,{payload:t})=>{e.speakerDevicesList=t})),[`${K_}`]:ay(((e,{payload:t})=>{e.activeMicrophone=t})),[`${J_}`]:ay(((e,{payload:t})=>{e.activeSpeaker=t})),[`${Q_}`]:ay(((e,{payload:t})=>{e.canPlayAudio=t})),[`${Z_}`]:ay(((e,{payload:t})=>{e.isComputerAudioLoading=t})),[`${hI}`]:ay(((e,{payload:t})=>{if(t){const{speakerOnly:r,mute:o,backgroundNoiseSuppression:n,originalSound:i,syncButtonsOnHeadset:s,mediaFile:a,microphoneId:u,speakerId:d,highBitrate:c}=t;e.customizeAudioOption.speakerOnly=r,e.customizeAudioOption.mute=o,e.customizeAudioOption.microphoneId=u,e.customizeAudioOption.speakerId=d,e.isBackgroundNoiseSuppression=!!n,e.isHIDEnabled=!!s,e.originalSound=i,e.highBitrate=!!c,yd(e.mediaPlaybackFile,a)||(e.mediaPlaybackFile=a,e.isUsingMediaPlayback=!(null==a||!a.url)),o&&(e.mutedSource=B.Inherited)}})),[`${X_}`]:ay(((e,{payload:t})=>{e.isAllowToTalkAttendeeConnected=t})),[`${eI}`]:ay(((e,{payload:t})=>{e.mutedBeforeSharingAudio=t})),[`${sI}`]:ay(((e,{payload:t})=>{e.isSharingAudio=t})),[`${iI}`]:ay(((e,{payload:t})=>{e.isShareAudioMuted=t})),[`${tI}`]:ay(((e,{payload:t})=>{const{userId:r,isFromMainSession:o}=t;-1===e.localShareAudioUserMutedList.findIndex((e=>e.userId===r))&&e.localShareAudioUserMutedList.push({userId:r,isFromMainSession:o,muted:!1})})),[`${rI}`]:ay(((e,{payload:t})=>{const r=e.localShareAudioUserMutedList.find((e=>e.userId===t.userId));r&&(r.muted=t.muted)})),[`${oI}`]:ay(((e,{payload:t})=>{e.isJoinComputerAudioBeforeSharingAudio=t})),[`${nI}`]:ay(((e,{payload:t})=>{e.isShareAudioEnabled=t})),[`${aI}`]:ay(((e,{payload:t})=>{const{data:{encoding:r,rate:o,...n}}=t;e.statistic.encode={bitrate:o,...n}})),[`${uI}`]:ay(((e,{payload:t})=>{const{data:{encoding:r,rate:o,...n}}=t;e.statistic.decode={bitrate:o,...n}})),[`${dI}`]:ay(((e,{payload:t})=>{-1===e.locallyMutedAudioList.findIndex((e=>e===t))&&e.locallyMutedAudioList.push(t)})),[`${cI}`]:ay(((e,{payload:t})=>{const r=e.locallyMutedAudioList.findIndex((e=>e===t));-1!==r&&e.locallyMutedAudioList.splice(r,1)})),[`${lI}`]:ay(((e,{payload:t})=>{const r=e.localUserAudioVolumeList.find((e=>e.userId===t.userId));if(r?r.volume=t.volume:e.localUserAudioVolumeList.push(t),t.volume>0){const r=e.locallyMutedAudioList.findIndex((e=>e===t.userId));-1!==r&&e.locallyMutedAudioList.splice(r,1)}})),[`${pI}`]:ay(((e,{payload:t})=>{const r=e.localUserAudioVolumeList.findIndex((e=>e.userId===t.userId));-1!==r&&e.localUserAudioVolumeList.splice(r,1)})),[`${mI}`]:ay(((e,{payload:t})=>{e.isBackgroundNoiseSuppression=t})),[`${gI}`]:ay(((e,{payload:t})=>{e.isHIDEnabled=t})),[`${SI}`]:ay(((e,{payload:t})=>{e.mediaPlaybackFile=t,e.isUsingMediaPlayback=!(null==t||!t.url)})),[`${vI}`]:ay(((e,{payload:t})=>{e.isStopAllImcomingAudio=t})),[`${fI}`]:ay(((e,{payload:t})=>{e.isVerifiedAudioPermissionOnIOSMobile=t})),[`${yI}`]:ay(((e,{payload:t})=>{e.isAudioBridgeSignalReconnecting=t})),[`${II}`]:ay(((e,{payload:t})=>{e.originalSound=t})),[`${AI}`]:ay(((e,{payload:t})=>{e.leaveAudioSource=t,e.unmutedSource=H.Inherited})),[`${bI}`]:ay(((e,{payload:t})=>{e.secondaryAudioMicrophoneId=t})),[`${CI}`]:ay(((e,{payload:t})=>{const{sequence:r,ip:o,protocol:n}=t;-1===e.crcDevice.findIndex((e=>e.sequence===r))&&e.crcDevice.push({sequence:r,ip:o,protocol:n,transId:0,uuid:_y()})})),[`${TI}`]:ay(((e,{payload:t})=>{const{sequence:r,transID:o,result:n}=t,i=e.crcDevice.find((e=>e.sequence===r));i&&Object.assign(i,{transId:o,returnCode:n})})),[`${RI}`]:ay(((e,{payload:t})=>{const{isWebRtcAudioCapable:r,webRtcAudioMode:o}=t;e.isWebRtcAudioCapable=r,e.webRtcAudioMode=o})),[`${Y_}`]:({dialout:e,crcDevice:t,locallyMutedAudioList:r,localUserAudioVolumeList:o,customizeAudioOption:n,originalSound:i,highBitrate:s,isHIDEnabled:a,isBackgroundNoiseSuppression:u,isStopAllImcomingAudio:d,mediaPlaybackFile:c,isUsingMediaPlayback:l,isVerifiedAudioPermissionOnIOSMobile:p,activeSpeaker:h,activeMicrophone:m},{payload:g})=>g?{...zA,dialout:e,crcDevice:t,locallyMutedAudioList:r,localUserAudioVolumeList:o,customizeAudioOption:{...zA.customizeAudioOption,speakerOnly:n.speakerOnly},originalSound:i,highBitrate:s,isHIDEnabled:a,isBackgroundNoiseSuppression:u,isStopAllImcomingAudio:d,mediaPlaybackFile:c,isUsingMediaPlayback:l,isVerifiedAudioPermissionOnIOSMobile:p,activeSpeaker:h,activeMicrophone:m}:{...zA}},zA),KA={dialEpics0:(e,t)=>_v(e,8198).pipe(Oo(t),co((([e,t])=>{const{audio:{dialout:r}}=t,{payload:{seq:o,body:n}}=e;return r.map((e=>e.sequence)).includes(o)||GA.includes(null==n?void 0:n.result)})),Gr((([e,t])=>{const{payload:{seq:r,body:{phoneNodeID:o,result:n}}}=e,i=[H_({code:n,sequence:r,nodeId:o})],{audio:{dialout:s}}=t;let a=s.find((e=>e.sequence===r));!a&&GA.includes(n)&&(a=s.find((e=>[W.Calling,W.Ringing,W.Accepted].includes(e.returnCode))));const u={code:n};if(a&&(Object.assign(u,{phoneNumber:a.phoneNumber,uuid:a.uuid}),o&&Object.assign(u,{userId:o})),Ga(Ci,u),n===W.Success){if(Ga(Ti),o&&Mu(t).findIndex((e=>e.userId===o))>-1){var d;const e=null===(d=t.audio.dialout.find((e=>e.sequence===r)))||void 0===d?void 0:d.phoneNumber;e&&(i.push(sf({userId:o,key:"phoneNumber",value:e})),Ga(Mo,[{userId:o,phoneNumber:e}]))}}else[W.Canceling,W.Canceled,W.CancelFailed].includes(n)?n===W.Canceled?Ga(Oi):n===W.CancelFailed&&Ga(Di):-1===[W.Calling,W.Ringing,W.Accepted,W.Success].indexOf(n)&&Ga(Ri);return Cr(i)}))),dialEpics1:(e,t)=>_v(e,4120).pipe(Oo(t),co((([e,t])=>t.audio.crcDevice.map((e=>e.sequence)).includes(e.payload.seq))),Gr((([e,t])=>{const{payload:{seq:r,body:{result:o,transID:n}}}=e,{audio:{crcDevice:i}}=t,s=[],a=i.find((e=>e.sequence===r));return a&&(Ga(Fi,{code:o,ip:a.ip,protocol:a.protocol,uuid:a.uuid}),s.push(TI({sequence:r,transID:n,result:o}))),o===Ne.Success?Ga(Wi):[Ne.Success,Ne.Ringing].includes(o)||Ga(xi),Cr(s)})))},JA={epics0:(e,t)=>_v(e,12033).pipe(Oo(t),Vr((([e,t])=>{const{participants:{allowTalkAttendeesList:r}}=t,o=e.payload.body;let n={};if(o){const e=Mu(t),i=Object.keys(o).map((e=>({key:e,userId:o[e]}))),s=i.map((e=>e.userId));kI(i,s,e),r.length>0&&s.length>0&&kI(i,s,r),n=i.reduce(((e,t)=>({...e,[`${t.key}`]:{userId:t.userId,displayName:t.displayName}})),{}),Ga(vi,Object.values(n))}return U_(n)}))),epics1:(e,t)=>_v(e,16135).pipe(Oo(t),Ro((([e,t])=>{const{payload:{body:{id:r,bLeadershipOn:o}}}=e,{audio:{bCanUnmute:n}}=t,i=Ru(t);if(i){const{isHost:e,bCoHost:t,userId:s,audio:a,muted:u}=i,d=e||t;o&&Ed(s,r)&&(null!==a&&""!==a&&!0!==u||!d&&!n||Ga(fi,V.Spotlight))}})),Gr((()=>nr))),epics2:(e,t)=>_v(e,12037).pipe(Oo(t),Ro((([,e])=>{const t=Ru(e);null!==(null==t?void 0:t.audio)&&""!==(null==t?void 0:t.audio)&&1==(null==t?void 0:t.muted)&&Ga(fi,V.Unmute)})),Gr((()=>nr))),epics3:(e,t)=>_v(e,Dv).pipe(co((e=>e.payload.body&&["bCanUnmute","bMutedAll","bMutedUponEntry"].some((t=>void 0!==e.payload.body[t])))),Gr((e=>{const{payload:{body:{bCanUnmute:r,bMutedAll:o,bMutedUponEntry:n}}}=e,i=[];if(void 0!==r&&i.push(V_(e.payload.body.bCanUnmute)),void 0!==o){const r=Ru(t.value);(null==r?void 0:r.audio)!==Ee.Computer&&(null==r?void 0:r.audio)!==Ee.Phone||0!=r.muted||e.payload.body.bMutedAll&&i.push(EI(B.PassiveByMuteAll))}return void 0!==n&&i.push(W_(e.payload.body.bMutedUponEntry)),Cr(i)}))),epics4:(e,t)=>_v(e,Ov).pipe(Oo(t),co((([,e])=>e.socket.zoomSocketStatus===M_.Connected)),Gr((([e,r])=>{const{payload:{body:{update:o}}}=e;if(null!=o&&o.some((e=>void 0!==e.audio||void 0!==e.muted))){const{meeting:{userId:e}}=r,n=o.filter((t=>t.id!==e)),i=o.filter((t=>t.id===e));if(n&&n.forEach((e=>{Ga(bi,e)})),i.length>0)return Pd(t).pipe(Gr((e=>{const{audio:{mutedSource:r,unmutedSource:o,isAllowToTalk:n,isSharingAudio:s,isAudioBridgeSignalReconnecting:a,leaveAudioSource:u,customizeAudioOption:{speakerOnly:d}}}=t.value,c=e;return Cr(i).pipe(O_((async e=>{const t=[];if(e.audio!==c.audio)if(""===e.audio)Ga(_i,{source:u}),t.push(AI(void 0));else if(e.audio===Ee.Computer){const e=pu(c.userRole)&&!n||!!d;s&&Ga(yi),e&&(Ga(yi),T.isIOSMobile&&t.push(fI(!0))),a&&(Ga(yi),t.push(yI(!1)))}else e.audio===Ee.Phone&&(c.audio===Ee.Computer&&(await $I.leaveComputerAudio(),t.push(AI(j.Pstn)),xI.joinOrLeaveVoip(!1)),Ga(Ei));if(""!==c.audio&&e.muted!==c.muted){if(e.muted!==c.muted)if(!0===e.muted){if(r!==B.Inherited){const e=null!=r?r:B.PassiveByMuteOne;Ga(Ii,{source:e})}c.audio===Ee.Computer&&$I.muteAudio()}else if(!1===e.muted){if(o!==H.Inherited){const e=null!=o?o:H.Passive;Ga(Ai,{source:e})}c.audio===Ee.Computer&&$I.unmuteAudio()}void 0!==e.muted&&t.push(EI(void 0),_I(void 0))}return t})))})))}return nr}))),epics5:(e,t)=>_v(e,12036).pipe(Oo(t),Gr((([e,t])=>{const r=Ru(t),{media:{audioEncodeStatus:o}}=t,{promoterID:n,bAllowTalk:i}=e.payload.body;if((null==r?void 0:r.userId)===n){if(Ga(ki,i),i)return"success"!==o&&$I.enableAudioEncode(),Md("audio",o,"success").pipe(Gr((e=>(e&&Ga(fi,V.AllowToTalk),nr))),Ao(j_(!0)));if(xI.mute(n,!0),(null==r?void 0:r.audio)===Ee.Computer)return $I.leaveComputerAudio(),oo(300).pipe(Ro((async()=>{(LI()?Mr(lo(eo(document,"click").pipe(go(1)),eo(document,"touchend").pipe(go(1)))):Promise.resolve(!0)).then((()=>{wI($I,t,!1)}))})),Gr((()=>nr)),Ao(j_(!1),EI(B.Inherited)))}return nr}))),epics6:e=>_v(e,8205).pipe(Ro((e=>{Ga("AUDIO_ALLOW_TO_TALK_RESPONSE",e.payload.body)})),Gr((()=>nr))),epics7:(e,t)=>Av(e,24597).pipe(Oo(t),Ro((([e,t])=>{const r=Ru(t);(null==r?void 0:r.audio)===Ee.Phone?xI.audioDrop(r.userId):(null==r?void 0:r.audio)===Ee.Computer&&e.payload.body.bPromote})),Gr((()=>nr))),epics8:(e,t)=>_v(e,12035).pipe(Oo(t),bo((([e,r])=>{const{meeting:{currentUserAudioBeforeReset:o,isCurrentUserMutedBeforeReset:n,userId:i}}=r,{payload:{body:{ssrc:s}}}=e,a=Pd(t).pipe(Gr((e=>{if(!(o!==Ee.Computer||null!=e&&e.audio)){const{encodeInitStatus:r,decodeInitStatus:o}=HI(t.value,e);return Md("audio",r,o).pipe(co((([e,t])=>e&&t)),Ro((()=>{(LI()?Mr(lo(eo(document,"click").pipe(go(1)),eo(document,"touchend").pipe(go(1)))):Promise.resolve(!0)).then((()=>{FI(xI,t.value),wI($I,t.value)}));const{audio:{locallyMutedAudioList:e,localUserAudioVolumeList:r,isStopAllImcomingAudio:o}}=t.value;e.length>0&&e.forEach((e=>{$I.muteOrUnmuteOtherAudio(e,!0)})),r.length>0&&r.forEach((e=>{$I.adjustOtherAudioVolume(e.userId,e.volume)})),o&&$I.stopAllIncomingAudio(!0)})),Vr((()=>oS(void 0))))}return o===Ee.Phone?(n&&xI.mute(i,!0),Cr([oS(void 0),nS(void 0)])):nr})));return Ga(Bi,s),io(Tr(F_(s)),a)}))),epics9:(e,t)=>_v(e,7952).pipe(bo((e=>Ja(Ei,1).pipe(Oo(t),Ro((([,t])=>{const{BindStatus:r,nOperatorUserId:o}=e.payload.body,n=t.participants.attendeesList.find((e=>e.userId===o));!0===r&&Ga(wi,{operatorName:null==n?void 0:n.displayName,operatorUserId:o,operatorRole:null==n?void 0:n.userRole})})),Gr((()=>nr)))))),epics10:(e,t)=>Cv(e,k.UserGrantCaptureAudio).pipe(Oo(t),Gr((([e,t])=>{const r=Ru(t);var o;(o=r,(null==o?void 0:o.audio)===Ee.Computer?Promise.resolve():Ka({event:wo,operations:[co((e=>void 0!==e.audio&&""!==e.audio)),go(1)]},(({audio:e})=>e===Ee.Phone||e===Ee.Computer))).then((()=>{Ga(yi)}));const{meeting:{isCurrentUserMutedBeforeReset:n},audio:{isAllowToTalk:i,activeMicrophone:s,isUsingMediaPlayback:a}}=t,{payload:{data:u}}=e,d=[x_(!0)];return r&&(!0===r.muted&&!1===i&&(d.push(EI(B.Inherited)),xI.mute(r.userId,!0)),(!0===n||jI(t))&&(d.push(EI(B.Inherited)),xI.mute(r.userId,!0)),void 0!==n&&d.push(nS(void 0)),!a&&u&&s!==u&&d.push(K_(u))),Cr(d)}))),epics11:e=>Cv(e,k.AudioCaptureFailed).pipe(Ro((e=>{const{payload:{data:t}}=e;Ga(Ni,t)})),Vr((()=>$_(!0)))),epics12:e=>Cv(e,k.AudioWebsocketBroken).pipe(Ro((()=>{Ga(Mi)})),Gr((()=>nr))),epics13:(e,t)=>Cv(e,k.AudioZeroData).pipe(Oo(t),T_((([,e])=>{const{audio:{webrtcRestartCount:t,activeMicrophone:r}}=e;if(t<3)return $I.restoreWebRTC(r),G_(t+1)}))),epics14:(e,t)=>e.pipe(HS(`${Q_}`),co((e=>!1===e.payload)),Gr((()=>(Ga(Pi),Yd().pipe(Ro((()=>{FI(xI,t.value),wI($I,t.value)})),Vr((()=>Q_(!0)))))))),epics15:(e,t)=>Cv(e,[k.JoinComputerAudioComplete,k.JoinSharingAudioComplete,k.LeaveComputerAudioComplete,k.LeaveSharingAudioComplete]).pipe(Ro((e=>{jd.completeAudioAction();const{payload:{type:r}}=e;if(r===k.JoinComputerAudioComplete){const e=Ru(t.value);(null==e?void 0:e.audio)===Ee.Computer&&(e.muted?$I.muteAudio():$I.unmuteAudio());const r=Mu(t.value).filter((t=>!!t.audioShare&&t.userId!==(null==e?void 0:e.userId)));r.length&&r.forEach((e=>{$I.setSharingAudioVolume(e.userId,!1,!1,!0)}))}})),Gr((()=>nr))),epics16:(e,t)=>Cv(e,k.AudioQosData).pipe(Oo(t),Vr((([e,t])=>{var r,o;const{meeting:{isWebinar:n},media:{audioEncodeStatus:i,audioDecodeStatus:s},participants:{xmppAttendeeList:a,allowTalkAttendeesList:u}}=t,d=Ru(t),c=Uu(t);let l=c.length>0,p=c.some(GI);n&&(l=l||Boolean(a.length),p=p||u.some(GI));const h=(null==d?void 0:d.audio)===Ee.Computer&&"success"===i&&!(null!=d&&d.muted)&&(l||(null===(r=t.recording)||void 0===r?void 0:r.cmrStatus)===En.Start),m=(null==d?void 0:d.audio)===Ee.Computer&&"success"===s&&l&&p;return null!==(o=e.payload.data)&&void 0!==o&&o.encoding?h?(Ga(Vi,e.payload),aI(e.payload)):aI(le):m?(Ga(Vi,e.payload),uI(e.payload)):uI(le)}))),epics17:(e,t)=>_v(e,Ov).pipe(Oo(t),co((([e,t])=>{const{payload:{body:r}}=e,{audio:{locallyMutedAudioList:o,localUserAudioVolumeList:n}}=t;return(o.length>0||n.length>0)&&(null==r?void 0:r.remove)&&r.remove.length>0})),Gr((([e,t])=>{const{payload:{body:{remove:r}}}=e,{audio:{locallyMutedAudioList:o,localUserAudioVolumeList:n}}=t,i=o.concat(n.map((e=>e.userId))).filter((e=>-1!==r.indexOf((t=>t.id===e))));return i.length>0?(i.forEach((e=>{$I.muteOrUnmuteOtherAudio(e,!1)})),Cr(i.map((e=>[cI(e),pI({userId:e})])).flat())):nr}))),epics18:(e,t)=>Cv(e,k.HidStatusMute).pipe(Gr((e=>{const{payload:{data:r}}=e,o=t.value,{meeting:{userId:n,mediaFeatureOptions:i},audio:{isShareAudioEnabled:s,bCanUnmute:a}}=o,u=[];if(r)s&&!Fu.isSupportOpenMicWhenShareAudio(i||"")&&u.push(eI(!0)),u.push(EI(B.Active)),xI.mute(n,!0);else if(!s||Fu.isSupportOpenMicWhenShareAudio(i||"")){s&&u.push(eI(!1));const e=Ru(o);(a||null!=e&&e.isHost||null!=e&&e.bCoHost)&&(u.push(_I(H.Active)),xI.mute(n,!1))}return Cr(u)}))),epics19:e=>_v(e,12040).pipe(Ro((e=>{const{payload:{body:{mode:t}}}=e;$I.setAudioCodecMode(t)})),Gr((()=>nr))),epics20:(e,t)=>Cv(e,[k.AudioSpeakerSetSuccess,k.JoinComputerAudioComplete,k.AudioSpeakerSetError]).pipe(Gr((e=>{const{payload:{data:r,type:o}}=e,{audio:{activeSpeaker:n,activeMicrophone:i,isUsingMediaPlayback:s}}=t.value,a=[];return o===k.AudioSpeakerSetSuccess&&n!==r?a.push(J_(r)):!s&&o===k.JoinComputerAudioComplete&&null!=r&&r.microphoneDeviceId&&i!==r.microphoneDeviceId&&a.push(K_(r.microphoneDeviceId)),o===k.AudioSpeakerSetSuccess?Ga(Hi,!0):o===k.AudioSpeakerSetError&&Ga(Hi,!1),Cr(a)}))),epics21:(e,t)=>Cv(e,k.AudioLevelIndicator).pipe(co((()=>{const e=Ru(t.value);return!!e&&e.audio===Ee.Computer&&!e.muted})),Ro((e=>{const{payload:{data:t}}=e;Ga($i,{level:t.value})})),Gr((()=>nr))),epics22:(e,t)=>Cv(e,k.WorkletProcessExceptions).pipe(co((e=>!!e.payload.data)),Gr((()=>{const e=Ru(t.value),r=[];return(null==e?void 0:e.audio)===Ee.Computer&&($I.leaveComputerAudio(),xI.joinOrLeaveVoip(!1),r.push(AI(j.EndedBySystem)),r.push(G_(0))),Cr(r)}))),epics23:(e,t)=>Cv(e,k.RecaptureAudio).pipe(co((()=>{const e=Ru(t.value);return(null==e?void 0:e.audio)===Ee.Computer&&!t.value.audio.isUsingMediaPlayback})),Gr((()=>(Zd($I,t.value),nr)))),epics24:(e,t)=>Cv(e,k.SpeakingWhenMute).pipe(co((()=>{const e=Ru(t.value);return(null==e?void 0:e.audio)===Ee.Computer&&!!e.muted})),Ro((()=>{Ga(Gi)})),So())},QA=Ev(JA,{shareAudioEpics0:(e,t)=>bv(e,Ov).pipe(co((e=>{const t=e.payload.body.update;return t&&t.length>0&&t.findIndex((e=>void 0!==e.bShareOn))>-1})),Oo(t),Gr((([e,t])=>{const{payload:{body:{update:r}}}=e,{audio:{localShareAudioUserMutedList:o}}=t,n=r.filter((e=>!0===e.bShareOn&&!0===e.bShareAudioOn)),i=[];return n.length>0&&n.forEach((e=>{-1===o.findIndex((t=>t.userId===e.id))&&i.push(tI({userId:e.id,isFromMainSession:!!e.bShareToBORooms}))})),Cr(i)}))),shareAudioEpics1:(e,t)=>Cv(e,k.SharingDesktopStreamHaveAudio).pipe(co((()=>!t.value.audio.secondaryAudioMicrophoneId)),bo((()=>_v(e,Ov).pipe(co((e=>{var r;const{payload:{body:o}}=e,{meeting:{userId:n}}=t.value;return(null==o||null===(r=o.update)||void 0===r?void 0:r.findIndex((e=>e.id===n&&!0===e.bShareOn)))>-1})),go(1),O_((async()=>{const e=t.value;return await PI(WA,FA,e)})),Ao(nI(!0)))))),shareAudioEpics2:(e,t)=>Cv(e,k.SharingDesktopStreamHaveNoAudio).pipe(Oo(t),co((([,e])=>{var t;return!0===(null===(t=e.audio)||void 0===t?void 0:t.isShareAudioEnabled)})),O_((async([,e])=>await MI(WA,FA,e)))),shareAudioEpics3:(e,t)=>_v(e,Ov).pipe(Oo(t),co((([,e])=>e.socket.zoomSocketStatus===M_.Connected&&!0===e.audio.isSharingAudio&&!Fu.isSupportOpenMicWhenShareAudio(e.meeting.mediaFeatureOptions||""))),Gr((([e,r])=>{var o;if(null!==(o=e.payload.body.update)&&void 0!==o&&o.some((e=>void 0!==e.audio||void 0!==e.muted))){const{meeting:{userId:o}}=r,n=e.payload.body.update.filter((e=>e.id===o));return Pd(t).pipe(Gr((e=>{const t=[];return n.findIndex((e=>e.audio===Ee.Computer))>-1&&(null==e?void 0:e.audio)!==Ee.Computer&&(FA.mute(o,!0),t.push(oI(!0)),t.push(eI(!0)),t.push(EI(B.SharingAudio))),Cr(t)})))}return nr}))),shareAudioEpics4:(e,t)=>e.pipe(HS(`${ZI}`),Ir(er),Oo(t),co((([,e])=>{var t;return!0===(null===(t=e.audio)||void 0===t?void 0:t.isShareAudioEnabled)})),O_((async([e,t])=>{const{payload:r}=e,{audio:{isShareAudioMuted:o,isSharingAudio:n}}=t,i=[];if(r===q.End){const e=await MI(WA,FA,t);i.push(...e)}else if(r===q.Paused){if(!1===o&&!0===n){await WA.leaveSharingAudio(!0),i.push(sI(!1));const e=await NI(FA,t);i.push(...e),setTimeout((()=>{Ga(Ui,{state:"off"})}),0)}}else if(r===q.Sharing&&!1===o&&!1===n){const e=await PI(WA,FA,t);i.push(...e)}return i}))),shareAudioEpics5:(e,t)=>Cv(e,k.SharingDesktopStreamHaveAudio).pipe(co((()=>!!t.value.audio.secondaryAudioMicrophoneId)),Ro((()=>{const{audio:{audioSsrc:e,secondaryAudioMicrophoneId:r,isWebRtcAudioCapable:o}}=t.value;WA.joinSharingAudio({ssrc:e,microphoneDeviceId:r,speakerDeviceId:null,isCaptureAudio:!0,audioBridge:o}),Ga(ji)})),Gr((()=>nr))),shareAudioEpics6:(e,t)=>_v(e,Ov).pipe(co((e=>{const{payload:{body:t}}=e;return!!t.update&&t.update.some((e=>void 0!==e.audioShare))})),Gr((e=>{const{meeting:{userId:r}}=t.value;return e.payload.body.update.filter((e=>void 0!==e.audioShare&&e.id!==r)).forEach((e=>{WA.setSharingAudioVolume(e.id,!e.audioShare,!1,!0)})),nr})))},{audioBridgEpics0:e=>_v(e,4299).pipe(Ro((e=>{const{payload:t}=e;$A.passThroughRWGMessage(t)})),So()),audioBridgEpics1:e=>Cv(e,k.AudioBridgeReconnectStart).pipe(Gr((()=>(xA.joinOrLeaveVoip(!1),Cr([yI(!0),AI(j.Failover)]))))),audioBridgEpics2:(e,t)=>_v(e,Ov).pipe(co((e=>{var r,o;return t.value.audio.isWebRtcAudioCapable&&((null===(r=e.payload.body.update)||void 0===r?void 0:r.some((e=>void 0!==e.muted)))||(null===(o=e.payload.body.remove)||void 0===o?void 0:o.length)>0)})),Ro((e=>{const{payload:{body:{update:t,remove:r}}}=e;$A.sendUserAudioStatus({update:(t||[]).filter((e=>void 0!==e.muted)).map((e=>({userId:e.id,muted:e.muted}))),remove:(r||[]).map((e=>({userId:e.id})))})})),So()),audioBridgEpics3:(e,t)=>_v(e,16129).pipe(co((e=>{const{payload:{body:{bVideoOn:r}}}=e,{audio:{isWebRtcAudioCapable:o}}=t.value;return o&&!!r})),Ro((e=>{const{payload:{body:{id:t}}}=e;$A.changeActiveVideoSsrc(t)})),Gr((()=>nr))),audioBridgEpics4:(e,t)=>Cv(e,k.AudioStreamFailed).pipe(Gr((e=>{const{payload:{data:r}}=e,o=Ru(t.value),n=[];return(null==o?void 0:o.audio)===Ee.Computer&&($A.leaveComputerAudio(),LI()||T.isIOSMobile||r===Me.PermissionReset?(xA.joinOrLeaveVoip(!1),n.push(AI(j.EndedBySystem)),n.push(G_(0))):wI($A,t.value)),Cr(n)}))),audioBridgEpics5:(e,t)=>Cv(e,k.AudioBridgeSocketConnectionError).pipe(Gr((()=>{const e=Ru(t.value),r=[];return(null==e?void 0:e.audio)===Ee.Computer&&($A.leaveComputerAudio(),xA.joinOrLeaveVoip(!1),r.push(AI(j.EndedBySystem)),r.push(G_(0))),Cr(r)}))),audioBridgEpics6:(e,t)=>e.pipe(HS(`${Yl}`),co((()=>!!t.value.meeting.zlkJwtToken)),Vr((e=>{const r=e.payload,{meeting:{zlkJwtToken:o,mediaFeatureOptions:n,meetingId:i}}=t.value;let s;if(o){const{enforce_web_rtc_audio:e,audio_compatible_mode:t,audio_webrtc_mode:r}=bd(o);void 0===e&&void 0===t&&void 0===r||(s=Number(void 0!==r?r:void 0!==t?t:e))}const a=1===by.get(Cy.VideoSDKWebRTCAudioFallbackWasm),u=Fu.getWebRtcAudioMode(null!=n?n:"",i,s,r);return RI({isWebRtcAudioCapable:!a&&!!(u&ke.WebRTCAudio),webRtcAudioMode:u})})))},KA),YA=__.createAgent(),ZA=ME(Fu.getInstance()),XA=__.createAgent(),eb=ME(Fu.getInstance()),tb=__.createAgent(),rb=ME(Fu.getInstance()),ob={isWebrtcVideoCapable:!1,videoSsrc:0,cameraDevicesList:[],activeCamera:T.isAndroidOrIOSBrowser?re.User:"default",activeVideoId:0,isCurrentUserStartedVideo:!1,spotlightUserList:[],isCaptureForbidden:!1,isMirrored:!1,receivedVideoMaxQuality:navigator.hardwareConcurrency>=8?K.Video_1080P:K.Video_360P,subscribedVideoList:[],renderedVideoList:[],ensuredCanvas:[],isVideoMuted:!1,isCaptureCameraLoading:!1,isCameraTaken:!1,isUsingMediaPlayback:!1,receivedVideoDimension:{width:0,height:0},capturedVideoDimension:{width:0,height:0},isFollowHostVideoLayout:!1,hostDragLayout:[],isSupportHDVideo:!1,miniRwgOptionValue:0,bCanUnmuteVideo:!1,virtualBackground:{isVBConfigured:!1,isVBPreloadReady:void 0,imageSrc:void 0,cropped:void 0},mask:{imageSrc:void 0,cropped:void 0,clip:void 0},backgroundMode:ye.Null,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0}},hardwareAcceleration:{encode:void 0,decode:void 0},networkQuality:{},ptz:{},currentCameraControlStatus:{isRequested:!1,isInControl:!1,isCameraMoving:!1},farEndCameraControlStatus:{controlledUserList:[],isControlling:!1},subscriptionStatus:{encode:!1,decode:!1,detailed:!1},videoAttachments:{},rendererType:De.WebGL,selfPreviewVideoList:[],webrtcStatistic:{}},nb=qc({[`${Jc}`]:ay(((e,{payload:t})=>{e.videoSsrc=t})),[`${Yc}`]:ay(((e,{payload:t})=>{e.cameraDevicesList=t})),[`${Zc}`]:ay(((e,{payload:t})=>{const r=e.activeCamera;if(r in e.ptz){const t=e.ptz[r];["pan","tilt","zoom"].forEach((e=>{t[e]&&(t[e].value=0)}))}e.activeCamera=t})),[`${Qc}`]:ay(((e,{payload:t})=>{e.activeVideoId=t.userId})),[`${Xc}`]:ay(((e,{payload:t})=>{e.isCurrentUserStartedVideo=t})),[`${el}`]:ay(((e,{payload:t})=>{e.spotlightUserList=t})),[`${tl}`]:ay(((e,{payload:t})=>{e.isCaptureForbidden=t})),[`${rl}`]:ay(((e,{payload:t})=>{e.receivedVideoMaxQuality=t})),[`${ol}`]:ay(((e,{payload:t})=>{e.isVideoMuted=t})),[`${nl}`]:ay(((e,{payload:t})=>{e.isCaptureCameraLoading=t})),[`${il}`]:ay(((e,{payload:t})=>{e.isCameraTaken=t})),[`${al}`]:ay(((e,{payload:t})=>{e.receivedVideoDimension=t})),[`${ul}`]:ay(((e,{payload:t})=>{e.subscribedVideoList.includes(t)||e.subscribedVideoList.push(t)})),[`${dl}`]:ay(((e,{payload:t})=>{const r=e.subscribedVideoList.indexOf(t);r>=0&&e.subscribedVideoList.splice(r,1)})),[`${pl}`]:ay(((e,{payload:t})=>{const r=e.renderedVideoList.find((e=>e.userId===t.userId&&e.key===t.key&&e.canvasId===t.canvasId));r?(void 0!==t.videoQuality&&(r.videoQuality=t.videoQuality),void 0!==t.aspectRatio&&(r.aspectRatio=t.aspectRatio)):e.renderedVideoList.push({...t})})),[`${hl}`]:ay(((e,{payload:t})=>{const r=e.renderedVideoList.findIndex((e=>e.userId===t.userId&&e.key===t.key&&e.canvasId===t.canvasId));r>=0&&e.renderedVideoList.splice(r,1)})),[`${cl}`]:ay(((e,{payload:t})=>{e.isFollowHostVideoLayout=t})),[`${ll}`]:ay(((e,{payload:t})=>{e.hostDragLayout=t})),[`${ml}`]:ay(((e,{payload:t})=>{e.isSupportHDVideo=t})),[`${gl}`]:ay(((e,{payload:t})=>{e.bCanUnmuteVideo=t})),[`${Sl}`]:ay(((e,{payload:t})=>{e.virtualBackground.isVBPreloadReady=t})),[`${vl}`]:ay(((e,{payload:t})=>{e.virtualBackground.isVBConfigured=t})),[`${fl}`]:ay(((e,{payload:t})=>{e.virtualBackground.imageSrc=t.imageUrl,e.virtualBackground.cropped=t.cropped,void 0===t.imageUrl?e.backgroundMode=ye.Null:e.backgroundMode=ye.VirtualBackground})),[`${_l}`]:ay(((e,{payload:t})=>{const{encode:r,decode:o}=t;void 0!==r&&(e.hardwareAcceleration.encode=r),void 0!==o&&(e.hardwareAcceleration.decode=o)})),[`${yl}`]:ay(((e,{payload:t})=>{const{data:{encoding:r,rate:o,...n}}=t;e.statistic.encode={bitrate:o,...n}})),[`${El}`]:ay(((e,{payload:t})=>{const{data:{encoding:r,rate:o,...n}}=t;e.statistic.decode={bitrate:o,...n}})),[`${Il}`]:ay(((e,{payload:t})=>{const{cameraId:r,captureWidth:o,captureHeight:n,videoElement:i,originalRatio:s,ptz:a,hd:u,fullHd:d,mediaFile:c,fps:l,mirrored:p,customVideoConstraints:h}=t;e.activeCamera=r,e.customizedVideoOption={captureWidth:o,captureHeight:n,videoElement:i,originalRatio:s,ptz:a,hd:u,fullHd:d,fps:l,customVideoConstraints:h},yd(e.mediaPlaybackFile,c)||(e.mediaPlaybackFile=c,e.isUsingMediaPlayback=!(null==c||!c.url)),void 0!==p&&(e.isMirrored=!!p)})),[`${Al}`]:ay(((e,{payload:t})=>{const{userId:r,level:o,bwLevel:n,type:i}=t;if(Object.prototype.hasOwnProperty.call(e.networkQuality,`${r}`))e.networkQuality[`${r}`][`${i}`]={level:o,bwLevel:n};else{const t={[i]:{level:o,bwLevel:n}};Object.assign(e.networkQuality,{[`${r}`]:t})}})),[`${bl}`]:ay(((e,{payload:t})=>{const{deviceId:r,ptzRange:o}=t;if(Object.prototype.hasOwnProperty.call(e.ptz,r)){const t=e.ptz[r];t&&["pan","tilt","zoom"].forEach((e=>{const r=o[e];if(r){var n;const o=null===(n=t[e])||void 0===n?void 0:n.capability;o?Object.assign(o,{...r}):t[e]={capability:{...r},value:0}}}))}else Object.assign(e.ptz,{[r]:{pan:o.pan?{capability:{...o.pan},value:0}:null,tilt:o.tilt?{capability:{...o.tilt},value:0}:null,zoom:o.zoom?{capability:{...o.zoom},value:0}:null}})})),[`${Cl}`]:ay(((e,{payload:t})=>{e.currentCameraControlStatus.isRequested=t})),[`${Tl}`]:ay(((e,{payload:t})=>{const{isInControl:r,userId:o}=t;e.currentCameraControlStatus.isInControl=r,e.currentCameraControlStatus.controllingUserId=o})),[`${Rl}`]:ay(((e,{payload:t})=>{e.farEndCameraControlStatus.controlledUserList.includes(t)||e.farEndCameraControlStatus.controlledUserList.push(t)})),[`${Ol}`]:ay(((e,{payload:t})=>{const r=e.farEndCameraControlStatus.controlledUserList.indexOf(t);-1!==r&&e.farEndCameraControlStatus.controlledUserList.splice(r,1)})),[`${Dl}`]:ay(((e,{payload:t})=>{e.currentCameraControlStatus.isCameraMoving="start"===t.cmd})),[`${wl}`]:ay(((e,{payload:t})=>{const{constraints:r,deviceId:o}=t,n=e.ptz[o];["pan","tilt","zoom"].forEach((e=>{void 0!==r[e]&&(n[e].value=r[e])}))})),[`${Nl}`]:ay(((e,{payload:t})=>{e.farEndCameraControlStatus.isControlling=t})),[`${Ml}`]:ay(((e,{payload:t})=>{e.networkQualityBroadcastTime=t})),[`${Pl}`]:ay(((e,{payload:t})=>{e.mask.isMaskConfigured=t})),[`${kl}`]:ay(((e,{payload:t})=>{const{imageUrl:r,cropped:o,rootHeight:n,rootWidth:i,clip:s}=t;e.mask.imageSrc=r,e.mask.cropped=o,e.mask.clip=s,e.mask.rootWidth=i,e.mask.rootHeight=n,e.backgroundMode=ye.Mask})),[`${Ll}`]:ay(((e,{payload:t})=>{e.backgroundMode=t})),[`${Ul}`]:ay(((e,{payload:t})=>{e.capturedVideoDimension=t})),[`${Vl}`]:ay(((e,{payload:t})=>{e.ensuredCanvas.includes(t)||e.ensuredCanvas.push(t)})),[`${Bl}`]:ay(((e,{payload:t})=>{e.mediaPlaybackFile=t,e.isUsingMediaPlayback=!(null==t||!t.url)})),[`${Hl}`]:ay(((e,{payload:t})=>{if(t){const{lastCopy:r,...o}=t;e.prefetchedVideo=o}else e.prefetchedVideo=t})),[`${jl}`]:ay(((e,{payload:t})=>{Object.assign(e.subscriptionStatus,t)})),[`${Fl}`]:ay(((e,{payload:t})=>{e.miniRwgOptionValue=t})),[`${Wl}`]:ay(((e,{payload:t})=>{const{userId:r,element:o}=t,n=ic(o),i=e.videoAttachments[`${r}`];if(i){const e=gf(i),t=null==e?void 0:e.findIndex((e=>dc(e,o)));-1!==t&&void 0!==t||i.push(n)}else{const t=[n];Object.assign(e.videoAttachments,{[`${r}`]:t})}})),[`${xl}`]:ay(((e,{payload:t})=>{const{userId:r,element:o}=t,n=e.videoAttachments[`${r}`];if(!n)return;let i=o;if(Array.isArray(o)||(i=[o]),i.forEach((e=>{if(n){const t=gf(n),r=null==t?void 0:t.findIndex((t=>dc(t,e)));void 0!==r&&-1!==r&&n.splice(r,1)}})),n&&n.length>0){const t=uc(gf(n)||[]);e.videoAttachments[`${r}`]=t}})),[`${$l}`]:ay(((e,{payload:t})=>{t&&(e.rendererType=De.WebGL2)})),[`${Gl}`]:ay(((e,{payload:t})=>{t&&(e.rendererType=De.WebGPU)})),[`${zl}`]:ay(((e,{payload:t})=>{e.rendererType=t})),[`${ql}`]:ay(((e,{payload:t})=>{e.isMirrored=t})),[`${Kl}`]:ay(((e,{payload:t})=>{e.selfPreviewVideoList.includes(t)||e.selfPreviewVideoList.push(t)})),[`${Jl}`]:ay(((e,{payload:t})=>{if(t){const r=e.selfPreviewVideoList.indexOf(t);r>=0&&e.selfPreviewVideoList.splice(r,1)}else e.selfPreviewVideoList=[]})),[`${Ql}`]:ay(((e,{payload:t})=>{e.leadershipUserId=t})),[`${Yl}`]:ay(((e,{payload:t})=>{e.isWebrtcVideoCapable=t})),[`${Zl}`]:ay((e=>{var t;null!==(t=e.customizedVideoOption)&&void 0!==t&&t.customVideoConstraints&&(e.customizedVideoOption.customVideoConstraints=void 0)})),[`${Xl}`]:ay(((e,{payload:t})=>{e.webrtcStatisticSubscription=t})),[`${ep}`]:ay(((e,{payload:t})=>{e.webrtcStatistic=t})),[`${sl}`]:(e,{payload:t})=>{const r={cameraDevicesList:e.cameraDevicesList};return t&&Object.assign(r,{activeCamera:e.activeCamera,customizedVideoOption:e.customizedVideoOption,virtualBackground:{imageSrc:e.virtualBackground.imageSrc,cropped:e.virtualBackground.cropped},mask:{imageSrc:e.mask.imageSrc,cropped:e.mask.cropped,rootWidth:e.mask.rootWidth,rootHeight:e.mask.rootHeight,clip:e.mask.clip},backgroundMode:e.backgroundMode,ptz:e.ptz,subscriptionStatus:e.subscriptionStatus,webrtcStatisticSubscription:e.webrtcStatisticSubscription,hardwareAcceleration:e.hardwareAcceleration}),{...ob,...r}}},ob),ib={cameraPtzEpics0:(e,t)=>_v(e,8004).pipe(Gr((e=>{const{payload:{body:{nCmd:r,nUserID:o,nReason:n,nButtonID:i}}}=e,s=t.value,a=Mu(s),{video:{currentCameraControlStatus:{isInControl:u,controllingUserId:d},cameraDevicesList:c,activeCamera:l}}=s,p=a.find((e=>Ed(e.userId,o))),h=[];if(h.push(Cl(!0)),r===he.Request){const e={userId:null==p?void 0:p.userId,displayName:null==p?void 0:p.displayName};if(u){const t=a.find((e=>e.userId===d));Object.assign(e,{currentControllingUserId:null==t?void 0:t.userId,currentControllingDisplayName:null==t?void 0:t.displayName})}Ga(ti,e)}else if(r===he.Approve)h.push(Rl(null==p?void 0:p.userId)),Ga(ri,{isApproved:!0,userId:null==p?void 0:p.userId,displayName:null==p?void 0:p.displayName});else if(r===he.Decline)h.push(Ol(null==p?void 0:p.userId)),Ga(ri,{isApproved:!1,userId:null==p?void 0:p.userId,displayName:null==p?void 0:p.displayName,reason:n});else if(r===he.GiveUp)h.push(Tl({isInControl:!1,userId:0})),Ga(oi,{isControlled:!1});else if(r===he.StartControl||r===he.StopControl)h.push(Dl({cmd:r===he.StartControl?"start":"stop",type:i}));else if(r===he.SwitchCamera){const e=c.findIndex((e=>e.deviceId===l)),t=e+1===c.length?0:e+1;if(t!==e){const e=c[t].deviceId;rb.changeCamera(e,oe.includes(e))}}return Cr(h)}))),cameraPtzEpics1:(e,t)=>_v(e,Ov).pipe(co((e=>{var t;const{payload:{body:r}}=e;return null==r||null===(t=r.update)||void 0===t?void 0:t.some((e=>void 0!==e.nFECC||void 0!==e.nFECCExecutive))})),Vr((e=>uf(e.payload.body))),Ro((e=>{const{update:r}=e,o=null==r?void 0:r.find((e=>void 0!==e.nFECC||void 0!==e.nFECCExecutive));if(o){const{meeting:{userId:e}}=t.value;Ed(o.nFECCExecutive,e)&&Ga(ni,{userId:o.userId,ptz:Am(o.nFECC)})}})),Gr((()=>nr))),cameraPtzEpics2:(e,t)=>_v(e,Ov).pipe(co((e=>{var r;const{payload:{body:o}}=e,{video:{farEndCameraControlStatus:{controlledUserList:n}}}=t.value;return null==o||null===(r=o.remove)||void 0===r?void 0:r.some((e=>n.includes(e.id)))})),Vr((e=>uf(e.payload.body))),Gr((e=>{const{remove:r}=e,o=[],{video:{farEndCameraControlStatus:{controlledUserList:n}}}=t.value,i=null==r?void 0:r.find((e=>n.includes(e.userId)));return i&&o.push(Ol(i.userId)),Cr(o)}))),cameraPtzEpics3:(e,t)=>e.pipe(HS(`${Dl}`),bo((e=>{const{payload:{cmd:r,type:o}}=e;return"start"===r?oo(0,200).pipe(To((()=>!!t.value.video.currentCameraControlStatus.isCameraMoving)),Gr((()=>{const{video:{ptz:e,activeCamera:r}}=t.value,n=e[r],i=Im(n)||{},{key:s,range:a}=_m(o,2);return n[s]?(Object.assign(i,{[s]:Em(n[s].capability,n[s].value,a)}),rb.movePTZCamera(i).then((()=>wl({deviceId:r,constraints:i})))):Promise.resolve(void 0)})),Gr((e=>"object"==typeof e&&void 0!==e.type?Tr(e):nr))):nr}))),cameraPtzEpics4:(e,t)=>e.pipe(HS(`${Zc}`),Gr((e=>{const{payload:r}=e,{video:{customizedVideoOption:o,ptz:n}}=t.value;if(null!=o&&o.ptz){const e=null==n?void 0:n[r];void 0!==e&&tb.sendCameraAblity({pan:!!e.pan,tilt:!!e.tilt,zoom:!!e.zoom})}return nr})))},sb={videoCaptureEpics0:(e,t)=>Cv(e,k.StartVideoCaptureSuccess).pipe(O_((async e=>{const{video:{activeCamera:r,ptz:o,isCurrentUserStartedVideo:n,isUsingMediaPlayback:i},meeting:{userId:s}}=t.value,{payload:{data:{currentDeviceID:a,PTZRange:u,VideoSelectValue:d,usingFacingMode:c}}}=e,l=[],{cameras:p}=await Mr(kd());if(p.length<1&&!i&&(Ga(Vn,{reason:"Cannot detect camera devices"}),eb.stopCaptureVideo()),i||[r,a].some((e=>vm(e,p)))){let e="";if(e=c?Array.isArray(d)&&d[0]?d[0]:d:a,n||XA.muteAttendeeVideo(s,!1),Ga(si),i)l.push(Zc("default"));else if(e&&u&&l.push(bl({deviceId:e,ptzRange:u})),r!==e&&l.push(Zc(e)),Object.prototype.hasOwnProperty.call(o,e)){const t=o[e];if(t){const e=Im(t);e&&eb.movePTZCamera(e)}}}else Ga(Bn,{reason:"cannot find target camera"}),eb.stopCaptureVideo();return l}))),videoCaptureEpics1:(e,t)=>_v(e,Ov).pipe(co((e=>{const{payload:{body:{update:r}}}=e,{meeting:{userId:o}}=t.value;return null==r?void 0:r.some((e=>e.id===o&&void 0!==e.bVideoOn))})),Vr((e=>uf(e.payload.body))),Gr((e=>{const{update:r}=e,{meeting:{userId:o}}=t.value,n=null==r?void 0:r.find((e=>e.userId===o));return n?(!0===n.bVideoOn?Ga(xn):Ga($n),Cr([Xc(!!n.bVideoOn)])):nr}))),videoCaptureEpics2:e=>Cv(e,[k.UserForbiddedCaptureVideo,k.UserCameraIsTakenByOtherPrograms,k.VideoWebsocketBroken,k.StopVideoCaptureFailed]).pipe(Gr((e=>{const{payload:{type:t,data:r}}=e,o=[];switch(t){case k.UserForbiddedCaptureVideo:Ga(Hn,r),o.push(tl(!0));break;case k.UserCameraIsTakenByOtherPrograms:Ga(jn,{reason:"User camera is taken by other programs.",...null!=r?r:{}}),o.push(il(!0));break;case k.VideoWebsocketBroken:Ga(Wn,{reason:"Video websocket broken."});break;case k.StopVideoCaptureFailed:Ga($n,{failed:!0,reason:"Unknown."})}return Cr(o)}))),videoCaptureEpics3:(e,t)=>Cv(e,k.StopVideoCaptureSuccess).pipe(Oo(t),Vr((([,e])=>{const{meeting:{userId:t},video:{isCurrentUserStartedVideo:r}}=e;return r||Ga($n),XA.muteAttendeeVideo(t,!0),nl(!1)}))),videoCaptureEpics4:(e,t)=>_v(e,16133).pipe(Oo(t),co((([e,t])=>{var r;return(null==e||null===(r=e.payload)||void 0===r||null===(r=r.body)||void 0===r?void 0:r.id)===t.meeting.userId})),T_((([e])=>{const{id:t,bVideoMute:r}=e.payload.body;return Ga(Pn,{id:t,isVideoMuted:r}),!0===r&&eb.stopCaptureVideo(),!1===r&&Ga(Ln,{id:t,isVideoMuted:r}),ol(r)}))),videoCaptureEpics5:(e,t)=>_v(e,16131).pipe(co((e=>void 0!==e.payload.body.ssrc)),bo((e=>{const{payload:{body:{ssrc:r}}}=e;return Ga(ui,r),io(Tr(Jc(r)),Pd(t).pipe(Gr((e=>{const{meeting:{isCurrentUserStartVideoBeforeReset:r},media:{videoEncodeStatus:o}}=t.value;return!0!==(null==e?void 0:e.bVideoOn)&&!0===r?Md("video",o,"success").pipe(co((([e,t])=>e&&t)),Vr((()=>{const e=t.value,{video:{backgroundMode:r,mask:o,virtualBackground:n,activeCamera:i,customizedVideoOption:s}}=e;let a=Promise.resolve(!0);return r===ye.VirtualBackground&&n.imageSrc?a=Lm({imageUrl:n.imageSrc,cropped:n.cropped},eb,e):r===ye.Mask&&o.imageSrc&&o.clip&&(a=km({imageUrl:o.imageSrc,cropped:o.cropped,clip:o.clip,rootHeight:o.rootHeight,rootWidth:o.rootWidth},eb,e)),a.then((()=>{ym(eb,e,{cameraId:i,...s})})),aS(void 0)}))):nr}))))}))),videoCaptureEpics6:(e,t)=>e.pipe(HS(`${Yc}`),Gr((async e=>{const{payload:r}=e,o=t.value,{meeting:{userId:n}}=o;await Ld("video",o);const i=Ru(o);0===r.length?i&&!i.bVideoConnect||XA.connectCamera(n,!1):null!=i&&i.bVideoConnect||XA.connectCamera(n,!0)})),So()),videoCaptureEpics7:e=>Cv(e,k.InitSuccessVideo).pipe(co((e=>!T.isIPad&&T.isAndroidOrIOSBrowser&&e.payload.data===U.EncodeSuccess)),bo((()=>rc().pipe(Ro((e=>{eb.setMobileRotateMode(e)})),So())))),videoCaptureEpics8:e=>Cv(e,k.StartVideoCaptureSuccess).pipe(co((()=>!T.isIPad&&T.isAndroidOrIOSBrowser)),Ro((()=>{eb.setMobileRotateMode(tc())})),Eo(nr)),videoCaptureEpics9:(e,t)=>Cv(e,k.VideoStreamFailed).pipe(co((()=>!!t.value.video.isCurrentUserStartedVideo&&T.isIOSMobile)),Ro((()=>{eb.stopCaptureVideo()})),Gr((()=>nr))),videoCaptureEpics10:e=>_v(e,24322).pipe(Ro((e=>{const{payload:t}=e;eb.passThroughRWGMessage(t)})),Gr((()=>nr)))},ab={videoRenderEpics0:(e,t)=>_v(e,16129).pipe(Vr((e=>{const{payload:{body:{id:r,bVideoOn:o}}}=e,{meeting:{isUseWBVideo:n}}=t.value,i=mm(r);return Ga(Mn,{bVideoOn:o,userId:i}),n&&ZA.prefetchVideoSsrc(r),Qc({bVideoOn:o,userId:i})}))),videoRenderEpics1:e=>Cv(e,k.VideoDecodeMaxSize).pipe(co((e=>{var t;return null==e||null===(t=e.payload)||void 0===t?void 0:t.data})),Vr((({payload:{data:{size:e}}})=>rl(e)))),videoRenderEpics2:e=>_v(e,16135).pipe(Gr((e=>{const{payload:{body:{bLeadershipOn:t,id:r}}}=e,o=[],n=[],i=t?mm(r):0;return t&&n.push(i),o.push(el(n),Ql(i)),lo(Ja(Gn,1),oo(2e3).pipe(Vr((()=>({leadershipEventOnly:!0}))))).pipe(Gr((e=>{const{spotlightList:r,leadershipEventOnly:o}=e||{};return t?!r||1===r.length&&n[0]===r[0]||Ga(ci,{spotlightList:r}):(o||0===(null==r?void 0:r.length))&&Ga(ci,{spotlightList:[]}),nr})),Ao(...o))}))),videoRenderEpics3:(e,t)=>_v(e,7958).pipe(Oo(t),Vr((([e,t])=>{const{payload:{body:r}}=e;let o=[];r&&r.group_list&&r.group_list[0]&&(o=r.group_list[0].map((e=>e.id)));const n=Mu(t);return n.length>0&&(o=o.filter((e=>n.findIndex((t=>t.userId===e))>=0))),Ga(Gn,{spotlightList:o}),el(o)}))),videoRenderEpics4:e=>Cv(e,[k.CurrentVideoResolution,k.CurrentCaptureVideoWidthHeight]).pipe(co((e=>!!e.payload.data)),Vr((e=>{const{payload:{data:t,type:r}}=e;return r===k.CurrentVideoResolution?(Ga(kn,t),al(t)):(Ga(Un,t),Ul(t))}))),videoRenderEpics5:e=>_v(e,Dv).pipe(co((e=>{const{payload:{body:t}}=e;return["bFollowHostVideo","VideoHd","bCanUnmuteVideo"].some((e=>void 0!==t[e]))})),Vr((e=>{const{payload:{body:{bFollowHostVideo:t,VideoHd:r,bCanUnmuteVideo:o}}}=e;if(void 0!==t)return Ga(zn,{bOn:t}),cl(t);if(void 0!==o)return gl(o);{const e=1===r;return ZA.updateVideoHDValue(e),ZA.enableHardwareAccelerationForVideoEncode(!1),ml(e)}}))),videoRenderEpics6:(e,t)=>_v(e,7957).pipe(Oo(t),Vr((([e,t])=>{const{video:{isFollowHostVideoLayout:r}}=t,{payload:{body:o}}=e,n=o&&o.drag_list&&o.drag_list.map((e=>e.id));return r&&Ga(qn,{layout:n}),ll(n)}))),videoRenderEpics7:(e,t)=>_v(e,Ov).pipe(Oo(t),co((([e,t])=>{const{meeting:{userId:r},video:{subscribedVideoList:o}}=t,n=e.payload.body.update,i=e.payload.body.remove;return n&&n.length>0&&n.findIndex((e=>e.id!==r&&(void 0!==e.bVideoOn||e.bHold)))>-1||i&&i.some((e=>o.includes(e.id)))})),Ro((([e,t])=>{const{payload:{body:{remove:r,update:o}}}=e,{video:{subscribedVideoList:n}}=t,i=Nu(t);if(r&&r.length>0&&r.filter((e=>n.includes(e.id))).forEach((e=>{Ga(Jn,{userId:e.id})})),o&&o.length>0){const e=o.filter((e=>void 0!==e.bVideoOn)).filter((e=>-1===i.findIndex((t=>t.userId===e.id)))),t=o.filter((e=>!0===e.bHold));t.length>0&&t.filter((e=>n.includes(e.id))).forEach((e=>{Ga(Jn,{userId:e.id})})),e.forEach((e=>{e.bVideoOn?Ga(Kn,{userId:e.id}):n.includes(e.id)&&Ga(Jn,{userId:e.id})}))}})),Eo(nr)),videoRenderEpics8:(e,t)=>Cv(e,k.VideoQosData).pipe(Oo(t),Vr((([e,t])=>{var r,o;const{video:{isCaptureForbidden:n,isCameraTaken:i},media:{videoEncodeStatus:s,videoDecodeStatus:a}}=t,u=Ru(t),d=Uu(t),c=d.length>0,l=(null==u?void 0:u.bVideoOn)&&!n&&!i,p=d.some((e=>e.bVideoOn)),h="success"===s&&l&&(c||(null===(r=t.recording)||void 0===r?void 0:r.cmrStatus)===En.Start),m="success"===a&&c&&p;return null!==(o=e.payload.data)&&void 0!==o&&o.encoding?h?(Ga(Zn,e.payload),yl(e.payload)):yl(pe):m?(Ga(Zn,e.payload),El(e.payload)):El(pe)}))),videoRenderEpics9:(e,t)=>Cv(e,[k.CurrentDecodeVideoQuality,k.CurrentDecodeVideoFps]).pipe(Ro((e=>{const{payload:{type:r,data:o}}=e,{video:{subscriptionStatus:n}}=t.value;if(n.detailed)if(r===k.CurrentDecodeVideoQuality){const{ssrc:e,width:t,height:r,quality:n}=o;Ga(Xn,{userId:e,width:t,height:r,quality:n})}else if(r===k.CurrentDecodeVideoFps){const{ssrc:e,fps:t}=o;Ga(Xn,{userId:e,fps:t})}})),So()),videoRenderEpics10:e=>Cv(e,[k.NotSupportExternalCanvasInVTagRenderer]).pipe(Ro((()=>{console.error("Hardware acceleration disabled: Use attachVideo method to render the video.")})),So()),videoRenderEpics11:(e,t)=>Cv(e,[k.NetworkQualityChange,k.NetworkQualityChangeAudio,k.NetworkQualityChangeSharing]).pipe(co((e=>!!e.payload.data)),Gr((e=>{const{payload:{data:{bwLevel:r,isUplink:o,networkLevel:n,mediaType:i}}}=e,s=[],{meeting:{userId:a},video:{networkQuality:u,subscribedVideoList:d,networkQualityBroadcastTime:c}}=t.value,l=o?"uplink":"downlink";if(3===i)YA.broadcastUserNetworkQuality({isUplink:o,level:n,bwLevel:r,mediaType:i});else{var p;s.push(Al({userId:a,level:n,bwLevel:r,type:l}));const e=yd(null===(p=u[`${a}`])||void 0===p?void 0:p[l],{level:n,bwLevel:r});if(!e&&-1!==n){(!o&&d.filter((e=>e!==a)).length>0||o)&&Ga(ei,{userId:a,type:l,level:n})}if(o){const t=performance.now();(!e||t-(null!=c?c:0)>3e4)&&(YA.broadcastUserNetworkQuality({isUplink:o,level:n,bwLevel:r,mediaType:i}),s.push(Ml(t)))}}return Cr(s)}))),videoRenderEpics12:(e,t)=>bv(e,8005).pipe(co((e=>{var t;return!(null===(t=e.payload.body)||void 0===t||!t.nUserID)})),Gr((e=>{const{payload:{body:{nLevel:r,nUserID:o,mediaType:n}}}=e,{video:{networkQuality:i}}=t.value,s=i[`${o}`],a=[];return 3===n||s&&s.uplink.level===r||(Ga(ei,{userId:o,level:r,type:"uplink"}),a.push(Al({userId:o,level:r,type:"uplink"}))),Cr(a)}))),videoRenderEpics13:(e,t)=>_v(e,Ov).pipe(co((e=>{const{payload:{body:r}}=e,{video:{prefetchedVideo:o}}=t.value;return(null==o?void 0:o.userId)&&(r.update||r.remove)})),Gr((e=>{const{payload:{body:r}}=e,o=[],{video:{prefetchedVideo:n}}=t.value;let i=!1;return r.remove&&(i=-1!==r.remove.findIndex((e=>e.id===(null==n?void 0:n.userId)))),r.update&&(i=-1!==r.update.findIndex((e=>e.id===(null==n?void 0:n.userId)&&!1===e.bVideoOn))),i&&n&&(n.loaded||ZA.cancelPrefetchVideoSsrc(n.userId),ZA.unsubscribeVideo(n.userId),o.push(Hl(void 0))),Cr(o)}))),videoRenderEpics14:(e,t)=>e.pipe(HS(`${Hl}`),co((e=>!!e.payload)),Ro((e=>{const{payload:{lastCopy:r}}=e,{video:{prefetchedVideo:o}}=t.value;!o||r&&r.userId===o.userId||(null!=r&&r.userId&&(r.loaded&&ZA.cancelPrefetchVideoSsrc(r.userId),ZA.unsubscribeVideo(r.userId)),ZA.subscribeVideo(o.userId,K.Video_360P,!1),ZA.prefetchVideoSsrc(o.userId))})),Eo(nr)),videoRenderEpics15:(e,t)=>Cv(e,k.NewActiveSpeakerFirstFrameCallback).pipe(co((()=>!!t.value.video.prefetchedVideo)),Gr((e=>{const{payload:{data:{ssrc:r}}}=e,{video:{prefetchedVideo:o}}=t.value,n=[];return o&&(Ed(o.userId,r)?(n.push(Hl({userId:o.userId,loaded:!0,lastCopy:o})),Ga(ai,{userId:o.userId})):ZA.unsubscribeVideo(o.userId)),Cr(n)}))),videoRenderEpics16:(e,t)=>_v(e,16131).pipe(co((e=>void 0!==e.payload.body.ssrc)),Ro((()=>{const{media:{videoDecodeStatus:e,videoEncodeStatus:r},video:{webrtcStatisticSubscription:o}}=t.value;o&&ZA.subscribeWebRTCStatistics(!0,ne),Md("video",r,e).subscribe((([e,r])=>{const{video:{subscriptionStatus:o}}=t.value;e&&o.encode&&ZA.subscribeToQos([ju.VideoEncode],ne),r&&(o.decode&&ZA.subscribeToQos([ju.VideoDecode],ne),o.detailed&&ZA.enableVideoObserver(!0)),o.common&&ZA.subscribeToQos([ju.Common],ne)}))})),So()),videoRenderEpics17:(e,t)=>e.pipe(HS(`${pl}`,`${hl}`),co((()=>{const e=t.value.video.renderedVideoList.length;return[0,1].includes(e)})),Ro((()=>{const{video:{renderedVideoList:e,subscriptionStatus:r}}=t.value,o=e.length;1===o?ZA.enableVideoObserver(!0,null==r||!r.detailed):0===o&&ZA.enableVideoObserver(!1)})),Eo(nr)),videoRenderEpics18:(e,t)=>Cv(e,k.CurrentDecodeVideoQuality).pipe(Gr((e=>{const{payload:{data:r}}=e,{video:{renderedVideoList:o,videoAttachments:n}}=t.value,i=[],{ssrc:s,width:a,height:u}=r,d=u?a/u:0,c=o.filter((e=>Ed(e.userId,s)));if(c.some((e=>e.aspectRatio&&Math.abs(e.aspectRatio-d)>.2))){const e=c.filter((e=>e.canvasId===de));if(e.length>0){const e=n[`${s}`];if(e){const t=ac(e).map((e=>{if(e){const{clientWidth:t,clientHeight:r}=e;return r?t/r:0}return 0})).filter((e=>0!==e)),r=t.every((e=>Math.abs(e-d)<=.2));if(r)i.push(pl({userId:s,key:ae,canvasId:de,aspectRatio:d}));else{const e=t.length>0?t.reduce(((e,t)=>Math.abs(t-d)>Math.abs(e-d)?t:e),t[0]):t[0];i.push(pl({userId:s,key:ae,canvasId:de,aspectRatio:e}))}}}(e.length!==c.length||i.filter((e=>{var t;return(null===(t=e.payload)||void 0===t?void 0:t.aspectRatio)!==d})).length>0)&&Ga(di,{userId:s,aspectRatio:d})}return Cr(i)}))),videoRenderEpics19:(e,t)=>Cv(e,k.SyncRendererTypeResponse).pipe(Gr((e=>{const{payload:{data:{rendererType:r}}}=e,{video:{rendererType:o}}=t.value,n=[];return o!==r&&n.push(zl(r)),Cr(n)}))),videoRenderEpics20:(e,t)=>e.pipe(HS(`${jg}`),co((()=>!!t.value.meeting.zlkJwtToken||!!t.value.meeting.sign)),Vr((e=>{var r;const{payload:{mediaFeatureOptions:o,webMediaBlockConfig:n}}=e,{meeting:{zlkJwtToken:i,sign:s}}=t.value;let a=2;const u=i||s;if(u){const{video_webrtc_mode:e}=bd(u);void 0!==e&&(a=Number(e))}const{shouldUseWebRTC:d,errNo:c}=Fu.getWebRTCCapability(a,null!=o?o:"",null===(r=JSON.parse(n||"{}"))||void 0===r?void 0:r.WebRTCConfig);d||1!==a||console.warn(Be[c]||"An error occurred with WebRTC Video.");const l=1===by.get(Cy.VideoSDKWebRTCVideoFallbackWasm);return Yl(d&&!l)}))),videoRenderEpics21:(e,t)=>e.pipe(HS(`${Wl}`),co((e=>{const{payload:{userId:r}}=e,{meeting:{userId:o}}=t.value;return bm()&&r===o})),Gr((e=>{const{payload:{element:r}}=e,{media:{alternativeNameForVideoPlayer:o},video:{isMirrored:n}}=t.value,i=`${null!=o?o:"video-player"}-container`;return p(r,i)?Promise.resolve({element:r,ret:!0}):n?Mr(ro((e=>{const t=new MutationObserver(e);t.observe(document.body,{childList:!0,subtree:!0}),e.__observer=t}),(e=>{const t=e.__observer;null==t||t.disconnect()})).pipe(co((()=>p(r,i))),Co(Qa(oo(5e3))),Vr((()=>({element:r,ret:!0}))))).catch((()=>({element:r,ret:!1}))):Promise.resolve({element:r,ret:!1})})),Ir(Xt),Ro((e=>{const{element:r,ret:o}=e;var n;o&&fm(null==r||null===(n=r.render)||void 0===n?void 0:n.el,t.value.video.isMirrored)})),So()),videoRenderEpics22:e=>Cv(e,k.MediaStatsLog).pipe(Vr((e=>{const{payload:{data:t}}=e;return Ga(pi,t),ep(t)}))),videoRenderEpics23:e=>Cv(e,k.CommonQosData).pipe(co((e=>!!e.payload.data)),Ro((e=>{const{payload:{data:t}}=e;Ga(hi,t)})),So())},ub=Ev(ab,sb,{vbEpics0:e=>Cv(e,[k.VbModelPreloadingOk,k.VbModelPreloading_3S,k.VbModelPreloading_10S,k.VbSettingParaError]).pipe(Gr((e=>{const{payload:{type:t,data:r}}=e,o=[];return[k.VbModelPreloadingOk,k.VbModelPreloading_3S,k.VbModelPreloading_10S].includes(t)?(o.push(Sl(!0)),Ga(Qn,!0),t===k.VbModelPreloading_10S&&console.warn("Virtual Background is taking longer than expected to load.")):t===k.VbSettingParaError&&(r===ee.VBModelNotMatch?(Ga(Qn,!1),o.push(Sl(!1))):(Ga(Yn,!1),o.push(vl(!1)))),Cr(o)}))),vbEpics1:e=>Cv(e,k.StartVideoStreamInVbSettingSuccess).pipe(Vr((()=>(Ga(Yn,!0),vl(!0))))),vbEpics2:e=>Cv(e,k.StartVideoStreamInMaskSettingSuccess).pipe(Vr((()=>(Ga(ii,!0),Pl(!0))))),vbEpics3:e=>Cv(e,k.MaskSettingParaError).pipe(Vr((()=>(Ga(ii,!1),Pl(!1)))))},ib);let db=null;const cb=()=>db;let lb=function(e){return e.VIDEO_ENCODE="0",e.VIDEO_DECODE="1",e.AUDIO_ENCODE="2",e.AUDIO_DECODE="3",e.SHARING_ENCODE="4",e.SHARING_DECODE="5",e}({}),pb=function(e){return e[e.NONE=0]="NONE",e[e.AES_256=1]="AES_256",e[e.AES_GCM=2]="AES_GCM",e}({});const hb=Object.freeze({RWG_CHAT:{gcmType:1,sessionType:"RWG_CHAT"},XMPP_CHAT:{gcmType:1,sessionType:"XMPP_CHAT"},CC_MESSAGE:{gcmType:3,sessionType:"CC_MESSAGE"},BO_BROADCAST:{gcmType:1,sessionType:"BO_BROADCAST"},CHAT_FILE:{gcmType:2,sessionType:"CHAT_FILE"},CHAT_FILE_INFO:{gcmType:1,sessionType:"CHAT_FILE_INFO"}}),mb=(window.crypto||window.msCrypto).subtle,gb=Cy.WebclientIVState,Sb=Object.keys(hb).map((e=>hb[e].sessionType));class vb{constructor(e,t,r){this.isGCMEnabled=void 0,this.gcmSessionKey=void 0,this.gcmMainSessionKey=void 0,this.zoomId=void 0,this.resetParameters(e,t,r),by.set(gb,{},Iy.SessionStorage)}static init(e,t,r){this.instance?this.instance.resetParameters(e,t,r):this.instance=new vb(e,t,r)}static destroy(){this.instance&&(this.instance=void 0)}resetParameters(e,t,r){this.isGCMEnabled=!(T.isIE||!T.isSupportEssentialAudioAndVideoAbility)&&r===pb.AES_GCM,this.gcmSessionKey=gd(t),this.gcmMainSessionKey||(this.gcmMainSessionKey=this.gcmSessionKey),this.zoomId=String(e)}beginCrypto(e,t,r){const o=new Uint32Array(1);o[0]=9,o[0]+=Number(r);const n=new Uint8Array(o.buffer);let i=new Uint8Array(132);const s=gd(t);return i.set(s,0),i.set(n,s.length),i=i.subarray(0,s.length+4),mb.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!0,["sign"]).then((e=>mb.sign({name:"HMAC"},e,i))).then((e=>mb.importKey("raw",e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])))}getNextIV(e){const t=by.get(gb);return void 0===t[e]?(t[e]=0,by.set(gb,t,Iy.SessionStorage)):by.set(gb,(t=>({...t,[e]:t[e]+1})),Iy.SessionStorage)}resetIVState(){const e=by.get(gb);if(void 0===e);else{const t=Object.keys(e).filter((e=>Sb.indexOf(e)>-1));t.length>0&&(t.forEach((t=>{e[t]+=1e6})),by.set(gb,e,Iy.SessionStorage))}}static resetIV(){if(void 0===this.instance)throw new Error("reset before intialize");this.instance.resetIVState()}static beginEncrypt({text:e,type:t}){const r=new Uint8Array(0);if(this.instance&&this.instance.isGCMEnabled){const o=16,n=12,i=this.instance.getNextIV(t.sessionType),s=new ArrayBuffer(n),a=new Uint8Array(s);new DataView(s).setUint32(0,i,!0);let u=null;return u="BO_BROADCAST"===t.sessionType||"XMPP_CHAT"===t.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(u,this.instance.zoomId,t.gcmType).then((t=>{const n=ArrayBuffer.isView(e)?e:(new TextEncoder).encode(e);return mb.encrypt({name:"AES-GCM",iv:a,additionalData:r,tagLength:8*o},t,n)})).then((e=>{const n=1+a.byteLength+2+r.byteLength+4+e.byteLength,i=new ArrayBuffer(n);if(new Uint8Array(i)[0]=a.length,new Uint8Array(i,1,a.byteLength).set(a),new DataView(i).setUint16(1+a.byteLength,r.length,!0),new Uint8Array(i,3+a.byteLength).set(r),new DataView(i).setUint32(1+a.byteLength+2+r.byteLength,e.byteLength-o,!0),new Uint8Array(i,1+a.byteLength+2+r.byteLength+4).set(new Uint8Array(e)),t.sessionType===hb.CHAT_FILE.sessionType)return i;const s=new Uint8Array(i).reduce(((e,t)=>e+String.fromCharCode(t)),"");return window.btoa(s).replace(/_/g,"/").replace(/-/g,"+").replace(/\=/g,"")}))}return Promise.resolve(ArrayBuffer.isView(e)?e:ld(e))}static beginDecrypt({decryptedText:e,type:t,zoomId:r}){if(this.instance&&this.instance.isGCMEnabled){const o=ArrayBuffer.isView(e)||e instanceof ArrayBuffer?new Uint8Array(e):function(e){let t;const r=e.length,o=new Array(r);for(t=0;t<r;++t)o[t]=255&e.charCodeAt(t);return new Uint8Array(o)}(atob(e.replace(/_/g,"/").replace(/-/g,"+"))),n=o[0],i=o.slice(1,n+1),s=o.slice(1+n,3+n),a=new DataView(s.buffer).getUint16(0,!0),u=o.slice(1+n+2,1+n+2+a),d=o.slice(1+n+2+a,1+n+2+a+4),c=new DataView(d.buffer).getUint32(0,!0),l=o.slice(1+n+2+a+4,1+n+2+a+4+c),p=o.slice(1+n+2+a+4+c);let h=null;return h="BO_BROADCAST"===t.sessionType||"XMPP_CHAT"===t.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(h,r,t.gcmType).then((e=>{const t=function(e,t){e=new Uint8Array(e),t=new Uint8Array(t);const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(l,p);return mb.decrypt({name:"AES-GCM",iv:i,additionalData:u,tagLength:8*p.length},e,t.buffer)})).then((e=>({message:t.sessionType===hb.CHAT_FILE.sessionType?e:(new TextDecoder).decode(e),iv:i,aad:u}))).catch((e=>({message:"[This is an encrypted message]",iv:i,aad:u})))}{const t=new TextDecoder("utf-8");return Promise.resolve({message:ArrayBuffer.isView(e)||e instanceof ArrayBuffer?e:t.decode(gd(e))})}}}vb.instance=void 0;var fb,yb={exports:{}},Eb=yb.exports,_b=(fb||(fb=1,function(e,t){(function(){var r,o="Expected a function",n="__lodash_hash_undefined__",i="__lodash_placeholder__",s=32,a=128,u=1/0,d=9007199254740991,c=NaN,l=4294967295,p=[["ary",a],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",s],["partialRight",64],["rearg",256]],h="[object Arguments]",m="[object Array]",g="[object Boolean]",S="[object Date]",v="[object Error]",f="[object Function]",y="[object GeneratorFunction]",E="[object Map]",_="[object Number]",I="[object Object]",A="[object Promise]",b="[object RegExp]",C="[object Set]",T="[object String]",R="[object Symbol]",O="[object WeakMap]",D="[object ArrayBuffer]",w="[object DataView]",N="[object Float32Array]",M="[object Float64Array]",P="[object Int8Array]",L="[object Int16Array]",k="[object Int32Array]",U="[object Uint8Array]",V="[object Uint8ClampedArray]",B="[object Uint16Array]",H="[object Uint32Array]",j=/\b__p \+= '';/g,F=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,G=RegExp(x.source),z=RegExp($.source),q=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,Z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X=/[\\^$.*+?()[\]{}|]/g,ee=RegExp(X.source),te=/^\s+/,re=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ne=/\{\n\/\* \[wrapped with (.+)\] \*/,ie=/,? & /,se=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ae=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ce=/\w*$/,le=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,he=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ge=/^(?:0|[1-9]\d*)$/,Se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ve=/($^)/,fe=/['\n\r\u2028\u2029\\]/g,ye="\\ud800-\\udfff",Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",_e="\\u2700-\\u27bf",Ie="a-z\\xdf-\\xf6\\xf8-\\xff",Ae="A-Z\\xc0-\\xd6\\xd8-\\xde",be="\\ufe0e\\ufe0f",Ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Te="["+ye+"]",Re="["+Ce+"]",Oe="["+Ee+"]",De="\\d+",we="["+_e+"]",Ne="["+Ie+"]",Me="[^"+ye+Ce+De+_e+Ie+Ae+"]",Pe="\\ud83c[\\udffb-\\udfff]",Le="[^"+ye+"]",ke="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Ae+"]",Be="\\u200d",He="(?:"+Ne+"|"+Me+")",je="(?:"+Ve+"|"+Me+")",Fe="(?:['](?:d|ll|m|re|s|t|ve))?",We="(?:['](?:D|LL|M|RE|S|T|VE))?",xe="(?:"+Oe+"|"+Pe+")?",$e="["+be+"]?",Ge=$e+xe+"(?:"+Be+"(?:"+[Le,ke,Ue].join("|")+")"+$e+xe+")*",ze="(?:"+[we,ke,Ue].join("|")+")"+Ge,qe="(?:"+[Le+Oe+"?",Oe,ke,Ue,Te].join("|")+")",Ke=RegExp("[']","g"),Je=RegExp(Oe,"g"),Qe=RegExp(Pe+"(?="+Pe+")|"+qe+Ge,"g"),Ye=RegExp([Ve+"?"+Ne+"+"+Fe+"(?="+[Re,Ve,"$"].join("|")+")",je+"+"+We+"(?="+[Re,Ve+He,"$"].join("|")+")",Ve+"?"+He+"+"+Fe,Ve+"+"+We,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,ze].join("|"),"g"),Ze=RegExp("["+Be+ye+Ee+be+"]"),Xe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,et=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tt=-1,rt={};rt[N]=rt[M]=rt[P]=rt[L]=rt[k]=rt[U]=rt[V]=rt[B]=rt[H]=!0,rt[h]=rt[m]=rt[D]=rt[g]=rt[w]=rt[S]=rt[v]=rt[f]=rt[E]=rt[_]=rt[I]=rt[b]=rt[C]=rt[T]=rt[O]=!1;var ot={};ot[h]=ot[m]=ot[D]=ot[w]=ot[g]=ot[S]=ot[N]=ot[M]=ot[P]=ot[L]=ot[k]=ot[E]=ot[_]=ot[I]=ot[b]=ot[C]=ot[T]=ot[R]=ot[U]=ot[V]=ot[B]=ot[H]=!0,ot[v]=ot[f]=ot[O]=!1;var nt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},it=parseFloat,st=parseInt,at="object"==typeof pc&&pc&&pc.Object===Object&&pc,ut="object"==typeof self&&self&&self.Object===Object&&self,dt=at||ut||Function("return this")(),ct=t&&!t.nodeType&&t,lt=ct&&e&&!e.nodeType&&e,pt=lt&&lt.exports===ct,ht=pt&&at.process,mt=function(){try{return lt&&lt.require&&lt.require("util").types||ht&&ht.binding&&ht.binding("util")}catch(e){}}(),gt=mt&&mt.isArrayBuffer,St=mt&&mt.isDate,vt=mt&&mt.isMap,ft=mt&&mt.isRegExp,yt=mt&&mt.isSet,Et=mt&&mt.isTypedArray;function _t(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function It(e,t,r,o){for(var n=-1,i=null==e?0:e.length;++n<i;){var s=e[n];t(o,s,r(s),e)}return o}function At(e,t){for(var r=-1,o=null==e?0:e.length;++r<o&&!1!==t(e[r],r,e););return e}function bt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Ct(e,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(!t(e[r],r,e))return!1;return!0}function Tt(e,t){for(var r=-1,o=null==e?0:e.length,n=0,i=[];++r<o;){var s=e[r];t(s,r,e)&&(i[n++]=s)}return i}function Rt(e,t){return!(null==e||!e.length)&&Vt(e,t,0)>-1}function Ot(e,t,r){for(var o=-1,n=null==e?0:e.length;++o<n;)if(r(t,e[o]))return!0;return!1}function Dt(e,t){for(var r=-1,o=null==e?0:e.length,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}function wt(e,t){for(var r=-1,o=t.length,n=e.length;++r<o;)e[n+r]=t[r];return e}function Nt(e,t,r,o){var n=-1,i=null==e?0:e.length;for(o&&i&&(r=e[++n]);++n<i;)r=t(r,e[n],n,e);return r}function Mt(e,t,r,o){var n=null==e?0:e.length;for(o&&n&&(r=e[--n]);n--;)r=t(r,e[n],n,e);return r}function Pt(e,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(e[r],r,e))return!0;return!1}var Lt=Ft("length");function kt(e,t,r){var o;return r(e,(function(e,r,n){if(t(e,r,n))return o=r,!1})),o}function Ut(e,t,r,o){for(var n=e.length,i=r+(o?1:-1);o?i--:++i<n;)if(t(e[i],i,e))return i;return-1}function Vt(e,t,r){return t==t?function(e,t,r){for(var o=r-1,n=e.length;++o<n;)if(e[o]===t)return o;return-1}(e,t,r):Ut(e,Ht,r)}function Bt(e,t,r,o){for(var n=r-1,i=e.length;++n<i;)if(o(e[n],t))return n;return-1}function Ht(e){return e!=e}function jt(e,t){var r=null==e?0:e.length;return r?$t(e,t)/r:c}function Ft(e){return function(t){return null==t?r:t[e]}}function Wt(e){return function(t){return null==e?r:e[t]}}function xt(e,t,r,o,n){return n(e,(function(e,n,i){r=o?(o=!1,e):t(r,e,n,i)})),r}function $t(e,t){for(var o,n=-1,i=e.length;++n<i;){var s=t(e[n]);s!==r&&(o=o===r?s:o+s)}return o}function Gt(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o}function zt(e){return e?e.slice(0,ur(e)+1).replace(te,""):e}function qt(e){return function(t){return e(t)}}function Kt(e,t){return Dt(t,(function(t){return e[t]}))}function Jt(e,t){return e.has(t)}function Qt(e,t){for(var r=-1,o=e.length;++r<o&&Vt(t,e[r],0)>-1;);return r}function Yt(e,t){for(var r=e.length;r--&&Vt(t,e[r],0)>-1;);return r}var Zt=Wt({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Xt=Wt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function er(e){return"\\"+nt[e]}function tr(e){return Ze.test(e)}function rr(e){var t=-1,r=Array(e.size);return e.forEach((function(e,o){r[++t]=[o,e]})),r}function or(e,t){return function(r){return e(t(r))}}function nr(e,t){for(var r=-1,o=e.length,n=0,s=[];++r<o;){var a=e[r];a!==t&&a!==i||(e[r]=i,s[n++]=r)}return s}function ir(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function sr(e){return tr(e)?function(e){for(var t=Qe.lastIndex=0;Qe.test(e);)++t;return t}(e):Lt(e)}function ar(e){return tr(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function ur(e){for(var t=e.length;t--&&re.test(e.charAt(t)););return t}var dr=Wt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cr=function e(t){var re=(t=null==t?dt:cr.defaults(dt.Object(),t,cr.pick(dt,et))).Array,ye=t.Date,Ee=t.Error,_e=t.Function,Ie=t.Math,Ae=t.Object,be=t.RegExp,Ce=t.String,Te=t.TypeError,Re=re.prototype,Oe=_e.prototype,De=Ae.prototype,we=t["__core-js_shared__"],Ne=Oe.toString,Me=De.hasOwnProperty,Pe=0,Le=function(){var e=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ke=De.toString,Ue=Ne.call(Ae),Ve=dt._,Be=be("^"+Ne.call(Me).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=pt?t.Buffer:r,je=t.Symbol,Fe=t.Uint8Array,We=He?He.allocUnsafe:r,xe=or(Ae.getPrototypeOf,Ae),$e=Ae.create,Ge=De.propertyIsEnumerable,ze=Re.splice,qe=je?je.isConcatSpreadable:r,Qe=je?je.iterator:r,Ze=je?je.toStringTag:r,nt=function(){try{var e=ai(Ae,"defineProperty");return e({},"",{}),e}catch(e){}}(),at=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ut=ye&&ye.now!==dt.Date.now&&ye.now,ct=t.setTimeout!==dt.setTimeout&&t.setTimeout,lt=Ie.ceil,ht=Ie.floor,mt=Ae.getOwnPropertySymbols,Lt=He?He.isBuffer:r,Wt=t.isFinite,lr=Re.join,pr=or(Ae.keys,Ae),hr=Ie.max,mr=Ie.min,gr=ye.now,Sr=t.parseInt,vr=Ie.random,fr=Re.reverse,yr=ai(t,"DataView"),Er=ai(t,"Map"),_r=ai(t,"Promise"),Ir=ai(t,"Set"),Ar=ai(t,"WeakMap"),br=ai(Ae,"create"),Cr=Ar&&new Ar,Tr={},Rr=Pi(yr),Or=Pi(Er),Dr=Pi(_r),wr=Pi(Ir),Nr=Pi(Ar),Mr=je?je.prototype:r,Pr=Mr?Mr.valueOf:r,Lr=Mr?Mr.toString:r;function kr(e){if(Qs(e)&&!Hs(e)&&!(e instanceof Hr)){if(e instanceof Br)return e;if(Me.call(e,"__wrapped__"))return Li(e)}return new Br(e)}var Ur=function(){function e(){}return function(t){if(!Js(t))return{};if($e)return $e(t);e.prototype=t;var o=new e;return e.prototype=r,o}}();function Vr(){}function Br(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Hr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=l,this.__views__=[]}function jr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Fr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function xr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Wr;++t<r;)this.add(e[t])}function $r(e){var t=this.__data__=new Fr(e);this.size=t.size}function Gr(e,t){var r=Hs(e),o=!r&&Bs(e),n=!r&&!o&&xs(e),i=!r&&!o&&!n&&na(e),s=r||o||n||i,a=s?Gt(e.length,Ce):[],u=a.length;for(var d in e)!t&&!Me.call(e,d)||s&&("length"==d||n&&("offset"==d||"parent"==d)||i&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||mi(d,u))||a.push(d);return a}function zr(e){var t=e.length;return t?e[xo(0,t-1)]:r}function qr(e,t){return wi(Cn(e),ro(t,0,e.length))}function Kr(e){return wi(Cn(e))}function Jr(e,t,o){(o!==r&&!ks(e[t],o)||o===r&&!(t in e))&&eo(e,t,o)}function Qr(e,t,o){var n=e[t];Me.call(e,t)&&ks(n,o)&&(o!==r||t in e)||eo(e,t,o)}function Yr(e,t){for(var r=e.length;r--;)if(ks(e[r][0],t))return r;return-1}function Zr(e,t,r,o){return ao(e,(function(e,n,i){t(o,e,r(e),i)})),o}function Xr(e,t){return e&&Tn(t,Ta(t),e)}function eo(e,t,r){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function to(e,t){for(var o=-1,n=t.length,i=re(n),s=null==e;++o<n;)i[o]=s?r:_a(e,t[o]);return i}function ro(e,t,o){return e==e&&(o!==r&&(e=e<=o?e:o),t!==r&&(e=e>=t?e:t)),e}function oo(e,t,o,n,i,s){var a,u=1&t,d=2&t,c=4&t;if(o&&(a=i?o(e,n,i,s):o(e)),a!==r)return a;if(!Js(e))return e;var l=Hs(e);if(l){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Me.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!u)return Cn(e,a)}else{var p=ci(e),m=p==f||p==y;if(xs(e))return yn(e,u);if(p==I||p==h||m&&!i){if(a=d||m?{}:pi(e),!u)return d?function(e,t){return Tn(e,di(e),t)}(e,function(e,t){return e&&Tn(t,Ra(t),e)}(a,e)):function(e,t){return Tn(e,ui(e),t)}(e,Xr(a,e))}else{if(!ot[p])return i?e:{};a=function(e,t,r){var o,n=e.constructor;switch(t){case D:return En(e);case g:case S:return new n(+e);case w:return function(e,t){var r=t?En(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case N:case M:case P:case L:case k:case U:case V:case B:case H:return _n(e,r);case E:return new n;case _:case T:return new n(e);case b:return function(e){var t=new e.constructor(e.source,ce.exec(e));return t.lastIndex=e.lastIndex,t}(e);case C:return new n;case R:return o=e,Pr?Ae(Pr.call(o)):{}}}(e,p,u)}}s||(s=new $r);var v=s.get(e);if(v)return v;s.set(e,a),ta(e)?e.forEach((function(r){a.add(oo(r,t,o,r,e,s))})):Ys(e)&&e.forEach((function(r,n){a.set(n,oo(r,t,o,n,e,s))}));var A=l?r:(c?d?ei:Xn:d?Ra:Ta)(e);return At(A||e,(function(r,n){A&&(r=e[n=r]),Qr(a,n,oo(r,t,o,n,e,s))})),a}function no(e,t,o){var n=o.length;if(null==e)return!n;for(e=Ae(e);n--;){var i=o[n],s=t[i],a=e[i];if(a===r&&!(i in e)||!s(a))return!1}return!0}function io(e,t,n){if("function"!=typeof e)throw new Te(o);return Ti((function(){e.apply(r,n)}),t)}function so(e,t,r,o){var n=-1,i=Rt,s=!0,a=e.length,u=[],d=t.length;if(!a)return u;r&&(t=Dt(t,qt(r))),o?(i=Ot,s=!1):t.length>=200&&(i=Jt,s=!1,t=new xr(t));e:for(;++n<a;){var c=e[n],l=null==r?c:r(c);if(c=o||0!==c?c:0,s&&l==l){for(var p=d;p--;)if(t[p]===l)continue e;u.push(c)}else i(t,l,o)||u.push(c)}return u}kr.templateSettings={escape:q,evaluate:K,interpolate:J,variable:"",imports:{_:kr}},kr.prototype=Vr.prototype,kr.prototype.constructor=kr,Br.prototype=Ur(Vr.prototype),Br.prototype.constructor=Br,Hr.prototype=Ur(Vr.prototype),Hr.prototype.constructor=Hr,jr.prototype.clear=function(){this.__data__=br?br(null):{},this.size=0},jr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},jr.prototype.get=function(e){var t=this.__data__;if(br){var o=t[e];return o===n?r:o}return Me.call(t,e)?t[e]:r},jr.prototype.has=function(e){var t=this.__data__;return br?t[e]!==r:Me.call(t,e)},jr.prototype.set=function(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=br&&t===r?n:t,this},Fr.prototype.clear=function(){this.__data__=[],this.size=0},Fr.prototype.delete=function(e){var t=this.__data__,r=Yr(t,e);return!(r<0||(r==t.length-1?t.pop():ze.call(t,r,1),--this.size,0))},Fr.prototype.get=function(e){var t=this.__data__,o=Yr(t,e);return o<0?r:t[o][1]},Fr.prototype.has=function(e){return Yr(this.__data__,e)>-1},Fr.prototype.set=function(e,t){var r=this.__data__,o=Yr(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this},Wr.prototype.clear=function(){this.size=0,this.__data__={hash:new jr,map:new(Er||Fr),string:new jr}},Wr.prototype.delete=function(e){var t=ii(this,e).delete(e);return this.size-=t?1:0,t},Wr.prototype.get=function(e){return ii(this,e).get(e)},Wr.prototype.has=function(e){return ii(this,e).has(e)},Wr.prototype.set=function(e,t){var r=ii(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this},xr.prototype.add=xr.prototype.push=function(e){return this.__data__.set(e,n),this},xr.prototype.has=function(e){return this.__data__.has(e)},$r.prototype.clear=function(){this.__data__=new Fr,this.size=0},$r.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},$r.prototype.get=function(e){return this.__data__.get(e)},$r.prototype.has=function(e){return this.__data__.has(e)},$r.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Fr){var o=r.__data__;if(!Er||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new Wr(o)}return r.set(e,t),this.size=r.size,this};var ao=Dn(So),uo=Dn(vo,!0);function co(e,t){var r=!0;return ao(e,(function(e,o,n){return r=!!t(e,o,n)})),r}function lo(e,t,o){for(var n=-1,i=e.length;++n<i;){var s=e[n],a=t(s);if(null!=a&&(u===r?a==a&&!oa(a):o(a,u)))var u=a,d=s}return d}function po(e,t){var r=[];return ao(e,(function(e,o,n){t(e,o,n)&&r.push(e)})),r}function ho(e,t,r,o,n){var i=-1,s=e.length;for(r||(r=hi),n||(n=[]);++i<s;){var a=e[i];t>0&&r(a)?t>1?ho(a,t-1,r,o,n):wt(n,a):o||(n[n.length]=a)}return n}var mo=wn(),go=wn(!0);function So(e,t){return e&&mo(e,t,Ta)}function vo(e,t){return e&&go(e,t,Ta)}function fo(e,t){return Tt(t,(function(t){return zs(e[t])}))}function yo(e,t){for(var o=0,n=(t=gn(t,e)).length;null!=e&&o<n;)e=e[Mi(t[o++])];return o&&o==n?e:r}function Eo(e,t,r){var o=t(e);return Hs(e)?o:wt(o,r(e))}function _o(e){return null==e?e===r?"[object Undefined]":"[object Null]":Ze&&Ze in Ae(e)?function(e){var t=Me.call(e,Ze),o=e[Ze];try{e[Ze]=r;var n=!0}catch(e){}var i=ke.call(e);return n&&(t?e[Ze]=o:delete e[Ze]),i}(e):function(e){return ke.call(e)}(e)}function Io(e,t){return e>t}function Ao(e,t){return null!=e&&Me.call(e,t)}function bo(e,t){return null!=e&&t in Ae(e)}function Co(e,t,o){for(var n=o?Ot:Rt,i=e[0].length,s=e.length,a=s,u=re(s),d=1/0,c=[];a--;){var l=e[a];a&&t&&(l=Dt(l,qt(t))),d=mr(l.length,d),u[a]=!o&&(t||i>=120&&l.length>=120)?new xr(a&&l):r}l=e[0];var p=-1,h=u[0];e:for(;++p<i&&c.length<d;){var m=l[p],g=t?t(m):m;if(m=o||0!==m?m:0,!(h?Jt(h,g):n(c,g,o))){for(a=s;--a;){var S=u[a];if(!(S?Jt(S,g):n(e[a],g,o)))continue e}h&&h.push(g),c.push(m)}}return c}function To(e,t,o){var n=null==(e=Ai(e,t=gn(t,e)))?e:e[Mi(Gi(t))];return null==n?r:_t(n,e,o)}function Ro(e){return Qs(e)&&_o(e)==h}function Oo(e,t,o,n,i){return e===t||(null==e||null==t||!Qs(e)&&!Qs(t)?e!=e&&t!=t:function(e,t,o,n,i,s){var a=Hs(e),u=Hs(t),d=a?m:ci(e),c=u?m:ci(t),l=(d=d==h?I:d)==I,p=(c=c==h?I:c)==I,f=d==c;if(f&&xs(e)){if(!xs(t))return!1;a=!0,l=!1}if(f&&!l)return s||(s=new $r),a||na(e)?Yn(e,t,o,n,i,s):function(e,t,r,o,n,i,s){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!i(new Fe(e),new Fe(t)));case g:case S:case _:return ks(+e,+t);case v:return e.name==t.name&&e.message==t.message;case b:case T:return e==t+"";case E:var a=rr;case C:var u=1&o;if(a||(a=ir),e.size!=t.size&&!u)return!1;var d=s.get(e);if(d)return d==t;o|=2,s.set(e,t);var c=Yn(a(e),a(t),o,n,i,s);return s.delete(e),c;case R:if(Pr)return Pr.call(e)==Pr.call(t)}return!1}(e,t,d,o,n,i,s);if(!(1&o)){var y=l&&Me.call(e,"__wrapped__"),A=p&&Me.call(t,"__wrapped__");if(y||A){var O=y?e.value():e,N=A?t.value():t;return s||(s=new $r),i(O,N,o,n,s)}}return!!f&&(s||(s=new $r),function(e,t,o,n,i,s){var a=1&o,u=Xn(e),d=u.length;if(d!=Xn(t).length&&!a)return!1;for(var c=d;c--;){var l=u[c];if(!(a?l in t:Me.call(t,l)))return!1}var p=s.get(e),h=s.get(t);if(p&&h)return p==t&&h==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=a;++c<d;){var S=e[l=u[c]],v=t[l];if(n)var f=a?n(v,S,l,t,e,s):n(S,v,l,e,t,s);if(!(f===r?S===v||i(S,v,o,n,s):f)){m=!1;break}g||(g="constructor"==l)}if(m&&!g){var y=e.constructor,E=t.constructor;y==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof E&&E instanceof E||(m=!1)}return s.delete(e),s.delete(t),m}(e,t,o,n,i,s))}(e,t,o,n,Oo,i))}function Do(e,t,o,n){var i=o.length,s=i,a=!n;if(null==e)return!s;for(e=Ae(e);i--;){var u=o[i];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<s;){var d=(u=o[i])[0],c=e[d],l=u[1];if(a&&u[2]){if(c===r&&!(d in e))return!1}else{var p=new $r;if(n)var h=n(c,l,d,e,t,p);if(!(h===r?Oo(l,c,3,n,p):h))return!1}}return!0}function wo(e){return!(!Js(e)||function(e){return!!Le&&Le in e}(e))&&(zs(e)?Be:he).test(Pi(e))}function No(e){return"function"==typeof e?e:null==e?Za:"object"==typeof e?Hs(e)?Uo(e[0],e[1]):ko(e):au(e)}function Mo(e){if(!yi(e))return pr(e);var t=[];for(var r in Ae(e))Me.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Po(e,t){return e<t}function Lo(e,t){var r=-1,o=Fs(e)?re(e.length):[];return ao(e,(function(e,n,i){o[++r]=t(e,n,i)})),o}function ko(e){var t=si(e);return 1==t.length&&t[0][2]?_i(t[0][0],t[0][1]):function(r){return r===e||Do(r,e,t)}}function Uo(e,t){return Si(e)&&Ei(t)?_i(Mi(e),t):function(o){var n=_a(o,e);return n===r&&n===t?Ia(o,e):Oo(t,n,3)}}function Vo(e,t,o,n,i){e!==t&&mo(t,(function(s,a){if(i||(i=new $r),Js(s))!function(e,t,o,n,i,s,a){var u=bi(e,o),d=bi(t,o),c=a.get(d);if(c)Jr(e,o,c);else{var l=s?s(u,d,o+"",e,t,a):r,p=l===r;if(p){var h=Hs(d),m=!h&&xs(d),g=!h&&!m&&na(d);l=d,h||m||g?Hs(u)?l=u:Ws(u)?l=Cn(u):m?(p=!1,l=yn(d,!0)):g?(p=!1,l=_n(d,!0)):l=[]:Xs(d)||Bs(d)?(l=u,Bs(u)?l=pa(u):Js(u)&&!zs(u)||(l=pi(d))):p=!1}p&&(a.set(d,l),i(l,d,n,s,a),a.delete(d)),Jr(e,o,l)}}(e,t,a,o,Vo,n,i);else{var u=n?n(bi(e,a),s,a+"",e,t,i):r;u===r&&(u=s),Jr(e,a,u)}}),Ra)}function Bo(e,t){var o=e.length;if(o)return mi(t+=t<0?o:0,o)?e[t]:r}function Ho(e,t,r){t=t.length?Dt(t,(function(e){return Hs(e)?function(t){return yo(t,1===e.length?e[0]:e)}:e})):[Za];var o=-1;t=Dt(t,qt(ni()));var n=Lo(e,(function(e,r,n){var i=Dt(t,(function(t){return t(e)}));return{criteria:i,index:++o,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(n,(function(e,t){return function(e,t,r){for(var o=-1,n=e.criteria,i=t.criteria,s=n.length,a=r.length;++o<s;){var u=In(n[o],i[o]);if(u)return o>=a?u:u*("desc"==r[o]?-1:1)}return e.index-t.index}(e,t,r)}))}function jo(e,t,r){for(var o=-1,n=t.length,i={};++o<n;){var s=t[o],a=yo(e,s);r(a,s)&&Ko(i,gn(s,e),a)}return i}function Fo(e,t,r,o){var n=o?Bt:Vt,i=-1,s=t.length,a=e;for(e===t&&(t=Cn(t)),r&&(a=Dt(e,qt(r)));++i<s;)for(var u=0,d=t[i],c=r?r(d):d;(u=n(a,c,u,o))>-1;)a!==e&&ze.call(a,u,1),ze.call(e,u,1);return e}function Wo(e,t){for(var r=e?t.length:0,o=r-1;r--;){var n=t[r];if(r==o||n!==i){var i=n;mi(n)?ze.call(e,n,1):an(e,n)}}return e}function xo(e,t){return e+ht(vr()*(t-e+1))}function $o(e,t){var r="";if(!e||t<1||t>d)return r;do{t%2&&(r+=e),(t=ht(t/2))&&(e+=e)}while(t);return r}function Go(e,t){return Ri(Ii(e,t,Za),e+"")}function zo(e){return zr(ka(e))}function qo(e,t){var r=ka(e);return wi(r,ro(t,0,r.length))}function Ko(e,t,o,n){if(!Js(e))return e;for(var i=-1,s=(t=gn(t,e)).length,a=s-1,u=e;null!=u&&++i<s;){var d=Mi(t[i]),c=o;if("__proto__"===d||"constructor"===d||"prototype"===d)return e;if(i!=a){var l=u[d];(c=n?n(l,d,u):r)===r&&(c=Js(l)?l:mi(t[i+1])?[]:{})}Qr(u,d,c),u=u[d]}return e}var Jo=Cr?function(e,t){return Cr.set(e,t),e}:Za,Qo=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:Ja(t),writable:!0})}:Za;function Yo(e){return wi(ka(e))}function Zo(e,t,r){var o=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var i=re(n);++o<n;)i[o]=e[o+t];return i}function Xo(e,t){var r;return ao(e,(function(e,o,n){return!(r=t(e,o,n))})),!!r}function en(e,t,r){var o=0,n=null==e?o:e.length;if("number"==typeof t&&t==t&&n<=2147483647){for(;o<n;){var i=o+n>>>1,s=e[i];null!==s&&!oa(s)&&(r?s<=t:s<t)?o=i+1:n=i}return n}return tn(e,t,Za,r)}function tn(e,t,o,n){var i=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=o(t))!=t,u=null===t,d=oa(t),c=t===r;i<s;){var l=ht((i+s)/2),p=o(e[l]),h=p!==r,m=null===p,g=p==p,S=oa(p);if(a)var v=n||g;else v=c?g&&(n||h):u?g&&h&&(n||!m):d?g&&h&&!m&&(n||!S):!m&&!S&&(n?p<=t:p<t);v?i=l+1:s=l}return mr(s,4294967294)}function rn(e,t){for(var r=-1,o=e.length,n=0,i=[];++r<o;){var s=e[r],a=t?t(s):s;if(!r||!ks(a,u)){var u=a;i[n++]=0===s?0:s}}return i}function on(e){return"number"==typeof e?e:oa(e)?c:+e}function nn(e){if("string"==typeof e)return e;if(Hs(e))return Dt(e,nn)+"";if(oa(e))return Lr?Lr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function sn(e,t,r){var o=-1,n=Rt,i=e.length,s=!0,a=[],u=a;if(r)s=!1,n=Ot;else if(i>=200){var d=t?null:Gn(e);if(d)return ir(d);s=!1,n=Jt,u=new xr}else u=t?[]:a;e:for(;++o<i;){var c=e[o],l=t?t(c):c;if(c=r||0!==c?c:0,s&&l==l){for(var p=u.length;p--;)if(u[p]===l)continue e;t&&u.push(l),a.push(c)}else n(u,l,r)||(u!==a&&u.push(l),a.push(c))}return a}function an(e,t){return null==(e=Ai(e,t=gn(t,e)))||delete e[Mi(Gi(t))]}function un(e,t,r,o){return Ko(e,t,r(yo(e,t)),o)}function dn(e,t,r,o){for(var n=e.length,i=o?n:-1;(o?i--:++i<n)&&t(e[i],i,e););return r?Zo(e,o?0:i,o?i+1:n):Zo(e,o?i+1:0,o?n:i)}function cn(e,t){var r=e;return r instanceof Hr&&(r=r.value()),Nt(t,(function(e,t){return t.func.apply(t.thisArg,wt([e],t.args))}),r)}function ln(e,t,r){var o=e.length;if(o<2)return o?sn(e[0]):[];for(var n=-1,i=re(o);++n<o;)for(var s=e[n],a=-1;++a<o;)a!=n&&(i[n]=so(i[n]||s,e[a],t,r));return sn(ho(i,1),t,r)}function pn(e,t,o){for(var n=-1,i=e.length,s=t.length,a={};++n<i;){var u=n<s?t[n]:r;o(a,e[n],u)}return a}function hn(e){return Ws(e)?e:[]}function mn(e){return"function"==typeof e?e:Za}function gn(e,t){return Hs(e)?e:Si(e,t)?[e]:Ni(ha(e))}var Sn=Go;function vn(e,t,o){var n=e.length;return o=o===r?n:o,!t&&o>=n?e:Zo(e,t,o)}var fn=at||function(e){return dt.clearTimeout(e)};function yn(e,t){if(t)return e.slice();var r=e.length,o=We?We(r):new e.constructor(r);return e.copy(o),o}function En(e){var t=new e.constructor(e.byteLength);return new Fe(t).set(new Fe(e)),t}function _n(e,t){var r=t?En(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function In(e,t){if(e!==t){var o=e!==r,n=null===e,i=e==e,s=oa(e),a=t!==r,u=null===t,d=t==t,c=oa(t);if(!u&&!c&&!s&&e>t||s&&a&&d&&!u&&!c||n&&a&&d||!o&&d||!i)return 1;if(!n&&!s&&!c&&e<t||c&&o&&i&&!n&&!s||u&&o&&i||!a&&i||!d)return-1}return 0}function An(e,t,r,o){for(var n=-1,i=e.length,s=r.length,a=-1,u=t.length,d=hr(i-s,0),c=re(u+d),l=!o;++a<u;)c[a]=t[a];for(;++n<s;)(l||n<i)&&(c[r[n]]=e[n]);for(;d--;)c[a++]=e[n++];return c}function bn(e,t,r,o){for(var n=-1,i=e.length,s=-1,a=r.length,u=-1,d=t.length,c=hr(i-a,0),l=re(c+d),p=!o;++n<c;)l[n]=e[n];for(var h=n;++u<d;)l[h+u]=t[u];for(;++s<a;)(p||n<i)&&(l[h+r[s]]=e[n++]);return l}function Cn(e,t){var r=-1,o=e.length;for(t||(t=re(o));++r<o;)t[r]=e[r];return t}function Tn(e,t,o,n){var i=!o;o||(o={});for(var s=-1,a=t.length;++s<a;){var u=t[s],d=n?n(o[u],e[u],u,o,e):r;d===r&&(d=e[u]),i?eo(o,u,d):Qr(o,u,d)}return o}function Rn(e,t){return function(r,o){var n=Hs(r)?It:Zr,i=t?t():{};return n(r,e,ni(o,2),i)}}function On(e){return Go((function(t,o){var n=-1,i=o.length,s=i>1?o[i-1]:r,a=i>2?o[2]:r;for(s=e.length>3&&"function"==typeof s?(i--,s):r,a&&gi(o[0],o[1],a)&&(s=i<3?r:s,i=1),t=Ae(t);++n<i;){var u=o[n];u&&e(t,u,n,s)}return t}))}function Dn(e,t){return function(r,o){if(null==r)return r;if(!Fs(r))return e(r,o);for(var n=r.length,i=t?n:-1,s=Ae(r);(t?i--:++i<n)&&!1!==o(s[i],i,s););return r}}function wn(e){return function(t,r,o){for(var n=-1,i=Ae(t),s=o(t),a=s.length;a--;){var u=s[e?a:++n];if(!1===r(i[u],u,i))break}return t}}function Nn(e){return function(t){var o=tr(t=ha(t))?ar(t):r,n=o?o[0]:t.charAt(0),i=o?vn(o,1).join(""):t.slice(1);return n[e]()+i}}function Mn(e){return function(t){return Nt(za(Ba(t).replace(Ke,"")),e,"")}}function Pn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Ur(e.prototype),o=e.apply(r,t);return Js(o)?o:r}}function Ln(e){return function(t,o,n){var i=Ae(t);if(!Fs(t)){var s=ni(o,3);t=Ta(t),o=function(e){return s(i[e],e,i)}}var a=e(t,o,n);return a>-1?i[s?t[a]:a]:r}}function kn(e){return Zn((function(t){var n=t.length,i=n,s=Br.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new Te(o);if(s&&!u&&"wrapper"==ri(a))var u=new Br([],!0)}for(i=u?i:n;++i<n;){var d=ri(a=t[i]),c="wrapper"==d?ti(a):r;u=c&&vi(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ri(c[0])].apply(u,c[3]):1==a.length&&vi(a)?u[d]():u.thru(a)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Hs(r))return u.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}}))}function Un(e,t,o,n,i,s,u,d,c,l){var p=t&a,h=1&t,m=2&t,g=24&t,S=512&t,v=m?r:Pn(e);return function a(){for(var f=arguments.length,y=re(f),E=f;E--;)y[E]=arguments[E];if(g)var _=oi(a),I=function(e,t){for(var r=e.length,o=0;r--;)e[r]===t&&++o;return o}(y,_);if(n&&(y=An(y,n,i,g)),s&&(y=bn(y,s,u,g)),f-=I,g&&f<l){var A=nr(y,_);return xn(e,t,Un,a.placeholder,o,y,A,d,c,l-f)}var b=h?o:this,C=m?b[e]:e;return f=y.length,d?y=function(e,t){for(var o=e.length,n=mr(t.length,o),i=Cn(e);n--;){var s=t[n];e[n]=mi(s,o)?i[s]:r}return e}(y,d):S&&f>1&&y.reverse(),p&&c<f&&(y.length=c),this&&this!==dt&&this instanceof a&&(C=v||Pn(C)),C.apply(b,y)}}function Vn(e,t){return function(r,o){return function(e,t,r,o){return So(e,(function(e,n,i){t(o,r(e),n,i)})),o}(r,e,t(o),{})}}function Bn(e,t){return function(o,n){var i;if(o===r&&n===r)return t;if(o!==r&&(i=o),n!==r){if(i===r)return n;"string"==typeof o||"string"==typeof n?(o=nn(o),n=nn(n)):(o=on(o),n=on(n)),i=e(o,n)}return i}}function Hn(e){return Zn((function(t){return t=Dt(t,qt(ni())),Go((function(r){var o=this;return e(t,(function(e){return _t(e,o,r)}))}))}))}function jn(e,t){var o=(t=t===r?" ":nn(t)).length;if(o<2)return o?$o(t,e):t;var n=$o(t,lt(e/sr(t)));return tr(t)?vn(ar(n),0,e).join(""):n.slice(0,e)}function Fn(e){return function(t,o,n){return n&&"number"!=typeof n&&gi(t,o,n)&&(o=n=r),t=ua(t),o===r?(o=t,t=0):o=ua(o),function(e,t,r,o){for(var n=-1,i=hr(lt((t-e)/(r||1)),0),s=re(i);i--;)s[o?i:++n]=e,e+=r;return s}(t,o,n=n===r?t<o?1:-1:ua(n),e)}}function Wn(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=la(t),r=la(r)),e(t,r)}}function xn(e,t,o,n,i,a,u,d,c,l){var p=8&t;t|=p?s:64,4&(t&=~(p?64:s))||(t&=-4);var h=[e,t,i,p?a:r,p?u:r,p?r:a,p?r:u,d,c,l],m=o.apply(r,h);return vi(e)&&Ci(m,h),m.placeholder=n,Oi(m,e,t)}function $n(e){var t=Ie[e];return function(e,r){if(e=la(e),(r=null==r?0:mr(da(r),292))&&Wt(e)){var o=(ha(e)+"e").split("e");return+((o=(ha(t(o[0]+"e"+(+o[1]+r)))+"e").split("e"))[0]+"e"+(+o[1]-r))}return t(e)}}var Gn=Ir&&1/ir(new Ir([,-0]))[1]==u?function(e){return new Ir(e)}:ou;function zn(e){return function(t){var r=ci(t);return r==E?rr(t):r==C?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return Dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function qn(e,t,n,u,d,c,l,p){var h=2&t;if(!h&&"function"!=typeof e)throw new Te(o);var m=u?u.length:0;if(m||(t&=-97,u=d=r),l=l===r?l:hr(da(l),0),p=p===r?p:da(p),m-=d?d.length:0,64&t){var g=u,S=d;u=d=r}var v=h?r:ti(e),f=[e,t,n,u,d,g,S,c,l,p];if(v&&function(e,t){var r=e[1],o=t[1],n=r|o,s=n<131,u=o==a&&8==r||o==a&&256==r&&e[7].length<=t[8]||384==o&&t[7].length<=t[8]&&8==r;if(!s&&!u)return e;1&o&&(e[2]=t[2],n|=1&r?0:4);var d=t[3];if(d){var c=e[3];e[3]=c?An(c,d,t[4]):d,e[4]=c?nr(e[3],i):t[4]}(d=t[5])&&(c=e[5],e[5]=c?bn(c,d,t[6]):d,e[6]=c?nr(e[5],i):t[6]),(d=t[7])&&(e[7]=d),o&a&&(e[8]=null==e[8]?t[8]:mr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=n}(f,v),e=f[0],t=f[1],n=f[2],u=f[3],d=f[4],!(p=f[9]=f[9]===r?h?0:e.length:hr(f[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)y=8==t||16==t?function(e,t,o){var n=Pn(e);return function i(){for(var s=arguments.length,a=re(s),u=s,d=oi(i);u--;)a[u]=arguments[u];var c=s<3&&a[0]!==d&&a[s-1]!==d?[]:nr(a,d);return(s-=c.length)<o?xn(e,t,Un,i.placeholder,r,a,c,r,r,o-s):_t(this&&this!==dt&&this instanceof i?n:e,this,a)}}(e,t,p):t!=s&&33!=t||d.length?Un.apply(r,f):function(e,t,r,o){var n=1&t,i=Pn(e);return function t(){for(var s=-1,a=arguments.length,u=-1,d=o.length,c=re(d+a),l=this&&this!==dt&&this instanceof t?i:e;++u<d;)c[u]=o[u];for(;a--;)c[u++]=arguments[++s];return _t(l,n?r:this,c)}}(e,t,n,u);else var y=function(e,t,r){var o=1&t,n=Pn(e);return function t(){return(this&&this!==dt&&this instanceof t?n:e).apply(o?r:this,arguments)}}(e,t,n);return Oi((v?Jo:Ci)(y,f),e,t)}function Kn(e,t,o,n){return e===r||ks(e,De[o])&&!Me.call(n,o)?t:e}function Jn(e,t,o,n,i,s){return Js(e)&&Js(t)&&(s.set(t,e),Vo(e,t,r,Jn,s),s.delete(t)),e}function Qn(e){return Xs(e)?r:e}function Yn(e,t,o,n,i,s){var a=1&o,u=e.length,d=t.length;if(u!=d&&!(a&&d>u))return!1;var c=s.get(e),l=s.get(t);if(c&&l)return c==t&&l==e;var p=-1,h=!0,m=2&o?new xr:r;for(s.set(e,t),s.set(t,e);++p<u;){var g=e[p],S=t[p];if(n)var v=a?n(S,g,p,t,e,s):n(g,S,p,e,t,s);if(v!==r){if(v)continue;h=!1;break}if(m){if(!Pt(t,(function(e,t){if(!Jt(m,t)&&(g===e||i(g,e,o,n,s)))return m.push(t)}))){h=!1;break}}else if(g!==S&&!i(g,S,o,n,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Zn(e){return Ri(Ii(e,r,ji),e+"")}function Xn(e){return Eo(e,Ta,ui)}function ei(e){return Eo(e,Ra,di)}var ti=Cr?function(e){return Cr.get(e)}:ou;function ri(e){for(var t=e.name+"",r=Tr[t],o=Me.call(Tr,t)?r.length:0;o--;){var n=r[o],i=n.func;if(null==i||i==e)return n.name}return t}function oi(e){return(Me.call(kr,"placeholder")?kr:e).placeholder}function ni(){var e=kr.iteratee||Xa;return e=e===Xa?No:e,arguments.length?e(arguments[0],arguments[1]):e}function ii(e,t){var r,o,n=e.__data__;return("string"==(o=typeof(r=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map}function si(e){for(var t=Ta(e),r=t.length;r--;){var o=t[r],n=e[o];t[r]=[o,n,Ei(n)]}return t}function ai(e,t){var o=function(e,t){return null==e?r:e[t]}(e,t);return wo(o)?o:r}var ui=mt?function(e){return null==e?[]:(e=Ae(e),Tt(mt(e),(function(t){return Ge.call(e,t)})))}:cu,di=mt?function(e){for(var t=[];e;)wt(t,ui(e)),e=xe(e);return t}:cu,ci=_o;function li(e,t,r){for(var o=-1,n=(t=gn(t,e)).length,i=!1;++o<n;){var s=Mi(t[o]);if(!(i=null!=e&&r(e,s)))break;e=e[s]}return i||++o!=n?i:!!(n=null==e?0:e.length)&&Ks(n)&&mi(s,n)&&(Hs(e)||Bs(e))}function pi(e){return"function"!=typeof e.constructor||yi(e)?{}:Ur(xe(e))}function hi(e){return Hs(e)||Bs(e)||!!(qe&&e&&e[qe])}function mi(e,t){var r=typeof e;return!!(t=null==t?d:t)&&("number"==r||"symbol"!=r&&ge.test(e))&&e>-1&&e%1==0&&e<t}function gi(e,t,r){if(!Js(r))return!1;var o=typeof t;return!!("number"==o?Fs(r)&&mi(t,r.length):"string"==o&&t in r)&&ks(r[t],e)}function Si(e,t){if(Hs(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!oa(e))||Y.test(e)||!Q.test(e)||null!=t&&e in Ae(t)}function vi(e){var t=ri(e),r=kr[t];if("function"!=typeof r||!(t in Hr.prototype))return!1;if(e===r)return!0;var o=ti(r);return!!o&&e===o[0]}(yr&&ci(new yr(new ArrayBuffer(1)))!=w||Er&&ci(new Er)!=E||_r&&ci(_r.resolve())!=A||Ir&&ci(new Ir)!=C||Ar&&ci(new Ar)!=O)&&(ci=function(e){var t=_o(e),o=t==I?e.constructor:r,n=o?Pi(o):"";if(n)switch(n){case Rr:return w;case Or:return E;case Dr:return A;case wr:return C;case Nr:return O}return t});var fi=we?zs:lu;function yi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||De)}function Ei(e){return e==e&&!Js(e)}function _i(e,t){return function(o){return null!=o&&o[e]===t&&(t!==r||e in Ae(o))}}function Ii(e,t,o){return t=hr(t===r?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=hr(r.length-t,0),s=re(i);++n<i;)s[n]=r[t+n];n=-1;for(var a=re(t+1);++n<t;)a[n]=r[n];return a[t]=o(s),_t(e,this,a)}}function Ai(e,t){return t.length<2?e:yo(e,Zo(t,0,-1))}function bi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ci=Di(Jo),Ti=ct||function(e,t){return dt.setTimeout(e,t)},Ri=Di(Qo);function Oi(e,t,r){var o=t+"";return Ri(e,function(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(o,function(e,t){return At(p,(function(r){var o="_."+r[0];t&r[1]&&!Rt(e,o)&&e.push(o)})),e.sort()}(function(e){var t=e.match(ne);return t?t[1].split(ie):[]}(o),r)))}function Di(e){var t=0,o=0;return function(){var n=gr(),i=16-(n-o);if(o=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function wi(e,t){var o=-1,n=e.length,i=n-1;for(t=t===r?n:t;++o<t;){var s=xo(o,i),a=e[s];e[s]=e[o],e[o]=a}return e.length=t,e}var Ni=function(){var e=Ds((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Z,(function(e,r,o,n){t.push(o?n.replace(ue,"$1"):r||e)})),t}),(function(e){return 500===t.size&&t.clear(),e})),t=e.cache;return e}();function Mi(e){if("string"==typeof e||oa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Pi(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Li(e){if(e instanceof Hr)return e.clone();var t=new Br(e.__wrapped__,e.__chain__);return t.__actions__=Cn(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ki=Go((function(e,t){return Ws(e)?so(e,ho(t,1,Ws,!0)):[]})),Ui=Go((function(e,t){var o=Gi(t);return Ws(o)&&(o=r),Ws(e)?so(e,ho(t,1,Ws,!0),ni(o,2)):[]})),Vi=Go((function(e,t){var o=Gi(t);return Ws(o)&&(o=r),Ws(e)?so(e,ho(t,1,Ws,!0),r,o):[]}));function Bi(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var n=null==r?0:da(r);return n<0&&(n=hr(o+n,0)),Ut(e,ni(t,3),n)}function Hi(e,t,o){var n=null==e?0:e.length;if(!n)return-1;var i=n-1;return o!==r&&(i=da(o),i=o<0?hr(n+i,0):mr(i,n-1)),Ut(e,ni(t,3),i,!0)}function ji(e){return null!=e&&e.length?ho(e,1):[]}function Fi(e){return e&&e.length?e[0]:r}var Wi=Go((function(e){var t=Dt(e,hn);return t.length&&t[0]===e[0]?Co(t):[]})),xi=Go((function(e){var t=Gi(e),o=Dt(e,hn);return t===Gi(o)?t=r:o.pop(),o.length&&o[0]===e[0]?Co(o,ni(t,2)):[]})),$i=Go((function(e){var t=Gi(e),o=Dt(e,hn);return(t="function"==typeof t?t:r)&&o.pop(),o.length&&o[0]===e[0]?Co(o,r,t):[]}));function Gi(e){var t=null==e?0:e.length;return t?e[t-1]:r}var zi=Go(qi);function qi(e,t){return e&&e.length&&t&&t.length?Fo(e,t):e}var Ki=Zn((function(e,t){var r=null==e?0:e.length,o=to(e,t);return Wo(e,Dt(t,(function(e){return mi(e,r)?+e:e})).sort(In)),o}));function Ji(e){return null==e?e:fr.call(e)}var Qi=Go((function(e){return sn(ho(e,1,Ws,!0))})),Yi=Go((function(e){var t=Gi(e);return Ws(t)&&(t=r),sn(ho(e,1,Ws,!0),ni(t,2))})),Zi=Go((function(e){var t=Gi(e);return t="function"==typeof t?t:r,sn(ho(e,1,Ws,!0),r,t)}));function Xi(e){if(!e||!e.length)return[];var t=0;return e=Tt(e,(function(e){if(Ws(e))return t=hr(e.length,t),!0})),Gt(t,(function(t){return Dt(e,Ft(t))}))}function es(e,t){if(!e||!e.length)return[];var o=Xi(e);return null==t?o:Dt(o,(function(e){return _t(t,r,e)}))}var ts=Go((function(e,t){return Ws(e)?so(e,t):[]})),rs=Go((function(e){return ln(Tt(e,Ws))})),os=Go((function(e){var t=Gi(e);return Ws(t)&&(t=r),ln(Tt(e,Ws),ni(t,2))})),ns=Go((function(e){var t=Gi(e);return t="function"==typeof t?t:r,ln(Tt(e,Ws),r,t)})),is=Go(Xi),ss=Go((function(e){var t=e.length,o=t>1?e[t-1]:r;return o="function"==typeof o?(e.pop(),o):r,es(e,o)}));function as(e){var t=kr(e);return t.__chain__=!0,t}function us(e,t){return t(e)}var ds=Zn((function(e){var t=e.length,o=t?e[0]:0,n=this.__wrapped__,i=function(t){return to(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Hr&&mi(o)?((n=n.slice(o,+o+(t?1:0))).__actions__.push({func:us,args:[i],thisArg:r}),new Br(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(i)})),cs=Rn((function(e,t,r){Me.call(e,r)?++e[r]:eo(e,r,1)})),ls=Ln(Bi),ps=Ln(Hi);function hs(e,t){return(Hs(e)?At:ao)(e,ni(t,3))}function ms(e,t){return(Hs(e)?bt:uo)(e,ni(t,3))}var gs=Rn((function(e,t,r){Me.call(e,r)?e[r].push(t):eo(e,r,[t])})),Ss=Go((function(e,t,r){var o=-1,n="function"==typeof t,i=Fs(e)?re(e.length):[];return ao(e,(function(e){i[++o]=n?_t(t,e,r):To(e,t,r)})),i})),vs=Rn((function(e,t,r){eo(e,r,t)}));function fs(e,t){return(Hs(e)?Dt:Lo)(e,ni(t,3))}var ys=Rn((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),Es=Go((function(e,t){if(null==e)return[];var r=t.length;return r>1&&gi(e,t[0],t[1])?t=[]:r>2&&gi(t[0],t[1],t[2])&&(t=[t[0]]),Ho(e,ho(t,1),[])})),_s=ut||function(){return dt.Date.now()};function Is(e,t,o){return t=o?r:t,t=e&&null==t?e.length:t,qn(e,a,r,r,r,r,t)}function As(e,t){var n;if("function"!=typeof t)throw new Te(o);return e=da(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var bs=Go((function(e,t,r){var o=1;if(r.length){var n=nr(r,oi(bs));o|=s}return qn(e,o,t,r,n)})),Cs=Go((function(e,t,r){var o=3;if(r.length){var n=nr(r,oi(Cs));o|=s}return qn(t,o,e,r,n)}));function Ts(e,t,n){var i,s,a,u,d,c,l=0,p=!1,h=!1,m=!0;if("function"!=typeof e)throw new Te(o);function g(t){var o=i,n=s;return i=s=r,l=t,u=e.apply(n,o)}function S(e){var o=e-c;return c===r||o>=t||o<0||h&&e-l>=a}function v(){var e=_s();if(S(e))return f(e);d=Ti(v,function(e){var r=t-(e-c);return h?mr(r,a-(e-l)):r}(e))}function f(e){return d=r,m&&i?g(e):(i=s=r,u)}function y(){var e=_s(),o=S(e);if(i=arguments,s=this,c=e,o){if(d===r)return function(e){return l=e,d=Ti(v,t),p?g(e):u}(c);if(h)return fn(d),d=Ti(v,t),g(c)}return d===r&&(d=Ti(v,t)),u}return t=la(t)||0,Js(n)&&(p=!!n.leading,a=(h="maxWait"in n)?hr(la(n.maxWait)||0,t):a,m="trailing"in n?!!n.trailing:m),y.cancel=function(){d!==r&&fn(d),l=0,i=c=s=d=r},y.flush=function(){return d===r?u:f(_s())},y}var Rs=Go((function(e,t){return io(e,1,t)})),Os=Go((function(e,t,r){return io(e,la(t)||0,r)}));function Ds(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Te(o);var r=function(){var o=arguments,n=t?t.apply(this,o):o[0],i=r.cache;if(i.has(n))return i.get(n);var s=e.apply(this,o);return r.cache=i.set(n,s)||i,s};return r.cache=new(Ds.Cache||Wr),r}function ws(e){if("function"!=typeof e)throw new Te(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ds.Cache=Wr;var Ns=Sn((function(e,t){var r=(t=1==t.length&&Hs(t[0])?Dt(t[0],qt(ni())):Dt(ho(t,1),qt(ni()))).length;return Go((function(o){for(var n=-1,i=mr(o.length,r);++n<i;)o[n]=t[n].call(this,o[n]);return _t(e,this,o)}))})),Ms=Go((function(e,t){var o=nr(t,oi(Ms));return qn(e,s,r,t,o)})),Ps=Go((function(e,t){var o=nr(t,oi(Ps));return qn(e,64,r,t,o)})),Ls=Zn((function(e,t){return qn(e,256,r,r,r,t)}));function ks(e,t){return e===t||e!=e&&t!=t}var Us=Wn(Io),Vs=Wn((function(e,t){return e>=t})),Bs=Ro(function(){return arguments}())?Ro:function(e){return Qs(e)&&Me.call(e,"callee")&&!Ge.call(e,"callee")},Hs=re.isArray,js=gt?qt(gt):function(e){return Qs(e)&&_o(e)==D};function Fs(e){return null!=e&&Ks(e.length)&&!zs(e)}function Ws(e){return Qs(e)&&Fs(e)}var xs=Lt||lu,$s=St?qt(St):function(e){return Qs(e)&&_o(e)==S};function Gs(e){if(!Qs(e))return!1;var t=_o(e);return t==v||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Xs(e)}function zs(e){if(!Js(e))return!1;var t=_o(e);return t==f||t==y||"[object AsyncFunction]"==t||"[object Proxy]"==t}function qs(e){return"number"==typeof e&&e==da(e)}function Ks(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function Js(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Qs(e){return null!=e&&"object"==typeof e}var Ys=vt?qt(vt):function(e){return Qs(e)&&ci(e)==E};function Zs(e){return"number"==typeof e||Qs(e)&&_o(e)==_}function Xs(e){if(!Qs(e)||_o(e)!=I)return!1;var t=xe(e);if(null===t)return!0;var r=Me.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Ne.call(r)==Ue}var ea=ft?qt(ft):function(e){return Qs(e)&&_o(e)==b},ta=yt?qt(yt):function(e){return Qs(e)&&ci(e)==C};function ra(e){return"string"==typeof e||!Hs(e)&&Qs(e)&&_o(e)==T}function oa(e){return"symbol"==typeof e||Qs(e)&&_o(e)==R}var na=Et?qt(Et):function(e){return Qs(e)&&Ks(e.length)&&!!rt[_o(e)]},ia=Wn(Po),sa=Wn((function(e,t){return e<=t}));function aa(e){if(!e)return[];if(Fs(e))return ra(e)?ar(e):Cn(e);if(Qe&&e[Qe])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Qe]());var t=ci(e);return(t==E?rr:t==C?ir:ka)(e)}function ua(e){return e?(e=la(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function da(e){var t=ua(e),r=t%1;return t==t?r?t-r:t:0}function ca(e){return e?ro(da(e),0,l):0}function la(e){if("number"==typeof e)return e;if(oa(e))return c;if(Js(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Js(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=zt(e);var r=pe.test(e);return r||me.test(e)?st(e.slice(2),r?2:8):le.test(e)?c:+e}function pa(e){return Tn(e,Ra(e))}function ha(e){return null==e?"":nn(e)}var ma=On((function(e,t){if(yi(t)||Fs(t))Tn(t,Ta(t),e);else for(var r in t)Me.call(t,r)&&Qr(e,r,t[r])})),ga=On((function(e,t){Tn(t,Ra(t),e)})),Sa=On((function(e,t,r,o){Tn(t,Ra(t),e,o)})),va=On((function(e,t,r,o){Tn(t,Ta(t),e,o)})),fa=Zn(to),ya=Go((function(e,t){e=Ae(e);var o=-1,n=t.length,i=n>2?t[2]:r;for(i&&gi(t[0],t[1],i)&&(n=1);++o<n;)for(var s=t[o],a=Ra(s),u=-1,d=a.length;++u<d;){var c=a[u],l=e[c];(l===r||ks(l,De[c])&&!Me.call(e,c))&&(e[c]=s[c])}return e})),Ea=Go((function(e){return e.push(r,Jn),_t(Da,r,e)}));function _a(e,t,o){var n=null==e?r:yo(e,t);return n===r?o:n}function Ia(e,t){return null!=e&&li(e,t,bo)}var Aa=Vn((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ke.call(t)),e[t]=r}),Ja(Za)),ba=Vn((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ke.call(t)),Me.call(e,t)?e[t].push(r):e[t]=[r]}),ni),Ca=Go(To);function Ta(e){return Fs(e)?Gr(e):Mo(e)}function Ra(e){return Fs(e)?Gr(e,!0):function(e){if(!Js(e))return function(e){var t=[];if(null!=e)for(var r in Ae(e))t.push(r);return t}(e);var t=yi(e),r=[];for(var o in e)("constructor"!=o||!t&&Me.call(e,o))&&r.push(o);return r}(e)}var Oa=On((function(e,t,r){Vo(e,t,r)})),Da=On((function(e,t,r,o){Vo(e,t,r,o)})),wa=Zn((function(e,t){var r={};if(null==e)return r;var o=!1;t=Dt(t,(function(t){return t=gn(t,e),o||(o=t.length>1),t})),Tn(e,ei(e),r),o&&(r=oo(r,7,Qn));for(var n=t.length;n--;)an(r,t[n]);return r})),Na=Zn((function(e,t){return null==e?{}:function(e,t){return jo(e,t,(function(t,r){return Ia(e,r)}))}(e,t)}));function Ma(e,t){if(null==e)return{};var r=Dt(ei(e),(function(e){return[e]}));return t=ni(t),jo(e,r,(function(e,r){return t(e,r[0])}))}var Pa=zn(Ta),La=zn(Ra);function ka(e){return null==e?[]:Kt(e,Ta(e))}var Ua=Mn((function(e,t,r){return t=t.toLowerCase(),e+(r?Va(t):t)}));function Va(e){return Ga(ha(e).toLowerCase())}function Ba(e){return(e=ha(e))&&e.replace(Se,Zt).replace(Je,"")}var Ha=Mn((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),ja=Mn((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Fa=Nn("toLowerCase"),Wa=Mn((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),xa=Mn((function(e,t,r){return e+(r?" ":"")+Ga(t)})),$a=Mn((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Ga=Nn("toUpperCase");function za(e,t,o){return e=ha(e),(t=o?r:t)===r?function(e){return Xe.test(e)}(e)?function(e){return e.match(Ye)||[]}(e):function(e){return e.match(se)||[]}(e):e.match(t)||[]}var qa=Go((function(e,t){try{return _t(e,r,t)}catch(e){return Gs(e)?e:new Ee(e)}})),Ka=Zn((function(e,t){return At(t,(function(t){t=Mi(t),eo(e,t,bs(e[t],e))})),e}));function Ja(e){return function(){return e}}var Qa=kn(),Ya=kn(!0);function Za(e){return e}function Xa(e){return No("function"==typeof e?e:oo(e,1))}var eu=Go((function(e,t){return function(r){return To(r,e,t)}})),tu=Go((function(e,t){return function(r){return To(e,r,t)}}));function ru(e,t,r){var o=Ta(t),n=fo(t,o);null!=r||Js(t)&&(n.length||!o.length)||(r=t,t=e,e=this,n=fo(t,Ta(t)));var i=!(Js(r)&&"chain"in r&&!r.chain),s=zs(e);return At(n,(function(r){var o=t[r];e[r]=o,s&&(e.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=e(this.__wrapped__);return(r.__actions__=Cn(this.__actions__)).push({func:o,args:arguments,thisArg:e}),r.__chain__=t,r}return o.apply(e,wt([this.value()],arguments))})})),e}function ou(){}var nu=Hn(Dt),iu=Hn(Ct),su=Hn(Pt);function au(e){return Si(e)?Ft(Mi(e)):function(e){return function(t){return yo(t,e)}}(e)}var uu=Fn(),du=Fn(!0);function cu(){return[]}function lu(){return!1}var pu,hu=Bn((function(e,t){return e+t}),0),mu=$n("ceil"),gu=Bn((function(e,t){return e/t}),1),Su=$n("floor"),vu=Bn((function(e,t){return e*t}),1),fu=$n("round"),yu=Bn((function(e,t){return e-t}),0);return kr.after=function(e,t){if("function"!=typeof t)throw new Te(o);return e=da(e),function(){if(--e<1)return t.apply(this,arguments)}},kr.ary=Is,kr.assign=ma,kr.assignIn=ga,kr.assignInWith=Sa,kr.assignWith=va,kr.at=fa,kr.before=As,kr.bind=bs,kr.bindAll=Ka,kr.bindKey=Cs,kr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Hs(e)?e:[e]},kr.chain=as,kr.chunk=function(e,t,o){t=(o?gi(e,t,o):t===r)?1:hr(da(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var i=0,s=0,a=re(lt(n/t));i<n;)a[s++]=Zo(e,i,i+=t);return a},kr.compact=function(e){for(var t=-1,r=null==e?0:e.length,o=0,n=[];++t<r;){var i=e[t];i&&(n[o++]=i)}return n},kr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=re(e-1),r=arguments[0],o=e;o--;)t[o-1]=arguments[o];return wt(Hs(r)?Cn(r):[r],ho(t,1))},kr.cond=function(e){var t=null==e?0:e.length,r=ni();return e=t?Dt(e,(function(e){if("function"!=typeof e[1])throw new Te(o);return[r(e[0]),e[1]]})):[],Go((function(r){for(var o=-1;++o<t;){var n=e[o];if(_t(n[0],this,r))return _t(n[1],this,r)}}))},kr.conforms=function(e){return function(e){var t=Ta(e);return function(r){return no(r,e,t)}}(oo(e,1))},kr.constant=Ja,kr.countBy=cs,kr.create=function(e,t){var r=Ur(e);return null==t?r:Xr(r,t)},kr.curry=function e(t,o,n){var i=qn(t,8,r,r,r,r,r,o=n?r:o);return i.placeholder=e.placeholder,i},kr.curryRight=function e(t,o,n){var i=qn(t,16,r,r,r,r,r,o=n?r:o);return i.placeholder=e.placeholder,i},kr.debounce=Ts,kr.defaults=ya,kr.defaultsDeep=Ea,kr.defer=Rs,kr.delay=Os,kr.difference=ki,kr.differenceBy=Ui,kr.differenceWith=Vi,kr.drop=function(e,t,o){var n=null==e?0:e.length;return n?Zo(e,(t=o||t===r?1:da(t))<0?0:t,n):[]},kr.dropRight=function(e,t,o){var n=null==e?0:e.length;return n?Zo(e,0,(t=n-(t=o||t===r?1:da(t)))<0?0:t):[]},kr.dropRightWhile=function(e,t){return e&&e.length?dn(e,ni(t,3),!0,!0):[]},kr.dropWhile=function(e,t){return e&&e.length?dn(e,ni(t,3),!0):[]},kr.fill=function(e,t,o,n){var i=null==e?0:e.length;return i?(o&&"number"!=typeof o&&gi(e,t,o)&&(o=0,n=i),function(e,t,o,n){var i=e.length;for((o=da(o))<0&&(o=-o>i?0:i+o),(n=n===r||n>i?i:da(n))<0&&(n+=i),n=o>n?0:ca(n);o<n;)e[o++]=t;return e}(e,t,o,n)):[]},kr.filter=function(e,t){return(Hs(e)?Tt:po)(e,ni(t,3))},kr.flatMap=function(e,t){return ho(fs(e,t),1)},kr.flatMapDeep=function(e,t){return ho(fs(e,t),u)},kr.flatMapDepth=function(e,t,o){return o=o===r?1:da(o),ho(fs(e,t),o)},kr.flatten=ji,kr.flattenDeep=function(e){return null!=e&&e.length?ho(e,u):[]},kr.flattenDepth=function(e,t){return null!=e&&e.length?ho(e,t=t===r?1:da(t)):[]},kr.flip=function(e){return qn(e,512)},kr.flow=Qa,kr.flowRight=Ya,kr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,o={};++t<r;){var n=e[t];o[n[0]]=n[1]}return o},kr.functions=function(e){return null==e?[]:fo(e,Ta(e))},kr.functionsIn=function(e){return null==e?[]:fo(e,Ra(e))},kr.groupBy=gs,kr.initial=function(e){return null!=e&&e.length?Zo(e,0,-1):[]},kr.intersection=Wi,kr.intersectionBy=xi,kr.intersectionWith=$i,kr.invert=Aa,kr.invertBy=ba,kr.invokeMap=Ss,kr.iteratee=Xa,kr.keyBy=vs,kr.keys=Ta,kr.keysIn=Ra,kr.map=fs,kr.mapKeys=function(e,t){var r={};return t=ni(t,3),So(e,(function(e,o,n){eo(r,t(e,o,n),e)})),r},kr.mapValues=function(e,t){var r={};return t=ni(t,3),So(e,(function(e,o,n){eo(r,o,t(e,o,n))})),r},kr.matches=function(e){return ko(oo(e,1))},kr.matchesProperty=function(e,t){return Uo(e,oo(t,1))},kr.memoize=Ds,kr.merge=Oa,kr.mergeWith=Da,kr.method=eu,kr.methodOf=tu,kr.mixin=ru,kr.negate=ws,kr.nthArg=function(e){return e=da(e),Go((function(t){return Bo(t,e)}))},kr.omit=wa,kr.omitBy=function(e,t){return Ma(e,ws(ni(t)))},kr.once=function(e){return As(2,e)},kr.orderBy=function(e,t,o,n){return null==e?[]:(Hs(t)||(t=null==t?[]:[t]),Hs(o=n?r:o)||(o=null==o?[]:[o]),Ho(e,t,o))},kr.over=nu,kr.overArgs=Ns,kr.overEvery=iu,kr.overSome=su,kr.partial=Ms,kr.partialRight=Ps,kr.partition=ys,kr.pick=Na,kr.pickBy=Ma,kr.property=au,kr.propertyOf=function(e){return function(t){return null==e?r:yo(e,t)}},kr.pull=zi,kr.pullAll=qi,kr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Fo(e,t,ni(r,2)):e},kr.pullAllWith=function(e,t,o){return e&&e.length&&t&&t.length?Fo(e,t,r,o):e},kr.pullAt=Ki,kr.range=uu,kr.rangeRight=du,kr.rearg=Ls,kr.reject=function(e,t){return(Hs(e)?Tt:po)(e,ws(ni(t,3)))},kr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var o=-1,n=[],i=e.length;for(t=ni(t,3);++o<i;){var s=e[o];t(s,o,e)&&(r.push(s),n.push(o))}return Wo(e,n),r},kr.rest=function(e,t){if("function"!=typeof e)throw new Te(o);return Go(e,t=t===r?t:da(t))},kr.reverse=Ji,kr.sampleSize=function(e,t,o){return t=(o?gi(e,t,o):t===r)?1:da(t),(Hs(e)?qr:qo)(e,t)},kr.set=function(e,t,r){return null==e?e:Ko(e,t,r)},kr.setWith=function(e,t,o,n){return n="function"==typeof n?n:r,null==e?e:Ko(e,t,o,n)},kr.shuffle=function(e){return(Hs(e)?Kr:Yo)(e)},kr.slice=function(e,t,o){var n=null==e?0:e.length;return n?(o&&"number"!=typeof o&&gi(e,t,o)?(t=0,o=n):(t=null==t?0:da(t),o=o===r?n:da(o)),Zo(e,t,o)):[]},kr.sortBy=Es,kr.sortedUniq=function(e){return e&&e.length?rn(e):[]},kr.sortedUniqBy=function(e,t){return e&&e.length?rn(e,ni(t,2)):[]},kr.split=function(e,t,o){return o&&"number"!=typeof o&&gi(e,t,o)&&(t=o=r),(o=o===r?l:o>>>0)?(e=ha(e))&&("string"==typeof t||null!=t&&!ea(t))&&!(t=nn(t))&&tr(e)?vn(ar(e),0,o):e.split(t,o):[]},kr.spread=function(e,t){if("function"!=typeof e)throw new Te(o);return t=null==t?0:hr(da(t),0),Go((function(r){var o=r[t],n=vn(r,0,t);return o&&wt(n,o),_t(e,this,n)}))},kr.tail=function(e){var t=null==e?0:e.length;return t?Zo(e,1,t):[]},kr.take=function(e,t,o){return e&&e.length?Zo(e,0,(t=o||t===r?1:da(t))<0?0:t):[]},kr.takeRight=function(e,t,o){var n=null==e?0:e.length;return n?Zo(e,(t=n-(t=o||t===r?1:da(t)))<0?0:t,n):[]},kr.takeRightWhile=function(e,t){return e&&e.length?dn(e,ni(t,3),!1,!0):[]},kr.takeWhile=function(e,t){return e&&e.length?dn(e,ni(t,3)):[]},kr.tap=function(e,t){return t(e),e},kr.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new Te(o);return Js(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Ts(e,t,{leading:n,maxWait:t,trailing:i})},kr.thru=us,kr.toArray=aa,kr.toPairs=Pa,kr.toPairsIn=La,kr.toPath=function(e){return Hs(e)?Dt(e,Mi):oa(e)?[e]:Cn(Ni(ha(e)))},kr.toPlainObject=pa,kr.transform=function(e,t,r){var o=Hs(e),n=o||xs(e)||na(e);if(t=ni(t,4),null==r){var i=e&&e.constructor;r=n?o?new i:[]:Js(e)&&zs(i)?Ur(xe(e)):{}}return(n?At:So)(e,(function(e,o,n){return t(r,e,o,n)})),r},kr.unary=function(e){return Is(e,1)},kr.union=Qi,kr.unionBy=Yi,kr.unionWith=Zi,kr.uniq=function(e){return e&&e.length?sn(e):[]},kr.uniqBy=function(e,t){return e&&e.length?sn(e,ni(t,2)):[]},kr.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?sn(e,r,t):[]},kr.unset=function(e,t){return null==e||an(e,t)},kr.unzip=Xi,kr.unzipWith=es,kr.update=function(e,t,r){return null==e?e:un(e,t,mn(r))},kr.updateWith=function(e,t,o,n){return n="function"==typeof n?n:r,null==e?e:un(e,t,mn(o),n)},kr.values=ka,kr.valuesIn=function(e){return null==e?[]:Kt(e,Ra(e))},kr.without=ts,kr.words=za,kr.wrap=function(e,t){return Ms(mn(t),e)},kr.xor=rs,kr.xorBy=os,kr.xorWith=ns,kr.zip=is,kr.zipObject=function(e,t){return pn(e||[],t||[],Qr)},kr.zipObjectDeep=function(e,t){return pn(e||[],t||[],Ko)},kr.zipWith=ss,kr.entries=Pa,kr.entriesIn=La,kr.extend=ga,kr.extendWith=Sa,ru(kr,kr),kr.add=hu,kr.attempt=qa,kr.camelCase=Ua,kr.capitalize=Va,kr.ceil=mu,kr.clamp=function(e,t,o){return o===r&&(o=t,t=r),o!==r&&(o=(o=la(o))==o?o:0),t!==r&&(t=(t=la(t))==t?t:0),ro(la(e),t,o)},kr.clone=function(e){return oo(e,4)},kr.cloneDeep=function(e){return oo(e,5)},kr.cloneDeepWith=function(e,t){return oo(e,5,t="function"==typeof t?t:r)},kr.cloneWith=function(e,t){return oo(e,4,t="function"==typeof t?t:r)},kr.conformsTo=function(e,t){return null==t||no(e,t,Ta(t))},kr.deburr=Ba,kr.defaultTo=function(e,t){return null==e||e!=e?t:e},kr.divide=gu,kr.endsWith=function(e,t,o){e=ha(e),t=nn(t);var n=e.length,i=o=o===r?n:ro(da(o),0,n);return(o-=t.length)>=0&&e.slice(o,i)==t},kr.eq=ks,kr.escape=function(e){return(e=ha(e))&&z.test(e)?e.replace($,Xt):e},kr.escapeRegExp=function(e){return(e=ha(e))&&ee.test(e)?e.replace(X,"\\$&"):e},kr.every=function(e,t,o){var n=Hs(e)?Ct:co;return o&&gi(e,t,o)&&(t=r),n(e,ni(t,3))},kr.find=ls,kr.findIndex=Bi,kr.findKey=function(e,t){return kt(e,ni(t,3),So)},kr.findLast=ps,kr.findLastIndex=Hi,kr.findLastKey=function(e,t){return kt(e,ni(t,3),vo)},kr.floor=Su,kr.forEach=hs,kr.forEachRight=ms,kr.forIn=function(e,t){return null==e?e:mo(e,ni(t,3),Ra)},kr.forInRight=function(e,t){return null==e?e:go(e,ni(t,3),Ra)},kr.forOwn=function(e,t){return e&&So(e,ni(t,3))},kr.forOwnRight=function(e,t){return e&&vo(e,ni(t,3))},kr.get=_a,kr.gt=Us,kr.gte=Vs,kr.has=function(e,t){return null!=e&&li(e,t,Ao)},kr.hasIn=Ia,kr.head=Fi,kr.identity=Za,kr.includes=function(e,t,r,o){e=Fs(e)?e:ka(e),r=r&&!o?da(r):0;var n=e.length;return r<0&&(r=hr(n+r,0)),ra(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&Vt(e,t,r)>-1},kr.indexOf=function(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var n=null==r?0:da(r);return n<0&&(n=hr(o+n,0)),Vt(e,t,n)},kr.inRange=function(e,t,o){return t=ua(t),o===r?(o=t,t=0):o=ua(o),function(e,t,r){return e>=mr(t,r)&&e<hr(t,r)}(e=la(e),t,o)},kr.invoke=Ca,kr.isArguments=Bs,kr.isArray=Hs,kr.isArrayBuffer=js,kr.isArrayLike=Fs,kr.isArrayLikeObject=Ws,kr.isBoolean=function(e){return!0===e||!1===e||Qs(e)&&_o(e)==g},kr.isBuffer=xs,kr.isDate=$s,kr.isElement=function(e){return Qs(e)&&1===e.nodeType&&!Xs(e)},kr.isEmpty=function(e){if(null==e)return!0;if(Fs(e)&&(Hs(e)||"string"==typeof e||"function"==typeof e.splice||xs(e)||na(e)||Bs(e)))return!e.length;var t=ci(e);if(t==E||t==C)return!e.size;if(yi(e))return!Mo(e).length;for(var r in e)if(Me.call(e,r))return!1;return!0},kr.isEqual=function(e,t){return Oo(e,t)},kr.isEqualWith=function(e,t,o){var n=(o="function"==typeof o?o:r)?o(e,t):r;return n===r?Oo(e,t,r,o):!!n},kr.isError=Gs,kr.isFinite=function(e){return"number"==typeof e&&Wt(e)},kr.isFunction=zs,kr.isInteger=qs,kr.isLength=Ks,kr.isMap=Ys,kr.isMatch=function(e,t){return e===t||Do(e,t,si(t))},kr.isMatchWith=function(e,t,o){return o="function"==typeof o?o:r,Do(e,t,si(t),o)},kr.isNaN=function(e){return Zs(e)&&e!=+e},kr.isNative=function(e){if(fi(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wo(e)},kr.isNil=function(e){return null==e},kr.isNull=function(e){return null===e},kr.isNumber=Zs,kr.isObject=Js,kr.isObjectLike=Qs,kr.isPlainObject=Xs,kr.isRegExp=ea,kr.isSafeInteger=function(e){return qs(e)&&e>=-9007199254740991&&e<=d},kr.isSet=ta,kr.isString=ra,kr.isSymbol=oa,kr.isTypedArray=na,kr.isUndefined=function(e){return e===r},kr.isWeakMap=function(e){return Qs(e)&&ci(e)==O},kr.isWeakSet=function(e){return Qs(e)&&"[object WeakSet]"==_o(e)},kr.join=function(e,t){return null==e?"":lr.call(e,t)},kr.kebabCase=Ha,kr.last=Gi,kr.lastIndexOf=function(e,t,o){var n=null==e?0:e.length;if(!n)return-1;var i=n;return o!==r&&(i=(i=da(o))<0?hr(n+i,0):mr(i,n-1)),t==t?function(e,t,r){for(var o=r+1;o--;)if(e[o]===t)return o;return o}(e,t,i):Ut(e,Ht,i,!0)},kr.lowerCase=ja,kr.lowerFirst=Fa,kr.lt=ia,kr.lte=sa,kr.max=function(e){return e&&e.length?lo(e,Za,Io):r},kr.maxBy=function(e,t){return e&&e.length?lo(e,ni(t,2),Io):r},kr.mean=function(e){return jt(e,Za)},kr.meanBy=function(e,t){return jt(e,ni(t,2))},kr.min=function(e){return e&&e.length?lo(e,Za,Po):r},kr.minBy=function(e,t){return e&&e.length?lo(e,ni(t,2),Po):r},kr.stubArray=cu,kr.stubFalse=lu,kr.stubObject=function(){return{}},kr.stubString=function(){return""},kr.stubTrue=function(){return!0},kr.multiply=vu,kr.nth=function(e,t){return e&&e.length?Bo(e,da(t)):r},kr.noConflict=function(){return dt._===this&&(dt._=Ve),this},kr.noop=ou,kr.now=_s,kr.pad=function(e,t,r){e=ha(e);var o=(t=da(t))?sr(e):0;if(!t||o>=t)return e;var n=(t-o)/2;return jn(ht(n),r)+e+jn(lt(n),r)},kr.padEnd=function(e,t,r){e=ha(e);var o=(t=da(t))?sr(e):0;return t&&o<t?e+jn(t-o,r):e},kr.padStart=function(e,t,r){e=ha(e);var o=(t=da(t))?sr(e):0;return t&&o<t?jn(t-o,r)+e:e},kr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),Sr(ha(e).replace(te,""),t||0)},kr.random=function(e,t,o){if(o&&"boolean"!=typeof o&&gi(e,t,o)&&(t=o=r),o===r&&("boolean"==typeof t?(o=t,t=r):"boolean"==typeof e&&(o=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ua(e),t===r?(t=e,e=0):t=ua(t)),e>t){var n=e;e=t,t=n}if(o||e%1||t%1){var i=vr();return mr(e+i*(t-e+it("1e-"+((i+"").length-1))),t)}return xo(e,t)},kr.reduce=function(e,t,r){var o=Hs(e)?Nt:xt,n=arguments.length<3;return o(e,ni(t,4),r,n,ao)},kr.reduceRight=function(e,t,r){var o=Hs(e)?Mt:xt,n=arguments.length<3;return o(e,ni(t,4),r,n,uo)},kr.repeat=function(e,t,o){return t=(o?gi(e,t,o):t===r)?1:da(t),$o(ha(e),t)},kr.replace=function(){var e=arguments,t=ha(e[0]);return e.length<3?t:t.replace(e[1],e[2])},kr.result=function(e,t,o){var n=-1,i=(t=gn(t,e)).length;for(i||(i=1,e=r);++n<i;){var s=null==e?r:e[Mi(t[n])];s===r&&(n=i,s=o),e=zs(s)?s.call(e):s}return e},kr.round=fu,kr.runInContext=e,kr.sample=function(e){return(Hs(e)?zr:zo)(e)},kr.size=function(e){if(null==e)return 0;if(Fs(e))return ra(e)?sr(e):e.length;var t=ci(e);return t==E||t==C?e.size:Mo(e).length},kr.snakeCase=Wa,kr.some=function(e,t,o){var n=Hs(e)?Pt:Xo;return o&&gi(e,t,o)&&(t=r),n(e,ni(t,3))},kr.sortedIndex=function(e,t){return en(e,t)},kr.sortedIndexBy=function(e,t,r){return tn(e,t,ni(r,2))},kr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var o=en(e,t);if(o<r&&ks(e[o],t))return o}return-1},kr.sortedLastIndex=function(e,t){return en(e,t,!0)},kr.sortedLastIndexBy=function(e,t,r){return tn(e,t,ni(r,2),!0)},kr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=en(e,t,!0)-1;if(ks(e[r],t))return r}return-1},kr.startCase=xa,kr.startsWith=function(e,t,r){return e=ha(e),r=null==r?0:ro(da(r),0,e.length),t=nn(t),e.slice(r,r+t.length)==t},kr.subtract=yu,kr.sum=function(e){return e&&e.length?$t(e,Za):0},kr.sumBy=function(e,t){return e&&e.length?$t(e,ni(t,2)):0},kr.template=function(e,t,o){var n=kr.templateSettings;o&&gi(e,t,o)&&(t=r),e=ha(e),t=Sa({},t,n,Kn);var i,s,a=Sa({},t.imports,n.imports,Kn),u=Ta(a),d=Kt(a,u),c=0,l=t.interpolate||ve,p="__p += '",h=be((t.escape||ve).source+"|"+l.source+"|"+(l===J?de:ve).source+"|"+(t.evaluate||ve).source+"|$","g"),m="//# sourceURL="+(Me.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tt+"]")+"\n";e.replace(h,(function(t,r,o,n,a,u){return o||(o=n),p+=e.slice(c,u).replace(fe,er),r&&(i=!0,p+="' +\n__e("+r+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),o&&(p+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),p+="';\n";var g=Me.call(t,"variable")&&t.variable;if(g){if(ae.test(g))throw new Ee("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(s?p.replace(j,""):p).replace(F,"$1").replace(W,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var S=qa((function(){return _e(u,m+"return "+p).apply(r,d)}));if(S.source=p,Gs(S))throw S;return S},kr.times=function(e,t){if((e=da(e))<1||e>d)return[];var r=l,o=mr(e,l);t=ni(t),e-=l;for(var n=Gt(o,t);++r<e;)t(r);return n},kr.toFinite=ua,kr.toInteger=da,kr.toLength=ca,kr.toLower=function(e){return ha(e).toLowerCase()},kr.toNumber=la,kr.toSafeInteger=function(e){return e?ro(da(e),-9007199254740991,d):0===e?e:0},kr.toString=ha,kr.toUpper=function(e){return ha(e).toUpperCase()},kr.trim=function(e,t,o){if((e=ha(e))&&(o||t===r))return zt(e);if(!e||!(t=nn(t)))return e;var n=ar(e),i=ar(t);return vn(n,Qt(n,i),Yt(n,i)+1).join("")},kr.trimEnd=function(e,t,o){if((e=ha(e))&&(o||t===r))return e.slice(0,ur(e)+1);if(!e||!(t=nn(t)))return e;var n=ar(e);return vn(n,0,Yt(n,ar(t))+1).join("")},kr.trimStart=function(e,t,o){if((e=ha(e))&&(o||t===r))return e.replace(te,"");if(!e||!(t=nn(t)))return e;var n=ar(e);return vn(n,Qt(n,ar(t))).join("")},kr.truncate=function(e,t){var o=30,n="...";if(Js(t)){var i="separator"in t?t.separator:i;o="length"in t?da(t.length):o,n="omission"in t?nn(t.omission):n}var s=(e=ha(e)).length;if(tr(e)){var a=ar(e);s=a.length}if(o>=s)return e;var u=o-sr(n);if(u<1)return n;var d=a?vn(a,0,u).join(""):e.slice(0,u);if(i===r)return d+n;if(a&&(u+=d.length-u),ea(i)){if(e.slice(u).search(i)){var c,l=d;for(i.global||(i=be(i.source,ha(ce.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var p=c.index;d=d.slice(0,p===r?u:p)}}else if(e.indexOf(nn(i),u)!=u){var h=d.lastIndexOf(i);h>-1&&(d=d.slice(0,h))}return d+n},kr.unescape=function(e){return(e=ha(e))&&G.test(e)?e.replace(x,dr):e},kr.uniqueId=function(e){var t=++Pe;return ha(e)+t},kr.upperCase=$a,kr.upperFirst=Ga,kr.each=hs,kr.eachRight=ms,kr.first=Fi,ru(kr,(pu={},So(kr,(function(e,t){Me.call(kr.prototype,t)||(pu[t]=e)})),pu),{chain:!1}),kr.VERSION="4.17.21",At(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){kr[e].placeholder=kr})),At(["drop","take"],(function(e,t){Hr.prototype[e]=function(o){o=o===r?1:hr(da(o),0);var n=this.__filtered__&&!t?new Hr(this):this.clone();return n.__filtered__?n.__takeCount__=mr(o,n.__takeCount__):n.__views__.push({size:mr(o,l),type:e+(n.__dir__<0?"Right":"")}),n},Hr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),At(["filter","map","takeWhile"],(function(e,t){var r=t+1,o=1==r||3==r;Hr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ni(e,3),type:r}),t.__filtered__=t.__filtered__||o,t}})),At(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Hr.prototype[e]=function(){return this[r](1).value()[0]}})),At(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Hr.prototype[e]=function(){return this.__filtered__?new Hr(this):this[r](1)}})),Hr.prototype.compact=function(){return this.filter(Za)},Hr.prototype.find=function(e){return this.filter(e).head()},Hr.prototype.findLast=function(e){return this.reverse().find(e)},Hr.prototype.invokeMap=Go((function(e,t){return"function"==typeof e?new Hr(this):this.map((function(r){return To(r,e,t)}))})),Hr.prototype.reject=function(e){return this.filter(ws(ni(e)))},Hr.prototype.slice=function(e,t){e=da(e);var o=this;return o.__filtered__&&(e>0||t<0)?new Hr(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),t!==r&&(o=(t=da(t))<0?o.dropRight(-t):o.take(t-e)),o)},Hr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hr.prototype.toArray=function(){return this.take(l)},So(Hr.prototype,(function(e,t){var o=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),i=kr[n?"take"+("last"==t?"Right":""):t],s=n||/^find/.test(t);i&&(kr.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,u=t instanceof Hr,d=a[0],c=u||Hs(t),l=function(e){var t=i.apply(kr,wt([e],a));return n&&p?t[0]:t};c&&o&&"function"==typeof d&&1!=d.length&&(u=c=!1);var p=this.__chain__,h=!!this.__actions__.length,m=s&&!p,g=u&&!h;if(!s&&c){t=g?t:new Hr(this);var S=e.apply(t,a);return S.__actions__.push({func:us,args:[l],thisArg:r}),new Br(S,p)}return m&&g?e.apply(this,a):(S=this.thru(l),m?n?S.value()[0]:S.value():S)})})),At(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);kr.prototype[e]=function(){var e=arguments;if(o&&!this.__chain__){var n=this.value();return t.apply(Hs(n)?n:[],e)}return this[r]((function(r){return t.apply(Hs(r)?r:[],e)}))}})),So(Hr.prototype,(function(e,t){var r=kr[t];if(r){var o=r.name+"";Me.call(Tr,o)||(Tr[o]=[]),Tr[o].push({name:t,func:r})}})),Tr[Un(r,2).name]=[{name:"wrapper",func:r}],Hr.prototype.clone=function(){var e=new Hr(this.__wrapped__);return e.__actions__=Cn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Cn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Cn(this.__views__),e},Hr.prototype.reverse=function(){if(this.__filtered__){var e=new Hr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Hs(e),o=t<0,n=r?e.length:0,i=function(e,t,r){for(var o=-1,n=r.length;++o<n;){var i=r[o],s=i.size;switch(i.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=mr(t,e+s);break;case"takeRight":e=hr(e,t-s)}}return{start:e,end:t}}(0,n,this.__views__),s=i.start,a=i.end,u=a-s,d=o?a:s-1,c=this.__iteratees__,l=c.length,p=0,h=mr(u,this.__takeCount__);if(!r||!o&&n==u&&h==u)return cn(e,this.__actions__);var m=[];e:for(;u--&&p<h;){for(var g=-1,S=e[d+=t];++g<l;){var v=c[g],f=v.iteratee,y=v.type,E=f(S);if(2==y)S=E;else if(!E){if(1==y)continue e;break e}}m[p++]=S}return m},kr.prototype.at=ds,kr.prototype.chain=function(){return as(this)},kr.prototype.commit=function(){return new Br(this.value(),this.__chain__)},kr.prototype.next=function(){this.__values__===r&&(this.__values__=aa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},kr.prototype.plant=function(e){for(var t,o=this;o instanceof Vr;){var n=Li(o);n.__index__=0,n.__values__=r,t?i.__wrapped__=n:t=n;var i=n;o=o.__wrapped__}return i.__wrapped__=e,t},kr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hr){var t=e;return this.__actions__.length&&(t=new Hr(this)),(t=t.reverse()).__actions__.push({func:us,args:[Ji],thisArg:r}),new Br(t,this.__chain__)}return this.thru(Ji)},kr.prototype.toJSON=kr.prototype.valueOf=kr.prototype.value=function(){return cn(this.__wrapped__,this.__actions__)},kr.prototype.first=kr.prototype.head,Qe&&(kr.prototype[Qe]=function(){return this}),kr}();lt?((lt.exports=cr)._=cr,ct._=cr):dt._=cr}).call(Eb)}(yb,yb.exports)),yb.exports),Ib=hc(_b);const Ab=ru([({whiteboard:e})=>e,Ru],((e,t)=>{const{whiteboardPermissionCode:r,whiteboardInitRole:o}=e;return null!=t&&t.isCoHost?null==t||!t.isCoHost||o!==RS.InternalUser:r!==CS.WbSettingLockShareSecurity&&o!==RS.HostOnly&&o!==RS.InternalUser&&(RS.AllParticipants,!0)})),bb="SET_WHITEBOARD_INIT_ROLE",{setWhiteboardCapability:Cb,setIsWbSettingVisible:Tb,setIsShowWhiteboardWindow:Rb,setWhiteboardStatus:Ob,setDashboardStatus:Db,setDashboardId:wb,setWhiteboardConfig:Nb,setWhiteboardSharer:Mb,setWhiteboardPermissionCode:Pb,setWhiteboardToken:Lb,getWhiteboardToken:kb,getWhiteboardTokenSuccess:Ub,getWhiteboardTokenFailure:Vb,setIsWhiteboardShareStreamOn:Bb,setIsWhiteboardCanvasReady:Hb,setHasStartWhiteboardShare:jb,whiteboardReset:Fb,toggleShowPermissionWidget:Wb,setWhiteboardPrivilegeRole:xb,setWhiteboardInitWithoutHost:$b,setIsWhiteboardWindowLoading:Gb,setHaveAccessAfterMeeting:zb,setWhiteboardError:qb,setWhiteboardElement:Kb,setIsDisableExport:Jb,setWhiteboardCdnPath:Qb,setWhiteboardShareOptionsLocked:Yb,whiteboardMessageEvent:Zb,whiteboardRenderEvent:Xb,whiteboardStatusEvent:eC,whiteboardIndicationMessageEvent:tC,whiteboardCanvasReadyEvent:rC,setWhiteboardOpenType:oC}=Wc("SET_WHITEBOARD_CAPABILITY","SET_IS_WB_SETTING_VISIBLE","SET_IS_SHOW_WHITEBOARD_WINDOW","SET_WHITEBOARD_STATUS","SET_DASHBOARD_STATUS","SET_DASHBOARD_ID","SET_WHITEBOARD_CONFIG","SET_WHITEBOARD_SHARER","SET_WHITEBOARD_PERMISSION_CODE","SET_WHITEBOARD_TOKEN","GET_WHITEBOARD_TOKEN","GET_WHITEBOARD_TOKEN_SUCCESS","GET_WHITEBOARD_TOKEN_FAILURE","SET_IS_WHITEBOARD_SHARE_STREAM_ON","SET_IS_WHITEBOARD_CANVAS_READY","SET_HAS_START_WHITEBOARD_SHARE","WHITEBOARD_RESET","TOGGLE_SHOW_PERMISSION_WIDGET",bb,"SET_WHITEBOARD_INIT_WITHOUT_HOST","SET_IS_WHITEBOARD_WINDOW_LOADING","SET_HAVE_ACCESS_AFTER_MEETING","SET_WHITEBOARD_ERROR","SET_WHITEBOARD_ELEMENT",bb,"SET_IS_DISABLE_EXPORT","SET_WHITEBOARD_PRIVILEGE_ROLE","SET_WHITEBOARD_CDN_PATH","SET_WHITEBOARD_SHARE_OPTIONS_LOCKED","WHITEBOARD_MESSAGE_EVENT","WHITEBOARD_RENDER_EVENT","WHITEBOARD_CANVAS_READY_EVENT","WHITEBOARD_STATUS_EVENT","WHITEBOARD_INDICATION_MESSAGE_EVENT","SET_WHITEBOARD_OPEN_TYPE");RE.getInstance();const nC=(e,t)=>{const r=document.getElementById(t);let o=`https://${E()}`;null!=r&&r.src&&(o=new URL(r.src).origin),r&&r.contentWindow&&r.contentWindow.postMessage({type:wS,data:e},o)};function iC(e,t){const r=NS[t]||"Unknown error";return e(Ob(OS.ERROR)),Ga(Ma,{type:OS.ERROR,payload:{errorCode:t,errorMessage:r}}),e(qb({errorCode:t,errorMessage:r})),Promise.reject({type:Je,reason:r,errorCode:t})}function sC(e){return Promise.reject({type:Je,reason:NS[e]||"Unknown error",errorCode:e})}function aC(e){return{type:Je,reason:NS[e]||"Unknown error",errorCode:e}}const uC=e=>{const{whiteboard:{whiteboardSharer:{presenterID:t,dcsID:r}},meeting:{userId:o,meetingStatus:n}}=e;return Boolean(n===jo.Joined&&t&&r&&t!==o)},dC=RE.getInstance().makeLogger(["Remote Control"]),cC=ME(Fu.getInstance()),lC=(e,t,r)=>{const o={setAttribute:(e,t)=>{o[e]=t},getAttribute:e=>o[e]||null,removeAttribute:e=>{delete o[e]},tagName:r.toUpperCase(),id:`dummy-render-${e}-${t}`,isDummy:!0,canvasId:t,toString:()=>`DummyVideoPlayer(${e}, ${t})`};return o.setAttribute("node-id",`${e}`),o.setAttribute("media-type","share"),o.setAttribute("render-type","canvas"),o};function pC(e,t,r,o,n){let{share:{activeNodeId:i,shareQuality:s}}=t;const{share:{isReceiveSharingFromMainSession:a}}=t;r&&(i=r),void 0!==o&&(s=o);const u=JE(t);e.subscribeSharing(i,s,a,u,n)}class hC{constructor(){this.checkerSubject=void 0,this.checkerSubscription=void 0}startCheck(e){return this.checkerSubject&&this.stopCheck(),this.checkerSubject=new Bt,this.checkerSubscription=oo(e).subscribe(this.checkerSubject),this.checkerSubject}stopCheck(){var e;this.checkerSubject&&(this.checkerSubject.complete(),null===(e=this.checkerSubscription)||void 0===e||e.unsubscribe(),this.checkerSubject=void 0)}}const mC=new hC,gC=new hC;function SC(){return mC.stopCheck()}function vC(){return gC.stopCheck()}function fC(e,t){SC(),vC();const{share:{remoteControllingSsrc:r},meeting:{userId:o}}=e;r&&(EC(),t.takeBackRemoteControlPermission(o,r))}async function yC(e,t,r,o,n){const{share:{isSDKGrabControl:i,isGrabRemoteControl:s}}=r;if(!s){o.subscribeGrabRemoteControl(e,!0);try{await Mr(Ja(ds,1).pipe(co((e=>!!e))))}catch(e){}}const a=qE(r);a&&(i?(n.resendRemoteControlPositionPDU(),n.updateRemoteControlProperties({os:a.os,isControllerNow:!0,dimension:t&&Ud(t)})):t&&n.startRemoteControl(t,a.os,Ud(t)))}function EC(){dC.log("qr scanning stop"),cC.startRemoteControlQRCheck(!1)}function _C(e,t,r){var o;const{audio:n}=t;if((null==n||null===(o=n.localShareAudioUserMutedList)||void 0===o?void 0:o.length)>0){const{localShareAudioUserMutedList:o}=n,i=o.find((t=>t.userId===e));Xd(e,!(null==i||!i.muted),t,r)}}function IC(e,t,r){const o=e.find((e=>e.ssrc===t));return null!=o&&o.isInitialized?Promise.reject({type:Je,reason:"Cannot start share view due to annotation is in progress.",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE}):(r.stopPresenterAnnotation(t),null)}function AC(e,t){return-1===e.findIndex((e=>e.userId===t))?Promise.reject({type:et,reason:"Target user is not sharing",errorCode:Na.STREAM_MISMATCH_USER}):null}function bC(){return T.isAndroidOrIOSBrowser||T.isHarmonyOS||T.is32bitChrome?1:4}async function CC(e,t,r,o){var n,i,s;const{meeting:{bIbDisableShare:a},share:{isReceiveSharingFromMainSession:u,annotationUsers:d,ssrc:p},audio:h,whiteboard:m}=t;if(null!=m&&null!==(n=m.whiteboardSharer)&&void 0!==n&&n.presenterID&&null!=m&&null!==(i=m.whiteboardSharer)&&void 0!==i&&i.dcsID)return Promise.reject(aC(Na.WHITEBOARD_AND_SHARING_CONFLICT));if(a)return Promise.reject({type:Je,reason:"information barrier",errorCode:Na.SCREEN_SHARE_IB_DENIED});if(!o&&"function"!=typeof(null===(s=navigator.mediaDevices)||void 0===s?void 0:s.getDisplayMedia))return Promise.reject({type:Je,reason:"Unable to share your screen due to the technical limitation",errorCode:Na.SCREEN_SHARE_UNSUPPORTED});if(u)return Promise.reject({type:Je,reason:"Unable to share your screen while someone is sharing from the main session",errorCode:Na.SCREEN_SHARE_SUBSESSION_CONFLICT});if(void 0!==(null==h?void 0:h.secondaryAudioMicrophoneId))return Promise.reject({type:Je,reason:"Cannot start screen share while secondary audio is in progress.",errorCode:Na.SECONDARY_AUDIO_SCREEN_SHARING_CONFLICT});var g;if(T.isSupportMediaStreamTrackProcessor){if(!c(e))return Promise.reject({type:et,reason:"Use Video element instead of Canvas element when WebCodecs enabled",errorCode:Na.STREAM_MISMATCH_RENDER_ELEMENT})}else if(!l(e))return Promise.reject({type:et,reason:`Expected to accept HTMLCanvasElement, but actual it is ${"object"==typeof e&&null!==e?null===(g=Object.getPrototypeOf(e))||void 0===g?void 0:g.constructor.name:e}`,errorCode:Na.STREAM_MISMATCH_RENDER_ELEMENT});if(null!=r&&r.simultaneousShareView&&d.some((e=>e.isInitialized&&e.ssrc!==p)))return Promise.reject({type:Je,reason:"Cannot start share screen due to annotation is in progress.",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE});await async function(e){const{share:{sharePrivilege:t}}=e,r=KE(e),o=Ou(e);if(t===z.OnlyHost&&!o)return Promise.reject({type:Ze,reason:"only host can start screen share",errorCode:Na.SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED});if(t===z.HostGrab&&!o&&r.length>0)return Promise.reject({type:Ze,reason:"only host can grab screen share",errorCode:Na.SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED});const n=Ru(e);return!0===(null==n?void 0:n.sharerOn)?Promise.reject({type:Je,reason:"you have already started screen share.",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE}):void 0}(t)}function TC(e,t){const{share:{isReceiveSharingFromMainSession:r},breakoutRoom:o}=t;var n,i;return r?null==o||null===(n=o.mainSessionAttendeeList.find((t=>t.userId===e)))||void 0===n?void 0:n.shareSsrc:null===(i=Mu(t).find((t=>t.userId===e)))||void 0===i?void 0:i.shareSsrc}function RC(e,t){const{state:r,rwgAgent:o,mediaAgent:n}=t,{share:{remoteControlledUserList:i}}=r;_C(e,r,n),i.includes(e)&&yC(e,void 0,r,o,n)}function OC(e,t){const{state:r,rwgAgent:o,mediaAgent:n}=t,{share:{remoteControlledUserList:i,isGrabRemoteControl:s}}=r,a=function(e,t){const{state:r,mediaAgent:o}=t,n=[];if(e){const{share:{annotationUsers:t}}=r,a=TC(e,r);var i,s;a&&(XE(r)?null!==(i=t.find((e=>e.ssrc===a)))&&void 0!==i&&i.isInitialized&&(o.hideViewerAnnotationCanvas(),o.stopViewerAnnotation(a),n.push(wA({ssrc:a,isInitialized:!1,isStarted:!1}))):null!==(s=t.find((e=>e.ssrc===a)))&&void 0!==s&&s.isStarted&&(o.annotateAction(He.CLOSE_TOOL_BAR),n.push(wA({ssrc:a,isStarted:!1}))))}return n}(e,t);return i.includes(e)&&(s&&o.subscribeGrabRemoteControl(e,!1),n.updateRemoteControlProperties({isControllerNow:!1})),a}function DC(e,t,r,o){var n,i;const{state:s,rwgAgent:a,mediaAgent:u}=o,{share:{isReceiveSharingFromMainSession:d,shareViewAttachments:c}}=s,l=OC(e,o);a.unsubscribeSharing(e,d),pC(a,s,t),u.switchSharingSource(r,d);const p=null===(n=ac(null!==(i=c[`${e}`])&&void 0!==i?i:[]))||void 0===n?void 0:n.find((e=>e.isDummy));if(p){l.push(BA({userId:e,element:p}));const r=lC(t,p.canvasId,p.tagName);l.push(VA({userId:t,element:r}))}return RC(t,o),l}const wC=__.createAgent(),NC=ME(Fu.getInstance()),MC=__.createAgent(),PC=ME(Fu.getInstance()),LC=ME(Fu.getInstance()),kC={ssrc:0,status:q.End,shareDimension:{width:0,height:0},receivedShareDimension:{width:1920,height:1080,logicWidth:1920,logicHeight:1080},sharePrivilege:z.OnlyHost,activeNodeId:0,activeSsrc:0,shareQuality:1,isRemoteSharingActive:!1,isReceiveSharing:!1,isGrabRemoteControl:!1,isSDKGrabControl:!1,isScreenShareForbidden:!1,isReceiveSharingFromMainSession:!1,isSharingToBreakoutRoom:!1,isSharingWithSecondCamera:!1,secondCameraId:"default",isRequireReadReceipt:!1,capturedEnsuredCanvas:[],renderedEnsuredCanvas:[],remoteControllingSsrc:0,remoteControlApprovedSsrc:0,remoteControlAppDownloadUrl:"",remoteControlAppInstallStatus:Ie.Unknown,isEnableAutoDeleteRcApp:!1,remoteControlledUserList:[],isRemoteControlEnabled:!1,isSimultaneousShareView:!1,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0}},annotationCapability:0,isAnnotationInitialized:!1,isAnnotationStarted:!1,annotationUsers:[],annotationToolColor:We.DarkGrey,annotationSpotlightColor:We.Red,annotationToolWidth:8,annotationToolType:Fe.None,isCameraFeedSharing:!1,shareViewAttachments:{},annotationVanishingToolTimer:{displayTime:0,vanishingTime:2e3}},UC=["userId","ssrc","isInitialized","isStarted","isDisabled"],VC=qc({[`${qI}`]:ay(((e,{payload:t})=>{e.sharePrivilege=t})),[`${KI}`]:ay(((e,{payload:t})=>{e.isRemoteSharingActive=1===t.bStatus,e.activeNodeId=t.activeNodeID,e.activeSsrc=t.ssrc})),[`${JI}`]:ay(((e,{payload:t})=>{e.isReceiveSharing=t})),[`${YI}`]:ay(((e,{payload:t})=>{e.shareDimension={...t}})),[`${ZI}`]:ay(((e,{payload:t})=>{e.status=t,t===q.End&&(e.isSimultaneousShareView=!1)})),[`${XI}`]:ay(((e,{payload:t})=>{e.ssrc=t})),[`${eA}`]:ay(((e,{payload:t})=>{e.shareQuality=t})),[`${tA}`]:ay(((e,{payload:t})=>{e.receivedShareDimension={...t}})),[`${AA}`]:ay(((e,{payload:t})=>{e.remoteControlledUserList.includes(t)||e.remoteControlledUserList.push(t)})),[`${bA}`]:ay(((e,{payload:t})=>{const r=e.remoteControlledUserList.indexOf(t);r>=0&&e.remoteControlledUserList.splice(r,1)})),[`${rA}`]:ay(((e,{payload:t})=>{e.isGrabRemoteControl=t,!1===t&&(e.remoteControlViewportDomSelector=void 0)})),[`${oA}`]:ay(((e,{payload:t})=>{e.isSDKGrabControl=t})),[`${nA}`]:ay(((e,{payload:t})=>{e.isReceiveSharingFromMainSession=t})),[`${iA}`]:ay(((e,{payload:t})=>{e.isSharingToBreakoutRoom=t})),[`${sA}`]:ay(((e,{payload:t})=>{e.isSharingWithSecondCamera=t})),[`${aA}`]:ay(((e,{payload:t})=>{e.secondCameraId=t})),[`${uA}`]:ay(((e,{payload:t})=>{e.isRequireReadReceipt=t})),[`${dA}`]:ay(((e,{payload:t})=>{e.isOptimizedForSharedVideo=t})),[`${cA}`]:ay(((e,{payload:t})=>{const{data:{encoding:r,rate:o,...n}}=t;e.statistic.encode={bitrate:o,...n}})),[`${lA}`]:ay(((e,{payload:t})=>{const{data:{encoding:r,rate:o,...n}}=t;e.statistic.decode={bitrate:o,...n}})),[`${pA}`]:ay(((e,{payload:t})=>{e.capturedEnsuredCanvas.includes(t)||e.capturedEnsuredCanvas.push(t)})),[`${hA}`]:ay(((e,{payload:t})=>{e.renderedEnsuredCanvas.includes(t)||e.renderedEnsuredCanvas.push(t)})),[`${gA}`]:ay(((e,{payload:t})=>{e.remoteControllingSsrc=t})),[`${SA}`]:ay(((e,{payload:t})=>{e.remoteControlApprovedSsrc=t})),[`${vA}`]:ay(((e,{payload:t})=>{e.remoteControlAppDownloadUrl=t})),[`${fA}`]:ay(((e,{payload:t})=>{(e.remoteControlAppInstallStatus!==Ie.Installed||Ie.Unknown)&&(e.remoteControlAppInstallStatus=t)})),[`${IA}`]:ay(((e,{payload:t})=>{e.remoteControlAppLaunchSheme=t})),[`${CA}`]:ay(((e,{payload:t})=>{Object.assign(e,t)})),[`${TA}`]:ay(((e,{payload:t})=>{e.remoteControlViewportDomSelector=t})),[`${RA}`]:ay(((e,{payload:t})=>{e.annotationCapability=t})),[`${OA}`]:ay(((e,{payload:t})=>{e.isAnnotationInitialized=t})),[`${DA}`]:ay(((e,{payload:t})=>{e.isAnnotationStarted=t})),[`${wA}`]:ay(((e,{payload:t})=>{const{userId:r,ssrc:o,isInitialized:n,isStarted:i,isDisabled:s}=t;let a=-1;if(void 0!==r?a=e.annotationUsers.findIndex((e=>{var t;return e.userId===r||Ed(r,null!==(t=e.ssrc)&&void 0!==t?t:0)})):void 0!==o&&(a=e.annotationUsers.findIndex((e=>{var t;return e.ssrc===o||Ed(o,null!==(t=e.userId)&&void 0!==t?t:0)}))),a>=0){const r=e.annotationUsers[a];Object.entries(t).forEach((([e,o])=>{void 0!==t[e]&&UC.includes(e)&&Object.assign(r,{[e]:o})}))}else e.annotationUsers.push({userId:r,ssrc:o,isInitialized:n||!1,isStarted:i||!1,isDisabled:s||!1})})),[`${NA}`]:ay(((e,{payload:t})=>{e.annotationToolColor=t})),[`${MA}`]:ay(((e,{payload:t})=>{e.annotationSpotlightColor=t})),[`${PA}`]:ay(((e,{payload:t})=>{e.annotationToolWidth=t})),[`${LA}`]:ay(((e,{payload:t})=>{e.annotationToolType=t})),[`${kA}`]:ay(((e,{payload:t})=>{e.isSimultaneousShareView=t})),[`${UA}`]:ay(((e,{payload:t})=>{e.isCameraFeedSharing=t})),[`${VA}`]:ay(((e,{payload:t})=>{const{userId:r,element:o}=t,n=ic(o),i=e.shareViewAttachments[`${r}`];if(i){const e=gf(i),t=null==e?void 0:e.findIndex((e=>dc(e,o)));-1!==t&&void 0!==t||i.push(n)}else{const t=[n];Object.assign(e.shareViewAttachments,{[`${r}`]:t})}})),[`${BA}`]:ay(((e,{payload:t})=>{const{userId:r,element:o}=t,n=e.shareViewAttachments[`${r}`];if(!n)return;let i=o;if(Array.isArray(o)||(i=[o]),i.forEach((e=>{if(n){const t=gf(n),r=null==t?void 0:t.findIndex((t=>dc(t,e)));void 0!==r&&-1!==r&&n.splice(r,1)}})),n&&n.length>0){const t=uc(gf(n)||[]);e.shareViewAttachments[`${r}`]=t}})),[`${HA}`]:ay(((e,{payload:t})=>{e.annotationVanishingToolTimer={...t}})),[`${jA}`]:()=>({...kC})},kC),BC={annotationEpics0:(e,t)=>e.pipe(HS(`${jg}`),Vr((()=>{const{meeting:{mediaFeatureOptions:e}}=t.value,r=e?Fu.getAnnotationCapability(e):0;return RA(r)}))),annotationEpics1:e=>Cv(e,[k.StartAnnotationSuccess,k.StartAnnotationFailed]).pipe(Ro((e=>{const{payload:{data:t,type:r}}=e;r===k.StartAnnotationSuccess?Ga(_s):r===k.StartAnnotationFailed&&Ga(_s,t)})),Gr((()=>nr))),annotationEpics2:e=>_v(e,20241).pipe(Vr((e=>{const{activeNodeID:t,annotationOff:r}=e.payload.body;return Ga(Is,{userId:t,isAnnotationEnabled:0===r}),wA({userId:t,isDisabled:1===r})}))),annotationEpics3:(e,t)=>Cv(e,k.AnnotationRedoStatus).pipe(Oo(t),Ro((([e,t])=>{const{payload:{data:r}}=e,{share:{activeSsrc:o,ssrc:n,annotationUsers:i}}=t;i.filter((e=>[o,n].includes(e.ssrc))).some((e=>e.isInitialized))&&Ga(bs,r)})),Gr((()=>nr))),annotationEpics4:(e,t)=>Cv(e,k.AnnotationUndoStatus).pipe(Oo(t),Ro((([e,t])=>{const{payload:{data:r}}=e,{share:{activeSsrc:o,ssrc:n,annotationUsers:i}}=t;i.filter((e=>[o,n].includes(e.ssrc))).some((e=>e.isInitialized))&&Ga(As,r)})),Gr((()=>nr))),annotationEpics5:(e,t)=>_v(e,Ov).pipe(Vr((e=>uf(e.payload.body))),Oo(t),Ro((([e,t])=>{const{share:{ssrc:r},meeting:{userId:o}}=t;if(e.update){const n=e.update.find((e=>(null==e?void 0:e.userId)===o&&void 0!==e.sharerOn));if(null!=n&&n.sharerOn){const e=Ru(t);LC.updateSharingInfo(r,(null==e?void 0:e.displayName)||"")}}})),Gr((()=>nr))),annotationEpics6:(e,t)=>Cv(e,k.AnnoViewerRequestDraw).pipe(Oo(t),Ro((([e,t])=>{const{payload:{data:r}}=e,{breakoutRoom:o,participants:{attendeesList:n}}=t,{userId:i}=r;if(Ga(Cs,r),i){var s,a;const e=(null===(s=n.find((e=>Ed(e.userId,i))))||void 0===s?void 0:s.displayName)||(null==o||null===(a=o.mainSessionAttendeeList)||void 0===a||null===(a=a.find((e=>Ed(e.userId,i))))||void 0===a?void 0:a.displayName)||"",t={userId:i,userName:e};LC.annotateAction(He.ANNOTATOR_ID_TO_NAME,t)}})),Gr((()=>nr))),annotationEpics7:(e,t)=>e.pipe(HS(`${ZI}`),Oo(t),co((([,e])=>{var t;return(null===(t=e.share)||void 0===t?void 0:t.status)===q.End})),Gr((([e,t])=>{const{share:{annotationUsers:r,ssrc:o}}=t,n=[];return r.find((e=>e.ssrc===o))&&(LC.stopPresenterAnnotation(o),n.push(wA({ssrc:o,isInitialized:!1,isStarted:!1})),n.push(LA(Fe.None))),Cr(n)}))),annotationEpics8:(e,t)=>e.pipe(HS(`${JI}`),Ir(er),Oo(t),co((([,e])=>!1===e.share.isReceiveSharing)),Gr((([e,t])=>{const{share:{activeNodeId:r,annotationUsers:o}}=t,n=[],i=TC(r,t);return i&&o.find((e=>e.ssrc===i))&&(LC.stopViewerAnnotation(i),n.push(wA({ssrc:i,isInitialized:!1,isStarted:!1})),n.push(LA(Fe.None))),LC.hideViewerAnnotationCanvas(),Cr(n)}))),annotationEpics9:(e,t)=>_v(e,Ov).pipe(Oo(t),co((([e,t])=>{const{meeting:{userId:r}}=t,o=e.payload.body.update;return o&&o.length>0&&o.findIndex((e=>e.id!==r&&void 0!==e.bShareOn))>-1})),Gr((([e,t])=>{const{payload:{body:{update:r}}}=e,{share:{annotationUsers:o}}=t,n=r.filter((e=>!1===e.bShareOn)),i=[];return null==n||n.forEach((e=>{const{shareSsrc:t}=e;t&&o.find((e=>e.ssrc===t))&&(LC.stopViewerAnnotation(t),i.push(wA({ssrc:t,isInitialized:!1,isStarted:!1})),i.push(LA(Fe.None)))})),Cr(i)}))),annotationEpics10:(e,t)=>e.pipe(HS(`${YI}`),Oo(t),Ro((([e,t])=>{var r;const{share:{ssrc:o,annotationUsers:n}}=t;null!==(r=n.find((e=>e.ssrc===o)))&&void 0!==r&&r.isInitialized&&LC.updatePresenterAnnotationCanvas()})),Gr((()=>nr))),annotationEpics11:(e,t)=>e.pipe(HS(`${tA}`),Ir(er),Oo(t),Ro((([e,t])=>{var r;const{share:{activeSsrc:o,annotationUsers:n}}=t;null!==(r=n.find((e=>e.ssrc===o)))&&void 0!==r&&r.isInitialized&&LC.updateViewerAnnotationCanvas()})),Gr((()=>nr))),annotationEpics12:e=>e.pipe(HS(`${WS}`),Ro((e=>{LC.removeViewerAnnotationCanvas()})),Gr((()=>nr)))},HC={remoteControlEpics0:e=>e.pipe(HS(`${jg}`),Vr((e=>{const{payload:{meetingOptions:t,rcAutoDelete:r,jwtRc:o,opRc:n}}=e,i=(null==t?void 0:t.isRemoteControlEnbaled)&&n&&1===o;return CA({isRemoteControlEnabled:i,isEnableAutoDeleteRcApp:1===r})}))),remoteControlEpics1:(e,t)=>_v(e,16391).pipe(Gr((e=>{const{payload:{body:{bOn:r,sendID:o,receiveID:n}}}=e,{meeting:{userId:i},share:{status:s,activeNodeId:a,isGrabRemoteControl:u}}=t.value,d=[];if(s===q.End&&d.push(gA(0)),s!==q.End)if(Ed(i,o))r?(SC(),vC(),s===q.Paused&&(MC.resumeSharing(),PC.resumeDesktopSharing(),d.push(ZI(q.Sharing))),d.push(gA(n))):d.push(gA(0));else{var c;const e=null===(c=Mu(t.value))||void 0===c?void 0:c.find((e=>Ed(e.userId,o)));e&&Ga(Ss,{userId:e.userId,displayName:e.displayName,isSharingEntireScreen:PC.isSharingEntireScreen()})}else if(!n||Ed(n,i)){const e=Ru(t.value);if(!pu(e.userRole)&&!T.isAndroidOrIOSBrowser){const e=o&&Ed(a,o);r?(d.push(AA(a)),e&&(u||MC.subscribeGrabRemoteControl(a,!0))):(d.push(bA(a)),e&&(u&&(MC.subscribeGrabRemoteControl(a,!1),d.push(rA(!1)),Ga(ds,!1)),PC.updateRemoteControlProperties({isControllerNow:!1}))),Ga(us,r)}}return Cr(d)}))),remoteControlEpics2:(e,t)=>_v(e,16395).pipe(Oo(t),co((([e,t])=>e.payload.body.id===t.meeting.userId)),Vr((([e])=>{const{payload:{body:{bOn:t}}}=e;return PC.updateRemoteControlProperties({isControllerNow:t}),Ga(ds,t),rA(t)}))),remoteControlEpics3:e=>Cv(e,[k.StartRemoteControlSuccess,k.StartRemoteControlFailed,k.CancelRemoteControlSuccess]).pipe(T_((e=>e.payload.type===k.StartRemoteControlSuccess?(Ga(ls),oA(!0)):e.payload.type===k.CancelRemoteControlSuccess?oA(!1):void(e.payload.type===k.StartRemoteControlFailed&&Ga(ps))))),remoteControlEpics4:e=>Cv(e,[k.RemoteControlCopiedTextNotify,k.RemoteControlPasteTextLengthOverflow]).pipe(Ro((e=>{if(e.payload.type===k.RemoteControlCopiedTextNotify){const{payload:{data:t}}=e;Ga(cs,{content:t.data,x:t.x,y:t.y})}else Ga(cs,{error:"length of pasted text is too long"})})),Eo(nr)),remoteControlEpics5:(e,t)=>_v(e,4342).pipe(co((e=>0===e.payload.body.result)),Gr((e=>{const{payload:{body:{downloadUrl:r,ssrc:o,urlScheme:n}}}=e,{share:{remoteControlApprovedSsrc:i,status:s}}=t.value,a=[],{isMacOS:u}=T;if(s!==q.End){if(!i||i===o){SC();try{const e=JSON.parse(r||"{}"),t=u?e.macDownloadUrl:e.winDownloadUrl;a.push(vA(t))}catch(e){console.warn("unsupported JSON string",e)}}const s={},d=Mu(t.value).find((e=>Ed(e.userId,o)));d&&Object.assign(s,{controllerName:ld(d.displayName)}),Object.assign(s,{ssrc:o});const{deviceId:c}=PC.getShareStreamInfo();c&&Object.assign(s,{DeviceID:c});const l=`${n}&${new URLSearchParams(s).toString()}`;a.push(IA(l),fA(Ie.Unknown)),Ga(ys,l)}return Cr(a)}))),remoteControlEpics6:e=>e.pipe(HS(`${yA}`),Gr((()=>mC.startCheck(1e4).pipe(Vr((()=>(Ga(vs,Ie.Unknown),fA(Ie.Unknown)))))))),remoteControlEpics7:(e,t)=>e.pipe(HS(`${EA}`),co((()=>{const{share:{remoteControlAppInstallStatus:e}}=t.value;return e===Ie.Installed})),Gr((()=>gC.startCheck(12e4).pipe(Gr((()=>{Ga(vs,Ae.Unlaunched);const{share:{remoteControlApprovedSsrc:e,isEnableAutoDeleteRcApp:r},meeting:{userId:o}}=t.value,n=[],{isMacOS:i}=T;return e&&(MC.remoteControlConsent(_e.CacheClean,e,o,{...PC.getShareStreamInfo(),platform:i?"mac":"win"},r),n.push(IA(""),SA(0))),Cr(n)})))))),remoteControlEpics8:(e,t)=>e.pipe(HS(`${IA}`),co((e=>!!e.payload)),Gr((e=>{const{payload:r}=e,o=[];let n;if(r){!function(e){if(!e.startsWith("zoomprc://"))return;const t=Id("__ZOOM_SDK_RC_APP_SCHEME_@__");let r=document.getElementById(t);r||(r=document.createElement("iframe"),r.id=t,r.style.display="none",document.body.appendChild(r)),r.contentWindow.location.href=e}(r),o.push(EA());const e=performance.now();document.hasFocus()?n=no(25).pipe(To((()=>{const r=performance.now()-e<500;return r||Ga(vs,Ie.Uninstalled),r&&t.value.share.remoteControlAppInstallStatus===Ie.Unknown})),bo((()=>{const t=performance.now()-e,r=[];return document.hasFocus()||(t>75?r.push(yA()):SC(),Ga(vs,Ie.Installed),r.push(fA(Ie.Installed),EA())),Cr(r)})),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return Kr(t,Tr.apply(void 0,ut([],at(e))))}}(fA(Ie.Uninstalled))):(Ga(vs,Ie.Unknown),o.push(fA(Ie.Unknown)))}return n?io(n,Cr(o)):Cr(o)}))),remoteControlEpics9:(e,t)=>_v(e,kv).pipe(Gr((()=>(Ga(fs,be.Ended),fC(t.value,MC),Cr([IA(""),SA(0)]))))),remoteControlEpics10:(e,t)=>e.pipe(HS(`${ZI}`),co((e=>{const{share:{remoteControllingSsrc:r,remoteControlApprovedSsrc:o}}=t.value;return!(e.payload!==q.End||!r&&!o)})),Ro((()=>{const{share:{remoteControllingSsrc:e,remoteControlApprovedSsrc:r,isEnableAutoDeleteRcApp:o},meeting:{userId:n}}=t.value,{isMacOS:i}=T;e&&fC(t.value,MC),r!==e&&MC.remoteControlConsent(_e.Decline,r,n,{...PC.getShareStreamInfo(),platform:i?"mac":"win"},o)})),Eo(nr)),remoteControlEpics11:(e,t)=>_v(e,16430).pipe(Gr((()=>(SC(),vC(),Ga(vs,Ae.Launched),t.value.share.status!==q.End&&function(e,t){(async function(e){const{media:{assetsPath:t}}=e,r=`${t}/qrscanner.min.js`;return"WebQrscanner"in window?Promise.resolve(""):new Promise(((e,t)=>{dC.log(`load qr scanner script start. url:${r}`),s(r,(()=>{dC.log("load qr scanner script done."),e("")}),t)}))})(e).then((()=>{dC.log("qr scanning start"),t.startRemoteControlQRCheck(!0)}))}(t.value,PC),Cr([IA(""),SA(0)]))))),remoteControlEpics12:e=>Cv(e,k.CurrentDesktopSharingWidthHeight).pipe(Ro((()=>{MC.syncSharedContentMetaWithRcApp(PC.getShareStreamInfo())})),Eo(nr)),remoteControlEpics13:(e,t)=>Cv(e,k.SendRemoteControlQrCode).pipe(Ro((e=>{const{payload:{data:r}}=e,{share:{status:o}}=t.value;o!==q.End&&Array.isArray(r)&&r.length>0&&r.forEach((e=>{null!=e&&e.startsWith("zrc_")&&MC.sendRemoteControlAuth(e)}))})),Eo(nr)),remoteControlEpics14:e=>_v(e,16434).pipe(Ro((e=>{const{payload:{body:{result:t}}}=e;0===t&&(EC(),Ga(fs,be.Started))})),Eo(nr)),remoteControlEpics15:(e,t)=>_v(e,Ov).pipe(co((e=>{var r,o;const{meeting:{userId:n},share:{remoteControlledUserList:i}}=t.value,{payload:{body:s}}=e;return i.length>0&&((null===(r=s.update)||void 0===r?void 0:r.some((e=>e.id!==n&&!1===e.bShareOn)))||(null===(o=s.remove)||void 0===o?void 0:o.some((e=>e.id!==n))))})),Gr((e=>{var r,o,n,i;const{payload:{body:s}}=e,{share:{remoteControlledUserList:a,activeNodeId:u,isGrabRemoteControl:d},meeting:{userId:c}}=t.value,l=(null!==(r=null===(o=s.update)||void 0===o?void 0:o.filter((e=>e.id!==c&&!1===e.bShareOn)))&&void 0!==r?r:[]).concat(null!==(n=null===(i=s.remove)||void 0===i?void 0:i.filter((e=>e.id!==c)))&&void 0!==n?n:[]),p=[];return a.forEach((e=>{l.find((t=>t.id===e))&&(p.push(bA(e)),e===u&&d&&(p.push(rA(!1)),Ga(ds,!1)))})),Cr(p)}))),remoteControlEpics16:(e,t)=>e.pipe(HS(`${Pg}`),Ro((()=>{const{share:{remoteControllingSsrc:e,status:r}}=t.value;r===q.Sharing&&e&&Ga(fs,be.Ended)})),Eo(nr)),remoteControlEpics17:e=>e.pipe(HS(`${TA}`),co((e=>!!e.payload)),bo((e=>{const{payload:t}=e,r=document.querySelector(t);return r&&"function"==typeof ResizeObserver?function(...e){return new Nt((t=>{const r=new ResizeObserver((e=>{e.forEach((e=>{t.next(e)}))}));return e.forEach((e=>r.observe(e))),()=>r.disconnect()}))}(r).pipe(Co(Qa(Ja(Ji).pipe(co((e=>!(null!=e&&e.isActive))),go(1)))),(void 0===o&&(o=er),Pt((function(e,t){var r=null,n=null,i=null,s=function(){if(r){r.unsubscribe(),r=null;var e=n;n=null,t.next(e)}};function a(){var e=i+100,n=o.now();if(n<e)return r=this.schedule(void 0,e-n),void t.add(r);s()}e.subscribe(Lt(t,(function(e){n=e,i=o.now(),r||(r=o.schedule(a,100),t.add(r))}),(function(){s(),t.complete()}),void 0,(function(){n=r=null})))}))),Ro((e=>{const{target:t}=e;t&&PC.updateRemoteControlProperties({dimension:Ud(t)})})),Gr((()=>nr))):nr;var o})))},jC={epics0:(e,t)=>_v(e,Dv).pipe(co((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.lockShare)})),Oo(t),Ro((([e,t])=>{const{share:{sharePrivilege:r}}=t,{payload:{body:{lockShare:o}}}=e;r!==o&&Ga(hs,o)})),Vr((([e])=>qI(e.payload.body.lockShare)))),epics1:e=>_v(e,20227).pipe(Vr((e=>XI(e.payload.body.ssrc)))),epics2:(e,t)=>_v(e,Tv).pipe(Oo(t),co((([e,t])=>{const{payload:{body:r}}=e,{share:{isReceiveSharingFromMainSession:o}}=t;return!o||o&&r.fromMainSession})),Gr((([e,t])=>{const{share:{isReceiveSharing:r,activeNodeId:o,isReceiveSharingFromMainSession:n},meeting:{userId:i}}=t,{payload:{body:s}}=e,a=[];if(r&&1===s.bStatus){if(o!==i)if(XE(t))a.push(...DC(o,s.activeNodeID,s.ssrc,{state:t,rwgAgent:wC,mediaAgent:NC})),Ga(as,{userId:s.activeNodeID});else{const e={activeUserId:s.activeNodeID,isActive:!0};n&&Object.assign(e,{isFromMainSession:!0}),Ga(Ji,e)}}else if(1===s.bStatus){const e={activeUserId:s.activeNodeID,isActive:!0};n&&Object.assign(e,{isFromMainSession:!0}),Ga(Ji,e)}else if(r){const e={activeUserId:s.activeNodeID,isActive:!1};n&&Object.assign(e,{isFromMainSession:!0}),Ga(Ji,e)}return a.push(KI(s)),Cr(a)}))),epics3:(e,t)=>Cv(e,[k.SharingDesktopStreamHaveAudio,k.SharingDesktopStreamHaveNoAudio]).pipe(co((e=>e.payload.type!==k.SharingDesktopStreamHaveAudio||!t.value.audio.secondaryAudioMicrophoneId)),Oo(t),Vr((([e,t])=>{const{meeting:{userId:r},share:{isSharingToBreakoutRoom:o,isOptimizedForSharedVideo:n}}=t,{payload:{type:i}}=e,s=i===k.SharingDesktopStreamHaveAudio;return wC.startSharing(r,{bShareToBO:o,bShareAudio:s,bShareVideo:!!n}),NC.switchSharingMode(n?fe.VideoMode:fe.Normal),QI(!1)}))),epics4:e=>Cv(e,[k.DesktopSharingError,k.DesktopSharingChromeExtensionUninstalled,k.DesktopSharingPermissionDenied,k.DesktopSharingSystemError]).pipe(Gr((e=>{const t=[];let r="";return[k.DesktopSharingPermissionDenied,k.DesktopSharingSystemError].includes(e.payload.type)&&(t.push(QI(!0)),e.payload.type===k.DesktopSharingSystemError?T.isMacOS&&(r="To use screen share on Chrome, please allow screen recording access in system setting."):r="To use screen share, please allow the permission request."),Ga(Qi,{reason:r}),Cr(t)}))),epics5:(e,t)=>Cv(e,k.CurrentDesktopSharingWidthHeight).pipe(co((e=>!!e.payload.data)),Vr((e=>{Ga(Yi,{...e.payload.data,userId:t.value.meeting.userId});const{payload:{data:{width:r,height:o}}}=e;return NC.ajustmentSharingCanvas(r,o),YI(e.payload.data)}))),epics6:(e,t)=>Cv(e,k.SharingDecodeMaxSize).pipe(co((e=>!!e.payload.data)),Oo(t),T_((([e,t])=>{const{share:{shareQuality:r,activeNodeId:o,shareViewAttachments:n}}=t,{payload:{data:{fps:i}}}=e,s=Number(i);if(r!==s)return XE(t)?pC(wC,t,o,s):Object.entries(n).filter((([,e])=>e.length>0)).forEach((([e])=>{pC(wC,t,Number(e),s)})),eA(s)}))),epics7:(e,t)=>_v(e,20226).pipe(Ro((e=>{var r,o;if(Ga(Zi,null===(r=e.payload)||void 0===r?void 0:r.body),null!==(o=e.payload)&&void 0!==o&&o.body){const{payload:{body:{width:r,height:o}}}=e;XE(t.value)&&NC.ajustmentReceivedSharingCanvas(r,o)}})),Vr((e=>tA(e.payload.body)))),epics8:(e,t)=>Cv(e,k.SharingPara).pipe(Ro((e=>{var r,o;if(Ga(Zi,null===(r=e.payload.data)||void 0===r?void 0:r.body),null!==(o=e.payload.data)&&void 0!==o&&o.body){const{payload:{data:{body:{width:r,height:o}}}}=e;XE(t.value)&&NC.ajustmentReceivedSharingCanvas(r,o)}})),Vr((e=>{var t;return tA(null===(t=e.payload.data)||void 0===t?void 0:t.body)}))),epics9:(e,t)=>Cv(e,k.UserStopDesktopSharing).pipe(Oo(t),Vr((([,e])=>{const{meeting:{userId:t},share:{status:r}}=e;return r!==q.End&&(wC.stopSharing(t),NC.stopDesktopSharing(),Ga(Xi)),ZI(q.End)}))),epics10:(e,t)=>_v(e,Ov).pipe(Oo(t),co((([e,t])=>{const{meeting:{userId:r}}=t,o=e.payload.body.update;return o&&o.length>0&&o.findIndex((e=>e.id===r&&void 0!==e.bShareOn))>-1})),Gr((([e,t])=>{const{meeting:{userId:r},share:{status:o,isReceiveSharing:n,activeNodeId:i,isSimultaneousShareView:s}}=t,{payload:{body:{update:a}}}=e,u=a.find((e=>e.id===r&&!1===e.bShareOn)),d=a.find((e=>e.id===r&&!0===e.bShareOn)),c=[];return u&&o!==q.End&&(wC.stopSharing(r),NC.stopDesktopSharing(),c.push(ZI(q.End)),Ga(es)),d&&o===q.End&&(n&&!s&&(NC.stopRenderSharing(),wC.unsubscribeSharing(i),c.push(JI(!1))),c.push(ZI(q.Sharing))),Cr(c)}))),epics11:(e,t)=>_v(e,Ov).pipe(Oo(t),co((([e,t])=>{const{meeting:{userId:r}}=t,o=e.payload.body.update;return o&&o.length>0&&o.findIndex((e=>e.id!==r&&void 0!==e.bShareOn))>-1})),Gr((([r,o])=>{const{payload:{body:{update:n}}}=r,{share:{activeNodeId:i,isReceiveSharing:s}}=o,a=KE(o),u=n.filter((e=>!0===e.bShareOn&&!1===e.bSharePause)),d=n.filter((e=>!0===e.bShareOn&&!0===e.bSharePause)),c=n.filter((e=>!1===e.bShareOn));return u.length>0&&u.forEach((e=>{-1===a.findIndex((t=>t.userId===e.id))?Ga(os,e):Ga(ss,e)})),d.length>0&&d.forEach((e=>{Ga(is,e)})),c.length>0&&(c.filter((e=>a.findIndex((t=>t.userId===e.id))>-1)).forEach((e=>{Ga(ns,e)})),s&&c.some((e=>e.id===i)))?lo(_v(e,Tv).pipe(go(1),Eo(nr)),oo(50).pipe(Eo(Rr("timeout")))).pipe(po((()=>{const{share:{activeNodeId:e},meeting:{userId:r}}=t.value,n=a.filter((t=>t.userId!==e&&t.userId!==r));if(n.length>0&&XE(t.value)){var i;const t=[],r=n[0],{userId:s}=r,a=null!==(i=TC(s,o))&&void 0!==i?i:s;return t.push(...DC(e,s,a,{state:o,rwgAgent:wC,mediaAgent:NC})),Ga(as,{userId:s}),t.push(KI({activeNodeID:s,bStatus:1,ssrc:a})),Cr(t)}return nr}))):nr}))),epics12:(e,t)=>_v(e,Rv).pipe(Oo(t),bo((([e,r])=>{const{payload:{body:{encryptKey:o,additionalType:n}}}=e,{media:{sharingDecodeStatus:i,sharingEncodeStatus:s},meeting:{confId:a,userId:u,zoomId:d,meetingId:c,meetingNumber:l,isWebinar:p}}=r;return Pd(t).pipe(bo((e=>{let r=s;return(!T.isSupportSendScreenSharing||p&&e&&pu(e.userRole))&&(r="failed"),Md("sharing",r,i).pipe(Ro((([e,r])=>{const i={userId:u,sn:gd(d),confId:a,encryptKey:gd(o),encryptType:n,meetingId:c,meetingNumber:l};if(null==NC||NC.updateMediaParams({iVType:lb.SHARING_ENCODE,isFromMainSession:!1,updateParams:i}),r){NC.updateMediaParams({iVType:lb.SHARING_DECODE,isFromMainSession:!1,updateParams:i});const{participants:{attendeesList:e}}=t.value;if(e.length>0){const t=e.map((e=>({userid:e.userId,sn:e.zoomID&&gd(e.zoomID)})));NC.updateUserMediaSN({added:t,isFromMainSession:!1,iVType:lb.SHARING_DECODE})}}})),Eo(nr))})))}))),epics13:(e,t)=>bv(e,20235).pipe(Oo(t),Ro((([e,t])=>{const{media:{sharingDecodeStatus:r}}=t,{type:o,payload:{body:n}}=e,i=o===`${JS}`;Md("sharing","success",r).subscribe((([,e])=>{e&&NC.addReceivedSharingChannelType({isFromMainSession:i,...n})}))})),Eo(nr)),epics14:(e,t)=>bv(e,20236).pipe(Oo(t),Ro((([e,t])=>{const{media:{sharingDecodeStatus:r}}=t,{type:o,payload:{body:{ssrc:n}}}=e,i=o===`${JS}`;Md("sharing","success",r).subscribe((([,e])=>{e&&NC.removeReceivedSharingChannelType({isFromMainSession:i,ssrc:n})}))})),Eo(nr)),epics15:e=>Cv(e,k.SharingFirstDecodeFrameReceivedSsrc).pipe(co((e=>!!e.payload.data)),Ro((e=>{const{payload:{data:{ssrc:t}}}=e;wC.sendReceivingSharingReady(t)})),Eo(nr)),epics16:(e,t)=>_v(e,20233).pipe(co((()=>!!t.value.share.isRequireReadReceipt)),Ro((e=>{const{payload:{body:{bReceiveOk:t}}}=e;t&&Ga(ms)})),Eo(nr)),epics17:(e,t)=>_v(e,Dv).pipe(co((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.lockShare)})),Gr((e=>{const{payload:{body:{lockShare:r}}}=e,{share:{isOptimizedForSharedVideo:o,isSharingToBreakoutRoom:n},audio:{isSharingAudio:i},meeting:{userId:s}}=t.value,a=[];return r===z.MultipleShare&&o&&(wC.startSharing(s,{bShareWb:!1,bShareAudio:i,bShareToBO:n,bShareVideo:!1}),NC.switchSharingMode(fe.Normal),a.push(dA(!1))),Cr(a)}))),epics18:(e,t)=>Cv(e,k.ShareQosData).pipe(Oo(t),Vr((([e,t])=>{var r,o;const{meeting:{isWebinar:n},media:{sharingEncodeStatus:i,sharingDecodeStatus:s},share:{status:a,isReceiveSharing:u},participants:{xmppAttendeeList:d}}=t;let c=Uu(t).length>0;n&&(c=c||Boolean(d.length));const l=a!==q.End&&"success"===i&&(c||(null===(r=t.recording)||void 0===r?void 0:r.cmrStatus)===En.Start),p=u&&"success"===s;return null!==(o=e.payload.data)&&void 0!==o&&o.encoding?l?(Ga(gs,e.payload),cA(e.payload)):cA(pe):p?(Ga(gs,e.payload),lA(e.payload)):lA(pe)}))),epics19:(e,t)=>Cv(e,k.WHITEBOARD_SUCCESS).pipe(co((e=>!!e.payload.data)),Gr((e=>{var t;const r=cb();var o,n;return null!=r&&null!==(t=r.conn)&&void 0!==t&&t.receivePWARemoteMessage?null==r||null===(o=r.conn)||void 0===o||o.receivePWARemoteMessage(e.payload.data.data):null==r||null===(n=r.conn)||void 0===n||n.receiveRemoteMessage("proto",e.payload.data.data),nr}))),epics20:(e,t)=>_v(e,Ov).pipe(Vr((e=>uf(e.payload.body))),Oo(t),Gr((([e,t])=>{const{meeting:{userId:r},share:{isCameraFeedSharing:o}}=t,n=[];if(e.update){const t=e.update.find((e=>(null==e?void 0:e.userId)===r&&void 0!==e.bVideoOn));o&&!1===(null==t?void 0:t.bVideoOn)&&(wC.stopSharing(r),NC.stopDesktopSharing(),n.push(UA(!1)),n.push(ZI(q.End)),Ga(rs))}return Cr(n)}))),epics21:(e,t)=>_v(e,16444).pipe(Oo(t),Ro((([e,t])=>{const{requestId:r,userId:o,shareSource:n,startAnnotation:i}=e.payload.body,s=n===$e.FrontCamera?re.User:re.Environment;Ga(Ts,{requestId:r,userId:o,shareSource:s,startAnnotation:i})})),Gr((()=>nr))),epics22:(e,t)=>_v(e,16445).pipe(Oo(t),Ro((([e,t])=>{const{requestId:r,userId:o,status:n}=e.payload.body;Ga(Rs,{requestId:r,userId:o,status:n})})),Gr((()=>nr))),epics23:(e,t)=>_v(e,16446).pipe(Oo(t),Ro((([e,t])=>{const{requestId:r,userId:o,status:n}=e.payload.body;Ga(Os,{requestId:r,userId:o,status:n})})),Gr((()=>nr))),epics24:(e,t)=>e.pipe(HS(`${UA}`),Ir(er),Oo(t),Ro((([e,t])=>{const{share:{isCameraFeedSharing:r}}=t;r&&NC.switchSharingMode(fe.CameraMode)})),Gr((()=>nr)))},FC=Ev(jC,HC,BC),{setQaSetting:WC,addQaQuestion:xC,addQaAnswer:$C,removeQaComment:GC,removeQaQuestion:zC,dismissQaQuestion:qC,reopenQaQuestion:KC,voteQaQuestion:JC,answerQaQuestionLive:QC,updateAttendeeAnonymousQuestion:YC,setQaEnabled:ZC,resetQa:XC}=Wc("SET_QA_SETTING","ADD_QA_QUESTION","ADD_QA_ANSWER","REMOVE_QA_COMMENT","REMOVE_QA_QUESTION","DISMISS_QA_QUESTION","REOPEN_QA_QUESTION","VOTE_QA_QUESTION","ANSWER_QA_QUESTION_LIVE","UPDATE_ATTENDEE_ANONYMOUS_QUESTION","SET_QA_ENABLED","RESET_QA"),{setChatPrivilege:eT,setPanelistChatPrivilege:tT,addChatMessageHistory:rT,resetChat:oT,setIsAllowAttendeeChat:nT,setLatestChatMessageId:iT,removeChatMessage:sT,setFileChatSetting:aT,addChatFileRecord:uT,updateChatFileRecord:dT,cancelSendFileChat:cT,addFailedChatFileTransfer:lT,setChatFileMessageId:pT,cancelDownloadFileChat:hT}=Wc("SET_CHAT_PRIVILEGE","SET_PANELIST_CHAT_PRIVILEGE","ADD_CHAT_MESSAGE_HISTORY","RESET_CHAT","SET_IS_ALLOW_ATTENDEE_CHAT","SET_LATEST_CHAT_MESSAGE_ID","REMOVE_CHAT_MESSAGE","SET_FILE_CHAT_SETTING","ADD_CHAT_FILE_RECORD","UPDATE_CHAT_FILE_RECORD","CANCEL_SEND_FILE_CHAT","ADD_FAILED_CHAT_FILE_TRANSFER","SET_CHAT_FILE_MESSAGE_ID","CANCEL_DOWNLOAD_FILE_CHAT"),{setProcessorCreateInfo:mT,addProcessorInstance:gT,removeProcessorInstance:ST,resetProcessor:vT}=Wc("SET_PROCESSOR_CREATE_INFO","ADD_PROCESSOR_INSTANCE","REMOVE_PROCESSOR_INSTANCE","RESET_PROCESSOR"),{setCcEditorInfo:fT,setTempSendCcText:yT,setCcLtMessage:ET,setTempReceiveLtText:_T,setTempReceiveCcText:IT,setGatewayInfoList:AT,setLtEnable:bT,setIsListenClosedCaption:CT,setCcEnable:TT,allowParticipantAskLt:RT,receiveAskStartLt:OT,setMeetingEnabledLtFeature:DT,updateLtStatus:wT,deleteMessage:NT,updateMessage:MT,resetClosedCaption:PT}=Wc("SET_CC_EDITOR_INFO","SET_CC_LT_MESSAGE","SET_TEMP_SEND_CC_TEXT","SET_TEMP_RECEIVE_LT_TEXT","SET_TEMP_RECEIVE_CC_TEXT","SET_GATEWAY_INFO_LIST","SET_LT_ENABLE","SET_IS_LISTEN_CLOSED_CAPTION","SET_CC_ENABLE","ALLOW_PARTICIPANT_ASK_LT","RECEIVE_ASK_START_LT","SET_MEETING_ENABLED_LT_FEATURE","UPDATE_LT_STATUS","DELETE_MESSAGE","UPDATE_MESSAGE","RESET_CLOSED_CAPTION"),{addBreakoutRooms:LT,setBreakoutRoomAllocationPattern:kT,setBreakoutRoomSequenceId:UT,setMeetingElapsedTime:VT,setStartRoomElapsedTime:BT,setBreakoutRoomOptions:HT,setBreakoutRoomControlStatus:jT,setBreakoutRooms:FT,setCurrentBreakoutRoom:WT,setBreakoutRoomAttendeeStatus:xT,setBreakoutRoomConfId:$T,setBreakoutRoomToken:GT,resetBreakoutRoom:zT,setBreakoutRoomClosingRoomTime:qT,setBreakoutRoomBroadcastMessage:KT,setBreakoutRoomHostReplyType:JT,setBreakoutRoomHostReplyRequestId:QT,setMainSessionAttendeeList:YT,setIsHugeBreakoutRoom:ZT,setBreakoutRoomPreAssignedRoomList:XT,setBreakoutRoomUserRoleUpdated:eR,setBreakoutRoomMeetingOptions:tR,setBreakoutRoomUserActivityStatus:rR,setBreakoutRoomIsBroadcastVoice:oR}=Wc("ADD_BREAKOUT_ROOMS","SET_BREAKOUT_ROOM_ALLOCATION_PATTERN","SET_BREAKOUT_ROOM_SEQUENCE_ID","SET_MEETING_ELAPSED_TIME","SET_START_ROOM_ELAPSED_TIME","SET_BREAKOUT_ROOM_OPTIONS","SET_BREAKOUT_ROOM_CONTROL_STATUS","SET_BREAKOUT_ROOMS","SET_CURRENT_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_ATTENDEE_STATUS","SET_BREAKOUT_ROOM_CONF_ID","SET_BREAKOUT_ROOM_TOKEN","RESET_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_CLOSING_ROOM_TIME","SET_BREAKOUT_ROOM_BROADCAST_MESSAGE","SET_BREAKOUT_ROOM_HOST_REPLY_TYPE","SET_BREAKOUT_ROOM_HOST_REPLY_REQUEST_ID","SET_MAIN_SESSION_ATTENDEE_LIST","SET_IS_HUGE_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_PRE_ASSIGNED_ROOM_LIST","SET_BREAKOUT_ROOM_USER_ROLE_UPDATED","SET_BREAKOUT_ROOM_MEETING_OPTIONS","SET_BREAKOUT_ROOM_USER_ACTIVITY_STATUS","SET_BREAKOUT_ROOM_IS_BROADCAST_VOICE"),{setCloudRecordingStatus:nR,setCloudRecordingEnable:iR,setCloudIsoRecordingEnable:sR,setAllowStopAutoRecording:aR,setAutomaticCloudRecordingEnable:uR,setIsZoomIQ:dR,setZoomIQChanging:cR,setLocalRecordStatus:lR,setSupportLocalRecording:pR,setLocalGrantPermissionOption:hR,setLocalPermissionUserList:mR,resetRecording:gR}=Wc("SET_CLOUD_RECORDING_STATUS","SET_CLOUD_RECORDING_ENABLE","SET_CLOUD_ISO_RECORDING_ENABLE","SET_ALLOW_STOP_AUTO_RECORDING","SET_AUTOMATIC_CLOUD_RECORDING_ENABLE","SET_IS_ZOOM_I_Q","SET_ZOOM_I_Q_CHANGING","SET_LOCAL_RECORD_STATUS","SET_SUPPORT_LOCAL_RECORDING","SET_LOCAL_GRANT_PERMISSION_OPTION","SET_LOCAL_PERMISSION_USER_LIST","RESET_RECORDING"),{updateCmdJid:SR,removeCmdJid:vR,setCmdChannelConnectionStatus:fR,resetCmdChannel:yR}=Wc("UPDATE_CMD_JID","REMOVE_CMD_JID","SET_CMD_CHANNEL_CONNECTION_STATUS","RESET_CMD_CHANNEL"),ER="SET_ARCHIVING_STATUS",_R="SET_ARCHIVING_SESSION_READY",IR="SET_ARCHIVING_OPTIONS",AR="RESET_ARCHIVING",{setArchivingStatus:bR,setArchivingSessionReady:CR,setArchivingOptions:TR,resetArchiving:RR}=Wc({[ER]:e=>e,[_R]:e=>e,[IR]:e=>e,[AR]:()=>{}}),{setIsLiveTranscriptionEnabled:OR,setLiveTranscriptionMeetingOptions:DR,setIsLiveTranscriptionManualCaptionerEnabled:wR,setLiveTranscriptionGatewayId:NR,setLiveTranscriptionSupportedLanguage:MR,setIsLiveTranscriptionSubscribed:PR,setCurrentTranscriptionLang:LR,setCurrentTranslationLang:kR,addLiveTranscriptionMessage:UR,updateLiveTranscriptionMessage:VR,reduceLiveTranscriptionMessages:BR,setLiveTranscriptionEngineType:HR,removeLiveTranscriptionFailoverState:jR,setLiveTranscriptionLastCaptionMessage:FR,resetLiveTranscription:WR,setIsHostDisableCaptions:xR,setIsSomeoneSetSessionTranscription:$R,setIsSomeoneTranslating:GR,setIsTranscriptionLanguageLocked:zR,setIsExternalCaptionerCaptioning:qR,setExternalCcUrl:KR,setTranscriptionMode:JR}=Wc("SET_IS_LIVE_TRANSCRIPTION_ENABLED","SET_LIVE_TRANSCRIPTION_MEETING_OPTIONS","SET_IS_LIVE_TRANSCRIPTION_MANUAL_CAPTIONER_ENABLED","SET_LIVE_TRANSCRIPTION_GATEWAY_ID","SET_LIVE_TRANSCRIPTION_SUPPORTED_LANGUAGE","SET_IS_LIVE_TRANSCRIPTION_SUBSCRIBED","SET_CURRENT_TRANSCRIPTION_LANG","SET_CURRENT_TRANSLATION_LANG","ADD_LIVE_TRANSCRIPTION_MESSAGE","UPDATE_LIVE_TRANSCRIPTION_MESSAGE","REDUCE_LIVE_TRANSCRIPTION_MESSAGES","SET_LIVE_TRANSCRIPTION_ENGINE_TYPE","REMOVE_LIVE_TRANSCRIPTION_FAILOVER_STATE","SET_LIVE_TRANSCRIPTION_LAST_CAPTION_MESSAGE","RESET_LIVE_TRANSCRIPTION"," SET_IS_HOST_DISABLE_CAPTIONS","SET_IS_SOMEONE_SET_SESSION_TRANSCRIPTION","SET_IS_SOMEONE_TRANSLATING","SET_IS_TRANSCRIPTION_LANGUAGE_LOCKED","SET_IS_EXTERNAL_CAPTIONER_CAPTIONING","SET_EXTERNAL_CC_URL","SET_TRANSCRIPTION_MODE"),{setPollData:QR,setPollingId:YR,setPollingWebLinks:ZR,setPollingDocMaxSize:XR,setPollingDocSize:eO,setPollingDocLibraryMaxSize:tO,setPollingDocLibrarySize:rO,setIsRwgEnablePolling:oO,setHasPollingInMeeting:nO,resetPoll:iO}=Wc("SET_POLL_DATA","SET_POLLING_ID","SET_POLLING_WEB_LINKS","SET_POLLING_DOC_MAX_SIZE","SET_POLLING_DOC_SIZE","SET_POLLING_DOC_LIBRARY_MAX_SIZE","SET_POLLING_DOC_LIBRARY_SIZE","SET_IS_RWG_ENABLE_POLLING","SET_HAS_POLLING_IN_MEETING","RESET_POLL"),{setLoggerInitOptions:sO,setIsLaplaceInitialized:aO,setIsLogDetailed:uO,resetLogger:dO}=Wc("SET_LOGGER_INIT_OPTIONS","SET_IS_LAPLACE_INITIALIZED","SET_IS_LOG_DETAILED","RESET_LOGGER"),{setIsLiveStreamEnable:cO,setLiveStreamStatus:lO,setLiveStreamChannel:pO,resetLiveStream:hO}=Wc("SET_IS_LIVE_STREAM_ENABLE","SET_LIVE_STREAM_STATUS","SET_LIVE_STREAM_CHANNEL","RESET_LIVE_STREAM"),{setBroadcastStreamingUtk:mO,setBroadcastStreamingChannelId:gO,setBroadcastStreamingStatus:SO,setBroadcastStreamingEnable:vO,resetBroadcastStreaming:fO}=Wc("SET_BROADCAST_STREAMING_UTK","SET_BROADCAST_STREAMING_CHANNEL_ID","SET_BROADCAST_STREAMING_STATUS","SET_BROADCAST_STREAMING_ENABLE","RESET_BROADCAST_STREAMING"),yO=(e,t,r,o,n,i,s,a)=>{const u={ts:o,auth:n,rwcToken:r,dmz:1,option:s};return i&&Object.assign(u,{confID:i}),a&&Object.assign(u,{aid:a}),`https://${e}/wc/ping/${t}?${new URLSearchParams(u).toString()}`},EO=(e,t=!1)=>{const{socket:{zoomSocketStatus:r,xmppSocketStatus:o,mainSessionSocketStatus:n},meeting:{meetingStatus:i}}=e,s=[];if(i===jo.Joined){var a;const t=Fu.getInstance(),r=__.createAgent();if((null===(a=Ru(e))||void 0===a?void 0:a.audio)===Ee.Computer&&t.leaveComputerAudio(),t.disconnect(),Kd.watch(t.destroy()),e.video&&(e.video.subscribedVideoList.length>0&&e.video.subscribedVideoList.forEach((e=>{t.unsubscribeVideo(e)})),e.video.isCurrentUserStartedVideo&&Ga($n)),e.share&&e.share.isReceiveSharing){const t=e.share.activeNodeId;e.share.remoteControlledUserList.length>0&&e.share.remoteControlledUserList.forEach((e=>{r.sharingRequestRemoteControl(e,!1)})),r.unsubscribeSharing(t)}hm.destroyInstance()}if(t||(by.clearSession(),[Cy.WebclientTk,Cy.WebclientZsk,Cy.WebclientZtk,Cy.WebclientRecordingToken,Cy.WebclientObfToken].forEach((e=>{sessionStorage.removeItem(e)})),vb.destroy()),r!==M_.Closed&&s.push(WS()),o!==M_.Closed&&s.push(xS()),n!==M_.Closed&&s.push(KS()),t){const r=Ru(e);s.push(Yg({audio:null==r?void 0:r.audio,muted:null==r?void 0:r.muted,video:null==r?void 0:r.bVideoOn,isFailover:t}))}else s.push(Yg({audio:!1,muted:void 0,video:!1,isFailover:t}));return s.push(rv(),vv(),Yv(),Y_(t),jA(),sl(t),XC(),oT(),vT(),gR(),PT(),zT(),yR(),RR(),WR(t),iO(),dO(t),hO(t),fO(t),iS(jo.Closed)),s},_O=(e,...t)=>Ka({event:Mo,operations:[Vr((t=>t.find((t=>t.userId===e.userId&&(!e.key||void 0!==t[`${e.key}`]))))),co((e=>!!e)),go(1)]},...t),IO={[`${Fo.AudioDecodeInWorklet}`]:{mask:15,action:hv},[`${Fo.VideoHalfWebRTCEnable}`]:[{mask:null,action:Fl}],[`${Fo.WebGL2Render}`]:{mask:15,action:$l},[`${Fo.WebGPURender}`]:{mask:15,action:Gl},[`${Fo.ZMKFromRWG}`]:{mask:15,action:ES}};function AO(e){if(!e)return"";const t=e.match(/rid=(.*)/);return t?t[1]:""}const bO=["userId","displayName","audio","isHost","avatar","bRaiseHand","bHold","bVideoOn","sharerOn","sharerPause","feedback","bLocalRecord","strPronoun","sdkKey","audioConnectionStatus","caps","bAllowISORecord","bVideoConnect","userIdentity","isSpeakerOnly","bVideoShare","bShareAudioOn","bShareToBORooms","bid",{from:"bBotUser",to:"botUser"},{from:"BotBrandName",to:"botBrandName"},{from:"BotAuthorizerName",to:"botAuthorizerName"},{from:"bInFailover",to:"isInFailover"},{from:"userGUID",to:"userGuid"},{from:"bGuest",to:"isGuest"},{from:"sharerPause",to:"sharePause"},{from:"bCoHost",to:e=>({isCoHost:!!e})},{from:"muted",to:(e,t)=>({muted:null!=t&&t.isSpeakerOnly||""===(null==t?void 0:t.audio)?void 0:e})},{from:"userType",to:(e,t)=>{const r=cu(e),o={isPhoneUser:r};return r&&null!=t&&t.phoneNumber&&Object.assign(o,{phoneNumber:t.phoneNumber}),o}}];function CO(e){return bO.reduce(((t,r)=>{const o="string"==typeof r?r:r.from,n=function(e,t,r){if("string"==typeof e)return{[`${e}`]:t};if("object"==typeof e&&void 0!==e.from){const{to:o}=e;return"string"==typeof o?{[`${o}`]:t}:o(t,r)}}(r,e[o],e);return{...t,...n}}),{})}const TO=({breakoutRoom:{mainSessionAttendeeList:e}})=>e,RO=({meeting:{zoomId:e}})=>e,OO=({breakoutRoom:{isHugeBO:e}})=>e,DO=ru([({breakoutRoom:{controlStatus:e}})=>e,({breakoutRoom:{currentRoom:{status:e}}})=>e,({breakoutRoom:{currentRoom:{boId:e}}})=>e],((e,t,r)=>!(e!==mu.InProgress&&e!==mu.Closing||t!==Su.InRoom&&t!==Su.TimeUp||!r))),wO=ru([({breakoutRoom:{rooms:e}})=>e,ou,RO,TO,DO,OO],((e,t,r,o,n,i)=>{const s=e.reduce(((e,t)=>{const{attendeeGuidList:r}=t;return e.concat(r)}),[]);return(n?o:t).filter((e=>!e.bHold&&!e.isHost&&e.zoomID!==r&&!e.bid&&!s.includes(e.userGUID)&&(!i||WE(e.caps))))})),NO=ru([DO,TO,ou,RO,OO],((e,t,r,o,n)=>(e?t:r).filter((e=>!e.bHold&&!e.isHost&&e.zoomID!==o&&!e.bid&&(!n||WE(e.caps)))))),MO=ru([DO,TO,ou],((e,t,r)=>e?t.find((e=>e.isHost)):r.find((e=>e.isHost))));var PO,LO,kO,UO;const VO=__.createAgent();let BO=(PO=my(hy.Other),LO=my(hy.Other),kO=my(hy.Other),UO=class extends A_{constructor(e){super(e),this.modules=void 0,this.useSDK=void 0,this.useSDK=!1,this.modules=new Map}initWithSDK(e,t,r){return this.useSDK=!0,this.init(e,t,r)}init(e,r,i){const{audio:u,video:d}=D();if(!u||!d)return console.error("https://developers.zoom.us/docs/video-sdk/web/browser-support"),Promise.reject({type:Je,errorCode:Na.CLIENT_PLATFORM_UNSUPPORTED,reason:"Please update to the latest Chrome, Edge, Safari, or Firefox, as your current browser doesn't support audio/video. Retry after the upgrade."});const{[o]:c,[t]:l}=this;let p=f,h="en-US",m=`${f}/${Vo}`;if(i){const{dependentAssets:e,additionalFeatures:t,constraints:r,language:o,webEndpoint:s}=i;o&&(h=o),s&&function(e){g=a(e,{hostname:!0})}(s),e===Bo.CDN||e===v?(p=v,m=`${v}/${Vo}`):e===Bo.Global||e===f?(p=f,m=`${f}/${Vo}`):e===Bo.CN||e===y?(p=y,m=`${y}/${Vo}`):e&&/^https?:\/\//.test(e)&&(p=Cd(e),m=`${p}/${Vo}`),t&&Array.isArray(t)&&t.forEach((e=>{if(this[n][e]&&void 0===l.getState()[e]){const{epic:t,reducer:r,Client:o}=this[n][e];l.injectReducer(e,r),l.injectEpic(t);const i=new o(l);this.modules.set(e,i)}})),null!=r&&r.audio&&void 0===l.getState().audio&&(l.injectReducer("audio",qA),l.injectEpic(QA)),null!=r&&r.video&&void 0===l.getState().video&&(l.injectReducer("video",nb),l.injectEpic(ub)),null!=r&&r.screen&&void 0===l.getState().share&&(l.injectReducer("share",VC),l.injectEpic(FC))}return c(xg({apiKey:e,signature:r,language:h,useSDK:this.useSDK})),c(lv({mediaConstraints:i&&i.constraints||{},assetsPath:p,enforceMultipleVideos:null==i?void 0:i.enforceMultipleVideos,enforceVirtualBackground:null==i?void 0:i.enforceVirtualBackground,skipJsMedia:null==i?void 0:i.skipJsMedia,patchJsMedia:null==i?void 0:i.patchJsMedia,alternativeNameForVideoPlayer:null==i?void 0:i.alternativeNameForVideoPlayer})),void 0!==(null==i?void 0:i.stayAwake)&&c(mS(i.stayAwake)),void 0!==(null==i?void 0:i.quicklyLeaveMeeting)&&c(fS(i.quicklyLeaveMeeting)),void 0!==(null==i?void 0:i.isUIToolkit)&&c(Hg(i.isUIToolkit)),void 0!==(null==i?void 0:i.isLogDetailed)&&c(uO(!!i.isLogDetailed)),new Promise(((e,t)=>{null!=i&&i.skipJsMedia?e(""):s(m,(()=>{var t;null!==(t=window.JsMediaSDK_Instance)&&void 0!==t&&null!==(t=t.util)&&void 0!==t&&t.initAsyncJob?window.JsMediaSDK_Instance.util.initAsyncJob().then((()=>e(""))):e("")}),(()=>{t({type:et,reason:"dependent assets are not accessible",errorCode:Na.CLIENT_DEPENDENT_ASSETS_INACCESSIBLE})}))}))}on(e,t){((e,t)=>{const r=Va[e];if(r){const o=Ha.get(e);if(o)o.push(t),Ha.set(e,o);else{const o=[t];Ha.set(e,o);const n=io(...r.map((e=>{const{event:t,payload:r}=e;return eo(Ba,t).pipe(Vr((e=>r(e))),Ir(Xt))}))).subscribe((t=>{const r=Ha.get(e);r&&r.forEach((e=>{e(t)}))}));ja.push(n)}}})(e,t)}off(e,t){((e,t)=>{if(Va[e]){const r=Ha.get(e);if(Array.isArray(r)){const o=r.filter((e=>e!==t));Ha.set(e,o)}}})(e,t)}getFeatureModule(e){return this.modules.get(e)}leave(){const{[r]:e,[o]:t}=this,{socket:{zoomSocketStatus:n},meeting:{meetingInfoTimestamp:i,zlkJwtToken:s}}=e();return n===M_.Connected||n===M_.Connecting?t(Lg()):(i&&t(Lg()),s||t(kg())),Mr(oo(500).pipe(vo("")))}end(){const{[r]:e,[o]:t}=this;return"connected"===e().socket.zoomSocketStatus?(t(Ug()),Mr(oo(500).pipe(Ro((()=>{Ya()})),vo("")))):Promise.resolve("")}changeName(e,r){const o=this[t].getState(),{meeting:{bAllowAttendeeRename:n}}=o,i=Ru(o),s=pu(i.userRole),a=Ou(o);if(s)return Promise.reject({type:Ze,errorCode:Na.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED});if(r&&r!==(null==i?void 0:i.userId)){if(a){const{participants:{attendeesList:t}}=o,n=t.find((e=>e.userId===r));if(n)return VO.rename(r,ld(e),ld(n.displayName)),_O({userId:r,key:"displayName"},(t=>t.displayName===e));{const t=wu(o).find((e=>e.userId===r));if(t){const r=C_.getInstance();return VO.rename(t.userId,ld(e),ld(t.displayName)),r.rename(t.jid,e),Ka(Lo,(r=>{const o=r.find((e=>e.jid===t.jid));return o&&o.displayName===e}))}return Promise.reject({type:et,reason:"no matching user",errorCode:Na.CLIENT_MISMATCH_USER})}}return Promise.reject({type:Ze,errorCode:Na.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})}return e===i.displayName?Promise.resolve():a||n?(VO.rename(i.userId,ld(e),ld(i.displayName)),Ka(wo,(t=>t.displayName===e))):Promise.reject({type:Ze,reason:"host disallow rename themselves",errorCode:Na.CLIENT_HOST_DISALLOW_RENAME})}makeHost(e){return VO.assignHost(e,!1),_O({userId:e,key:"isHost"},(e=>!0===e.isHost))}makeCoHost(e){const r=this[t].getState(),o=Mu(r).find((t=>t.userId===e));return!0===(null==o?void 0:o.bCoHost)?Promise.reject({type:et,reason:`user:[${e}] is already co-host `,errorCode:Na.CLIENT_MISMATCH_USER}):(VO.assignHost(e,!0),_O({userId:e,key:"bCoHost"},(e=>!0===e.bCoHost)))}revokeCoHost(e){const r=this[t].getState(),o=Mu(r).find((t=>t.userId===e));return!1===(null==o?void 0:o.bCoHost)?Promise.reject({type:et,reason:`user:[${e}] is not a co-host`,errorCode:Na.CLIENT_MISMATCH_USER}):(VO.revokeCoHost(e),_O({userId:e,key:"bCoHost"},(e=>!1===e.bCoHost)))}reclaimHost(){const e=this[r](),{meeting:{isOriginHost:t}}=e,o=Ru(e);return null!=o&&o.isHost?Promise.resolve(""):t?(VO.reclaimHost(o.userId,!1),Ka(wo,(e=>!0===e.isHost))):Promise.reject({type:Ze,reason:"Only orignial host can reclaim host",errorCode:Na.CLIENT_MISMATCH_USER})}isHost(){const e=this[t].getState(),r=Ru(e);return!!r&&r.isHost}isCoHost(){const e=this[t].getState(),r=Ru(e);return!!r&&!!r.bCoHost}isOriginHost(){const{meeting:{isOriginHost:e}}=this[r]();return e}getCurrentUserInfo(){const e=this[t].getState(),r=Ru(e);if(r){const t=CO(r);if(e.meeting.isWebinar&&pu(r.userRole)){const{audio:r}=e,o=null==r?void 0:r.isAllowToTalk;Object.assign(t,{isAllowToTalk:o})}if(e.breakoutRoom&&DO(e)){const{breakoutRoom:{currentRoom:{boId:r}}}=e;Object.assign(t,{bid:r})}return t}return null}getParticipantsList(){const e=this[t].getState(),{meeting:{meetingStatus:r}}=e,o=Ru(e);if(r===jo.Joined&&o&&!o.bHold){var n;const t=e.breakoutRoom&&DO(e)?null===(n=e.breakoutRoom)||void 0===n||null===(n=n.currentRoom)||void 0===n?void 0:n.boId:"";return Mu(e).map((e=>{const r=CO(e);return t&&Object.assign(r,{bid:t}),r}))}return[]}getAssistantsList(){const e=this[t].getState(),{meeting:{meetingStatus:r}}=e,o=Ru(e);return r===jo.Joined&&o?Pu(e).map((e=>({userId:e.userId,displayName:e.displayName,isNewAst:!0}))):[]}getMeetingHost(){var e;const t=this[r]();let o=Lu(t);return o||(null===(e=t.breakoutRoom)||void 0===e?void 0:e.currentRoom.status)!==Su.InRoom||(o=t.breakoutRoom.mainSessionAttendeeList.find((e=>e.isHost))),void 0!==o?CO(o):null}getMeetingInfo(){const{meeting:{meetingStatus:e,isOnHold:t,meetingNumber:o,passWord:n,userName:i,userEmail:s,meetingTopic:a,meetingOptions:u,encType:d,region:c,network:l,topic:p,zlkJwtToken:h,userId:m,lang:g,inviteEmail:S,meetingId:v,participantID:f,h323Password:y,recordingDisclaimer:_,recordingDisclaimerForRecorder:I,wrInfo:A,meetingInfo:b,isNewJoinFlow:C,chatModerationPolicy:T}}=this[r](),R=e===jo.Joined&&!t;if(h)return{topic:p,password:n,userName:i,isInMeeting:R,userId:m,meetingId:v};{let e="";return 0===d?e="None":1===d?e="AES ECB":2===d&&(e="AES GCM"),{meetingNumber:o,password:n,userName:i,userEmail:s,inviteEmail:S,meetingTopic:a,encryptionType:e,region:c,network:l,isInMeeting:R,userId:m,lang:g,webEndpoint:E(),meetingId:v,participantId:f,telPwd:y,recordingInfo:{recordingDisclaimer:_,recordingDisclaimerForRecorder:I,isUserEnableRecordingReminder:null==u?void 0:u.isUserEnableRecordingReminder},wrInfo:Object.assign({},A,{isNew:C}),scheduleInfo:b,chatModerationPolicy:T}}}},bS(UO.prototype,"end",[kS,MS],Object.getOwnPropertyDescriptor(UO.prototype,"end"),UO.prototype),bS(UO.prototype,"changeName",[MS],Object.getOwnPropertyDescriptor(UO.prototype,"changeName"),UO.prototype),bS(UO.prototype,"makeHost",[PO,kS,MS],Object.getOwnPropertyDescriptor(UO.prototype,"makeHost"),UO.prototype),bS(UO.prototype,"makeCoHost",[LO,kS,MS],Object.getOwnPropertyDescriptor(UO.prototype,"makeCoHost"),UO.prototype),bS(UO.prototype,"revokeCoHost",[kO,kS,MS],Object.getOwnPropertyDescriptor(UO.prototype,"revokeCoHost"),UO.prototype),bS(UO.prototype,"reclaimHost",[MS],Object.getOwnPropertyDescriptor(UO.prototype,"reclaimHost"),UO.prototype),UO);const HO=__.createAgent(),jO=C_.getInstance(),FO=(e,t,r)=>{const o=null==t?void 0:t.userId;if(null==e||!e.zoomID||null==t||!t.displayName||o===e.userId)return{type:et,reason:"invalid target user",errorCode:Na.CHAT_MISMATCH_USER};const{chat:{chatPrivilege:n,panelistChatPrivilege:i},meeting:{isWebinar:s}}=r,a=Ou(r),u=t.isHost||t.bCoHost;let d=!1;if(!a){if(s)if(pu(e.userRole))(n===t_.NoAttendee||n===t_.AllPanelist&&o!==o_.Panelist||n===t_.All&&o!==o_.All&&o!==o_.Panelist)&&(d=!0);else{const e=pu(null==t?void 0:t.userRole);(i===r_.Invalid||i===r_.AllPanelist&&(e||o===o_.All))&&(d=!0)}else(n===t_.NoAttendee||n===t_.Host&&!u||o===o_.SilentModeUsers||n===t_.EveryonePublicly&&o!==o_.All&&!u)&&(d=!0);if(d)return{type:Ze,reason:"Insufficient chat privilege",errorCode:Na.CHAT_INSUFFICIENT_PRIVILEGE}}return null};function WO(e,t){if(t===o_.All)return c_;if(t===o_.Panelist)return l_;if(t===o_.SilentModeUsers)return p_;{const{meeting:{isWebinar:r},participants:{xmppAttendeeList:o,attendeesList:n}}=e;return r?n.find((e=>e.userId===t))||o.find((e=>e.userId===t)):n.find((e=>e.userId===t))}}function xO(e,t,r){if(null!=r&&r.host)return[Lu(e),...ku(e)].filter((e=>(null==e?void 0:e.userId)!==t)).map((e=>({userId:null==e?void 0:e.userId,displayName:null==e?void 0:e.displayName,isHost:null==e?void 0:e.isHost,isCoHost:null==e?void 0:e.bCoHost})));{let o=[Lu(e),...ku(e),...e.participants.attendeesList.filter((e=>!(e.bCoHost||e.isHost||e.bHold)))];if(null!=r&&r.includeAttendee){const t=wu(e).filter((e=>!cu(e.userType)));o=[...o,...t]}return o.filter((e=>void 0!==e&&e.userId!==t)).map((e=>({userId:null==e?void 0:e.userId,displayName:null==e?void 0:e.displayName,isHost:null==e?void 0:e.isHost,isCoHost:null==e?void 0:e.bCoHost})))}}function $O(e,t){const{chat:{chatHistory:r}}=t;return r.find((t=>{var r;return(null===(r=t.file)||void 0===r||null===(r=r.upload)||void 0===r?void 0:r.uniqueId)===e}))}function GO(e,t){const{meeting:{isWebinar:r},participants:{attendeesList:o}}=t,{destNodeID:n,senderName:i,attendeeNodeID:s}=e,a=o.find((e=>e.userId===n)),u=e.sn?e.sn:null==a?void 0:a.zoomID,d=i?pd(i):null==a?void 0:a.displayName;let c,l="";if(s===o_.SilentModeUsers)return{sender:{name:"Host",userId:n},receiver:{name:"Everyone (in Waiting Room)",userId:s},timestamp:(new Date).getTime()};if(s===o_.All)l=r?"All panelists and attendees":"Everyone";else if(s===o_.Panelist)l="All panelists";else{if(r){const e=wu(t).find((e=>e.userId===s));e&&(l=e.displayName)}if(!l){const e=o.find((e=>e.userId===s));e&&(l=e.displayName,c=e.userGUID)}}return{sn:u,sender:{name:d,userId:n,userGuid:null==a?void 0:a.userGUID,avatar:null==a?void 0:a.avatar},receiver:{name:l,userId:s,userGuid:c},timestamp:(new Date).getTime()}}function zO(e){var t;const[r]=e.split(".").reverse();return null!==(t=v_[r])&&void 0!==t?t:""}function qO(e,t){const r=[];for(let o=e.length-1;o>=0;o--){const n=e[o];if(!n.file&&(!n.id&&n.sender.userId===t.userId&&[o_.All,o_.Panelist,o_.IndividualCcPanelist,t.destNodeID].includes(n.receiver.userId)&&r.unshift(n),n.id))break}return r.length>0?r[0]:null}function KO(e){switch(e.responseType){case"json":if("response"in e)return e.response;var t=e;return JSON.parse(t.responseText);case"document":return e.responseXML;default:return"response"in e?e.response:(t=e).responseText}}var JO=function(e,t,r,o){void 0===o&&(o="download_load"),this.originalEvent=e,this.xhr=t,this.request=r,this.type=o;var n=t.status,i=t.responseType;this.status=null!=n?n:0,this.responseType=null!=i?i:"";var s=t.getAllResponseHeaders();this.responseHeaders=s?s.split("\n").reduce((function(e,t){var r=t.indexOf(": ");return e[t.slice(0,r)]=t.slice(r+2),e}),{}):{},this.response=KO(t);var a=e.loaded,u=e.total;this.loaded=a,this.total=u},QO=lt((function(e){return function(e,t,r){var o;this.message=e,this.name="AjaxError",this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType;try{o=KO(t)}catch(e){o=t.responseText}this.response=o}})),YO=function(){function e(e,t){return QO.call(this,"ajax timeout",e,t),this.name="AjaxTimeoutError",this}return e.prototype=Object.create(QO.prototype),e}();var ZO=Vr((function(e){return e.response}));var XO,eD=(XO=function(e){return function(e){return new Nt((function(t){var r,o,n,i=nt({async:!0,crossDomain:!1,withCredentials:!1,method:"GET",timeout:0,responseType:"json"},e),s=i.queryParams,a=i.body,u=i.headers,d=i.url;if(!d)throw new TypeError("url is required");if(s)if(d.includes("?")){var c=d.split("?");if(2<c.length)throw new TypeError("invalid url");n=new URLSearchParams(c[1]),new URLSearchParams(s).forEach((function(e,t){return n.set(t,e)})),d=c[0]+"?"+n}else d=d+"?"+(n=new URLSearchParams(s));var l={};if(u)for(var p in u)u.hasOwnProperty(p)&&(l[p.toLowerCase()]=u[p]);var h=i.crossDomain;h||"x-requested-with"in l||(l["x-requested-with"]="XMLHttpRequest");var m=i.withCredentials,g=i.xsrfCookieName,S=i.xsrfHeaderName;if((m||!h)&&g&&S){var v=null!==(o=null===(r=null===document||void 0===document?void 0:document.cookie.match(new RegExp("(^|;\\s*)("+g+")=([^;]*)")))||void 0===r?void 0:r.pop())&&void 0!==o?o:"";v&&(l[S]=v)}var f,y=function(e,t){var r;if(!e||"string"==typeof e||function(e){return"undefined"!=typeof FormData&&e instanceof FormData}(e)||function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}(e)||function(e){return aD(e,"ArrayBuffer")}(e)||function(e){return aD(e,"File")}(e)||function(e){return aD(e,"Blob")}(e)||function(e){return"undefined"!=typeof ReadableStream&&e instanceof ReadableStream}(e))return e;if(function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(e)}(e))return e.buffer;if("object"==typeof e)return t["content-type"]=null!==(r=t["content-type"])&&void 0!==r?r:"application/json;charset=utf-8",JSON.stringify(e);throw new TypeError("Unknown body type")}(a,l),E=nt(nt({},i),{url:d,headers:l,body:y});f=e.createXHR?e.createXHR():new XMLHttpRequest;var _=e.progressSubscriber,I=e.includeDownloadProgress,A=void 0!==I&&I,b=e.includeUploadProgress,C=void 0!==b&&b,T=function(e,r){f.addEventListener(e,(function(){var e,o=r();null===(e=null==_?void 0:_.error)||void 0===e||e.call(_,o),t.error(o)}))};T("timeout",(function(){return new YO(f,E)})),T("abort",(function(){return new QO("aborted",f,E)}));var R=function(e,t){return new JO(t,f,E,e+"_"+t.type)},O=function(e,r,o){e.addEventListener(r,(function(e){t.next(R(o,e))}))};C&&[oD,nD,iD].forEach((function(e){return O(f.upload,e,tD)})),_&&[oD,nD].forEach((function(e){return f.upload.addEventListener(e,(function(e){var t;return null===(t=null==_?void 0:_.next)||void 0===t?void 0:t.call(_,e)}))})),A&&[oD,nD].forEach((function(e){return O(f,e,rD)}));var D=function(e){var r="ajax error"+(e?" "+e:"");t.error(new QO(r,f,E))};f.addEventListener("error",(function(e){var t;null===(t=null==_?void 0:_.error)||void 0===t||t.call(_,e),D()})),f.addEventListener(iD,(function(e){var r,o,n=f.status;if(n<400){null===(r=null==_?void 0:_.complete)||void 0===r||r.call(_);var i=void 0;try{i=R(rD,e)}catch(e){return void t.error(e)}t.next(i),t.complete()}else null===(o=null==_?void 0:_.error)||void 0===o||o.call(_,e),D(n)}));var w=E.user,N=E.method,M=E.async;for(var p in w?f.open(N,d,M,w,E.password):f.open(N,d,M),M&&(f.timeout=E.timeout,f.responseType=E.responseType),"withCredentials"in f&&(f.withCredentials=E.withCredentials),l)l.hasOwnProperty(p)&&f.setRequestHeader(p,l[p]);return y?f.send(y):f.send(),function(){f&&4!==f.readyState&&f.abort()}}))}("string"==typeof e?{url:e}:e)},XO.get=function(e,t){return eD({method:"GET",url:e,headers:t})},XO.post=function(e,t,r){return eD({method:"POST",url:e,body:t,headers:r})},XO.delete=function(e,t){return eD({method:"DELETE",url:e,headers:t})},XO.put=function(e,t,r){return eD({method:"PUT",url:e,body:t,headers:r})},XO.patch=function(e,t,r){return eD({method:"PATCH",url:e,body:t,headers:r})},XO.getJSON=function(e,t){return ZO(eD({method:"GET",url:e,headers:t}))},XO),tD="upload",rD="download",oD="loadstart",nD="progress",iD="load",sD=Object.prototype.toString;function aD(e,t){return sD.call(e)==="[object "+t+"]"}const uD=RE.getInstance(),dD=uD.makeLogger(["File Transfer"]);function cD(e,t,r){const{name:o,size:n}=e,{meeting:{reportDomain:i,svcUrl:s,conId:a}}=r;return`https://${i}${t}?${new URLSearchParams({filename:o,filesize:n,rwg:s,cid:a}).toString()}`}function lD(e,t){return t.fileObj?`${e}/zoomfile/download?objkey=${t.fileObj}&business=meeting`:`${e}/file/${t.fileID}?business=meeting`}function pD(e,t){return{fileName:e.name,fileSize:e.size,receiverId:null==t?void 0:t.userId,receiverGuid:null==t?void 0:t.userGuid}}function hD(e,t,r){uD.report(`${e}. file name:${IE(t.name)},file size:${t.size}, ${"type"in t?`file type:${t.type}`:""}, error:${r.name};${r.message}`,["File Transfer"])}function mD(e){var t,r,o;return{id:e.id,fileName:null===(t=e.file)||void 0===t?void 0:t.name,fileSize:null===(r=e.file)||void 0===r?void 0:r.size,fileUrl:null===(o=e.file)||void 0===o?void 0:o.fileUrl,senderId:e.sender.userId,senderGuid:e.sender.userGuid}}function gD(e,t,r){return new Promise(((o,n)=>{const i=new FileReader;i.readAsArrayBuffer(e.slice(t,r)),i.onload=e=>{var t;return o(null===(t=e.target)||void 0===t?void 0:t.result)},i.onerror=e=>n(e)}))}async function SD(e,t){let[r,o]=[e.size,0];null!=t&&(r=Math.min(m_.ChunkSize,e.size-t),o=t);const n=e.size-o<=m_.ChunkSize,i=Math.ceil(r/m_.EncodeBlockSize);try{const r=await Promise.all(Array.from({length:n?Math.max(i-1,1):i},((e,t)=>({start:t*m_.EncodeBlockSize+o,end:(n&&t===i-2?t+2:t+1)*m_.EncodeBlockSize+o}))).map((async({start:r,end:o})=>{try{const t=await gD(e,r,o);return t?await vb.beginEncrypt({text:new Uint8Array(t),type:hb.CHAT_FILE}):Promise.reject(null)}catch(r){return hD(`encrypt file buffer error. offset:${t},`,e,r),Promise.reject(r)}})));return function(e){const t=e.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(t);let o=0;for(const t of e)r.set(new Uint8Array(t),o),o+=t.byteLength;return r}(r)}catch(e){console.warn(e)}return null}function vD(e,t,r,o){return o.pipe(HS(`${cT}`,`${WS}`),co((o=>{if(o.type===`${WS}`)return!0;const{payload:{uniqueId:n,fileName:i,userId:s}}=o;return t===n&&e.name===i&&r.userId===s})),go(1),Ro((o=>{dD.info(`Cancel file upload. file name:${IE(e.name)},file size:${e.size},receiver id:${r.userId}`),Ga(ln,{...pD(e,r),progress:0,status:g_.Cancel,retryToken:o.type===`${cT}`?t:void 0})})))}function fD(e,t){if(null!=e&&e.file){const{file:r,receiver:o}=e,{upload:{chunkIndex:n,totalChunks:i,uniqueId:s}}=r;return Ga(ln,{...pD(t,o),progress:Math.floor((null!=n?n:0)/(null!=i?i:1)*100),status:g_.Fail,retryToken:s}),Cr([dT({upload:{status:g_.Fail,progress:0,uniqueId:s}}),lT({uniqueId:s,file:t})])}return nr}function yD(e,t){return Ga(ln,{...pD(e),progress:0,status:g_.Fail}),Tr(dT({upload:{status:g_.Fail,progress:0,uniqueId:t}}))}async function ED(e,t,r,o){const n=cD(e,"/wc/fileupload",o.value),i=new FormData;try{const s=await SD(e),a=$O(t,o.value);if(s&&a){i.append("file",new File([s],e.name));const{meeting:{zmk:u}}=o.value,{receiver:d}=a;return eD({url:n,method:"POST",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:u},crossDomain:Ad(n),body:i,includeUploadProgress:!0}).pipe(Co(vD(e,t,d,r)),Gr((r=>{const{type:n,loaded:i,responseHeaders:s,total:a}=r;let u=0,c=g_.InProgress;const l={upload:{uniqueId:t}},p=[];if("upload_loadstart"===n)u=0;else if("upload_progress"===n)u=Math.floor(i/a*100*.9);else if("upload_load"===n)u=90;else if("download_load"===n){var h,m;u=100,c=g_.Success;const{chat:{fileServerDomain:e}}=o.value,t=null===(h=s["zoom-file-id"])||void 0===h?void 0:h.trim(),r=null===(m=s["zoom-file-obj"])||void 0===m?void 0:m.trim(),n=lD(e,{fileObj:r});Object.assign(l,{fileID:t,fileObj:r,fileUrl:n})}return Object.assign(l.upload,{progress:u,status:c}),(u>0||"upload_loadstart"===n)&&(Ga(ln,{...pD(e,d),progress:u,status:c}),p.push(dT(l))),Cr(p)})),po((t=>(console.warn(t),hD("Upload small file error.",e,t),fD(a,e)))))}}catch(e){console.warn(e)}return yD(e,t)}const _D=(()=>{const e=new Hu;return t=>async(...r)=>{await e.acquire(),t(...r),setTimeout((()=>{e.release()}),3e3)}})(),ID=function(e){const t=["chatFileTransfer"];return new Proxy(e,{get:(e,r)=>"string"==typeof r&&t.includes(r)?function(...t){return _D(e[r].bind(e))(...t)}:Reflect.get(e,r)})}(__.createAgent()),AD={chatHistory:[],chatPrivilege:t_.All,panelistChatPrivilege:r_.AllPanelist,isAllowAttendeeChat:!0,isFileTransferEnable:!0,isEnableFileTransferEncrypted:!0,fileTransferFileType:[],fileDownloadPromptIgnoreList:[],fileTransferSizeLimit:0,fileServerDomain:"",failedFileTransfer:{}},bD=qc({[`${rT}`]:ay(((e,{payload:t})=>{e.chatHistory.push(t)})),[`${eT}`]:ay(((e,{payload:t})=>{e.chatPrivilege=t})),[`${tT}`]:ay(((e,{payload:t})=>{e.panelistChatPrivilege=t})),[`${nT}`]:ay(((e,{payload:t})=>{e.isAllowAttendeeChat=t})),[`${iT}`]:ay(((e,{payload:t})=>{const{destNodeID:r,msgID:o,userId:n}=t,i=qO(e.chatHistory,{userId:n,destNodeID:r});i&&Object.assign(i,{id:o})})),[`${sT}`]:ay(((e,{payload:t})=>{const{msgId:r}=t,o=e.chatHistory.findIndex((e=>e.id===r));o>=0&&e.chatHistory.splice(o,1)})),[`${aT}`]:ay(((e,{payload:t})=>{Object.assign(e,t)})),[`${uT}`]:ay(((e,{payload:t})=>{const{originFile:r,...o}=t;e.chatHistory.push(o)})),[`${dT}`]:ay(((e,{payload:t})=>{const{upload:r,download:o,originFile:n,...i}=t;if(r){var s;const{uniqueId:t,...o}=r,n=e.chatHistory.find((e=>{var r;return e.file&&(null===(r=e.file.upload)||void 0===r?void 0:r.uniqueId)===t}));null!=n&&null!==(s=n.file)&&void 0!==s&&s.upload&&(Object.assign(n.file.upload,{...o}),Object.assign(n.file,{...i}),n.file.upload.status===g_.Success&&e.failedFileTransfer[n.file.upload.uniqueId]&&delete e.failedFileTransfer[n.file.upload.uniqueId])}else if(o){const{id:t,fileUrl:r}=i,n=e.chatHistory.find((e=>{var o;return e.id===t&&(null===(o=e.file)||void 0===o?void 0:o.fileUrl)===r}));null!=n&&n.file&&(n.file.download?Object.assign(n.file.download,{...o}):Object.assign(n.file,{download:o}))}})),[`${cT}`]:ay(((e,{payload:t})=>{const{uniqueId:r,fileName:o,userId:n}=t,i=e.chatHistory.find((e=>e.file&&e.file.name==o&&e.file.upload.uniqueId===r&&e.file.upload.status===g_.InProgress&&e.receiver.userId===n));var s;null!=i&&i.file&&Object.assign(null===(s=i.file)||void 0===s?void 0:s.upload,{status:g_.Cancel,progress:0})})),[`${lT}`]:ay(((e,{payload:t})=>{const{uniqueId:r,file:o}=t;e.failedFileTransfer[`${r}`]||Object.assign(e.failedFileTransfer,{[`${r}`]:o})})),[`${pT}`]:ay(((e,{payload:t})=>{const{fileID:r,msgID:o,senderId:n}=t,i=e.chatHistory.find((e=>{var t;return(null===(t=e.file)||void 0===t?void 0:t.fileID)===r&&e.sender.userId===n}));i&&Object.assign(i,{id:o})})),[`${hT}`]:ay(((e,{payload:t})=>{const{id:r,fileUrl:o}=t,n=e.chatHistory.find((e=>{var t,n;return e.id===r&&(null===(t=e.file)||void 0===t?void 0:t.fileUrl)===o&&(null===(n=e.file)||void 0===n?void 0:n.download.status)===S_.InProgress}));var i;null!=n&&n.file&&Object.assign(null===(i=n.file)||void 0===i?void 0:i.download,{status:S_.Cancel,progress:0})})),[`${oT}`]:()=>({...AD})},AD);var CD;const TD=__.createAgent();let RD=(CD=class extends A_{async send(e,t){if(!e)return Promise.reject({type:et,reason:"Text is empty",errorCode:Na.CHAT_EMPTY_MESSAGE});const{[r]:n,[o]:i}=this,s=n(),a=Ru(s),u=WO(s,t),d=FO(a,u,s);if(d)return Promise.reject(d);const{meeting:{isWebinar:c,encType:l}}=s,p=l===pb.AES_GCM;let h=!1;const m=c&&pu(u.userRole);if(t===o_.SilentModeUsers)TD.chat(ld(e),t);else{let r,o=0;c?m?8&~u.clientCap?(o=o_.Panelist,r=t,h=!0):(o=o_.IndividualCcPanelist,r=t):u&&(o=u.userId):o=u.userId,await async function(e){const{text:t,destId:r,sn:o,attendeeId:n}=e;{const e=await vb.beginEncrypt({text:t,type:hb.RWG_CHAT});HO.chat(e,r,o,n)}}({text:e,destId:o,sn:null==a?void 0:a.zoomID,attendeeId:r}),h&&await function(e){const{text:t,jid:r,isGCMEnabled:o}=e;return vb.beginEncrypt({text:t,type:hb.XMPP_CHAT}).then((e=>{jO.sendWebinarMseeage(e,r,o_.IndividualCcPanelist,o)}))}({text:e,jid:u.jid,isGCMEnabled:p})}const g=function(e,t,r,o){const n=(new Date).getTime(),i=performance.now();return{message:e,sender:{name:t.displayName,userId:t.userId,userGuid:t.userGUID,avatar:t.avatar},receiver:{name:null==r?void 0:r.displayName,userId:o?o_.IndividualCcPanelist:null==r?void 0:r.userId,userGuid:null==r?void 0:r.userGUID},timestamp:n,highResTimeStampForIdentification:i}}(e,a,u,m);if(i(rT(g)),h)return Ga(an,g),g;try{const e=await Mr(Ja(dn).pipe(kr(5e3),Io((e=>g.highResTimeStampForIdentification!==e.identification||!([e.receiverId,o_.All,o_.Panelist].includes(t)||e.receiverId===o_.IndividualCcPanelist))),go(1))),{msgId:r}=e,{highResTimeStampForIdentification:o,...n}=g,i={id:r,...n,...m&&{receiver:{name:null==u?void 0:u.displayName,userId:null==u?void 0:u.userId}}};return Ga(an,i),i}catch(e){return Promise.reject({type:Ye,errorCode:Na.OPERATION_TIMEOUT})}}setPrivilege(e){const t=this[r](),{meeting:{isWebinar:o},chat:{chatPrivilege:n},breakoutRoom:i}=t;return n===e?Promise.resolve(""):(null==i?void 0:i.controlStatus)===mu.InProgress&&DO(t)?Promise.reject({type:Je,reason:"Cannot update chat privilege in a subsession",errorCode:Na.CHAT_SUBSESSION_CONFLICT}):!o&&!s_.includes(e)||o&&!a_.includes(e)?Promise.reject({type:et,reason:"invalid privilege value of parameter",errorCode:Na.CHAT_INVALID_PRIVILEGE}):(TD.setChatPriviledge(e),Ka(un,(t=>t.chatPrivilege===e)))}setPanelistPrivilege(e){const t=this[r](),{chat:{panelistChatPrivilege:o}}=t,n=d_[e];return o===n?Promise.resolve(""):Object.values(u_).includes(e)?(TD.setPanelistChatPrivilege(e),Ka(un,(e=>e.panelistChatPrivilege===n))):Promise.reject({type:et,reason:"Panelist privilege value is invalid",errorCode:Na.CHAT_INVALID_PRIVILEGE})}deleteMessage(e){const t=this[r](),{chat:{chatHistory:o},meeting:{meetingOptions:n,userId:i}}=t;if(null!=n&&n.isEnableDeleteChatMsg){const r=Ou(t),n=o.find((t=>t.id===e));if(n){const{sender:t}=n;if(r)TD.chatCmdReq(e,n_.Delete);else{if(t.userId!==i)return Promise.reject({type:Ze,reason:"can not delete message",errorCode:Na.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED});TD.chatCmdReq(e,n_.Delete)}return Ka(cn,(t=>t.id===e)).then((()=>({id:e})))}return Promise.reject({type:et,reason:"msgId is wrong",errorCode:Na.CHAT_INVALID_MSG_ID_OR_URL})}return Promise.reject({type:Je,reason:"can not delete messages",errorCode:Na.CHAT_DELETE_ACCOUNT_DISABLE})}lockChat(e){const t=this[r](),{meeting:{meetingOptions:o}}=t,n=null!=o&&o.isPrivateChatEnabled?t_.All:t_.EveryonePublicly;return this.setPrivilege(e?t_.NoOne:n)}sendFile(e,t){if(!e)return Promise.reject({type:et,reason:"File is empty",errorCode:Na.CHAT_EMPTY_FILE});const{[r]:n,[o]:i}=this,s=n(),{chat:{isFileTransferEnable:a,fileTransferFileType:u,fileTransferSizeLimit:d,failedFileTransfer:c}}=s;if(!a)return Promise.reject({type:Je,reason:"Send files via in-session chat is not enabled",errorCode:Na.CHAT_FILE_ACCOUNT_DISABLE});if("string"==typeof e){const t=$O(e,s);if(null!=t&&t.file&&c[e]){const{file:{upload:r,...o}}=t,{file:{name:n,upload:{uniqueId:s}},receiver:{userId:a}}=t;return i(dT({originFile:c[e],...o,upload:{...r,status:g_.InProgress}})),Promise.resolve((()=>{i(cT({uniqueId:s,fileName:n,userId:a}))}))}return Promise.reject({type:et,reason:"Retry token is not correct.",errorCode:Na.CHAT_INVALID_RETRY_TOKEN})}{const{name:r}=e;if(u.length>0){const[e]=r.split(".").reverse();if(!u.some((t=>t===e)))return Promise.reject({type:Je,reason:"File is not in the allow list",errorCode:Na.CHAT_MISMATCH_FILE_TYPE})}if(e.size>d)return Promise.reject({type:Je,reason:"File size exceeds the maximum limit.",errorCode:Na.CHAT_EXCEED_FILE_SIZE});const o=Ru(s),n=WO(s,t),a=FO(o,n,s);if(a)return Promise.reject(a);const c=fd();return i(uT(function(e,t,r,o){const n=(new Date).getTime();return{file:{name:e.name,size:e.size,type:e.type,upload:{progress:0,uniqueId:t,totalChunks:0,chunkIndex:0}},originFile:e,sender:{name:r.displayName,userId:r.userId,userGuid:r.userGUID,avatar:r.avatar},receiver:{name:null==o?void 0:o.displayName,userId:null==o?void 0:o.userId,attendeeId:void 0,userGuid:null==o?void 0:o.userGUID},timestamp:n}}(e,c,o,n))),Promise.resolve((()=>{i(lT({uniqueId:c,file:e})),i(cT({uniqueId:c,fileName:r,userId:null==n?void 0:n.userId}))}))}}downloadFile(e,t,n){const{[r]:i,[o]:s}=this,{chat:{chatHistory:a}}=i();if(!e||!t)return Promise.reject({type:et,reason:"Invalid message id or file url!",errorCode:Na.CHAT_INVALID_MSG_ID_OR_URL});const u=a.find((r=>{var o;return r.id===e&&(null===(o=r.file)||void 0===o?void 0:o.fileUrl)===t}));return u?(s(dT({id:e,fileUrl:t,download:{status:S_.InProgress,progress:0,blob:n}})),Promise.resolve((()=>s(hT({id:e,fileUrl:t}))))):Promise.reject({type:et,reason:"Invalid message id or file url!",errorCode:Na.CHAT_INVALID_MSG_ID_OR_URL})}getPrivilege(){const{chat:{chatPrivilege:e,isAllowAttendeeChat:t}}=this[r]();return t?e:t_.NoAttendee}getReceivers(){const e=this[r](),{chat:{chatPrivilege:t,panelistChatPrivilege:o,isAllowAttendeeChat:n},meeting:{isWebinar:i}}=e;if(!i&&!n)return[];const s=Ru(e),a=Ou(e);if(s)if(i)if(pu(s.userRole)){if(!n)return[];if(t===t_.All)return[l_,c_];if(t===t_.AllPanelist)return[l_];if(t===t_.NoOne)return[]}else{if(a||o===r_.Everyone){const t=xO(e,s.userId,{includeAttendee:!0});return[l_,c_,...t]}if(o===r_.AllPanelist){const t=xO(e,s.userId);return[l_,...t]}}else{const r=Ou(e);if(t===t_.All||r){const t=xO(e,s.userId);return[c_,...t]}if(t===t_.Host)return xO(e,s.userId,{host:!0});if(t===t_.EveryonePublicly){const t=xO(e,s.userId,{host:!0});return[c_,...t]}if(t===t_.NoOne)return[]}return[]}getHistory(){return this[r]().chat.chatHistory.map((e=>{const{highResTimeStampForIdentification:t,...r}=e;if(r.file){const{name:e,size:t,type:o,fileUrl:n,upload:i,download:s}=r.file,a={name:e,size:t,type:o,fileUrl:n};return i&&Object.assign(a,{upload:{status:i.status,progress:i.progress}}),s&&Object.assign(a,{download:{status:s.status,progress:s.progress}}),{...r,file:a}}return r}))}isAllowToDeleteMessages(){const e=this[r](),{meeting:{meetingOptions:t}}=e;return null==t?void 0:t.isEnableDeleteChatMsg}isFileTransferEnabled(){return this[r]().chat.isFileTransferEnable}getFileTransferSetting(){const e=this[r](),{chat:{fileTransferFileType:t,fileTransferSizeLimit:o}}=e;return{typeLimit:(null!=t?t:[]).map((e=>`.${e}`)).join(","),sizeLimit:o}}},bS(CD.prototype,"send",[MS],Object.getOwnPropertyDescriptor(CD.prototype,"send"),CD.prototype),bS(CD.prototype,"setPrivilege",[LS,MS],Object.getOwnPropertyDescriptor(CD.prototype,"setPrivilege"),CD.prototype),bS(CD.prototype,"setPanelistPrivilege",[LS,MS,function(e,r,o){const n=o.value;o.value=function(...e){const r=this[t];if(r){const{meeting:{isWebinar:e}}=r.getState();if(!e)return Promise.reject({type:Xe,reason:"non-webinar",errorCode:Na.CLIENT_SESSION_NOT_WEBINAR})}return n.apply(this,e)}}],Object.getOwnPropertyDescriptor(CD.prototype,"setPanelistPrivilege"),CD.prototype),bS(CD.prototype,"deleteMessage",[MS],Object.getOwnPropertyDescriptor(CD.prototype,"deleteMessage"),CD.prototype),bS(CD.prototype,"lockChat",[LS,MS],Object.getOwnPropertyDescriptor(CD.prototype,"lockChat"),CD.prototype),bS(CD.prototype,"sendFile",[MS],Object.getOwnPropertyDescriptor(CD.prototype,"sendFile"),CD.prototype),bS(CD.prototype,"downloadFile",[MS],Object.getOwnPropertyDescriptor(CD.prototype,"downloadFile"),CD.prototype),CD);const OD={epics0:(e,t)=>Av(e,24583).pipe(Oo(t),Gr((([e,t])=>{if(t.meeting.zlkJwtToken)return nr;const{payload:{body:{sn:r,senderName:o,senderJid:n,receiver:i,text:s,type:a}}}=e,u=Ru(t),d=wu(t),{meeting:{jid:c,userId:l},participants:{xmppAttendeeList:p}}=t;return vb.beginDecrypt({decryptedText:s,type:hb.XMPP_CHAT,zoomId:r}).then((({message:e})=>{var t;let r=null,s=0,h="";u&&pu(u.userRole)&&c===i?(r=p.find((e=>e.jid===n)),s=l,h=u.displayName):a===o_.Panelist&&(r=d.find((e=>e.jid===n)),s=o_.Panelist,h=l_.displayName);const m={message:e,sender:{name:o,userId:(null===(t=r)||void 0===t?void 0:t.userId)||0,avatar:""},receiver:{name:h,userId:s},timestamp:(new Date).getTime()};return Ga(an,m),rT(m)}))}))),epics1:(e,t)=>_v(e,7944).pipe(Oo(t),Gr((([e,t])=>{const{meeting:{bIbDisableChat:r}}=t,{payload:{body:{attendeeNodeID:o,sn:n,destNodeID:i,text:s,senderName:a,msgID:u}}}=e,d=Ru(t);if(d){const e=pu(null==d?void 0:d.userRole)&&o===d.userId&&!u;if(!r&&!e){const{sn:e,...r}=GO({destNodeID:i,attendeeNodeID:o,senderName:a,sn:n},t);return(o===o_.SilentModeUsers?Promise.resolve({id:u,message:pd(s),...r}):vb.beginDecrypt({decryptedText:s,zoomId:e,type:hb.RWG_CHAT}).then((({message:e})=>({id:u,message:e,...r})))).then((e=>(Ga(an,e),rT(e))))}}return nr}))),epics2:(e,t)=>_v(e,Dv).pipe(co((e=>{var t,r;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.chatPriviledge)||void 0!==(null===(r=e.payload.body)||void 0===r?void 0:r.bAllowAttendeeChat)})),Oo(t),Vr((([e,t])=>{const{payload:{body:{chatPriviledge:r,bAllowAttendeeChat:o}}}=e,{chat:{chatPrivilege:n}}=t;return void 0!==o?(Ga(un,!0===o?{chatPrivilege:n}:{chatPrivilege:t_.NoAttendee}),nT(o)):(Ga(un,{chatPrivilege:r}),eT(r))}))),epics3:e=>_v(e,Dv).pipe(co((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.panelistChatPriviledge)})),Vr((e=>{const{payload:{body:{panelistChatPriviledge:t}}}=e;return Ga(un,{panelistChatPrivilege:t}),tT(t)}))),epics4:(e,t)=>_v(e,4136).pipe(Oo(t),Gr((([e,t])=>{const{payload:{body:{result:r,destNodeID:o,msgID:n,fileID:i}}}=e,{meeting:{userId:s},chat:{chatHistory:a}}=t,u=[];if(r===i_.Success)if(i){const e=a.find((e=>{var t;return(null===(t=e.file)||void 0===t?void 0:t.fileID)===i}));if(e){const{file:t,receiver:r,...o}=e,{name:a,size:d,type:c,fileUrl:l}=null!=t?t:{},{attendeeId:p,...h}=r;Ga(an,{id:n,file:{name:a,size:d,type:c,fileUrl:l,upload:{status:g_.Complete,progress:100}},receiver:{...h},...o}),u.push(pT({fileID:i,msgID:n,senderId:s}))}}else{const e=qO(a,{userId:s,destNodeID:o});var d;e&&(Ga(dn,{msgId:n,receiverId:o,identification:null!==(d=e.highResTimeStampForIdentification)&&void 0!==d?d:0}),u.push(iT({destNodeID:o,msgID:n,userId:s})))}else r!==i_.Delete&&r!==i_.Block||u.push(sT({msgId:n}));return Cr(u)}))),epics5:e=>_v(e,4238).pipe(Gr((e=>{const{payload:{body:{bSuccess:t,cmd:r,msgID:o}}}=e,n=[];return t&&r===n_.Delete&&(n.push(sT({msgId:o})),Ga(cn,{id:o})),Cr(n)}))),epics6:e=>_v(e,7960).pipe(Gr((e=>{const{payload:{body:{cmd:t,msgID:r}}}=e,o=[];return t===n_.Delete&&(o.push(sT({msgId:r})),Ga(cn,{id:r})),Cr(o)})))},DD=Ev(OD,{chatFileEpics0:e=>e.pipe(HS(`${jg}`),Vr((e=>{var t,r,o;const{payload:{fileTransfer:n,fileServerDomain:i}}=e;return aT({isFileTransferEnable:null==n?void 0:n.isEnable,isEnableFileTransferEncrypted:null==n?void 0:n.isEnableFileTransferEncrypted,fileTransferFileType:(null!==(t=null==n?void 0:n.fileType)&&void 0!==t?t:"").replace(/\./g,"").split(",").filter(Boolean),fileTransferSizeLimit:1024*(null!==(r=null==n?void 0:n.sizeLimit)&&void 0!==r?r:0)*1024||m_.MaxSize,fileDownloadPromptIgnoreList:(null!==(o=null==n?void 0:n.fileDownloadPromptIgnoreList)&&void 0!==o?o:"").replace(/\./g,"").split(","),fileServerDomain:`https://${i}`})}))),chatFileEpics1:(e,t)=>e.pipe(HS(`${uT}`),Gr((async r=>{const{payload:{originFile:o,file:{upload:{uniqueId:n}}}}=r;return o.size>m_.ChunkSize?await async function(e,t,r,o){const n=cD(e,"/wc/multiupload/init",o.value),i=await async function(e){const t=Math.ceil(e.size/m_.ReaderChunkSize),r=await Promise.all(Array.from({length:t},((e,t)=>({start:t*m_.ReaderChunkSize,end:(t+1)*m_.ReaderChunkSize}))).map((async({start:t,end:r})=>{try{const o=await gD(e,t,r);return Td(await window.crypto.subtle.digest("SHA-256",o))}catch(t){return hD("calculate file hash error.",e,t),Promise.reject(t)}})));return r.join("")}(e),{meeting:{zmk:s,meetingId:a}}=o.value,u=$O(t,o.value);if(i&&u){const{receiver:o}=u,d={fileName:e.name,length:e.size,channelType:4,digest:i,shareJid:a};return eD({url:n,method:"POST",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:s},crossDomain:Ad(n),body:d}).pipe(Co(vD(e,t,o,r)),Vr((r=>{var o;const{responseHeaders:n,response:i}=r,s=null===(o=n["x-zm-trackingid"])||void 0===o?void 0:o.trim(),{uploadid:a,path:u,metadata:d}=i,c=Math.ceil(e.size/m_.ChunkSize);return dT({originFile:e,upload:{uniqueId:t,status:g_.InProgress,progress:0,chunkIndex:0,totalChunks:c,uploadid:a,trackingId:s,path:u,metadata:d}})})),po((t=>(console.warn(t),hD("Upload file meta error.",e,t),fD(u,e)))),Ao(dT({upload:{uniqueId:t,status:g_.Init}})))}return yD(e,t)}(o,n,e,t):await ED(o,n,e,t)})),Gr((e=>e))),chatFileEpics2:(e,t)=>e.pipe(HS(`${dT}`),co((e=>{var t;return(null===(t=e.payload.upload)||void 0===t?void 0:t.status)===g_.Success})),O_((async e=>{const{payload:{upload:{uniqueId:r}}}=e,{chat:{isEnableFileTransferEncrypted:o,chatHistory:n}}=t.value,i=n.find((e=>{var t;return(null===(t=e.file)||void 0===t||null===(t=t.upload)||void 0===t?void 0:t.uniqueId)===r})),s=[];if(i&&i.file){const{file:{name:e,size:t,fileObj:n,fileID:a,type:u},receiver:{userId:d,attendeeId:c}}=i;let[l,p]=["",""];if(o){const[r,o]=await Promise.all([e,`${t}`].map((e=>vb.beginEncrypt({text:e,type:hb.RWG_CHAT}))));[l,p]=[r,o]}else[l,p]=[e,`${t}`].map((e=>ld(e)));await ID.chatFileTransfer({fileID:a,fileSize:p,fileName:l,fileObj:n,type:u,destNodeID:d,attendeeNodeID:c}),s.push(dT({upload:{uniqueId:r,status:g_.Complete}}))}return s}))),chatFileEpics3:(e,t)=>e.pipe(HS(`${dT}`),co((e=>{const{payload:{upload:t,originFile:r}}=e;return!!t&&!!t.uniqueId&&t.status===g_.InProgress&&(null==r?void 0:r.size)<=m_.ChunkSize&&0===t.totalChunks})),Gr((async r=>{const{payload:{originFile:o,upload:{uniqueId:n}}}=r;return await ED(o,n,e,t)})),Gr((e=>e))),chatFileEpics4:(e,t)=>e.pipe(HS(`${dT}`),co((e=>{const{payload:{upload:t}}=e;return!!t&&!!t.uniqueId&&t.totalChunks>0&&t.chunkIndex!==t.totalChunks})),Gr((async r=>{const{payload:{originFile:o,upload:{uniqueId:n}}}=r;return await async function(e,t,r,o){const n=$O(t,o.value);if(null!=n&&n.file){const{file:{upload:{chunkIndex:i,totalChunks:s,uploadid:a,path:u,trackingId:d,etags:c},size:l},receiver:p}=n,h=i*m_.ChunkSize,m=await SD(e,h);if(m){const{chat:{fileServerDomain:h},meeting:{zmk:g}}=o.value,S=`${h}/upload/parts?${new URLSearchParams({uploadid:a,partNumber:i+1}).toString()}`,v=new FormData,f=new File([m],e.name);return v.append("file",f),eD({url:S,method:"POST",headers:{"Zoom-File-Size":f.size,"Zoom-File-Path":u,"x-zm-trackingid":d,"Zoom-File-Origin":"redirect=support_auth",zmk:g},crossDomain:Ad(S),body:v,includeUploadProgress:!0}).pipe(Co(vD(e,t,p,r)),Gr((r=>{var n;const{type:a,loaded:u,total:d,responseHeaders:h}=r;let m=0;const g={upload:{uniqueId:t,status:g_.InProgress}},S=[],v=$O(t,o.value),f=null==v||null===(n=v.file)||void 0===n?void 0:n.upload.progress;if("upload_loadstart"===a)m=f||Math.floor(i/s*100);else if("upload_progress"===a)m=Math.floor((i*m_.ChunkSize+.9*u)/l*100);else if("upload_load"===a)m=Math.floor((i*m_.ChunkSize+.9*d)/l*100);else if("download_load"===a){m=f||Math.floor((i+1)/s*100);const t=h["x-zm-etag"].trim(),r=c?{...c,[`${i+1}`]:t}:{[`${i+1}`]:t};Object.assign(g.upload,{etags:r,chunkIndex:i+1,totalChunks:s}),Object.assign(g,{originFile:e})}return(m>0||"upload_loadstart"===a)&&(Object.assign(g.upload,{progress:m}),Ga(ln,{...pD(e,p),progress:m,status:g_.InProgress}),S.push(dT(g))),Cr(S)})),po((t=>(console.warn(t),hD(`Upload file chunk error. chunk:${i},total chunks:${s},uploadid:${a},trackingId:${d}`,e,t),fD(n,e)))))}}return yD(e,t)}(o,n,e,t)})),Gr((e=>e))),chatFileEpics5:(e,t)=>e.pipe(HS(`${dT}`),co((e=>{const{payload:{upload:t}}=e;return!!t&&!!t.uniqueId&&t.totalChunks>0&&t.chunkIndex==t.totalChunks})),Gr((r=>{const{payload:{originFile:o,upload:{uniqueId:n}}}=r;return function(e,t,r,o){const{chat:{fileServerDomain:n},meeting:{zmk:i}}=o.value,s=$O(t,o.value);if(null!=s&&s.file){const{file:{upload:{uploadid:a,metadata:u,etags:d,trackingId:c}},receiver:l}=s,p=`${n}/upload/complete?uploadid=${a}`;return eD({url:p,method:"POST",headers:{"x-zm-trackingid":c,"Zoom-File-Origin":"redirect=support_auth",zmk:i},crossDomain:Ad(p),body:{metadata:u,etags:d}}).pipe(Co(vD(e,t,l,r)),Vr((r=>{var n,i;const{chat:{fileServerDomain:s}}=o.value,{responseHeaders:a}=r,u=null===(n=a["zoom-file-id"])||void 0===n?void 0:n.trim(),d=null===(i=a["zoom-file-obj"])||void 0===i?void 0:i.trim(),c=`${s}/zoomfile/download?objkey=${d}&business=meeting`;return Ga(ln,{...pD(e,l),progress:100,status:g_.Success}),dT({fileID:u,fileObj:d,fileUrl:c,upload:{uniqueId:t,progress:100,status:g_.Success}})})),po((t=>(console.warn(t),hD(`Upload chunks checksum error.uploadid${a},trackingId${c}`,e,t),fD(s,e)))))}return yD(e,t)}(o,n,e,t)}))),chatFileEpics6:(e,t)=>_v(e,4308).pipe(O_((async e=>{const{payload:{body:{attendeeNodeID:r,destNodeID:o,fileID:n,fileName:i,fileObj:s,fileSize:a,fileType:u,msgID:d,senderName:c}}}=e,{meeting:{bIbDisableChat:l},chat:{fileServerDomain:p,isEnableFileTransferEncrypted:h}}=t.value,m=[];if(!l){const e=lD(p,{fileObj:s,fileID:n});if(u===h_.Local){const{sn:u,...l}=GO({destNodeID:o,attendeeNodeID:r,senderName:c},t.value);let[p,g]=["",0];if(h){const[e,t]=await Promise.all([i,a].map((e=>vb.beginDecrypt({decryptedText:e,zoomId:u,type:hb.RWG_CHAT}))));p=e.message,g=Number(t.message)}else p=pd(i),g=Number(pd(a));const S={id:d,file:{name:p,size:g,fileUrl:e},...l};m.push(rT({...S,file:{...S.file,fileID:n,fileObj:s}})),setTimeout((()=>{Ga(an,S)}),0)}}return m}))),chatFileEpics7:(e,t)=>e.pipe(HS(`${dT}`),co((e=>{var t,r;const{payload:o}=e;return o.id&&o.fileUrl&&(null===(t=o.download)||void 0===t?void 0:t.status)===S_.InProgress&&0===(null===(r=o.download)||void 0===r?void 0:r.progress)})),Gr((r=>function(e,t,r){var o;const{chat:{chatHistory:n},meeting:{zmk:i},participants:{attendeesList:s}}=r.value,a=n.find((t=>t.id===e));if(null!=a&&null!==(o=a.file)&&void 0!==o&&o.fileUrl){const{file:{fileUrl:r}}=a;return eD({url:r,method:"GET",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:i},crossDomain:Ad(r),responseType:"arraybuffer",includeDownloadProgress:!0}).pipe(Co(function(e,t){return t.pipe(HS(`${hT}`,`${WS}`),co((t=>{if(t.type===`${WS}`)return!0;const{payload:{id:r}}=t;return e.id===r})),go(1),Ro((()=>{var t,r,o;dD.info(`Cancel file download. file name:${IE(null===(t=e.file)||void 0===t?void 0:t.name)},file size:${null===(r=e.file)||void 0===r?void 0:r.size},sender id:${null===(o=e.sender)||void 0===o?void 0:o.userId}`),Ga(pn,{...mD(e),progress:0,status:S_.Cancel})})))}(a,t)),O_((async t=>{const{type:r,loaded:o,total:n}=t,i=[],u={...mD(a),progress:0,status:S_.InProgress};if("download_loadstart"===r&&Object.assign(u,{progress:0}),"download_progress"===r){var d;const t=Math.floor(o/n*100);i.push(dT({id:e,fileUrl:null===(d=a.file)||void 0===d?void 0:d.fileUrl,download:{progress:t}})),Object.assign(u,{progress:t})}else if("download_load"===r){var c,l,p;const r=100,o=S_.Success;Object.assign(u,{progress:r,status:o}),i.push(dT({id:e,fileUrl:null===(c=a.file)||void 0===c?void 0:c.fileUrl,download:{progress:r,status:o}}));const n=null===(l=s.find((e=>e.userId===a.sender.userId)))||void 0===l?void 0:l.zoomID,d=await async function(e,t,r){const o=Math.ceil(e.byteLength/m_.DecodeBlockSize);try{const n=await Promise.all(Array.from({length:Math.max(o-1,1)},((e,t)=>({start:t*m_.DecodeBlockSize,end:(t===o-2?t+2:t+1)*m_.DecodeBlockSize}))).map((async({start:o,end:n})=>{try{const t=e.slice(o,n),{message:i}=await vb.beginDecrypt({decryptedText:t,zoomId:r,type:hb.CHAT_FILE});return i}catch(r){return hD("decrypt file buffer error.",{name:t,size:e.byteLength},r),Promise.reject(r)}})));return new Blob(n,{type:zO(t)})}catch(e){return null}}(t.response,null===(p=a.file)||void 0===p?void 0:p.name,n);var h,m;d&&(null!==(h=a.file)&&void 0!==h&&h.download.blob?Object.assign(u,{fileBlob:d}):function(e,t){const r=document.createElement("a"),o=window.URL.createObjectURL(e);r.href=o,r.download=t,r.click(),window.URL.revokeObjectURL(o)}(d,null===(m=a.file)||void 0===m?void 0:m.name))}return(u.progress>0||"download_loadstart"===r)&&Ga(pn,u),i})),po((t=>(console.warn(t),hD(`download file error. file url:${r}`,{name:void 0,size:void 0},t),Ga(pn,{...mD(a),progress:0,status:S_.Fail}),Tr(dT({id:e,fileUrl:r,download:{status:S_.Fail,progress:0}}))))))}return nr}(r.payload.id,e,t))))});function wD(e,t){var r,o,n;const{meeting:{isMeetingReset:i,meetingId:s,meetingNumber:a,userName:u,userEmail:d,tid:c,userId:l,userGUID:p,isRlbTP:h},breakoutRoom:m}=e;let g="";var S;return g=i?null!=m&&null!==(S=m.currentRoom)&&void 0!==S&&S.boConfId?"join breakout room":"meeting failover":"join meeting",{label:g,payload:{meetingId:null!==(r=null==t?void 0:t.meetingId)&&void 0!==r?r:s,tid:c,userId:null!==(o=null==t?void 0:t.userId)&&void 0!==o?o:l,userGUID:null!==(n=null==t?void 0:t.userGUID)&&void 0!==n?n:p,isRlbTP:h,meetingNumber:IE(a),userName:IE(u),userEmail:IE(d)}}}function ND(e,t,r){return Dt(bo((o=>{let n=!1;try{var i,s;const{logger:{options:e},meeting:{logConfig:r}}=t.value;n=null!==(i=null==e?void 0:e.enable)&&void 0!==i?i:null===(s=JSON.parse(r||"{}"))||void 0===s?void 0:s.enable}catch(e){}try{if(n){const{logger:{isLaplaceInitialized:n}}=t.value;if(!n)return e.pipe(HS(`${aO}`),go(1),Gr((e=>(e.payload&&r(o),nr))));r(o)}}catch(e){console.warn(e)}return nr})))}function MD(e,t,r,o){return Cv(e,r).pipe(ND(e,t,o))}function PD(e,t,r,o){return _v(e,r).pipe(ND(e,t,o))}function LD(e){var t,r;const{audio:{activeMicrophone:o,activeSpeaker:n,microphoneDevicesList:i,speakerDevicesList:s}}=e;return`microphone: [${o} - ${null==i||null===(t=i.find((e=>e.deviceId===o)))||void 0===t?void 0:t.label}]; speaker: [${n} - ${null==s||null===(r=s.find((e=>e.deviceId===n)))||void 0===r?void 0:r.label}]`}function kD(e){var t;const{video:{activeCamera:r,cameraDevicesList:o}}=e;return`camera: [${r} - ${null==o||null===(t=o.find((e=>e.deviceId===r)))||void 0===t?void 0:t.label}]`}function UD(e,t){return void 0!==t?` ,${e}:${t}`:""}const{InitSuccessAudio:VD,InitFailedAudio:BD,InitSuccessVideo:HD,InitFailedVideo:jD,InitSuccessSharing:FD,InitFailedSharing:WD}=k,{DecodeSuccess:xD,DecodeFailed:$D,EncodeSuccess:GD,EncodeFailed:zD}=U,qD={[`${VD}`]:{name:"Audio",isException:!1},[`${BD}`]:{name:"Audio",isException:!0},[`${HD}`]:{name:"Video",isException:!1},[`${jD}`]:{name:"Video",isException:!0},[`${FD}`]:{name:"Sharing",isException:!1},[`${WD}`]:{name:"Sharing",isException:!0}};function KD(e){const t=(null!=e?e:"").split("-");return[...new Set(t)].map((e=>({reason:e,count:t.filter((t=>e===t)).length})))}let JD=function(e){return e[e.Success=0]="Success",e[e.MeetingIsOver=6]="MeetingIsOver",e[e.UserFull=9]="UserFull",e[e.MeetingLocked=12]="MeetingLocked",e[e.WebinarBlockedEmail=3033]="WebinarBlockedEmail",e[e.MeetingNotStarted=3008]="MeetingNotStarted",e[e.MeetingHasClosed=103003]="MeetingHasClosed",e[e.UserHasBeenRemoved=103039]="UserHasBeenRemoved",e[e.MMRIBReject=103043]="MMRIBReject",e[e.MMRConfParticipantExists=103044]="MMRConfParticipantExists",e}({}),QD=function(e){return e[e.Unknown=0]="Unknown",e[e.Normal=1]="Normal",e[e.Userrequest=2]="Userrequest",e[e.SdkConnection=3]="SdkConnection",e[e.Reconnect=5]="Reconnect",e[e.PtRequest=6]="PtRequest",e[e.KickedByHost=7]="KickedByHost",e[e.EndByHost=8]="EndByHost",e[e.EndByHostStartAnotherMeeting=9]="EndByHostStartAnotherMeeting",e[e.FreeMeetingTimeout=10]="FreeMeetingTimeout",e[e.JBHTimeout=11]="JBHTimeout",e[e.EndBySingleStatus=12]="EndBySingleStatus",e[e.WebinarNeedRegister=13]="WebinarNeedRegister",e[e.ArchiveFail=14]="ArchiveFail",e[e.EndByNone=15]="EndByNone",e[e.EndByAdmin=16]="EndByAdmin",e[e.DuplicateSession=17]="DuplicateSession",e[e.MeetingTransfer=18]="MeetingTransfer",e}({}),YD=function(e){return e[e.WaitingRoomFailover=1]="WaitingRoomFailover",e[e.WebEndAndRejoin=2]="WebEndAndRejoin",e}({}),ZD=function(e){return e[e.Success=0]="Success",e[e.CommonError=200]="CommonError",e[e.WrongPasscode=3004]="WrongPasscode",e[e.RoleTypeMissing=3010]="RoleTypeMissing",e[e.InvalidParameter=4003]="InvalidParameter",e}({}),XD=function(e){return e[e.Success=0]="Success",e[e.AnotherMeetingInProgress=3e3]="AnotherMeetingInProgress",e[e.MeetingNotExist=3001]="MeetingNotExist",e[e.NotHost=3003]="NotHost",e[e.WrongPasscode=3004]="WrongPasscode",e[e.MissingEmail=3005]="MissingEmail",e[e.MeetingNotStarted=3008]="MeetingNotStarted",e[e.UserHasBeenRemoved=3009]="UserHasBeenRemoved",e[e.RoleTypeMissing=3010]="RoleTypeMissing",e[e.WebinarEnforceLogin=3034]="WebinarEnforceLogin",e[e.RealNameMissing=3082]="RealNameMissing",e[e.RegisterRequired=3099]="RegisterRequired",e[e.SsoLoginWindow=6024]="SsoLoginWindow",e[e.ZoomLoginWindow=3051]="ZoomLoginWindow",e[e.ZoomSpecificLoginWindow=3052]="ZoomSpecificLoginWindow",e[e.LoginRequired=3100]="LoginRequired",e[e.Reconnecting=4e3]="Reconnecting",e[e.Disconnect=4001]="Disconnect",e[e.InvalidParameter=4003]="InvalidParameter",e[e.DeniedRegisterWithPanelist=3032]="DeniedRegisterWithPanelist",e[e.ServiceOffline=403]="ServiceOffline",e[e.RwcEmpty=3621]="RwcEmpty",e[e.RwcError=3622]="RwcError",e[e.FrequentCall=3633]="FrequentCall",e[e.FrequentJoin=3634]="FrequentJoin",e[e.WasmFail=3635]="WasmFail",e[e.CommonError=200]="CommonError",e[e.Upgrade=1e4]="Upgrade",e}({});XD.Success,XD.RegisterRequired,XD.LoginRequired,XD.SsoLoginWindow,XD.ZoomLoginWindow,XD.ZoomSpecificLoginWindow,XD.MissingEmail,XD.MeetingNotExist,XD.NotHost,XD.WrongPasscode,XD.RoleTypeMissing,XD.AnotherMeetingInProgress,XD.MeetingNotStarted,XD.InvalidParameter,XD.Reconnecting,XD.UserHasBeenRemoved,XD.WebinarEnforceLogin,XD.Disconnect,XD.DeniedRegisterWithPanelist,XD.RwcEmpty,XD.RwcError,XD.FrequentCall,XD.FrequentJoin,XD.WasmFail,XD.Upgrade;const ew={3004:{"incorrect passcode":3004},3005:{"apac.errorcodes_web_has_in_progress":3e3},3008:{"apac.errorcodes_not_start":3008},3027:{"apac.errorcodes_host_email_as_attendee":3627},3033:{"apac.errorcodes_denied_email":3620},1005:{"apac.errorcodes_no_response_from_web":3621},131005:{"apac.errorcodes_no_response_from_web":3621},1001:{"apac.errorcodes_host_inactive":3625},131001:{"apac.errorcodes_host_inactive":3625},131013:{"meeting ended":4004},103039:{"user has been removed":3009},6:{"meeting ended":4004},9:{"meeting is at capacity":4005},12:{"meeting locked":4006},103043:{"reject for information barriers":4007},103044:{"participant exist":4008}};function tw(e,t){let r={code:200};if(void 0!==ew[e]){const t=ew[e],o=Object.keys(t)[0];return r={code:t[o],i18nKey:o},{reason:o.startsWith("apac")?"":o,errorCode:r.code}}return{errorCode:200,reason:"connection error"}}const rw=RE.getInstance(),ow=()=>{if("connection"in navigator){const{effectiveType:e,rtt:t,downlink:r}=navigator.connection;rw.makeLogger(["Network Connection Type"]).info(`Network connection. ect:${e},rtt:${t},downlink:${r}`)}},nw=RE.getInstance().makeLogger(["Remote Control"]),iw=ME(Fu.getInstance()),sw=[{event:k.AudioBridgeReconnectStart,message:EE.AudioBridgeReconnectStart,logType:"info",additionalTags:["Audio Join Flow"]},{event:k.AudioBridgeReconnectEnd,message:EE.AudioBridgeReconnectEnd,logType:"info",additionalTags:["Audio Join Flow"]},{event:k.UserGrantCaptureAudio,message:e=>`${EE.DeviceAudioStreamCaptured},${LD(e)}`,logType:"info",additionalTags:["Audio Capture Flow"]},{event:k.JoinComputerAudioComplete,message:EE.AudioJoinComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:k.LeaveComputerAudioComplete,message:EE.AudioLeaveComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:k.JoinSharingAudioComplete,message:EE.SharingAudioStartComplete,logType:"info",additionalTags:["Audio Sharing Flow"]},{event:k.LeaveSharingAudioComplete,message:EE.SharingAudioStopComplete,logType:"info",additionalTags:["Audio Sharing Flow"]}],aw=[{event:k.StartVideoCaptureSuccess,message:e=>`${_E.StartCaptureVideoSuccess}, ${kD(e)}`,logType:"info",additionalTags:["Video Join Flow"]},{event:k.StopVideoCaptureSuccess,message:_E.StopCaptureVideoSuccess,logType:"info",additionalTags:["Video Join Flow"]},{event:k.StartVideoStreamInVbSettingSuccess,message:_E.VBSettingSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:k.VbModelPreloadingOk,message:_E.VBPreloadSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:k.VbModelPreloading_3S,message:_E.VBPreloading3S,logType:"warn",additionalTags:["Video VB Flow"]},{event:k.VbModelPreloading_10S,message:_E.VBPreloading10S,logType:"warn",additionalTags:["Video VB Flow"]},{event:k.VbSettingParaError,message:_E.VBSettingFailed,logType:"error",additionalTags:["Video VB Flow"]}],uw=sw.map((e=>({...e,tag:"Audio"}))).concat(aw.map((e=>({...e,tag:"Video"})))),dw=RE.getInstance(),{InitSuccessVideo:cw,InitSuccessAudio:lw,InitSuccessSharing:pw,InitFailedVideo:hw,InitFailedAudio:mw,InitFailedSharing:gw,AudioCaptureFailed:Sw,AudioWebsocketBroken:vw,AudioZeroData:fw,UserForbiddedCaptureVideo:yw,UserCameraIsTakenByOtherPrograms:Ew,VideoWebsocketBroken:_w,StopVideoCaptureFailed:Iw,DesktopSharingPermissionDenied:Aw,DesktopSharingSystemError:bw,AudioSpeakerSetError:Cw,VbSettingParaError:Tw,MaskSettingParaError:Rw,WebglLostInMultiView:Ow,VideoStreamFailed:Dw,AudioStreamFailed:ww,NotifyUIFailover:Nw,RecaptureAudio:Mw,WorkletProcessExceptions:Pw}=k,Lw=Fu.getInstance(),kw=RE.getInstance(),Uw={options:void 0,isLaplaceInitialized:!1,isLogDetailed:!0},Vw=qc({[`${sO}`]:ay(((e,{payload:t})=>{e.options=t})),[`${aO}`]:ay(((e,{payload:t})=>{e.isLaplaceInitialized=t})),[`${uO}`]:ay(((e,{payload:t})=>{e.isLogDetailed=t})),[`${dO}`]:({options:e,isLogDetailed:t},{payload:r})=>r?{...Uw,isLogDetailed:t,options:e}:{...Uw}},Uw),Bw={mlEpics0:(e,t)=>Cv(e,[cw,lw,pw,hw,mw,gw]).pipe(ND(e,t,(e=>{const{payload:{type:r,data:o}}=e,{meeting:{userId:n}}=t.value,i=function(e,t){const r=qD[`${e}`];if(r){const{name:e,isException:o}=r,n=[e,`${e} Init Flow`];o&&n.push(`${e} exception flow`);let i="";return[xD,$D].includes(t)&&(i=`${i} decode`.trim()),[GD,zD].includes(t)&&(i=`${i} encode`.trim()),[GD,xD].includes(t)&&(i=`${i} success`.trim()),[$D,zD].includes(t)&&(i=`${i} failed`.trim()),{message:`init ${e.toLowerCase()} ${i}`,tags:n,isException:o}}return null}(r,o);if(i){const{message:e,tags:t,isException:r}=i;r?dw.report(`${e}. userId:${n}`,t):dw.makeLogger(t).info(e)}}))),mlEpics1:(e,t)=>MD(e,t,uw.map((e=>e.event)),(e=>{const{payload:{type:r}}=e,o=uw.find((e=>e.event===r));if(o){const{message:e,logType:r,additionalTags:n,tag:i}=o;let s=e;"function"==typeof e?window.setTimeout((()=>{s=e(t.value),dw.makeLogger([i])[r](s,n)}),0):s&&dw.makeLogger([i])[r](s,n)}})),mlEpics2:(e,t)=>e.pipe(HS(`${Q_}`),co((e=>!e.payload)),ND(e,t,(()=>{dw.makeLogger(["Audio"]).warn(`Auto play audio failed,${LD(t.value)}`)}))),mlEpics3:(e,t)=>MD(e,t,Nw,(e=>{dw.report(`WebRTC notify ui failover, subreason:${JSON.stringify(e.payload.data)}`,["Audio exception flow"])})),mlEpics4:(e,t)=>MD(e,t,[Sw,vw,fw,Cw,ww,Mw,Pw],(e=>{const{payload:{type:r,data:o}}=e;let n=`Audio error case:${r}`;var i,s;r===Sw?n=`Audio capture failed. errorCode:${null==o?void 0:o.errorCode}, message:${null==o?void 0:o.errorMessage}, error:${null==o||null===(i=o.error)||void 0===i?void 0:i.name} ${null==o||null===(s=o.error)||void 0===s?void 0:s.message}.`:r===fw?t.value.audio.webrtcRestartCount<3&&(n="audio capture zero data, auto failover"):r===Cw?n=`audio change speaker error. errorCode:${null==o?void 0:o.errorCode}, message:${null==o?void 0:o.errorMessage}.`:r===ww?n="audio stream ended or muted, stop capture audio":r===Mw&&(n="audio muted after switching from background, try to recapture audio"),dw.report(`${n},${LD(t.value)}`,["Audio exception flow"])})),mlEpics5:(e,t)=>MD(e,t,[yw,Ew,_w,Iw,Dw],(e=>{const{payload:{type:r,data:o}}=e;let n=`Video error case:${r}`;if(r===yw)n="Video capture is forbidden by the user"+(o?` (error name:${null==o?void 0:o.name};error message:${null==o?void 0:o.message})`:"");else if(r===Ew)n="Camera is taken by other programs"+(o?` (error name:${null==o?void 0:o.name};error message:${null==o?void 0:o.message})`:"");else if(r===Tw){var i;n=`VB setting error, param:${JSON.stringify(null!==(i=t.value.video.virtualBackground)&&void 0!==i?i:{})}`}else if(r===Rw){var s;n=`Mask setting error, param:${JSON.stringify(null!==(s=t.value.video.mask)&&void 0!==s?s:{})}`}else r===Dw&&(n=`Video stream ended or muted, if it is on iOS platform, will stop capture video.platform:${T.browser}`);dw.report(`${n},${kD(t.value)}`,["Video exception flow"])})),mlEpics6:(e,t)=>MD(e,t,[Aw,bw],(e=>{const{payload:{type:t}}=e;let r="";t===bw?T.isMacOS&&(r="Need to allow screen recording access in system setting on MacOS"):r="Need to allow the permission request",dw.report(`${r}`,["Sharing exception flow"])})),mlEpics7:(e,t)=>MD(e,t,Ow,(e=>{const{payload:{data:r}}=e,{video:{renderedVideoList:o}}=t.value;if(null!=r&&r.canvasId){const e=o.filter((e=>e.canvasId===r.canvasId));dw.report(`WebGl Context lost, canvas ID:${r.canvasId}, affected video node Ids:${e.map((e=>e.userId)).join(",")}`,["Video exception flow"])}})),mlEpics8:(e,t)=>eo(document,"visibilitychange").pipe(ND(e,t,(()=>{if(dw.makeLogger(["Video"]).log(`Page visibility ${document.visibilityState} `),"hidden"==document.visibilityState&&T.isAndroidOrIOSBrowser){const{logger:{isLogDetailed:e,isLaplaceInitialized:r}}=t.value;e&&r&&dw.reportToGlobalTracing(void 0,!0,!0)}setTimeout((()=>{const e="visible"!==document.visibilityState,{video:{subscribedVideoList:r},meeting:{userId:o}}=t.value,n=r.filter((e=>e!==o)).length>0;e&&n&&(__.createAgent().sendRWGConnectionPerformance("VCSV"),dw.makeLogger(["Video"]).warn("Still subscribing videos after switching to background"))}),1e3)}))),mlEpics9:e=>Cv(e,k.InitSuccessVideo).pipe(co((e=>e.payload.data===U.EncodeSuccess&&T.isAndroidOrIOSBrowser)),bo((()=>{const e=dw.makeLogger(["Video"]);return e.info("Screen orientation: "+(tc()?"landscape":"portrait")),rc().pipe(Ro((t=>{e.info("Screen orientation changes, current orientation: "+(t?"landscape":"portrait"))})),So())})))},Hw={rmclEpics0:(e,t)=>e.pipe(HS(`${CA}`),ND(e,t,(e=>{const{payload:{isRemoteControlEnabled:t,isEnableAutoDeleteRcApp:r}}=e;nw.log(`isRemoteControlEnabled:${t},auto delete:${r}`)}))),rmclEpics1:(e,t)=>e.pipe(HS(`${IA}`),co((e=>!!e.payload)),ND(e,t,(e=>{let t=e.payload;try{const e=new URL(t),r=e.searchParams.get("accountID");r&&(e.searchParams.set("accountID",IE(r)),t=e.toString()),nw.log(`Launch Remote control app, scheme:${t}`)}catch(e){}}))),rmclEpics2:(e,t)=>e.pipe(HS(`${gA}`),co((e=>!!e.payload)),ND(e,t,(e=>{nw.log(`Remote control session starts, controlling ssrc:${e.payload}`)}))),rmclEpics3:(e,t)=>PD(e,t,16430,(()=>{nw.log("Remote control app connected to rwg.")})),rmclEpics4:(e,t)=>PD(e,t,kv,(()=>{nw.log("Remote control app disconnected to rwg.")})),rmclEpics5:(e,t)=>PD(e,t,kv,(e=>{const{share:{status:r,isRemoteControlEnabled:o}}=t.value;o&&r!==q.End&&e.payload.body.bOn&&nw.log(`Remote control sharing device info.${JSON.stringify(iw.getShareStreamInfo())}`)})),rmclEpics6:(e,t)=>MD(e,t,k.CurrentDesktopSharingWidthHeight,(()=>{const{share:{isRemoteControlEnabled:e}}=t.value;e&&nw.log(`Remote control sharing device info changes.${JSON.stringify(iw.getShareStreamInfo())}`)})),rmclEpics7:(e,t)=>MD(e,t,k.SendRemoteControlQrCode,(e=>{const{share:{status:r}}=t.value,{payload:{data:o}}=e;nw.log(`Remote control QR code result. sharing status:${r}, result${JSON.stringify(o)}`)}))},jw={epics0:(e,t)=>e.pipe(HS(`${jg}`),Gr((async e=>{const{meeting:{logConfig:r,zlkJwtToken:o,accountId:n,enableAutoLog:i,collectionToggleEnable:s,zsk:a,isUIToolkit:u},logger:{options:d}}=t.value;let c=d||{};if(r)try{const{enable:e,enableReport:t}=JSON.parse(r);c={...c,enable:e,enableReport:t}}catch(e){}if(o){const{telemetry_tracking_id:t}=bd(o),{payload:{meetingId:r}}=e,n=null!=t?t:r;c={...c,enable:!0,enableReport:!0,trackingId:n}}else{let e=!1;e=a&&void 0!==s?!(i&&s):!i,by.set(Ry.DisableAutoReportLogs,e,Iy.Memory)}return rw.init({...c,logConfig:r,accountId:n,isUIToolkit:u}).then((()=>[aO(!0),sO(c)])).catch((()=>[aO(!1)]))})),Gr((e=>Cr(e)))),epics1:(e,t)=>PD(e,t,Mv,(e=>{var r,o,n,i;const{payload:{body:s}}=e;if(s&&s.res===JD.Success){rw.makeLogger(["A/V Performance Info"]).info(`CPU cores:${navigator.hardwareConcurrency}, SharedArrayBuffer:${!!T.isSupportSharedArrayBuffer},\n          OffscreenCanvas:${!!T.isSupportOffscreenCanvas}, browser:${T.browser} ${T.browserVersion}, OS:${T.os} ${T.osVersion}${UD("wow64",T.wow64)}${UD("GPU",T.gpu)}${UD("architecture",T.architecture)}${UD("bitness",T.bitness)}${UD("model",T.model)}`,["CPU_CORES"]);const{media:{enforceMultipleVideos:e,enforceVirtualBackground:r,assetsPath:o,disableRenderLimits:n},meeting:{stayAwake:i,quicklyLeave:s}}=t.value;rw.makeLogger(["Init Option"]).info(`Init option:${JSON.stringify({enforceMultipleVideos:e,disableRenderLimits:n,enforceVirtualBackground:r,assetsPath:o,stayAwake:i,leaveOnPageUnload:s})}`),"connection"in navigator&&(ow(),navigator.connection.addEventListener("change",ow))}else rw.report(`join meeting failed, error:${JSON.stringify(tw(null==s?void 0:s.res))}, rwg error code:${null==s?void 0:s.res}, rwg conID:${null==s?void 0:s.conID}, error message:${null==s?void 0:s.error_desc}, rwg url:${null==s?void 0:s.svcUrl},mid:${t.value.meeting.meetingId}`,"JOIN_MEETING_FAILED","error");const{meeting:{meetingInfoTimestamp:a,pingRWCTimestamp:u,tid:d,meetingId:c,topic:l,accountId:p,cv:h,zlkJwtToken:m,websdkClientFeatureOptions:g,enableHybridRWG:S},socket:{rwgServerList:v,retryCount:f},video:{rendererType:y},media:{patchJsMedia:E,assetsPath:_},audio:{isWebRtcAudioCapable:I},logger:{isLogDetailed:A}}=t.value;let b=["conID","confID","mmrFeature","mmrFeatureEx","reportDomain","res","role","svcUrl","userID","userGUID","useWBVideo","useWBAudio"].reduce(((e,t)=>void 0!==s[t]?{...e,[`${t}`]:s[t]}:e),{});b=["jid","mn","participantID"].reduce(((e,t)=>void 0!==s[t]?{...e,[`${t}`]:IE(s[t])}:e),b),b.response=b.res,delete b.res;const C=["connection_info_map"];let R;if(s.res===JD.Success&&C.push("Command Socket Event","User Info Map"),d){const e=d.match(/clid=(\S+);/);e&&e.length>1&&(R=e[1])}const O=Math.floor(performance.now()-a),D=Math.floor(performance.now()-u);let[w,N]=[void 0,void 0];if(m){var M;const{enforce_web_rtc_audio:e,audio_compatible_mode:t,audio_webrtc_mode:r,video_webrtc_mode:o}=bd(m);w=null!==(M=null!=r?r:t)&&void 0!==M?M:e,N=o}const P=__.createAgent();rw.report(JSON.stringify({...b,tid:d,mid:c,userRegion:R,rwgUrl:v.length>0?null===(r=v[f])||void 0===r?void 0:r.rwg:void 0,hardwareConcurrency:navigator.hardwareConcurrency,sharedArrayBuffer:T.isSupportSharedArrayBuffer,OffscreenCanvas:T.isSupportOffscreenCanvas,browserVersion:`${T.browser} ${T.browserVersion}`,osVersion:`${T.os} ${T.osVersion}`,gpu:T.gpu,architecture:T.architecture,model:T.model,bitness:T.bitness,wow64:T.wow64,totalDurationOfJoining:O,durationOfRWG:D,rendererType:y,sdkVersion:h,mediaSdkVersion:null===(o=window.JsMediaSDK_Instance)||void 0===o?void 0:o.version,topic:l?IE(l):void 0,accountId:p?IE(p):void 0,patchJSMediaSDK:E,dependentAssets:_,webRtcAudio:I,crossOriginIsolated:!!window.crossOriginIsolated,jwtAudio:w,jwtVideo:N,isRlbTP:null===(n=P.websocket)||void 0===n?void 0:n.isRlb,abOption:g,logDetail:A,isPrivateMeeting:S}),C,"info"),P.sendRWGConnectionPerformance(`WCL_M, conId: ${null==s?void 0:s.conID}, trackingId: ${null===(i=t.value.logger)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.trackingId}, JOINFS(${O}), JOINFRWC(${D})`)})),epics2:(e,t)=>e.pipe(HS(`${Mg}`),Oo(t),co((([,e])=>void 0===e.meeting.encryptedRWC&&(void 0===e.meeting.encryptedGEORWC||0===e.meeting.encryptedGEORWC.length))),ND(e,t,(()=>{const{label:e,payload:r}=wD(t.value);rw.report(`${e} ${JSON.stringify(r)}`,["Join Meeting Flow","Ping RWC Domain Empty"],"error")}))),epics3:(e,t)=>e.pipe(HS(`${Pg}`),co((e=>e.payload===Wo.OnError||e.payload===Wo.Disconnect||e.payload===Wo.NoHeartbeat)),ND(e,t,(e=>{var r;const{payload:o}=e,{socket:{rwgServerList:n,retryCount:i}}=t.value,{payload:s}=wD(t.value);rw.report(`websocket unexpected disconnected,${JSON.stringify({code:o,rwgHost:null===(r=n[i])||void 0===r?void 0:r.rwg,...s})}`,["Join Meeting Flow","RWG Disconnect"])}))),epics4:(e,t)=>e.pipe(HS(`${vS}`),ND(e,t,(e=>{const{payload:{reason:r,count:o,interval:n,sequence:i,userId:s,userGUID:a,meetingId:u}}=e,{payload:d}=wD(t.value,{meetingId:u,userId:s,userGUID:a});rw.report(`meeting failover,${JSON.stringify({reason:r,count:o,interval:n,sequence:i,detailed:KD(i),...d})}`,["Join Meeting Flow","Failover"]),"connection"in navigator&&navigator.connection.removeEventListener("change",ow)}))),epics5:(e,t)=>e.pipe(HS(`${QS}`),co((e=>e.payload.status===M_.Connecting)),ND(e,t,(e=>{const{payload:{rwgUrl:r}}=e;let o=r.replace(/(\d+)\?/,`${IE("$1")}?`);o=["email","zoomid","participantID","dn2","customer_key","mpwd","topic"].reduce(((e,t)=>e.indexOf(t)>-1?e.replace(new RegExp(`${t}=([^&]+)`,"g"),`${t}=${IE("$1")}`):e),o);const{payload:n}=wD(t.value);rw.makeLogger(["Join Meeting Flow"]).info(`RWG URL,${JSON.stringify({rwgUrl:o,...n})}`,["RWG Url"])}))),epics6:(e,t)=>e.pipe(HS(`${WS}`),co((e=>{const{payload:r}=e;return r?r.retry:t.value.meeting.meetingStatus===jo.Initial})),ND(e,t,(()=>{const{meeting:{meetingStatus:e},socket:{rwgServerList:r,retryCount:o}}=t.value;if(e!==jo.Joined){const{payload:e}=wD(t.value),n=(null==r?void 0:r.length)>0?r[o]:void 0;rw.report(JSON.stringify({...e,rwc:null==n?void 0:n.rwc,rwg:null==n?void 0:n.rwg}),["UNAVAILABLE_RWG"])}}))),epics7:(e,t)=>PD(e,t,1,(e=>{const{payload:{body:r}}=e;rw.report(`join meeting failed, version blocked. Current version:${t.value.meeting.cv},upgrade version:${null==r?void 0:r.upgradeVersion}`,"JOIN_MEETING_FAILED","error")})),epics8:(e,t)=>PD(e,t,2,(()=>{rw.report(`join meeting with low version of SDK. Current version:${t.value.meeting.cv}.`,"Join Meeting Flow","warn")})),epics9:(e,t)=>e.pipe(HS(`${wg}`,`${Ng}`),bo((()=>Ja($o,1).pipe(Ro((e=>{try{const{code:r,reason:o,errorCode:n}=null!=e?e:{},{payload:i}=wD(t.value);rw.report(`Connection change with join meeting failed. payload:${JSON.stringify({code:r,reason:o,errorCode:n})}. meeting info:${JSON.stringify(i)}`,"JOIN_MEETING_FAILED","error")}catch(e){}})),Gr((()=>nr)))))),epics10:(e,t)=>e.pipe(HS(`${WS}`),co((e=>{var t;return!(null!==(t=e.payload)&&void 0!==t&&t.retry)})),ND(e,t,(()=>{const{logger:{isLogDetailed:e,isLaplaceInitialized:r}}=t.value;r&&e&&rw.reportToGlobalTracing(void 0,!0)}))),epics11:(e,t)=>e.pipe(HS(`${Jg}`),co((()=>!!t.value.logger.isLogDetailed)),bo((()=>eo(window,"beforeunload").pipe(Ro((()=>{const{logger:{isLaplaceInitialized:e}}=t.value;e&&rw.reportToGlobalTracing(void 0,!0,!0)})),So())))),epics12:(e,t)=>e.pipe(HS(`${tv}`),ND(e,t,(e=>{const{payload:r}=e,{payload:o}=wD(t.value);rw.report(`XMPP Socket retry, count:${r},meeting info:${JSON.stringify(o)}`,["Join Meeting Flow","XMPP Socket Retry"])})))},Fw=Ev(jw,Hw,Bw),Ww=__.createAgent(),xw={cmrStatus:En.Stop,recordingEnable:!1,recordingIsoEnable:!1,allowStopAutoRecording:!1,automaticCloudRecordingEnable:!1,isZoomIQ:!1,zoomIQChanging:!1,localStatus:_n.Stop,supportLocalRecording:In.None,localGrantPermissionOption:An.None,localPermissionUserList:[]},$w=qc({[`${nR}`]:ay(((e,{payload:t})=>{e.cmrStatus=t})),[`${iR}`]:ay(((e,{payload:t})=>{e.recordingEnable=t})),[`${sR}`]:ay(((e,{payload:t})=>{e.recordingIsoEnable=t})),[`${aR}`]:ay(((e,{payload:t})=>{e.allowStopAutoRecording=t})),[`${uR}`]:ay(((e,{payload:t})=>{e.automaticCloudRecordingEnable=t})),[`${dR}`]:ay(((e,{payload:t})=>{e.isZoomIQ=t})),[`${cR}`]:ay(((e,{payload:t})=>{e.zoomIQChanging=t})),[`${lR}`]:ay(((e,{payload:t})=>{e.localStatus=t})),[`${pR}`]:ay(((e,{payload:t})=>{e.supportLocalRecording=t})),[`${hR}`]:ay(((e,{payload:t})=>{e.localGrantPermissionOption=t})),[`${mR}`]:ay(((e,{payload:t})=>{e.localPermissionUserList=t})),[`${gR}`]:()=>({...xw})},xw);var Gw,zw,qw,Kw,Jw,Qw,Yw,Zw,Xw;const eN=__.createAgent(),tN=UE("Recording");let rN=(Gw=US("recording"),zw=US("recording"),qw=US("recording"),Kw=US("recording"),Jw=US("recording"),Qw=US("recording"),Yw=US("recording"),Zw=US("recording"),Xw=class extends A_{startRecording(){const e=this[r](),{meeting:{bIbDisableRecording:t,recordingEnable:o},recording:{cmrStatus:n}}=e;return t?Promise.reject({type:Je,reason:"Rejected by Information Barrier",errorCode:Na.RECORDING_ACCOUNT_DISABLE}):o?n===En.Start?Promise.resolve(""):(eN.recordMeeting(!0,!1),Ka(bn,(e=>e.cmrServerStatus===En.Start))):Promise.reject({type:Je,reason:"The account of the meeting disabled the cloud recording",errorCode:Na.RECORDING_ACCOUNT_DISABLE})}pauseRecording(){const e=this[r](),{recording:{cmrStatus:t,allowStopAutoRecording:o}}=e;return t===En.Pause?Promise.resolve(""):t!==En.Start?Promise.reject({type:Je,reason:"Recording is not started",errorCode:Na.RECORDING_MISMATCH_STATE}):o?(eN.recordMeeting(!1,!0),Ka(bn,(e=>e.cmrServerStatus===En.Pause))):Promise.reject({type:Je,reason:"Cannot pause cloud recording due to web setting config",errorCode:Na.RECORDING_STOP_FORBIDDEN})}stopRecording(){const e=this[r](),{recording:{cmrStatus:t,allowStopAutoRecording:o}}=e;return t===En.Stop?Promise.resolve(""):o?(eN.recordMeeting(!1,!1),Ka(bn,(e=>e.cmrServerStatus===En.Stop))):Promise.reject({type:Je,reason:"Cannot stop cloud recording due to web setting config",errorCode:Na.RECORDING_STOP_FORBIDDEN})}accept(){const e=this[r](),{recording:{cmrStatus:t,recordingIsoEnable:o}}=e,n=Ru(e);return o?t!==En.Start&&t!==En.Pause?Promise.reject({type:Je,reason:"Recording is not started",errorCode:Na.RECORDING_MISMATCH_STATE}):null!=n&&n.bAllowISORecord?Promise.resolve("You accepted ISO recording"):(eN.allowSelfRecord(!0),Ka(Cn,(e=>(null==e?void 0:e.userId)===(null==n?void 0:n.userId)&&(null==e?void 0:e.status)===yn.Accept))):Promise.reject({type:Je,reason:"ISO Recording is not enabled",errorCode:Na.RECORDING_ISO_DISABLE})}decline(){const e=this[r](),{recording:{cmrStatus:t,recordingIsoEnable:o}}=e,n=Ru(e);return o?t!==En.Start&&t!==En.Pause?Promise.reject({type:Je,reason:"Recording is not started",errorCode:Na.RECORDING_MISMATCH_STATE}):!0===(null==n?void 0:n.bAllowISORecord)?Promise.reject({type:Je,reason:"You had accept ISO recording, cant change it",errorCode:Na.RECORDING_MISMATCH_STATE}):(eN.allowSelfRecord(!1),Promise.resolve("")):Promise.reject({type:Je,reason:"ISO Recording is not enabled",errorCode:Na.RECORDING_ISO_DISABLE})}getRecordingStatus(){const e=this[r](),{recording:{cmrStatus:t}}=e,o=Vu(e);return t===En.Start?yn.Recording:t===En.Pause?yn.Paused:o?yn.Recording:yn.Stopped}isRecordingEnabled(){const e=this[r](),{recording:{recordingEnable:t}}=e;return t}isAllowedToStopAutoRecording(){const e=this[r](),{recording:{allowStopAutoRecording:t}}=e;return t}isAutomaticCloudRecordingEnabled(){const e=this[r](),{recording:{automaticCloudRecordingEnable:t}}=e;return t}enableRecordingWithIQ(e){const{[r]:t,[o]:n}=this,i=t(),{recording:{isZoomIQ:s,zoomIQChanging:a},meeting:{meetingOptions:u}}=t();return u.isEnableKiwiRecording?Ou(i)?a?Promise.reject({type:Je,reason:"We are changing, please wait",errorCode:Na.RECORDING_IQ_MISMATCH_STATE}):e===s?Promise.reject({type:Je,reason:`You have ${e?"enable":"disable"} Zoom IQ, don't need change`,errorCode:Na.RECORDING_IQ_MISMATCH_STATE}):(n(cR(!a)),n(dR(!s)),eN.enableZoomIQRecord(e),Ka(Dn,(e=>null==e?void 0:e.success))):Promise.reject({type:Je,reason:"Only Host or co-host can enable/disable Zoom IQ",errorCode:Na.RECORDING_IQ_PERMISSION_REQUIRED}):Promise.reject({type:Je,reason:"You not have zoom IQ license or not enable zoom IQ, please check and retry",errorCode:Na.RECORDING_IQ_DISABLE})}isSupportLocalRecording(){const e=this[r](),{meeting:{meetingOptions:t,isWebinar:o},breakoutRoom:n}=e;if((null==n?void 0:n.currentRoom.status)===Su.InRoom)return!1;const i=Ru(e);return(!o||!pu(i.userRole))&&(null==t?void 0:t.isLocalRecordingEnabled)}isSupportLocalRecordingPermission(){const e=this[r](),{recording:{supportLocalRecording:t}}=e;if(!this.isSupportLocalRecording())return!1;const o=Ru(e);return!(null==o||!o.isHost)||t===In.Allow}askLocalRecordingPermission(){const{[r]:e}=this,{recording:{supportLocalRecording:t}}=e();return this.isSupportLocalRecording()?t===In.None?(eN.localRecordingRequestPermission(),Promise.resolve("")):t===In.Allow?Promise.resolve(""):Promise.reject({reason:"permission is denied",errorCode:Na.LOCAL_RECORDING_MISMATCH_STATE}):Promise.reject({reason:"not support",errorCode:Na.LOCAL_RECORDING_ACCOUNT_DISABLE})}startLocalRecording(e){const{[r]:t,[o]:n}=this,i=t(),{recording:{localStatus:s,supportLocalRecording:a},meeting:{userId:u}}=i;if(!(e in _n))return Promise.reject({type:Je,reason:"not support you parameter, only support type are 0(stop)/1(start)/2(pause).",errorCode:Na.LOCAL_RECORDING_INVALID_VALUE});if(!this.isSupportLocalRecording())return Promise.reject({type:Je,reason:"not support local recording",errorCode:Na.LOCAL_RECORDING_ACCOUNT_DISABLE});if(e===s)return Promise.resolve(`you currently status is ${s}, do nothing`);const d=Ru(i);return a===In.Allow||null!=d&&d.isHost?(eN.localRecordingMeeting(e),Ka(Tn,(t=>(null==t?void 0:t.userId)===u&&(n(lR(t.bLocalRecord)),t.bLocalRecord===e)),1e3)):Promise.reject({type:Je,reason:"you not have local recording permission, please use askLocalRecordingPermission request it first",errorCode:Na.LOCAL_RECORDING_MISMATCH_STATE})}isSupportLocalRecordingGrantPermission(){const e=this[r]();if(!this.isSupportLocalRecording())return!1;const t=Ru(e);return!(null==t||!t.isHost)&&!!xE(t.caps)}grantLocalRecordingPermission(e,t,n){const{[r]:i,[o]:s}=this,a=i(),{recording:{localPermissionUserList:u}}=a;if(!this.isSupportLocalRecording())return Promise.resolve(!1);const d=Ru(a);if(!xE(d.caps))return Promise.reject({type:Je,reason:"you can not grant permission",errorCode:Na.LOCAL_RECORDING_MISMATCH_STATE});let c=!1;if(n&&(c=!0),u.filter((t=>t===e)).length>0){if(t===In.Allow)eN.localRecordingGrantPermission(e,!0,c);else{if(t!==In.Deny)return Promise.reject({type:Je,reason:"only support DENY(1)/ALLOW(2)",errorCode:Na.LOCAL_RECORDING_INVALID_VALUE});eN.localRecordingGrantPermission(e,!1,c)}return s(mR(u.filter((t=>t!==e)))),Ga(Rn,{type:"answer",value:t===In.Allow}),Promise.resolve(!1)}return t!==In.Deny?Promise.reject({type:Je,reason:"Direct grant only support DENY(1)",errorCode:Na.LOCAL_RECORDING_INVALID_VALUE}):(eN.hostGrantPermission(e,!1),Ka(Rn,(r=>(null==r?void 0:r.value)===e&&(t===In.Allow?(s(mR([...u,e])),!0===(null==r?void 0:r.canRecord)):(s(mR(u.filter((t=>t!==e)))),!1===(null==r?void 0:r.canRecord)))),1e3))}getLocalRecordingPermissionUserList(){const e=this[r](),{recording:{localPermissionUserList:t}}=e;if(!this.isSupportLocalRecording())return[];const o=Ru(e);return xE(o.caps)?t:Promise.reject({type:Je,reason:"you can not grant permission",errorCode:Na.LOCAL_RECORDING_MISMATCH_STATE})}getLocalRecordingPermissionOperation(){const e=this[r](),{recording:{localGrantPermissionOption:t}}=e;if(!this.isSupportLocalRecording())return null;const o=Ru(e);return xE(o.caps)?t:null}},bS(Xw.prototype,"startRecording",[LS,MS,Gw,tN],Object.getOwnPropertyDescriptor(Xw.prototype,"startRecording"),Xw.prototype),bS(Xw.prototype,"pauseRecording",[LS,MS,zw,tN],Object.getOwnPropertyDescriptor(Xw.prototype,"pauseRecording"),Xw.prototype),bS(Xw.prototype,"stopRecording",[LS,MS,qw,tN],Object.getOwnPropertyDescriptor(Xw.prototype,"stopRecording"),Xw.prototype),bS(Xw.prototype,"accept",[MS,Kw,tN],Object.getOwnPropertyDescriptor(Xw.prototype,"accept"),Xw.prototype),bS(Xw.prototype,"decline",[MS,Jw,tN],Object.getOwnPropertyDescriptor(Xw.prototype,"decline"),Xw.prototype),bS(Xw.prototype,"askLocalRecordingPermission",[MS,Qw],Object.getOwnPropertyDescriptor(Xw.prototype,"askLocalRecordingPermission"),Xw.prototype),bS(Xw.prototype,"startLocalRecording",[MS,Yw],Object.getOwnPropertyDescriptor(Xw.prototype,"startLocalRecording"),Xw.prototype),bS(Xw.prototype,"grantLocalRecordingPermission",[MS,kS,Zw],Object.getOwnPropertyDescriptor(Xw.prototype,"grantLocalRecordingPermission"),Xw.prototype),Xw);const oN={moduleEpics0:e=>e.pipe(HS(`${jg}`),Vr((e=>{const{payload:{recordingEnable:t}}=e;return iR(t)}))),moduleEpics1:(e,t)=>_v(e,Dv).pipe(co((e=>{var t,r,o;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.cmrServerStatus)||void 0!==(null===(r=e.payload.body)||void 0===r?void 0:r.disAllowClientStopAutoCmr)||void 0!==(null===(o=e.payload.body)||void 0===o?void 0:o.enableAutomicRecordingCloud)})),Oo(t),Gr((([e,t])=>{const{cmrServerStatus:r,disAllowClientStopAutoCmr:o,enableAutomicRecordingCloud:n}=e.payload.body,i=[];return void 0!==r&&(r!==En.Init&&(Ga(bn,{cmrServerStatus:r}),t.recording.recordingIsoEnable&&r===En.Start&&Ga(Cn,{status:yn.Ask})),i.push(nR(r))),void 0!==o&&i.push(aR(!o)),void 0!==n&&i.push(uR(n)),Cr(i)}))),moduleEpics2:e=>_v(e,Dv).pipe(co((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.bCmrIsoEnble)})),Vr((e=>{const{bCmrIsoEnble:t}=e.payload.body;return sR(t)}))),moduleEpics3:(e,t)=>_v(e,Ov).pipe(Oo(t),co((([e])=>{const{payload:{body:{update:t,add:r}}}=e;return(null==t?void 0:t.some((e=>void 0!==e.bLocalRecordStatus||void 0!==e.canRecord)))||(null==r?void 0:r.some((e=>void 0!==e.bLocalRecordStatus||void 0!==e.canRecord)))})),Gr((([e,t])=>{const{payload:{body:{update:r,add:o}}}=e,{meeting:{userId:n,isHost:i},recording:{supportLocalRecording:s},participants:{attendeesList:a}}=t,u=[];return null==r||r.concat(o||[]).filter((e=>void 0!==e.bLocalRecordStatus||void 0!==e.canRecord)).forEach((e=>{if(void 0!==e.canRecord){const t=Boolean(e.canRecord);if(n===e.id||i){const r=a.find((e=>e.userId===n));!t&&null!=r&&r.bLocalRecord&&(Ga(Rn,{type:"revoke",value:e.id,canRecord:t}),Ww.localRecordingMeeting(_n.Stop)),!t||null!=r&&r.bLocalRecord||Ga(Rn,{type:"grant",value:e.id,canRecord:t})}n===e.id&&((s!==In.None||t)&&u.push(pR(t?In.Allow:In.Deny)),t||u.push(lR(_n.Stop)))}else Ga(Tn,{userId:e.id,bLocalRecord:e.bLocalRecordStatus})})),Cr(u)}))),moduleEpics4:(e,t)=>_v(e,Ov).pipe(Vr((e=>uf(e.payload.body))),Oo(t),Gr((([e,t])=>{const r=[],{recording:{localPermissionUserList:o}}=t;return e.remove&&e.remove.forEach((e=>{o.filter((t=>t===(null==e?void 0:e.userId)))&&(r.push(mR(o.filter((t=>t!==(null==e?void 0:e.userId))))),Ga(Rn,{type:"remove",value:null==e?void 0:e.userId}))})),Cr(r)}))),moduleEpics5:e=>_v(e,Ov).pipe(co((e=>{const{payload:{body:{update:t}}}=e;return null==t?void 0:t.some((e=>void 0!==e.bAllowISORecord))})),Ro((e=>{const{payload:{body:{update:t}}}=e;t.filter((e=>void 0!==e.bAllowISORecord)).forEach((e=>{Ga(Cn,{userId:e.id,status:e.bAllowISORecord?yn.Accept:yn.Decline})}))})),Eo(nr)),moduleEpics6:e=>_v(e,Dv).pipe(co((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.SalesRecordingAnalytics)})),Vr((e=>{const{SalesRecordingAnalytics:t}=e.payload.body;return Ga(On,{isZoomIQ:t}),dR(t)}))),moduleEpics7:(e,t)=>_v(e,4319).pipe(Oo(t),co((([e])=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.success)})),Gr((([e,t])=>{const r=[],{success:o}=e.payload.body,{recording:{zoomIQChanging:n}}=t;return Ga(Dn,{success:o}),o&&r.push(cR(!n)),Cr(r)}))),moduleEpics8:(e,t)=>_v(e,4344).pipe(Oo(t),co((([e])=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.cmdType)})),Gr((([e,t])=>{var r;const o=[],{cmdType:n}=e.payload.body,{recording:{localPermissionUserList:i},meeting:{isHost:s}}=t;var a,u,d,c;("permission_req_option"===n&&(Ga(Rn,{type:"option",value:null===(a=e.payload.body)||void 0===a?void 0:a.option}),o.push(hR(null===(u=e.payload.body)||void 0===u?void 0:u.option))),"request_permission"===n&&null!==(r=e.payload.body)&&void 0!==r&&r.userId)&&(s&&Ga(Rn,{type:"request",value:null===(c=e.payload.body)||void 0===c?void 0:c.userId}),o.push(mR([...i,null===(d=e.payload.body)||void 0===d?void 0:d.userId])));return"permission_request_answer"===n&&(Ga(Rn,{type:"answer",value:e.payload.body.agreed}),o.push(pR(e.payload.body.agreed?In.Allow:In.Deny))),Cr(o)})))},nN=Ev(oN);let iN=function(e){return e[e.All=1]="All",e[e.Private=2]="Private",e}({}),sN=function(e){return e.SUCCESS="success",e}({}),aN=function(e){return e.Screenshot="__zoom_internal_message_screenshot__@@",e.SpeakerOnly="__zoom_internal_message_speaker_only__@@",e}({});const uN=C_.getInstance(),dN=__.createAgent();async function cN(e,t,r){const o=hd(e);return t?await vb.beginEncrypt({text:o,type:r}):o}const lN=async(e,t,r)=>{try{let o="";if(await function(e){const{cmd:{connectionStatus:t}}=e;return t===sN.SUCCESS?Promise.resolve(!0):Mr(Ja(Sn,1)).then((e=>e===Ho.Connected||Promise.reject({type:Je,reason:"Cannot establish the command channel"})))}(r()),t){await function(e,t){const{cmd:{jids:r}}=t;return Object.prototype.hasOwnProperty.call(r,e)?Promise.resolve():Mr(Ja(Lo).pipe(Io((t=>-1===t.findIndex((t=>Number(t.userId)===e)))),go(1),Ir(er)))}(t,r());const{cmd:{jids:e}}=r();if(!e[t])return Promise.reject({type:Qe,errorCode:Na.INTERNAL_ERROR});o=e[t].jid}const{meeting:{encType:n}}=r(),i=o?iN.Private:iN.All,s=n===pb.AES_GCM,a=await cN(e,s,hb.XMPP_CHAT);uN.sendWebinarMseeage(a,o,i,s)}catch(e){}return""},pN=async(e,t)=>{const r=await cN(e,!1,hb.RWG_CHAT);return dN.sendCommandMessage(r,t),""};function hN(e,t){for(const[r,o]of Object.entries(e))if(o.jid===t)return r}function mN(e,t){let r,o=!1;if(null!=e&&e.startsWith(aN.SpeakerOnly)){const n=e.substring(aN.SpeakerOnly.length),i=1===Number(n);r=sf({userId:t,key:"isSpeakerOnly",value:i}),o=!0}else if(e.startsWith(aN.Screenshot)){const t=e.substring(aN.Screenshot.length);try{const{userId:e,displayName:r,type:o}=JSON.parse(t);Ga("video"===o?li:Es,{userId:e,displayName:r})}catch(e){console.log(e)}o=!0}return[o,r]}const gN=e=>t=>t.pipe(Gr((t=>{const{payload:{userId:r}}=t;return Mu(e.value).some((e=>e.userId===r))?Cr([t]):lo(Ja(No).pipe(co((e=>e.some((e=>e.userId===r)))),go(1),Ir(er),Vr((()=>t))),oo(3e3).pipe(So()))}))),SN={connectionStatus:"initial",jids:{}},vN=qc({[`${yR}`]:()=>({...SN}),[`${SR}`]:ay(((e,{payload:t})=>{const{data:r,attendees:o}=t;r.forEach((t=>{const{jid:r,node:n}=t;if(!e.jids[n]||e.jids[n].jid!==r){const t=o.find((e=>e.userId===Number(n)));e.jids[n]={jid:r,userGuid:null==t?void 0:t.userGUID}}}))})),[`${vR}`]:ay(((e,{payload:t})=>{t.forEach((t=>{const{jid:r}=t,o=hN(e.jids,r);o&&delete e.jids[o]}))})),[`${fR}`]:ay(((e,{payload:t})=>{e.connectionStatus=t}))},SN);var fN;let yN=(fN=class extends A_{send(e,t){if(!e)return Promise.reject({type:et,reason:"Text is empty",errorCode:Na.CMD_EMPTY_MESSAGE});if("string"!=typeof e)return Promise.reject({type:et,reason:"Text is not a string",errorCode:Na.CMD_INVALID_MESSAGE_TYPE});if(e.length>512)return Promise.reject({type:et,reason:"Text exceeds the max length(512).",errorCode:Na.CMD_EXCEED_MESSAGE_LENGTH});const{[r]:o}=this,n=o(),{socket:{xmppSocketStatus:i},meeting:{userId:s}}=n;return i!==M_.Connected?Promise.reject({type:Je,reason:"Command channel is not ready",errorCode:Na.CMD_CHANNEL_NOT_READY}):t&&-1===Mu(o()).findIndex((e=>e.userId===t))?Promise.reject({type:et,reason:"Cannot find the user",errorCode:Na.CMD_MISMATCH_USER}):Promise.race([lN(e,null!=t?t:0,o),pN(e,null!=t?t:0)]).then((()=>({timestamp:(new Date).getTime(),text:e,receiverId:null!=t?t:0,senderId:s})))}getJids(){const{[r]:e}=this,t=e(),{cmd:{jids:o}}=t;return o}},bS(fN.prototype,"send",[MS],Object.getOwnPropertyDescriptor(fN.prototype,"send"),fN.prototype),fN);const EN={epics0:(e,t)=>Av(e,24577).pipe(Oo(t),Vr((([e])=>{const{payload:{body:{status:t}}}=e;return t===sN.SUCCESS&&Ga(Sn,Ho.Connected),fR(t)}))),epics1:(e,t)=>Av(e,24583).pipe(Oo(t),Gr((async([e,t])=>{const{meeting:{userId:r,encType:o},cmd:{jids:n}}=t,{payload:{body:{senderName:i,senderJid:s,text:a,type:u,receiver:d,msgid:c,sn:l}}}=e,p=hN(n,s),h=Mu(t).find((e=>e.userId===Number(p)));if(h&&(h.caps&FE)===FE)return"";{const t=hN(n,d),s=o===pb.AES_GCM,h=(new Date).getTime();let g=a;if(s)try{g=(await vb.beginDecrypt({decryptedText:a,type:hb.XMPP_CHAT,zoomId:l})).message}catch(e){}if(u===iN.Private&&Number(t)===r||u===iN.All){const e=pd(g),[t,r]=mN(e,Number(p));if(!t){var m;const t=p&&(null===(m=n[p])||void 0===m?void 0:m.userGuid);Ga(gn,{senderId:p,senderName:i,senderGuid:t,text:e,timestamp:h,msgid:c})}return r}return""}})),co((e=>"object"==typeof e&&null!==e&&void 0!==e.type)),gN(t),Ro((e=>{const{payload:{userId:t,key:r,value:o}}=e;Ga(Mo,[{userId:t,[`${r}`]:o}])}))),epics2:(e,t)=>Av(e,24595).pipe(Gr((e=>{const{payload:{body:{action:r,data:o}}}=e,n=[];if([lf.List,lf.Add,lf.update].includes(r)&&o){const{breakoutRoom:e,participants:{attendeesList:r}}=t.value,i=(null==e?void 0:e.currentRoom.status)===Su.InRoom?r.concat(e.mainSessionAttendeeList):r;n.push(SR({data:o,attendees:i}))}return r===lf.Remove&&o&&n.push(vR(o)),Cr(n)}))),epics3:(e,t)=>_v(e,8032).pipe(Gr((async e=>{const{payload:{body:{senderID:r,commandContent:o,msgID:n}}}=e,i=pd(o),[s,a]=mN(i,r);if(!s){const e=r&&Mu(t.value).find((e=>e.userId===r));Ga(gn,{senderId:`${null==e?void 0:e.userId}`,senderName:null==e?void 0:e.displayName,senderGuid:null==e?void 0:e.userGUID,text:i,timestamp:(new Date).getTime(),msgid:n})}return a})),co((e=>"object"==typeof e&&null!==e&&void 0!==e.type)),gN(t),Ro((e=>{const{payload:{userId:t,key:r,value:o}}=e;Ga(Mo,[{userId:t,[`${r}`]:o}])})))},_N=Ev(EN,{extraEpics0:(e,t)=>e.pipe(HS(`${hI}`),bo((e=>{const{payload:{speakerOnly:r}}=e,o=Ru(t.value);return(void 0!==(null==o?void 0:o.audio)?Cr([o.audio]):Ja(wo).pipe(co((e=>void 0!==e.audio)),go(1))).pipe(Ro((async()=>{const e=`${aN.SpeakerOnly}${r?1:0}`;await Promise.all([lN(e,0,(()=>t.value)),pN(e,0)])})),So())}))),extraEpics1:(e,t)=>_v(e,Ov).pipe(co((e=>{var r,o;const{payload:{body:n}}=e;return!(null===(r=t.value.audio)||void 0===r||null===(r=r.customizeAudioOption)||void 0===r||!r.speakerOnly)&&(null==n||null===(o=n.add)||void 0===o?void 0:o.length)>0})),Ir(er),Gr((e=>{const{payload:{body:{add:r}}}=e,o=t.value,{meeting:{userId:n},participants:{attendeesList:i}}=o,s=[];if(r)for(const e of r)if(e.id!==n){const r=oo(Math.floor(Math.random()*Math.min(200+10*i.length,2e3))).pipe(Gr((()=>{if(Mu(t.value).some((t=>t.userId===e.id))){const r=`${aN.SpeakerOnly}1`;return Cr([lN(r,e.id,(()=>t.value)),pN(r,e.id)]).pipe(Gr((e=>Cr(e))),po((()=>nr)),So())}return nr})),po((()=>nr)));s.push(r)}return s.length>0?io(...s):nr})),So()),extraEpics2:(e,t)=>e.pipe(HS(`${Kc}`,`${zI}`),Ro((async e=>{const{payload:{targetUser:r,userId:o,displayName:n}}=e,i=e.type===`${Kc}`?"video":"sharing",s=`${aN.Screenshot}${JSON.stringify({userId:o,displayName:n,type:i})}`;Promise.all([lN(s,r,(()=>t.value)),pN(s,r)])})),So())}),IN=(e,t,r,o)=>{const{getState:n,dispatch:i}=r,s=n(),{participants:{attendeesList:a},audio:{localShareAudioUserMutedList:u},share:{isReceiveSharingFromMainSession:d},breakoutRoom:c}=s,l=(d?null==c?void 0:c.mainSessionAttendeeList:a).find((t=>t.userId==e));if(l){if(l.bShareAudioOn){const r=u.find((t=>t.userId===e));return r&&r.muted===!t&&i(DI(o,e,t,s)),Promise.resolve("")}return Promise.reject({type:Je,reason:`Cannot ${t?"mute":"unmute"} share audio when the user's share audio is not enable.`,errorCode:Na.AUDIO_NOT_STARTED})}return Promise.reject({type:et,reason:"Cannot find the user",errorCode:Na.STREAM_MISMATCH_USER})},AN=async(e,t,r,o=!1)=>{const{store:{getState:n,dispatch:i},mediaAgent:s}=e,a=n(),{meeting:{meetingOptions:u},share:{sharePrivilege:d,ssrc:c,capturedEnsuredCanvas:l},media:{sharingEncodeStatus:p},breakoutRoom:h}=a;await CC(t,a,r,o),o&&"success"!==p&&s.enableShareEncode();const m=Ou(a);if(null!=r&&r.broadcastToBreakoutRoom){if(!m||(null==h?void 0:h.currentRoom.status)===Su.InRoom)return m?Promise.reject({type:Je,reason:"Unable to share screen to breakout room when in the room",errorCode:Na.SCREEN_SHARE_SUBSESSION_CONFLICT}):Promise.reject({type:Ze,errorCode:Na.SCREEN_SHARE_HOST_PRIVILEGE_REQUIRED});i(iA(!0))}else i(iA(!1));return void 0!==(null==r?void 0:r.requestReadReceipt)&&i(uA(null==r?void 0:r.requestReadReceipt)),void 0!==(null==r?void 0:r.optimizedForSharedVideo)&&d!==z.MultipleShare&&i(dA((null==r?void 0:r.optimizedForSharedVideo)&&Fu.isSupportVideoShareSend())),t.id||(t.id=Id("__ZOOM_SDK_SELF_SHARE_CANVAS_@__")),i(kA(!(null==r||!r.simultaneousShareView))),Md("sharing",p,"success").subscribe((([e])=>{if(e){l.includes(t.id)||(Vd(t),i(pA(t.id)));let e=document.querySelector(`#${ie}`);e&&"VIDEO"===e.tagName||(e=document.createElement("video"),e.id=ie,e.style.display="none",document.body.appendChild(e));const n=null!=r&&r.secondaryCameraId?{cameraId:r.secondaryCameraId,width:r.captureWidth,height:r.captureHeight}:void 0,a=!(null!=r&&r.hideShareAudioOption);s.startDesktopSharing(c,t,e,n,null!=u&&u.isDisableShareAudioIntoBo?a&&!(null!=r&&r.broadcastToBreakoutRoom):a,null==r?void 0:r.displaySurface,null==r?void 0:r.sourceId,null==r?void 0:r.controls,o),i(bI(void 0)),i(sA(!!n))}})),new Promise(((e,t)=>{lo(Qr({userAttr:Ja(wo).pipe(co((e=>void 0!==e.sharerOn)),go(1)),dimensionChange:Ja(Yi).pipe(go(1))}).pipe(Vr((({userAttr:e})=>e))),Ja(Qi,1).pipe(Gr((e=>Rr({reason:e.reason||"user deny screen share",errorCode:e.reason?Na.SCREEN_SHARE_SYSTEM_DENIED:Na.SCREEN_SHARE_USER_DENIED}))))).subscribe({next:r=>{if(!0===r.sharerOn){const{share:{isSharingToBreakoutRoom:t},meeting:{meetingOptions:r}}=n(),a=!(null!=r&&r.isDisableShareAudioIntoBo||!t);s.enableShareAudioToBreakoutRoom(a),o&&i(UA(!0)),e("")}else t({type:Qe,errorCode:Na.INTERNAL_ERROR})},error:e=>{t({type:Je,...e})}})}))},bN=(e,t)=>{const{store:{getState:r},rwgAgent:o}=e,{share:{sharePrivilege:n}}=r();return n===t?Promise.resolve(""):Object.values(z).includes(t)?(o.lockSharing(t),Jd("lockShare",t)):Promise.reject({type:et,errorCode:Na.SCREEN_SHARE_INVALID_PRIVILEGE})},CN=(e,t,r,o)=>{const{store:{getState:n},rwgAgent:i}=e,{meeting:{userId:s},participants:{attendeesList:a}}=n();return(null==a?void 0:a.find((e=>(null==e?void 0:e.userId)===r)))?(i.respondRemoteShareRequest(t,s,r,o),Promise.resolve("")):Promise.reject({type:Je,reason:`Cannot find a user with userId: ${r}`,errorCode:Na.SHARE_CAMERA_MESSAGE_ERROR})},TN=ru([Mu],(e=>e.filter((e=>e.bVideoOn)))),RN=ru([TN],(e=>e.filter((e=>(e.caps&HE)===HE)))),ON=(e,t,r,o,n,i,s,a,u,d)=>{const{store:{getState:p,dispatch:h},mediaAgent:m}=e,g=p(),{meeting:{userId:S,isUseWBVideo:v},media:{enforceMultipleVideos:f,disableRenderLimits:y},video:{subscribedVideoList:E,renderedVideoList:_}}=g;if(v)return Promise.reject({type:Je,reason:"Use the attachVideo method to render the video.",errorCode:Na.VIDEO_METHOD_DEPRECATED});console.warn("Use the attachVideo method to render the video. The renderVideo method is deprecated. See the reference for details.");const I=Fu.getMaxCountRender(v,!!f,y),A=bm()&&r===S;if(l(t)&&!E.includes(r)&&E.length>=I&&new Set(_.map((e=>e.canvasId))).has(t.id))return Promise.reject({type:Je,reason:`subscribe video counts greater than maximum size (${I})`,errorCode:Na.VIDEO_RENDER_LIMIT_EXCEED});if(-1===TN(g).findIndex((e=>e.userId===r)))return Promise.reject({type:et,reason:"user is not send video",errorCode:Na.STREAM_MISMATCH_USER});if(t.id||(t.id=Id("__ZOOM_SDK_VIDEO_CANVAS_@__")),A){if(c(t)){t.playsInline=!0,t.muted=!0,t.autoplay=!0,T.isIOSMobile&&(m.switchCanvasForVideoCapture(t),h(Jl())),m.renderVideo(t,r,u||ae,o,n,i,s,a,!0,d||"",!1),h(ul(r)),h(Kl(t.id));const e=document.querySelector(`#${ce}`);return e&&e.remove(),Promise.resolve("")}return Promise.reject({type:et,reason:"You must use a <video> element to render self video for Chromium browser, Android browser without SharedArrayBuffer or iOS browser ",errorCode:Na.STREAM_MISMATCH_RENDER_ELEMENT})}const b=!!d,{media:{videoDecodeStatus:C}}=g;return Md("video","success",C).subscribe((async([e,c])=>{if(c){const{video:{ensuredCanvas:e,renderedVideoList:c}}=p();let l=t;e.includes(t.id)||(l=Vd(t),h(Vl(t.id)));const g=r===S,v=u||ae,f=await async function(e,t){const{video:{prefetchedVideo:r}}=t;return(null==r?void 0:r.userId)!==e||r.loaded?"":Mr(lo(Ja(ai,1),oo(1e3).pipe(vo(""))))}(r,p());c.some((e=>e.userId===r&&e.key===v&&e.canvasId===l.id))||m.renderVideo(l,r,v,o,n,i,s,a,g,d||"",b),r!==S&&m.subscribeVideo(r,a,!1),E.includes(r)||h(ul(r)),f&&h(Hl(void 0)),h(pl({userId:r,key:v,canvasId:l.id,videoQuality:a,aspectRatio:n?o/n:0}))}})),"failed"===C?Promise.reject({type:Qe,reason:"Video  decode status is failed",errorCode:Na.INTERNAL_ERROR}):Promise.resolve("")},DN={video:{detectAction:Fu.getVideoProcessorCapability,errorCode:{unsupported:Na.VIDEO_PROCESSOR_UNSUPPORTED,duplicateCreate:Na.VIDEO_PROCESSOR_DUPLICATE_CREATE,mismatchProcessor:Na.VIDEO_PROCESSOR_MISMATCH_PROCESSOR,limitExceed:Na.VIDEO_PROCESSOR_LIMIT_EXCEED}},audio:{detectAction:Fu.getAudioProcessorCapability,errorCode:{unsupported:Na.AUDIO_PROCESSOR_UNSUPPORTED,duplicateCreate:Na.AUDIO_PROCESSOR_DUPLICATE_CREATE,mismatchProcessor:Na.AUDIO_PROCESSOR_MISMATCH_PROCESSOR,limitExceed:Na.AUDIO_PROCESSOR_LIMIT_EXCEED}},share:{detectAction:Fu.getShareProcessorCapability,errorCode:{unsupported:Na.SHARED_PROCESSOR_UNSUPPORTED,duplicateCreate:Na.SHARED_PROCESSOR_DUPLICATE_CREATE,mismatchProcessor:Na.SHARED_PROCESSOR_MISMATCH_PROCESSOR,limitExceed:Na.SHARED_PROCESSOR_LIMIT_EXCEED}}},wN=(e,t)=>{var r;const{store:{getState:o}}=e,n=o(),{meeting:{mediaFeatureOptions:i}}=n;return null===(r=DN[t])||void 0===r?void 0:r.detectAction(i||"")},NN=(e,t)=>{const r=e.store.getState(),o=KE(r).find((e=>e.userId===t));if(o){const{caps:e}=o;return(e=>!(512&~e))(e)}return!1};var MN,PN,LN,kN,UN,VN,BN,HN,jN,FN,WN,xN,$N,GN,zN,qN,KN,JN,QN,YN,ZN,XN,eM,tM,rM,oM,nM,iM,sM,aM,uM,dM,cM,lM,pM,hM,mM,gM,SM,vM,fM,yM,EM,_M,IM,AM,bM,CM,TM,RM,OM,DM,wM,NM,MM,PM,LM,kM,UM,VM,BM,HM,jM,FM,WM,xM,$M,GM,zM,qM,KM,JM,QM,YM,ZM,XM,eP,tP,rP,oP,nP,iP,sP,aP,uP,dP,cP,lP,pP,hP,mP,gP,SP,vP,fP,yP,EP,_P,IP,AP,bP,CP,TP,RP,OP;const DP=UE("Audio"),wP=UE("Video"),NP=UE("Sharing"),MP=UE("Processor"),PP=UE("CameraControl"),LP=UE("Remote Control"),kP=VE(HTMLCanvasElement,0),UP=VE([HTMLCanvasElement,HTMLVideoElement],0),VP=VE(HTMLCanvasElement,0,["id"]),BP=VE([HTMLCanvasElement,HTMLVideoElement],0,["id"]),HP=e_("annotation"),jP=e_("remote control");let FP=(MN=US("audio"),PN=US("audio"),LN=US("audio"),kN=US("audio"),UN=US("audio"),VN=UE("Audio",[1,2,3]),BN=US("audio"),HN=UE("Audio",[1,2]),jN=US("audio"),FN=US("audio"),WN=US("audio"),xN=US("audio"),$N=US("share"),GN=US("audio"),zN=US("share"),qN=US("audio"),KN=US("audio"),JN=US("audio"),QN=US("audio"),YN=US("audio"),ZN=US("audio"),XN=UE("Audio",[1,2]),eM=US("audio"),tM=UE("Audio",[1,2]),rM=US("audio"),oM=US("audio"),nM=US("audio"),iM=US("audio"),sM=US("video"),aM=US("video"),uM=US("video"),dM=US("processor"),cM=US("processor"),lM=US("processor"),pM=US("video"),hM=US("video"),mM=US("video"),gM=US("video"),SM=US("video"),vM=US("video"),fM=US("video"),yM=US("video"),EM=US("video"),_M=US("video"),IM=UE("Video",[2]),AM=US("video"),bM=UE("Video",[1]),CM=US("video"),TM=US("video"),RM=US("video"),OM=US("video"),DM=US("video"),wM=US("video"),NM=US("video"),MM=US("video"),PM=US("video"),LM=US("video"),kM=US("video"),UM=US("video"),VM=US("video"),BM=US("video"),HM=US("video"),jM=US("video"),FM=US("video"),WM=US("video"),xM=US("video"),$M=US("video"),GM=US("share"),zM=US("share"),qM=US("share"),KM=US("share"),JM=US("share"),QM=US("share"),YM=US("share"),ZM=US("share"),XM=US("share"),eP=py("isShareOptionLocked"),tP=py("isShareOptionLocked"),rP=US("share"),oP=US("share"),nP=US("share"),iP=US("share"),sP=US("share"),aP=US("share"),uP=US("share"),dP=US("share"),cP=US("share"),lP=US("share"),pP=US("share"),hP=US("share"),mP=US("share"),gP=US("share"),SP=US("share"),vP=US("share"),fP=US("share"),yP=US("share"),EP=US("share"),_P=US("share"),IP=US("share"),AP=US("share"),bP=US("share"),CP=US("share"),TP=US("share"),RP=US("share"),OP=class extends A_{constructor(e){super(e),this[i]=void 0,this[t].dispatch(ov()),this[i]={store:e,mediaAgent:Fd(ME(Fu.getInstance())),rwgAgent:__.createAgent()}}startAudio(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n,mediaAgent:i}=e,s=r(),a=Ru(s);if((null==a?void 0:a.audio)===Ee.Computer)return Promise.resolve("");if((null==a?void 0:a.audio)===Ee.Phone)return Promise.reject({type:Je,reason:"joined by phone",errorCode:Na.AUDIO_IN_PSTN});{const{audio:{isAllowToTalk:e,isComputerAudioLoading:u,canPlayAudio:d,customizeAudioOption:{speakerOnly:c}},media:{audioDecodeStatus:l,audioEncodeStatus:p}}=s;if(u)return Promise.reject({type:Je,reason:"Computer audio has been loading, please wait.",errorCode:Na.AUDIO_CAPTURE_LOADING});const h=function(e,t){const r=t?{...t}:void 0;if(UI(e.meeting.mediaFeatureOptions||"",e.audio.isWebRtcAudioCapable)||!0!==(null==r?void 0:r.backgroundNoiseSuppression)||(console.warn("Background noise suppression requires SharedArrayBuffer and is only supported on desktop browser"),Object.assign(r,{backgroundNoiseSuppression:void 0})),void 0!==(null==r?void 0:r.originalSound)){r.backgroundNoiseSuppression&&r.originalSound&&(console.warn("Enabling original sound will disable background noise suppression."),Object.assign(r,{backgroundNoiseSuppression:!1}));const{originalSound:e}=r;"object"==typeof e&&e.stereo&&!VI()&&(console.warn("Cannot enable stereo audio on current platform due to the browser limitation"),Object.assign(e,{stereo:!1}))}return BI()||!0!==(null==r?void 0:r.syncButtonsOnHeadset)||(console.warn("Sync buttons on headset is not supported on the current platform"),Object.assign(r,{syncButtonsOnHeadset:void 0})),null!=r&&r.mediaFile&&!Fu.isSupportMediaPlaybackAsAudioInput()&&(console.warn("Cannot use media file as audio input due to the browser limitation"),Object.assign(r,{mediaFile:void 0})),r}(s,t);o(hI(null!=h?h:{}));const{speakerOnly:m,autoStartAudioInSafari:g}=h||{};if(!!c!=!!m&&o(sf({userId:s.meeting.userId,key:"isSpeakerOnly",value:!!m})),!a)return Promise.reject({type:Je,reason:"Please call `startAudio` method after the `join` has been resolved",errorCode:Na.STREAM_SESSION_JOIN_REQUIRED});{const t=pu(a.userRole)&&!e||m,{encodeInitStatus:u,decodeInitStatus:c}=HI(s,a,m);if(LI()&&("success"!==c||"success"!==u))return Promise.reject({type:Je,reason:"It is required to wait for the audio encoding and decoding to be ready before calling `startAudio` method",errorCode:Na.AUDIO_ENCODING_REQUIRED});o(Z_(!0)),Md("audio",u,c).subscribe((([s,u])=>{if(s&&u){let s=d||(LI()||T.isIOSMobile)&&!g?Promise.resolve():function(){const e=URL.createObjectURL(x),t=new Audio(e);t.muted=!1;const r=_d((()=>Promise.reject()),3e3),o=T.isIOSMobile?new Promise(((e,r)=>{var o;t.addEventListener("canplaythrough",(()=>{t.play().then((()=>{e(!0)})).catch((e=>{r(e)}))})),null===(o=t.load)||void 0===o||o.call(t)})):t.play();return Promise.race([o,r]).finally((()=>{URL.revokeObjectURL(e)}))}();void 0===s&&(s=Promise.resolve()),s.then((()=>Ld("audio",r()))).then((()=>{const s=r();FI(n,s),wI(i,s,!t),pu(a.userRole)&&e&&o(X_(!0)),o(Q_(!0))})).catch((()=>{o(Q_(!1)),o(Z_(!1))}))}else o(Z_(!1))}))}return"failed"===p||"failed"===l?(o(Z_(!1)),Promise.reject({type:Qe,reason:"audio encode or decode error",errorCode:Na.INTERNAL_ERROR})):new Promise(((e,t)=>{WI().subscribe({next:()=>{o(Z_(!1)),e("")},error:e=>{Fu.getInstance().leaveComputerAudio();const i=Ru(r());(null==i?void 0:i.audio)!==Ee.Phone&&(o(AI(j.MicrophoneError)),n.joinOrLeaveVoip(!1)),o(Z_(!1)),t(e)}})}))}})(this[i],e)}stopAudio(){return(async e=>{const{store:{getState:t,dispatch:r},mediaAgent:o,rwgAgent:n}=e,i=t(),{audio:{isComputerAudioLoading:s,isShareAudioEnabled:a,isSharingAudio:u,isUsingMediaPlayback:d,customizeAudioOption:{speakerOnly:c}},meeting:{mediaFeatureOptions:l}}=i,p=Ru(i);if(s)return Promise.reject({type:Je,reason:"Computer audio has not finished joining, please wait.",errorCode:Na.AUDIO_CAPTURE_LOADING});if(a){if(u&&!Fu.isSupportOpenMicWhenShareAudio(l||""))return Promise.reject({type:Je,reason:"Cannot stop audio during sharing with audio",errorCode:Na.AUDIO_SHARE_AUDIO_CONFLICT});r(oI(void 0)),r(eI(void 0))}return(null==p?void 0:p.audio)===Ee.Computer?(r(AI(j.Active)),await o.leaveComputerAudio(),n.joinOrLeaveVoip(!1),c&&r(sf({userId:i.meeting.userId,key:"isSpeakerOnly",value:void 0})),d&&hm.getInstance().stopAudioElement(),r(G_(0)),Ka(_i)):Promise.resolve("")})(this[i])}muteAudio(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n,mediaAgent:i}=e,s=r(),a=Ru(s),{participants:{allowTalkAttendeesList:u,attendeesList:d},meeting:{mediaFeatureOptions:c}}=s;if(null==t||t===(null==a?void 0:a.userId))return""===(null==a?void 0:a.audio)||null===(null==a?void 0:a.audio)?Promise.reject({type:Je,reason:"no audio joined",errorCode:Na.AUDIO_NOT_STARTED}):!0===(null==a?void 0:a.muted)?Promise.resolve(""):(o(EI(B.Active)),n.mute(a.userId,!0),i.muteAudio(),s.audio.isShareAudioEnabled&&!Fu.isSupportOpenMicWhenShareAudio(c||"")&&o(eI(!0)),Ka(Ii).then((()=>"")));if(Ou(s)){const e=u.concat(d).find((e=>e.userId===t));return e?""===e.audio||null===e?Promise.reject({type:Je,reason:"no audio joined",errorCode:Na.AUDIO_NOT_STARTED}):!1===e.muted?(n.mute(t,!0),Ka({event:bi,operations:[co((e=>e.id===t&&void 0!==e.muted)),go(1)]},(e=>e.id===t&&1==e.muted))):Promise.resolve(""):Promise.reject({type:et,reason:"no matching user",errorCode:Na.STREAM_MISMATCH_USER})}return Promise.reject({type:Ze,errorCode:Na.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})})(this[i],e)}unmuteAudio(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n,mediaAgent:i}=e,s=r(),a=Ru(s),{audio:{isAllowToTalk:u,isAllowToTalkAttendeeConnected:d},meeting:{mediaFeatureOptions:c},participants:{allowTalkAttendeesList:l,attendeesList:p}}=s;if(void 0===t||t===(null==a?void 0:a.userId)){if(""===(null==a?void 0:a.audio)||null===(null==a?void 0:a.audio))return Promise.reject({type:Je,reason:"no audio joined",errorCode:Na.AUDIO_NOT_STARTED});if(!1===(null==a?void 0:a.muted))return Promise.resolve("");if(s.audio.isShareAudioEnabled&&!Fu.isSupportOpenMicWhenShareAudio(c||"")){if(s.audio.isSharingAudio)return Promise.reject({type:Je,reason:"Cannot unmute audio during sharing with audio",errorCode:Na.AUDIO_SHARE_AUDIO_CONFLICT});o(eI(!1))}return s.audio.bCanUnmute||null!=a&&a.isHost||null!=a&&a.bCoHost?(pu(a.userRole)&&(u?d||(await i.leaveComputerAudio(),await wI(i,s,!0),o(X_(!0))):Promise.reject({type:Je,reason:"Webinar attendee cannot unmute self audio.",errorCode:Na.AUDIO_ATTENDEE_NOT_ALLOWED})),o(_I(H.Active)),n.mute(a.userId,!1),i.unmuteAudio(),Ka(Ai).then((()=>""))):Promise.reject({type:Ze,reason:"host not allow unmute themselves",errorCode:Na.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})}if(Ou(s)){const e=l.concat(p).find((e=>e.userId===t));return e?""===e.audio||null===e?Promise.reject({type:Je,reason:"no audio joined",errorCode:Na.AUDIO_NOT_STARTED}):(!0===e.muted&&n.mute(t,!1),Promise.resolve("")):Promise.reject({type:et,reason:"no matching user",errorCode:Na.STREAM_MISMATCH_USER})}return Promise.reject({type:Ze,errorCode:Na.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED})})(this[i],e)}dialOut(e,t,r,o){return((e,t,r,o,n)=>{const{store:{getState:i,dispatch:s},rwgAgent:a}=e,u=i(),{meeting:{callOutCountry:d,isSupportCallOut:c}}=u;if(c&&Array.isArray(d)&&d.findIndex((e=>e.code===t))>-1){const{seq:e}=a.audioDialout(t+r,o,!(null==n||!n.callMe),!(null==n||!n.pressingOne),!(null==n||!n.greeting));return s(B_({sequence:e,phoneNumber:t+r})),qa(qi.JoinAudioByCallMe)}return Promise.reject({type:et,reason:"no matching country code",errorCode:Na.PSTN_MISMATCH_COUNTRY_CODE})})(this[i],e,t,r,o)}cancelDialOut(e,t,r){return((e,t,r,o)=>{const{rwgAgent:n}=e;return n.audioCancelDialout(t+r,!(null==o||!o.callMe)),qa(qi.cancelDialOut)})(this[i],e,t,r)}hangup(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o}=e,n=t(),i=Ru(n);return(null==i?void 0:i.audio)===Ee.Phone&&null!==i.userId?(o.audioDrop(i.userId),i.muted||r(EI(B.Inherited)),qa(qi.hangup)):Promise.reject({type:Je,reason:"not joined audio by phone",errorCode:Na.PSTN_NOT_CONNECTED})})(this[i])}switchMicrophone(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{audio:{activeMicrophone:s,mediaPlaybackFile:a,isUsingMediaPlayback:u}}=i,{microphones:d}=await Mr(kd()),c=d.find((e=>e.deviceId===t));if("default"===t||"string"!=typeof t||c){const e=Ru(i);if((null==e?void 0:e.audio)===Ee.Computer){let r=!1;if("string"==typeof t)(t!==s||u)&&(n.changeMicrophone(t,null==c?void 0:c.label,!(null==e||!e.muted)),o(SI(void 0)),hm.getInstance().stopAudioElement(),r=!0);else if(t&&(!u||(null==a?void 0:a.url)!==t.url)){const i=hm.getInstance();i.setAudioElement(t).then((()=>{void 0!==t.playback&&(n.enablePlayAudioFileLocally(!!t.playback),i.audioElement.dataset.playback=t.playback?"1":"0"),n.changeMicrophone(i.audioElement,void 0,!(null==e||!e.muted)),o(SI(t))})),r=!0}if(r)return Nr(WI()).then((()=>""))}else"string"==typeof t&&o(K_(t));return Promise.resolve("")}return Promise.reject({type:Li,errorCode:Na.STREAM_MISMATCH_DEVICE})})(this[i],e)}switchSpeaker(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{audio:{activeSpeaker:i}}=r(),{speakers:s}=await Mr(kd());if("default"!==t&&-1==s.findIndex((e=>e.deviceId===t)))return Promise.reject({type:Li,errorCode:Na.STREAM_MISMATCH_DEVICE});var a;if((null===(a=Ru(r()))||void 0===a?void 0:a.audio)===Ee.Computer){if(t!==i)return n.changeSpeaker(t),Ka(Hi,(e=>e))}else o(J_(t));return Promise.resolve("")})(this[i],e)}muteShareAudio(e){return((e,t)=>{const{mediaAgent:r,rwgAgent:o,store:{getState:n,dispatch:i}}=e,s=n(),{meeting:{userId:a}}=s;if(t&&t!==a)return IN(t,!0,e.store,r);{const{audio:{isSharingAudio:e,isShareAudioEnabled:t,isShareAudioMuted:n}}=s;if(!t)return Promise.reject({type:Je,reason:"Cannot mute sharing audio when sharing audio is not enable",errorCode:Na.AUDIO_SHARE_AUDIO_CONFLICT});if(n)return Promise.resolve("");{o.muteShareAudio(!0);let t=Promise.resolve();var u;return e&&(t=null===(u=r.leaveSharingAudio(!0))||void 0===u?void 0:u.then((()=>NI(o,s).then((e=>{e.forEach((e=>i(e)))}))))),DI(r,a,!0,s),Promise.all([Ka({event:wo,operations:[co((e=>void 0!==e.bShareAudioOn)),go(1)]},(e=>!1===e.bShareAudioOn)),t]).then((()=>(i(iI(!0)),e&&(i(sI(!1)),Ga(Ui,{state:"off"})),"")))}}})(this[i],e)}unmuteShareAudio(e){return((e,t)=>{const{mediaAgent:r,rwgAgent:o,store:{getState:n,dispatch:i}}=e,s=n(),{meeting:{userId:a}}=s;if(t&&t!==a)return IN(t,!1,e.store,r);{const{audio:{isSharingAudio:e,isShareAudioEnabled:t,isShareAudioMuted:n},share:{status:u}}=s;if(!t)return Promise.reject({type:Je,reason:"Cannot unmute sharing audio when sharing audio is not enable",errorCode:Na.AUDIO_NOT_STARTED});if(!1===n)return Promise.resolve("");{o.muteShareAudio(!1);let t=Promise.resolve();return!1===e&&u===q.Sharing&&(t=PI(r,o,s).then((e=>{e.forEach((e=>i(e)))}))),DI(r,a,!1,s),Promise.all([Ka({event:wo,operations:[co((e=>void 0!==e.bShareAudioOn)),go(1)]},(e=>!0===e.bShareAudioOn)),t]).then((()=>(i(iI(!1)),!1===e&&u===q.Sharing&&(i(sI(!0)),Ga(Ui,{state:"on"})),"")))}}})(this[i],e)}subscribeAudioStatisticData(e){return(async(e,t)=>{const{mediaAgent:r,store:{getState:o}}=e,n=o(),i=Ru(n),s=!t||t.decode,a=!t||t.encode;if(!i)return Promise.reject({type:Je,reason:"Call this function after the 'join' method resolved.",errorCode:Na.STREAM_SESSION_JOIN_REQUIRED});{const{encodeInitStatus:e,decodeInitStatus:t}=HI(n,i);Md("audio",e,t).subscribe((([e,t])=>{e&&t&&(s&&r.subscribeToQos([ju.AudioDecode],ne),a&&r.subscribeToQos([ju.AudioEncode],ne))}))}return""})(this[i],e)}unsubscribeAudioStatisticData(e){return(async(e,t)=>{const{mediaAgent:r,store:{dispatch:o}}=e,n=!t||t.decode,i=!t||t.encode;return n&&(r.unsubscribeFromQos([ju.AudioDecode]),o(aI(le))),i&&(r.unsubscribeFromQos([ju.AudioEncode]),o(uI(le))),null})(this[i],e)}enableBackgroundNoiseSuppression(e){return((e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,{audio:{isBackgroundNoiseSuppression:i,originalSound:s,isWebRtcAudioCapable:a},meeting:{mediaFeatureOptions:u}}=o();let d=t;return d===!!i||(d&&!UI(u||"",a)?(console.warn("Background noise suppression requires SharedArrayBuffer and is only supported on desktop browser"),d=!1):(d&&s&&(console.warn("Enabling noise suppression will disable original sound."),n(II(!1))),n(mI(d)),r.changeAudioProfile(OI(o())))),Promise.resolve("")})(this[i],e)}enableSyncButtonsOnHeadset(e){return((e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,i=o(),{audio:{isHIDEnabled:s,microphoneDevicesList:a,activeMicrophone:u}}=i;if(t===!!s)return Promise.resolve("");{const e=Ru(i);var d;return e?(t&&!BI()?console.warn("Sync buttons on headset is not supported on the current platform"):(r.enableSyncButtonsOnHeadset(t,null===(d=a.find((e=>e.deviceId===u)))||void 0===d?void 0:d.label,e.muted),n(gI(t))),Promise.resolve("")):Promise.reject({type:Je,reason:"Please call `enableSyncButtonsOnHeadset` method after the `join` has been resolved",errorCode:Na.STREAM_SESSION_JOIN_REQUIRED})}})(this[i],e)}enableOriginalSound(e){return((e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,{audio:{isBackgroundNoiseSuppression:i,originalSound:s}}=o(),a=t;return a===s||"object"==typeof t&&yd(t,s)||("object"!=typeof a||!0!==(null==a?void 0:a.stereo)||VI()||(console.warn("Cannot enable stereo audio on current platform due to the browser limitation"),a.stereo=!1),i&&a&&(console.warn("Enabling original sound will disable background noise suppression."),n(mI(!1))),n(II(a)),r.changeAudioProfile(OI(o()))),Promise.resolve("")})(this[i],e)}callCRCDevice(e,t){return((e,t,r)=>{const{rwgAgent:o,store:{dispatch:n,getState:i}}=e,{seq:s}=o.inviteCRCDevice(t,r);return n(CI({sequence:s,ip:t,protocol:r})),qa(qi.crcCallOut).then((()=>{var e;const{audio:{crcDevice:o}}=i();return null===(e=o.find((e=>e.ip===t&&e.protocol===r&&e.sequence===s)))||void 0===e?void 0:e.uuid}))})(this[i],e,t)}cancelCallCRCDevice(e,t){return((e,t,r)=>{const{rwgAgent:o,store:{getState:n}}=e,{audio:{crcDevice:i}}=n(),s=i.find((e=>e.ip===t&&e.protocol===r));return s&&s.returnCode===Ne.Ringing?(o.cancelInviteCRCDevice(s.transId),Promise.resolve("")):Promise.reject({type:Je,reason:"Cannot cancel call out ",errorCode:Na.CRC_NOT_CONNECTED})})(this[i],e,t)}muteAllAudio(){return(e=>{const{rwgAgent:t}=e;return t.audioMuteAll(!0),Jd("bMutedAll",!0)})(this[i])}unmuteAllAudio(){return(e=>{const{rwgAgent:t}=e;return t.audioMuteAll(!1),Jd("bMutedAll",!1)})(this[i])}muteAudioUponEntry(e=!0){return((e,t=!0)=>{const{store:{getState:r},rwgAgent:o}=e,{audio:{bMutedUponEntry:n}}=r();return n===t?Promise.resolve(""):(o.setMuteOnEntry(t),Jd("bMutedUponEntry",t))})(this[i],e)}allowUnmuteAudioThemselves(e=!0){return((e,t=!0)=>{const{store:{getState:r},rwgAgent:o}=e,{audio:{bCanUnmute:n}}=r();return n===t?Promise.resolve(""):(o.allowUnmuteAudio(t),Jd("bCanUnmute",t))})(this[i],e)}getMicList(){return(({store:{getState:e}})=>{const t=e();return t.audio?[...t.audio.microphoneDevicesList]:[]})(this[i])}getSpeakerList(){return(({store:{getState:e}})=>{const t=e();return t.audio?[...t.audio.speakerDevicesList]:[]})(this[i])}getAudioState(e){return(({store:{getState:e}},t)=>{const r=e(),{meeting:{isWebinar:o}}=r;let n=null;return null==t?n=Ru(r):(n=r.participants.attendeesList.find((e=>e.userId===t)),o&&!n&&(n=r.participants.xmppAttendeeList.find((e=>e.userId===t)))),n?n.audio:null})(this[i],e)}isAudioMuted(e){return(({store:{getState:e}},t)=>{const r=e(),{meeting:{isWebinar:o}}=r;let n=null;return void 0===t?n=Ru(r):(n=r.participants.attendeesList.find((e=>e.userId===t)),o&&!n&&(n=r.participants.xmppAttendeeList.find((e=>e.userId===t)))),!!n&&!!n.muted})(this[i],e)}getActiveMicrophone(){return(({store:{getState:e}})=>{const t=e();return t.audio?t.audio.activeMicrophone:null})(this[i])}getActiveSpeaker(){return(({store:{getState:e}})=>{const t=e();return t.audio?t.audio.activeSpeaker:null})(this[i])}isSupportCallOut(){return(({store:{getState:e}})=>{const{meeting:{isSupportCallOut:t,callOutCountry:r}}=e();return t&&Array.isArray(r)&&(null==r?void 0:r.length)>0})(this[i])}getDialOutStatus(){return(({store:{getState:e}})=>{const{audio:t}=e();return null==t?void 0:t.dialout[t.dialout.length-1].returnCode})(this[i])}getDialOutCountries(){return(({store:{getState:e}})=>{const{meeting:{callOutCountry:t}}=e();return Array.isArray(t)?t:[]})(this[i])}getShareAudioStatus(){return(({store:{getState:e}})=>{const{audio:{isShareAudioEnabled:t,isShareAudioMuted:r,isSharingAudio:o}}=e();return{isShareAudioEnabled:t,isShareAudioMuted:r,isSharingAudio:o}})(this[i])}isOthersShareAudioMutedLocally(e){return(({store:{getState:e}},t)=>{var r;const{audio:{localShareAudioUserMutedList:o}}=e();return null===(r=o.find((e=>e.userId===t)))||void 0===r?void 0:r.muted})(this[i],e)}getAudioStatisticData(){return(({store:{getState:e}})=>{const{audio:{statistic:t}}=e();return{...t}})(this[i])}getDialInInfo(){return(({store:{getState:e}})=>{const{meeting:{meetingNumber:t,tollNumbers:r,participantID:o,h323Password:n}}=e();return void 0===r?null:{meetingId:t,participantId:o,password:n||"",tollNumbers:r.map((e=>({...e})))}})(this[i])}isSupportMicrophoneAndShareAudioSimultaneously(){return function(e){const{store:{getState:t}}=e,r=t(),{meeting:{mediaFeatureOptions:o}}=r;return Fu.isSupportOpenMicWhenShareAudio(o||"")}(this[i])}getAudioMediaPlaybackController(){return(({store:{getState:e},mediaAgent:t})=>{const r=e(),{audio:{isUsingMediaPlayback:o}}=r;if(o){const{audioElement:e}=hm.getInstance();return Qd(e,"audio",r,t)}return null})(this[i])}isAllowToUnmute(){return(({store:{getState:e}})=>{const t=e();return!!t.audio&&!!t.audio.bCanUnmute})(this[i])}getSessionSIPAddress(){return(e=>{const{store:{getState:t}}=e,{meeting:{sipDomain:r,h323Password:o,meetingNumber:n}}=t();return r?`${n}.${null!=o?o:""}@${r}`:null})(this[i])}startVideo(e){return((e,t)=>{var r;const{store:{getState:o,dispatch:n},mediaAgent:i}=e,s=o(),{media:{videoDecodeStatus:a,videoEncodeStatus:u,enforceVirtualBackground:d},video:{isCaptureCameraLoading:l,isCurrentUserStartedVideo:p,isVideoMuted:h,backgroundMode:m},meeting:{isUseWBVideo:g}}=s,S=t?{...t}:void 0;if(p)return Promise.reject({type:Je,reason:"Video is started",errorCode:Na.VIDEO_MISMATCH_STATE});if(l)return Promise.reject({type:Je,reason:"Camera is starting,please wait.",errorCode:Na.VIDEO_CAPTURE_LOADING});if(h&&!Ou(s))return Promise.reject({type:Je,reason:"Video is muted by the host",errorCode:Na.VIDEO_MUTED_BY_HOST});if(bm(g))if(c(null==S?void 0:S.videoElement))console.warn('The "videoElement" option will be removed in version 2.x. Please use the "attachVideo" or "renderVideo" method to render the self-view.');else{console.warn('Rendering self-view on Chromium browser, Android browser without SharedArrayBuffer or iOS browser requires video tag, Please use "attachVideo" or pass a video element instead of a canvas element in the "renderVideo" method');let e=document.body.querySelector(`#${ce}`);if(!e){e=document.createElement("video");const t=T.isSafari||T.isIOSMobile?"position:fixed;top:-10000px;left:-10000px":"display:none";e.setAttribute("style",t),e.muted=!0,e.playsInline=!0,e.autoplay=!0,e.id=ce,document.body.appendChild(e)}S&&Object.assign(S,{videoElement:e})}return!Wd(d,g)&&null!=S&&S.virtualBackground?Promise.reject({type:et,reason:"Virtual background only compatible with Chrome and Edge with SharedArrayBuffer enabled.",errorCode:Na.VIDEO_VB_UNSUPPORTED}):m===ye.VideoProcessor&&null!=S&&S.virtualBackground&&null!=S&&null!==(r=S.virtualBackground)&&void 0!==r&&r.imageUrl?Promise.reject({type:Je,reason:"Cannot start capture video with virtual background when video processor is enabled",errorCode:Na.VIDEO_VB_PROCESSOR_CONFLICT}):(n(nl(!0)),Md("video",u,a).subscribe((([e])=>{if(e){const e=o(),{video:{activeCamera:t,isSupportHDVideo:r,virtualBackground:{imageSrc:s},mask:{imageSrc:a},isMirrored:u,hardwareAcceleration:d}}=e,{cameraId:c=t,captureWidth:l=0,captureHeight:p=0,mirrored:h,hd:m,fullHd:g,virtualBackground:v,mask:f}=S||{};Tm(null!=h?h:u,i,e),(m||g)&&(r&&!1!==d.encode&&Fu.isCompatibleHardwareForEncode()&&Fu.isSupportVideoEncodeHardwareAcceleration().then((e=>{e&&(i.enableHardwareAccelerationForVideoEncode(!0),n(_l({encode:e})))})),r||console.warn("Cannot capture HD video due to either account restriction and/or hardware limitation"));const y=v||void 0===v&&!!s&&void 0===f,E=f||void 0===f&&!!a;let _=Promise.resolve({});if(y){const t=v||{imageUrl:void 0,cropped:void 0};_=Lm({...t,captureWidth:l,captureHeight:p,cameraId:c,hd:m},i,e).then((()=>t))}else if(E){const t=f||{imageUrl:void 0,cropped:void 0,clip:void 0,rootWidth:void 0,rootHeight:void 0};t.rootWidth||Object.assign(t,{rootWidth:1280}),t.rootHeight||Object.assign(t,{rootHeight:720}),_=km({...t,captureWidth:l,captureHeight:p,cameraId:c,hd:m},i,e).then((()=>t))}null!=S&&S.mediaFile&&!Fu.isSupportMediaPlaybackAsVideoInput()&&(console.warn("Cannot use media file as video input due to the browser limitation."),Object.assign(S,{mediaFile:void 0})),_.then((e=>Ld("video",o()).then((()=>e)))).then((t=>{ym(i,e,S).forEach((e=>{n(e)})),y?n(fl(t)):E&&n(kl(t))})).catch((e=>{n(nl(!1)),Ga(Fn,{...null!=e?e:{}})}))}else n(nl(!1))})),qa(mi.startCaptureVideo).then((()=>{n(il(!1)),n(tl(!1))})).catch((e=>Promise.reject(Cm(e)))).finally((()=>{n(nl(!1))})))})(this[i],e)}stopVideo(){return(e=>{const{store:{getState:t},mediaAgent:r}=e,{video:{isCaptureCameraLoading:o,isCurrentUserStartedVideo:n,isUsingMediaPlayback:i}}=t();return o?Promise.reject({type:Je,reason:"Camera is starting,please wait.",errorCode:Na.VIDEO_CAPTURE_LOADING}):n?(r.stopCaptureVideo(),i&&hm.getInstance().stopVideoElement(),Ka($n,(e=>!0!==(null==e?void 0:e.failed)))):Promise.reject({type:Je,reason:"camera is closed",errorCode:Na.VIDEO_MISMATCH_STATE})})(this[i])}switchCamera(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{video:{cameraDevicesList:s,isCurrentUserStartedVideo:a,virtualBackground:u,mask:d,mediaPlaybackFile:c,isUsingMediaPlayback:l,customizedVideoOption:p,activeCamera:h}}=i;if("string"==typeof t&&!vm(t,s))return Promise.reject({type:et,reason:"Cannot find cameraDeviceId in camera devices list.",errorCode:Na.STREAM_MISMATCH_DEVICE});const m=h===t;if(a||null!=u&&u.isVBConfigured||d.isMaskConfigured){if("string"==typeof t){const{captureWidth:e,captureHeight:r}=Sm(p);n.changeCamera(t,oe.includes(t),{width:e,height:r},m),o(Bl(void 0)),hm.getInstance().stopVideoElement()}else if(t&&(!l||(null==c?void 0:c.url)!==t.url)){const e=hm.getInstance();e.setVideoElement(t).then((()=>{n.changeCamera(e.videoElement),o(Bl(t))}))}return null!=p&&p.customVideoConstraints&&!m&&o(Zl()),qa(mi.switchCameraVideo).then((()=>{o(il(!1)),o(tl(!1))})).catch((e=>(n.stopCaptureVideo(),Promise.reject(Cm(e)))))}return"string"==typeof t&&o(Zc(t)),Promise.resolve()})(this[i],e)}createProcessor(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{media:{videoEncodeStatus:s,audioEncodeStatus:a,sharingEncodeStatus:u},processor:{processorCreatedList:d},meeting:{mediaFeatureOptions:c}}=i,{type:l,name:p}=t;if(!(l in DN)||!DN[l].detectAction(c||""))throw{type:Je,reason:`Your browser does not support ${l} processor.`,errorCode:DN[l].errorCode.unsupported};if(d.some((({name:e,type:t})=>e===p&&t===l)))throw{type:et,reason:"You have already created this Processor",errorCode:DN[l].errorCode.duplicateCreate};const h={video:s,audio:a,share:u}[l],m=await Mr(Md(l,h,"success").pipe(bo((([e])=>{if(e)return lo(Cr(n.addProcessor(t)).pipe(Vr((e=>({result:e})))),oo(1e4).pipe(Vr((()=>{throw{type:Ye,errorCode:Na.OPERATION_TIMEOUT}}))));throw{type:Qe,reason:`${r=l,Mh(vh(r).toLowerCase())} encode status is failed`,errorCode:Na.INTERNAL_ERROR};var r})),po((e=>{if(null!=e&&e.type)throw e;throw{type:Qe,reason:"An error occurred while creating a Processor.",errorCode:Na.INTERNAL_ERROR}}))));if(!m.result)throw{type:Qe,reason:"An error occurred while creating a Processor.",errorCode:Na.INTERNAL_ERROR};return o(mT(t)),m.result})(this[i],e)}addProcessor(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{processor:{processorCreatedList:s,processorInstanceList:a},video:{backgroundMode:u,mask:d,virtualBackground:c}}=i,{name:l,type:p}=t,h=["video","share"].includes(p);if(!s.some((({name:e,type:t})=>e===l&&t===p)))throw{type:et,reason:"Processor not found.",errorCode:DN[p].errorCode.mismatchProcessor};if(a.some((({type:e,name:t})=>e===p&&(h||l===t))))throw{type:Je,reason:h?`Currently we only support using one ${p} processor at a time.`:"Cannot add this processor again.",errorCode:DN[p].errorCode.limitExceed};if("video"===p){if((u===ye.VirtualBackground||u===ye.Mask)&&(d.imageSrc||c.imageSrc))throw{type:Je,reason:"Cannot use video processor when virtual background or mask is enabled",errorCode:Na.VIDEO_VB_PROCESSOR_CONFLICT};o(Ll(ye.VideoProcessor))}return await n.startProcessor(t),o(gT({name:l,type:p})),""})(this[i],e)}removeProcessor(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{processor:{processorInstanceList:s}}=i,{name:a,type:u}=t;if(!s.some((({name:e,type:t})=>e===a&&t===u)))throw{type:et,reason:"Processor not found.",errorCode:DN[u].errorCode.mismatchProcessor};return await n.stopProcessor(t),o(ST({name:a,type:u})),"video"===u&&o(Ll(ye.Null)),""})(this[i],e)}renderVideo(e,t,r,o,n,s,a,u,d){return ON(this[i],e,t,r,o,n,s,a,u,d)}stopRenderVideo(e,t,r,o,n=!1,s){return((e,t,r,o,n,i=!1,s)=>{const{store:{getState:a,dispatch:u},mediaAgent:d}=e,l=a(),{video:{subscribedVideoList:p,renderedVideoList:h},meeting:{userId:m}}=l;if(p.includes(r)){const e=o||ae;if(bm()&&r===m&&c(t))return t.pause(),u(dl(r)),u(Jl(t.id)),Promise.resolve("");if(h.find((o=>o.userId===r&&o.key===e&&o.canvasId===t.id))&&(d.stopRenderVideo(t.id,r,e,gm(n),i),1==h.filter((e=>e.userId===r)).length&&(r!==m&&d.unsubscribeVideo(r),u(dl(r))),u(hl({userId:r,key:e,canvasId:t.id}))),s&&m!==s){const{video:{subscribedVideoList:e,prefetchedVideo:t}}=a();TN(l).find((e=>e.userId===s))&&!e.includes(s)&&(null==t?void 0:t.userId)!==s&&u(Hl({userId:s,lastCopy:t}))}}return Promise.resolve("")})(this[i],e,t,r,o,n,s)}updateVideoCanvasDimension(e,t,r){return((e,t,r,o)=>{const{mediaAgent:n}=e;return r>=0&&o>=0&&n.updateRenderedVideoCanvasDimension(t,r,o),Promise.resolve("")})(this[i],e,t,r)}adjustRenderedVideoPosition(e,t,r,o,n,s,a){return((e,t,r,o,n,i,s,a)=>{const{store:{getState:u,dispatch:d},mediaAgent:l}=e,{video:{subscribedVideoList:p}}=u();if(p.includes(r)){if(c(t))return Promise.resolve("");const e=a||ae;l.adjustRenderedVideoPosition(t.id,r,e,i,s,o,n,gm("#000")),d(pl({userId:r,key:e,canvasId:t.id,aspectRatio:n?o/n:0}))}else console.warn("Cannot adjust the size or position of the video as the video has not been rendered yet.");return Promise.resolve("")})(this[i],e,t,r,o,n,s,a)}clearVideoCanvas(e,t){return((e,t,r)=>{const{mediaAgent:o}=e;return o.clearVideoCanvas(t.id,gm(r)),Promise.resolve("")})(this[i],e,t)}mirrorVideo(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{video:{isCurrentUserStartedVideo:s,virtualBackground:a,isMirrored:u}}=i;return u===t||((s||null!=a&&a.isVBConfigured)&&Tm(t,n,i),o(ql(t))),Promise.resolve("")})(this[i],e)}enableHardwareAcceleration(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{video:{isSupportHDVideo:i}}=r(),s=[];if("boolean"==typeof t||void 0!==t.decode){const e="boolean"==typeof t?t:!!t.decode;e?s.push(Fu.isSupportVideoDecodeHardwareAcceleration().then((e=>(e&&n.enableHardwareAccelerationForVideoDecode(e),o(_l({decode:e})),e)))):(n.enableHardwareAccelerationForVideoDecode(e),o(_l({decode:e})),s.push(!0))}if("boolean"==typeof t||void 0!==t.encode){const e="boolean"==typeof t?t:!!t.encode;i?e?Fu.isCompatibleHardwareForEncode()?s.push(Fu.isSupportVideoEncodeHardwareAcceleration().then((e=>(e&&n.enableHardwareAccelerationForVideoEncode(e),o(_l({encode:e})),e)))):(console.warn("Can not turn on hardware acceleration with your graphic card due to the technical limitation"),s.push(!1)):(n.enableHardwareAccelerationForVideoEncode(!1),o(_l({encode:!1})),s.push(!0)):"boolean"!=typeof t&&null!=t&&t.encode&&(console.warn("Can not use the hardware acceleration for video encoding due to the account restriction"),s.push(!1))}return Promise.all(s).then((e=>e.every((e=>!!e))))})(this[i],e)}subscribeVideoStatisticData(e){return(async(e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,{media:{videoDecodeStatus:i,videoEncodeStatus:s},video:{subscriptionStatus:a}}=o(),u=!t||t.decode,d=!t||t.encode;return Md("video",s,i).subscribe((([e,o])=>{const i={};u&&o&&!a.decode&&(r.subscribeToQos([ju.VideoDecode],ne),Object.assign(i,{decode:!0})),d&&e&&!a.encode&&(r.subscribeToQos([ju.VideoEncode],ne),Object.assign(i,{encode:!0})),null!=t&&t.detailed&&o&&!a.detailed&&(r.enableVideoObserver(!0),Object.assign(i,{detailed:!0})),n(jl(i))})),null})(this[i],e)}unsubscribeVideoStatisticData(e){return(async(e,t)=>{const{mediaAgent:r,store:{dispatch:o}}=e,n=!t||t.decode,i=!t||t.encode,s={};return n&&(r.unsubscribeFromQos([ju.VideoDecode]),o(yl(pe)),Object.assign(s,{decode:!1})),i&&(r.unsubscribeFromQos([ju.VideoEncode]),o(El(pe)),Object.assign(s,{encode:!1})),null!=t&&t.detailed&&(r.enableVideoObserver(!1),Object.assign(s,{detailed:!1})),o(jl(s)),null})(this[i],e)}previewVirtualBackground(e,t,r,o){return((e,t,r,o,n)=>{const{store:{getState:i,dispatch:s},mediaAgent:a}=e,u=i();return Lm({imageUrl:r,cropped:o,cameraId:n},a,u,t).then((e=>("object"==typeof e&&null!=e&&e.type&&s(e),s(fl({imageUrl:r,cropped:o})),!0))).catch((e=>Promise.reject({type:Je,...null!=e?e:{}})))})(this[i],e,t,r,o)}updateVirtualBackgroundImage(e,t){return((e,t,r)=>{const{store:{getState:o,dispatch:n},mediaAgent:i}=e,s=o(),{video:{virtualBackground:{imageSrc:a,cropped:u},backgroundMode:d}}=s;return t===a&&r===u?Promise.resolve(!0):d===ye.Mask||d===ye.VideoProcessor?Promise.reject({type:Je,reason:`Cannot update virtual background in the ${d===ye.Mask?"mask":"video processor"} mode`,errorCode:Na.VIDEO_VB_PROCESSOR_CONFLICT}):Lm({imageUrl:t,cropped:r},i,s).then((e=>("object"==typeof e&&null!=e&&e.type&&n(e),n(fl({imageUrl:t,cropped:r})),!0))).catch((e=>Promise.reject({type:Je,...null!=e?e:{}})))})(this[i],e,t)}stopPreviewVirtualBackground(){return(e=>{const{store:{getState:t},mediaAgent:r}=e,{video:{virtualBackground:{isVBConfigured:o}}}=t();return o?(r.stopVirtualBackgroundSetting(),Promise.resolve(!0)):Promise.reject({type:Je,reason:"Cannot stop preview virtual background before start",errorCode:Na.VIDEO_VB_MISMATCH_STATE})})(this[i])}previewVideoMask(e,t){return((e,t,r)=>{const{store:{getState:o,dispatch:n},mediaAgent:i}=e,s=o();return r.rootWidth&&r.rootHeight||Object.assign(r,{rootWidth:t.width,rootHeight:t.height}),km(r,i,s,t).then((e=>("object"==typeof e&&null!=e&&e.type&&n(e),n(kl(r)),!0))).catch((e=>Promise.reject({type:Je,...null!=e?e:{}})))})(this[i],e,t)}updateVideoMask(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{video:{mask:s,backgroundMode:a}}=i,{isMaskConfigured:u}=s;if(a===ye.VirtualBackground||a===ye.VideoProcessor)return Promise.reject({type:Je,reason:`Cannot update mask in the ${a===ye.VirtualBackground?"virtual background":"video processor"} mode`,errorCode:Na.VIDEO_MASK_PROCESSOR_CONFLICT});if(u){const e={...t};return["imageUrl","cropped","clip","rootHeight","rootWidth"].forEach((r=>{void 0===(null==t?void 0:t[r])&&("imageUrl"===r?Object.assign(e,{imageUrl:s.imageSrc}):Object.assign(e,{[`${r}`]:s[r]}))})),km(e,n,i).then((t=>("object"==typeof t&&null!=t&&t.type&&o(t),o(kl(e)),!0))).catch((e=>Promise.reject({type:Je,...null!=e?e:{}})))}return Promise.reject({type:Je,reason:"Cannot update mask",errorCode:Na.VIDEO_MASK_IMAGE_INACCESSIBLE})})(this[i],e)}stopPreviewVideoMask(){return(e=>{const{store:{getState:t},mediaAgent:r}=e,{video:{mask:{isMaskConfigured:o}}}=t();return o?(r.stopMaskSetting(),Promise.resolve(!0)):Promise.reject({type:Je,reason:"Cannot stop preview mask before start",errorCode:Na.VIDEO_MASK_IMAGE_INACCESSIBLE})})(this[i])}requestFarEndCameraControl(e){return((e,t)=>{const{store:{getState:r},rwgAgent:o}=e,n=r(),{meeting:{userId:i},video:{farEndCameraControlStatus:{controlledUserList:s}}}=n;return i===t?Promise.reject({type:Je,reason:'Using "stream.controlCamera" method to control self camera',errorCode:Na.FAR_END_CAMERA_CONTROL_MISMATCH_STATE}):-1===TN(n).findIndex((e=>e.userId===t))?Promise.reject({type:et,reason:"Cannot request control camera with video off",errorCode:Na.FAR_END_CAMERA_CONTROL_MISMATCH_STATE}):-1!==RN(n).findIndex((e=>e.userId===t))?(s.includes(t)||o.sendFarEndCameraControl(he.Request,t),Promise.resolve("")):Promise.reject({type:Je,reason:"The far end camera does not support PTZ",errorCode:Na.FAR_END_CAMERA_CONTROL_DEVICE_UNSUPPORTED})})(this[i],e)}approveFarEndCameraControl(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n}=e,{video:{currentCameraControlStatus:{isRequested:i,isInControl:s,controllingUserId:a},ptz:u,activeCamera:d}}=r();if(i){if(s&&(!a||t===a))return Promise.resolve("");n.sendFarEndCameraControl(he.Approve,t);const e=null==u?void 0:u[d];return void 0!==e&&n.sendCameraAblity({pan:!!e.pan,tilt:!!e.tilt,zoom:!!e.zoom}),o(Cl(!1)),o(Tl({isInControl:!0,userId:t})),Ga(oi,{isControlled:!0,userId:t}),Promise.resolve("")}return Promise.reject({type:Je,reason:"Cannot approve before request",errorCode:Na.FAR_END_CAMERA_CONTROL_MISMATCH_STATE})})(this[i],e)}declineFarEndCameraControl(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n}=e,{video:{currentCameraControlStatus:{isInControl:i,isRequested:s}}}=r();return s||i?(n.sendFarEndCameraControl(he.Decline,t),o(Cl(!1)),o(Tl({isInControl:!1,userId:0})),Ga(oi,{isControlled:!1}),Promise.resolve("")):Promise.reject({type:Je,reason:"Cannot decline before request",errorCode:Na.FAR_END_CAMERA_CONTROL_MISMATCH_STATE})})(this[i],e)}giveUpFarEndCameraControl(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n}=e,{video:{farEndCameraControlStatus:{controlledUserList:i}}}=r();return i.includes(t)?(n.sendFarEndCameraControl(he.GiveUp,t),o(Ol(t)),Promise.resolve("")):Promise.reject({type:Je,reason:"Cannot give up control befire aquired",errorCode:Na.FAR_END_CAMERA_CONTROL_MISMATCH_STATE})})(this[i],e)}controlCamera(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{video:{isCurrentUserStartedVideo:i,ptz:s,activeCamera:a}}=r();if(i){const{cmd:e,range:r,reset:i}=t,u=s[a];if(u){const t=Im(u)||{},{key:s,range:d}=_m(e,r);if(u[s])return Object.assign(t,{[s]:i?0:Em(u[s].capability,u[s].value,d)}),n.movePTZCamera(t).then((()=>{o(wl({constraints:t,deviceId:a}))})).catch((e=>Promise.reject({type:Qe,reason:e,errorCode:Na.INTERNAL_ERROR})))}return Promise.resolve("")}return Promise.reject({type:Je,reason:"Cannot control the camera before it's started",errorCode:Na.FAR_END_CAMERA_CONTROL_MISMATCH_STATE})})(this[i],e)}controlFarEndCamera(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n}=e,i=r(),{video:{farEndCameraControlStatus:{controlledUserList:s,isControlling:a}}}=i,{userId:u,cmd:d,range:c}=t;if(a)return Promise.reject({type:Je,reason:"Cannot send new command while the previous control is not done",errorCode:Na.FAR_END_CAMERA_RATE_LIMIT});if(s.includes(u)){if(d===me.SwitchCamera)return n.sendFarEndCameraControl(he.SwitchCamera,u,me.SwitchCamera),Promise.resolve("");{const e=RN(i).find((e=>e.userId===u));if(null==e||!e.nFECC)return Promise.reject({type:Je,reason:"The far end camera does not support PTZ",errorCode:Na.FAR_END_CAMERA_CONTROL_DEVICE_UNSUPPORTED});if(c&&c>0){const e=c/100*1e4;return n.sendFarEndCameraControl(he.StartControl,u,d),o(Nl(!0)),no(200).pipe(Co(oo(e-100).pipe(go(1)))).subscribe((()=>{n.sendFarEndCameraControl(he.ContinueControl,u,d)})),Mr(oo(e).pipe(Ro((()=>{n.sendFarEndCameraControl(he.StopControl,u,d),o(Nl(!1))})))).then((()=>""))}return Promise.reject({type:et,reason:"Range cannot be negative or 0",errorCode:Na.FAR_END_CAMERA_INVALID_RANGE})}}return Promise.reject({type:Je,reason:"Cannot control before request granted",errorCode:Na.FAR_END_CAMERA_PERMISSION_REQUIRED})})(this[i],e)}attachVideo(e,t,r){return((e,t,r,o)=>{const{store:{getState:n,dispatch:i},mediaAgent:s}=e,a=n(),{meeting:{userId:u,isUseWBVideo:d},media:{enforceMultipleVideos:c,alternativeNameForVideoPlayer:l,disableRenderLimits:p},video:{videoAttachments:h,subscribedVideoList:m}}=a,g=Fu.getMaxCountRender(d,!!c,p),S=m.filter((e=>e!==u)).length;if(g>1&&t!==u&&!m.includes(t)&&S>=g)return Promise.reject({type:Je,reason:`subscribe video counts greater than maximum size (${g})`,errorCode:Na.VIDEO_RENDER_LIMIT_EXCEED});if(-1===TN(a).findIndex((e=>e.userId===t)))return Promise.reject({type:et,reason:"user is not send video",errorCode:Na.STREAM_MISMATCH_USER});const{media:{videoDecodeStatus:v}}=a;let f;const y=null!=l?l:"video-player";if(o){var E;const[e,r]=oc(o,y);if(!e)return Promise.reject(r);f=r;const n=Number(null!==(E=f.getAttribute("node-id"))&&void 0!==E?E:"0");if(n!==t&&bm()&&[n,t].includes(u)){var _;const e=document.createElement(y);for(const t of f.attributes)e.setAttribute(t.name,t.value);n&&(f.setAttribute("node-id","0"),i(xl({userId:n,element:f}))),null===(_=f.parentElement)||void 0===_||_.replaceChild(e,f),f=e}}else f=document.createElement(y);return Md("video","success",v).subscribe((async([e,o])=>{if(o){const e=h[`${t}`];var n;(null==e?void 0:e.some((e=>dc(e,f))))?f.setAttribute("video-quality",`${r}`):null===(n=f)||void 0===n||n.setAttribute("node-id",`${t}`),i(Wl({userId:t,element:f})),t!==u&&s.subscribeVideo(t,r,!1),m.includes(t)||i(ul(t)),i(pl({userId:t,key:ae,canvasId:de,videoQuality:r,aspectRatio:16/9}))}})),Promise.resolve(f)})(this[i],e,t,r)}detachVideo(e,t){return((e,t,r)=>{const{store:{getState:o,dispatch:n},mediaAgent:i}=e,s=o(),{video:{subscribedVideoList:a,videoAttachments:u},meeting:{userId:d},media:{alternativeNameForVideoPlayer:c}}=s;if(a.includes(t)){let e;const s=null!=c?c:"video-player";if(r){const[t,o]=oc(r,s);e=t?o:void 0}const a=u[`${t}`];let p;if(a&&0!==a.length){var l;if(e)a.find((t=>dc(t,e)))?(p=e,p.setAttribute("node-id","0"),n(xl({userId:t,element:p}))):console.warn(`${r} has not been attached with userID:${t}`);else{const e=ac(a);p=e,e.forEach((e=>{e.setAttribute("node-id","0")})),n(xl({userId:t,element:e}))}const{video:{videoAttachments:s,renderedVideoList:u}}=o();0===(null===(l=s[`${t}`])||void 0===l?void 0:l.length)&&(0===u.filter((e=>e.userId===t&&e.canvasId!==de)).length&&(t!==d&&i.unsubscribeVideo(t),n(dl(t))),n(hl({userId:t,key:ae,canvasId:de})))}else console.warn(`UserId:${t} has not been attached.`);return Promise.resolve(p)}return Promise.resolve(void 0)})(this[i],e,t)}spotlight(e,t){return((e,t,r)=>{const{store:{getState:o},rwgAgent:n}=e,i=o(),{video:{spotlightUserList:s}}=i;return s.includes(t)?Promise.reject({type:et,reason:`userId:${t} has already spotlighted`,errorCode:Na.VIDEO_SPOTLIGHT_MISMATCH_STATE}):-1===TN(i).findIndex((e=>e.userId===t))?Promise.reject({type:et,reason:`userId:${t} has not started video`,errorCode:Na.STREAM_MISMATCH_USER}):(n.spotlightVideo(t,{bReplace:r,bSpotlight:!0,bUnSpotlightAll:!1}),Ka(Gn,(e=>{const{spotlightList:r}=e;return r.includes(t)})))})(this[i],e,t)}removeSpotlight(e){return((e,t)=>{const{store:{getState:r},rwgAgent:o}=e,n=r(),{meeting:{userId:i},video:{spotlightUserList:s}}=n,a=t||i,u=Mu(n);if(!s.includes(a)||-1===u.findIndex((e=>e.userId===a)))return Promise.reject({type:et,reason:`userId:${t} is not spotlighted`,errorCode:Na.VIDEO_SPOTLIGHT_MISMATCH_STATE});const d=Ou(n);if(s.length>1&&a===i&&!d)return Promise.reject({type:Je,reason:"Cannot remove spotlight for self when the host has multiple spotlighted videos",errorCode:Na.VIDEO_SPOTLIGHT_MULTI_CONFLICT});if(a!==i&&!d)return Promise.reject({type:Ze,reason:"only host or co-host can cancel others spotlight",errorCode:Na.CLIENT_HOST_OR_MANAGER_PERMISSION_REQUIRED});o.spotlightVideo(a,{bReplace:!1,bSpotlight:!1,bUnSpotlightAll:!1});const c=a===i&&1===s.length?ci:Gn;return Ka(c,(e=>{const{spotlightList:t}=e;return!t.includes(a)}))})(this[i],e)}removeAllSpotlights(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,{video:{spotlightUserList:o}}=t();return 0===o.length?Promise.resolve(""):(r.spotlightVideo(null,{bUnSpotlightAll:!0}),Ka(Gn,(e=>{const{spotlightList:t}=e;return 0===t.length})))})(this[i])}screenshotVideo(e){return(async(e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,{video:{subscribedVideoList:i,selfPreviewVideoList:s,customizedVideoOption:a}}=o(),u=Ru(o()),d=t===(null==u?void 0:u.userId)&&u.bVideoOn&&(s.length>0||!(null==a||!a.videoElement));if(!i.includes(t)&&!d)return Promise.reject({type:et,reason:"user is not send video",errorCode:Na.STREAM_MISMATCH_USER});try{const e=await r.screenshot(t,"video");return t!==(null==u?void 0:u.userId)&&n(Kc({targetUser:t,userId:null==u?void 0:u.userId,displayName:null==u?void 0:u.displayName})),e}catch(e){return Promise.reject({type:Qe,reason:e,errorCode:Na.INTERNAL_ERROR})}})(this[i],e)}subscribeWebRTCStatsReportData(){return(async e=>{const{mediaAgent:t,store:{getState:r,dispatch:o}}=e,{video:{webrtcStatisticSubscription:n}}=r();return n||(t.subscribeWebRTCStatistics(!0,ne),o(Xl(!0))),""})(this[i])}unsubscribeWebRTCStatsReportData(){return(async e=>{const{mediaAgent:t,store:{getState:r,dispatch:o}}=e,{video:{webrtcStatisticSubscription:n}}=r();return n&&(t.subscribeWebRTCStatistics(!1,ne),o(Xl(!1))),""})(this[i])}subscribeSystemResourceUsage(){return(async e=>{const{mediaAgent:t,store:{dispatch:r}}=e;return t.subscribeToQos([ju.Common],ne),r(jl({common:!0})),""})(this[i])}unsubscribeSystemResourceUsage(){return(async e=>{const{mediaAgent:t,store:{dispatch:r}}=e;return t.unsubscribeFromQos([ju.Common]),r(jl({common:!1})),""})(this[i])}isCapturingVideo(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.video&&r.video.isCurrentUserStartedVideo})(this[i])}isCameraTaken(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.video&&r.video.isCameraTaken})(this[i])}isCaptureForbidden(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.video&&r.video.isCaptureForbidden})(this[i])}getCameraList(){return(e=>{const{store:{getState:t}}=e,r=t();if(!r.video)return[];const{video:{cameraDevicesList:o}}=r;return o.map((e=>Object.assign({},e)))})(this[i])}getActiveCamera(){return(e=>{const{store:{getState:t}}=e,r=t();return r.video?r.video.activeCamera:""})(this[i])}getActiveVideoId(){return(e=>{const{store:{getState:t}}=e,r=t();return r.video?r.video.activeVideoId:0})(this[i])}getVideoMaxQuality(){return(e=>{const{store:{getState:t}}=e,r=t();return r.video?r.video.receivedVideoMaxQuality:K.Video_90P})(this[i])}getReceivedVideoDimension(){return(e=>{const{store:{getState:t}}=e,r=t();return r.video?r.video.receivedVideoDimension:null})(this[i])}getCapturedVideoResolution(){return(e=>{const{store:{getState:t}}=e;return{...t().video.capturedVideoDimension}})(this[i])}isSupportMultipleVideos(){return(e=>{const{store:{getState:t}}=e,{meeting:{isUseWBVideo:r},media:{enforceMultipleVideos:o,disableRenderLimits:n}}=t();return Fu.getMaxCountRender(r,o,n)>1})(this[i])}isSupportHDVideo(){return(e=>{var t;const{store:{getState:r}}=e;return null===(t=r().video)||void 0===t?void 0:t.isSupportHDVideo})(this[i])}getHardwareAccelerationStatus(){return(e=>{var t;const{store:{getState:r}}=e;return null===(t=r().video)||void 0===t?void 0:t.hardwareAcceleration})(this[i])}getVideoStatisticData(){return(({store:{getState:e}})=>{const{video:{statistic:t}}=e();return{...t}})(this[i])}isSupportVirtualBackground(){return(e=>{const{store:{getState:t}}=e,r=t();return Wd(r.media.enforceVirtualBackground,r.meeting.isUseWBVideo)})(this[i])}getVirtualbackgroundStatus(){return(e=>{const{store:{getState:t}}=e;return{...t().video.virtualBackground}})(this[i])}isRenderSelfViewWithVideoElement(){return bm(this[t].getState().meeting.isUseWBVideo)}getNetworkQuality(e){return((e,t)=>{var r;const{store:{getState:o}}=e,n=o(),{video:i,meeting:{userId:s}}=n,a=null!=t?t:s,u=null==i||null===(r=i.networkQuality)||void 0===r?void 0:r[`${a}`];if(u){const e={};return u.uplink&&Object.assign(e,{uplink:u.uplink.level}),u.downlink&&Object.assign(e,{downlink:u.downlink.level}),e}return null})(this[i],e)}getFarEndCameraPTZCapability(e){return((e,t)=>{const{store:{getState:r}}=e,o=RN(r()).find((e=>e.userId===t));return void 0!==(null==o?void 0:o.nFECC)?Am(null==o?void 0:o.nFECC):{pan:!1,tilt:!1,zoom:!1}})(this[i],e)}getCameraPTZCapability(e){return((e,t)=>{const{store:{getState:r}}=e,{video:{ptz:o,activeCamera:n}}=r(),i=o[null!=t?t:n];return{pan:!(null==i||!i.pan),tilt:!(null==i||!i.tilt),zoom:!(null==i||!i.zoom)}})(this[i],e)}isBrowserSupportPTZ(){const{pan:e,tilt:t,zoom:r}=Fu.getPTZCapability();return e||t||r}getVideoMaskStatus(){return(e=>{var t;const{store:{getState:r}}=e,o=r(),{isMaskConfigured:n,imageSrc:i,...s}=(null===(t=o.video)||void 0===t?void 0:t.mask)||{};return{...s,imageUrl:i}})(this[i])}isVideoMirrored(){return(e=>{const{store:{getState:t}}=e,{video:{isMirrored:r}}=t();return r})(this[i])}getSpotlightedUserList(){return(e=>{const{store:{getState:t}}=e,r=t();if(!r.video)return[];const{video:{spotlightUserList:o}}=r;return Mu(r).filter((e=>o.includes(e.userId))).map((e=>CO(e)))})(this[i])}getVideoMediaPlaybackController(){return(({store:{getState:e},mediaAgent:t})=>{const r=e(),{video:{isUsingMediaPlayback:o}}=r;if(o){const{videoElement:e}=hm.getInstance();return Qd(e,"video",r,t)}return null})(this[i])}getMaxRenderableVideos(){return(e=>{const{store:{getState:t}}=e,{meeting:{isUseWBVideo:r},media:{enforceMultipleVideos:o,disableRenderLimits:n}}=t();return Fu.getMaxCountRender(r,o,n)})(this[i])}getWebRTCStatsReportData(){return(({store:{getState:e}})=>{const{video:{webrtcStatistic:t}}=e();return{...t}})(this[i])}startShareView(e,t,r){return(async(e,t,r,o)=>{var n;const{store:{getState:i,dispatch:s},mediaAgent:a,rwgAgent:u}=e;await async function(e,t,r,o){var n,i;const{share:{isReceiveSharing:s,isRemoteSharingActive:a,activeNodeId:u,isSimultaneousShareView:d,status:c,annotationUsers:l,isReceiveSharingFromMainSession:p,ssrc:h},whiteboard:m}=r;if(null!=m&&null!==(n=m.whiteboardSharer)&&void 0!==n&&n.presenterID&&null!=m&&null!==(i=m.whiteboardSharer)&&void 0!==i&&i.dcsID)return Promise.reject(aC(Na.WHITEBOARD_AND_SHARING_CONFLICT));if(d){if(!e)return Promise.reject({type:et,reason:"",errorCode:Na.STREAM_MISMATCH_USER});if(p){if(t!==u)return Promise.reject({type:et,reason:"",errorCode:Na.STREAM_MISMATCH_USER})}else{const e=AC(KE(r),t);if(e)return e}if(s)return Promise.reject({type:Je,reason:"",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE});const n=IC(l,h,o);if(n)return n;await Mr(nc(r))}else{if(!e||t!==u)return Promise.reject({type:et,reason:"",errorCode:Na.STREAM_MISMATCH_USER});if(!a||s||c!==q.End)return Promise.reject({type:Je,reason:"",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE})}return""}(t,r,i(),a);const{share:{renderedEnsuredCanvas:d,isReceiveSharingFromMainSession:c,shareViewAttachments:l},media:{sharingDecodeStatus:p,alternativeNameForVideoPlayer:h}}=i();t.id||(t.id=Id("__ZOOM_SDK_SHARE_CANVAS_@__"));const m=!!o;var g,S;if(g=ac(null!==(n=l[`${r}`])&&void 0!==n?n:[]),S=t.id,!(null==g?void 0:g.find((e=>e.isDummy&&e.canvasId===S)))){const e=lC(r,t.id,null!=h?h:"video-player");e.setAttribute("share-source",c?"main":""),s(VA({userId:r,element:e}))}return Md("sharing","success",p).subscribe((([,e])=>{if(e){let e=t;d.includes(t.id)||(e=Vd(t),s(hA(t.id))),s(JI(!0)),pC(u,i(),r),a.renderSharing(r,e,m,o,c),_C(r,i(),a)}})),"failed"===p?Promise.reject({type:Qe,reason:"",errorCode:Na.INTERNAL_ERROR}):Ka(Zi,(e=>!!e),6e4)})(this[i],e,t,r)}stopShareView(){return(e=>{const{store:{dispatch:t,getState:r},rwgAgent:o,mediaAgent:n}=e,{share:{isReceiveSharing:i,activeNodeId:s,shareViewAttachments:a},breakoutRoom:u}=r();if(!i)return Promise.resolve("");let d=!1;(null==u?void 0:u.currentRoom.status)===Su.InRoom&&u.mainSessionAttendeeList.length>0&&(d=u.mainSessionAttendeeList.findIndex((e=>e.userId===s))>-1);const c=a[`${s}`],l=(null==(p=ac(null!=c?c:[]))?void 0:p.filter((e=>e.isDummy)))||[];var p;l&&l.length>0&&t(BA({userId:s,element:l})),n.stopRenderSharing(),o.unsubscribeSharing(s,d);const{share:{shareViewAttachments:h}}=r();return Object.entries(h).every((([,e])=>0===e.length))&&t(JI(!1)),Promise.resolve("")})(this[i])}switchShareView(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n,mediaAgent:i}=e,s=r(),{share:{isReceiveSharing:a,activeNodeId:u,isReceiveSharingFromMainSession:d},breakoutRoom:c}=s;if(!a)return Promise.reject({type:Je,errorCode:Na.SCREEN_SHARE_MISMATCH_STATE});if(!XE(s))return Promise.reject({type:Je,errorCode:Na.SCREEN_SHARE_MISMATCH_STATE,reason:"Cannot use `switchShareView` to switch when using `attachShareView`. Please use the sequence `detachShareView(oldUserId)`  `attachShareView(newUserId)` to perform the switch."});if(t===u)return Promise.resolve("");let l=[];if(l=d?c.mainSessionAttendeeList.filter((e=>e.bShareToBORooms&&e.sharerOn)):KE(s),!(l.findIndex((e=>e.userId===u))>-1))return Promise.reject({type:et,reason:"no matching user id",errorCode:Na.STREAM_MISMATCH_USER});{var p;const e=null!==(p=TC(t,s))&&void 0!==p?p:t,r=DC(u,t,e,{state:s,rwgAgent:n,mediaAgent:i});Array.isArray(r)&&r.length>0&&r.forEach((e=>o(e))),o(KI({bStatus:1,activeNodeID:t,ssrc:e})),Ga(as,{userId:t})}return Promise.resolve("")})(this[i],e)}updateSharingCanvasDimension(e,t){return((e,t,r)=>{const{store:{getState:o},mediaAgent:n}=e,i=o(),{share:{isReceiveSharing:s,isGrabRemoteControl:a,remoteControlViewportDomSelector:u}}=i;if(s&&(n.updateRenderedSharingDimension(t,r),a&&u)){const e=document.querySelector(u);n.updateRemoteControlProperties({dimension:e&&Ud(e)})}return Promise.resolve("")})(this[i],e,t)}startShareScreen(e,t){return AN(this[i],e,t)}startShareCamera(e,t,r){const o={secondaryCameraId:t||"default",optimizedForSharedVideo:!1};return r&&Object.assign(o,{captureWidth:1280,captureHeight:720}),AN(this[i],e,o,!0)}stopShareScreen(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o,mediaAgent:n}=e,{share:{status:i,isCameraFeedSharing:s,isSimultaneousShareView:a},meeting:{userId:u}}=t();return i===q.End?Promise.resolve(""):(o.stopSharing(u),n.stopDesktopSharing(),s&&r(UA(!1)),r(ZI(q.End)),a&&r(kA(!1)),Ka(wo,(e=>!1===e.sharerOn)))})(this[i])}pauseShareScreen(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o,mediaAgent:n}=e,i=t(),{share:{status:s},breakoutRoom:a}=i;if(s===q.Sharing){if(o.pauseSharing(),n.pauseDesktopSharing(),a&&DO(i)){const e=Ru(i);return Promise.resolve("").then((()=>{if(e){const{userId:t,sharerOn:o,bShareAudioOn:n,bVideoShare:i}=e,s={userId:t,sharerOn:o,sharerPause:!0,bShareAudioOn:n,bVideoShare:i};r(Kv({update:[s]})),r(ZI(q.Paused)),Ga(wo,s)}}))}return Ka(wo,(e=>!0===e.sharerPause)).then((()=>(r(ZI(q.Paused)),"")))}return Promise.reject({type:Je,errorCode:Na.SCREEN_SHARE_MISMATCH_STATE})})(this[i])}resumeShareScreen(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o,mediaAgent:n}=e,i=t(),{share:{status:s},breakoutRoom:a}=i;if(s===q.Paused){if(o.resumeSharing(),n.resumeDesktopSharing(),a&&DO(i)){const e=Ru(i);return Promise.resolve("").then((()=>{if(e){const{userId:t,sharerOn:o,bShareAudioOn:n,bVideoShare:i}=e,s={userId:t,sharerOn:o,sharerPause:!1,bShareAudioOn:n,bVideoShare:i};r(Kv({update:[s]})),r(ZI(q.Sharing)),Ga(wo,s)}}))}return Ka(wo,(e=>!0===e.sharerOn&&!1===e.sharerPause)).then((()=>(r(ZI(q.Sharing)),"")))}return Promise.reject({type:Je,errorCode:Na.SCREEN_SHARE_MISMATCH_STATE})})(this[i])}setSharePrivilege(e){return bN(this[i],e)}lockShare(e){return((e,t)=>bN(e,t?z.OnlyHost:z.HostGrab))(this[i],e)}shareToBreakoutRoom(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o,mediaAgent:n}=e,{meeting:{userId:i},breakoutRoom:s,share:{isSharingToBreakoutRoom:a,status:u}}=t();return u===q.End?Promise.reject({type:Je,reason:"Invalid sharing status",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE}):a?Promise.resolve(""):s.currentRoom.status===Su.InRoom?Promise.reject({type:Je,reason:"Unable to share screen to breakout room when in the room",errorCode:Na.SCREEN_SHARE_SUBSESSION_CONFLICT}):(o.startShareToBreakoutRoom(i),r(iA(!0)),n.enableShareAudioToBreakoutRoom(!0),Promise.resolve(""))})(this[i])}stopShareToBreakoutRoom(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o,mediaAgent:n}=e,{meeting:{userId:i},share:{isSharingToBreakoutRoom:s}}=t();return s&&(o.stopShareToBreakoutRoom(i),r(iA(!1)),n.enableShareAudioToBreakoutRoom(!1)),Promise.resolve("")})(this[i])}muteOthersScreenShare(e){return((e,t)=>{const{store:{getState:r},rwgAgent:o}=e,n=r(),{meeting:{userId:i}}=n,s=KE(n);return t===i?Promise.reject({type:Je,reason:"Cannot mute self share, use 'stopScreenShare' instead",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE}):-1===s.findIndex((e=>e.userId===t))?Promise.reject({type:et,reason:"Target user is not sharing",errorCode:Na.STREAM_MISMATCH_USER}):(o.stopSharing(t),Ka(Mo,(e=>e.some((e=>e.userId===t&&!1===e.sharerOn)))))})(this[i],e)}enableOptimizeForSharedVideo(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n,rwgAgent:i}=e,{share:{status:s,isOptimizedForSharedVideo:a,isSharingToBreakoutRoom:u,sharePrivilege:d,isCameraFeedSharing:c},audio:{isSharingAudio:l},meeting:{userId:p}}=r();return s!==q.End?c?Promise.reject({type:Je,reason:"Cannot enable optimize for shared video during camera sharing.",errorCode:Na.SCREEN_SHARE_OPTIMIZE_VIDEO_UNSUPPORTED}):a===t?Promise.resolve(""):d!==z.MultipleShare?t&&!Fu.isSupportVideoShareSend()?Promise.reject({type:Je,reason:"Cannot enable optimize for shared video due to the platform is not supported ",errorCode:Na.SCREEN_SHARE_OPTIMIZE_VIDEO_UNSUPPORTED}):(i.startSharing(p,{bShareAudio:l,bShareToBO:u,bShareVideo:t}),n.switchSharingMode(t?fe.VideoMode:fe.Normal),Ka({event:wo,operations:[co((e=>void 0!==e.bVideoShare)),go(1)]},(e=>e.bVideoShare===t)).then((()=>(o(dA(t)),"")))):Promise.reject({type:Je,reason:"Cannot enable optimize for shared video when enabling multiple screen shares",errorCode:Na.SCREEN_SHARE_OPTIMIZE_VIDEO_CONFLICT}):Promise.reject({type:Je,reason:"Cannot enable optimize for shared video when screen share is not started",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE})})(this[i],e)}updateSharedVideoQuality(e){return((e,t)=>{const{store:{getState:r,dispatch:o},rwgAgent:n}=e,i=r(),{share:{shareQuality:s,activeNodeId:a,isReceiveSharing:u}}=i,d=JE(i);return u&&0!==a?(d&&s!==t&&(pC(n,i,a,t),o(eA(t))),Promise.resolve("")):Promise.reject({type:Je,reason:"Cannot update shared video quality when screen share is not started",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE})})(this[i],e)}subscribeShareStatisticData(e){return(async(e,t)=>{const{mediaAgent:r,store:{getState:o}}=e,n=o(),{media:{sharingEncodeStatus:i,sharingDecodeStatus:s},share:{isCameraFeedSharing:a}}=o(),u=Ru(n),d=!t||t.decode,c=!t||t.encode;if(!u)return Promise.reject({type:Je,reason:"Call this function after the 'join' method resolved.",errorCode:Na.STREAM_SESSION_JOIN_REQUIRED});{const e=pu(u.userRole)||!T.isSupportSendScreenSharing&&!a?"failed":i;Md("sharing",e,s).subscribe((([e,t])=>{d&&t&&r.subscribeToQos([ju.SharingDecode],ne),c&&e&&r.subscribeToQos([ju.SharingEncode],ne)}))}return""})(this[i],e)}unsubscribeShareStatisticData(e){return(async(e,t)=>{const{mediaAgent:r,store:{dispatch:o}}=e,n=!t||t.decode,i=!t||t.encode;return n&&(r.unsubscribeFromQos([ju.SharingDecode]),o(lA(pe))),i&&(r.unsubscribeFromQos([ju.SharingEncode]),o(lA(pe))),null})(this[i],e)}screenshotSharedContent(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{share:{isReceiveSharing:i,activeNodeId:s,shareViewAttachments:a}}=r();if(!i)return Promise.reject({type:Je,reason:"Cannot take screenshot when screen share is not started",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE});{let i=s;if(t){if(!Object.entries(a).some((([e,r])=>Number(e)===t&&r.length>0)))return Promise.reject({type:et,reason:"User is not in the shared content rendering list",errorCode:Na.STREAM_MISMATCH_USER});i=t}const u=Ru(r());try{const e=await n.screenshot(i,"sharing");return o(zI({targetUser:i,userId:null==u?void 0:u.userId,displayName:null==u?void 0:u.displayName})),e}catch(e){return Promise.reject({type:Qe,errorCode:Na.INTERNAL_ERROR,reason:e})}}})(this[i],e)}attachShareView(e,t){return(async(e,t,r)=>{const{store:{getState:o,dispatch:n},mediaAgent:i,rwgAgent:s}=e;await function(e,t,r){const{share:{isSimultaneousShareView:o,annotationUsers:n,ssrc:i,status:s,isReceiveSharing:a,remoteControlledUserList:u,isReceiveSharingFromMainSession:d,activeNodeId:c},meeting:{userId:l},breakoutRoom:p}=t,h=[];if(d){var m;const e=Ru(t);h.push(...null!==(m=null==p?void 0:p.mainSessionAttendeeList.filter((t=>!t.bid&&!t.bHold&&t.userGUID!==(null==e?void 0:e.userGUID))))&&void 0!==m?m:[])}else{var g,S;h.push(...null!==(g=null===(S=KE(t))||void 0===S?void 0:S.filter((e=>e.userId!==l)))&&void 0!==g?g:[])}if(e!==c){const t=AC(h,e);if(t)return t}if(o){const e=IC(n,i,r);if(e)return e}else if(s!==q.End)return Promise.reject({type:Je,reason:"Screen share is in progress",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE});if(a){if(n.some((e=>e.isInitialized)))return Promise.reject({type:Je,reason:"Cannot attach multiple share views due to annotation is in progress",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE});if(u.length>0)return Promise.reject({type:Je,reason:"Cannot attach multiple share views due to remote control is in progress",errorCode:Na.SCREEN_SHARE_MISMATCH_STATE});const e=YE(t),r=bC();if(e>=r)return Promise.reject({type:Je,reason:`Cannot attach multiple share views exceeding the maximum allowed limit(${r})`,errorCode:Na.SCREEN_SHARE_LIMIT_EXCEED})}return""}(t,o(),i);const a=o(),{media:{sharingDecodeStatus:u,alternativeNameForVideoPlayer:d}}=a,c=null!=d?d:"video-player";let l;if(r){const[e,t]=oc(r,c);if(!e)return Promise.reject(t);l=t}else l=document.createElement(c);return await Mr(Md("sharing","success",u).pipe(Gr((async([,e])=>{if(e){await Nr(nc(o()));const e=o(),{share:{isReceiveSharing:a,shareViewAttachments:u,isReceiveSharingFromMainSession:d}}=e,c=u[`${t}`];var r;l&&c&&c.some((e=>dc(e,l)))?console.warn("Share view already attached"):(l.setAttribute("media-type","share"),l.setAttribute("share-source",d?"main":""),l.setAttribute("node-id",`${t}`)),n(VA({userId:t,element:l})),pC(s,e,t,void 0,a),a||(n(JI(!0)),n(KI({bStatus:1,activeNodeID:t,ssrc:null!==(r=TC(t,e))&&void 0!==r?r:t})),RC(t,{state:e,rwgAgent:s,mediaAgent:i}))}})))),Promise.resolve(l)})(this[i],e,t)}detachShareView(e,t){return(async(e,t,r)=>{const{store:{getState:o,dispatch:n},rwgAgent:i,mediaAgent:s}=e,a=o(),{share:{shareViewAttachments:u},media:{alternativeNameForVideoPlayer:d}}=a;if(u[`${t}`]){var c;const e=OC(t,{state:a,rwgAgent:i,mediaAgent:s});let h;Array.isArray(e)&&e.length>0&&e.forEach((e=>n(e)));const m=null!=d?d:"video-player";if(r){const[e,t]=oc(r,m);h=e?t:void 0}let g;const S=u[`${t}`];h?-1!==S.findIndex((e=>dc(e,h)))?(g=h,g.setAttribute("node-id","0"),n(BA({userId:t,element:g}))):console.warn(`${r} has not been attached with userID:${t}`):(g=[...ac(S).filter((e=>!e.isDummy))],g.forEach((e=>{e.setAttribute("node-id","0")})),n(BA({userId:t,element:g})));const{share:{shareViewAttachments:v},breakoutRoom:f}=o();if(0===(null===(c=v[`${t}`])||void 0===c?void 0:c.length)){let e=!1;(null==f?void 0:f.currentRoom.status)===Su.InRoom&&f.mainSessionAttendeeList.length>0&&(e=f.mainSessionAttendeeList.findIndex((e=>e.userId===t))>-1);const r=Object.entries(v).filter((([,e])=>0!=e.length)).length,o=[0,1].includes(r),s=0===r;if(i.unsubscribeSharing(t,e,!o),s&&n(JI(!1)),1===r){var l;const e=null===(l=Object.entries(v).find((([,e])=>0!==e.length)))||void 0===l?void 0:l[0];if(e){var p;const t=Number(e);n(KI({bStatus:1,activeNodeID:t,ssrc:null!==(p=TC(t,a))&&void 0!==p?p:t}))}}}return Promise.resolve(g)}return Promise.resolve(void 0)})(this[i],e,t)}startAnnotation(){return(async e=>{const{store:{getState:t,dispatch:r},mediaAgent:o}=e,n=t(),{share:{ssrc:i,activeSsrc:s,isReceiveSharing:a,status:u,annotationVanishingToolTimer:d}}=n,c=u!==q.End,l=await async function(e){var t,r;const{share:{ssrc:o,activeSsrc:n,annotationCapability:i,isReceiveSharing:s,status:a,isReceiveSharingFromMainSession:u,annotationUsers:d},whiteboard:c}=e,l=a!==q.End;if(!l&&!s)return Promise.reject({type:Je,reason:"No active share session",errorCode:Na.SCREEN_SHARE_ANNOTATION_NO_ACTIVE_SHARE});if(null!=c&&null!==(t=c.whiteboardSharer)&&void 0!==t&&t.presenterID&&null!=c&&null!==(r=c.whiteboardSharer)&&void 0!==r&&r.dcsID)return Promise.reject(aC(Na.WHITEBOARD_AND_ANNOTATION_CONFLICT));if(0===i||l&&1===i)return Promise.reject({type:Je,reason:"Annotation is not enabled for your account.",errorCode:Na.SCREEN_SHARE_ANNOTATION_ACCOUNT_DISABLE});const p=d.find((e=>e.ssrc===(s?n:o)));if(s){if(u)return Promise.reject({type:Je,reason:"You cannot annotation on share to subsession content.",errorCode:Na.SCREEN_SHARE_ANNOTATION_NOT_SUPPORT});if(null!=p&&p.isDisabled)return Promise.reject({type:Je,reason:"Annotation is disabled for the current share session by sharer.",errorCode:Na.SCREEN_SHARE_ANNOTATION_PRESENTER_DISABLED});if(null!=p&&p.isStarted)return Promise.reject({type:Je,reason:"Annotation is already started",errorCode:Na.SCREEN_SHARE_ANNOTATION_DUPLICATE_START})}else if(l&&null!=p&&p.isStarted)return Promise.reject({type:Je,reason:"Annotation is already started",errorCode:Na.SCREEN_SHARE_ANNOTATION_DUPLICATE_START});return p}(n),p=Ru(n);setTimeout((()=>{a?(o.startViewerAnnotation(i,s,(null==p?void 0:p.displayName)||""),o.annotateAction(He.UPDATE_VANISHING_TOOL_TIME,{displayTime:2e3,outTime:2e3})):c&&(o.startPresenterAnnotation(i,i,(null==p?void 0:p.displayName)||""),o.annotateAction(He.UPDATE_VANISHING_TOOL_TIME,{displayTime:d.displayTime,outTime:d.vanishingTime}))}),0);const h=a?s:i;return null!=l&&l.isInitialized?(r(wA({ssrc:h,isStarted:!0})),Promise.resolve("")):(r(wA({ssrc:h,isInitialized:!0,isStarted:!0})),Ka(_s,(e=>(e&&r(wA({ssrc:h,isInitialized:!1,isStarted:!1})),!e))))})(this[i])}stopAnnotation(){return(e=>{const{store:{getState:t,dispatch:r},mediaAgent:o}=e,{share:{isReceiveSharing:n,activeSsrc:i,ssrc:s,annotationUsers:a}}=t(),u=n?i:s,d=a.find((e=>e.ssrc===u));if(null==d||!d.isInitialized||!d.isStarted)return Promise.reject({type:Je,reason:"Annotation is not started.",errorCode:Na.SCREEN_SHARE_ANNOTATION_NOT_START});r(wA({ssrc:d.ssrc,isStarted:!1}));const c={toolType:Fe.None};return o.annotateAction(He.SELECT_TOOL,c),r(LA(Fe.None)),o.annotateAction(He.CLOSE_TOOL_BAR),Promise.resolve("")})(this[i])}changeAnnotationPrivilege(e){return((e,t)=>{const{store:{getState:r},rwgAgent:o}=e,{meeting:{userId:n}}=r();return o.toggleShareAnnotation(t,n),Ka(Is,(e=>!!e))})(this[i],e)}requestShareCamera(e,t,r){return((e,t,r,o)=>{const{store:{getState:n},rwgAgent:i}=e,{meeting:{userId:s},participants:{attendeesList:a}}=n();if(!(null==a?void 0:a.find((e=>(null==e?void 0:e.userId)===t))))return Promise.reject({type:Je,reason:`Cannot find a user with userId: ${t}`,errorCode:Na.SHARE_CAMERA_MESSAGE_ERROR});if(![re.User,re.Environment].includes(r))return Promise.reject({type:Je,reason:"Invalid share source.",errorCode:Na.SHARE_CAMERA_MESSAGE_ERROR});const u=r===re.User?$e.FrontCamera:$e.RearCamera;return i.requestRemoteShare(s,t,u,o),Promise.resolve("")})(this[i],e,t,r)}approveShareCamera(e,t){return CN(this[i],e,t,0)}declineShareCamera(e,t){return CN(this[i],e,t,1)}informShareCameraStatus(e,t,r){return((e,t,r,o)=>{const{store:{getState:n},rwgAgent:i}=e,{meeting:{userId:s},participants:{attendeesList:a}}=n();return(null==a?void 0:a.find((e=>(null==e?void 0:e.userId)===r)))?[Ge.Success,Ge.Failed].includes(o)?(i.respondStatusToRemoteShareRequest(t,s,r,o),Promise.resolve("")):Promise.reject({type:Je,reason:"Invalid status",errorCode:Na.SHARE_CAMERA_MESSAGE_ERROR}):Promise.reject({type:Je,reason:`Cannot find a user with userId: ${r}`,errorCode:Na.SHARE_CAMERA_MESSAGE_ERROR})})(this[i],e,t,r)}showAnnotatorName(e){return((e,t)=>{const{store:{getState:r},mediaAgent:o}=e,{share:{status:n}}=r();return n!==q.End?(o.annotateAction(He.SHOW_ANNOTATOR_NAME,{toShow:t}),Promise.resolve("")):Promise.reject({type:Je,reason:"Only the share presenter can control the name display during a session session.",errorCode:Na.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER})})(this[i],e)}canDoAnnotation(){return(e=>{var t,r,o;const{store:{getState:n}}=e,{share:{isReceiveSharing:i,activeNodeId:s,status:a,annotationCapability:u,isReceiveSharingFromMainSession:d,isSimultaneousShareView:c,annotationUsers:l},whiteboard:p,meeting:{userId:h}}=n();if(null!=p&&null!==(t=p.whiteboardSharer)&&void 0!==t&&t.presenterID&&null!=p&&null!==(r=p.whiteboardSharer)&&void 0!==r&&r.dcsID)return!1;const m=a!==q.End;if(!m&&!i)return!1;if(0===u||m&&1===u)return!1;const g=i?s:h,S=null!==(o=TC(g,n()))&&void 0!==o?o:g,v=l.find((e=>{var t;return e.ssrc===S||Ed(S,null!==(t=e.userId)&&void 0!==t?t:0)})),f=null==v?void 0:v.isDisabled;return!(i&&(d||f)||c||ZE(n()))})(this[i])}getAnnotationController(){return(e=>({setToolType:t=>((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{share:{annotationToolColor:i,annotationSpotlightColor:s,annotationToolWidth:a,status:u}}=r();if(!Object.values(Fe).includes(t))return Promise.reject({type:Je,reason:`toolType = ${t} is invalid`,errorCode:Na.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const d=u!==q.End,c=t===Fe.Spotlight;if(c&&!d)return Promise.reject({type:Je,reason:"Only the share presenter can spotlight",errorCode:Na.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const l={toolType:t,color:c?s:i,width:a};return n.annotateAction(He.SELECT_TOOL,l),o(LA(t)),Promise.resolve("")})(e,t),setToolWidth:t=>((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{share:{annotationToolType:i,annotationToolColor:s}}=r(),a=Math.ceil(t),u={toolType:i,color:s,width:a};return n.annotateAction(He.SELECT_TOOL,u),o(PA(a)),Promise.resolve("")})(e,t),setToolColor:t=>((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{share:{annotationToolType:i,annotationToolWidth:s}}=r(),a={toolType:i,color:t,width:s};return n.annotateAction(He.SELECT_TOOL,a),o(i===Fe.Spotlight?MA(t):NA(t)),Promise.resolve("")})(e,t),getToolWidth:()=>(e=>{const{store:{getState:t}}=e,{share:{annotationToolWidth:r}}=t();return r})(e),getToolColor:()=>(e=>{const{store:{getState:t}}=e,{share:{annotationToolType:r,annotationToolColor:o,annotationSpotlightColor:n}}=t();return r===Fe.Spotlight?n:o})(e),getToolType:()=>(e=>{const{store:{getState:t}}=e,{share:{annotationToolType:r}}=t();return r})(e),undo:()=>(e=>{const{mediaAgent:t}=e;return t.annotateAction(He.UNDO),Promise.resolve("")})(e),redo:()=>(e=>{const{mediaAgent:t}=e;return t.annotateAction(He.REDO),Promise.resolve("")})(e),clear:t=>((e,t)=>{const{store:{getState:r},mediaAgent:o}=e,{share:{status:n,isReceiveSharing:i},meeting:{isHost:s}}=r();if(!Object.values(je).includes(t))return Promise.reject({type:Je,reason:`clearType = ${t} is invalid`,errorCode:Na.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const a=n!==q.End;if(t===je.All&&i&&!s)return Promise.reject({type:Je,reason:"As a viewer, you cannot clear all annotation",errorCode:Na.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});if(t===je.Viewer&&!a)return Promise.reject({type:Je,reason:"You must be the presenter to clear the annotation from the viewer",errorCode:Na.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const u={clearType:t,isHost:s};return o.annotateAction(He.CLEAR,u),Promise.resolve("")})(e,t),setVanishingToolTimer:t=>((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,{share:{annotationVanishingToolTimer:i}}=r(),{displayTime:s,vanishingTime:a}=t;if(s&&(s<0||s>15e3))return Promise.reject({type:Je,reason:"Vanishing tool display time should be within range of [0, 15] seconds",errorCode:Na.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});if(a&&(a<1e3||a>15e3))return Promise.reject({type:Je,reason:"Vanishing tool vanishing time should be within range of [1, 15] seconds",errorCode:Na.SCREEN_SHARE_ANNOTATION_INCORRECT_PARAMETER});const u={displayTime:null!=s?s:i.displayTime,outTime:null!=a?a:i.vanishingTime};return n.annotateAction(He.UPDATE_VANISHING_TOOL_TIME,u),o(HA({displayTime:u.displayTime,vanishingTime:u.outTime})),Promise.resolve("")})(e,t),getVanishingToolTimer:()=>(e=>{const{store:{getState:t}}=e,{share:{annotationVanishingToolTimer:r}}=t();return r})(e)}))(this[i])}getShareUserList(){return(e=>{const{store:{getState:t}}=e,r=t();if(!r.share)return[];const{share:{isReceiveSharingFromMainSession:o}}=r;if(o){const{breakoutRoom:{mainSessionAttendeeList:e}}=r;return e.filter((e=>e.bShareToBORooms&&(e.sharerOn||e.sharerPause))).map((e=>CO(e)))}return KE(r).map((e=>CO(e)))})(this[i])}getActiveShareUserId(){return(e=>{const{store:{getState:t}}=e,r=t();return r.share&&r.share.isRemoteSharingActive?r.share.activeNodeId:0})(this[i])}isReceiveSharing(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.isReceiveSharing})(this[i])}getShareViewDimension(){return(e=>{const{store:{getState:t}}=e,r=t();if(r.share){if(r.share.status!==q.End)return{...r.share.shareDimension};{const{share:{receivedShareDimension:e}}=r;return{width:e.width,height:e.height}}}return null})(this[i])}getShareStatus(){return(e=>{const{store:{getState:t}}=e,r=t();return r.share?r.share.status:null})(this[i])}isShareLocked(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.sharePrivilege===z.OnlyHost})(this[i])}isReceiveSharingFromMainSession(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.isReceiveSharingFromMainSession})(this[i])}getSharePrivilege(){return(e=>{const{store:{getState:t}}=e,r=t();return r.share?r.share.sharePrivilege:null})(this[i])}isStartShareScreenWithVideoElement(){return T.isSupportMediaStreamTrackProcessor}isOptimizeForSharedVideoEnabled(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&!!r.share.isOptimizedForSharedVideo})(this[i])}isSupportOptimizedForSharedVideo(){return Fu.isSupportVideoShareSend()}isSupportVideoProcessor(){return wN(this[i],"video")}isSupportAudioProcessor(){return wN(this[i],"audio")}isSupportShareProcessor(){return wN(this[i],"share")}getShareStatisticData(){return(({store:{getState:e}})=>{const{share:{statistic:t}}=e();return{...t}})(this[i])}getMaxRenderableShareViews(){return bC()}requestRemoteControl(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,{share:{isReceiveSharing:o,activeNodeId:n,isRemoteControlEnabled:i}}=t();return i?NN(e,n)?o?QE(t())?Promise.reject({type:Je,reason:"Already get the approval",errorCode:Na.REMOTE_CONTROL_MISMATCH_STATE}):(r.sharingRequestRemoteControl(n,!0),new Promise((e=>{Ja(us,1).subscribe((t=>{e(t)}))}))):Promise.reject({type:Je,reason:"Cannot request control due to no sharing available",errorCode:Na.REMOTE_CONTROL_MISMATCH_STATE}):Promise.reject({type:et,errorCode:Na.REMOTE_CONTROL_MISMATCH_STATE}):Promise.reject({type:Je,reason:"Cannot request control due to the feature is not enabled.",errorCode:Na.REMOTE_CONTROL_ACCOUNT_DISABLE})})(this[i])}giveUpRemoteControl(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,{share:{isGrabRemoteControl:o,activeNodeId:n}}=t();return QE(t())?(o&&r.subscribeGrabRemoteControl(n,!1),r.sharingRequestRemoteControl(n,!1),Ka(us,(e=>!1===e))):Promise.reject({type:Je,errorCode:Na.REMOTE_CONTROL_MISMATCH_STATE})})(this[i])}startRemoteControl(e){return(async(e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n,rwgAgent:i}=e,{share:{isSDKGrabControl:s,activeNodeId:a}}=r();if(!QE(r()))return Promise.reject({type:Je,reason:"required to be approved",errorCode:Na.REMOTE_CONTROL_PERMISSION_REQUIRED});if(await yC(a,t,r(),i,n),t.dataset.zmrvId||t.setAttribute("data-zmrv-id",Id("__ZOOM_SDK_RC_VIEWPORT_DATA_ID_@__")),o(TA(`${t.tagName}[data-zmrv-id="${t.dataset.zmrvId}"]`)),s){const{share:{isGrabRemoteControl:e}}=r();return e?Promise.resolve(""):Ka(ds,(e=>!!e))}return qa({success:ls,fail:[ps]})})(this[i],e)}grabRemoteControl(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,{share:{isGrabRemoteControl:o,activeNodeId:n}}=t();return QE(t())?o?Promise.resolve(""):(r.subscribeGrabRemoteControl(n,!0),Ka(ds,(e=>!!e))):Promise.reject({type:Je,reason:"should be approved before grab",errorCode:Na.REMOTE_CONTROL_PERMISSION_REQUIRED})})(this[i])}updateRemoteControlViewportDimension(e){return((e,t)=>{const{store:{getState:r},mediaAgent:o}=e;return QE(r())&&o.updateRemoteControlProperties({dimension:{scaleWidth:t.width,scaleHeight:t.height,srcOffsetX:t.left,srcOffsetY:t.top}}),Promise.resolve("")})(this[i],e)}approveRemoteControl(e,t){return((e,t,r)=>{const{store:{getState:o,dispatch:n},rwgAgent:i,mediaAgent:s}=e,a=o(),{share:{status:u,isEnableAutoDeleteRcApp:d,remoteControllingSsrc:c},meeting:{userId:l}}=a;if(u===q.End)return Promise.reject({type:Je,reason:"Cannot approve remote control when sharing is not ongoing.",errorCode:Na.REMOTE_CONTROL_MISMATCH_STATE});if(u===q.Paused&&(i.resumeSharing(),s.resumeDesktopSharing(),n(ZI(q.Sharing))),s.isSharingEntireScreen()){var p,h;c&&!Ed(c,t)&&(fC(a,i),n(IA("")));const e=null!==(p=TC(t,a))&&void 0!==p?p:t,{isMacOS:o}=T,u=null===(h=Mu(a).find((t=>Ed(t.userId,e))))||void 0===h?void 0:h.displayName;return i.remoteControlConsent(_e.Approve,e,l,{...s.getShareStreamInfo(),platform:T.isMacOS?"mac":"win",controllerName:u?ld(u):""},d,o?void 0:r?1:0),n(SA(e)),Ka(ys)}return Promise.reject({type:Je,reason:"Cannot approve remote control when not sharing entire screen.",errorCode:Na.REMOTE_CONTROL_MISMATCH_DISPLAY_SURFACE})})(this[i],e,t)}declineRemoteControl(e){return((e,t)=>{var r;const{store:{getState:o},rwgAgent:n,mediaAgent:i}=e,s=o(),{meeting:{userId:a},share:{isEnableAutoDeleteRcApp:u}}=s,d=null!==(r=TC(t,s))&&void 0!==r?r:t;return n.remoteControlConsent(_e.Decline,d,a,{...i.getShareStreamInfo(),platform:T.isMacOS?"mac":"win"},u),Promise.resolve("")})(this[i],e)}stopRemoteControl(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:o}=e;return fC(t(),o),r(IA("")),r(SA(0)),Promise.resolve("")})(this[i])}launchRemoteControlApp(e){return((e,t)=>{const{store:{getState:r,dispatch:o}}=e,n=r(),{share:{remoteControlAppLaunchSheme:i}}=n;return i?(o(IA(t?`${i}&bAutoDelete=1`:i)),o(fA(Ie.Unknown)),Promise.resolve("")):Promise.reject({type:Je,reason:"Cannot launch app due to no permission",errorCode:Na.REMOTE_CONTROL_INVALID_LAUNCH_SCHEME})})(this[i],e)}isRemoteControlEnabled(){return(e=>{var t;const{store:{getState:r}}=e;return!(null===(t=r().share)||void 0===t||!t.isRemoteControlEnabled)})(this[i])}getRemoteControlAppDownloadUrl(){return(e=>{const{store:{getState:t}}=e,r=t();return r.share?r.share.remoteControlAppDownloadUrl:null})(this[i])}isTargetShareSupportRemoteControl(e){return NN(this[i],e)}isRemotelyControlApproved(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&QE(r)})(this[i])}isControllingUserRemotely(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.isGrabRemoteControl})(this[i])}getRemotelyControllingUser(){return(e=>{const{store:{getState:t}}=e,r=t();if(r.share){const{remoteControllingSsrc:e}=r.share;if(e)return Mu(r).find((t=>Ed(t.userId,e)))}return null})(this[i])}getShareStreamSettings(){return(({store:{getState:e},mediaAgent:t})=>{const{share:{status:r}}=e();return r!==q.End?t.getShareStreamInfo(!0):null})(this[i])}},bS(OP.prototype,"startAudio",[MS,MN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"startAudio"),OP.prototype),bS(OP.prototype,"stopAudio",[MS,PN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"stopAudio"),OP.prototype),bS(OP.prototype,"muteAudio",[MS,LN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"muteAudio"),OP.prototype),bS(OP.prototype,"unmuteAudio",[MS,kN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"unmuteAudio"),OP.prototype),bS(OP.prototype,"dialOut",[MS,UN,VN],Object.getOwnPropertyDescriptor(OP.prototype,"dialOut"),OP.prototype),bS(OP.prototype,"cancelDialOut",[MS,BN,HN],Object.getOwnPropertyDescriptor(OP.prototype,"cancelDialOut"),OP.prototype),bS(OP.prototype,"hangup",[MS,jN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"hangup"),OP.prototype),bS(OP.prototype,"switchMicrophone",[MS,FN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"switchMicrophone"),OP.prototype),bS(OP.prototype,"switchSpeaker",[MS,WN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"switchSpeaker"),OP.prototype),bS(OP.prototype,"muteShareAudio",[MS,xN,$N,DP],Object.getOwnPropertyDescriptor(OP.prototype,"muteShareAudio"),OP.prototype),bS(OP.prototype,"unmuteShareAudio",[MS,GN,zN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"unmuteShareAudio"),OP.prototype),bS(OP.prototype,"subscribeAudioStatisticData",[MS,qN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"subscribeAudioStatisticData"),OP.prototype),bS(OP.prototype,"unsubscribeAudioStatisticData",[MS,KN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"unsubscribeAudioStatisticData"),OP.prototype),bS(OP.prototype,"enableBackgroundNoiseSuppression",[MS,JN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"enableBackgroundNoiseSuppression"),OP.prototype),bS(OP.prototype,"enableSyncButtonsOnHeadset",[MS,QN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"enableSyncButtonsOnHeadset"),OP.prototype),bS(OP.prototype,"enableOriginalSound",[MS,YN,DP],Object.getOwnPropertyDescriptor(OP.prototype,"enableOriginalSound"),OP.prototype),bS(OP.prototype,"callCRCDevice",[MS,ZN,XN],Object.getOwnPropertyDescriptor(OP.prototype,"callCRCDevice"),OP.prototype),bS(OP.prototype,"cancelCallCRCDevice",[MS,eM,tM],Object.getOwnPropertyDescriptor(OP.prototype,"cancelCallCRCDevice"),OP.prototype),bS(OP.prototype,"muteAllAudio",[LS,MS,rM],Object.getOwnPropertyDescriptor(OP.prototype,"muteAllAudio"),OP.prototype),bS(OP.prototype,"unmuteAllAudio",[LS,MS,oM],Object.getOwnPropertyDescriptor(OP.prototype,"unmuteAllAudio"),OP.prototype),bS(OP.prototype,"muteAudioUponEntry",[LS,MS,nM],Object.getOwnPropertyDescriptor(OP.prototype,"muteAudioUponEntry"),OP.prototype),bS(OP.prototype,"allowUnmuteAudioThemselves",[LS,MS,iM],Object.getOwnPropertyDescriptor(OP.prototype,"allowUnmuteAudioThemselves"),OP.prototype),bS(OP.prototype,"startVideo",[MS,sM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"startVideo"),OP.prototype),bS(OP.prototype,"stopVideo",[MS,aM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"stopVideo"),OP.prototype),bS(OP.prototype,"switchCamera",[MS,uM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"switchCamera"),OP.prototype),bS(OP.prototype,"createProcessor",[MS,dM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"createProcessor"),OP.prototype),bS(OP.prototype,"addProcessor",[MS,cM,MP],Object.getOwnPropertyDescriptor(OP.prototype,"addProcessor"),OP.prototype),bS(OP.prototype,"removeProcessor",[MS,lM,MP],Object.getOwnPropertyDescriptor(OP.prototype,"removeProcessor"),OP.prototype),bS(OP.prototype,"renderVideo",[UP,MS,pM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"renderVideo"),OP.prototype),bS(OP.prototype,"stopRenderVideo",[BP,MS,hM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"stopRenderVideo"),OP.prototype),bS(OP.prototype,"updateVideoCanvasDimension",[VP,MS,mM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"updateVideoCanvasDimension"),OP.prototype),bS(OP.prototype,"adjustRenderedVideoPosition",[BP,MS,gM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"adjustRenderedVideoPosition"),OP.prototype),bS(OP.prototype,"clearVideoCanvas",[VP,MS,SM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"clearVideoCanvas"),OP.prototype),bS(OP.prototype,"mirrorVideo",[MS,vM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"mirrorVideo"),OP.prototype),bS(OP.prototype,"enableHardwareAcceleration",[MS,fM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"enableHardwareAcceleration"),OP.prototype),bS(OP.prototype,"subscribeVideoStatisticData",[MS,yM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"subscribeVideoStatisticData"),OP.prototype),bS(OP.prototype,"unsubscribeVideoStatisticData",[MS,EM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"unsubscribeVideoStatisticData"),OP.prototype),bS(OP.prototype,"previewVirtualBackground",[MS,_M,IM],Object.getOwnPropertyDescriptor(OP.prototype,"previewVirtualBackground"),OP.prototype),bS(OP.prototype,"updateVirtualBackgroundImage",[MS,AM,bM],Object.getOwnPropertyDescriptor(OP.prototype,"updateVirtualBackgroundImage"),OP.prototype),bS(OP.prototype,"stopPreviewVirtualBackground",[MS,CM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"stopPreviewVirtualBackground"),OP.prototype),bS(OP.prototype,"previewVideoMask",[kP,MS,TM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"previewVideoMask"),OP.prototype),bS(OP.prototype,"updateVideoMask",[MS,RM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"updateVideoMask"),OP.prototype),bS(OP.prototype,"stopPreviewVideoMask",[MS,OM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"stopPreviewVideoMask"),OP.prototype),bS(OP.prototype,"requestFarEndCameraControl",[MS,DM,PP],Object.getOwnPropertyDescriptor(OP.prototype,"requestFarEndCameraControl"),OP.prototype),bS(OP.prototype,"approveFarEndCameraControl",[MS,wM,PP],Object.getOwnPropertyDescriptor(OP.prototype,"approveFarEndCameraControl"),OP.prototype),bS(OP.prototype,"declineFarEndCameraControl",[MS,NM,PP],Object.getOwnPropertyDescriptor(OP.prototype,"declineFarEndCameraControl"),OP.prototype),bS(OP.prototype,"giveUpFarEndCameraControl",[MS,MM,PP],Object.getOwnPropertyDescriptor(OP.prototype,"giveUpFarEndCameraControl"),OP.prototype),bS(OP.prototype,"controlCamera",[MS,PM,PP],Object.getOwnPropertyDescriptor(OP.prototype,"controlCamera"),OP.prototype),bS(OP.prototype,"controlFarEndCamera",[MS,LM,PP],Object.getOwnPropertyDescriptor(OP.prototype,"controlFarEndCamera"),OP.prototype),bS(OP.prototype,"attachVideo",[MS,kM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"attachVideo"),OP.prototype),bS(OP.prototype,"detachVideo",[MS,UM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"detachVideo"),OP.prototype),bS(OP.prototype,"spotlight",[LS,MS,VM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"spotlight"),OP.prototype),bS(OP.prototype,"removeSpotlight",[MS,BM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"removeSpotlight"),OP.prototype),bS(OP.prototype,"removeAllSpotlights",[kS,MS,HM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"removeAllSpotlights"),OP.prototype),bS(OP.prototype,"screenshotVideo",[MS,jM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"screenshotVideo"),OP.prototype),bS(OP.prototype,"subscribeWebRTCStatsReportData",[MS,FM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"subscribeWebRTCStatsReportData"),OP.prototype),bS(OP.prototype,"unsubscribeWebRTCStatsReportData",[MS,WM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"unsubscribeWebRTCStatsReportData"),OP.prototype),bS(OP.prototype,"subscribeSystemResourceUsage",[MS,xM,wP],Object.getOwnPropertyDescriptor(OP.prototype,"subscribeSystemResourceUsage"),OP.prototype),bS(OP.prototype,"unsubscribeSystemResourceUsage",[MS,$M,wP],Object.getOwnPropertyDescriptor(OP.prototype,"unsubscribeSystemResourceUsage"),OP.prototype),bS(OP.prototype,"startShareView",[kP,MS,GM,NP],Object.getOwnPropertyDescriptor(OP.prototype,"startShareView"),OP.prototype),bS(OP.prototype,"stopShareView",[MS,zM,NP],Object.getOwnPropertyDescriptor(OP.prototype,"stopShareView"),OP.prototype),bS(OP.prototype,"switchShareView",[MS,qM,NP],Object.getOwnPropertyDescriptor(OP.prototype,"switchShareView"),OP.prototype),bS(OP.prototype,"updateSharingCanvasDimension",[MS,KM,NP],Object.getOwnPropertyDescriptor(OP.prototype,"updateSharingCanvasDimension"),OP.prototype),bS(OP.prototype,"startShareScreen",[MS,JM,NP],Object.getOwnPropertyDescriptor(OP.prototype,"startShareScreen"),OP.prototype),bS(OP.prototype,"startShareCamera",[MS,QM,NP],Object.getOwnPropertyDescriptor(OP.prototype,"startShareCamera"),OP.prototype),bS(OP.prototype,"stopShareScreen",[MS,YM,NP],Object.getOwnPropertyDescriptor(OP.prototype,"stopShareScreen"),OP.prototype),bS(OP.prototype,"pauseShareScreen",[MS,ZM,NP],Object.getOwnPropertyDescriptor(OP.prototype,"pauseShareScreen"),OP.prototype),bS(OP.prototype,"resumeShareScreen",[MS,XM,NP],Object.getOwnPropertyDescriptor(OP.prototype,"resumeShareScreen"),OP.prototype),bS(OP.prototype,"setSharePrivilege",[LS,eP,MS,NP],Object.getOwnPropertyDescriptor(OP.prototype,"setSharePrivilege"),OP.prototype),bS(OP.prototype,"lockShare",[LS,tP,MS,NP],Object.getOwnPropertyDescriptor(OP.prototype,"lockShare"),OP.prototype),bS(OP.prototype,"shareToBreakoutRoom",[MS,LS,rP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"shareToBreakoutRoom"),OP.prototype),bS(OP.prototype,"stopShareToBreakoutRoom",[MS,LS,oP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"stopShareToBreakoutRoom"),OP.prototype),bS(OP.prototype,"muteOthersScreenShare",[MS,LS,nP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"muteOthersScreenShare"),OP.prototype),bS(OP.prototype,"enableOptimizeForSharedVideo",[MS,iP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"enableOptimizeForSharedVideo"),OP.prototype),bS(OP.prototype,"updateSharedVideoQuality",[MS,sP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"updateSharedVideoQuality"),OP.prototype),bS(OP.prototype,"subscribeShareStatisticData",[MS,aP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"subscribeShareStatisticData"),OP.prototype),bS(OP.prototype,"unsubscribeShareStatisticData",[MS,uP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"unsubscribeShareStatisticData"),OP.prototype),bS(OP.prototype,"screenshotSharedContent",[MS,dP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"screenshotSharedContent"),OP.prototype),bS(OP.prototype,"attachShareView",[MS,cP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"attachShareView"),OP.prototype),bS(OP.prototype,"detachShareView",[MS,lP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"detachShareView"),OP.prototype),bS(OP.prototype,"startAnnotation",[MS,pP,NP,HP],Object.getOwnPropertyDescriptor(OP.prototype,"startAnnotation"),OP.prototype),bS(OP.prototype,"stopAnnotation",[MS,hP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"stopAnnotation"),OP.prototype),bS(OP.prototype,"changeAnnotationPrivilege",[MS,mP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"changeAnnotationPrivilege"),OP.prototype),bS(OP.prototype,"requestShareCamera",[MS,gP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"requestShareCamera"),OP.prototype),bS(OP.prototype,"approveShareCamera",[MS,SP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"approveShareCamera"),OP.prototype),bS(OP.prototype,"declineShareCamera",[MS,vP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"declineShareCamera"),OP.prototype),bS(OP.prototype,"informShareCameraStatus",[MS,fP,NP],Object.getOwnPropertyDescriptor(OP.prototype,"informShareCameraStatus"),OP.prototype),bS(OP.prototype,"requestRemoteControl",[MS,yP,LP,jP],Object.getOwnPropertyDescriptor(OP.prototype,"requestRemoteControl"),OP.prototype),bS(OP.prototype,"giveUpRemoteControl",[MS,EP,LP],Object.getOwnPropertyDescriptor(OP.prototype,"giveUpRemoteControl"),OP.prototype),bS(OP.prototype,"startRemoteControl",[MS,_P,LP],Object.getOwnPropertyDescriptor(OP.prototype,"startRemoteControl"),OP.prototype),bS(OP.prototype,"grabRemoteControl",[MS,IP,LP],Object.getOwnPropertyDescriptor(OP.prototype,"grabRemoteControl"),OP.prototype),bS(OP.prototype,"updateRemoteControlViewportDimension",[MS,AP,LP],Object.getOwnPropertyDescriptor(OP.prototype,"updateRemoteControlViewportDimension"),OP.prototype),bS(OP.prototype,"approveRemoteControl",[MS,bP,LP],Object.getOwnPropertyDescriptor(OP.prototype,"approveRemoteControl"),OP.prototype),bS(OP.prototype,"declineRemoteControl",[MS,CP,LP],Object.getOwnPropertyDescriptor(OP.prototype,"declineRemoteControl"),OP.prototype),bS(OP.prototype,"stopRemoteControl",[MS,TP,LP],Object.getOwnPropertyDescriptor(OP.prototype,"stopRemoteControl"),OP.prototype),bS(OP.prototype,"launchRemoteControlApp",[MS,RP,LP],Object.getOwnPropertyDescriptor(OP.prototype,"launchRemoteControlApp"),OP.prototype),OP);var WP,xP,$P,GP,zP,qP,KP,JP,QP;const YP=UE("Audio"),ZP=UE("Sharing");let XP=(WP=US("share"),xP=US("audio"),$P=US("audio"),GP=US("audio"),zP=US("audio"),qP=US("audio"),KP=US("audio"),JP=US("audio"),QP=class extends FP{switchSharingSecondaryCamera(e){return((e,t)=>{const{store:{getState:r,dispatch:o},mediaAgent:n}=e,i=r(),{video:{cameraDevicesList:s},share:{status:a,isSharingWithSecondCamera:u}}=i;return"default"!==t&&-1===s.map((e=>e.deviceId)).indexOf(t)?Promise.reject({type:et,reason:"Cannot find cameraDeviceId in camera devices list.",errorCode:Na.STREAM_MISMATCH_DEVICE}):(a===q.Sharing&&u&&n.changeSharingSecondCamera(t),o(aA(t)),Promise.resolve())})(this[i],e)}muteUserAudioLocally(e){return((e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,i=o(),{audio:{locallyMutedAudioList:s}}=i,a=Mu(i).filter((e=>e.audio===Ee.Computer));return s.includes(t)||-1===a.findIndex((e=>e.userId===t))||(r.muteOrUnmuteOtherAudio(t,!0),n(dI(t))),Promise.resolve("")})(this[i],e)}unmuteUserAudioLocally(e){return((e,t)=>{const{mediaAgent:r,store:{getState:o,dispatch:n}}=e,{audio:{locallyMutedAudioList:i}}=o();return i.includes(t)?(r.muteOrUnmuteOtherAudio(t,!1),n(cI(t)),Promise.resolve("")):Promise.resolve("")})(this[i],e)}adjustUserAudioVolumeLocally(e,t){return((e,t,r)=>{const{mediaAgent:o,store:{getState:n,dispatch:i}}=e,s=n();return-1!==Mu(s).findIndex((e=>e.userId===t))&&(o.adjustOtherAudioVolume(t,r),i(lI({userId:t,volume:r}))),Promise.resolve("")})(this[i],e,t)}muteAllUserAudioLocally(){return(e=>{const{mediaAgent:t,store:{getState:r,dispatch:o}}=e,{audio:{isStopAllImcomingAudio:n}}=r();return n||(t.stopAllIncomingAudio(!0),o(vI(!0))),Promise.resolve("")})(this[i])}unmuteAllUserAudioLocally(){return(e=>{const{mediaAgent:t,store:{getState:r,dispatch:o}}=e,{audio:{isStopAllImcomingAudio:n,locallyMutedAudioList:i}}=r();return n&&(t.stopAllIncomingAudio(!1),o(vI(!1)),i.length>0&&i.forEach((e=>{t.muteOrUnmuteOtherAudio(e,!1),o(cI(e))}))),Promise.resolve("")})(this[i])}startSecondaryAudio(e,t){return(async(e,t,r)=>{const{mediaAgent:o,rwgAgent:n,store:{getState:i,dispatch:s}}=e,a=i(),{audio:{microphoneDevicesList:u,activeMicrophone:d,isWebRtcAudioCapable:c},share:{status:l}}=a,p=Ru(a);if(!Fu.isSupportShare2ndAudioDevice(c))return Promise.reject({type:Je,reason:"Cannot start secondary audio due to platform is not supported",errorCode:Na.SECONDARY_AUDIO_UNSUPPORTED});if((null==p?void 0:p.audio)===Ee.Computer&&d===t)return Promise.reject({type:Je,reason:"Cannot start secondary audio with the same microphone",errorCode:Na.SECONDARY_AUDIO_DEVICE_CONFLICT});if(l!==q.End)return Promise.reject({type:Je,reason:"Cannot start secondary audio while screen sharing is in progress",errorCode:Na.SECONDARY_AUDIO_SCREEN_SHARING_CONFLICT});let h=u;if(0===u.length){const{microphones:e}=await Mr(kd());h=e}return t&&-1===h.findIndex((e=>e.deviceId===t))?Promise.reject({type:et,reason:"Cannot find the microphone",errorCode:Na.STREAM_MISMATCH_DEVICE}):(n.muteShareAudio(!1,!0),o.share2ndAudio(t,r),s(bI(t)),Ka(ji))})(this[i],e,t)}stopSecondaryAudio(){return(async e=>{const{mediaAgent:t,rwgAgent:r,store:{getState:o,dispatch:n}}=e,i=o(),{audio:{secondaryAudioMicrophoneId:s}}=i;if(!s)return Promise.reject({type:Je,reason:"Cannot stop secondary audio due to not started ",errorCode:Na.SECONDARY_AUDIO_NOT_STARTED});r.muteShareAudio(!0,!0),t.leaveSharingAudio(!1),n(bI(void 0))})(this[i])}isUserAudioMutedLocally(e){return(({store:{getState:e}},t)=>{const{audio:{locallyMutedAudioList:r}}=e();return r.includes(t)})(this[i],e)}getUserVolumeLocally(e){return(({store:{getState:e}},t)=>{var r,o;const{audio:{localUserAudioVolumeList:n,locallyMutedAudioList:i}}=e();return null!==(r=null===(o=n.find((e=>e.userId===t)))||void 0===o?void 0:o.volume)&&void 0!==r?r:i.includes(t)?0:100})(this[i],e)}},bS(QP.prototype,"switchSharingSecondaryCamera",[MS,WP,ZP],Object.getOwnPropertyDescriptor(QP.prototype,"switchSharingSecondaryCamera"),QP.prototype),bS(QP.prototype,"muteUserAudioLocally",[MS,xP,YP],Object.getOwnPropertyDescriptor(QP.prototype,"muteUserAudioLocally"),QP.prototype),bS(QP.prototype,"unmuteUserAudioLocally",[MS,$P,YP],Object.getOwnPropertyDescriptor(QP.prototype,"unmuteUserAudioLocally"),QP.prototype),bS(QP.prototype,"adjustUserAudioVolumeLocally",[MS,GP,YP],Object.getOwnPropertyDescriptor(QP.prototype,"adjustUserAudioVolumeLocally"),QP.prototype),bS(QP.prototype,"muteAllUserAudioLocally",[MS,zP,YP],Object.getOwnPropertyDescriptor(QP.prototype,"muteAllUserAudioLocally"),QP.prototype),bS(QP.prototype,"unmuteAllUserAudioLocally",[MS,qP,YP],Object.getOwnPropertyDescriptor(QP.prototype,"unmuteAllUserAudioLocally"),QP.prototype),bS(QP.prototype,"startSecondaryAudio",[MS,KP,YP],Object.getOwnPropertyDescriptor(QP.prototype,"startSecondaryAudio"),QP.prototype),bS(QP.prototype,"stopSecondaryAudio",[MS,JP,YP],Object.getOwnPropertyDescriptor(QP.prototype,"stopSecondaryAudio"),QP.prototype),QP);const eL={controlStatus:mu.NotStarted,sequenceId:1,rooms:[],isHugeBO:!1,allocationPattern:hu.Automatically,currentRoom:{status:Su.Initial,boStatus:gu.NoToken,boConfId:"",boId:"",name:"",boToken:""},options:{isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60,isAutoMoveBackToMainSession:!1,isRoomSelectionEnabled:!1},mainSessionAttendeeList:[],preAssignedRooms:[],meetingElapsedTime:0,startRoomElapsedTime:0,closingRoomTime:0,broadcastMessage:"",hostReplyToQuestionerType:void 0,hostReplyToRequestId:void 0,isUserRoleUpdated:!1,mainSessionConfId:"",isEnableBOBroadcast:!1,isEnableBreakoutRoom:!1,isEnableBOViewActivityStatus:!1,inRoomUserActivityStatusMap:{},isEnableBOBroadcastVoice:!1,isBroadcastVoice:!1},tL=qc({[`${LT}`]:ay(((e,{payload:t})=>{Array.isArray(t)?e.rooms.push(...t):e.rooms.push(t)})),[`${kT}`]:ay(((e,{payload:t})=>{e.allocationPattern=t})),[`${UT}`]:ay(((e,{payload:t})=>{e.sequenceId=t})),[`${VT}`]:ay(((e,{payload:t})=>{e.meetingElapsedTime=t})),[`${BT}`]:ay(((e,{payload:t})=>{e.startRoomElapsedTime=t})),[`${HT}`]:ay(((e,{payload:t})=>{const{options:r}=e;Object.assign(r,t)})),[`${jT}`]:ay(((e,{payload:t})=>{e.controlStatus=t})),[`${FT}`]:ay(((e,{payload:t})=>{e.rooms=t})),[`${WT}`]:ay(((e,{payload:t})=>{const{currentRoom:r}=e;Object.assign(r,t)})),[`${xT}`]:ay(((e,{payload:t})=>{const{currentRoom:r}=e;r.status=t})),[`${$T}`]:ay(((e,{payload:t})=>{const{currentRoom:r}=e;r.boConfId=t})),[`${GT}`]:ay(((e,{payload:t})=>{const{currentRoom:r}=e;r.boToken=t})),[`${qT}`]:ay(((e,{payload:t})=>{e.closingRoomTime=t})),[`${KT}`]:ay(((e,{payload:t})=>{e.broadcastMessage=t})),[`${JT}`]:ay(((e,{payload:t})=>{e.hostReplyToQuestionerType=t})),[`${QT}`]:ay(((e,{payload:t})=>{e.hostReplyToRequestId=t})),[`${YT}`]:ay(((e,{payload:t})=>{void 0!==t.add&&t.add.length>0&&t.add.forEach((t=>{const r=e.mainSessionAttendeeList.find((e=>e.userId===t.userId));void 0!==r?Object.assign(r,t):lu(t.userRole)||e.mainSessionAttendeeList.push(t)})),void 0!==t.update&&t.update.length>0&&t.update.forEach((t=>{const r=e.mainSessionAttendeeList.find((e=>e.userId===t.userId));void 0!==r&&Object.assign(r,t)})),void 0!==t.remove&&t.remove.length>0&&t.remove.forEach((t=>{const r=e.mainSessionAttendeeList.findIndex((e=>e.userId===t.userId));-1!==r&&e.mainSessionAttendeeList.splice(r,1)}))})),[`${ZT}`]:ay(((e,{payload:t})=>{e.isHugeBO=t})),[`${eR}`]:ay(((e,{payload:t})=>{e.isUserRoleUpdated=t})),[`${XT}`]:ay(((e,{payload:t})=>{e.preAssignedRooms=t})),[`${tR}`]:ay(((e,{payload:t})=>{e.isEnableBreakoutRoom=t.isEnableBreakoutRoom,e.isEnableBOBroadcast=t.isEnableBOBroadcast,e.isEnableBOViewActivityStatus=t.isEnableBOViewActivityStatus,e.isEnableBOBroadcastVoice=t.isEnableBOBroadcastVoice})),[`${rR}`]:ay(((e,{payload:t})=>{const{userGuid:r,status:o}=t,{inRoomUserActivityStatusMap:n}=e;n[`${r}`]=o})),[`${oR}`]:ay(((e,{payload:t})=>{e.isBroadcastVoice=t})),[`${zT}`]:e=>{const{currentRoom:{status:t}}=e;return t===Su.Joining?{...eL,preAssignedRooms:e.preAssignedRooms,currentRoom:e.currentRoom,closingRoomTime:e.closingRoomTime}:t===Su.Leaving?{...eL,preAssignedRooms:e.preAssignedRooms,closingRoomTime:e.closingRoomTime}:{...eL,preAssignedRooms:e.preAssignedRooms}}},eL);var rL=Uint8Array,oL=Uint16Array,nL=Uint32Array,iL=new rL([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sL=new rL([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),aL=new rL([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),uL=function(e,t){for(var r=new oL(31),o=0;o<31;++o)r[o]=t+=1<<e[o-1];var n=new nL(r[30]);for(o=1;o<30;++o)for(var i=r[o];i<r[o+1];++i)n[i]=i-r[o]<<5|o;return[r,n]},dL=uL(iL,2),cL=dL[0],lL=dL[1];cL[28]=258,lL[258]=28;for(var pL=uL(sL,0),hL=pL[0],mL=pL[1],gL=new oL(32768),SL=0;SL<32768;++SL){var vL=(43690&SL)>>>1|(21845&SL)<<1;vL=(61680&(vL=(52428&vL)>>>2|(13107&vL)<<2))>>>4|(3855&vL)<<4,gL[SL]=((65280&vL)>>>8|(255&vL)<<8)>>>1}var fL=function(e,t,r){for(var o=e.length,n=0,i=new oL(t);n<o;++n)e[n]&&++i[e[n]-1];var s,a=new oL(t);for(n=0;n<t;++n)a[n]=a[n-1]+i[n-1]<<1;if(r){s=new oL(1<<t);var u=15-t;for(n=0;n<o;++n)if(e[n])for(var d=n<<4|e[n],c=t-e[n],l=a[e[n]-1]++<<c,p=l|(1<<c)-1;l<=p;++l)s[gL[l]>>>u]=d}else for(s=new oL(o),n=0;n<o;++n)e[n]&&(s[n]=gL[a[e[n]-1]++]>>>15-e[n]);return s},yL=new rL(288);for(SL=0;SL<144;++SL)yL[SL]=8;for(SL=144;SL<256;++SL)yL[SL]=9;for(SL=256;SL<280;++SL)yL[SL]=7;for(SL=280;SL<288;++SL)yL[SL]=8;var EL=new rL(32);for(SL=0;SL<32;++SL)EL[SL]=5;var _L=fL(yL,9,0),IL=fL(yL,9,1),AL=fL(EL,5,0),bL=fL(EL,5,1),CL=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},TL=function(e,t,r){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(7&t)&r},RL=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},OL=function(e){return(e+7)/8|0},DL=function(e,t,r){(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length);var o=new(2==e.BYTES_PER_ELEMENT?oL:4==e.BYTES_PER_ELEMENT?nL:rL)(r-t);return o.set(e.subarray(t,r)),o},wL=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],NL=function(e,t,r){var o=new Error(t||wL[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,NL),!r)throw o;return o},ML=function(e,t,r){r<<=7&t;var o=t/8|0;e[o]|=r,e[o+1]|=r>>>8},PL=function(e,t,r){r<<=7&t;var o=t/8|0;e[o]|=r,e[o+1]|=r>>>8,e[o+2]|=r>>>16},LL=function(e,t){for(var r=[],o=0;o<e.length;++o)e[o]&&r.push({s:o,f:e[o]});var n=r.length,i=r.slice();if(!n)return[FL,0];if(1==n){var s=new rL(r[0].s+1);return s[r[0].s]=1,[s,1]}r.sort((function(e,t){return e.f-t.f})),r.push({s:-1,f:25001});var a=r[0],u=r[1],d=0,c=1,l=2;for(r[0]={s:-1,f:a.f+u.f,l:a,r:u};c!=n-1;)a=r[r[d].f<r[l].f?d++:l++],u=r[d!=c&&r[d].f<r[l].f?d++:l++],r[c++]={s:-1,f:a.f+u.f,l:a,r:u};var p=i[0].s;for(o=1;o<n;++o)i[o].s>p&&(p=i[o].s);var h=new oL(p+1),m=kL(r[c-1],h,0);if(m>t){o=0;var g=0,S=m-t,v=1<<S;for(i.sort((function(e,t){return h[t.s]-h[e.s]||e.f-t.f}));o<n;++o){var f=i[o].s;if(!(h[f]>t))break;g+=v-(1<<m-h[f]),h[f]=t}for(g>>>=S;g>0;){var y=i[o].s;h[y]<t?g-=1<<t-h[y]++-1:++o}for(;o>=0&&g;--o){var E=i[o].s;h[E]==t&&(--h[E],++g)}m=t}return[new rL(h),m]},kL=function(e,t,r){return-1==e.s?Math.max(kL(e.l,t,r+1),kL(e.r,t,r+1)):t[e.s]=r},UL=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new oL(++t),o=0,n=e[0],i=1,s=function(e){r[o++]=e},a=1;a<=t;++a)if(e[a]==n&&a!=t)++i;else{if(!n&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(n),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(n);i=1,n=e[a]}return[r.subarray(0,o),t]},VL=function(e,t){for(var r=0,o=0;o<t.length;++o)r+=e[o]*t[o];return r},BL=function(e,t,r){var o=r.length,n=OL(t+2);e[n]=255&o,e[n+1]=o>>>8,e[n+2]=255^e[n],e[n+3]=255^e[n+1];for(var i=0;i<o;++i)e[n+i+4]=r[i];return 8*(n+4+o)},HL=function(e,t,r,o,n,i,s,a,u,d,c){ML(t,c++,r),++n[256];for(var l=LL(n,15),p=l[0],h=l[1],m=LL(i,15),g=m[0],S=m[1],v=UL(p),f=v[0],y=v[1],E=UL(g),_=E[0],I=E[1],A=new oL(19),b=0;b<f.length;++b)A[31&f[b]]++;for(b=0;b<_.length;++b)A[31&_[b]]++;for(var C=LL(A,7),T=C[0],R=C[1],O=19;O>4&&!T[aL[O-1]];--O);var D,w,N,M,P=d+5<<3,L=VL(n,yL)+VL(i,EL)+s,k=VL(n,p)+VL(i,g)+s+14+3*O+VL(A,T)+(2*A[16]+3*A[17]+7*A[18]);if(P<=L&&P<=k)return BL(t,c,e.subarray(u,u+d));if(ML(t,c,1+(k<L)),c+=2,k<L){D=fL(p,h,0),w=p,N=fL(g,S,0),M=g;var U=fL(T,R,0);for(ML(t,c,y-257),ML(t,c+5,I-1),ML(t,c+10,O-4),c+=14,b=0;b<O;++b)ML(t,c+3*b,T[aL[b]]);c+=3*O;for(var V=[f,_],B=0;B<2;++B){var H=V[B];for(b=0;b<H.length;++b){var j=31&H[b];ML(t,c,U[j]),c+=T[j],j>15&&(ML(t,c,H[b]>>>5&127),c+=H[b]>>>12)}}}else D=_L,w=yL,N=AL,M=EL;for(b=0;b<a;++b)if(o[b]>255){j=o[b]>>>18&31,PL(t,c,D[j+257]),c+=w[j+257],j>7&&(ML(t,c,o[b]>>>23&31),c+=iL[j]);var F=31&o[b];PL(t,c,N[F]),c+=M[F],F>3&&(PL(t,c,o[b]>>>5&8191),c+=sL[F])}else PL(t,c,D[o[b]]),c+=w[o[b]];return PL(t,c,D[256]),c+w[256]},jL=new nL([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),FL=new rL(0),WL=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,o=9;--o;)r=(1&r&&-306674912)^r>>>1;e[t]=r}return e}(),xL=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8};function $L(e,t){t||(t={});var r=function(){var e=-1;return{p:function(t){for(var r=e,o=0;o<t.length;++o)r=WL[255&r^t[o]]^r>>>8;e=r},d:function(){return~e}}}(),o=e.length;r.p(e);var n=function(e,t,r,o){return function(e,t,r,o,n,i){var s=e.length,a=new rL(o+s+5*(1+Math.ceil(s/7e3))+n),u=a.subarray(o,a.length-n),d=0;if(!t||s<8)for(var c=0;c<=s;c+=65535){var l=c+65535;l>=s&&(u[d>>3]=i),d=BL(u,d+1,e.subarray(c,l))}else{for(var p=jL[t-1],h=p>>>13,m=8191&p,g=(1<<r)-1,S=new oL(32768),v=new oL(g+1),f=Math.ceil(r/3),y=2*f,E=function(t){return(e[t]^e[t+1]<<f^e[t+2]<<y)&g},_=new nL(25e3),I=new oL(288),A=new oL(32),b=0,C=0,T=(c=0,0),R=0,O=0;c<s;++c){var D=E(c),w=32767&c,N=v[D];if(S[w]=N,v[D]=w,R<=c){var M=s-c;if((b>7e3||T>24576)&&M>423){d=HL(e,u,0,_,I,A,C,T,O,c-O,d),T=b=C=0,O=c;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)A[P]=0}var L=2,k=0,U=m,V=w-N&32767;if(M>2&&D==E(c-V))for(var B=Math.min(h,M)-1,H=Math.min(32767,c),j=Math.min(258,M);V<=H&&--U&&w!=N;){if(e[c+L]==e[c+L-V]){for(var F=0;F<j&&e[c+F]==e[c+F-V];++F);if(F>L){if(L=F,k=V,F>B)break;var W=Math.min(V,F-2),x=0;for(P=0;P<W;++P){var $=c-V+P+32768&32767,G=$-S[$]+32768&32767;G>x&&(x=G,N=$)}}}V+=(w=N)-(N=S[w])+32768&32767}if(k){_[T++]=268435456|lL[L]<<18|mL[k];var z=31&lL[L],q=31&mL[k];C+=iL[z]+sL[q],++I[257+z],++A[q],R=c+L,++b}else _[T++]=e[c],++I[e[c]]}}d=HL(e,u,i,_,I,A,C,T,O,c-O,d)}return DL(a,0,o+OL(d)+n)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,r,o,!0)}(e,t,function(e){return 10+(e.filename&&e.filename.length+1||0)}(t),8),i=n.length;return function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&xL(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var o=0;o<=r.length;++o)e[o+10]=r.charCodeAt(o)}}(n,t),xL(n,i-8,r.d()),xL(n,i-4,o),n}var GL="undefined"!=typeof TextEncoder&&new TextEncoder,zL="undefined"!=typeof TextDecoder&&new TextDecoder;try{zL.decode(FL,{stream:!0})}catch(gf){}const{WebclientBreakoutRoomAttendeeStatus:qL,WebclientBreakoutRoomCommand:KL}=Cy,JL=ME(Fu.getInstance());function QL(e,t){let r=0;for(;r<e.length;r++){const o=e[r],{attendeeGuidList:n}=o;if(null!=n&&n.includes(t))break}return r<e.length?e[r]:void 0}function YL(){by.remove(qL),by.remove(KL)}function ZL(){return __.createAgent().leaveBO(1),Ga(Go,{reason:Uo.BackToMainSession}),YL(),[xT(Su.Leaving),Pg(Wo.NormalCase)]}function XL(e,t){return Ga(Go,{reason:Uo.JoinBreakoutRoom,roomName:e}),t===Su.InRoom&&__.createAgent().leaveBO(1),[xT(Su.Joining),Pg(Wo.NormalCase)]}function ek(e){return Ga(Go,{reason:Uo.MoveToBreakoutRoom,roomName:e}),__.createAgent().leaveBO(1),[xT(Su.Joining),Pg(Wo.NormalCase)]}function tk(e){return e!==Su.InRoom&&e!==Su.Joining&&e!==Su.Leaving}function rk(e,t=!1){const r=t?Su.InRoom:Su.Invited;return by.set(qL,JSON.stringify({status:r,boId:e.boId}),Iy.SessionStorage),WT({status:r,boId:e.boId,name:e.name,boStatus:e.boStatus})}function ok(e){const{breakoutRoom:{isUserRoleUpdated:t,currentRoom:{boConfId:r}}}=e.value,o=Ru(e.value);if(o&&(!r||r&&t))return Tr(o.isHost);{const t=r?Ja(ua,1):Ja(Do,1).pipe(Gr((e=>du(e.userRole)?Cr([1]):lo(Ja(wo).pipe(co((e=>void 0!==e.userRole&&void 0===e.displayName||void 0!==e.bVideoConnect)),go(1)),Ja(No).pipe(co((e=>e.some((e=>du(e.userRole))))),go(1)),oo(3e3)))));return t.pipe(Ir(Xt),Oo(e),Vr((([,e])=>Ru(e).isHost)))}}function nk(e){return Qr({boIdList:Ja(Zs).pipe(_o(((e,t)=>[...e,t]),[]),go(e))}).pipe(kr(1e4))}const ik=[{mask:Iu.Connect,key:"audio",value:""},{mask:Iu.Voip,key:"audio",value:"computer"},{mask:Iu.Muted,key:"muted",value:!0},{mask:Au.Connect,key:"bVideoOn",value:!1},{mask:Au.On,key:"bVideoOn",value:!0},{mask:bu.Share,key:"sharerOn",value:!0},{mask:bu.ShareAudio,key:"bShareAudioOn",value:!0}];function sk(e,t){const r=(DO(t)?t.breakoutRoom.mainSessionAttendeeList:t.participants.attendeesList).find((t=>t.userId===Number(e)));return r?{inviterId:r.userId,inviterGuid:r.userGUID,inviterName:r.displayName}:{}}const ak=__.createAgent(),uk=["userRole","bCoHost","bCCEditor","bHold"],dk=__.createAgent(),ck=ME(Fu.getInstance());var lk;const pk=__.createAgent(),hk=ME(Fu.getInstance()),mk=UE("Breakout Room");let gk=(lk=class extends A_{createRooms(e,t){const n=this[r](),i=this[o],{breakoutRoom:{isHugeBO:s,sequenceId:a,rooms:u,controlStatus:d,isEnableBreakoutRoom:c}}=n;if(!c)return Promise.reject({type:Je,reason:"Breakout room feature is not enabled.",errorCode:Na.SUBSESSION_ACCOUNT_DISABLE});if(d===mu.InProgress||d===mu.Closing)return Promise.reject({type:Je,reason:"breakout room has started!",errorCode:Na.SUBSESSION_MISMATCH_STATE});let l;l="string"==typeof e?[e]:"number"==typeof e?Array.from({length:e}).map(((e,t)=>`${fu} ${t+a}`)):e;const p=s?100:50;return l.length<1||u.length+l.length>p?Promise.reject({type:et,reason:"exceed maximum size",errorCode:Na.SUBSESSION_EXCEED_CAPACITY}):(pk.batchCreateBOToken(l),new Promise(((e,r)=>{nk(l.length).subscribe({next({boIdList:r}){let o=r.map(((e,t)=>({boId:e,name:l[t]})));if(t===hu.Automatically){const e=wO(n),t=o.length,r=e.length;o=o.map(((o,n)=>{const i=[];let s=n;for(;s<r;)i.push(e[s]),s+=t;return{...o,attendeeList:i}}))}const s=o.map((({boId:e,name:t,attendeeList:r})=>({boId:e,name:t,attendeeGuidList:r&&r.map((e=>e.userGUID))})));if(i(LT(s)),i(kT(t)),i(UT(a+o.length)),t===hu.Automatically){const t=o.map((e=>({roomId:e.boId,name:e.name,attendeeList:e.attendeeList.map((e=>({userId:e.userId,avatar:e.avatar,displayName:e.displayName})))})));e(t)}else e(o.map((e=>({roomId:e.boId,name:e.name,attendeeList:[]}))))},error(){r({type:Qe,errorCode:Na.INTERNAL_ERROR})}})})))}recreateRooms(e,t){const n=this[r](),i=this[o],{breakoutRoom:{isHugeBO:s,sequenceId:a,controlStatus:u,isEnableBreakoutRoom:d}}=n;if(!d)return Promise.reject({type:Je,reason:"Breakout room feature is not enabled.",errorCode:Na.SUBSESSION_ACCOUNT_DISABLE});if(u===mu.InProgress||u===mu.Closing)return Promise.reject({type:Je,reason:"breakout room has started!",errorCode:Na.SUBSESSION_MISMATCH_STATE});let c;c="string"==typeof e?[e]:"number"==typeof e?Array.from({length:e}).map(((e,t)=>`${fu} ${t+a}`)):e;const l=s?100:50;return c.length<1||c.length>l?Promise.reject({type:et,reason:"exceed maximum size",errorCode:Na.SUBSESSION_EXCEED_CAPACITY}):(pk.batchCreateBOToken(c),new Promise(((e,r)=>{nk(c.length).subscribe((({boIdList:r})=>{let o=r.map(((e,t)=>({boId:e,name:c[t]})));if(t===hu.Automatically){const e=o.length,t=NO(n),r=t.length;o=o.map(((o,n)=>{const i=[];let s=n;for(;s<r;)i.push(t[s]),s+=e;return{...o,attendeeList:i}}))}const s=o.map((({boId:e,name:t,attendeeList:r})=>({boId:e,name:t,attendeeGuidList:r&&r.map((e=>e.userGUID))})));if(i(FT(s)),i(kT(t)),i(UT(a+o.length)),t===hu.Automatically){const t=o.map((e=>({roomId:e.boId,name:e.name,attendeeList:e.attendeeList.map((e=>({userId:e.userId,avatar:e.avatar,displayName:e.displayName})))})));e(t)}else e(o.map((e=>({roomId:e.boId,name:e.name,attendeeList:[]}))))}),(()=>{r({type:Qe,errorCode:Na.INTERNAL_ERROR})}))})))}openRooms(e,t){var o;const n=this[r](),i={isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60,isAutoMoveBackToMainSession:!1,isRoomSelectionEnabled:!1},{breakoutRoom:{controlStatus:s,rooms:a,sequenceId:u,isHugeBO:d}}=n;if(s===mu.InProgress||s===mu.Closing)return Promise.reject({type:Je,reason:"breakout room has started!",errorCode:Na.SUBSESSION_MISMATCH_STATE});if(e.some((e=>-1===a.findIndex((t=>t.boId===e.roomId)))))return Promise.reject({type:et,reason:"roomId is wrong",errorCode:Na.SUBSESSION_MISMATCH_ID});const c=Mu(n);if(e.reduce(((e,t)=>e.concat(t.attendeeList)),[]).some((e=>-1===c.findIndex((t=>t.userId===e.userId)))))return Promise.reject({type:et,reason:"Invalid user",errorCode:Na.SUBSESSION_MISMATCH_USER});const l=e.map((e=>{const{attendeeList:t}=e,r=t.map((e=>{const t=c.find((t=>t.userId===e.userId));return null==t?void 0:t.userGUID}));return{BID:e.roomId,MeetingTitle:e.name,MeetingToken:void 0,Status:gu.Started,HostID:"",ParticipantList:r}})),p=t?{...i,...t}:i,h={ControlStatus:mu.InProgress,NameIndex:u,IsAutoJoinEnabled:+p.isAutoJoinRoom,IsBackToMainSessionEnabled:+p.isBackToMainSessionEnabled,IsTimerEnabled:+p.isTimerEnabled,TimerDuration:p.timerDuration,IsTimerAutoEndEnabled:+p.isTimerAutoEnabled,WaitSeconds:p.waitSeconds<0?0:p.waitSeconds,StartTimeOnMMR:void 0,ItemList:l,IsAutoMovetoMainSessionEnabled:p.isAutoMoveBackToMainSession,IsParticipantsChooseRoomEnabled:+p.isRoomSelectionEnabled};let m=hd(JSON.stringify(h));if(d&&(m=(e=>cd($L(function(e){if(GL)return GL.encode(e);for(var t=e.length,r=new rL(e.length+(e.length>>1)),o=0,n=function(e){r[o++]=e},i=0;i<t;++i){if(o+5>r.length){var s=new rL(o+8+(t-i<<1));s.set(r),r=s}var a=e.charCodeAt(i);a<128?n(a):a<2048?(n(192|a>>6),n(128|63&a)):a>55295&&a<57344?(n(240|(a=65536+(1047552&a)|1023&e.charCodeAt(++i))>>18),n(128|a>>12&63),n(128|a>>6&63),n(128|63&a)):(n(224|a>>12),n(128|a>>6&63),n(128|63&a))}return DL(r,0,o)}(e))))(m)),null!==(o=Ru(n))&&void 0!==o&&o.isHost)pk.startBO(m);else{const e=MO(n);e&&pk.coHostStartBO(m,e.userId)}return Ka(ia,(e=>e.controlStatus===mu.InProgress))}joinRoom(e){const t=this[r](),o=Ru(t),{breakoutRoom:{controlStatus:n,rooms:i,options:{isRoomSelectionEnabled:s},currentRoom:{status:a,boId:u}},meeting:{userGUID:d}}=t;if(n!==mu.InProgress)return Promise.reject({type:Je,reason:"Breakout room is not started",errorCode:Na.SUBSESSION_MISMATCH_STATE});if(null!=o&&o.isHost){const t=i.find((t=>t.boId===e));if(!t)return Promise.reject({type:et,reason:"Room ID is not correct",errorCode:Na.SUBSESSION_MISMATCH_ID});pk.joinBO(t.boId)}else if(null!=o&&o.bCoHost){if(!i.find((t=>t.boId===e)))return Promise.reject({type:et,reason:"Room ID is not correct",errorCode:Na.SUBSESSION_MISMATCH_ID});{const r=MO(t);if(!r)return Promise.reject({type:Je,reason:"No host in the meeting, cannot join the room",errorCode:Na.SUBSESSION_MISMATCH_STATE});pk.wantJoinBO(null==r?void 0:r.userId,e)}}else{if(a===Su.InRoom&&u===e)return Promise.resolve("");{let r=!1;const o=QL(i,d);if(o&&o.boId===e)pk.joinBO(o.boId);else if(s)if(-1!==i.findIndex((t=>t.boId===e))){const r=MO(t);if(!r)return Promise.reject({type:Je,reason:"No host in the meeting, cannot join the room",errorCode:Na.SUBSESSION_MISMATCH_STATE});pk.wantJoinBO(r.userId,e)}else r=!0;else r=!0;if(r)return Promise.reject({type:et,reason:"Room ID is not correct",errorCode:Na.SUBSESSION_MISMATCH_ID})}}return Ka(sa,(t=>t.boId===e))}leaveRoom(){const e=this[r](),t=this[o],{breakoutRoom:{controlStatus:n,options:i,currentRoom:{status:s}}}=e;if(n!==mu.InProgress&&n!==mu.Closing||s!==Su.InRoom)return Promise.reject({type:Je,errorCode:Na.SUBSESSION_MISMATCH_STATE});{const r=Ou(e);if(!i.isBackToMainSessionEnabled&&!r)return Promise.reject({type:Ze,reason:"Can not return main session during the breakout room",errorCode:Na.SUBSESSION_EXIT_RESTRICTED});ZL().forEach((e=>t(e)))}return Promise.resolve("")}askForHelp(){const e=this[r](),{breakoutRoom:{controlStatus:t,mainSessionAttendeeList:o,currentRoom:{status:n}},participants:{attendeesList:i}}=e,s=Ou(e);if(t!==mu.InProgress||n!==Su.InRoom)return Promise.reject({type:Je,reason:"you are not in breakout room",errorCode:Na.SUBSESSION_MISMATCH_STATE});if(s)return Promise.reject({type:Je,reason:"host or co-host can not ask for help",errorCode:Na.SUBSESSION_MISMATCH_USER});{const e=o.find((e=>e.isHost));if(e){if(i.findIndex((t=>t.zoomID===e.zoomID))>-1)return Promise.reject({type:Je,reason:"host is in room",errorCode:Na.SUBSESSION_MISMATCH_STATE});pk.askForHelpBO(e.userId)}}return Ka(na,(e=>e.result===yu.Received))}postponeHelping(e){const t=this[r](),n=this[o],{breakoutRoom:{mainSessionAttendeeList:i,currentRoom:{status:s}},participants:{attendeesList:a}}=t;let u=a;return s===Su.InRoom&&(u=i),u.findIndex((t=>t.userId===e))>-1?(pk.askForHelpResultBO(e,yu.Ignore),n(JT(yu.Ignore)),Promise.resolve("")):Promise.reject({type:et,reason:"user id is not correct",errorCode:Na.SUBSESSION_MISMATCH_USER})}broadcast(e){const{breakoutRoom:{isEnableBOBroadcast:t}}=this[r]();return t?e?vb.beginEncrypt({text:e,type:hb.BO_BROADCAST}).then((e=>(pk.broadcastBO(e),Promise.resolve("")))):Promise.reject({type:et,reason:"content empty",errorCode:Na.SUBSESSION_BROADCAST_INVALID_CONTENT}):Promise.reject({type:Je,reason:"Cannot broadcast message due to the feature is not enable",errorCode:Na.SUBSESSION_BROADCAST_DISABLE})}startBroadcastVoice(){const e=this[r](),t=this[o],{breakoutRoom:{isEnableBOBroadcast:n,isEnableBOBroadcastVoice:i,isBroadcastVoice:s}}=e;if(n&&i){if(DO(e))return Promise.reject({type:Je,reason:"Cannot broadcast voice in the room",errorCode:Na.SUBSESSION_BROADCAST_VOICE_RESTRICTED});{if(s)return Promise.resolve("");const r=Ru(e);return(null==r?void 0:r.audio)===Ee.Computer&&!1===r.muted?(pk.broadcastVoiceReq(!0),hk.broadcastVoiceToBreakoutRoom(!0),t(oR(!0)),Promise.resolve("")):Promise.reject({type:Je,reason:"Start audio and unmute to broadcast",errorCode:Na.SUBSESSION_BROADCAST_VOICE_MISMATCH_STATE})}}return Promise.reject({type:Je,reason:"Cannot broadcast voice due to the feature is not enable",errorCode:Na.SUBSESSION_BROADCAST_VOICE_DISABLE})}stopBroadcastVoice(){const e=this[r](),t=this[o],{breakoutRoom:{isBroadcastVoice:n}}=e;return n?(pk.broadcastVoiceReq(!1),hk.broadcastVoiceToBreakoutRoom(!1),t(oR(!1)),Promise.resolve("")):Promise.reject({type:Je,reason:"Cannot stop broadcast voice due to it is not started",errorCode:Na.SUBSESSION_BROADCAST_VOICE_MISMATCH_STATE})}assignUserToRoom(e,t){const o=this[r](),{breakoutRoom:{rooms:n}}=o,i=wO(o).find((t=>t.userId===e));if(!(i&&n.findIndex((e=>e.boId===t))>-1))return Promise.reject({type:et,reason:"Invalid user",errorCode:Na.SUBSESSION_MISMATCH_USER});var s;if(null!==(s=Ru(o))&&void 0!==s&&s.isHost)pk.assignToBO(e,t);else{const e=MO(o);e&&pk.coHostAssignToBO(i.userGUID,t,e.userId)}return Ka(ia,(e=>{const{controlStatus:r,roomList:o}=e,n=o.find((e=>e.boId===t));return r===mu.InProgress&&n&&n.attendeeGuidList.includes(i.userGUID)}))}moveUserToRoom(e,t){const o=this[r](),{breakoutRoom:{rooms:n,mainSessionAttendeeList:i},participants:{attendeesList:s}}=o,a=(DO(o)?i:s).find((t=>t.userId===e));if(!a)return Promise.reject({type:et,reason:"user id not correct",errorCode:Na.SUBSESSION_MISMATCH_USER});{const r=QL(n,a.userGUID);if(!r)return Promise.reject({type:Je,reason:"user not in a room",errorCode:Na.SUBSESSION_MISMATCH_USER});if(r.boId===t)return Promise.reject({type:Je,reason:"user already in the target room",errorCode:Na.SUBSESSION_MISMATCH_STATE});{const r=n.find((e=>e.boId===t));if(!r)return Promise.reject({type:et,reason:"invalid room id",errorCode:Na.SUBSESSION_MISMATCH_ID});var u;if(null!==(u=Ru(o))&&void 0!==u&&u.isHost)pk.switchBO(e,r.boId);else{const e=MO(o);e&&pk.coHostAssignToBO(a.userGUID,r.boId,e.userId)}}}return Ka(ia,(e=>{const{controlStatus:r,roomList:o}=e,n=o.find((e=>e.boId===t));return r===mu.InProgress&&n&&n.attendeeGuidList.includes(a.userGUID)}))}moveBackToMainSession(e){const t=this[r](),{breakoutRoom:{rooms:o,mainSessionAttendeeList:n},participants:{attendeesList:i}}=t,s=(DO(t)?n:i).find((t=>t.userId===e));if(!s)return Promise.reject({type:et,reason:"user id not correct",errorCode:Na.SUBSESSION_MISMATCH_USER});if(!QL(o,s.userGUID))return Promise.reject({type:Je,reason:"user not in a room",errorCode:Na.SUBSESSION_MISMATCH_USER});var a;if(null!==(a=Ru(t))&&void 0!==a&&a.isHost)pk.moveToMainSession(s.userGUID);else{const e=MO(t);e&&pk.coHostMoveToMainSession(s.userGUID,e.userId)}return Ka(ia,(e=>{const{controlStatus:t,roomList:r}=e;return t===mu.InProgress&&r.some((e=>{const{attendeeGuidList:t}=e;return t.includes(s.userGUID)}))}))}closeRoom(){const e=this[r](),{breakoutRoom:{controlStatus:t}}=e;if(t!==mu.InProgress)return Promise.reject({type:Je,reason:"room is not started",errorCode:Na.SUBSESSION_MISMATCH_STATE});var o;if(null!==(o=Ru(e))&&void 0!==o&&o.isHost)pk.stopBO(mu.Closing);else{const t=MO(e);t&&pk.coHostStopBO(mu.Closing,t.userId)}return Ka(ia,(e=>e.controlStatus===mu.Closing))}loadPreAssignedRooms(){const e=this[r](),{meeting:{meetingOptions:t},breakoutRoom:{controlStatus:o}}=e;return!t.isAllowBreakoutRoomPreAssign||o!==mu.NotStarted&&o!==mu.Closed?Promise.reject({type:Je,errorCode:Na.SUBSESSION_MISMATCH_STATE}):(pk.preAssignBreakoutRoom(),Ka(da))}getUnassignedAttendeeList(){const e=this[r](),t=Ru(e);return null!=t&&t.isHost||null!=t&&t.bCoHost?wO(e).map((e=>CO(e))):[]}getRoomList(){const e=this[r](),{breakoutRoom:{rooms:t,currentRoom:{status:o,boId:n},mainSessionAttendeeList:i,inRoomUserActivityStatusMap:s,options:{isRoomSelectionEnabled:a}},participants:{attendeesList:u}}=e,d=Ru(e);if(d&&(d.isHost||d.bCoHost||a)){const e=o===Su.InRoom,r=e?i:u;return t.map((t=>{const{attendeeGuidList:o,boId:i,name:a}=t,u=(o||[]).map((e=>r.find((t=>t.userGUID===e)))).filter((e=>!(null!=e&&e.isHost))).filter(Boolean);return e&&d.isHost&&i===n&&u.unshift(d),{roomId:i,name:a,attendeeList:u.filter((e=>!!e)).map((e=>{var t;const r=null!==(t=s[e.userGUID])&&void 0!==t?t:{};return{userId:e.userId,displayName:e.displayName,avatar:e.avatar,isInRoom:e.bid===i,userGuid:e.userGUID,...r}}))}}))}return e.breakoutRoom.rooms.map((e=>{const{boId:t,name:r}=e;return{roomId:t,name:r,attendeeList:[]}}))}getAttendeeStatus(){return this[r]().breakoutRoom.currentRoom.status}getRoomStatus(){return this[r]().breakoutRoom.controlStatus}getCurrentRoom(){const e=this[r](),{breakoutRoom:{currentRoom:{status:t,name:o,boId:n}}}=e;return{attendeeStatus:t,name:o,roomId:n}}getRoomOptions(){const e=this[r](),{breakoutRoom:{options:t}}=e,{whoStart:o,whoStop:n,...i}=t;return{...i}}isBreakoutRoomEnabled(){const e=this[r](),{breakoutRoom:{isEnableBreakoutRoom:t}}=e;return!!t}},bS(lk.prototype,"createRooms",[MS,LS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"createRooms"),lk.prototype),bS(lk.prototype,"recreateRooms",[MS,LS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"recreateRooms"),lk.prototype),bS(lk.prototype,"openRooms",[MS,LS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"openRooms"),lk.prototype),bS(lk.prototype,"joinRoom",[MS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"joinRoom"),lk.prototype),bS(lk.prototype,"leaveRoom",[MS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"leaveRoom"),lk.prototype),bS(lk.prototype,"askForHelp",[MS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"askForHelp"),lk.prototype),bS(lk.prototype,"postponeHelping",[kS,MS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"postponeHelping"),lk.prototype),bS(lk.prototype,"broadcast",[LS,MS],Object.getOwnPropertyDescriptor(lk.prototype,"broadcast"),lk.prototype),bS(lk.prototype,"startBroadcastVoice",[kS,MS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"startBroadcastVoice"),lk.prototype),bS(lk.prototype,"stopBroadcastVoice",[kS,MS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"stopBroadcastVoice"),lk.prototype),bS(lk.prototype,"assignUserToRoom",[LS,MS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"assignUserToRoom"),lk.prototype),bS(lk.prototype,"moveUserToRoom",[LS,MS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"moveUserToRoom"),lk.prototype),bS(lk.prototype,"moveBackToMainSession",[LS,MS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"moveBackToMainSession"),lk.prototype),bS(lk.prototype,"closeRoom",[LS,MS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"closeRoom"),lk.prototype),bS(lk.prototype,"loadPreAssignedRooms",[kS,MS,mk],Object.getOwnPropertyDescriptor(lk.prototype,"loadPreAssignedRooms"),lk.prototype),lk);const Sk={breakoutRoomSharingEpics0:(e,t)=>Iv(e,Ov).pipe(co((e=>{var t;const{payload:{body:r}}=e;return null==r||null===(t=r.update)||void 0===t?void 0:t.some((e=>void 0!==e.bShareToBORooms||void 0!==e.bShareOn))})),Oo(t),Vr((([e,t])=>{const{payload:{body:{update:r}}}=e,{breakoutRoom:{mainSessionAttendeeList:o}}=t,n=r.filter((e=>e.bShareOn&&e.bShareToBORooms)),i=r.filter((e=>!e.bShareOn||!e.bShareToBORooms)),s=o.filter((e=>e.sharerOn&&e.bShareToBORooms));return n.length>0&&n.forEach((e=>{-1===s.findIndex((t=>t.userId===e.id))&&Ga(os,{...e,isFromMainSession:!0})})),i.length>0&&i.filter((e=>s.findIndex((t=>t.userId===e.id))>-1)).forEach((e=>{Ga(ns,{...e,isFromMainSession:!0})})),r.map((e=>{if(e.bShareOn&&e.bShareToBORooms){if(0===o.filter((t=>t.sharerOn&&t.bShareToBORooms&&t.userId!==e.id)).length)return{activeNodeID:e.id,bStatus:1,ssrc:e.shareSsrc};{const t=o.find((t=>t.userId===e.id));if(null!=t&&t.isHost)return{activeNodeID:e.id,bStatus:1,ssrc:e.shareSsrc}}}else if(!e.bShareOn||!e.bShareToBORooms){const t=o.filter((e=>e.bShareToBORooms&&e.sharerOn));if(1===t.length&&t[0].userId===e.id)return{activeNodeID:e.id,bStatus:0,ssrc:0};{const r=t.filter((t=>t.userId!==e.id)),o=r.find((e=>e.isHost));if(o)return{activeNodeID:o.userId,bStatus:1,ssrc:o.shareSsrc};{const e=r[0];if(e)return{activeNodeID:e.userId,bStatus:1,ssrc:e.shareSsrc}}}}})).filter(Boolean)})),Gr((e=>{const{share:{status:r},meeting:{userId:o}}=t.value,n=[];return e.map((e=>{const{activeNodeID:i,bStatus:s,ssrc:a}=e,u=1===s;n.push(nA(u)),u&&r!==q.End&&(dk.stopSharing(o),ck.stopDesktopSharing(),n.push(ZI(q.End)),Ga(ts));let d={activeNodeID:i,bStatus:s,ssrc:a,fromMainSession:!0};if(!u){const{participants:{attendeesList:e}}=t.value,r=e.filter((e=>e.sharerOn));if(r.length>0){const e=r[0];d={activeNodeID:e.userId,bStatus:1,ssrc:e.shareSsrc||0}}}n.push($S({evt:Tv,body:d}))})),Cr(n)}))),breakoutRoomSharingEpics1:(e,t)=>Iv(e,Mv).pipe(bo((r=>{const{payload:{body:{userID:o,confID:n}}}=r;return io(...["sharing","audio"].map((r=>function(e,t,r,o,n){return Iv(t,"audio"===e?wv:Rv).pipe(go(1),Ro((t=>{const{payload:{body:{encryptKey:i,additionalType:s}}}=t,{media:{sharingDecodeStatus:a,audioDecodeStatus:u},meeting:{svcUrl:d,meetingNumber:c,conId:l,zoomId:p,meetingId:h}}=r.value;Md(e,"success","audio"===e?u:a).subscribe((([,t])=>{if(t){const t=`wss://${d}/wc/media/${c}?type=${"audio"===e?"ma":"ms"}&cid=${l}&mode=1`;JL.createMainSessionChannel(e,t),JL.updateMediaParams({iVType:"audio"===e?lb.AUDIO_DECODE:lb.SHARING_DECODE,isFromMainSession:!0,updateParams:{userId:o,sn:gd(p),confId:n,encryptType:s,encryptKey:gd(i),meetingId:h,meetingNumber:c}});const{breakoutRoom:{mainSessionAttendeeList:a}}=r.value;if((null==a?void 0:a.length)>0){const t=a.map((e=>({userid:e.userId,sn:e.zoomID&&gd(e.zoomID)})));JL.updateUserMediaSN({added:t,isFromMainSession:!0,iVType:"audio"===e?lb.AUDIO_DECODE:lb.SHARING_DECODE})}}}))})),Gr((()=>nr)))}(r,e,t,o,n))))})))},vk={epics0:(e,t)=>e.pipe(HS(`${Jg}`),bo((e=>{const{breakoutRoom:r,meeting:{meetingOptions:o}}=t.value,{payload:{hugeBO:n,elapsed:i}}=e,s=[];return r&&(o&&(s.push(ZT(n&&!0===o.isBO100Enabled)),s.push(tR({isEnableBreakoutRoom:o.isEnableBreakoutRoom,isEnableBOBroadcast:o.isEnableBOBroadcast,isEnableBOViewActivityStatus:o.isEnableBOViewActivityStatus,isEnableBOBroadcastVoice:o.isEnableBOBroadcastVoice}))),r.currentRoom.boConfId&&s.push(qS()),void 0!==i&&s.push(VT(i))),Cr(s)}))),epics1:e=>_v(e,4174).pipe(Ro((e=>{Ga(Zs,e.payload.body.bid)})),Eo(nr)),epics2:(e,t)=>bv(e,7950).pipe(Oo(t),bo((([e,r])=>{const{payload:{body:{proto:o}}}=e,{breakoutRoom:{isHugeBO:n,currentRoom:{status:i,boId:s}},meeting:{userGUID:a}}=r;let u=o;n&&(u=function(e){if(zL)return zL.decode(e);var t=function(e){for(var t="",r=0;;){var o=e[r++],n=(o>127)+(o>223)+(o>239);if(r+n>e.length)return[t,DL(e,r-1)];n?3==n?(o=((15&o)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,t+=String.fromCharCode(55296|o>>10,56320|1023&o)):t+=1&n?String.fromCharCode((31&o)<<6|63&e[r++]):String.fromCharCode((15&o)<<12|(63&e[r++])<<6|63&e[r++]):t+=String.fromCharCode(o)}}(e),r=t[0];return t[1].length&&NL(8),r}(function(e){return function(e,t,r){var o=e.length;if(!o||r&&r.f&&!r.l)return t||new rL(0);var n=!t||r,i=!r||r.i;r||(r={}),t||(t=new rL(3*o));var s=function(e){var r=t.length;if(e>r){var o=new rL(Math.max(2*r,e));o.set(t),t=o}},a=r.f||0,u=r.p||0,d=r.b||0,c=r.l,l=r.d,p=r.m,h=r.n,m=8*o;do{if(!c){a=TL(e,u,1);var g=TL(e,u+1,3);if(u+=3,!g){var S=e[(R=OL(u)+4)-4]|e[R-3]<<8,v=R+S;if(v>o){i&&NL(0);break}n&&s(d+S),t.set(e.subarray(R,v),d),r.b=d+=S,r.p=u=8*v,r.f=a;continue}if(1==g)c=IL,l=bL,p=9,h=5;else if(2==g){var f=TL(e,u,31)+257,y=TL(e,u+10,15)+4,E=f+TL(e,u+5,31)+1;u+=14;for(var _=new rL(E),I=new rL(19),A=0;A<y;++A)I[aL[A]]=TL(e,u+3*A,7);u+=3*y;var b=CL(I),C=(1<<b)-1,T=fL(I,b,1);for(A=0;A<E;){var R,O=T[TL(e,u,C)];if(u+=15&O,(R=O>>>4)<16)_[A++]=R;else{var D=0,w=0;for(16==R?(w=3+TL(e,u,3),u+=2,D=_[A-1]):17==R?(w=3+TL(e,u,7),u+=3):18==R&&(w=11+TL(e,u,127),u+=7);w--;)_[A++]=D}}var N=_.subarray(0,f),M=_.subarray(f);p=CL(N),h=CL(M),c=fL(N,p,1),l=fL(M,h,1)}else NL(1);if(u>m){i&&NL(0);break}}n&&s(d+131072);for(var P=(1<<p)-1,L=(1<<h)-1,k=u;;k=u){var U=(D=c[RL(e,u)&P])>>>4;if((u+=15&D)>m){i&&NL(0);break}if(D||NL(2),U<256)t[d++]=U;else{if(256==U){k=u,c=null;break}var V=U-254;if(U>264){var B=iL[A=U-257];V=TL(e,u,(1<<B)-1)+cL[A],u+=B}var H=l[RL(e,u)&L],j=H>>>4;if(H||NL(3),u+=15&H,M=hL[j],j>3&&(B=sL[j],M+=RL(e,u)&(1<<B)-1,u+=B),u>m){i&&NL(0);break}n&&s(d+131072);for(var F=d+V;d<F;d+=4)t[d]=t[d-M],t[d+1]=t[d+1-M],t[d+2]=t[d+2-M],t[d+3]=t[d+3-M];d=F}}r.l=c,r.p=k,r.b=d,r.f=a,c&&(a=1,r.m=p,r.d=l,r.n=h)}while(!a);return d==t.length?t:DL(t,0,d)}(e.subarray(function(e){31==e[0]&&139==e[1]&&8==e[2]||NL(6,"invalid gzip data");var t=e[3],r=10;4&t&&(r+=e[10]|2+(e[11]<<8));for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[r++]);return r+(2&t)}(e),-8),new rL(function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}(e)))}(gd(o))));const d=[];let c;try{const r=JSON.parse(pd(u)),{ControlStatus:o,NameIndex:n,IsAutoJoinEnabled:l,IsBackToMainSessionEnabled:p,IsParticipantsChooseRoomEnabled:h,IsTimerEnabled:m,TimerDuration:g,IsTimerAutoEndEnabled:S,WaitSeconds:v,StartTimeOnMMR:f,ItemList:y,WhoStart:E,WhoStop:_,IsAutoMovetoMainSessionEnabled:I}=r,A={isAutoJoinRoom:l,isBackToMainSessionEnabled:p,isTimerEnabled:m,timerDuration:g,isTimerAutoEnabled:S,waitSeconds:v,isAutoMoveBackToMainSession:I,isRoomSelectionEnabled:h,whoStart:E,whoStop:_};d.push(HT(A)),d.push(BT(f)),d.push(UT(n)),d.push(jT(o));const b=y&&y.map((e=>({boId:e.BID,name:e.MeetingTitle,boStatus:e.Status,hostId:e.HostID,attendeeGuidList:e.ParticipantList||[]})))||[];switch(d.push(FT(b)),Ga(ia,{controlStatus:o,roomList:b}),o){case mu.InProgress:if(i!==Su.InRoom&&i!==Su.Joining){const e=function(e,t){const{meeting:{isHost:r,userGUID:o},breakoutRoom:{currentRoom:{status:n,boId:i}}}=t.value,s=by.get(qL),a=[];if(s)try{const{status:u,boId:d}=JSON.parse(s);if(u===Su.Invited)if(r)YL();else{const t=QL(e,o);t&&(a.push(rk(t)),n!==Su.Initial&&i===t.boId||Ga(Xs,{roomId:t.boId,name:t.name}))}else if(u===Su.InRoom){let n;if(n=r?e.find((e=>e.boId===d)):QL(e,o),n){a.push(rk(n));const e=n.boId;Pd(t).subscribe((()=>{__.createAgent().joinBO(e)}))}YL()}}catch(e){console.error(e)}return a}(b,t);if(0===e.length){const e=QL(b,a);e&&d.push(rk(e))}else d.push(...e)}else if(i===Su.InRoom&&e.type===`${JS}`){const e=QL(b,a);e&&ok(t).subscribe((t=>{s===e.boId||t||ak.joinBO(e.boId)}))}A.isTimerEnabled&&A.timerDuration>0&&(c=function(e,t,r){return ok(e).pipe(Oo(e),bo((([o,n])=>{const{breakoutRoom:{currentRoom:{status:i},meetingElapsedTime:s},meeting:{joinMeetingTimeStamp:a}}=n,u=a-1e3*s+1e3*r+1e3*t;if(performance.now()<u){if(o)return no(1e3).pipe(Vr((()=>Math.floor((u-performance.now())/1e3))),Oo(e),To((([e,t])=>{const{breakoutRoom:{controlStatus:r,currentRoom:{status:o}},socket:{zoomSocketStatus:n},meeting:{isHost:i}}=t;return e>=0&&i&&r===mu.InProgress&&(o===Su.InRoom||o===Su.MainSession||o===Su.Initial)&&n===M_.Connected})),Ro((([e])=>{Ga(ta,{countdown:e})})),co((([e])=>0===e)),Ro((([,e])=>{const{breakoutRoom:{options:t}}=e;t.isTimerAutoEnabled?__.createAgent().stopBO(mu.Closing):Ga(aa)})),Gr((()=>nr)));if(i===Su.InRoom)return no(1e3).pipe(Vr((()=>Math.floor((u-performance.now())/1e3))),Oo(e),To((([e,t])=>{const{breakoutRoom:{currentRoom:{status:r}},meeting:{isHost:o},socket:{zoomSocketStatus:n}}=t;return e>=0&&r===Su.InRoom&&!o&&n===M_.Connected})),Ro((([e])=>{Ga(ta,{countdown:e})})),Gr((()=>nr)))}return nr})))}(t,A.timerDuration,f));break;case mu.Closing:c=ok(t).pipe(co((e=>e)),Gr((()=>{const e=[],{breakoutRoom:{closingRoomTime:r,currentRoom:{status:o}},participants:{attendeesList:n}}=t.value;let i=A.waitSeconds;if(0!==r&&A.waitSeconds>0){const e=Math.floor((performance.now()-r)/1e3);i=Math.max(A.waitSeconds-e,0)}if(0===i)return ak.stopBO(mu.Closed),nr;{if(o!==Su.InRoom&&n.length>1&&n.every((e=>!e.bid)))return ak.stopBO(mu.Closed),nr;r||e.push(qT(performance.now()));const s=performance.now()+1e3*i;return io(Cr(e),oo(0,1e3).pipe(Vr((()=>Math.floor((s-performance.now())/1e3))),Oo(t),To((([,e])=>{const{breakoutRoom:{controlStatus:t},meeting:{isHost:r},socket:{zoomSocketStatus:o}}=e;return t===mu.Closing&&o===M_.Connected&&r})),Ro((([e])=>{e>=0&&Ga(ea,{countdown:e})})),co((([e])=>e<=0)),Ro((()=>{ak.stopBO(mu.Closed)})),Gr((()=>nr))))}})));break;case mu.Closed:d.push(qT(0)),i===Su.Leaving?d.push(xT(Su.MainSession)):i===Su.Invited?d.push(xT(Su.Initial)):i!==Su.InRoom&&i!==Su.Joining||d.push(...ZL()),YL()}}catch(e){console.error(e)}return c?io(Cr(d),c):Cr(d)}))),epics3:(e,t)=>bv(e,4194).pipe(Oo(t),bo((([e,t])=>{const{payload:{body:{bid:r,botoken:o,confID:n}}}=e,{meeting:{isHost:i},breakoutRoom:{rooms:s,currentRoom:{status:a}}}=t,u=[],d=s.find((e=>e.boId===r));return d&&(u.push(rk(d,i)),u.push($T(n)),u.push(GT(o)),Ga(sa,{boId:r}),i||a!==Su.InRoom?u.push(...XL(d.name,a)):u.push(...ek(d.name))),Cr(u)}))),epics4:(e,t)=>e.pipe(HS(`${$S}`,`${JS}`),co((e=>7949===e.payload.evt)),Oo(t),Gr((([e,r])=>{var o;const{payload:{body:n}}=e,{meeting:{userGUID:i},breakoutRoom:{rooms:s,options:{isAutoJoinRoom:a,isAutoMoveBackToMainSession:u},currentRoom:{status:d},mainSessionAttendeeList:c},participants:{attendeesList:l}}=r,{commandType:p}=n,h=[];let m;const g=null===(o=(tk(d)?l:c).find((e=>e.userGUID===i)))||void 0===o?void 0:o.userId;switch(p){case vu.Join:{const{targetBID:e,botoken:t,confID:o,joinReason:u,requestSourceID:d}=n,c=QL(s,i);if(c&&c.boId===e){h.push($T(o)),h.push(GT(t));const n=Number(u)===_u.Active&&g===Number(d);a||n?(n&&Ga(sa,{boId:e}),h.push(...XL(c.name))):(by.set(Cy.WebclientBreakoutRoomCommand,p,Iy.SessionStorage),Ga(Xs,{roomId:e,name:c.name,...sk(d,r)}))}break}case vu.Switch:{const{targetBID:e,botoken:t,confID:o,joinMethod:u,requestSourceID:c}=n,l=QL(s,i);l&&l.boId===e&&(h.push(WT({boId:l.boId,boToken:t,boConfId:o,name:l.name})),g===Number(c)&&Number(u)===Eu.AskToLeave&&Ga(sa,{boId:e}),d===Su.Invited?(by.set(Cy.WebclientBreakoutRoomCommand,p,Iy.SessionStorage),a||g===Number(c)?h.push(...XL(l.name)):Ga(Xs,{roomId:e,name:l.name,...sk(c,r)})):h.push(...ek(l.name)));break}case vu.Leave:{const{waitTime:e,joinMethod:o}=n;if(tk(d))h.push(WT({boId:"",boToken:"",boConfId:"",status:Su.Initial}));else{const i=Number(e);if(i>0){const e=performance.now()+1e3*i;m=oo(0,1e3).pipe(Vr((()=>Math.floor((e-performance.now())/1e3))),Oo(t),To((([e,t])=>{const{breakoutRoom:{controlStatus:r,currentRoom:{status:o}},meeting:{isHost:n},socket:{zoomSocketStatus:i}}=t;return e>=0&&i===M_.Connected&&r===mu.Closing&&o===Su.InRoom&&!n})),Ro((([e])=>{e>=0&&Ga(ea,{countdown:e})})),Eo(nr))}else if(Number(o)!==Eu.AskToLeave||u)h.push(...ZL());else{var S,v,f;const{requestSourceID:e}=n,t=Number(e),{participants:{attendeesList:o}}=r;let i=o.find((e=>e.userId===t));if(!i){const{breakoutRoom:{mainSessionAttendeeList:e}}=r;i=e.find((e=>e.userId===t))}Ga(la,{inviterId:null===(S=i)||void 0===S?void 0:S.userId,inviterGuid:null===(v=i)||void 0===v?void 0:v.userGUID,inviterName:null===(f=i)||void 0===f?void 0:f.displayName})}YL()}break}case vu.Broadcast:{const{textContent:e,requestID:t}=n;if(e){const{meeting:{encType:o},participants:{attendeesList:n},breakoutRoom:{mainSessionAttendeeList:i}}=r;let s="";if(o===pb.AES_GCM){const e=(tk(d)?n:i).find((e=>e.userId===Number(t)));e&&(s=e.zoomID)}m=Cr(vb.beginDecrypt({decryptedText:e,type:hb.BO_BROADCAST,zoomId:s}).then((({message:e})=>(Ga(ra,{message:e}),KT(e)))))}break}case vu.HelpReq:{const{requestID:e}=n,{breakoutRoom:{mainSessionAttendeeList:t,rooms:o,currentRoom:{boId:i},hostReplyToQuestionerType:s,hostReplyToRequestId:a},participants:{attendeesList:u}}=r;if(e){if(d===Su.InRoom){const r=t.find((t=>t.userId===e));if(r&&r.bid===i){ak.askForHelpResultBO(e,yu.AlreadyInRoom);break}}if(s===yu.Received&&a!==e)ak.askForHelpResultBO(e,yu.Busy);else{ak.askForHelpResultBO(e,yu.Received),h.push(JT(yu.Received),QT(e));const r=(d===Su.InRoom?t:u).find((t=>t.userId===e));if(r){const t=r.bid,n=o.find((e=>e.boId===t));n&&Ga(oa,{userId:e,userGuid:r.userGUID,displayName:r.displayName,roomName:n.name,roomId:n.boId})}}}break}case vu.HelpRes:{const{helpResult:e}=n;Ga(na,{result:Number(e)});break}case vu.BOActivity:{var y;const{activityRoster:e,activityTalking:t,requestID:o}=n,i=null===(y=(DO(r)?r.breakoutRoom.mainSessionAttendeeList:r.participants.attendeesList).find((e=>e.userId===o)))||void 0===y?void 0:y.userGUID;if(i){const{breakoutRoom:{rooms:n}}=r,s=QL(n,i),a=function(e,t){const r={isTalking:1===t};return ik.forEach((t=>{const{mask:o,key:n,value:i}=t;(o&e)===o&&Object.assign(r,{[`${n}`]:i})})),r}(Number(e),Number(t));h.push(rR({userGuid:i,status:a})),Ga(pa,{...a,userId:o,userGuid:i,roomId:null==s?void 0:s.boId,roomName:null==s?void 0:s.name})}break}}return m?io(Cr(h),m):Cr(h)}))),epics5:(e,t)=>Iv(e,Mv).pipe(Oo(t),bo((([e,t])=>{const{payload:{body:{res:r,elapsed:o}}}=e,n=[];return r===JD.MeetingHasClosed||r===JD.UserHasBeenRemoved?(YL(),n.push(...EO(t,!1))):r===JD.Success&&(n.push(VT(o)),n.push(xT(Su.InRoom)),by.set(Cy.WebclientBreakoutRoomAttendeeStatus,JSON.stringify({status:Su.InRoom,boId:t.breakoutRoom.currentRoom.boId}),Iy.SessionStorage)),Cr(n)}))),epics6:e=>Iv(e,Ov).pipe(Vr((e=>uf(e.payload.body))),Gr((e=>{const t=[YT(e)];return Ga(ca),Cr(t)}))),epics7:(e,t)=>Iv(e,Ov).pipe(Vr((e=>uf(e.payload.body))),Vr((e=>{const t=[];return["add","update"].forEach((r=>e[r]&&t.push(...e[r]))),t.filter((e=>[...uk,"bAudioUnencrytped"].some((t=>void 0!==e[t]))))})),co((e=>e.length>0)),Ir(Xt),Gr((e=>{const r=[],{participants:{attendeesList:o},breakoutRoom:{mainSessionAttendeeList:n,isUserRoleUpdated:i},meeting:{userId:s}}=t.value,a=e.map((e=>{const t=n.find((t=>t.userId===e.userId)),a=o.find((e=>e.userGUID===(null==t?void 0:t.userGUID)));if(a){if(void 0!==e.bCCEditor&&r.push(fT({editorId:e.bCCEditor?a.userId:"",isEditor:!!e.bCCEditor,editorZoomId:e.bCCEditor?a.zoomID:""})),delete e.bRaiseHand,delete e.bCapsPinMultiVideo,delete e.bInFailover,delete e.uniqueIndex,!i&&a.userId===s){const o={};du(e.userRole)?Object.assign(o,e):(n.some((e=>e.isHost))||void 0!==e.bAudioUnencrytped)&&Object.assign(o,t),void 0!==o.userId&&(r.push(eR(!0)),Ga(ua,e))}return{...e,userId:a.userId}}})).filter((e=>!!e&&uk.some((t=>void 0!==e[t]))));return a.length>0&&(Ga(Mo,a),r.push(Kv({update:a}))),Cr(r)}))),epics8:e=>Iv(e,Dv).pipe(co((e=>{const{payload:{body:t}}=e;return void 0!==(null==t?void 0:t.bAllowAttendeeRename)||void 0!==(null==t?void 0:t.chatPriviledge)||void 0!==(null==t?void 0:t.lockShare)})),Vr((e=>{const{payload:{body:t}}=e;return void 0!==t.bAllowAttendeeRename?Qg(e.payload.body):void 0!==t.chatPriviledge?eT(t.chatPriviledge):void 0!==t.lockShare?qI(t.lockShare):void 0}))),epics9:(e,t)=>_v(e,Ov).pipe(Oo(t),co((([,e])=>{const{meeting:{isHost:t},breakoutRoom:{controlStatus:r,currentRoom:{status:o}}}=e;return t&&r===mu.Closing&&o!==Su.InRoom})),Ir(Xt),Ro((()=>{const{participants:{attendeesList:e}}=t.value;e.every((e=>!e.bid))&&e.length>1&&ak.stopBO(mu.Closed)})),Eo(nr)),epics10:(e,t)=>_v(e,4214).pipe(Oo(t),bo((([e,r])=>{const{payload:{body:{proto:o}}}=e,{breakoutRoom:{rooms:n,isHugeBO:i}}=r;try{const e=JSON.parse(pd(o)),r=[];if(e&&e.PreAssignBoList&&Array.isArray(e.PreAssignBoList)){const o=e.PreAssignBoList.map((e=>({name:e.BoName,emails:e.email})));r.push(XT(o));const s=i?100:50;if(n.length+o.length<s){const e=o.map((e=>e.name));return ak.batchCreateBOToken(e),io(Cr(r),nk(e.length).pipe(Oo(t),Gr((([{boIdList:e},t])=>{const r=Mu(t),n=o.map(((t,o)=>{const{emails:n,name:i}=t;let s=[];return n&&Array.isArray(n)&&(s=n.map((e=>r.filter((t=>t.userEmail===e)).map((e=>e.userGUID)))).reduce(((e,t)=>[...e,...t]),[])),{boId:e[o],name:i,attendeeGuidList:s}})),i=n.map(((e,t)=>({roomId:e.boId,name:e.name,emails:o[t].emails})));return Ga(da,{rooms:i}),Cr([FT(n),XT(i)])}))))}return Cr(r)}}catch(e){console.error("pre assign proto is not valid")}return nr}))),epics11:(e,t)=>bv(e,Ov).pipe(Oo(t),co((([e,t])=>{const{meeting:{isHost:r,meetingStatus:o,meetingOptions:n},breakoutRoom:{controlStatus:i}}=t,{payload:{body:s}}=e;return o===jo.Joined&&(null==n?void 0:n.isAllowBreakoutRoomPreAssign)&&r&&(i===mu.NotStarted||i===mu.InProgress)&&Array.isArray(s.add)})),Gr((([e,t])=>{const{breakoutRoom:{controlStatus:r,rooms:o,preAssignedRooms:n,currentRoom:{status:i}},participants:{failoverAttendeesList:s}}=t,a=null==n?void 0:n.filter((e=>o.findIndex((t=>t.boId===e.roomId))>-1)),{payload:{body:{add:u}}}=e,d=[];return a.length>0&&u.filter((e=>e.userEmail&&e.userGUID)).filter((e=>-1===s.findIndex((t=>t.zoomID===e.zoomID)))).forEach((t=>{if(!QL(o,t.userGUID))for(let n=0;n<(null==a?void 0:a.length);n++){const s=a[n];if(s.emails.includes(t.userEmail)){if(r===mu.NotStarted){const e=ay(o,(e=>{const r=e.find((e=>e.boId===s.roomId));null==r||r.attendeeGuidList.push(t.userGUID)}));d.push(FT(e))}else r===mu.InProgress&&(i===Su.InRoom&&e.type===`${JS}`?ak.assignToBO(t.id,String(s.roomId)):i!==Su.Initial&&i!==Su.MainSession||ak.assignToBO(t.id,String(s.roomId)));break}}})),Cr(d)}))),epics12:(e,t)=>_v(e,Ov).pipe(co((e=>{const{breakoutRoom:{mainSessionAttendeeList:r}}=t.value,{payload:{body:o}}=e;return r.length>0&&(void 0!==o.add||void 0!==o.update)})),Ir(er),Vr((e=>uf(e.payload.body))),Gr((e=>{const{breakoutRoom:{mainSessionAttendeeList:r,isUserRoleUpdated:o},participants:{attendeesList:n}}=t.value;let i=[];const s=[];["add","update"].forEach((t=>e[t]&&i.push(...e[t])));const a=[...uk,"isHost"];i=i.filter((e=>a.some((t=>void 0!==e[t]))));const u=i.filter((e=>void 0!==e.zoomID));return i=i.map((e=>{var t,i,d,c;const l=null!==(t=null!==(i=e.zoomID)&&void 0!==i?i:null===(d=u.find((t=>t.userId===e.userId)))||void 0===d?void 0:d.zoomID)&&void 0!==t?t:null===(c=n.find((t=>t.userId===e.userId)))||void 0===c?void 0:c.zoomID;if(l){const t=r.find((e=>e.zoomID===l));if(t)return o||(s.push(eR(!0)),Ga(ua,t)),Object.keys(e).filter((t=>Object.prototype.hasOwnProperty.call(e,t))).filter((e=>a.includes(e))).reduce(((r,o)=>{const n=t[o];if(void 0!==n||"bCoHost"===o){const t="boolean"==typeof e[o]?!!n:n;Object.assign(r,{[o]:t})}return r}),{userId:e.userId})}})).filter(Boolean),i.length>0&&(Ga(Mo,i),s.push(Kv({update:i}))),Cr(s)}))),epics13:e=>Iv(e,7999).pipe(Ro((e=>{const{payload:{body:{bStatus:t}}}=e;Ga(ha,{status:!!t})})),Gr((()=>nr))),epics14:(e,t)=>_v(e,7940).pipe(Gr((e=>{const{payload:{body:{bHost:r}}}=e,{breakoutRoom:{isBroadcastVoice:o}}=t.value,n=[];return!r&&o&&(Fu.getInstance().broadcastVoiceToBreakoutRoom(!1),n.push(oR(!1))),Cr(n)})))},fk=Ev(vk,Sk);let yk=function(e){return e[e.Ready=0]="Ready",e[e.UserSub=1]="UserSub",e[e.ManualCaptionerEnabled=2]="ManualCaptionerEnabled",e[e.ManualCaptionerDisabled=3]="ManualCaptionerDisabled",e}({}),Ek=function(e){return e[e.Unspecified=-1]="Unspecified",e[e.English=0]="English",e[e["Chinese (Simplified)"]=1]="Chinese (Simplified)",e[e.Japanese=2]="Japanese",e[e.German=3]="German",e[e.French=4]="French",e[e.Russian=5]="Russian",e[e.Portuguese=6]="Portuguese",e[e.Spanish=7]="Spanish",e[e.Korean=8]="Korean",e[e.Italian=9]="Italian",e[e.Reserved=10]="Reserved",e[e.Vietnamese=11]="Vietnamese",e[e.Dutch=12]="Dutch",e[e.Ukrainian=13]="Ukrainian",e[e.Arabic=14]="Arabic",e[e["Chinese (Traditional)"]=16]="Chinese (Traditional)",e[e.Czech=17]="Czech",e[e.Estonian=18]="Estonian",e[e.Finnish=19]="Finnish",e[e.Hebrew=21]="Hebrew",e[e.Hindi=22]="Hindi",e[e.Hungarian=23]="Hungarian",e[e.Indonesian=24]="Indonesian",e[e.Malay=25]="Malay",e[e.Persian=26]="Persian",e[e.Polish=27]="Polish",e[e.Romanian=28]="Romanian",e[e.Swedish=29]="Swedish",e[e.Tamil=30]="Tamil",e[e.Telugu=31]="Telugu",e[e.Tagalog=32]="Tagalog",e[e.Turkish=33]="Turkish",e[e["French (Canada)"]=34]="French (Canada)",e[e.Danish=35]="Danish",e[e.Thai=37]="Thai",e[e.Cantonese=44]="Cantonese",e[e.Catalan=48]="Catalan",e[e.NoTranslation=400]="NoTranslation",e[e.DefaultManualInput=401]="DefaultManualInput",e[e.Customized=500]="Customized",e}({}),_k=function(e){return e[e.Unknown=0]="Unknown",e[e.Close=1]="Close",e[e.New=2]="New",e[e.Insert=3]="Insert",e[e.Delete=4]="Delete",e[e.Reset=5]="Reset",e[e.Audiodesc=6]="Audiodesc",e[e.Speaker=7]="Speaker",e[e.Error=8]="Error",e}({}),Ik=function(e){return e[e.TranslateNotSupport=1]="TranslateNotSupport",e}({}),Ak=function(e){return e[e.Unspecified=0]="Unspecified",e[e.InMeetingManual=1]="InMeetingManual",e[e.ExternalCaptioner=2]="ExternalCaptioner",e[e.ASR=4]="ASR",e}({});const bk={en:0,zh:1,ja:2,de:3,fr:4,ru:5,pt:6,es:7,ko:8,it:9,en1:10,vi:11,nl:12,uk:13,ar:14,"zh-hant":16,cs:17,et:18,fi:19,he:21,hi:22,hu:23,id:24,ms:25,fa:26,pl:27,ro:28,sv:29,ta:30,te:31,tl:32,tr:33,"fr-ca":34,da:35,th:37,"zh-yue":44,ca:48},Ck=Object.keys(Ek).filter((e=>/\d+/.test(Ek[e]))).reduce(((e,t)=>({...e,[`${Ek[t]}`]:t})),{}),Tk=Object.keys(bk).reduce(((e,t)=>(Object.assign(e,{[`${bk[`${t}`]}`]:t}),e)),{}),Rk="zoom-sdk-live-transcription",Ok="live-transcription";let Dk=function(e){return e[e.English=0]="English",e[e.Chinese=1]="Chinese",e[e.Japanese=2]="Japanese",e[e.German=3]="German",e[e.French=4]="French",e[e.Russian=5]="Russian",e[e.Portuguese=6]="Portuguese",e[e.Spanish=7]="Spanish",e[e.Korean=8]="Korean",e[e.Italian=9]="Italian",e[e.Reserved=10]="Reserved",e[e.Vietnamese=11]="Vietnamese",e[e.Dutch=12]="Dutch",e[e.Ukrainian=13]="Ukrainian",e[e.Arabic=14]="Arabic",e[e["Chinese (Traditional)"]=16]="Chinese (Traditional)",e[e.Czech=17]="Czech",e[e.Estonian=18]="Estonian",e[e.Finnish=19]="Finnish",e[e.Hebrew=21]="Hebrew",e[e.Hindi=22]="Hindi",e[e.Hungarian=23]="Hungarian",e[e.Indonesian=24]="Indonesian",e[e.Malay=25]="Malay",e[e.Persian=26]="Persian",e[e.Polish=27]="Polish",e[e.Romanian=28]="Romanian",e[e.Swedish=29]="Swedish",e[e.Tamil=30]="Tamil",e[e.Telugu=31]="Telugu",e[e.Tagalog=32]="Tagalog",e[e.Turkish=33]="Turkish",e[e["French (Canada)"]=34]="French (Canada)",e[e.Danish=35]="Danish",e[e.Thai=37]="Thai",e[e.Cantonese=44]="Cantonese",e[e.Catalan=48]="Catalan",e[e.NoTranslation=400]="NoTranslation",e[e.DefaultManualInput=401]="DefaultManualInput",e}({}),wk=function(e){return e.English="en",e["Chinese (Simplified)"]="zh",e.Japanese="ja",e.German="de",e.French="fr",e.Russian="ru",e.Portuguese="pt",e.Spanish="es",e.Korean="ko",e.Italian="it",e.Reserved="en1",e.Vietnamese="vi",e.Dutch="nl",e.Ukrainian="uk",e.Arabic="ar",e["Chinese (Traditional)"]="zh-hant",e.Czech="cs",e.Estonian="et",e.Finnish="fi",e.Hebrew="he",e.Hindi="hi",e.Hungarian="hu",e.Indonesian="id",e.Malay="ms",e.Persian="fa",e.Polish="pl",e.Romanian="ro",e.Swedish="sv",e.Tamil="ta",e.Telugu="te",e.Tagalog="tl",e.Turkish="tr",e["French (Canada)"]="fr-ca",e.Danish="da",e.Thai="th",e.Cantonese="zh-yue",e.Catalan="ca",e}({}),Nk=function(e){return e.Individual="individual",e.Session="session",e}({});function Mk(e){const t=e===Ek.Unspecified?Ek.Reserved:e;Fu.getInstance().selectLanguageChannelForNewLTT(t)}function Pk(e,t,r){const{state:o,rwgAgent:n}=r,{liveTranscription:{isSomeoneTranslating:i,isHostLockSpeakingLanguage:s},meeting:{isWebinar:a}}=o,u=null!=e?e:Ek.English;var d;s||a?n.setSpokenLanguage(u):((null===(d=Ru(o))||void 0===d?void 0:d.audio)===Ee.Computer&&Mk(null!=e?e:Ek.Unspecified),void 0!==e&&t&&(i||n.setTranscriptionLanguage(u,0)))}const Lk=tu(eu,(function(e,t){return lm(e,t)}))([Mu,({meeting:{gatewayUserList:e}})=>e],((e,t)=>{const r={};return e.forEach((e=>{Object.assign(r,{[`${e.userId}`]:e.zoomID})})),null==t||t.forEach((e=>{Object.assign(r,{[`${e.userId}`]:e.sn})})),r})),kk=ru([Mu],(e=>e.find((e=>!0===e.bCCEditor)))),Uk=ru([Mu,nu],((e,t)=>e.some((e=>!0===e.bCCEditor&&e.userId===t)))),Vk=__.createAgent(),Bk={isEnableTranslatedCaptions:!1,isHostLockSpeakingLanguage:!1,transcriptionLang:[],isEnableAutomatedCaptions:!1,supportedTranscriptionLanguage:[],isLiveTranscriptionEnabled:!1,isHostDisableCaptions:!1,isManualCaptionerEnabled:!1,gatewayId:void 0,isLiveTranscriptionSubscribed:!1,messageRecords:[],isRecordsReduced:!1,reducedRecordsCount:0,isSomeoneSetSessionTranscription:!1,isSomeoneTranslating:!1,isTranscriptionLanguageLocked:!1,isExternalCaptionerCaptioning:!1,externalCcUrl:void 0,transcriptionMode:Nk.Individual},Hk=qc({[`${OR}`]:ay(((e,{payload:t})=>{e.isLiveTranscriptionEnabled=t})),[`${DR}`]:ay(((e,{payload:t})=>{const{transcriptionLang:r,translatedSetting:o,...n}=t;if(r&&(e.transcriptionLang=r.split(";").map((e=>{const t=e&&bk[e];return void 0!==t?{lang:e,code:t}:null})).filter(Boolean)),o){const t=Object.keys(o).map((e=>{const t=o[e];if(t){const r=t.split(";").map((e=>{const t=e&&bk[e];return void 0!==t?{lang:e,code:t}:null})).filter(Boolean);return{lang:e,code:bk[e],translatedToLanguage:r}}return null})).filter(Boolean),r=t.reduce(((e,t)=>(t.translatedToLanguage.forEach((t=>{-1===e.findIndex((e=>e.code===t.code))&&e.push(t)})),e)),[]);e.translatedSetting=t,e.translationLang=r}Object.assign(e,n)})),[`${wR}`]:ay(((e,{payload:t})=>{e.isManualCaptionerEnabled=t})),[`${NR}`]:ay(((e,{payload:t})=>{e.gatewayId=t})),[`${xR}`]:ay(((e,{payload:t})=>{e.isHostDisableCaptions=t})),[`${MR}`]:ay(((e,{payload:t})=>{e.supportedTranscriptionLanguage=t})),[`${LR}`]:ay(((e,{payload:t})=>{e.currentTranscriptionLang=t})),[`${kR}`]:ay(((e,{payload:t})=>{e.currentTranslationLang=t})),[`${UR}`]:ay(((e,{payload:t})=>{e.messageRecords.push(t)})),[`${VR}`]:ay(((e,{payload:t})=>{const r=e.messageRecords.find((e=>e.msgId===t.msgId));r&&Object.assign(r,t)})),[`${BR}`]:ay(((e,{payload:t})=>{const{remains:r,reducedRecordsCount:o}=t,n=e.messageRecords.length-r;e.isRecordsReduced=!0,e.reducedRecordsCount=o,e.messageRecords.splice(0,n)})),[`${PR}`]:ay(((e,{payload:t})=>{e.isLiveTranscriptionSubscribed=t})),[`${HR}`]:ay(((e,{payload:t})=>{e.liveTransEngineType=t})),[`${jR}`]:ay((e=>{e.stateBeforeFailover=void 0})),[`${FR}`]:ay(((e,{payload:t})=>{e.lastManualCaption=t})),[`${$R}`]:ay(((e,{payload:t})=>{e.isSomeoneSetSessionTranscription=t})),[`${GR}`]:ay(((e,{payload:t})=>{e.isSomeoneTranslating=t})),[`${zR}`]:ay(((e,{payload:t})=>{e.isTranscriptionLanguageLocked=t})),[`${qR}`]:ay(((e,{payload:t})=>{e.isExternalCaptionerCaptioning=t})),[`${KR}`]:ay(((e,{payload:t})=>{e.externalCcUrl=t})),[`${JR}`]:ay(((e,{payload:t})=>{e.transcriptionMode=t})),[`${WR}`]:(e,{payload:t})=>t?{...Bk,stateBeforeFailover:{currentTranscriptionLang:e.currentTranscriptionLang,currentTranslationLang:e.currentTranslationLang,isLiveTranscriptionSubscribed:e.isLiveTranscriptionSubscribed,transcriptionMode:e.transcriptionMode},messageRecords:e.messageRecords,isRecordsReduced:e.isRecordsReduced,reducedRecordsCount:e.reducedRecordsCount}:{...Bk}},Bk);var jk;const Fk=__.createAgent(),Wk=UE("Live transcription");let xk=(jk=class extends A_{startLiveTranscription(){const{[r]:e,[o]:t}=this,{liveTranscription:{isLiveTranscriptionEnabled:n,isEnableTranslatedCaptions:i,isLiveTranscriptionSubscribed:s,isHostDisableCaptions:a}}=e();return s?Promise.resolve(""):a?Promise.reject({type:Je,reason:"Captions has been disabled by host.",errorCode:Na.TRANSCRIPTION_FEATURE_DISABLE}):n?(Fk.enableNewLLT(),Ka(tn).then((()=>{const{liveTranscription:{currentTranscriptionLang:r,transcriptionMode:o,isSomeoneSetSessionTranscription:n}}=e(),s=null!=r?r:Ek.English;return Pk(r,o===Nk.Session&&!n,{state:e(),rwgAgent:Fk}),t(LR(s)),i&&Fk.setTranslationLanguage(),Ka({event:tn,operations:[co((e=>!0===e.autoCaption&&void 0!==e.lang)),go(1)]})}))):Promise.reject({type:Je,reason:"Live transcription is not enabled.",errorCode:Na.TRANSCRIPTION_ACCOUNT_DISABLE})}disableCaptions(e){const{[r]:t}=this,{liveTranscription:{isHostDisableCaptions:o}}=t();return e===o?Promise.resolve():(Fk.disableCaptions(e),Ka(on,(t=>t===e)))}setSpeakingLanguage(e,t){const{[r]:n,[o]:i}=this,s=n(),{liveTranscription:{isLiveTranscriptionSubscribed:a,transcriptionLang:u,isTranscriptionLanguageLocked:d}}=s,c=Ru(s);if(d&&(null==c||!c.isHost))return Promise.reject({type:Je,reason:"Transcription language has been locked, only host can set the language.",errorCode:Na.TRANSCRIPTION_LANGUAGE_LOCKED});const l=u.find((t=>t.lang===e));if(l){const{code:e}=l;return(null==t?void 0:t.mode)===Nk.Session?a&&Pk(e,!0,{state:s,rwgAgent:Fk}):Pk(e,!1,{state:s,rwgAgent:Fk}),i(LR(e)),null!=t&&t.mode&&i(JR(t.mode)),Promise.resolve("")}return Promise.reject({type:et,reason:"Unsupported transcription language",errorCode:Na.TRANSCRIPTION_LANGUAGE_UNSUPPORTED})}setTranslationLanguage(e){const{[r]:t,[o]:n}=this,i=t(),{liveTranscription:{isEnableTranslatedCaptions:s,isLiveTranscriptionSubscribed:a,translationLang:u}}=i;if(!s)return Promise.reject({type:Je,reason:"Live translation is not enabled.",errorCode:Na.TRANSLATION_ACCOUNT_DISABLE});if(!a)return Promise.reject({type:Je,reason:"Cannot set translation language before starting live transcription",errorCode:Na.TRANSCRIPTION_MISMATCH_STATE});if(e){const t=null==u?void 0:u.find((t=>t.lang===e));return t?(Fk.setTranslationLanguage(t.code),Ka({event:tn,operations:[co((e=>!0===e.autoCaption&&e.lang===t.code)),go(1)]},(({lang:e})=>e===t.code))):Promise.reject({type:Je,reason:`Cannot support translating to ${e}`,errorCode:Na.TRANSLATION_LANGUAGE_UNSUPPORTED})}return Fk.setTranslationLanguage(),n(kR(void 0)),Promise.resolve("")}lockTranscriptionLanguage(e){const{[r]:t}=this,{liveTranscription:{isTranscriptionLanguageLocked:o,isEnableTranslatedCaptions:n}}=t();return n?Promise.reject({type:Je,reason:"Cannot lock transcription language due to translation is enabled",errorCode:Na.TRANSCRIPTION_MISMATCH_STATE}):e!==o?(Fk.lockTranscriptionLanguage(e),Ka(nn,(t=>t===e))):Promise.resolve("")}enableManualCaptioner(){const{[r]:e}=this,{meeting:{meetingOptions:t},liveTranscription:{isManualCaptionerEnabled:o,isHostDisableCaptions:n}}=e();if(n)return Promise.reject({type:Je,reason:"Captions has been disabled by host.",errorCode:Na.MANUAL_CAPTION_FEATURE_DISABLE});const{isEnableManualCaptions:i,isEnableClosedCaption:s}=t;return(null!=i?i:s)?o?Promise.resolve():(Fk.enableManualCaption(!0),Ka(tn,(({autoCaption:e})=>!1===e))):Promise.reject({type:Je,reason:"Manual caption is not enabled.",errorCode:Na.MANUAL_CAPTION_ACCOUNT_DISABLE})}disableManualCaptioner(){const{[r]:e}=this,{liveTranscription:{isManualCaptionerEnabled:t}}=e();return t?(Fk.enableManualCaption(!1),Ka(tn,(({autoCaption:e})=>!0===e))):Promise.resolve()}assignManualCaption(e){var t;const{[r]:o}=this,n=o(),{liveTranscription:{isManualCaptionerEnabled:i},participants:{attendeesList:s},meeting:{userId:a}}=n;if(!i)return Promise.reject({type:Je,reason:"Cannot assign caption editor due to the manual captioner is not enabled.",errorCode:Na.MANUAL_CAPTION_FEATURE_DISABLE});if((null===(t=kk(n))||void 0===t?void 0:t.userId)===e)return Promise.resolve("");const u=s.find((t=>t.userId===e));return u?(Fk.assignCC(e,!0),Ka({event:a===e?wo:Mo,operations:[co((t=>t.userId===e)),go(1)]},(e=>!0===e.bCCEditor))):Promise.reject({type:et,reason:"Cannot find the user",errorCode:Na.MANUAL_CAPTION_MISMATCH_USER})}sendCaptionTextManually(e,t){var n;const{[r]:i,[o]:s}=this,a=i(),{liveTranscription:{lastManualCaption:u},meeting:{userId:d}}=a,c=Ru(a);let l=Promise.resolve();const p=null===(n=kk(a))||void 0===n?void 0:n.userId;return null!=c&&c.isHost&&p!==d&&(l=this.assignManualCaption(d)),l.then((()=>Uk(i())?function(e,t,r){const o=e.length,n=[];var i;if(r)n.push({op:"close",text:e,msgId:null!==(i=null==t?void 0:t.msgId)&&void 0!==i?i:fd()});else if(t&&null!=t&&t.text){const r=t.text.length;let i=0,s=0;for(;e[i]===t.text[i]&&i<o;)s+=Sd(e[i]),i+=1;i===r&&i===o?n.push({op:"same"}):i===r&&i<o?n.push({op:"insert",text:e.slice(i),size:0,pos:s,msgId:t.msgId}):i<r&&i===o?n.push({op:"delete",size:0,pos:s,msgId:t.msgId}):(n.push({op:"delete",size:0,pos:s,msgId:t.msgId}),n.push({op:"insert",text:e.slice(i),pos:s,msgId:t.msgId}))}else o>0&&n.push({op:"start",text:e,pos:0,size:0,msgId:fd()});return n.filter((e=>"same"!==e.op))}(e,u,t):Promise.reject({type:Ze,reason:"Cannot type caption ",errorCode:Na.MANUAL_CAPTION_INSUFFICIENT_PRIVILEGE}))).then((e=>Array.isArray(e)?(e.forEach((e=>{const{text:r,...o}=e;vb.beginEncrypt({text:null!=r?r:"",type:hb.CC_MESSAGE}).then((n=>{Fk.sendManualCaption({text:n,...o});const i=t?void 0:{text:r,msgId:e.msgId};s(FR(i))}))})),Ka(en,(e=>e.source===Ak.InMeetingManual))):""))}getLiveTranscriptionStatus(){const{[r]:e}=this,{liveTranscription:{isLiveTranscriptionEnabled:t,isEnableTranslatedCaptions:o,isManualCaptionerEnabled:n,transcriptionLang:i,translatedSetting:s,isHostDisableCaptions:a,isTranscriptionLanguageLocked:u}}=e();return{isLiveTranscriptionEnabled:t,isLiveTranslationEnabled:o,isHostDisableCaptions:a,isManualCaptionerEnabled:n,isHostLockTranscriptionLanguage:u,transcriptionLanguage:i.map((e=>e.lang)).join(";"),translationLanguage:null==s?void 0:s.map((e=>({speakingLanguage:e.lang,translatedToLanguage:e.translatedToLanguage.map((e=>e.lang)).join(";")})))}}getLiveTranscriptionSetting(){const{[r]:e}=this,{meeting:{meetingOptions:t}}=e(),{isEnableManualCaptions:o,isEnableLiveTranscription:n,isEnableClosedCaption:i,isEnableAllowThirdPartyCCToken:s,isEnableViewFullTranscript:a,isEnableSaveCaptions:u}=t||{};return{isEnableManualCaptions:o,isEnableLiveTranscription:n,isEnableClosedCaption:i,isEnableAllowThirdPartyCCToken:s,isEnableViewFullTranscript:a,isEnableSaveCaptions:u}}getCurrentTranscriptionLanguage(){const{[r]:e}=this,{liveTranscription:{currentTranscriptionLang:t}}=e();return void 0!==t?{code:Tk[t],name:Ck[t]}:null}getCurrentTranslationLanguage(){const{[r]:e}=this,{liveTranscription:{currentTranslationLang:t}}=e();return void 0!==t?{code:Tk[t],name:Ck[t]}:null}getLatestTranscription(){const{[r]:e}=this,{liveTranscription:{messageRecords:t,isManualCaptionerEnabled:o}}=e(),n=o?Ek.DefaultManualInput:Ek.NoTranslation,i=t.filter((e=>e.language===n));return i.length?i[i.length-1].text:""}getLatestTranslation(){const{[r]:e}=this,{liveTranscription:{messageRecords:t,currentTranslationLang:o,isEnableTranslatedCaptions:n}}=e();if(n||void 0!==o){const e=t.filter((e=>e.language===o));return e.length?e[e.length-1].text:""}return""}getFullTranscriptionHistory(){const{[r]:e}=this,t=e(),{liveTranscription:{messageRecords:o,isRecordsReduced:n}}=t;return n?function(e){return void 0!==window.indexedDB?new Promise((t=>{const r=window.indexedDB.open(Rk,1);r.addEventListener("success",(()=>{const o=r.result;if(o.objectStoreNames.contains(Ok)){const r=o.transaction([Ok],"readonly").objectStore(Ok),n=[],i=e.meeting.meetingId,s=r.index("mid"),a=IDBKeyRange.only(i),u=s.openCursor(a);u.onsuccess=()=>{const e=u.result;e?(n.push(...e.value.records),e.continue()):(t(n),o.close())},u.onerror=()=>{t(""),o.close()}}else t("")})),r.addEventListener("error",(()=>{t("")}))})):Promise.resolve("")}(t).then((e=>Array.isArray(e)?e.concat(o):[...o])):[...o]}getManualCaptionEditor(){const{[r]:e}=this,t=e(),{closedCaption:{editorId:o}}=t;let n;if(!o)return{};if(n=Mu(t).find((e=>e.userId===o)),!n)return{};const{userId:i,isHost:s,displayName:a,avatar:u,bCoHost:d,zoomID:c}=n;return{userId:i,isHost:s,displayName:a,avatar:u,bCoHost:d,zoomID:c}}getManualCaptionUrl(){const{[r]:e}=this,{meeting:{meetingOptions:t,ccUrl:o,confId:n},breakoutRoom:i,liveTranscription:{externalCcUrl:s}}=e(),{isEnableManualCaptions:a,isEnableAllowThirdPartyCCToken:u}=t||{};if(!a||!u)return console.warn("you not enable manual caption"),"";const d=s||o;return i&&DO(e())?`${d}&${new URLSearchParams({subconfid:n}).toString()}`:d}},bS(jk.prototype,"startLiveTranscription",[MS,Wk],Object.getOwnPropertyDescriptor(jk.prototype,"startLiveTranscription"),jk.prototype),bS(jk.prototype,"disableCaptions",[kS,MS,Wk],Object.getOwnPropertyDescriptor(jk.prototype,"disableCaptions"),jk.prototype),bS(jk.prototype,"setSpeakingLanguage",[MS,Wk],Object.getOwnPropertyDescriptor(jk.prototype,"setSpeakingLanguage"),jk.prototype),bS(jk.prototype,"setTranslationLanguage",[MS,Wk],Object.getOwnPropertyDescriptor(jk.prototype,"setTranslationLanguage"),jk.prototype),bS(jk.prototype,"lockTranscriptionLanguage",[kS,MS,Wk],Object.getOwnPropertyDescriptor(jk.prototype,"lockTranscriptionLanguage"),jk.prototype),bS(jk.prototype,"enableManualCaptioner",[kS,MS,Wk],Object.getOwnPropertyDescriptor(jk.prototype,"enableManualCaptioner"),jk.prototype),bS(jk.prototype,"disableManualCaptioner",[kS,MS,Wk],Object.getOwnPropertyDescriptor(jk.prototype,"disableManualCaptioner"),jk.prototype),bS(jk.prototype,"assignManualCaption",[MS,kS,Wk],Object.getOwnPropertyDescriptor(jk.prototype,"assignManualCaption"),jk.prototype),bS(jk.prototype,"sendCaptionTextManually",[MS,Wk],Object.getOwnPropertyDescriptor(jk.prototype,"sendCaptionTextManually"),jk.prototype),jk);const $k={epics0:e=>e.pipe(HS(`${jg}`),Vr((e=>{const{payload:{liveTranscription:t}}=e;return DR(t)}))),epics1:(e,t)=>_v(e,Dv).pipe(co((e=>{var t,r;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.NewLttAvaliable)||void 0!==(null===(r=e.payload.body)||void 0===r?void 0:r.LiveTransEngineType)})),Vr((e=>{const{payload:{body:{NewLttAvaliable:r,LiveTransEngineType:o}}}=e,{liveTranscription:{isEnableAutomatedCaptions:n}}=t.value;return void 0!==r?(Ga(rn,!!r),OR(n&&!!r)):HR(o)}))),epics2:(e,t)=>_v(e,7982).pipe(Gr((e=>{const{payload:{body:{status:r,gwId:o}}}=e,n=[];switch(r){case yk.Ready:n.push(NR(o));break;case yk.ManualCaptionerEnabled:Ga(tn,{autoCaption:!1}),n.push(wR(!0));break;case yk.ManualCaptionerDisabled:Ga(tn,{autoCaption:!0}),n.push(fT({editorId:"",isEditor:!1,editorZoomId:""})),n.push(wR(!1));break;case yk.UserSub:{Ga(tn,{autoCaption:t.value.liveTranscription.isLiveTranscriptionEnabled});const{liveTranscription:{stateBeforeFailover:e,transcriptionMode:r,isSomeoneSetSessionTranscription:o}}=t.value;if(null!=e&&e.isLiveTranscriptionSubscribed){var i;Vk.enableNewLLT();const s=null!==(i=e.currentTranscriptionLang)&&void 0!==i?i:Ek.English;Pk(e.currentTranscriptionLang,r===Nk.Session&&!o,{state:t.value,rwgAgent:Vk}),n.push(LR(s)),void 0!==e.currentTranslationLang&&Vk.setTranslationLanguage(e.currentTranslationLang),n.push(jR())}break}}return Cr(n)}))),epics3:e=>_v(e,7984).pipe(Vr((e=>{const{payload:{body:{langs:t}}}=e;return MR(t)}))),epics4:e=>_v(e,8011).pipe(Gr((e=>{const{payload:{body:{disabled:t}}}=e,r=[];return Ga(on,t),r.push(xR(t)),t&&r.push(PR(!1)),Cr(r)}))),epics5:(e,t)=>_v(e,7985).pipe(co((e=>{var t;return!0===(null===(t=e.payload.body)||void 0===t?void 0:t.success)})),Gr((e=>{const{payload:{body:{src:r,lang:o,success:n}}}=e,{liveTranscription:{transcriptionLang:i}}=t.value,s=[];var a;return n&&s.push(PR(!0)),r===Ak.ASR?(o===Ek.NoTranslation?s.push(kR(void 0)):s.push(kR(o)),Ga(tn,{autoCaption:!0,lang:o,language:null===(a=i.find((e=>e.code===o)))||void 0===a?void 0:a.lang})):[Ak.InMeetingManual,Ak.ExternalCaptioner].includes(r)&&Ga(tn,{autoCaption:!1}),Cr(s)}))),epics6:(e,t)=>_v(e,7986).pipe(Oo(t),Gr((([e,t])=>{const r=Ru(t),{liveTranscription:{currentTranscriptionLang:o,isSomeoneSetSessionTranscription:n,transcriptionLang:i}}=t,{payload:{body:s}}=e,a=[$R(!0)];if(void 0!==(null==s?void 0:s.lang)){const{lang:e}=s,t=o!==e;var u;n&&!t||Ga(tn,{autoCaption:!0,sessionLang:e,sessionLanguage:null===(u=i.find((t=>t.code===e)))||void 0===u?void 0:u.lang}),(null==r?void 0:r.audio)===Ee.Computer&&t&&Mk(e),a.push(LR(e))}return Cr(a)}))),epics7:(e,t)=>Cv(e,k.JoinComputerAudioComplete).pipe(co((()=>{const{liveTranscription:{transcriptionMode:e,isLiveTranscriptionSubscribed:r,currentTranscriptionLang:o}}=t.value;return void 0!==o&&(e===Nk.Individual||e===Nk.Session&&r)})),Ro((()=>{const{liveTranscription:{currentTranscriptionLang:e}}=t.value;e&&Mk(e)})),So()),epics8:(e,t)=>_v(e,7983).pipe(co((e=>void 0!==e.payload.body)),Gr((e=>{const{payload:{body:{msgType:r,errorCode:o,language:n,source:i,content:s,keyNodeId:a,msgId:u,nodeId:d,pos:c,size:l,audioLanguage:p}}}=e;if(r===_k.Error){if(o===Ik.TranslateNotSupport){const{liveTranscription:{currentTranslationLang:e}}=t.value;e&&Ga(en,{error:Ik.TranslateNotSupport,errorMessage:`${Ck[p]} to ${Ck[e]} translation is not supported!`,audioLanguage:p,translationLang:e})}}else{const e=t.value,o=Mu(e),{liveTranscription:{isManualCaptionerEnabled:p}}=e;if(p&&i===Ak.ASR)return Promise.resolve();if(function(e,t){const{liveTranscription:{isEnableTranslatedCaptions:r,isLiveTranscriptionEnabled:o},meeting:{meetingOptions:n}}=t,{isEnableManualCaptions:i,isEnableAllowHostAssignTypeCC:s,isEnableClosedCaption:a,isEnableAllowThirdPartyCCToken:u}=n;return e===Ak.ASR?r||o:e===Ak.InMeetingManual?i&&s||void 0===i&&a:e===Ak.ExternalCaptioner?u:void 0}(i,e)&&s&&a){const h=Lk(e)[a];if(h)return vb.beginDecrypt({decryptedText:s,type:hb.CC_MESSAGE,zoomId:h}).then((({message:e})=>{const{liveTranscription:{messageRecords:s}}=t.value,a=[],h=s.find((e=>e.msgId===u));if(h){const{text:t}=h,o=((e,t)=>{if(!e||0===t)return"";let r=0;for(let o=0;o<e.length;o++)if(r+=Sd(e[o]),r===t)return e.slice(0,o+1);return e})(t,c);let n;r===_k.Insert&&0===l||r===_k.Delete&&0===l?n={...h,text:o+e,msgType:r}:r===_k.Close&&(n={...h,text:e,msgType:r,done:!0}),n&&(a.push(VR(n)),Ga(en,n))}else if([_k.New,_k.Close].includes(r)||p&&r===_k.Insert){const t=o.find((e=>e.userId===d)),s={msgId:u,userId:d,displayName:null==t?void 0:t.displayName,avatar:null==t?void 0:t.avatar,text:e,source:i,language:n,timestamp:(new Date).getTime(),done:r===_k.Close};a.push(UR({...s,msgType:r})),Ga(en,s)}return a}))}}return Promise.resolve()})),Gr((e=>Array.isArray(e)?Cr(e):nr))),epics9:(e,t)=>e.pipe(HS(`${UR}`),Ir(Xt),Gr((()=>{const{liveTranscription:{messageRecords:e}}=t.value;return e.length>=1e5?function(e){const{meeting:{meetingId:t},liveTranscription:{messageRecords:r,reducedRecordsCount:o}}=e;return void 0!==window.indexedDB?new Promise((e=>{const n=window.indexedDB.open(Rk,1);n.addEventListener("upgradeneeded",(()=>{const e=n.result;if(!e.objectStoreNames.contains(Ok)){const t=e.createObjectStore(Ok,{keyPath:["startIndex","mid"],autoIncrement:!1});t.createIndex("mid","mid",{unique:!1}),t.transaction.oncomplete=()=>{console.log(`Create objectStore [${Ok}] complete`)}}})),n.addEventListener("success",(()=>{const i=n.result,s=r.length,a=.9*s,u=s-a,d=r.slice(0,a),c=o+d.length,l=i.transaction([Ok],"readwrite");l.objectStore(Ok).put({startIndex:o,mid:t,records:d}),l.oncomplete=()=>{e(BR({remains:u,reducedRecordsCount:c})),i.close()},l.onerror=()=>{e(""),i.close()}}))})):Promise.resolve("")}(t.value):Promise.resolve("")})),co((e=>"object"==typeof e))),epics10:(e,t)=>e.pipe(HS(`${Lg}`,`${Ug}`),co((()=>t.value.liveTranscription.isRecordsReduced)),Ro((()=>{!function(){if(void 0!==window.indexedDB){const e=window.indexedDB.open(Rk,1);e.addEventListener("success",(()=>{const t=e.result;t.objectStoreNames.contains(Ok)&&(window.indexedDB.deleteDatabase(Rk),t.close())}))}}()})),So()),epics11:(e,t)=>Cv(e,[k.AudiobridgeSetCcLangSuccess,k.AudiobridgeSetCcLangFailure]).pipe(Gr((e=>{const{payload:{type:r,data:o}}=e,{liveTranscription:{currentTranscriptionLang:n}}=t.value,i=[];return r===k.AudiobridgeSetCcLangSuccess&&o!==n?i.push(LR(o)):r===k.AudiobridgeSetCcLangFailure&&i.push(LR(void 0)),Cr(i)}))),epics12:e=>_v(e,8014).pipe(co((e=>!!e.payload.body)),Gr((e=>{const{payload:{body:{delivered:t,type:r}}}=e,o=[];return"translationstarted"===r?t&&(o.push(GR(!0)),Ga(tn,{autoCaption:!0,translationStarted:!0})):"meetinglanglocked"===r?(o.push(zR(t)),Ga(nn,t)):"tcap"===r&&t&&o.push(qR(!0)),Cr(o)}))),epics13:e=>_v(e,8026).pipe(co((e=>{var t;return!(null===(t=e.payload.body)||void 0===t||!t.url)})),Vr((e=>KR(e.payload.body.url)))),epics14:e=>_v(e,8027).pipe(Vr((e=>{var t;return LR(null===(t=e.payload.body)||void 0===t?void 0:t.speaking_language_id)})))},Gk=Ev($k),zk={isLiveStreamEnable:!1,status:0,channelName:"",viewerUrl:"",liveStreamOn:!1},qk=qc({[`${cO}`]:ay(((e,{payload:t})=>{e.isLiveStreamEnable=t})),[`${lO}`]:ay(((e,{payload:t})=>{e.status=t})),[`${pO}`]:ay(((e,{payload:t})=>{e.channelName=t.channelName,e.viewerUrl=t.viewerUrl,e.liveStreamOn=t.liveStreamOn})),[`${hO}`]:(e,{payload:t})=>t?{...e}:{...zk}},zk);let Kk=function(e){return e[e.Ended=0]="Ended",e[e.InProgress=1]="InProgress",e[e.Connecting=2]="Connecting",e[e.Timeout=3]="Timeout",e}({});var Jk;const Qk=__.createAgent();let Yk=(Jk=class extends A_{startLiveStream(e,t,n){const{[r]:i,[o]:s}=this,{liveStream:{isLiveStreamEnable:a,status:u},meeting:{zlkJwtToken:d}}=i();return d?u===Kk.InProgress?Promise.reject({type:Je,reason:"Live stream is already on",errorCode:Na.LIVE_STREAM_MISMATCH_STATE}):a?e&&t&&n?(Qk.startLiveStream(e,t,n),Ka({event:Ta,operations:[co((e=>e===Kk.InProgress)),go(1)]},void 0,3e4).then((()=>"")).catch((()=>{const{liveStream:{status:e}}=i();return e===Kk.Connecting?(Ga(Ta,Kk.Timeout),s(lO(Kk.Timeout)),Promise.reject({type:Qe,errorCode:Na.INTERNAL_ERROR})):Promise.resolve("")}))):Promise.reject({type:et,reason:"parameter cannot be empty",errorCode:Na.LIVE_STREAM_INVALID_PARAMETER}):Promise.reject({type:Je,reason:"Live stream is not enabled",errorCode:Na.LIVE_STREAM_ACCOUNT_DISABLE}):Promise.reject({type:Je,reason:"meeting sdk don't support start live stream use startLiveStream",errorCode:Na.LIVE_STREAM_INVALID_PARAMETER})}stopLiveStream(){const{[r]:e,[o]:t}=this,{liveStream:{status:n}}=e();return n===Kk.InProgress&&(Qk.stopLiveStream(),Ga(Ta,Kk.Ended),t(lO(Kk.Ended))),Promise.resolve("")}getLiveStreamInfo(){const e=this[r](),{meeting:{liveStreamInfo:t,zlkJwtToken:o,isHost:n}}=e;return o?(console.warn("video sdk don't support get live stream info"),null):n?t&&0!==Object.keys(t).length?t:(console.warn("can not get live stream info"),null):(console.warn("only host get live stream info"),null)}isLiveStreamEnabled(){const{[r]:e}=this,{liveStream:t,meeting:{liveStreamInfo:o,zlkJwtToken:n}}=e();return(n||(null==o?void 0:o.isEnabledLiveStream))&&!(null==t||!t.isLiveStreamEnable)}getLiveStreamStatus(){const{[r]:e}=this,{liveStream:{liveStreamOn:t,channelName:o,viewerUrl:n,status:i}}=e();return{liveStreamOn:t,channelName:o,viewerUrl:n,status:i}}},bS(Jk.prototype,"startLiveStream",[kS],Object.getOwnPropertyDescriptor(Jk.prototype,"startLiveStream"),Jk.prototype),bS(Jk.prototype,"stopLiveStream",[kS],Object.getOwnPropertyDescriptor(Jk.prototype,"stopLiveStream"),Jk.prototype),Jk);const Zk=Ev({epics0:e=>e.pipe(HS(`${jg}`),Vr((e=>{const{payload:{liveStreamInfo:t}}=e;return cO(!(null==t||!t.isEnabledLiveStream))}))),epics1:e=>_v(e,7970).pipe(Gr((e=>{const{payload:{body:{channelName:t,liveStreamOn:r,_isApiCall:o,status:n,viewerUrl:i}}}=e;return Ga(Ta,n),Cr([pO({channelName:t,viewerUrl:i,liveStreamOn:r}),lO(n)])})))}),{setSummaryEnable:Xk,setSmartSummaryStatus:eU,resetSummary:tU}=Wc("SET_SUMMARY_ENABLE","SET_SMART_SUMMARY_STATUS","RESET_SUMMARY"),{setMeetingQueryEnable:rU,setMeetingQueryStatus:oU}=Wc("SET_MEETING_QUERY_ENABLE","SET_MEETING_QUERY_STATUS");let nU=function(e){return e.Default="",e.Start="Start",e.Paused="Paused",e.Stopped="Stopped",e}({}),iU=function(e){return e[e.GW_IND_NONE=0]="GW_IND_NONE",e[e.GW_IND_START=1]="GW_IND_START",e[e.GW_IND_PAUSE=2]="GW_IND_PAUSE",e[e.GW_IND_STOP=3]="GW_IND_STOP",e}({}),sU=function(e){return e.Default="",e.Start="Start",e.Paused="Paused",e.Stopped="Stopped",e}({}),aU=function(e){return e[e.GW_IND_NONE=0]="GW_IND_NONE",e[e.GW_IND_START=1]="GW_IND_START",e[e.GW_IND_PAUSE=2]="GW_IND_PAUSE",e[e.GW_IND_STOP=3]="GW_IND_STOP",e}({});const uU={summaryStatus:iU.GW_IND_STOP,summaryEnable:!1,meetingQueryStatus:aU.GW_IND_STOP,meetingQueryEnable:!1},dU=qc({[`${Xk}`]:ay(((e,{payload:t})=>{e.summaryEnable=t})),[`${eU}`]:ay(((e,{payload:t})=>{e.summaryStatus=t})),[`${rU}`]:ay(((e,{payload:t})=>{e.meetingQueryEnable=t})),[`${oU}`]:ay(((e,{payload:t})=>{e.meetingQueryStatus=t})),[`${tU}`]:()=>({...uU})},uU);var cU,lU,pU,hU,mU;const gU=__.createAgent();let SU=(cU=US("summary"),lU=US("summary"),pU=US("summary"),hU=US("summary"),bS((mU=class extends A_{startSummary(){const e=this[r](),{summary:{summaryEnable:t,summaryStatus:o}}=e;return t?o===iU.GW_IND_START?Promise.resolve(""):(gU.summaryMeeting(!0),Ka(Ia,(e=>e.status===nU.Start))):Promise.reject({type:Je,reason:"The account of the meeting disabled the smart summary",errorCode:Na.SUMMARY_ACCOUNT_DISABLE})}stopSummary(){const e=this[r](),{summary:{summaryStatus:t}}=e;return t!==iU.GW_IND_START?Promise.resolve("not start summary, do nothing"):(gU.summaryMeeting(!1),Ka(Ia,(e=>e.status===nU.Stopped)))}getSummaryStatus(){const e=this[r](),{summary:{summaryStatus:t}}=e;return t===iU.GW_IND_START?nU.Start:t===iU.GW_IND_STOP?nU.Stopped:nU.Default}isSummaryEnabled(){const e=this[r](),{summary:{summaryEnable:t}}=e;return t}startMeetingQuery(){const e=this[r](),{summary:{meetingQueryEnable:t,meetingQueryStatus:o}}=e;return t?o===aU.GW_IND_START?Promise.resolve(""):(gU.startMeetingQuery(!0),Ka(Aa,(e=>e.status===sU.Start))):Promise.reject({type:Je,reason:"The account of the meeting disabled the smart summary",errorCode:Na.SUMMARY_ACCOUNT_DISABLE})}stopMeetingQuery(){const e=this[r](),{summary:{meetingQueryStatus:t}}=e;return t!==aU.GW_IND_START?Promise.resolve("not start meeting query, do nothing"):(gU.startMeetingQuery(!1),Ka(Aa,(e=>e.status===sU.Stopped)))}getMeetingQueryStatus(){const e=this[r](),{summary:{meetingQueryStatus:t}}=e;return t===aU.GW_IND_START?sU.Start:t===aU.GW_IND_STOP?sU.Stopped:sU.Default}isMeetingQueryEnabled(){const e=this[r](),{summary:{meetingQueryEnable:t}}=e;return t}}).prototype,"startSummary",[kS,MS,cU],Object.getOwnPropertyDescriptor(mU.prototype,"startSummary"),mU.prototype),bS(mU.prototype,"stopSummary",[kS,MS,lU],Object.getOwnPropertyDescriptor(mU.prototype,"stopSummary"),mU.prototype),bS(mU.prototype,"startMeetingQuery",[kS,MS,pU],Object.getOwnPropertyDescriptor(mU.prototype,"startMeetingQuery"),mU.prototype),bS(mU.prototype,"stopMeetingQuery",[kS,MS,hU],Object.getOwnPropertyDescriptor(mU.prototype,"stopMeetingQuery"),mU.prototype),mU);const vU=Ev({moduleEpics0:e=>_v(e,8007).pipe(co((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.supported)})),Vr((e=>{const{supported:t}=e.payload.body;return Ga(Ia,{supported:t}),Xk(t)}))),moduleEpics1:(e,t)=>_v(e,8008).pipe(co((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.status)})),Oo(t),Gr((([e,t])=>{const{status:r}=e.payload.body,{summary:{summaryStatus:o}}=t,n=[];if(r!==o)switch(r){case iU.GW_IND_START:Ga(Ia,{status:nU.Start});break;case iU.GW_IND_PAUSE:Ga(Ia,{status:nU.Paused});break;case iU.GW_IND_STOP:Ga(Ia,{status:nU.Stopped});break;default:Ga(Ia,{status:""})}return n.push(eU(r)),Cr(n)}))),moduleEpics2:(e,t)=>_v(e,8015).pipe(co((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.supported)})),Oo(t),Vr((([e,t])=>{const{supported:r}=e.payload.body;Ga(Aa,{supported:r});const{meeting:{zlkJwtToken:o}}=t;if(o){const{auto_transcription:e}=bd(o);e&&(r?__.createAgent().startMeetingQuery(!0):console.warn("You account don't support auto transcription"))}return rU(r)}))),moduleEpics3:(e,t)=>_v(e,8016).pipe(co((e=>{var t;return void 0!==(null===(t=e.payload.body)||void 0===t?void 0:t.status)})),Oo(t),Gr((([e,t])=>{const{status:r}=e.payload.body,{summary:{meetingQueryStatus:o}}=t,n=[];if(r!==o)switch(r){case aU.GW_IND_START:Ga(Aa,{status:sU.Start});break;case aU.GW_IND_PAUSE:Ga(Aa,{status:sU.Paused});break;case aU.GW_IND_STOP:Ga(Aa,{status:sU.Stopped});break;default:Ga(Aa,{status:""})}return n.push(oU(r)),Cr(n)})))});let fU=function(e){return e[e.Init=0]="Init",e[e.Pending=1]="Pending",e[e.InProgress=2]="InProgress",e[e.Closing=3]="Closing",e[e.Closed=4]="Closed",e}({}),yU=function(e){return e[e.Start=1]="Start",e[e.Stop=2]="Stop",e}({});const EU=RE.getInstance();function _U(e){EU.report(e,["Broadcast streaming"])}const IU={utk:"",status:fU.Init,channelId:"",channelName:"",isBroadcastStreamingEnable:!1},AU=qc({[`${mO}`]:(e,t)=>ay(e,(e=>{e.utk=t.payload})),[`${gO}`]:(e,t)=>ay(e,(e=>{const{channelId:r,channelName:o}=t.payload;e.channelId=r,e.channelName=o})),[`${SO}`]:(e,t)=>ay(e,(e=>{e.status=t.payload})),[`${vO}`]:(e,t)=>ay(e,(e=>{e.isBroadcastStreamingEnable=t.payload})),[`${fO}`]:(e,{payload:t})=>t?{...e}:{...IU}},IU);var bU;const CU=__.createAgent(),TU=UE("Broadcast streaming");let RU=(bU=class extends A_{startBroadcast(){const{[r]:e,[o]:t}=this,{broadcastStreaming:{isBroadcastStreamingEnable:n,status:i},meeting:{meetingNumber:s,topic:a,lang:u},breakoutRoom:d}=e();return n?(null==d?void 0:d.controlStatus)===mu.InProgress&&DO(e())?Promise.reject({type:Je,reason:"Cannot start broadcast in a breakout room.",errorCode:Na.BROADCAST_STREAMING_MISMATCH_STATE}):i===fU.Init||i===fU.Closed?(CU.requestUserInfoToken(4,1),Nr(Ja(Oa,1).pipe(bo((e=>{const r=`https://${E()}/live/createAndStartStream`,o=function(e){return e.slice(0,128).padEnd(5,"*")}(null!=a?a:""),n={meetingNumber:`${s}`,channelName:o};return eD({url:r,method:"POST",headers:{utk:e,lang:u,"Content-Type":"application/json"},crossDomain:Ad(r),body:n}).pipe(Co(Qa()),Gr((e=>{const{status:r,errorCode:n,errorMessage:i,result:s}=e.response;return r&&0===n?(t(gO({channelName:o,channelId:null==s?void 0:s.channelId,type:yU.Start})),by.set(Cy.VIDEO_SDK_BROADCAST_STREAMING_CHANNEL_ID,null==s?void 0:s.channelId,Iy.SessionStorage),Promise.resolve(s.channelId)):(_U(`Start broadcast streaming error: errorCode: ${n}; message:${i},tid:${null===(a=e.responseHeaders)||void 0===a?void 0:a["x-zm-trackingid"]}`),Promise.reject({type:Qe,errorCode:Na.INTERNAL_ERROR}));var a})),po((e=>(_U(`Start broadcast streaming error: ${e.name};${e.message}`),Promise.reject({type:Qe,errorCode:Na.INTERNAL_ERROR})))))}))))):Promise.reject({type:Je,reason:"Broadcast streaming is already in progress",errorCode:Na.BROADCAST_STREAMING_MISMATCH_STATE}):Promise.reject({type:Je,reason:"Broadcast streaming is not enabled",errorCode:Na.BROADCAST_STREAMING_ACCOUNT_DISABLE})}stopBroadcast(e){const{[r]:t,[o]:n}=this,{broadcastStreaming:{status:i,utk:s,channelId:a,channelName:u},meeting:{meetingNumber:d,lang:c}}=t(),l=e||a;if(!l)return Promise.reject({type:et,reason:"Channel ID is required to stop broadcast streaming",errorCode:Na.BROADCAST_STREAMING_INVALID_CHANNEL_ID});if(i===fU.InProgress){const e=`https://${E()}/live/stopStream`,t={meetingNumber:`${d}`,channelId:l};let r=Promise.resolve(s);return s||(CU.requestUserInfoToken(4,1),r=Nr(Ja(Oa,1))),r.then((r=>Nr(eD({url:e,method:"POST",headers:{utk:r,lang:c,"Content-Type":"application/json"},crossDomain:Ad(e),body:t}).pipe(Co(Qa()),Gr((e=>{const{status:t,errorCode:r,errorMessage:o}=e.response;return t&&0===r?(n(gO({channelName:u,channelId:l,type:yU.Stop})),Promise.resolve(l)):(_U(`Stop broadcast streaming error: errorCode: ${r}; message:${o}, tid:${null===(i=e.responseHeaders)||void 0===i?void 0:i["x-zm-trackingid"]}`),Promise.reject({type:Qe,errorCode:Na.INTERNAL_ERROR}));var i}))))))}return Promise.reject({type:Je,reason:"Broadcast streaming is not in progress",errorCode:Na.BROADCAST_STREAMING_MISMATCH_STATE})}getBroadcastStreamingStatus(){const{[r]:e}=this,{broadcastStreaming:{status:t,channelId:o}}=e();return{status:t,channelId:o}}isBroadcastStreamingEnable(){const{[r]:e}=this,{broadcastStreaming:{isBroadcastStreamingEnable:t}}=e();return t}},bS(bU.prototype,"startBroadcast",[MS,kS,TU],Object.getOwnPropertyDescriptor(bU.prototype,"startBroadcast"),bU.prototype),bS(bU.prototype,"stopBroadcast",[MS,kS,TU],Object.getOwnPropertyDescriptor(bU.prototype,"stopBroadcast"),bU.prototype),bU);const OU=Ev({epics0:e=>e.pipe(HS(`${jg}`),Gr((e=>{const{payload:{enableVsdkInteractiveLiveStream:t}}=e,r=[];r.push(vO(!!t));const o=by.get(Cy.VIDEO_SDK_BROADCAST_STREAMING_CHANNEL_ID);return o&&r.push(gO({channelId:o})),Cr(r)}))),epics1:e=>_v(e,4310).pipe(Gr((e=>{const{payload:{body:t}}=e,r=[];if(4===(null==t?void 0:t.type)){const{utk:e}=t;r.push(mO(e)),Ga(Oa,e)}return Cr(r)}))),epics2:(e,t)=>_v(e,7995).pipe(Gr((e=>{const{payload:{body:{status:r}}}=e,{broadcastStreaming:{status:o}}=t.value,n=[];return r&&o!==fU.InProgress&&(n.push(SO(fU.InProgress)),Ga(Da,{status:fU.InProgress})),Cr(n)}))),epics3:(e,t)=>e.pipe(HS(`${gO}`),co((e=>!!e.payload.type)),bo((e=>{const r=`https://${E()}/live/getStreamState`,{broadcastStreaming:{utk:o},meeting:{meetingNumber:n}}=t.value,{payload:{channelId:i,type:s}}=e,a={meetingNumber:`${n}`,channelId:i};return Jr((()=>eD({url:r,method:"POST",headers:{utk:o,"Content-Type":"application/json"},crossDomain:Ad(r),body:a}))).pipe((u=e=>{const{status:t,errorCode:n,result:i}=e.response;if(t&&0===n){const t=s===yU.Start?fU.InProgress:fU.Closed;if((null==i?void 0:i.state)===t)return Tr(e)}return Jr((()=>eD({url:r,method:"POST",headers:{utk:o,"Content-Type":"application/json"},crossDomain:Ad(r),body:a}))).pipe(fo((()=>oo(1e3))))},void 0===d&&(d=1/0),d=(d||0)<1?1/0:d,Pt((function(e,t){return $r(e,t,u,d,0,!0,undefined)}))),Co(Qa()),To((e=>{const{status:t,errorCode:r,result:o,errorMessage:n}=e.response;if(t&&0===r){const e=s===yU.Start?fU.InProgress:fU.Closed;return(null==o?void 0:o.state)!==e}var i;return _U(`Query broadcast streaming status failed. errorCode: ${r}, errorMessage: ${n},tid:${null===(i=e.responseHeaders)||void 0===i?void 0:i["x-zm-trackingid"]}`),!1}),!0),kr(6e4),Gr((e=>{const{status:t,errorCode:r,result:o}=e.response,n=[];return t&&0===r&&(Ga(Da,{status:o.state}),n.push(SO(o.state))),n})),po((e=>(_U(`Query broadcast streaming status failed. error: ${e.name}; ${e.message}`),nr))));var u,d})))});var DU;const wU={chat:{epic:DD,reducer:bD,Client:RD},logger:{epic:Fw,reducer:Vw,Client:class extends A_{getLogs(e){return kw.getLogs(this[t],e)}setLogOptions(e){e&&this[t].dispatch(sO(e))}isAutoReportInAccountSettingEnabled(){const{meeting:{zlkJwtToken:e,enableAutoLog:r,collectionToggleEnable:o,zsk:n}}=this[t].getState();return!!e||(n?r&&o:r)}reportMeetingProblem(e){var r;const{product:o,problem:n,timeOfOccurrence:i,description:s,ticket:a,isLogIncluded:u}=e,{meeting:{userId:d,confId:c,conId:l,svcUrl:p}}=this[t].getState(),h=`'product':${o}\n'problem':${n}\n'timeOfOccurrence':${i}\n'description':${s}\n'ticketID':${a}\n'isLogIncluded':${u?"Logs included":""}\n'nodeId':${d}\n'confId':${c}\n'conId':${l}\n'svcUrl':${p}`,m=["REPORT_NOTIFICATION"];return null===(r=kw.makeLogger(m).logWithExtraProperties("",{IM_NOTIFICATION:`${h}\nTrackingId:${kw.trackingId}`}))||void 0===r?void 0:r.then((()=>{kw.reportToGlobalTracing(u?void 0:m,!0)}))}reportToGlobalTracing(e){return Lw.beforeReportToGlobalTracing(),kw.reportToGlobalTracing(e,!0)}reportRating(e,r){const{meeting:o,media:n,socket:i}=this[t].getState();if(o){var s,a,u,d;const{zlkJwtToken:t,meetingStatus:c}=o,{assetsPath:l,enforceMultipleVideos:p,enforceVirtualBackground:h,disableRenderLimits:m}=n;kw.report(`rating:${e}, feedback:${r}, appKey:${t?null===(s=bd(t))||void 0===s?void 0:s.app_key:""}, CPU:${navigator.hardwareConcurrency}, GPU:${null!==(a=T.gpu)&&void 0!==a?a:""}, browser:${T.browser} ${T.browserVersion}, OS:${T.os} ${T.osVersion}, SharedArrayBuffer:${!!T.isSupportSharedArrayBuffer},\n         OffscreenCanvas:${!!T.isSupportOffscreenCanvas},\n         assetPath:${l},\n          enforceMultipleVideos:${p},\n          disableRenderLimits:${m},\n          enforceVirtualBackground:${h}, ${c===jo.Joined?`session duration:${Math.floor((performance.now()-(null!==(u=null==o?void 0:o.pingRWCTimestamp)&&void 0!==u?u:0))/1e3)}, rwg:${null==i||null===(d=i.rwgServerList)||void 0===d||null===(d=d[i.retryCount])||void 0===d?void 0:d.rwg}, failover count:${null==o?void 0:o.failover.count}`:""}`,"User Rating","info"),Number(e)<=2&&this.reportToGlobalTracing()}return Promise.resolve()}}},recording:{epic:nN,reducer:$w,Client:rN},cmd:{epic:_N,reducer:vN,Client:yN},breakoutRoom:{epic:fk,reducer:tL,Client:gk},liveTranscription:{epic:Gk,reducer:Hk,Client:xk},liveStream:{epic:Zk,reducer:qk,Client:Yk},summary:{epic:vU,reducer:dU,Client:SU},broadcastStreaming:{epic:OU,reducer:AU,Client:RU}},NU=__.createAgent();let MU=(DU=class extends BO{constructor(e){super(e),this.mediaStream=void 0,this[n]=wU}getMediaStream(){return void 0===this.mediaStream&&(this.mediaStream=new XP(this[t])),this.mediaStream}joinInstant(e,t,n,i,s,a){const{[r]:u,[o]:d}=this,{meeting:{lang:c,meetingStatus:l},socket:{zoomSocketStatus:p}}=u();return t?l!==jo.Joined&&p===M_.Closed?(d(Ng({topic:null==e?void 0:e.toLowerCase(),password:s||"",userName:n,zlk:t,lang:c,cv:i})),a&&d(lS(a)),qa(Zo.JoinMeeting)):Promise.reject({type:Je,reason:"duplicated operation",errorCode:Na.CLIENT_DUPLICATED_JOIN}):Promise.reject({type:et,reason:"invalid  signature",errorCode:Na.CLIENT_INVALID_JOIN_PARAMETER})}removeUser(e){const r=this[t].getState(),{participants:{attendeesList:o},breakoutRoom:n}=r,i=o.find((t=>t.userId===e));if(i){let t=e;if((null==n?void 0:n.controlStatus)===mu.InProgress&&DO(r)){const e=n.mainSessionAttendeeList.find((e=>e.userGUID===(null==i?void 0:i.userGUID)));e&&(t=e.userId)}return NU.expel(t),Ka(Po,(t=>t.some((t=>t.userId===e))))}return Promise.reject({type:et,reason:"no matched user",errorCode:Na.CLIENT_MISMATCH_USER})}},bS(DU.prototype,"removeUser",[LS,MS],Object.getOwnPropertyDescriptor(DU.prototype,"removeUser"),DU.prototype),DU);function PU(e){return PU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PU(e)}function LU(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=PU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t);if("object"!=PU(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==PU(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function UU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kU(Object(r),!0).forEach((function(t){LU(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kU(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function VU(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var BU="function"==typeof Symbol&&Symbol.observable||"@@observable",HU=function(){return Math.random().toString(36).substring(7).split("").join(".")},jU={INIT:"@@redux/INIT"+HU(),REPLACE:"@@redux/REPLACE"+HU(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+HU()}};function FU(e,t,r){var o;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(VU(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(VU(1));return r(FU)(e,t)}if("function"!=typeof e)throw new Error(VU(2));var n=e,i=t,s=[],a=s,u=!1;function d(){a===s&&(a=s.slice())}function c(){if(u)throw new Error(VU(3));return i}function l(e){if("function"!=typeof e)throw new Error(VU(4));if(u)throw new Error(VU(5));var t=!0;return d(),a.push(e),function(){if(t){if(u)throw new Error(VU(6));t=!1,d();var r=a.indexOf(e);a.splice(r,1),s=null}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(VU(7));if(void 0===e.type)throw new Error(VU(8));if(u)throw new Error(VU(9));try{u=!0,i=n(i,e)}finally{u=!1}for(var t=s=a,r=0;r<t.length;r++)(0,t[r])();return e}return p({type:jU.INIT}),(o={dispatch:p,subscribe:l,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw new Error(VU(10));n=e,p({type:jU.REPLACE})}})[BU]=function(){var e,t=l;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(VU(11));function r(){e.next&&e.next(c())}return r(),{unsubscribe:t(r)}}})[BU]=function(){return this},e},o}function WU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}const xU=__.createAgent(),$U=RE.getInstance();let GU,zU;const qU=__.createAgent();let KU=null;var JU,QU={exports:{}},YU=(JU||(JU=1,QU.exports=function(){function e(e){var t=new Date,r="";return e&&(r+="".concat(t.getMonth()+1,"/").concat(t.getDate(),"/").concat(t.getFullYear()," ")),"[".concat(r).concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds(),".").concat(t.getMilliseconds(),"]:\n")}var t=function(e,t){var r={mode:"cors"};return t&&Object.assign(r,{signal:t}),Promise.any(e.map((function(e){return function(e,t,r,o){function n(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(t,r){function i(e){try{a(o.next(e))}catch(e){r(e)}}function s(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){e.done?t(e.value):n(e.value).then(i,s)}a((o=o.apply(e,[])).next())}))}(void 0,0,void 0,(function(){var t,o,n,i,s;return function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return u([e,t])}}function u(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,fetch(e.url,r)];case 1:if(!(t=a.sent()).ok)throw new Error("HTTP error! status: ".concat(t.status));return[4,t.json()];case 2:return o=a.sent(),n=t.headers.get("call-id"),[2,{response:o,server:e,callId:n}];case 3:throw i=a.sent(),s="server: ".concat(e.domain,", message: ").concat(i.message),new Error(s);case 4:return[2]}}))}))}))).catch((function(e){var t="";return e instanceof AggregateError&&e.errors.forEach((function(e,r){t+="".concat(e.message,"\n")})),Promise.reject(t)}))};var r=function(){function r(){this.MAX_RETRY_TIMES=5}return r.prototype.setRetryTimes=function(e){void 0===e&&(e=5),this.MAX_RETRY_TIMES=e},r.prototype.init=function(t){this.serverList=t,this.delayTime=Array.from(new Set(this.serverList.map((function(e){return e.dl})))),this.excludedServer=[],this.tryTimes=1,this.log="".concat(e(),"initial server list: ").concat(JSON.stringify(function(e){return e.map((function(e){return{domain:e.domain,dl:e.dl,dc:e.dc}}))}(this.serverList)),"\n")},r.prototype.ping=function(e){return this.init(e),this.tryPing()},r.prototype.retry=function(){return this.tryTimes+=1,this.filter(),0===this.serverList.length||this.MAX_RETRY_TIMES>0&&this.tryTimes>this.MAX_RETRY_TIMES?Promise.reject("no usable RWC any more:\n".concat(this.log)):this.tryPing()},r.prototype.cancelPing=function(){this.abortPingController&&(this.abortPingController.abort(),this.abortPingController=void 0)},r.prototype.tryPing=function(){var r,o=this;this.cancelPing(),this.log+="".concat(e(!0),"Try Times: ").concat(this.tryTimes,"\n"),this.abortPingController=function(){if("function"==typeof AbortController)return new AbortController}();var n=null===(r=this.abortPingController)||void 0===r?void 0:r.signal;return new Promise((function(r,i){var s=o.delayTime.reduce((function(e,t){return e+t}),0),a=setTimeout((function(){o.log+="ping time out ".concat(s+1e4,"s\n"),o.serverList=[],o.cancelPing()}),s+1e4),u=function(e){var t=e.reduce((function(e,t){var r=t.dl;return e[r]||(e[r]=[]),e[r].push(t),e}),{});return Object.entries(t).map((function(e){var t,r=e[0],o=e[1];return[null!==(t=Number(r))&&void 0!==t?t:0,o]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[0],e[1]}))}(o.serverList);Promise.any(u.map((function(r,i){var s=o.delayTime[i];return function(e,t,r){return new Promise((function(o,n){var i;if(null==r?void 0:r.aborted)return n(new Error("Promise was cancelled"));var s=setTimeout((function(){e().then(o).catch(n).finally((function(){var e;return null===(e=null==r?void 0:r.removeEventListener)||void 0===e?void 0:e.call(r,"abort",a)}))}),t),a=function(){var e;clearTimeout(s),null===(e=null==r?void 0:r.removeEventListener)||void 0===e||e.call(r,"abort",a),n(new Error("Promise was cancelled"))};null===(i=null==r?void 0:r.addEventListener)||void 0===i||i.call(r,"abort",a)}))}((function(){return o.log+="".concat(e(),"ping[dl=").concat(s,"][groupIndex=").concat(i,"]--\x3e").concat(JSON.stringify(r.map((function(e){return e.domain}))),"\n"),t(r,n)}),s,n)}))).then((function(t){var n=t.response,i=t.server,s=t.callId;o.log+="".concat(e(),"ping resolved: request server:").concat(i.domain,"\n response:").concat(JSON.stringify(n),"\n Call-ID:").concat(s,"\n"),o.lastServer=i,r({response:n,request:i,log:o.log})})).catch((function(t){return t instanceof AggregateError?(o.log+=e(),t.errors.forEach((function(e,t){o.log+="ping failed [groupIndex=".concat(t,"]:\n").concat(e,"\n")}))):o.log+="".concat(e(),"ping failed. Errors(unknown): ").concat(t.message,"\n"),i(o.log)})).finally((function(){clearTimeout(a),o.cancelPing()}))}))},r.prototype.filter=function(){var t,r=this;this.serverList=this.serverList.filter((function(e){var o;return e.domain!==r.lastServer.domain&&e.dc!==t||(t||(t=null===(o=r.excludedServer.find((function(e){return e.dc===r.lastServer.dc})))||void 0===o?void 0:o.dc),r.excludedServer.push(r.lastServer),!1)})),this.log+="".concat(e(),"excludedServer ").concat(JSON.stringify(this.excludedServer.map((function(e){return e.domain}))),"\n")},r.prototype.getLog=function(){return this.log},r}();return new r}()),QU.exports),ZU=hc(YU);const XU=RE.getInstance();ZU.setRetryTimes(0);const eV=e=>Dt(Co(Qa().pipe(Ro((()=>{ZU.cancelPing(),XU.report(`ping rwc canceled. ping rwc log:${ZU.getLog()}`,["Join Meeting Flow","Ping RWC Error"],"warn")})))),Gr((e=>{const{response:t,request:r}=e;let o={};return o=t?{...t,rwc:r.domain,fromNginx:!1}:{rwc:r.domain,rwg:r.domain,rwcToken:r.rwcToken,fromNginx:!0},Cr([YS(o),jS()])})),po((()=>{const t=ZU.getLog(),{meeting:{meetingId:r,meetingNumber:o,userName:n}}=e.value;return XU.report(`ping rwc error,${JSON.stringify({meetingId:r,meetingNumber:IE(o),userName:IE(n)})}, ping rwc log: ${t}`,["Join Meeting Flow","Ping RWC Error"],"error"),Ga($o,{reason:"connection error",errorCode:ZD.CommonError}),Cr([...EO(e.value)])}))),tV=(e,t)=>e.pipe(HS(`${Mg}`),Oo(t),co((([,e])=>void 0!==e.meeting.encryptedRWC||void 0!==e.meeting.encryptedGEORWC&&e.meeting.encryptedGEORWC.length>0)),bo((([,e])=>Cr(ZU.ping((e=>{const{meeting:{encryptedRWC:t,encryptedGEORWC:r,meetingOptions:o,meetingNumber:n,ts:i,auth:s,enableHybridRWG:a,accountId:u},breakoutRoom:d,video:c,audio:l}=e,p=null==o?void 0:o.isEnableGeoFenceRWC,h=null!=c&&c.isWebrtcVideoCapable||null!=l&&l.isWebRtcAudioCapable&&(null==l?void 0:l.webRtcAudioMode)&Ue.WebRTCAudio2?null==c?void 0:c.miniRwgOptionValue:0;let m;return a&&(m=u),p&&r&&(null==r?void 0:r.length)>0?r.map((e=>{const{dc:t,dl:r,rwc:o,rwcToken:a}=e;return{url:yO(o,n,a,i,s,null==d?void 0:d.currentRoom.boConfId,h,m),domain:o,rwcToken:a,dl:r,dc:t}})):t?Object.keys(t).map((e=>{const r=t[e];return{url:yO(e,n,r,i,s,null==d?void 0:d.currentRoom.boConfId,h,m),domain:e,rwcToken:r,dl:0,dc:"AP"}})):[]})(e))).pipe(eV(t),Ao(Kg(performance.now()))))));let rV=0;const oV=RE.getInstance(),nV={meetingStatus:jo.Initial,isWindowOpen:!1,apiKey:"",signature:"",signatureType:"",lang:"en-US",tk:"",customerKey:"",mtkGuid:"",pingRWCTimestamp:0,meetingInfoTimestamp:0,passWord:"",meetingNumber:0,userName:"",userEmail:"",sdkUrl:"",sdkOrigin:"",proxy:1,cv:"",meetingId:"",tid:"",ts:"",auth:"",sign:"",isSupportCallOut:!1,tollNumbers:void 0,recordingEnable:!1,callOutCountry:void 0,inviteEmail:"",xmppConfig:null,isSupportH323:!1,h323GatewayInfo:"",h323Password:"",trackAuth:"",isOriginHost:!1,isWebinar:!1,encryptedRWC:void 0,meetingOptions:{},meetingTopic:"",bLock:!1,bHoldUponEntry:!1,viewOnly:0,listenOnlyPhone:0,bAllowRaiseHand:!1,bAllowAttendeeRename:!1,bBroadcast:void 0,bAllowPlayChimeForEnterOrExit:!1,bIbDisableShare:!1,bIbDisableChat:!1,bAllowShowCount:!1,encryptKey:"",bNoHostTimeOut:!1,confId:"",conId:"",e2eEncrypt:!1,zoomId:"",jid:"",xtoken:"",groups:void 0,svcUrl:"",encType:NaN,userGUID:"",userId:NaN,isHost:!1,isCoHost:!1,participantID:0,isOnHold:!1,isMeetingReset:!1,bRecord:!1,audioVideoBeforeOnHold:void 0,region:void 0,network:void 0,joinMeetingTimeStamp:0,activeAppInfo:void 0,recordingDisclaimerForRecorder:{},recordingDisclaimer:{},ccUrl:"",sessionIdleTimeoutMins:40,reportDomain:"",discardedRwcList:[],sharePronounType:void 0,stayAwake:!1,wrInfo:{},meetingInfo:{},isNewJoinFlow:!1,gatewayUserList:[],logConfig:"",failover:{count:0,isCurrentFailoverRecorded:!1,reason:-1,interval:0,joinMeetingSuccessTimestamp:0,sequence:""},isUseWBVideo:!1,isUseWBAudio:!1,enableLongPollingCheckStart:!1,rsPwd:"",chatModerationPolicy:{},uid:"",isAlternativeHost:!1,isAssistant:!1,isRlbTP:!1,isRlbTPReady:!1,isUIToolkit:!1,liveStreamInfo:{},enableHybridRWG:!1},iV=qc({[`${jg}`]:ay(((e,{payload:t})=>{t.customerKey=e.customerKey||t.customerKey||"",Object.assign(e,t),e.meetingStatus=jo.Initial})),[`${Fg}`]:ay(((e,{payload:t})=>{t.customerKey=e.customerKey||t.customerKey||"",Object.assign(e,t)})),[`${Wg}`]:ay(((e,{payload:t})=>{e.isWindowOpen=t})),[`${xg}`]:ay(((e,{payload:t})=>{t.useSDK?e.signatureType="sdk":e.signatureType="api",e.apiKey=t.apiKey,e.signature=t.signature,e.lang=t.language})),[`${$g}`]:ay(((e,{payload:t})=>{e.ztk=t})),[`${Gg}`]:ay(((e,{payload:t})=>{e.zsk=t})),[`${zg}`]:ay(((e,{payload:t})=>{e.obfToken=t})),[`${qg}`]:ay(((e,{payload:t})=>{e.tk=t.tk,e.mtkGuid=t.mtkGuid})),[`${Kg}`]:ay(((e,{payload:t})=>{e.pingRWCTimestamp=t})),[`${yS}`]:ay(((e,{payload:t})=>{e.meetingInfoTimestamp=t})),[`${Jg}`]:ay(((e,{payload:t})=>{e.confId=t.confID,e.conId=t.conID,e.e2eEncrypt=t.e2eEncrypt,e.meetingNumber=parseInt(t.mn,10),e.zoomId=t.zoomID,e.meetingStatus=jo.Joined,e.jid=t.jid,e.xtoken=t.xtoken,e.groups=t.groups,e.svcUrl=t.svcUrl,e.encType=t.encType,e.userGUID=t.userGUID,e.userId=t.userID,e.role=t.role,e.participantID=t.participantID,e.reportDomain=t.reportDomain,e.abToken=t.ABtoken,e.supportLocalAB=!!t.supportLocalAB,e.isUseWBVideo=!!t.useWBVideo,e.mediasdkConfig=t.mediasdkConfig,e.isUseWBAudio=!!t.useWBAudio,t.enableWebTransport&&(e.enableWebtransport=t.enableWebTransport,e.webtransportPort=t.WebTransportPort)})),[`${Qg}`]:ay(((e,{payload:t})=>{if(t.gatewayUser){var r;const{userId:n,sn:i}=t.gatewayUser,s=null===(r=e.gatewayUserList)||void 0===r?void 0:r.find((e=>e.userId===n));var o;s?s.sn=i:null===(o=e.gatewayUserList)||void 0===o||o.push(t.gatewayUser)}else Object.assign(e,t)})),[`${Zg}`]:ay(((e,{payload:t})=>{e.isHost=t})),[`${Xg}`]:ay(((e,{payload:t})=>{e.isCoHost=t})),[`${eS}`]:ay(((e,{payload:t})=>{e.isOnHold=t})),[`${tS}`]:ay(((e,{payload:t})=>{e.isMeetingReset=t})),[`${rS}`]:ay(((e,{payload:t})=>{e.audioVideoBeforeOnHold=t})),[`${oS}`]:ay(((e,{payload:t})=>{e.currentUserAudioBeforeReset=t})),[`${nS}`]:ay(((e,{payload:t})=>{e.isCurrentUserMutedBeforeReset=t})),[`${iS}`]:ay(((e,{payload:t})=>{e.meetingStatus=t})),[`${sS}`]:ay(((e,{payload:t})=>{e.region=t.region,e.network=t.network})),[`${aS}`]:ay(((e,{payload:t})=>{e.isCurrentUserStartVideoBeforeReset=t})),[`${uS}`]:ay(((e,{payload:t})=>{e.joinMeetingTimeStamp=t})),[`${dS}`]:ay(((e,{payload:t})=>{e.activeAppInfo=t})),[`${cS}`]:ay(((e,{payload:t})=>{e.idleStartTime=t})),[`${lS}`]:ay(((e,{payload:t})=>{e.sessionIdleTimeoutMins=t})),[`${pS}`]:ay(((e,{payload:t})=>{var r;const o=null===(r=e.encryptedGEORWC)||void 0===r||null===(r=r.find((e=>e.rwc===t)))||void 0===r?void 0:r.dc;if(o){var n;const r=null===(n=e.encryptedGEORWC)||void 0===n?void 0:n.filter((e=>e.dc===o));r&&e.discardedRwcList.some((e=>(null==r?void 0:r.findIndex((t=>t.rwc===e)))>=0))&&e.discardedRwcList.push(...r.map((e=>e.rwc))),e.discardedRwcList.push(t)}})),[`${hS}`]:ay(((e,{payload:t})=>{e.sharePronounType=t})),[`${mS}`]:ay(((e,{payload:t})=>{e.stayAwake=t})),[`${gS}`]:ay(((e,{payload:t})=>{e.failover.joinMeetingSuccessTimestamp=t})),[`${SS}`]:ay((e=>{Object.assign(e.failover,{...nV.failover,count:e.failover.count,joinMeetingSuccessTimestamp:e.failover.joinMeetingSuccessTimestamp})})),[`${vS}`]:ay(((e,{payload:t})=>{const{count:r,reason:o,interval:n,sequence:i}=t;e.failover.count=r,e.failover.reason=o,e.failover.interval=n,e.failover.isCurrentFailoverRecorded=!0,e.failover.sequence=i})),[`${fS}`]:ay(((e,{payload:t})=>{e.quicklyLeave=t})),[`${ES}`]:ay(((e,{payload:t})=>{e.isEnableZmkFromRWG=t})),[`${_S}`]:ay(((e,{payload:t})=>{e.isRlbTP=t})),[`${IS}`]:ay(((e,{payload:t})=>{e.isRlbTPReady=t})),[`${Hg}`]:ay(((e,{payload:t})=>{e.isUIToolkit=t})),[`${Yg}`]:(e,{payload:t})=>{const{isFailover:r}=t,o={isMeetingReset:!0,apiKey:e.apiKey,signatureType:e.signatureType,signature:e.signature,lang:e.lang,proxy:1,stayAwake:e.stayAwake};var n;return r&&Object.assign(o,{currentUserAudioBeforeReset:e.audioVideoBeforeOnHold?e.audioVideoBeforeOnHold.audio:t.audio,isCurrentUserMutedBeforeReset:e.audioVideoBeforeOnHold?e.audioVideoBeforeOnHold.muted:null!==(n=e.isCurrentUserMutedBeforeReset)&&void 0!==n?n:t.muted,isCurrentUserStartVideoBeforeReset:e.audioVideoBeforeOnHold?e.audioVideoBeforeOnHold.video:t.video,meetingNumber:e.meetingNumber,userName:e.userName,passWord:e.passWord,userEmail:e.userEmail,sdkUrl:e.sdkUrl,sdkOrigin:e.sdkOrigin,cv:e.cv,zsk:e.zsk,ztk:e.ztk,obfToken:e.obfToken,idleStartTime:e.idleStartTime,sessionIdleTimeoutMins:e.sessionIdleTimeoutMins,customerKey:e.customerKey,failover:e.failover,stayAwake:e.stayAwake,quicklyLeave:e.quicklyLeave}),{...nV,...o}}},nV),sV={meetingFailoverReportEpic0:(e,t)=>e.pipe(HS(`${jg}`),bo((()=>{const r=0===t.value.meeting.failover.joinMeetingSuccessTimestamp&&!!by.get(Cy.WebclientZoomId);return e.pipe(HS(`${Jg}`),go(1),Gr((()=>{const e=[],{count:o,sequence:n}=by.get(Cy.WebclientFailoverCount)||{};let{meeting:{failover:{count:i,reason:s,interval:a}}}=t.value;const{meeting:{pingRWCTimestamp:u}}=t.value;if(r){i=(null!=o?o:0)+1,s=Wo.RefreshPage,a=0;const t=n?`${n}-${s}`:`${s}`;by.set(Cy.WebclientFailoverCount,{count:i,sequence:t},Iy.SessionStorage),e.push(vS({count:i,reason:s,interval:a,sequence:t}))}const d=performance.now();let c=`WCL_M, JMCT(${d-u})`;return i>0&&s!==Wo.NormalCase&&(c=`${c},FAILOVER(${i},${s},${(a/1e3).toFixed(1)})`),qU.sendRWGConnectionPerformance(c),e.push(SS(),gS(d)),Cr(e)})))}))),meetingFailoverReportEpic1:(e,t)=>e.pipe(HS(`${Pg}`),Gr((e=>{const{payload:r}=e,{meeting:{failover:{joinMeetingSuccessTimestamp:o,isCurrentFailoverRecorded:n},userGUID:i,userId:s,meetingId:a}}=t.value,u=[];if(!n){let{count:e,sequence:t}=by.get(Cy.WebclientFailoverCount)||{};t=t?`${t}-${r}`:`${r}`,r!==Wo.NormalCase&&(e+=1,by.set(Cy.WebclientFailoverCount,{count:e,sequence:t},Iy.SessionStorage));const n=performance.now()-o;u.push(vS({reason:r,count:e,interval:n,sequence:t,userGUID:i,userId:s,meetingId:a}))}return Cr(u)})))},aV={sessionIdleEpic0:(e,t)=>e.pipe(HS(`${Jg}`),Oo(t),co((([,e])=>void 0!==e.meeting.zlkJwtToken)),bo((()=>(GU&&GU.complete(),GU=new Bt,zU=no(6e4).pipe(Vr((()=>performance.now()))).subscribe(GU),GU.pipe(Vr((e=>Vg(e)))))))),sessionIdleEpic1:e=>e.pipe(HS(`${WS}`)).pipe(Ro((()=>{GU&&(GU.complete(),zU.unsubscribe())})),Eo(nr)),sessionIdleEpic2:(e,t)=>e.pipe(HS(`${Vg}`),Oo(t),Gr((([e,t])=>{var r;const{meeting:{idleStartTime:o,sessionIdleTimeoutMins:n,isOriginHost:i,isWebinar:s},participants:{attendeesList:a,xmppAttendeeList:u},recording:d,breakoutRoom:c}=t,l=e.payload,p=[];if(1!==a.length||s&&0!==u.length||(null==c||null===(r=c.currentRoom)||void 0===r?void 0:r.status)===Su.InRoom||(null==d?void 0:d.cmrStatus)===En.Start)p.push(cS(void 0));else if(o){const e=i&&du(a[0].userRole)?n:40;l-o>60*e*1e3&&(console.warn(`No active for ${e} minutes, will end the session.`),$U.report(`Session idle timeout(${e} minutes), end the session automatically!`,["Join Meeting Flow","Session idle"],"warn"),p.push(Ug()),oo(500).subscribe((()=>{Ya()})))}else p.push(cS(l));return Cr(p)}))),sessionIdleEpic3:(e,t)=>e.pipe(HS(`${$S}`),co((e=>[Ov,Dv].includes(e.payload.evt)&&void 0!==t.value.meeting.idleStartTime)),Ir(er),Gr((()=>{var e;const{participants:{attendeesList:r,xmppAttendeeList:o},recording:n,breakoutRoom:i}=t.value,s=[];return(r.length>1||o.length>0||(null==n?void 0:n.cmrStatus)===En.Start||(null==i||null===(e=i.currentRoom)||void 0===e?void 0:e.status)===Su.InRoom)&&s.push(cS(void 0)),Cr(s)}))),sessionIdleEpic4:e=>e.pipe(HS(`${Lg}`,`${Ug}`),vo(cS(void 0)))},uV={meetingMainEpics0:(e,t)=>_v(e,0).pipe(Ro((e=>{var r;if("READY"===(null===(r=e.payload.body)||void 0===r?void 0:r.status)){const{meeting:{zlkJwtToken:e,signatureType:r,sign:o,passWord:n,isHost:i,isOriginHost:s,ztk:a,zsk:u,tk:d,userEmail:c},breakoutRoom:l}=t.value,p=e?{zlkJwtToken:e}:{signType:r,sign:o};if(n&&""!==n&&(e?Object.assign(p,{mpwd:ld(n)}):i&&s||Object.assign(p,{mpwd:n})),(null==l?void 0:l.currentRoom.status)===Su.Joining){const{currentRoom:{boId:e,boConfId:t,boToken:r}}=l;e&&t&&r&&Object.assign(p,{botk:r})}if(!e){const{meeting:{obfToken:e}}=t.value,r=sessionStorage.getItem(Cy.WebclientObfToken),o=e||r,n=sessionStorage.getItem(Cy.WebclientZsk)||u;o?Object.assign(p,{obfToken:o}):(a&&Object.assign(p,{zak:a}),n&&Object.assign(p,{zak:n})),d&&Object.assign(p,{tk:d});const i=by.get(Cy.WebclientWebinarToken);void 0!==i&&Object.assign(p,{tk:i});const s=sessionStorage.getItem(Cy.WebclientRecordingToken);s&&Object.assign(p,{localRecordToken:s}),c&&Object.assign(p,{email:c})}xU.sendLaunchParams(p);const h=by.get(Cy.WebclientMeetingToken);h&&xU.joinMeeting(h)}})),Eo(nr)),meetingMainEpics1:(e,t)=>{return _v(e,Mv).pipe(Oo(t),co((([,e])=>e.socket.zoomSocketStatus===M_.Connected)),(r=([e,t])=>{const{payload:{body:{res:r,userID:o,zoomID:n,mn:i,participantID:s,meetingtoken:a,role:u}}}=e,{meeting:{userEmail:d,userName:c,isMeetingReset:l,apiKey:p,zsk:h,signatureType:m}}=t;if(JD.Success===r){const{WebclientParticipantId:t,WebclientZoomId:r,WebclientUserEmail:g,WebclientUserName:S,WebclientMeetingToken:v}=Cy;by.set(r,n,Iy.SessionStorage),by.set(t,s,Iy.SessionStorage),d&&by.set(g,d,Iy.SessionStorage),by.set(S,c,Iy.SessionStorage),a&&by.set(v,a,Iy.SessionStorage),h&&xU.sendSdkKeyToMonitor(m,p,o);const f=[Jg(e.payload.body),uS(performance.now())];return l&&f.push(tS(!1)),(u&su.Owner)===su.Owner&&(Ga($o,{reason:"dont support assisnt join through widget",errorCode:-1}),xU.leaveMeeting()),Ga(xo,{meetingNumber:i}),Cr(f)}if(JD.MeetingLocked===r)Ga($o,tw(r));else if(JD.UserFull===r)Ga($o,Object.assign({},tw(r),{lmUrl:e.payload.body.lmURL}));else if(JD.MeetingIsOver===r)Ga($o,tw(r));else if(JD.MMRIBReject===r)Ga($o,tw(r));else if(JD.MMRConfParticipantExists===r)Ga($o,tw(r));else if([JD.UserHasBeenRemoved,JD.WebinarBlockedEmail].includes(r))Ga($o,tw(r));else if(JD.MeetingNotStarted===r){var g;const e=tw(r),{meeting:{meetingNumber:o,passWord:n,userName:i,userEmail:s,inviteEmail:a,meetingTopic:u,region:d,network:c,userId:l,lang:p,meetingId:h,participantID:m,wrInfo:S,meetingInfo:v,isNewJoinFlow:f,enableLongPollingCheckStart:y,tid:_,signature:I,rsPwd:A}}=t;Object.assign(e,{meetingInfo:{meetingNumber:o,password:n,userName:i,userEmail:s,inviteEmail:a,meetingTopic:u,region:d,network:c,userId:l,lang:p,webEndpoint:E(),meetingId:h,participantId:m,wrInfo:Object.assign({},S,{isNew:f}),scheduleInfo:v,enableLongPollingCheckStart:y,rid:AO(_),role:Number(null===(g=bd(I))||void 0===g?void 0:g.role),rsPwd:A}}),Ga($o,e)}else Ga($o,tw(r));return Cr(EO(t,!1))},Dt(bo(((e,t)=>r(e)||nr)))));var r},meetingMainEpics2:(e,t)=>_v(e,Dv).pipe(Oo(t),Vr((([e,t])=>{const{payload:{body:r}}=e,{meeting:{zoomId:o,encType:n,gcmSessinKey:i}}=t;if(void 0!==(null==r?void 0:r.encryptKey)&&vb.init(o,r.encryptKey,n),void 0!==(null==r?void 0:r.gatewayKey)){const e=Fu.getInstance(),[,t,o]=r.gatewayKey.split(".");e.sendUserNodeList([{userid:Number(t),sn:o&&gd(o)}],i)}return Ga(Ko,r),Qg(r)}))),meetingMainEpics3:(e,t)=>_v(e,7939).pipe(Oo(t),Gr((([e,t])=>{const{payload:{body:r}}=e;if(void 0!==r.reason){if(QD.Reconnect===r.reason)return YD.WaitingRoomFailover===r.subReason?Ga(Go,{reason:Uo.OnHold}):Ga(Go,{reason:Uo.Failover}),Tr(Pg(Wo.NormalCase));QD.KickedByHost===r.reason?Ga(zo,{reason:"kicked by host"}):[QD.EndByHost,QD.EndByNone,QD.EndByAdmin,QD.EndByHostStartAnotherMeeting].includes(r.reason)?Ga(zo,{reason:"ended by host"}):QD.FreeMeetingTimeout===r.reason?Ga(zo,{reason:"free meeting ended"}):[QD.DuplicateSession,QD.MeetingTransfer].includes(r.reason)&&Ga(zo,{reason:"duplicated session"})}return t.meeting.isMeetingReset?nr:Cr(EO(t,!1))}))),meetingMainEpics4:(e,t)=>e.pipe(HS(`${Pg}`),Oo(t),Gr((([,e])=>{const t=EO(e,!0);let r;if(e.meeting.zlkJwtToken){const t=function(e){if(e){const{meeting:{topic:t,passWord:r,userName:o,zlkJwtToken:n,lang:i,cv:s,customerKey:a}}=e;return{topic:t,passWord:r,userName:o,zlkJwtToken:n,lang:i,cv:s,customerKey:a}}return null}(e),o={topic:null==t?void 0:t.topic,password:null==t?void 0:t.passWord,userName:null==t?void 0:t.userName,zlk:null==t?void 0:t.zlkJwtToken,lang:null==t?void 0:t.lang,cv:null==t?void 0:t.cv,customerKey:null==t?void 0:t.customerKey};r=Tr(Ng(o)).pipe(yo(1e3))}else{const t=function(e){var t;const{meeting:{apiKey:r,signature:o,signatureType:n,meetingNumber:i,userName:s,lang:a,passWord:u,userEmail:d,sdkUrl:c,sdkOrigin:l,proxy:p,cv:h,ztk:m,zsk:g,tk:S,obfToken:v}}=e,f=sessionStorage.getItem(Cy.WebclientObfToken),y=v||f;let E=m||sessionStorage.getItem(Cy.WebclientZtk),_=g||sessionStorage.getItem(Cy.WebclientZsk);const I=1===Number(null===(t=bd(o))||void 0===t?void 0:t.role);return y?(E="",_=""):I||(E=_,_=""),{apiKey:r,signature:o,signatureType:n,meetingNumber:i,userName:s,lang:a,passWord:u?encodeURIComponent(u):"",userEmail:d,sdkUrl:c,sdkOrigin:l,proxy:p,cv:h,ztk:E,zsk:_,tk:S||sessionStorage.getItem(Cy.WebclientTk),ulsm:I&&_?1:0}}(e);r=Tr(wg(t)).pipe(yo(1e3))}return Kr(Cr(t),r)}))),meetingMainEpics5:e=>bv(e,7940).pipe(Ro((e=>{Ga("MEETING_HOST_CHANGE_INDICATION",e.payload.body.bHost)})),Vr((e=>Zg(e.payload.body)))),meetingMainEpics6:e=>bv(e,7941).pipe(Ro((e=>{Ga("MEETING_COHOST_CHANGE_INDICATION",e.payload.body.bCoHost)})),Vr((e=>Xg(e.payload.body)))),meetingMainEpics7:e=>bv(e,7945).pipe(Ro((e=>{const{payload:{body:{opt:t}}}=e;by.set(Cy.WebclientOpt,t,Iy.SessionStorage)})),Eo(nr)),meetingMainEpics8:(e,t)=>_v(e,7942).pipe(Ro((e=>{const{payload:{body:{bHold:t}}}=e;by.set(Cy.WebclientIsOnHold,t?1:0,Iy.SessionStorage),Ga(qo,t)})),Oo(t),Gr((([e,t])=>{const r=[eS(e.payload.body.bHold)];if(e.payload.body.bHold){const e=Ru(t);if(e){r.push(rS({audio:e.audio,video:e.bVideoOn,muted:e.muted}));const o=ME(Fu.getInstance());if("computer"===e.audio&&(o.leaveComputerAudio(),xU.joinOrLeaveVoip(!1)),e.bVideoOn&&o.stopCaptureVideo(),e.sharerOn&&(xU.stopSharing(e.userId),o.stopDesktopSharing(),r.push(ZI(q.End))),t.video&&t.video.subscribedVideoList.length>0&&t.video.subscribedVideoList.forEach((e=>{o.unsubscribeVideo(e)})),t.share&&t.share.isReceiveSharing){const e=t.share.activeNodeId;t.share.remoteControlledUserList.length>0&&(t.share.remoteControlledUserList.forEach((e=>{xU.sharingRequestRemoteControl(e,!1)})),QE(t)&&o.stopRemoteControl()),xU.unsubscribeSharing(e),o.stopRenderSharing(),r.push(JI(!1))}}}return Cr(r)}))),meetingMainEpics9:e=>_v(e,7954).pipe(Vr((e=>sS(e.payload.body)))),meetingMainEpics10:e=>_v(e,4216).pipe(Ro((e=>{Ga("MEETING_CLAIM_HOST_KEY_RESPONSE",e.payload.body.bresult)})),Eo(nr)),meetingMainEpics11:(e,t)=>e.pipe(HS(`${Lg}`,`${Ug}`),Oo(t),Gr((([e,t])=>{const r=Bu(t),{socket:{zoomSocketStatus:o},meeting:{meetingId:n}}=t;return o===M_.Connected&&(e.type===`${Lg}`?xU.leaveMeeting(r):e.type===`${Ug}`&&xU.endMeeting()),n&&Ga(zo,{}),Cr(EO(t,!1))}))),meetingMainEpics12:(e,t)=>e.pipe(HS(`${kg}`),Oo(t),Gr((([e,t])=>{if(e.type===`${kg}`&&t.meeting.meetingNumber&&!t.meeting.zlkJwtToken){const e={mn:t.meeting.meetingNumber.toString(),name:t.meeting.userName,customerKey:t.meeting.customerKey?ld(t.meeting.customerKey):""},{jbhLeave:r}={jbhLeave:`https://${g}/wc/jbhLeave`},o=`${r}/?${new URLSearchParams(e).toString()}`;fetch(o,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"}})}return nr}))),meetingMainEpics13:e=>_v(e,2).pipe(Ro((()=>{console.warn("Upgrade to latest version to optimize meeting experience")})),Eo(nr)),meetingMainEpics14:e=>_v(e,1).pipe(Ro((e=>{const{payload:{body:{upgradeVersion:t}}}=e,r=tw(1e4);if(r&&r.reason){const e=r.reason.replace(/{(\d+)}/g,(()=>t));r.reason=e}Ga($o,r)})),Eo(nr)),meetingMainEpics15:e=>_v(e,4265).pipe(Vr((e=>{const{payload:{body:t}}=e,{nShareType:r}=t;return Ga(Jo,{userSharePronounType:r}),hS(r)}))),meetingMainEpics16:e=>_v(e,4128).pipe(Ro((e=>{const{payload:{body:{meetingtoken:t}}}=e,{WebclientMeetingToken:r}=Cy;t&&by.set(r,t,Iy.SessionStorage)})),Eo(nr)),meetingMainEpics17:(e,t)=>e.pipe(HS(`${Jg}`),co((()=>!!t.value.meeting.quicklyLeave)),bo((()=>eo(window,"beforeunload").pipe(Ro((()=>{xU.leaveMeeting()})),Eo(nr))))),meetingMainEpics18:(e,t)=>_v(e,8025).pipe(co((e=>!!e.payload.body.Zmk&&!!t.value.meeting.isEnableZmkFromRWG)),Vr((e=>{const{payload:{body:{Zmk:t}}}=e;return Qg({zmk:t})}))),meetingMainEpics19:(e,t)=>e.pipe(HS(`${jg}`),Gr((e=>{const{payload:{mediaFeatureOptions:r,mediaSDKPath:o}}=e,{media:{skipJsMedia:n,patchJsMedia:i,assetsPath:a}}=t.value;if(function(e){return 1===function(e){try{if(47>e.length)return 0;const t=e.slice(e.length-47-1+1,e.length-47+1);if(t)return parseInt(t,16)}catch(e){}return 0}(e)}(r)){const e=`${!n&&i&&Nd(a)&&o?Cd(o):a}/tp.min.js`;return Cr(void 0===window.ZoomTPModule||"function"!=typeof window.ZoomTPModule.ZoomTPWebSocket?new Promise(((t,r)=>s(e,(()=>t("")),(()=>r())))):Promise.resolve("")).pipe(Gr((()=>{const{meeting:{mediaFeatureOptions:e},logger:r}=t.value,o=r?RE.getInstance().makeLogger(["TP MODULE"]):void 0;return Cr(window.ZoomTPModule.initTPModule({options:e,logInstance:o}).then((()=>(Ga(Qo,!0),IS(!0)))).catch((()=>(Ga(Qo,!1),_S(!1)))))})),po((()=>(setTimeout((()=>{RE.getInstance().report(`Unable to load tp.min.js,url:${e}`,["TP MODULE"],"error")}),5e3),Ga(Qo,!1),Cr([_S(!1)])))),Ao(_S(!0)))}return nr})))},dV=Ev(uV,{wakeLockEpic0:(e,t)=>e.pipe(HS(`${Jg}`),Oo(t),co((([,e])=>!!e.meeting.stayAwake)),Ro((async()=>{try{const{isSafari:e,isIOSMobile:t}=T;KU&&KU.release().then((()=>{KU=null})),"wakeLock"in navigator&&((e||t)&&await Mr(lo(eo(document,"click").pipe(go(1)),eo(document,"touchend").pipe(go(1)))),KU=await navigator.wakeLock.request("screen"),KU.addEventListener("release",(()=>{})))}catch(e){}})),bo((()=>eo(document,"visibilitychange").pipe(Gr((async()=>{if("visible"===document.visibilityState){const{isSafari:e,isIOSMobile:t}=T;KU&&KU.release().then((()=>{KU=null})),"wakeLock"in navigator&&((e||t)&&await Mr(lo(eo(document,"click").pipe(go(1)),eo(document,"touchend").pipe(go(1)))),KU=await navigator.wakeLock.request("screen"))}else KU&&KU.release().then((()=>{KU=null}))})),Eo(nr))))),wakeLockEpic1:e=>e.pipe(HS(`${WS}`)).pipe(Ro((()=>{KU&&KU.release().then((()=>{KU=null}))})),Eo(nr))},sV,aV,{meetingInfoEpic:(e,t)=>e.pipe(HS(`${Ng}`),bo((r=>{const o=Object.assign({},r.payload,{password:ld(r.payload.password),topic:ld(r.payload.topic)}),{videoSDKUrl:n}={meetingSDKUrl:`https://${g}/api/v1/wc/info`,videoSDKUrl:`https://${g}/wc/lsdk`};return((e,t,r="zoomsdkjsonpcallback")=>new Nt((o=>{rV++;const n=`${r}${rV}`,i=document.createElement("script");Object.keys(t).forEach((e=>(void 0===t[e]||null===t[e])&&delete t[e])),i.src=`${e}?${new URLSearchParams(Object.assign(t,{callback:n})).toString()}`,i.async=!0,i.onerror=e=>o.error(e),document.getElementsByTagName("head")[0].appendChild(i),window[n]=e=>{i.parentNode&&i.parentNode.removeChild(i),delete window[n],o.next(e),o.complete()}})))(n,o).pipe(Co(e.pipe(HS(`${Lg}`),Ro((()=>{Ga(zo,{})})),go(1))),po((e=>Tr({status:!1,result:e.toString(),errorCode:-3e3}))),Gr((e=>{const[o,n]=(i=Tr(e),[co(s=e=>!0===e.status&&void 0!==e.result,a)(yr(i)),co(uo(s,a))(yr(i))]);var i,s,a;return n.subscribe((e=>{oV.report(`get meeting info error, ${JSON.stringify(e)}`,["Join Meeting Flow","Get Meeting Info Error"],"error"),e.status||(3e3===e.errorCode&&"Meeting password is incorrect"===e.errorMessage?Ga($o,{errorCode:ZD.WrongPasscode,reason:"Incorrect passcode."}):3e3===e.errorCode&&"The role type error"===e.errorMessage?Ga($o,{errorCode:ZD.RoleTypeMissing,reason:"Role type error"}):-3e3===e.errorCode?Ga($o,{errorCode:ZD.CommonError,reason:"connection error"}):3e3===e.errorCode?Ga($o,{reason:e.errorMessage,errorCode:ZD.CommonError}):300===e.errorCode?Ga($o,{reason:"This account does not exist or does not belong to you",errorCode:ZD.CommonError}):124===e.errorCode&&"Parse lite sdk topic and pwd fail"===e.errorMessage?Ga($o,{reason:"Topic is invalid",errorCode:ZD.CommonError}):124===e.errorCode&&"The java web token is expired or more than 2 days or ineffective."===e.errorMessage?Ga($o,{reason:"The token has expired, is over 2 days old, or is ineffective.",errorCode:ZD.CommonError}):124===e.errorCode&&Ga($o,{reason:"Verify JWT failed",errorCode:ZD.CommonError}))})),o.pipe(R_((e=>{if(!0===e.status){const{result:{mid:n,websdkClientFeatureOptions:i,showRecommendVersion:s}}=e;by.init(n);const a=((e,t)=>{if(e.result){const{result:{mn:r,ts:o,auth:n,track_auth:i,mid:s,tid:a,webMediaBlockConfig:u,encryptedRWC:d,encryptedGEORWC:c,user_identity:l,meetingOptions:p,can_recording:h,wcXMPPConfig:m,call_out_country_json:g,isOriginalHost:S,support_call_out:v,liveTranscription:f,logConfig:y,toll_numbers_json:E,h323Password:_,liveStreamInfo:I,rc_auto_delete:A,jwt_rc:b,op_rc:C,mediaSDKVersion:T,mediaSDKPathPrefix:R,zmk:O,fileTransfer:D,fileServerDomain:w,accountId:N,whiteboardCdnPath:M,mediaFeatureOptions:P,websdkClientFeatureOptions:L,sipDomain:k,enableVsdkInteractiveLiveStream:U,enableHybridRWG:V}}=e,{lang:B,password:H,topic:j,zlk:F,cv:W,userName:x}=t;return{meetingNumber:r,meetingId:s,tid:a,ts:o,auth:n,passWord:H,trackAuth:i,customerKey:l,encryptedRWC:JSON.parse(d||"{}"),encryptedGEORWC:JSON.parse(c||"{}"),meetingOptions:JSON.parse(p||"{}"),recordingEnable:"1"===h,topic:j,userName:by.get(Cy.WebclientUserName)||x,cv:W,zlkJwtToken:F,webMediaBlockConfig:u,xmppConfig:JSON.parse(m||"{}"),callOutCountry:JSON.parse(g||"{}"),lang:B,isOriginHost:S,isSupportCallOut:"1"===v,liveTranscription:JSON.parse(f||"{}"),logConfig:y,tollNumbers:void 0===E?void 0:JSON.parse(E),h323Password:_,liveStreamInfo:JSON.parse(I||"{}"),rcAutoDelete:A,jwtRc:b,opRc:C,mediaSDKPath:T&&R?`${Cd(R)}/${T}`:void 0,zmk:O,fileTransfer:JSON.parse(D||"{}"),fileServerDomain:w,accountId:N,mediaFeatureOptions:P,websdkClientFeatureOptions:L,sipDomain:k,enableVsdkInteractiveLiveStream:U,whiteboardCdnPath:M,enableHybridRWG:V}}return e})(e,r.payload);var o;s&&(null==r||null===(o=r.payload)||void 0===o||o.lang,console.log("Update VideoSDK-Web to the latest version to optimize meeting experience","https://developers.zoom.us/docs/video-sdk/web/"));const u=[Tr(jg(a)),fv(tV,t,Mg())],d=(e=>{const t=[];if(e){const r=e.split("").reverse();Object.keys(Fo).filter((e=>/M:\d+(,\d+)*;V:\d+(,\d+)*/.test(Fo[e]))).forEach((e=>{const o=Fo[e];let[n,i]=o.split(";");n.startsWith("V:")&&([n,i]=[i,n]);const s=i.slice(2).split(",").map((e=>r[Number(e)-1])).reverse().join(""),a=parseInt(s,16),u=IO[o];u&&(Array.isArray(u)?u:[u]).forEach((e=>{const r=e.mask?(a&e.mask)>0:a;t.push(Tr(e.action(r)))}))}))}return t})(i);return d.length>0&&u.unshift(...d),Kr(...u)}})))})),Ao(yS(performance.now())))}))),pingRWCEpic:tV,retryPingRWCEpic:(e,t)=>e.pipe(HS(`${ZS}`),Ir(er),co((()=>t.value.meeting.meetingStatus===jo.Initial&&t.value.socket.zoomSocketStatus===M_.Closed)),bo((()=>{const{meeting:{meetingId:e,meetingNumber:r,userName:o},socket:{retryCount:n,rwgServerList:i}}=t.value,s=null==i?void 0:i[n-1];return XU.makeLogger(["Join Meeting Flow"]).info(`ping rwc retry. Last failed rwc:${null==s?void 0:s.rwc}, last failed rwg:${null==s?void 0:s.rwg}, retry count:${n}, meeting detail:${JSON.stringify({meetingId:e,meetingNumber:IE(r),userName:IE(o)})}, rwc log:${ZU.getLog()}`,["Ping RWC Retry"]),Cr(ZU.retry()).pipe(eV(t))})))});function cV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)e[o]=r[o]}return e}var lV=function e(t,r){function o(e,o,n){if("undefined"!=typeof document){"number"==typeof(n=cV({},r,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in n)n[s]&&(i+="; "+s,!0!==n[s]&&(i+="="+n[s].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+i}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],o={},n=0;n<r.length;n++){var i=r[n].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(o[a]=t.read(s,a),e===a)break}catch(e){}}return e?o[e]:o}},remove:function(e,t){o(e,"",cV({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,cV({},this.attributes,t))},withConverter:function(t){return e(cV({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const{WebclientIsOnHold:pV,WebclientOpt:hV,WebclientParticipantId:mV,WebclientZoomId:gV,WebclientMeetingToken:SV}=Cy,{WebclientDeviceId:vV}=Ty;function fV({retryCount:e,rwgServerList:t,userName:r,auth:o,trackAuth:n,meetingId:i,customerKey:s,tid:a,lang:u,ts:d,bid:c,botk:l,confID:p,zlkJwtToken:h,isWebRtcAudioCapable:m,isMeetingReset:g,cameraDevicesList:S,whiteboardCapability:v,isWebrtcVideoCapable:f,webRtcAudioMode:y,mediaFeatureOptions:E}){const _=lV.get("_zm_mtk_guid");let I=by.get(vV);if(I||(I=_y(),by.set(vV,I,Iy.LocalStorage)),t.length>e){var A;const b=t[e],C={dn2:ld(r),auth:o,browser:`${T.browser}${T.browserVersion} ${null!==(A=window)&&void 0!==A&&A.crossOriginIsolated?"SAB":""}`,trackAuth:n,mid:i,tid:a,lang:u,ts:d,"ZM-CID":I,_ZM_MTG_TRACK_ID:_||"",customer_key:ld(s),cfs:0,islch:1};if(h)try{const{vendor:e}=bd(h);e&&Object.assign(C,{vendor:e})}catch(e){console.log(e)}b.rwcAuth?Object.assign(C,{rwcAuth:b.rwcAuth}):b.rwcToken&&Object.assign(C,{rwcToken:b.rwcToken});const R=T.isIE?1:T.isIE||T.isSupportEssentialAudioAndVideoAbility?2:0;Object.assign(C,{as_type:R}),[{key:hV,queryKey:"opt"},{key:mV,queryKey:"participantID"},{key:gV,queryKey:"zoomid"}].forEach((e=>{const t=by.get(e.key);void 0!==t&&(C[e.queryKey]=t)}));const O=c&&l&&p;O&&Object.assign(C,{bid:ld(c),confID:p}),by.get(SV)&&Object.assign(C,{isdj:1}),Object.assign(C,{from:T.isAndroidBrowser?"android":T.isIOSMobile?"ios":"other"}),m&&Object.assign(C,{useABAudio:y}),Object.assign(C,{clientCaps:yV({isAudioBridgeEnabled:m,isBO:O,mediaFeatureOptions:E})}),Object.assign(C,{clientCapsEx:EV({whiteboardCapability:v})}),Object.assign(C,{useWBVideo:f?1:0});const D=g?S.length>0?1:0:1;return Object.assign(C,{isCamera:D}),Object.assign(C,{clientOS:T.isAndroidOrIOSBrowser||T.isHarmonyOS?T.isIOSMobile?"ios":"android":T.isMacOS?"mac":"win"}),Object.assign(C,{audioFeature:Fu.getAudioFeatureFlag(m)}),{queryObject:{...C},rwgServer:b}}return null}function yV(e){const{isAudioBridgeEnabled:t,isBO:r,mediaFeatureOptions:o}=e;let n=L_.WebCameraIndication|L_.SendMeetingTokenSeparately|L_.SmartSummary|L_.LocalRecording|L_.LocalRecordingGrantPermission|L_.UnifyErrorType;const i=Fu.getPTZCapability();return(i.pan||i.tilt||i.zoom)&&(n|=L_.SupportFarEndCameraControl),Fu.isSupportVideoShare()&&(n|=L_.SupportVideoShare),t&&Fu.isSupportAudioBridgeAVSync()&&(n|=L_.WebrtcAudioRtcpTime),Fu.isSupportShareMultiStream()&&(n|=L_.ShareMultiStream),Fu.isSupportVideoLTR()&&(n|=L_.VideoLTR),r||(n|=L_.RequestRemoteControl),Fu.isSupportFullHDVideo(o||"")&&(n|=L_.SupportSend1080PVideo),Fu.isSupportFullHDVideoShare(o||"")&&(n|=L_.SupportSend1080PVideoShare),n}function EV({whiteboardCapability:e}){let t=k_.SupportPresenterAnnotation;return t|=k_.SupportMMRCommandChannel,t|=k_.SupportShareCameraFeed,t|=k_.SupportAudioShareNetworkQuality,t}function _V(e,t){const r=()=>{const{socket:{zoomSocketStatus:t},meeting:{meetingStatus:r,isMeetingReset:o}}=e.value;return t!==M_.Closed&&r===jo.Joined&&!o};return t?Dt(yo(t),co(r)):Dt(co(r))}const IV=__.createAgent();let AV;const bV=C_.getInstance();let CV;const TV=I_.getInstance();let RV;const OV={zoomSocketStatus:M_.Closed,xmppSocketStatus:M_.Closed,mainSessionSocketStatus:M_.Closed,retryCount:0,rwgServerList:[],xmppRetryCount:0},DV=qc({[`${QS}`]:ay(((e,{payload:t})=>{e.zoomSocketStatus=t.status})),[`${YS}`]:ay(((e,{payload:t})=>{const{rwgServerList:r}=e;r.find((e=>e.rwg===t.rwg))||r.push(t)})),[`${ZS}`]:ay(((e,{payload:t})=>{e.retryCount=t})),[`${XS}`]:ay(((e,{payload:t})=>{e.xmppSocketStatus=t})),[`${ev}`]:ay(((e,{payload:t})=>{e.mainSessionSocketStatus=t})),[`${tv}`]:ay(((e,{payload:t})=>{e.xmppRetryCount=t})),[`${rv}`]:()=>OV},OV),wV={mainSessionEpics0:(e,t)=>e.pipe(HS(`${qS}`),Oo(t),co((([,e])=>"closed"===e.socket.mainSessionSocketStatus)),bo((([,e])=>{const{meeting:{svcUrl:t,meetingNumber:r,conId:o,isRlbTP:n}}=e,i=function(e,t,r){return`wss://${e}/wc/media/${t}?type=m&cid=${r}&mode=2`}(t,r,o);return((e,t)=>(TV.connect(e,t),RV=new Bt,ro((e=>TV.on(f_.Message,e)),(e=>TV.off(f_.Message,e))).pipe(Vr((e=>e.data))).subscribe(RV),RV))(i,n).pipe(Vr((e=>{try{return JSON.parse(e)}catch(e){return console.error(e),{evt:0}}})),co((e=>0!==e.evt)),N_(),Vr((e=>JS(e))),Ao(ev(M_.Connecting)))}))),mainSessionEpics1:(e,t)=>e.pipe(HS(`${qS}`),bo((()=>{const[e,r,o]=[f_.Open,f_.Close,f_.Error].map((e=>ro((t=>TV.on(e,t)),(t=>TV.off(e,t)))));return io(e.pipe(vo(ev(M_.Connected))),r.pipe(_V(t,500),Vr((()=>(Ga(Go,{reason:Uo.Failover}),Pg(Wo.DisconnectMChannel))))),o.pipe(_V(t,500),Vr((()=>(Ga(Go,{reason:Uo.Failover}),Pg(Wo.OnErrorMChannel))))))}))),mainSessionEpics2:e=>e.pipe(HS(`${KS}`),vo(ev(M_.Closed)),Ro((()=>{var e;TV.close(),null===(e=RV)||void 0===e||e.complete()})))},NV={epics0:(e,t)=>e.pipe(HS(`${jS}`),Oo(t),co((([,e])=>e.socket.zoomSocketStatus===M_.Closed&&!!e.meeting.meetingId)),bo((([,e])=>function(e){const{media:{patchedMediaSDKStatus:t},meeting:{isRlbTP:r,isRlbTPReady:o}}=e;return Qr([t===Te.Loading?Ja(qs,1).pipe(Ir(Xt)):Cr([0]),r?o?Cr([0]):Ja(Qo,1).pipe(Ir(Xt)):Cr([0])])}(e).pipe(bo((()=>{const{socket:{retryCount:e,rwgServerList:r},meeting:o,breakoutRoom:n,audio:i,video:s,whiteboard:a}=t.value;let u;const d={...o,retryCount:e,rwgServerList:r};if(i){const{isWebRtcAudioCapable:e,webRtcAudioMode:t}=i;Object.assign(d,{isWebRtcAudioCapable:e,webRtcAudioMode:t})}if(s){const{cameraDevicesList:e,isWebrtcVideoCapable:t}=s;Object.assign(d,{cameraDevicesList:e,isWebrtcVideoCapable:t})}if(a)if(o.zlkJwtToken&&n&&n.currentRoom.status===Su.Joining);else{const{whiteboardCapability:e}=a;Object.assign(d,{whiteboardCapability:e})}if(n&&n.currentRoom.status===Su.Joining){const{currentRoom:{boId:e,boConfId:t,boToken:r}}=n;Object.assign(d,{bid:e,botk:r,confID:t})}if(u=o.zlkJwtToken?function(e){const t=fV(e);if(t){const{queryObject:r,rwgServer:o}=t,{topic:n,cv:i,meetingNumber:s,isUIToolkit:a}=e;return Object.assign(r,{topic:ld(n),iccv:i}),a&&Object.assign(r,{browser:r.browser+" UIToolkit"}),`wss://${o.rwg}/instantsdk/${s}?${new URLSearchParams(r).toString()}`}return null}(d):function(e){const t=fV(e);if(t){const{queryObject:r,rwgServer:o}=t,{cv:n,meetingNumber:i}=e;return Object.assign(r,{jscv:n,browser:r.browser+" ComponentView"}),[{key:pV,queryKey:"cfs"}].forEach((e=>{const t=by.get(e.key);void 0!==t&&(r[e.queryKey]=t)})),`wss://${o.rwg}/wc/api/${i}?${new URLSearchParams(r).toString()}`}return null}(d),u){const e=(c=u,l=o.isRlbTP,IV.connect(c,l),AV=new Bt,ro((e=>IV.on(f_.Message,e)),(e=>IV.off(f_.Message,e)),(e=>e.data)).subscribe(AV),AV);return io(e.pipe(co((e=>"string"==typeof e)),Vr((e=>{try{return JSON.parse(e)}catch(e){return console.error(e),{evt:0}}})),N_(),T_((e=>{if(0!==e.evt||!e.body||"invalid parameters!"!==e.body.test)return $S(e);Ga($o,{errorCode:ZD.InvalidParameter,reason:"Invalid parameter"})})),Ao(QS({status:M_.Connecting,rwgUrl:u}))),e.pipe(co((e=>e instanceof ArrayBuffer)),Vr((e=>GS(e)))))}var c,l;return nr})))))),epics1:(e,t)=>e.pipe(HS(`${jS}`),Oo(t),co((([,e])=>e.socket.zoomSocketStatus===M_.Closed&&!!e.meeting.meetingId)),bo((()=>{const[e,r,o,n]=[f_.Open,f_.Close,f_.Error,f_.Inactive].map((e=>ro((t=>IV.on(e,t)),(t=>IV.off(e,t)))));return io(e.pipe(Gr((()=>io(Tr(QS({status:M_.Connected})),oo(6e4).pipe(Oo(t),co((([,e])=>e.meeting.meetingStatus===jo.Initial&&!e.meeting.isMeetingReset)),Vr((()=>(Ga(Go,{reason:Uo.Failover}),Pg(Wo.NoHeartbeat))))))))),r.pipe(_V(t),Vr((()=>(Ga(Go,{reason:Uo.Failover}),Pg(Wo.Disconnect))))),n.pipe(_V(t),Vr((()=>(Ga(Go,{reason:Uo.Failover}),Pg(Wo.NoHeartbeat))))),o.pipe(Oo(t),Gr((([,e])=>{const{meeting:{meetingStatus:t,isMeetingReset:r},socket:{rwgServerList:o,retryCount:n}}=e,i=[];return t===jo.Initial&&null!=o&&o.length?i.push(ZS(n+1),WS({retry:!0})):r||t!==jo.Joined||(Ga(Go,{reason:Uo.Failover}),i.push(Pg(Wo.OnError))),Cr(i)}))))}))),epics2:(e,t)=>e.pipe(HS(`${WS}`),bo((e=>{const r=[QS({status:M_.Closed})];return e.payload&&e.payload.retry?Cr(r):Cr(r).pipe(yo(100),Ro((()=>{var e;t.value.socket.zoomSocketStatus===M_.Closed&&(IV.close(),null===(e=AV)||void 0===e||e.complete())})))})))},MV=Ev(NV,{xmppEpics0:(e,t)=>e.pipe(HS(`${Jg}`),Gr((()=>{const{meeting:{meetingOptions:e,zlkJwtToken:r,isWebinar:o}}=t.value,n=[];return(e.isPollingEnabled||r||o)&&n.push(FS()),Cr(n)}))),xmppEpics1:(e,t)=>e.pipe(HS(`${FS}`),Oo(t),co((([,e])=>e.socket.xmppSocketStatus===M_.Closed)),bo((([,e])=>{const{meeting:{svcUrl:t,meetingNumber:r,conId:o,isRlbTP:n}}=e,i=function(e,t,r){return`wss://${e}/wc/media/${t}?type=x&cid=${r}`}(t,r,o);return((e,t)=>(bV.connect(e,t),CV=new Bt,ro((e=>bV.on(b_.Message,e)),(e=>bV.off(b_.Message,e))).subscribe(CV),CV))(i,n).pipe(co((e=>void 0!==(null==e?void 0:e.evt))),Vr((e=>zS(e))),Ao(XS(M_.Connecting)))}))),xmppEpics2:(e,t)=>e.pipe(HS(`${FS}`),bo((()=>{const[e,r,o]=[b_.Open,b_.Close,b_.Error].map((e=>ro((t=>bV.on(e,t)),(t=>bV.off(e,t))))),n=e=>Gr((()=>{const{socket:{xmppSocketStatus:r,xmppRetryCount:o}}=t.value,n=[];return r===M_.Connecting&&o<3?(n.push(tv(o+1)),n.push(xS({retry:!0}))):(r===M_.Connected||o>=3)&&(Ga(Go,{reason:Uo.Failover}),n.push(Pg(e))),Cr(n)}));return io(e.pipe(Ro((()=>{const e=function(){const{isSupportEssentialAudioAndVideoAbility:e,isSupportAudioWorklet:t}=T;return e&&t?11:10}();bV.join(e)})),Vr((()=>XS(M_.Connected)))),r.pipe(_V(t,500),n(Wo.DisconnectXmpp)),o.pipe(_V(t,500),n(Wo.OnErrorXmppChannel)))}))),xmppEpics3:(e,t)=>e.pipe(HS(`${xS}`),bo((e=>{var r;const o=[XS(M_.Closed)];return null!==(r=e.payload)&&void 0!==r&&r.retry?Cr(o):Cr(o).pipe(yo(100),Ro((()=>{var e;t.value.socket.xmppSocketStatus===M_.Closed&&(bV.close(),null===(e=CV)||void 0===e||e.complete())})))}))),xmppEpics4:(e,t)=>e.pipe(HS(`${tv}`),co((e=>e.payload<=3)),Gr((e=>Cr([e]).pipe(yo(1e3*Math.pow(2,e.payload-1))))),_V(t),Vr((()=>FS())))},wV),PV={audioEncodeStatus:"initial",audioDecodeStatus:"initial",videoEncodeStatus:"initial",videoDecodeStatus:"initial",sharingEncodeStatus:"initial",sharingDecodeStatus:"initial",assetsPath:"",mediaConstraints:void 0,enforceMultipleVideos:!1,enforceVirtualBackground:!1,isMediaAgentInitialized:!1,disableRenderLimits:!1},LV=qc({[`${sv}`]:ay(((e,{payload:t})=>{e.audioDecodeStatus=t})),[`${iv}`]:ay(((e,{payload:t})=>{e.audioEncodeStatus=t})),[`${cv}`]:ay(((e,{payload:t})=>{e.sharingDecodeStatus=t})),[`${dv}`]:ay(((e,{payload:t})=>{e.sharingEncodeStatus=t})),[`${uv}`]:ay(((e,{payload:t})=>{e.videoDecodeStatus=t})),[`${av}`]:ay(((e,{payload:t})=>{e.videoEncodeStatus=t})),[`${lv}`]:ay(((e,{payload:t})=>{e.mediaConstraints=t.mediaConstraints,e.assetsPath=t.assetsPath,e.enforceMultipleVideos=!!t.enforceMultipleVideos,e.enforceVirtualBackground=t.enforceVirtualBackground,e.skipJsMedia=t.skipJsMedia,e.patchJsMedia=t.patchJsMedia,e.alternativeNameForVideoPlayer=t.alternativeNameForVideoPlayer,t.enforceMultipleVideos&&"object"==typeof t.enforceMultipleVideos&&(e.disableRenderLimits=!!t.enforceMultipleVideos.disableRenderLimits)})),[`${pv}`]:ay(((e,{payload:t})=>{const{type:r,encryptKey:o,additionalType:n}=t,i={encryptKey:o,additionalType:n};"audio"===r?e.audioEncrypt=i:"video"===r?e.videoEncrypt=i:"sharing"===r&&(e.sharingEncrypt=i)})),[`${hv}`]:ay(((e,{payload:t})=>{e.isEnableDecoderInWorklet=t})),[`${mv}`]:ay(((e,{payload:t})=>{e.patchedMediaSDKStatus=t})),[`${gv}`]:ay(((e,{payload:t})=>{e.assetsPath=t})),[`${Sv}`]:ay(((e,{payload:t})=>{e.isMediaAgentInitialized=t})),[`${vv}`]:e=>({...PV,mediaConstraints:e.mediaConstraints,assetsPath:e.assetsPath,enforceMultipleVideos:e.enforceMultipleVideos,disableRenderLimits:e.disableRenderLimits,enforceVirtualBackground:e.enforceVirtualBackground,alternativeNameForVideoPlayer:e.alternativeNameForVideoPlayer})},PV),{InitSuccessVideo:kV,InitSuccessAudio:UV,InitSuccessSharing:VV,InitFailedVideo:BV,InitFailedAudio:HV,InitFailedSharing:jV,HealthCheckFailed:FV,AudioWebsocketBroken:WV,VideoWebsocketBroken:xV,AudioStreamFailed:$V,VideoStreamFailed:GV,WebglContextInvalid:zV,WasmMemoryFail:qV,AudioStreamMuted:KV,RecoverWebrtcAudio:JV,AudioBridgeSocketConnectionError:QV,VideoStreamMuted:YV}=k,ZV=ME(Fu.getInstance()),XV=RE.getInstance(),eB=XV.makeLogger(["Media Agent"]),tB=[],rB={epics0:(e,t)=>e.pipe(HS(`${jg}`),bo((r=>{var o;const{meeting:{isMeetingReset:n}}=t.value;return T.mediaFeatureOptions=null===(o=r.payload)||void 0===o?void 0:o.mediaFeatureOptions,e.pipe(Co(e.pipe(HS(`${WS}`),co((e=>{var t;return!(null!==(t=e.payload)&&void 0!==t&&t.retry)})),go(1))),HS(`${Jg}`),go(1),O_((()=>{var e;const{logger:r,media:{mediaConstraints:o,assetsPath:i,enforceMultipleVideos:s,enforceVirtualBackground:a},meeting:{meetingId:u,meetingNumber:d,mediaFeatureOptions:c,webMediaBlockConfig:l}}=t.value,p=null!=r&&null!==(e=r.options)&&void 0!==e&&e.enable?RE.getInstance().makeLogger(["MEDIA SDK"]):void 0;return function(e){const{media:{patchedMediaSDKStatus:t}}=e;return t===Te.Loading?Mr(Ja(qs,1)):Promise.resolve()}(t.value).then((()=>{const e=[];return ZV.init({...Gd(s,a),globalTracingLogger:PE(p),mid:u,meetingNumber:d,mediaSDKConfig:{mediaFeatureOptions:c,webMediaBlockConfig:l,mediaSDKCDNPath:i},rwgAgent:__.createAgent()}),e.push(Sv(!0)),n&&void 0!==o&&void 0!==i&&e.push(ov()),e})).catch((()=>[]))})))}))),epics1:(e,t)=>e.pipe(HS(`${jg}`),co((e=>{const{payload:{mediaSDKPath:r}}=e,{media:{skipJsMedia:o,patchJsMedia:n,assetsPath:i},meeting:{isMeetingReset:s}}=t.value;return!o&&Nd(i)&&!!n&&!!r&&!s})),bo((e=>{const{payload:{mediaSDKPath:t}}=e,r=Cd(t);return Cr(new Promise(((e,t)=>{const o=`${r}/${Vo}`;"JsMediaSDK_Instance"in window&&(window.JsMediaSDK_Instance_backup=window.JsMediaSDK_Instance,delete window.JsMediaSDK_Instance),s(o,(()=>{"JsMediaSDK_Instance_backup"in window&&delete window.JsMediaSDK_Instance_backup,eB.info(`patched media sdk url:${o}`),e("")}),(()=>{"JsMediaSDK_Instance_backup"in window&&(window.JsMediaSDK_Instance=window.JsMediaSDK_Instance_backup,delete window.JsMediaSDK_Instance_backup),eB.error(`cannot load patched media sdk :${o}`),t()}))}))).pipe(Gr((()=>(Ga(qs),Cr([mv(Te.Done),gv(r)])))),po((()=>(Ga(qs),Cr([mv(Te.Done)])))),Ao(mv(Te.Loading)))}))),epics2:(e,t)=>function(e,t){return e.pipe(HS(`${ov}`),co((()=>{const{media:{assetsPath:e,mediaConstraints:r}}=t.value;return void 0!==e&&void 0!==r})),bo((()=>{const{media:{isMediaAgentInitialized:r}}=t.value;return r?Cr([0]):e.pipe(HS(`${Sv}`),co((e=>!!e.payload)),go(1))})))}(e,t).pipe(Ro((()=>{const{media:{assetsPath:e,mediaConstraints:r}}=t.value;ZV.notifySDKMeetingReady(),e&&r&&ZV.setAssetsAndConstraint(e,r),Pd(t).pipe(bo((e=>Cr(Kd.acquire().then((()=>e)))))).subscribe((e=>{const{meeting:{svcUrl:r,meetingNumber:o,conId:n,e2eEncrypt:i,userId:s,isWebinar:a,enableWebtransport:u,webtransportPort:d,isUseWBVideo:c,mediasdkConfig:l,reportDomain:p,abToken:h,confId:m},media:{alternativeNameForVideoPlayer:g,enforceMultipleVideos:S,disableRenderLimits:v},audio:f,video:y}=t.value;var E;e&&(ZV.connect({svcUrl:r,meetingNumber:o,conId:n,confId:m,e2eEncrypt:i,isViewOnly:pu(e.userRole),currentUserId:s,isWebinar:a,reportDomain:p,abToken:null!=h?h:"",enableWebtransport:!!u,webtransportPort:null!=d?d:0,isWebRtcVideoCapable:c,isWebRtcAudioCapable:!(null==f||!f.isWebRtcAudioCapable),rendererType:null!==(E=null==y?void 0:y.rendererType)&&void 0!==E?E:0,webrtcMode:ec(!(null==f||!f.isWebRtcAudioCapable),c),mediasdkConfig:null!=l?l:{},enforceMultipleVideos:S,disableRenderLimits:v}),Fu.initVideoPlayer({mediaSDK:()=>ZV.instance,tagName:g,failover:"1"}))}))})),bo((()=>ro((e=>ZV.registerCallback(e)),(e=>ZV.unregisterCallback(e)),((e,t)=>({type:e,data:t}))).pipe(Vr((e=>nv(e))))))),epics3:e=>Cv(e,[kV,UV,VV,BV,HV,jV]).pipe(R_((e=>{const{payload:{type:t,data:r}}=e;if(t===UV||t===HV){if(r===U.EncodeSuccess)return Ga(Ls),Tr(iv("success"));if(r===U.DecodeSuccess)return Ga(ks),Tr(sv("success"));if(r===U.EncodeFailed)return Ga(js),Tr(iv("failed"));if(r===U.DecodeFailed)return Ga(Fs),Tr(sv("failed"))}else if(t===kV||t===BV){if(r===U.EncodeSuccess)return Ga(Us),Tr(av("success"));if(r===U.DecodeSuccess)return Ga(Vs),Tr(uv("success"));if(r===U.EncodeFailed)return Ga(Ws),Tr(av("failed"));if(r===U.DecodeFailed)return Ga(xs),Tr(uv("failed"))}else if(t===VV||t===jV){if(r===U.EncodeSuccess)return Ga(Bs),Tr(dv("success"));if(r===U.DecodeSuccess)return Ga(Hs),Tr(cv("success"));if(r===U.EncodeFailed)return Ga($s),Tr(dv("failed"));if(r===U.DecodeFailed)return Ga(Gs),Tr(cv("failed"));if(t===VV&&void 0===r)return Ga(Hs),Tr(cv("success"))}}))),epics4:(e,t)=>Cv(e,[kV,UV]).pipe(bo((()=>"object"==typeof navigator.mediaDevices?io(kd(),io(Cv(e,k.StartVideoCaptureSuccess),Cv(e,k.DeviceChangeEvent),Cv(e,k.UserGrantCaptureAudio).pipe(co((()=>!t.value.audio.isUserGrantCaptureAudio))),Cv(e,k.JoinComputerAudioComplete).pipe(co((e=>{var t;return!(null===(t=e.payload.data)||void 0===t||!t.isPassive)}))),Ja(Ks).pipe(co((e=>"granted"===e.state)))).pipe(Gr((()=>kd().pipe(Ro((()=>{setTimeout((()=>{Ga(zs)}),50)}))))))).pipe(Oo(t),Gr((([e,t])=>{const r=[z_(e.microphones),q_(e.speakers),Yc(e.cameras)];if(t.audio){const{audio:{activeMicrophone:i,activeSpeaker:s,microphoneDevicesList:a,speakerDevicesList:u,isUsingMediaPlayback:d},video:{cameraDevicesList:c,activeCamera:l,isUsingMediaPlayback:p}}=t,h=Ru(t),{microphones:m,speakers:g,cameras:S}=e,v=a.filter((e=>-1===m.findIndex((t=>t.deviceId===e.deviceId)))),f=u.filter((e=>-1===g.findIndex((t=>t.deviceId===e.deviceId)))),y=c.filter((e=>-1===S.findIndex((t=>t.deviceId===e.deviceId))));if(v.length>0){if(v.some((e=>zd(e,i,a)))){const e=qd(m);d||ZV.changeMicrophone("default",null==e?void 0:e.label,!(null==h||!h.muted)),r.push(K_("default"))}}else if("default"===i){const e=qd(a),t=qd(m);!d&&a.length>0&&(null==e?void 0:e.label)!==(null==t?void 0:t.label)&&ZV.changeMicrophone("default",null==t?void 0:t.label,!(null==h||!h.muted))}var o,n;f.length>0?f.some((e=>zd(e,s,u)))&&(ZV.changeSpeaker("default"),r.push(J_("default"))):"default"===s&&u.length>0&&(null===(o=qd(u))||void 0===o?void 0:o.label)!==(null===(n=qd(g))||void 0===n?void 0:n.label)&&ZV.changeSpeaker("default"),y.length>0&&y.some((e=>zd(e,l,c)))&&(p||ZV.stopCaptureVideo(),r.push(Zc(T.isAndroidOrIOSBrowser?re.User:"default")))}return Cr(r)}))):nr))),epics5:(e,t)=>bv(e,Ov).pipe(Ro((e=>{const{type:r,payload:{body:o}}=e,n=r===`${JS}`;if(o.add){const e=o.add.map((e=>({userid:e.id,sn:e.zoomID&&gd(e.zoomID)})));if(!n){const{meeting:{gcmSessinKey:r}}=t.value;ZV.sendUserNodeList(e,r)}ZV.updateUserMediaSN({added:e,isFromMainSession:n,iVType:lb.SHARING_DECODE}),n&&ZV.updateUserMediaSN({added:e,isFromMainSession:n,iVType:lb.AUDIO_DECODE})}if(o.remove&&o.remove.length>0){if(!n){const{meeting:{gcmSessinKey:e}}=t.value;ZV.sendUserNodeList(o.remove.map((e=>({userid:e.id,bremove:!0}))),e)}ZV.updateUserMediaSN({removed:o.remove.map((e=>e.id)),isFromMainSession:n,iVType:lb.SHARING_DECODE}),n&&ZV.updateUserMediaSN({removed:o.remove.map((e=>e.id)),isFromMainSession:n,iVType:lb.AUDIO_DECODE})}})),Eo(nr)),epics6:e=>Cv(e,k.AesGcmIvResponse).pipe(Ro((e=>{const{payload:{data:{workerType:t,iv:r}}}=e,o=by.get(Cy.WebclientIVState);if(o){const e={...o,[t]:r};by.set(Cy.WebclientIVState,e,Iy.SessionStorage)}})),Eo(nr)),epics7:e=>e.pipe(HS(`${$S}`),co((e=>[wv,Nv,Rv].includes(e.payload.evt))),Vr((e=>{const{payload:{evt:t,body:{encryptKey:r,additionalType:o}}}=e;return pv({type:t===wv?"audio":t===Nv?"video":"sharing",encryptKey:r,additionalType:o})}))),epics8:e=>e.pipe(HS(`${lv}`),Ro((e=>{const{payload:t}=e;Wm.setMediaOption({assetsPath:t.assetsPath,enforceMultipleVideos:t.enforceMultipleVideos,enforceVirtualBackground:t.enforceVirtualBackground,alternativeNameForVideoPlayer:t.alternativeNameForVideoPlayer})})),Eo(nr)),epics9:e=>e.pipe(HS(`${Ng}`,`${wg}`),Ro((()=>{Ke.getInstance().inProgress&&(Ke.getInstance().disconnect(),Kd.watch(Ke.getInstance().destroy()))})),Eo(nr)),epics10:e=>e.pipe(HS(`${Ng}`,`${wg}`),bo((()=>"permissions"in navigator?["microphone","camera"].map((e=>{navigator.permissions.query({name:e}).then((t=>{const r=()=>{Ga(Ks,{name:e,state:t.state})};r(),t.addEventListener("change",r),tB.push((()=>{t.removeEventListener("change",r)}))})).catch((()=>{}))})):nr)),Eo(nr)),epics11:e=>e.pipe(HS(`${iS}`),co((e=>e.payload===jo.Closed)),Ro((()=>{tB.length>0&&(tB.forEach((e=>e())),tB.length=0)})),Eo(nr)),epics12:(e,t)=>Cv(e,[FV,BV,HV,jV,WV,xV,$V,GV,zV,qV,KV,JV,QV,YV]).pipe(Gr((r=>{const{payload:{type:o,data:n}}=r;let i,s;if(o===WV||o===QV)i={message:"Audio connection failed. Please refresh your browser to reconnect.",type:"audio",code:Pe.AudioConnectionFailed};else if(o===xV)i={message:"Connection to remote video has failed. Please refresh your browser to try again.",type:"video",code:Pe.VideoConnectionFailed};else if(o===$V)n===Me.Exception?i={message:"Can't access your microphone. Please refresh your browser to try again.",type:"audio",code:Pe.AudioStreamEnded}:n===Me.PermissionReset&&(i={message:"Your browser is preventing access to your microphone.Please grant the permission.",type:"audio",code:Pe.MicrophonePermissionReset});else if(o===GV)n===Me.Exception?i={message:"Can't access your camera. Please refresh your browser to try again.",type:"video",code:Pe.VideoStreamEnded}:n===Me.PermissionReset&&(i={message:"Your browser is preventing access to your camera.Please grant the permission.",type:"video",code:Pe.CameraPermissionReset});else if(o===zV)i={message:"Oops! Something went wrong. Please close all browsers and rejoin the meeting.",type:"video",code:Pe.WebGlContextInvalid};else if(o===qV)i={message:"Uh-oh! Youre running low on memory. Please close all browsers and rejoin the meeting.",type:"video",code:Pe.WasmOutOfMemory};else if(o===FV){let[e,t]=["",0];-129===n?(e="sharing",t=Pe.SharingStreamFailed):[-130,-135].includes(n)?(e="video",t=Pe.VideoStreamFailed):[-131,-136].includes(n)&&(e="audio",t=Pe.AudioStreamFailed),i={message:"Oops! Something went wrong. Please close all browsers and rejoin the meeting.",type:e,code:t}}else if(o===KV){const r="audio";let[o,a]=[0,""];n?(o=Pe.MicrophoneMuted,a="Your mic is muted in system or browser settings. Please open your settings to unmute and adjust the level."):(o=Pe.AudioStreamMuted,a="Audio was interrupted by the system. Please click anywhere to resume playback.",s=Yd().pipe(Co(Cv(e,k.AudioStreamUnmuted).pipe(go(1))),Ro((()=>{Zd(ZV,t.value)})))),i={message:a,type:r,code:o}}else if(o===JV)!1===n&&(i={message:"Audio playback was interrupted. Please click anywhere to resume playback.",type:"audio",code:Pe.AudioPlaybackInterrupted});else if(o===YV&&t.value.video.isCurrentUserStartedVideo){const r="video",o=Pe.VideoStreamMuted,n="Video was interrupted by the system. Please click anywhere to resume.";s=Yd().pipe(Co(Cv(e,k.VideoStreamUnmuted).pipe(go(1))),Ro((()=>{!function(e,t){const{video:{isCurrentUserStartedVideo:r,activeCamera:o,isUsingMediaPlayback:n,customizedVideoOption:i}}=t;if(r&&!n){const{captureWidth:t,captureHeight:r}=Sm(i);e.changeCamera(o,oe.includes(o),{width:t,height:r},!0)}}(ZV,t.value)}))),i={message:n,type:r,code:o}}var a;return i&&(XV.report(`active media failed. reason:${o}; message:${i.message}`,`${null===(a=i.type)||void 0===a?void 0:a.replace(/^./,(e=>e.toUpperCase()))} exception flow`),Ga(Js,i)),null!=s?s:Cr([])})),Gr((()=>nr))),epics13:e=>_v(e,4366).pipe(Ro((e=>{const{payload:t}=e;ZV.bypassMediaMessage(t)})),Gr((()=>nr))),epics14:(e,t)=>Cv(e,k.NotifyUIFailover).pipe(co((()=>!t.value.meeting.isMeetingReset&&t.value.meeting.meetingStatus===jo.Joined)),Vr((e=>{const{payload:{data:t}}=e;Ga(Go,{reason:Uo.Failover});let r=Wo.NotifyUiFailover;return void 0!==(null==t?void 0:t.audio)&&(T.isAndroidOrIOSBrowser||T.isHarmonyOS||t.audio!==Le.FallbackToWasm||by.set(Cy.VideoSDKWebRTCAudioFallbackWasm,1,Iy.SessionStorage)),void 0!==(null==t?void 0:t.video)&&(r=Wo.NotifyUIWMSCFailover,t.video===Le.FallbackToWasm&&by.set(Cy.VideoSDKWebRTCVideoFallbackWasm,1,Iy.SessionStorage)),Pg(r)})))},oB=Ev(rB),nB={processorCreatedList:[],processorInstanceList:[]},iB={meeting:iV,socket:DV,participants:dy,media:LV,processor:qc({[`${mT}`]:ay(((e,{payload:t})=>{e.processorCreatedList.push(t)})),[`${gT}`]:ay(((e,{payload:t})=>{e.processorInstanceList.push(t)})),[`${ST}`]:ay(((e,{payload:t})=>{const r=e.processorInstanceList.findIndex((e=>e.name===t.name&&e.type===t.type));r>=0&&e.processorInstanceList.splice(r,1)})),[`${vT}`]:()=>({...nB})},nB)},sB=WU;function aB(e){return function(e){for(var t=Object.keys(e),r={},o=0;o<t.length;o++){var n=t[o];"function"==typeof e[n]&&(r[n]=e[n])}var i,s=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:jU.INIT}))throw new Error(VU(12));if(void 0===r(void 0,{type:jU.PROBE_UNKNOWN_ACTION()}))throw new Error(VU(13))}))}(r)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var o=!1,n={},a=0;a<s.length;a++){var u=s[a],d=r[u],c=e[u],l=d(c,t);if(void 0===l)throw t&&t.type,new Error(VU(14));n[u]=l,o=o||l!==c}return(o=o||s.length!==Object.keys(e).length)?n:e}}({...iB,...e})}let uB=!1,dB=!1;function cB(){return uB&&dB}function lB(e,t){s(`${e}/dist/js/whiteboard-sdk.js`,(()=>{uB=!0,t(uB,dB)}),(()=>{uB=!1,t(uB,dB)})),function(e,t,r){const o=document.createElement("link");o.readyState?o.onreadystatechange=()=>{"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,t())}:(o.onload=()=>{t()},o.onerror=()=>{r()}),o.href=e,o.type="text/css",o.rel="stylesheet",o.media="screen,print",window.crossOriginIsolated&&(o.crossOrigin="anonymous"),"function"==typeof document.body.append?document.getElementsByTagName("head")[0].append(o):document.getElementsByTagName("head")[0].appendChild(o)}(`${e}/dist/css/whiteboard-sdk.css`,(()=>{dB=!0,t(uB,dB)}),(()=>{dB=!1,t(uB,dB)}))}Fu.getInstance();const pB=__.createAgent();var hB;const mB=__.createAgent(),gB=Fu.getInstance(),SB=UE("Whiteboard");hB=class extends A_{updateToken(e){return(0,this[o])(Lb(e)),Promise.resolve()}startDashboard(e="ZOOM_WHITEBOARD_DASHBOARD"){const t=this[r](),n=this[o],{whiteboard:{isShowWhiteboardWindow:i,dashboardStatus:s,whiteboardToken:a,dashboardId:u},meeting:{zlkJwtToken:d,lang:c}}=t;if(d)return sC(Na.WHITEBOARD_VIDEOSDK_NOT_SUPPORT_DASHBOARD);if(s===DS.LOADING)return Promise.resolve("Dashboard already loading");const l=function(e,t){const r=document.getElementById(t);return!!r&&(r.src=e,r.sandbox="allow-scripts allow-same-origin allow-forms",!0)}(`https://${E()}/wb/embed/dashboard?clientType=meetingSdk&deviceType=desktop&_zm_lang=${c}`,e);return l?i?Promise.resolve("Dashboard already open"):(n(Rb(!0)),Ga(Pa,DS.LOADING),n(Db(DS.LOADING)),nC({messageName:"REFRESH_DATA"},e),(e=>{const{meeting:{isWebinar:t,meetingTopic:r,meetingOptions:o},whiteboard:{dashboardId:n}}=e,i={messageName:"RESPONSE_BASIC_INFO",supportNewFromClient:!0,meetingName:r,isDisableNewWhiteboard:!Ab(e),isWebinar:t,isDisableSaveCloudWhiteboard:!o.isWebclientInMeetingWBEnabledSave2Cloud,zmCalBindDocs:Ib.isEmpty(o.meetingDocIds)?[]:[o.meetingDocIds]};nC(i,n)})(this[r]()),e&&e!==u&&n(wb(e)),Promise.resolve()):sC(Na.WHITEBOARD_DASHBOARD_IFRAME_NOT_FOUND)}stopDashboard(){const e=this[r](),t=this[o],{whiteboard:{isShowWhiteboardWindow:n}}=e;return n?(t(Rb(!1)),t(Db(DS.CLOSE)),Promise.resolve()):Promise.resolve("you had closed wb dashboard, do nothing")}isNeedInit(e,t){return e===OS.DEFAULT||e===OS.READY||t===Na.WHITEBOARD_LOAD_WHITEBOARD_JS_CSS_ERROR}initWhiteboard(){const e=this[r](),t=this[o],{whiteboard:{whiteboardStatus:n,whiteboardToken:i,whiteboardCdnPath:s,whiteboardError:{errorCode:a}},meeting:{zmk:u}}=e;return i||t(kb()),!this.isNeedInit(n,a)||n!==OS.DEFAULT&&n!==OS.READY&&a!==Na.WHITEBOARD_LOAD_WHITEBOARD_JS_CSS_ERROR?Promise.resolve("You had init whiteboard"):(lB(s,((e,o)=>{var n;e&&o?(u||iC(t,Na.WHITEBOARD_GET_INIT_TOKEN_FAIL),((e,t)=>{const r=`https://${E()}`;window.addEventListener("message",(e=>{if(e.origin===r&&e&&e.data&&e.data.type===wS){const n=e.data.data;if(n.messageName)switch(n.messageName){case"REQUEST_TOKEN":{const{whiteboard:{whiteboardToken:n}}=t();var o;return void(n&&(null==e||null===(o=e.source)||void 0===o||o.postMessage({type:wS,data:{messageName:"RESPONSE_TOKEN",whiteboardToken:n}},{targetOrigin:r})))}case"REFRESH_TOKEN":return void Ga(ka,{type:"refresh"});case"REQUEST_BASIC_INFO":return void Ga(ka,{type:"basic"});case"OPEN_WHITEBOARD":return void Ga(ka,{type:"open",wbInfo:n.wbInfo});case"NEW_WHITEBOARD":return void Ga(ka,{type:"new",wbInfo:n.wbInfo});default:return}}}))})(0,this[r]),t(Ob(OS.INIT)),Ga(Ma,{type:OS.INIT}),void 0===(null===(n=window)||void 0===n?void 0:n.whiteboardSDKCdnPath)&&(window.whiteboardSDKCdnPath=s)):e||o||(t(Ob(OS.ERROR)),t(qb(aC(Na.WHITEBOARD_LOAD_WHITEBOARD_JS_CSS_ERROR))))})),Ka(Ma,(e=>{const{type:t}=e;return t===OS.INIT}),1e4))}startWhiteboard(e,t){var n,i,s;let a=t;const u=this[r](),d=this[o],{meeting:{userId:c,zlkJwtToken:l},whiteboard:{whiteboardStatus:p,whiteboardToken:h,whiteboardError:{errorCode:m}},share:{status:g,isRemoteSharingActive:S},breakoutRoom:v}=u;this.isNeedInit(p,m)&&this.initWhiteboard();const f=p===OS.OPENED;if(!e)return sC(Na.WHITEBOARD_ELEMENT_NOT_FOUND);if(f)return sC(Na.WHITEBOARD_ALREADY_OPEN);if(g===q.Sharing||g===q.Paused)return sC(Na.WHITEBOARD_REQUIRE_SHARING_STOP);if(S)return sC(Na.WHITEBOARD_AND_SHARING_CONFLICT);let y=!1;const E=null==v?void 0:v.currentRoom;if(E&&null!=E&&E.status&&(null==E?void 0:E.status)===Su.InRoom&&(y=!0),y&&l)return sC(Na.WHITEBOARD_INSUFFICIENT_PRIVILEGES);let _=(null===(n=a)||void 0===n?void 0:n.haveAccessAfterMeeting)||!1;if(l&&(_=!1),!h)return d(kb()),iC(d,Na.WHITEBOARD_GET_INIT_TOKEN_FAIL);if(p===OS.ERROR&&cB())d(Ob(OS.READY)),d(aC(Na.WHITEBOARD_NOT_INIT_SUCCESS));else if(p===OS.ERROR&&!cB())return Ga(Ma,{type:OS.ERROR,payload:{errorCode:Na.WHITEBOARD_NOT_INIT,errorMessage:NS[Na.WHITEBOARD_NOT_INIT]}}),sC(Na.WHITEBOARD_NOT_INIT);var I;if(d(Kb(e)),null!==(i=a)&&void 0!==i&&i.isDisableExport&&d(Jb(null===(I=a)||void 0===I?void 0:I.isDisableExport)),null!==(s=a)&&void 0!==s&&s.docId)((e,t,r)=>{const{whiteboard:{whiteboardStatus:o,whiteboardConfig:n,whiteboardSharer:i,whiteboardToken:s,whiteboardElement:a,whiteboardOpenType:u},meeting:{zlkJwtToken:d},breakoutRoom:c}=e,{haveAccessAfterMeeting:l,sharingrole:p,docId:h}=r;if(!h&&n.docId&&i.dcsID)return;let m=!1;const g=null==c?void 0:c.currentRoom;g&&null!=g&&g.status&&(null==g?void 0:g.status)===Su.InRoom&&(m=!0),d||"dashboard"!==u?t(Xb({presenterID:i.presenterID,dcsID:i.dcsID,element:a})):pB.openWhiteboard({haveAccessAfterMeeting:l,sharingrole:p,docId:h,isInRoom:m,boToken:null==g?void 0:g.boToken,whiteboardToken:s})})(this[r](),d,a);else{var A,b,C,T,R,O,D,w,N,M,P,L;d(zb(_));const e={templateId:null!==(A=a)&&void 0!==A&&A.templateId?null===(b=a)||void 0===b?void 0:b.templateId:"",docName:null!==(C=a)&&void 0!==C&&C.docName?null===(T=a)||void 0===T?void 0:T.docName:"My temp whiteboard",docType:null!==(R=a)&&void 0!==R&&R.docType?null===(O=a)||void 0===O?void 0:O.docType:"",accountId:null!==(D=a)&&void 0!==D&&D.accountId?null===(w=a)||void 0===w?void 0:w.accountId:"",templateType:null!==(N=a)&&void 0!==N&&N.templateType?null===(M=a)||void 0===M?void 0:M.templateType:0,sharingrole:null!==(P=a)&&void 0!==P&&P.sharingrole?null===(L=a)||void 0===L?void 0:L.sharingrole:TS.EDITOR,haveAccessAfterMeeting:_,whiteboardToken:h};((e,t,r)=>{const{whiteboard:{whiteboardStatus:o}}=e;o===OS.DEFAULT||o===OS.ERROR?aC(Na.WHITEBOARD_NOT_INIT_SUCCESS):(pB.newWhiteboard(r),t(Ob(OS.LOADING)),Ga(Ma,{type:OS.LOADING}),Promise.resolve())})(this[r](),d,e)}return Ka("WHITEBOARD_INDICATION_MESSAGE_EVENTS",(e=>{const{presenterID:t,dcsID:r}=e;return!(!t||t!==c||!r)}),3e4)}stopWhiteboard(e){const t=this[r](),{meeting:{userId:o},whiteboard:{whiteboardStatus:n,whiteboardSharer:{presenterID:i},whiteboardConfig:{docId:s}},share:{ssrc:a}}=t;if(n!==OS.OPENED)return Promise.resolve("You not open WB.");if(!e&&!s)return sC(Na.WHITEBOARD_DOC_ID_NOT_AVAILABLE);if(!this.canStopWhiteboard())return sC(Na.WHITEBOARD_INSUFFICIENT_PRIVILEGES);if(i&&s){mB.closeWhiteboard(s),gB.stopShareWhiteboard(a);const e=cb();return null==e||e.destroy(),(e=>{db=e})(null),Ka(Ma,(e=>e.type===OS.CLOSE),4e3).then((()=>!0))}return sC(Na.WHITEBOARD_INVALID_STATE)}leaveWhiteboard(){const e=this[r](),t=this[o],{meeting:{isWebinar:n,userId:i,zoomId:s},whiteboard:{whiteboardStatus:a,whiteboardSharer:{presenterID:u,dcsID:d},whiteboardConfig:c},share:{ssrc:l},media:{sharingEncrypt:p}}=e;if(a!==OS.OPENED)return Promise.resolve("You not open WB.");if(u&&!n&&c.EncodedSn&&null!=p&&p.encryptKey&&d){if(u!==i){var h;t(Ob(OS.OPEN));const e=cb(),r=null==e||null===(h=e.conn)||void 0===h?void 0:h.getLeaveMessage();return gB.notifyWBMessage({message:r,nodeId:l,sn:gd(s),encryptKey:gd(null==p?void 0:p.encryptKey),dcsId:d,EncodedSn:gd(c.EncodedSn)}),null==e||e.destroy(),Promise.resolve()}return Promise.reject({type:Xe,reason:"You are the presenter, you cant leave whiteboard, please use closeWhiteboard",errorCode:Na.WHITEBOARD_PRESENTER_LEAVE})}return sC(Na.WHITEBOARD_INVALID_STATE)}getStatus(){const e=this[r](),{whiteboard:{whiteboardStatus:t,dashboardStatus:o,whiteboardSharer:n,whiteboardPermissionCode:i,whiteboardConfig:{docId:s},whiteboardCapability:a,whiteboardInitRole:u,isWhiteboardInitWithoutHost:d,haveAccessAfterMeeting:c,whiteboardError:l},meeting:{lang:p,zlkJwtToken:h,meetingOptions:m}}=e;return{wb:t,dashboard:o,enable:a,wbInfo:{docId:s,haveAccessAfterMeeting:c,sharingrole:TS.EDITOR,dcsID:null==n?void 0:n.dcsID,presenterID:null==n?void 0:n.presenterID},isWhiteboardShareOptionsLocked:null==m?void 0:m.isWhiteboardShareOptionsLocked,whiteboardInitRole:u,isWhiteboardInitWithoutHost:d,whiteboardPermissionCode:i,error:l}}encodePrivilegeToCode({whiteboardPermissionCode:e,isWhiteboardShareOptionsLocked:t,isWhiteboardInitWithoutHost:r,whiteboardInitRole:o}){const n=((e,t,r,o)=>{const n=o.isWhiteboardShareOptionsLocked,i=r?32:0;let s=0;t===RS.InternalUser?s=8:t===RS.AllParticipants&&(s=16);const a=n?4:0;let u=0;return e===CS.WbSettingHostGrab?u=1:e===CS.WbSettingAnyoneGrab&&(u=3),i|s|a|u})(e,o,r,{isWhiteboardShareOptionsLocked:t});return n}decodeToPrivilege(e){let t=e;const r=(24&t)>>3,o=(e=>!!((32&e)>>5))(t),n=!o;return t=(e=>3&e)(t),{whiteboardPermissionCode:t,isWhiteboardShareOptionsLocked:n,isWhiteboardInitWithoutHost:o,whiteboardInitRole:r}}setWhiteboardPermissionCode(e){const t=this[r](),{whiteboard:{whiteboardCapability:o}}=t;if(!o)return sC(Na.WHITEBOARD_NOT_AVAILABLE);try{return mB.changeWhiteboardPermission({wbLockShare:e}),Ka(La,(e=>void 0!==e.privilege||void 0!==e.isLock),2e3).then((()=>!0)).catch((e=>(console.error("Failed to set whiteboard privilege",e),sC(Na.WHITEBOARD_INSUFFICIENT_PRIVILEGES))))}catch(e){return console.error("Failed to set whiteboard privilege",e),sC(Na.WHITEBOARD_INSUFFICIENT_PRIVILEGES)}}changeWhiteboardUserRole(e,t){const o=this[r](),{whiteboard:{whiteboardCapability:n}}=o;if(!n)return sC(Na.WHITEBOARD_NOT_AVAILABLE);try{const r=mB.changeWhiteboardShareRole(e,t);return Ka(La,(e=>void 0!==e.privilege||void 0!==e.isLock),2e3).then((()=>r)).catch((e=>(console.error("User role change request timed out",e),sC(Na.WHITEBOARD_INSUFFICIENT_PRIVILEGES))))}catch(e){return console.error("Failed to change user whiteboard role",e),sC(Na.WHITEBOARD_INSUFFICIENT_PRIVILEGES)}}lockWhiteboard(e){const t=this[r](),{whiteboard:{isWhiteboardInitWithoutHost:o,whiteboardInitRole:n},meeting:{zlkJwtToken:i,meetingOptions:s}}=t;if(!i)return sC(Na.WHITEBOARD_LOCK_API_NOT_AVAILABLE);const a=this.encodePrivilegeToCode({whiteboardPermissionCode:e?CS.WbSettingLockShare:CS.WbSettingHostGrab,isWhiteboardShareOptionsLocked:null==s?void 0:s.isWhiteboardShareOptionsLocked,isWhiteboardInitWithoutHost:o,whiteboardInitRole:n});return this.setWhiteboardPermissionCode(a)}isOtherSharingWhiteboard(){const e=this[r]();return uC(e)}canStopWhiteboard(){const e=this[r](),{whiteboard:{whiteboardSharer:{presenterID:t}},meeting:{userId:o,isHost:n,isCoHost:i,meetingStatus:s}}=e;return Boolean(s===jo.Joined&&(t===o||n||i))}canStartWhiteboard(){return(e=>{const{whiteboard:{whiteboardStatus:t,whiteboardInitRole:r,isWhiteboardShareOptionsLocked:o,whiteboardPermissionCode:n},meeting:{meetingStatus:i,isHost:s,isCoHost:a,zlkJwtToken:u},share:{status:d,isRemoteSharingActive:c},breakoutRoom:l}=e;if(i!==jo.Joined)return!1;if(uC(e))return!1;if(t===OS.OPENED)return!1;if(d===q.Sharing||d===q.Paused)return!1;if(c)return!1;let p=!1;const h=null==l?void 0:l.currentRoom;if(h&&null!=h&&h.status&&(null==h?void 0:h.status)===Su.InRoom&&(p=!0),p&&u)return!1;let m=!1;if(n===CS.WbSettingLockShare)m=s||a;else{switch(r){case RS.HostOnly:m=s||a;break;case RS.InternalUser:case RS.AllParticipants:m=!0;break;default:m=s||a}!o||s||a||(m=!1)}return m})(this[r]())}exportWhiteboard(e,t,o){const n=this[r](),{whiteboard:{whiteboardStatus:i},meeting:{topic:s}}=n;if(i!==OS.OPENED)return sC(Na.WHITEBOARD_NOT_OPENED);if("png"!==e&&"pdf"!==e)return sC(Na.WHITEBOARD_INVALID_EXPORT_FORMAT);const a=cb(),u=t?`${t}.${e}`:`${s}-whiteboard.${e}`;return(null==a?void 0:a.exporter.exportToWeb({name:u,format:e,includeComments:o||!1})).then((e=>(function(e,t){const r=function(e,t="image/png"){const r=atob(e),o=new ArrayBuffer(r.length),n=new Uint8Array(o);for(let e=0;e<r.length;e++)n[e]=r.charCodeAt(e);return new Blob([o],{type:t})}(e),o=URL.createObjectURL(r),n=document.createElement("a");n.href=o,n.download=t,n.click(),URL.revokeObjectURL(o)}(e,u),Promise.resolve())))}},bS(hB.prototype,"updateToken",[MS,SB],Object.getOwnPropertyDescriptor(hB.prototype,"updateToken"),hB.prototype),bS(hB.prototype,"startDashboard",[MS,SB,PS],Object.getOwnPropertyDescriptor(hB.prototype,"startDashboard"),hB.prototype),bS(hB.prototype,"stopDashboard",[MS,SB,PS],Object.getOwnPropertyDescriptor(hB.prototype,"stopDashboard"),hB.prototype),bS(hB.prototype,"initWhiteboard",[SB],Object.getOwnPropertyDescriptor(hB.prototype,"initWhiteboard"),hB.prototype),bS(hB.prototype,"startWhiteboard",[SB,PS,MS],Object.getOwnPropertyDescriptor(hB.prototype,"startWhiteboard"),hB.prototype),bS(hB.prototype,"stopWhiteboard",[MS,SB,PS],Object.getOwnPropertyDescriptor(hB.prototype,"stopWhiteboard"),hB.prototype),bS(hB.prototype,"leaveWhiteboard",[MS,SB,PS],Object.getOwnPropertyDescriptor(hB.prototype,"leaveWhiteboard"),hB.prototype),bS(hB.prototype,"setWhiteboardPermissionCode",[LS,MS,SB,PS],Object.getOwnPropertyDescriptor(hB.prototype,"setWhiteboardPermissionCode"),hB.prototype),bS(hB.prototype,"changeWhiteboardUserRole",[LS,MS,SB,PS],Object.getOwnPropertyDescriptor(hB.prototype,"changeWhiteboardUserRole"),hB.prototype),bS(hB.prototype,"lockWhiteboard",[LS,MS,SB,PS],Object.getOwnPropertyDescriptor(hB.prototype,"lockWhiteboard"),hB.prototype),bS(hB.prototype,"exportWhiteboard",[MS,SB,PS],Object.getOwnPropertyDescriptor(hB.prototype,"exportWhiteboard"),hB.prototype);class vB extends AS{static createClient(){if(!this.meetingClient){const e=function(){const e=function(e){void 0===e&&(e={});var t,r=new or.constructor(or.schedulerActionCtor),o=new Bt,n=function(n){t=n;var i=new Bt,s=new Bt,a=i.asObservable().pipe(Ir(r)),u=new VS(s.pipe(Ir(r)),t.getState());return o.pipe(Vr((function(t){var r=t(a,u,e.dependencies);if(!r)throw new TypeError('Your root Epic "'+(t.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return r})),Gr((function(e){return Cr(e).pipe(Ar(r),Ir(r))}))).subscribe(t.dispatch),function(e){return function(r){var o=e(r);return s.next(t.getState()),i.next(r),o}}};return n.run=function(e){o.next(e)},n}(),{epicSubject:t,rootEpic:r}=function(){const e=new jt(yv(dV,MV,ly,oB));return{epicSubject:e,rootEpic:(t,r,o)=>e.pipe(Co(t.pipe(HS(`${Bg}`))),Gr((e=>e(t,r,o))))}}(),o=[e],n=FU(aB(),sB(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),o=function(){throw new Error(VU(15))},n={getState:r.getState,dispatch:function(){return o.apply(void 0,arguments)}},i=t.map((function(e){return e(n)}));return o=WU.apply(void 0,i)(r.dispatch),UU(UU({},r),{},{dispatch:o})}}}(...o)));return n.asyncReducers={},n.injectReducer=(e,t)=>{void 0===n.asyncReducers[e]&&(n.asyncReducers[e]=t,n.replaceReducer(aB(n.asyncReducers)))},n.injectEpic=e=>{t.next(e)},e.run(r),n}();this.meetingClient=new MU(e)}return this.meetingClient}}function fB(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function EB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yB(Object(r),!0).forEach((function(t){fB(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yB(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _B(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;r[o]=e[o]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const IB="2.3.0",AB="INVALID_PARAMETERS",bB="https://dmogdx0jrul3u.cloudfront.net/videosdk/".concat(IB,"/lib"),CB="https://source.zoom.us/videosdk/".concat(IB,"/lib"),TB="https://jssdk.zoomus.cn/videosdk/".concat(IB,"/lib"),RB=e=>"string"==typeof e&&e.length>0,OB=e=>{let t="";switch(e){case"Global":t=CB;break;case"CN":t=TB;break;case"CDN":t=bB;break;default:t=e}return t},DB=["userId","avatar","displayName","isHost","audio","muted","bVideoOn","sharerOn","sharerPause","userIdentity","isSpeakerOnly","bVideoShare","bShareAudioOn","userGuid","isPhoneUser","isInFailover",{from:"isCoHost",to:"isManager"},{from:"bAllowISORecord",to:"isAllowIndividualRecording"},{from:"bVideoConnect",to:"isVideoConnect"},{from:"bShareToBORooms",to:"bShareToSubsession"},{from:"bid",to:"subsessionId"},{from:"phoneNumber",to:e=>void 0===e?{}:{phoneNumber:e}}],wB=[...DB,{from:"userGUID",to:"userGuid"},{from:"bCoHost",to:e=>({isManager:!!e})},{from:"userType",to:e=>({isPhoneUser:!(5&~e)})},{from:"bid",to:e=>e?{subsessionId:e}:{}},{from:"bInFailover",to:"isInFailover"}],NB=wB.map((e=>"string"==typeof e?e:e.from));function MB(e,t){return"string"==typeof e?{["".concat(e)]:t}:"string"==typeof e.to?{["".concat(e.to)]:t}:e.to(t)}function PB(e){if(e)return DB.reduce(((t,r)=>{const o="string"==typeof r?r:r.from,n=MB(r,e[o]);return EB(EB({},t),n)}),{})}function LB(e){if(e)return Object.keys(e).reduce(((t,r)=>{const o=NB.indexOf(r);if(o>-1){const r=wB[o],n="string"==typeof r?r:r.from,i=MB(r,e[n]);return EB(EB({},t),i)}return t}),{})}const kB=Symbol("stream");class UB{constructor(e){this[kB]=void 0,this[kB]=e}startAudio(e){return this[kB].startAudio(e)}stopAudio(){return this[kB].stopAudio()}muteAudio(e){return this[kB].muteAudio(e)}unmuteAudio(e){return this[kB].unmuteAudio(e)}inviteByPhone(e,t,r,o){return this[kB].dialOut(e,t,r,o)}cancelInviteByPhone(e,t,r){return this[kB].cancelDialOut(e,t,r)}hangup(){return this[kB].hangup()}getCurrentSessionCallinInfo(){return this[kB].getDialInInfo()}muteShareAudio(e){return this[kB].muteShareAudio(e)}unmuteShareAudio(e){return this[kB].unmuteShareAudio(e)}subscribeAudioStatisticData(e){return this[kB].subscribeAudioStatisticData(e)}unsubscribeAudioStatisticData(e){return this[kB].unsubscribeAudioStatisticData(e)}muteUserAudioLocally(e){return this[kB].muteUserAudioLocally(e)}unmuteUserAudioLocally(e){return this[kB].unmuteUserAudioLocally(e)}adjustUserAudioVolumeLocally(e,t){return this[kB].adjustUserAudioVolumeLocally(e,t)}enableBackgroundNoiseSuppression(e){return this[kB].enableBackgroundNoiseSuppression(e)}enableSyncButtonsOnHeadset(e){return this[kB].enableSyncButtonsOnHeadset(e)}muteAllUserAudioLocally(){return this[kB].muteAllUserAudioLocally()}unmuteAllUserAudioLocally(){return this[kB].unmuteAllUserAudioLocally()}enableOriginalSound(e){return this[kB].enableOriginalSound(e)}callCRCDevice(e,t){return this[kB].callCRCDevice(e,t)}cancelCallCRCDevice(e,t){return this[kB].cancelCallCRCDevice(e,t)}startSecondaryAudio(e,t){return this[kB].startSecondaryAudio(e,t)}stopSecondaryAudio(){return this[kB].stopSecondaryAudio()}muteAllAudio(){return this[kB].muteAllAudio()}unmuteAllAudio(){return this[kB].unmuteAllAudio()}muteAudioUponStartAudio(e){return this[kB].muteAudioUponEntry(e)}allowAudioUnmutedBySelf(e){return this[kB].allowUnmuteAudioThemselves(e)}isAudioMuted(e){return this[kB].isAudioMuted(e)}getMicList(){return this[kB].getMicList()}getSpeakerList(){return this[kB].getSpeakerList()}getActiveMicrophone(){return this[kB].getActiveMicrophone()}getActiveSpeaker(){return this[kB].getActiveSpeaker()}switchMicrophone(e){return this[kB].switchMicrophone(e)}switchSpeaker(e){return this[kB].switchSpeaker(e)}isSupportPhoneFeature(){return this[kB].isSupportCallOut()}getSupportCountryInfo(){return this[kB].getDialOutCountries()}getInviteByPhoneStatus(){return this[kB].getDialOutStatus()}getShareAudioStatus(){return this[kB].getShareAudioStatus()}isOthersShareAudioMutedLocally(e){return this[kB].isOthersShareAudioMutedLocally(e)}getAudioStatisticData(){return this[kB].getAudioStatisticData()}isUserAudioMutedLocally(e){return this[kB].isUserAudioMutedLocally(e)}getUserVolumeLocally(e){return this[kB].getUserVolumeLocally(e)}isSupportMicrophoneAndShareAudioSimultaneously(){return this[kB].isSupportMicrophoneAndShareAudioSimultaneously()}getAudioMediaPlaybackController(){return this[kB].getAudioMediaPlaybackController()}isAllowAudioUnmutedBySelf(){return this[kB].isAllowToUnmute()}getSessionSIPAddress(){return this[kB].getSessionSIPAddress()}startVideo(e){return this[kB].startVideo(e)}stopVideo(){return this[kB].stopVideo()}createProcessor(e){return this[kB].createProcessor(e)}addProcessor(e){return this[kB].addProcessor(e)}removeProcessor(e){return this[kB].removeProcessor(e)}renderVideo(e,t,r,o,n,i,s,a){return this[kB].renderVideo(e,t,r,o,n,i,s,a)}stopRenderVideo(e,t,r,o){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0;return this[kB].stopRenderVideo(e,t,r,o,n,i)}updateVideoCanvasDimension(e,t,r){return this[kB].updateVideoCanvasDimension(e,t,r)}adjustRenderedVideoPosition(e,t,r,o,n,i,s){return this[kB].adjustRenderedVideoPosition(e,t,r,o,n,i,s)}clearVideoCanvas(e,t){return this[kB].clearVideoCanvas(e,t)}mirrorVideo(e){return this[kB].mirrorVideo(e)}enableHardwareAcceleration(e){return this[kB].enableHardwareAcceleration(e)}previewVirtualBackground(e,t,r,o){return this[kB].previewVirtualBackground(e,t,r,o)}updateVirtualBackgroundImage(e,t){return this[kB].updateVirtualBackgroundImage(e,t)}stopPreviewVirtualBackground(){return this[kB].stopPreviewVirtualBackground()}previewVideoMask(e,t){return this[kB].previewVideoMask(e,t)}updateVideoMask(e){return this[kB].updateVideoMask(e)}stopPreviewVideoMask(){return this[kB].stopPreviewVideoMask()}switchCamera(e){return this[kB].switchCamera(e)}subscribeVideoStatisticData(e){return this[kB].subscribeVideoStatisticData(e)}unsubscribeVideoStatisticData(e){return this[kB].unsubscribeVideoStatisticData(e)}attachVideo(e,t,r){return this[kB].attachVideo(e,t,r)}detachVideo(e,t){return this[kB].detachVideo(e,t)}spotlightVideo(e,t){return this[kB].spotlight(e,null!=t&&t)}removeSpotlightedVideo(e){return this[kB].removeSpotlight(e)}removeAllSpotlightedVideos(){return this[kB].removeAllSpotlights()}screenshotVideo(e){return this[kB].screenshotVideo(e)}subscribeSystemResourceUsage(){return this[kB].subscribeSystemResourceUsage()}unsubscribeSystemResourceUsage(){return this[kB].unsubscribeSystemResourceUsage()}subscribeWebRTCStatsReportData(){return this[kB].subscribeWebRTCStatsReportData()}unsubscribeWebRTCStatsReportData(){return this[kB].unsubscribeWebRTCStatsReportData()}isCapturingVideo(){return this[kB].isCapturingVideo()}isCameraTaken(){return this[kB].isCameraTaken()}getActiveVideoId(){return this[kB].getActiveVideoId()}getActiveCamera(){return this[kB].getActiveCamera()}getCameraList(){return this[kB].getCameraList()}isCaptureForbidden(){return this[kB].isCaptureForbidden()}getVideoMaxQuality(){return this[kB].getVideoMaxQuality()}getReceivedVideoDimension(){return this[kB].getReceivedVideoDimension()}isSupportMultipleVideos(){return this[kB].isSupportMultipleVideos()}getMaxRenderableVideos(){return this[kB].getMaxRenderableVideos()}isSupportHDVideo(){return this[kB].isSupportHDVideo()}isSupportVirtualBackground(){return this[kB].isSupportVirtualBackground()}isSupportVideoProcessor(){return this[kB].isSupportVideoProcessor()}isSupportAudioProcessor(){return this[kB].isSupportAudioProcessor()}isSupportShareProcessor(){return this[kB].isSupportShareProcessor()}getVirtualbackgroundStatus(){return this[kB].getVirtualbackgroundStatus()}getVideoStatisticData(){return this[kB].getVideoStatisticData()}isRenderSelfViewWithVideoElement(){return this[kB].isRenderSelfViewWithVideoElement()}getCapturedVideoResolution(){return this[kB].getCapturedVideoResolution()}getVideoMaskStatus(){return this[kB].getVideoMaskStatus()}isVideoMirrored(){return this[kB].isVideoMirrored()}getSpotlightedUserList(){return this[kB].getSpotlightedUserList().map((e=>PB(e)))}getVideoMediaPlaybackController(){return this[kB].getVideoMediaPlaybackController()}getWebRTCStatsReportData(){return this[kB].getWebRTCStatsReportData()}startShareView(e,t){return this[kB].startShareView(e,t)}stopShareView(){return this[kB].stopShareView()}attachShareView(e,t){return this[kB].attachShareView(e,t)}detachShareView(e,t){return this[kB].detachShareView(e,t)}switchShareView(e){return this[kB].switchShareView(e)}startShareScreen(e,t){return void 0!==(null==t?void 0:t.broadcastToSubsession)&&Object.assign(t||{},{broadcastToBreakoutRoom:null==t?void 0:t.broadcastToSubsession}),this[kB].startShareScreen(e,t)}startShareCamera(e,t,r){return this[kB].startShareCamera(e,t,r)}pauseShareScreen(){return this[kB].pauseShareScreen()}resumeShareScreen(){return this[kB].resumeShareScreen()}stopShareScreen(){return this[kB].stopShareScreen()}lockShare(e){return this[kB].lockShare(e)}updateSharingCanvasDimension(e,t){return this[kB].updateSharingCanvasDimension(e,t)}switchSharingSecondaryCamera(e){return this[kB].switchSharingSecondaryCamera(e)}setSharePrivilege(e){return this[kB].setSharePrivilege(e)}shareToSubsession(){return this[kB].shareToBreakoutRoom()}stopShareToSubsession(){return this[kB].stopShareToBreakoutRoom()}enableOptimizeForSharedVideo(e){return this[kB].enableOptimizeForSharedVideo(e)}updateSharedVideoQuality(e){return this[kB].updateSharedVideoQuality(e)}subscribeShareStatisticData(e){return this[kB].subscribeShareStatisticData(e)}unsubscribeShareStatisticData(e){return this[kB].unsubscribeShareStatisticData(e)}screenshotShareView(e){return this[kB].screenshotSharedContent(e)}isShareLocked(){return this[kB].isShareLocked()}getSharePrivilege(){return this[kB].getSharePrivilege()}getActiveShareUserId(){return this[kB].getActiveShareUserId()}getShareStatus(){return this[kB].getShareStatus()}getShareUserList(){return this[kB].getShareUserList().map((e=>PB(e)))}isStartShareScreenWithVideoElement(){return this[kB].isStartShareScreenWithVideoElement()}isOptimizeForSharedVideoEnabled(){return this[kB].isOptimizeForSharedVideoEnabled()}isSupportOptimizedForSharedVideo(){return this[kB].isSupportOptimizedForSharedVideo()}getShareStatisticData(){return this[kB].getShareStatisticData()}getShareStreamSettings(){return this[kB].getShareStreamSettings()}getMaxRenderableShareViews(){return this[kB].getMaxRenderableShareViews()}requestFarEndCameraControl(e){return this[kB].requestFarEndCameraControl(e)}approveFarEndCameraControl(e){return this[kB].approveFarEndCameraControl(e)}declineFarEndCameraControl(e){return this[kB].declineFarEndCameraControl(e)}giveUpFarEndCameraControl(e){return this[kB].giveUpFarEndCameraControl(e)}controlCamera(e){return this[kB].controlCamera(e)}controlFarEndCamera(e){return this[kB].controlFarEndCamera(e)}getFarEndCameraPTZCapability(e){return this[kB].getFarEndCameraPTZCapability(e)}getCameraPTZCapability(e){return this[kB].getCameraPTZCapability(e)}isBrowserSupportPTZ(){return this[kB].isBrowserSupportPTZ()}getNetworkQuality(e){return this[kB].getNetworkQuality(e)}requestRemoteControl(){return this[kB].requestRemoteControl()}giveUpRemoteControl(){return this[kB].giveUpRemoteControl()}startRemoteControl(e){return this[kB].startRemoteControl(e)}grabRemoteControl(){return this[kB].grabRemoteControl()}approveRemoteControl(e,t){return this[kB].approveRemoteControl(e,t)}declineRemoteControl(e){return this[kB].declineRemoteControl(e)}stopRemoteControl(){return this[kB].stopRemoteControl()}launchRemoteControlApp(e){return this[kB].launchRemoteControlApp(e)}isRemotelyControlApproved(){return this[kB].isRemotelyControlApproved()}isControllingUserRemotely(){return this[kB].isControllingUserRemotely()}isTargetShareSupportRemoteControl(e){return this[kB].isTargetShareSupportRemoteControl(e)}getRemoteControlAppDownloadUrl(){return this[kB].getRemoteControlAppDownloadUrl()}getRemotelyControllingUser(){return this[kB].getRemotelyControllingUser()}isRemoteControlEnabled(){return this[kB].isRemoteControlEnabled()}startAnnotation(){return this[kB].startAnnotation()}stopAnnotation(){return this[kB].stopAnnotation()}changeAnnotationPrivilege(e){return this[kB].changeAnnotationPrivilege(e)}showAnnotatorName(e){return this[kB].showAnnotatorName(e)}canDoAnnotation(){return this[kB].canDoAnnotation()}getAnnotationController(){return this[kB].getAnnotationController()}requestShareCamera(e,t,r){return this[kB].requestShareCamera(e,t,r)}approveShareCamera(e,t){return this[kB].approveShareCamera(e,t)}declineShareCamera(e,t){return this[kB].declineShareCamera(e,t)}informShareCameraStatus(e,t,r){return this[kB].informShareCameraStatus(e,t,r)}}const VB=["isCoHost"],BB=Symbol("chat");class HB{constructor(e){this[BB]=void 0,this[BB]=e}send(e,t){return this[BB].send(e,t)}sendToAll(e){return this[BB].send(e,o_.All)}sendFile(e,t){return this[BB].sendFile(e,t)}downloadFile(e,t,r){return this[BB].downloadFile(e,t,r)}setPrivilege(e){return this[BB].setPrivilege(e)}getPrivilege(){return this[BB].getPrivilege()}getReceivers(){return this[BB].getReceivers().map((e=>{const{isCoHost:t}=e;return EB({isManager:t},_B(e,VB))}))}getHistory(){return this[BB].getHistory()}isFileTransferEnabled(){return this[BB].isFileTransferEnabled()}getFileTransferSetting(){return this[BB].getFileTransferSetting()}}const jB=Symbol("recording");class FB{constructor(e){this[jB]=void 0,this[jB]=e}canStartRecording(){return this[jB].isRecordingEnabled()}startCloudRecording(){return this[jB].startRecording()}pauseCloudRecording(){return this[jB].pauseRecording()}resumeCloudRecording(){return this[jB].startRecording()}stopCloudRecording(){return this[jB].stopRecording()}getCloudRecordingStatus(){return this[jB].getRecordingStatus()}acceptIndividualRecording(){return this[jB].accept()}declineIndividualRecording(){return this[jB].decline()}}const WB=Symbol("command");class xB{constructor(e){this[WB]=void 0,this[WB]=e}send(e,t){return this[WB].send(e,t)}}const $B=["isInRoom"],GB=["isAutoJoinRoom","isRoomSelectionEnabled"],zB=Symbol("breakout-room");class qB{constructor(e){this[zB]=void 0,this[zB]=e}createSubsessions(e,t){return this[zB].createRooms(e,t).then((e=>e.map((e=>({subsessionId:e.roomId,subsessionName:e.name,userList:e.attendeeList})))))}openSubsessions(e,t){const r=t?EB(EB({},t),{},{isAutoJoinRoom:t.isAutoJoinSubsession,isRoomSelectionEnabled:t.isSubsessionSelectionEnabled}):void 0,o=e.map((e=>({roomId:e.subsessionId,name:e.subsessionName,attendeeList:e.userList})));return this[zB].openRooms(o,r)}joinSubsession(e){return this[zB].joinRoom(e)}leaveSubsession(){return this[zB].leaveRoom()}askForHelp(){return this[zB].askForHelp()}postponeHelping(e){return this[zB].postponeHelping(e)}broadcast(e){return this[zB].broadcast(e)}assignUserToSubsession(e,t){return this[zB].assignUserToRoom(e,t)}moveUserToSubsession(e,t){return this[zB].moveUserToRoom(e,t)}moveBackToMainSession(e){return this[zB].moveBackToMainSession(e)}closeAllSubsessions(){return this[zB].closeRoom()}startBroadcastVoice(){return this[zB].startBroadcastVoice()}stopBroadcastVoice(){return this[zB].stopBroadcastVoice()}getUnassignedUserList(){return this[zB].getUnassignedAttendeeList().map((e=>PB(e)))}getSubsessionList(){return this[zB].getRoomList().map((e=>{const{roomId:t,name:r,attendeeList:o}=e;return{subsessionId:t,subsessionName:r,userList:o.map((e=>{const t=e,{isInRoom:r}=t;return EB({isInSubsession:r},_B(t,$B))}))}}))}getUserStatus(){return this[zB].getAttendeeStatus()}getSubsessionStatus(){return this[zB].getRoomStatus()}getCurrentSubsession(){const{attendeeStatus:e,name:t,roomId:r}=this[zB].getCurrentRoom();return{userStatus:e,subsessionName:t,subsessionId:r}}getSubsessionOptions(){const e=this[zB].getRoomOptions(),{isAutoJoinRoom:t,isRoomSelectionEnabled:r}=e;return EB({isAutoJoinSubsession:t,isSubsessionSelectionEnabled:r},_B(e,GB))}isSubsessionEnabled(){return this[zB].isBreakoutRoomEnabled()}}const KB=Symbol("liveTranscription");class JB{constructor(e){this[KB]=void 0,this[KB]=e}startLiveTranscription(){return this[KB].startLiveTranscription()}setSpeakingLanguage(e,t){return this[KB].setSpeakingLanguage(e,t)}setTranslationLanguage(e){return this[KB].setTranslationLanguage(e)}disableCaptions(e){return this[KB].disableCaptions(e)}lockTranscriptionLanguage(e){return this[KB].lockTranscriptionLanguage(e)}getLiveTranscriptionStatus(){return this[KB].getLiveTranscriptionStatus()}getCurrentTranscriptionLanguage(){return this[KB].getCurrentTranscriptionLanguage()}getCurrentTranslationLanguage(){return this[KB].getCurrentTranslationLanguage()}getLatestTranscription(){return this[KB].getLatestTranscription()}getLatestTranslation(){return this[KB].getLatestTranslation()}getFullTranscriptionHistory(){return this[KB].getFullTranscriptionHistory()}}const QB=Symbol("liveStream");class YB{constructor(e){this[QB]=void 0,this[QB]=e}startLiveStream(e,t,r){return this[QB].startLiveStream(e,t,r)}stopLiveStream(){return this[QB].stopLiveStream()}isLiveStreamEnabled(){return this[QB].isLiveStreamEnabled()}getLiveStreamStatus(){return this[QB].getLiveStreamStatus().status}}const ZB=Symbol("logger");class XB{constructor(e,t){if(this[ZB]=void 0,this[ZB]=e,t){const{debugMode:e,trackingId:r}=t;this[ZB].setLogOptions({debugMode:e,trackingId:r})}}reportToGlobalTracing(e){return this[ZB].reportToGlobalTracing(e)}reportRating(e,t){return this[ZB].reportRating(e,t)}}const eH=Symbol("broadcastStreaming");class tH{constructor(e){this[eH]=void 0,this[eH]=e}startBroadcast(){return this[eH].startBroadcast()}stopBroadcast(e){return this[eH].stopBroadcast(e)}isBroadcastStreamingEnable(){return this[eH].isBroadcastStreamingEnable()}getBroadcastStreamingStatus(){return this[eH].getBroadcastStreamingStatus()}}const rH=["roomName"],oH=["roomId","roomName"],nH=[{event:"connection-change",originalEvent:"connection-change",payloadTransform:e=>{const{roomName:t}=e,r=_B(e,rH);return t?EB(EB({},r),{},{subsessionName:t}):e}},{event:"user-added",originalEvent:"user-added",payloadTransform:e=>e.map((e=>LB(e)))},{event:"user-updated",originalEvent:"user-updated",payloadTransform:e=>e.map((e=>LB(e)))},{event:"user-removed",originalEvent:"user-removed",payloadTransform:e=>e.map((e=>LB(e)))},{event:"subsession-invite-to-join",originalEvent:"invite-to-join",payloadTransform:e=>({subsessionId:e.roomId,subsessionName:e.name})},{event:"subsession-countdown",originalEvent:"room-countdown"},{event:"subsession-time-up",originalEvent:"room-time-up"},{event:"closing-subsession-countdown",originalEvent:"closing-room-countdown"},{event:"subsession-broadcast-message",originalEvent:"broadcast-message"},{event:"subsession-broadcast-voice",originalEvent:"broadcast-voice"},{event:"subsession-ask-for-help",originalEvent:"ask-for-help",payloadTransform:e=>({userId:e.userId,userGuid:e.userGuid,displayName:e.displayName,subsessionId:e.roomId,subsessionName:e.roomName})},{event:"subsession-ask-for-help-response",originalEvent:"ask-for-help-response"},{event:"subsession-invite-back-to-main-session",originalEvent:"invite-back-to-main-session"},{event:"subsession-state-change",originalEvent:"room-state-change"},{event:"host-ask-unmute-audio",originalEvent:"unmute-audio-consent"},{event:"subsession-user-update",originalEvent:"room-user-update",payloadTransform:e=>{const{roomId:t,roomName:r}=e;return EB({subsessionId:t,subsessionName:r},_B(e,oH))}},{event:"active-media-failed",originalEvent:"media-internal-error"}],iH=Symbol("summary");class sH{constructor(e){this[iH]=void 0,this[iH]=e}startSummary(){return this[iH].startSummary()}stopSummary(){return this[iH].stopSummary()}isSummaryEnabled(){return this[iH].isSummaryEnabled()}getSummaryStatus(){return this[iH].getSummaryStatus()}startMeetingQuery(){return this[iH].startMeetingQuery()}stopMeetingQuery(){return this[iH].stopMeetingQuery()}isMeetingQueryEnabled(){return this[iH].isMeetingQueryEnabled()}getMeetingQueryStatus(){return this[iH].getMeetingQueryStatus()}}const aH=Symbol("Client"),uH=new WeakMap;class dH{constructor(){this[aH]=void 0,this.stream=void 0,this.chat=void 0,this.command=void 0,this.recording=void 0,this.subsession=void 0,this.liveTranscription=void 0,this.logger=void 0,this.liveStream=void 0,this.aiClient=void 0,this.broadcastStreaming=void 0,this.whiteboardClient=void 0,this[aH]=vB.createClient(),uH.set(this,new Map)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",t=arguments.length>2?arguments[2]:void 0;const r=OB(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global");return!1===window.isSecureContext&&console.warn("The page is not in a secure context, to use audio, video, screen, a secure context must be enabled."),function(){const e="__ZOOM_VIDEO_SDK_DOM_STORAGE_TEST__";try{return localStorage.setItem(e,e),localStorage.removeItem(e),sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return!1}}()||console.warn("localstorage or sessionstorage is not enabled, please enable to use the video sdk,"),this[aH].init("","",{language:e,dependentAssets:r,constraints:EB(EB({},vB.checkSystemRequirements()),{},{screen:"object"==typeof WebAssembly&&"function"==typeof Worker}),additionalFeatures:["chat","cmd","recording","breakoutRoom","liveTranscription","logger","liveStream","summary","broadcastStreaming","whiteboard"],webEndpoint:(null==t?void 0:t.webEndpoint)||"zoom.us",skipJsMedia:null==t?void 0:t.skipJsMedia,enforceMultipleVideos:null==t?void 0:t.enforceMultipleVideos,stayAwake:null==t?void 0:t.stayAwake,enforceVirtualBackground:null==t?void 0:t.enforceVirtualBackground,quicklyLeaveMeeting:null==t?void 0:t.leaveOnPageUnload,patchJsMedia:null==t?void 0:t.patchJsMedia,alternativeNameForVideoPlayer:null==t?void 0:t.alternativeNameForVideoPlayer,isUIToolkit:null==t?void 0:t.isUIToolkit,isLogDetailed:null==t?void 0:t.isLogDetailed})}join(e,t,r,o,n){return RB(e)&&RB(t)&&RB(r)?e.length>200?Promise.reject({type:AB,reason:"The maximum length of topic is 200",errorCode:Na.CLIENT_INVALID_JOIN_PARAMETER}):r.length>200?Promise.reject({type:AB,reason:"The maximum length of username is 200",errorCode:Na.CLIENT_INVALID_JOIN_PARAMETER}):o&&("string"!=typeof o||o.length>10)?Promise.reject({type:AB,reason:"The maximum length of password is 10",errorCode:Na.CLIENT_INVALID_JOIN_PARAMETER}):this[aH].joinInstant(e,t,r,IB,o,n):Promise.reject({type:AB,reason:"Topic, token and userName must be string and required",errorCode:Na.CLIENT_INVALID_JOIN_PARAMETER})}leave(){var e;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(null===(e=uH.get(this))||void 0===e||e.clear(),this[aH].end()):this[aH].leave()}on(e,t){const r=nH.find((t=>t.event===e));if(r){const{originalEvent:o,payloadTransform:n}=r;if(n){const r=e=>{const r=n(e);t(r)};this[aH].on(o,r);const i=uH.get(this);if(i){i.has(e)||i.set(e,[]);const o=i.get(e);null==o||o.push({originalCb:t,newCb:r})}}else this[aH].on(o,t)}else this[aH].on(e,t)}off(e,t){const r=nH.find((t=>t.event===e));if(r){const{originalEvent:o,payloadTransform:n}=r;if(n){const r=uH.get(this);if(r){const n=r.get(e),i=null==n?void 0:n.find((e=>e.originalCb===t));if(i&&n){this[aH].off(o,i.newCb);const s=null==n?void 0:n.filter((e=>e.originalCb!==t));r.set(e,s)}}}else this[aH].off(o,t)}else this[aH].off(e,t)}getMediaStream(){return this.stream||(this.stream=new UB(this[aH].getMediaStream())),this.stream}getChatClient(){return this.chat||(this.chat=new HB(this[aH].getFeatureModule("chat"))),this.chat}getRecordingClient(){return this.recording||(this.recording=new FB(this[aH].getFeatureModule("recording"))),this.recording}getCommandClient(){return this.command||(this.command=new xB(this[aH].getFeatureModule("cmd"))),this.command}getSubsessionClient(){return this.subsession||(this.subsession=new qB(this[aH].getFeatureModule("breakoutRoom"))),this.subsession}getLiveTranscriptionClient(){return this.liveTranscription||(this.liveTranscription=new JB(this[aH].getFeatureModule("liveTranscription"))),this.liveTranscription}getLoggerClient(e){return this.logger||(this.logger=new XB(this[aH].getFeatureModule("logger"),e)),this.logger}getLiveStreamClient(){return this.liveStream||(this.liveStream=new YB(this[aH].getFeatureModule("liveStream"))),this.liveStream}getBroadcastStreamingClient(){return this.broadcastStreaming||(this.broadcastStreaming=new tH(this[aH].getFeatureModule("broadcastStreaming"))),this.broadcastStreaming}getAIClient(){return this.aiClient||(this.aiClient=new sH(this[aH].getFeatureModule("summary"))),this.aiClient}getSessionInfo(){const e=this[aH].getMeetingInfo();return{isInMeeting:e.isInMeeting||!1,password:e.password||"",topic:e.topic,userName:e.userName,userId:e.userId,sessionId:e.meetingId}}getCurrentUserInfo(){return PB(this[aH].getCurrentUserInfo())}getUser(e){return PB(this[aH].getParticipantsList().find((t=>t.userId===e)))}getAllUser(){return this[aH].getParticipantsList().map((e=>PB(e)))}changeName(e,t){return this[aH].changeName(e,t)}makeHost(e){return this[aH].makeHost(e)}removeUser(e){return this[aH].removeUser(e)}makeManager(e){return this[aH].makeCoHost(e)}revokeManager(e){return this[aH].revokeCoHost(e)}reclaimHost(){return this[aH].reclaimHost()}isHost(){return this[aH].isHost()}isOriginalHost(){return this[aH].isOriginHost()}getSessionHost(){return PB(this[aH].getMeetingHost())}isManager(){return this[aH].isCoHost()}}class cH{static createClient(){return this.videoClient||(this.videoClient=new dH),this.videoClient}static destroyClient(){return this.videoClient?this.videoClient.leave().then((()=>(this.videoClient=null,vB.destroyClient()))):Promise.resolve(void 0)}static checkSystemRequirements(){return vB.checkSystemRequirements()}static checkFeatureRequirements(){return vB.checkFeatureRequirements()}static getDevices(e){return vB.getDevices(e)}static createLocalAudioTrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return vB.createLocalAudioTrack(e)}static createLocalVideoTrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return vB.createLocalVideoTrack(e)}static preloadDependentAssets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global";vB.preloadDependentAssets(OB(e))}}cH.videoClient=void 0,cH.VERSION=IB;let lH=function(e){return e[e.All=1]="All",e[e.NoOne=4]="NoOne",e[e.EveryonePublicly=5]="EveryonePublicly",e}({}),pH=function(e){return e[e.All=0]="All",e}({}),hH=function(e){return e[e.Automatically=hu.Automatically]="Automatically",e[e.Manually=hu.Manually]="Manually",e}({}),mH=function(e){return e[e.Initial=Su.Initial]="Initial",e[e.Invited=Su.Invited]="Invited",e[e.Joining=Su.Joining]="Joining",e[e.InSubsession=Su.InRoom]="InSubsession",e[e.Leaving=Su.Leaving]="Leaving",e[e.MainSession=Su.MainSession]="MainSession",e}({}),gH=function(e){return e[e.NotStarted=mu.NotStarted]="NotStarted",e[e.InProgress=mu.InProgress]="InProgress",e[e.Closing=mu.Closing]="Closing",e[e.Closed=mu.Closed]="Closed",e}({}),SH=function(e){return e[e.Failover=Uo.Failover]="Failover",e[e.JoinSubsession=Uo.JoinBreakoutRoom]="JoinSubsession",e[e.MoveToSubsession=Uo.MoveToBreakoutRoom]="MoveToSubsession",e[e.BackToMainSession=Uo.BackToMainSession]="BackToMainSession",e}({}),vH=function(e){return e[e.Unlocked=z.HostGrab]="Unlocked",e[e.Locked=z.OnlyHost]="Locked",e[e.MultipleShare=z.MultipleShare]="MultipleShare",e}({}),fH=function(e){return e[e.Unknown=Ie.Unknown]="Unknown",e[e.Uninstalled=Ie.Uninstalled]="Uninstalled",e[e.Installed=Ie.Installed]="Installed",e[e.Unlaunched=Ae.Unlaunched]="Unlaunched",e[e.Launched=Ae.Launched]="Launched",e}({});e.ActiveMediaFailedCode=Pe,e.AnnotationClearType=je,e.AnnotationToolType=Fe,e.ApprovedState=Z,e.AskHostHelpResponse=yu,e.AudioChangeAction=F,e.BroadcastStreamingStatus=fU,e.CRCProtocol=we,e.CRCReturnCode=Ne,e.CameraControlCmd=Se,e.ChatFileDownloadStatus=S_,e.ChatFileUploadStatus=g_,e.ChatMsgType=pH,e.ChatPrivilege=lH,e.ConnectionState=Ho,e.DialoutState=W,e.ExceptionCode=Na,e.FarEndCameraControlDeclinedReason=ve,e.LeaveAudioSource=j,e.LiveStreamStatus=Kk,e.LiveTranscriptionLanguage=wk,e.LiveTranscriptionLanguageCode=Dk,e.LiveTranscriptionMessageSource=Ak,e.MobileVideoFacingMode=re,e.MutedSource=B,e.PassiveStopShareReason=X,e.ReconnectReason=SH,e.RecordingStatus=yn,e.RemoteControlAppStatus=fH,e.RemoteControlSessionStatus=be,e.SharePrivilege=vH,e.ShareStatus=q,e.SubsessionAllocationPattern=hH,e.SubsessionStatus=gH,e.SubsessionUserStatus=mH,e.SystemCPUPressureLevel=xe,e.TranscriptionMode=Nk,e.VideoActiveState=J,e.VideoCapturingState=Y,e.VideoQuality=K,e.default=cH,Object.defineProperty(e,"__esModule",{value:!0})}));
