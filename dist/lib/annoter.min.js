(window.webpackJsonpJsMediaSDK_Instance=window.webpackJsonpJsMediaSDK_Instance||[]).push([[1],{102:function(t,e,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(t,e,n,a){void 0===a&&(a=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,a,s)}:function(t,e,n,a){void 0===a&&(a=n),t[a]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(92),d=n(90),u=n(89),c=n(91),h=n(93),A=o(n(2)),O=i(n(0));class _ extends d.CAnnoId{constructor(t){super(t.appId),this.readyToAnnote=!1,this.currentTool=(0,u.getDefaultTool)(),this.executedActions=[],this.revokedActions=[],this.actionPduQueue=[],this.objectMapW2M=new Map,this.objectMapM2W=new Map,this.appId=t.appId,this.userName=t.userName,this.presenterId=(0,c.getShareSessionId)(t.presenterId),this.isPresenter=t.isPresenter,this.isBOSession=t.isBOSession,this.boardSDKIns=t.boardSDKIns,this.doc=this._createNewDoc(),this.sendRequestDrawPdu()}startAnnote(){O.default.Notify_APPUI(A.ANNO_UNDO_STATUS,{status:!!this.executedActions.length,presenterId:this.presenterId}),O.default.Notify_APPUI(A.ANNO_REDO_STATUS,{status:!!this.revokedActions.length,presenterId:this.presenterId})}destroy(){this.readyToAnnote=!1,this.doc=null,this.executedActions=[],this.revokedActions=[],this.actionPduQueue=[],this.objectMapW2M.clear(),this.objectMapM2W.clear(),this.boardSDKIns.onMessage({type:u.MSG_TO_WHITEBOARD_TYPE.DESTROY_SESSION,sessionId:this.presenterId})}sendRequestDrawPdu(){let t=(0,c.getDefaultAnnoData)(this.appId,this.userName,this.doc.getId());const e=new h.CAnnoPduDocRequestDraw(u.AnnoPduType.kDocRequestDraw,t);this.sendAnnoMessage(e.data)}sendAnnoMessage(t){const e=new c.CAnnoBuffer(null);e.writeInt8(37),e.writeInt8(this.isBOSession?1:0),e.writeInt16(0),e.writeInt32(this.presenterId);const n={command:u.ANNO_PDU_CMD,isPresenter:this.isPresenter,data:new Uint8Array(e.mData.concat(t.mData))};O.default.mediaSDKHandle.sendAnnotationPdu(n,this.isPresenter)}sendAnnoAction(t){this.readyToAnnote?this.sendAnnoMessage(t.data):this.actionPduQueue.push(t)}setTool(t){this.currentTool=t}onRequestDrawAck(){for(this.readyToAnnote=!0;this.actionPduQueue.length;){const t=this.actionPduQueue.shift();this.sendAnnoAction(t)}}handlePageSync(t){const{docId:e,pageId:n}=t.annoPduPage;this.doc.handlePageSync(e,n)}handleObjAddAck(t){const{annoObjIds:e}=t.annoPduObj;(null==e?void 0:e.length)&&e.forEach(t=>{const e=this.objectMapM2W.get(t);setTimeout(()=>{this.boardSDKIns.onMessage({type:u.MSG_TO_WHITEBOARD_TYPE.ONACK,objectId:e,sessionId:this.presenterId})},750)})}handleObjRemoveAllByHost(t){const{annoObjIds:e}=t.annoPduObj;if(null==e?void 0:e.length){const t=[];e.forEach(e=>{const n=this.objectMapM2W.get(e);n&&t.push(n)}),this.boardSDKIns.onMessage({type:u.MSG_TO_WHITEBOARD_TYPE.ERASE_ALL,objectIds:t,sessionId:this.presenterId})}}handleObjRestoreAllByHost(t){const{annoObjIds:e}=t.annoPduObj;if(null==e?void 0:e.length){const t=[];e.forEach(e=>{const n=this.objectMapM2W.get(e);n&&t.push(n)}),this.boardSDKIns.onMessage({type:u.MSG_TO_WHITEBOARD_TYPE.RESTORE_OBJECTS,objectIds:t,sessionId:this.presenterId})}}handleAddObject(t,e){let n;switch(this.currentTool.toolType){case u.AnnoToolType.ANNO_TOOL_TYPE_PEN:n=new r.CAnnoObjSmoothPen}const a=n.acquireObjId(this.appId);n.setObjHeader({objId:a});const{objectData:s,presenterId:o=this.presenterId}=t;if(!s)return;if(s.lineFormat&&n.setLineFormat(s.lineFormat),s.points){const t=(0,c.normalizePoints)(s.points,e);n.setData(t)}this.doc||(this.doc=this._createNewDoc(),this.readyToAnnote=!1,this.sendRequestDrawPdu());let i=(0,c.getDefaultAnnoData)(this.appId,this.userName,this.doc.getId(),this.doc.getPageId());i.annoObj=n;const d=new h.CAnnoPduAddObj(u.AnnoPduType.kAnnoObjAdd,i);i.annoObjIds=[a],i.whiteboardObjIds=[t.objectId];const A=(0,c.extractActionInfo)(i,u.AnnoPduType.kAnnoObjAdd);this._pushToExecutedAction(A),this.sendAnnoAction(d),this.objectMapW2M.set(t.objectId,a),this.objectMapM2W.set(a,t.objectId)}handleRemoveObject(t){const e=this.objectMapW2M.get(t.objectId);if(e)for(let n=0;n<this.executedActions.length;n++){const a=this.executedActions[n];if(a.pduType!==u.AnnoPduType.kAnnoObjAdd)continue;const s=a.annoObjIds;if(!s.includes(e))continue;let o=(0,c.getDefaultAnnoData)(this.appId,this.userName,a.docId,a.pageId);o.annoObjIds=s,o.whiteboardObjIds=[t.objectId];const i=new h.CAnnoPduRemoveObj(u.AnnoPduType.kAnnoObjRemove,o),r=(0,c.extractActionInfo)(o,u.AnnoPduType.kAnnoObjRemove);this._pushToExecutedAction(r),this.sendAnnoAction(i);break}}handleUndo(){const t=this._popExecutedAction();if(!t)return;const e=this._copyPduActionData(t);let n,a;switch(t.pduType){case u.AnnoPduType.kAnnoObjAdd:case u.AnnoPduType.kAnnoObjRestore:n=new h.CAnnoPduRemoveObj(u.AnnoPduType.kAnnoObjRemove,e),a=u.MSG_TO_WHITEBOARD_TYPE.REMOVE_OBJECTS;break;case u.AnnoPduType.kAnnoObjRemove:n=new h.CAnnoPduRestoreObj(u.AnnoPduType.kAnnoObjRestore,e),a=u.MSG_TO_WHITEBOARD_TYPE.RESTORE_OBJECTS;break;case u.AnnoPduType.kAnnoObjRemoveUser:n=new h.CAnnoPduRestoreUserObj(u.AnnoPduType.kAnnoObjRestoreUser,e),this._markRemoveStatus(e,!1),a=u.MSG_TO_WHITEBOARD_TYPE.RESTORE_OBJECTS;break;case u.AnnoPduType.kAnnoObjRemoveAllByHost:n=new h.CAnnoPduRestoreAllObjByHost(u.AnnoPduType.kAnnoObjRestoreAllByHost,e),this._markRemoveStatus(e,!1),a=u.MSG_TO_WHITEBOARD_TYPE.RESTORE_OBJECTS}this.boardSDKIns.onMessage({type:a,objectIds:e.whiteboardObjIds,sessionId:this.presenterId}),this._pushToRevokedAction(t),this.sendAnnoAction(n)}handleRedo(){const t=this._popRevokedAction();if(!t)return;const e=this._copyPduActionData(t);let n,a;switch(t.pduType){case u.AnnoPduType.kAnnoObjAdd:case u.AnnoPduType.kAnnoObjRestore:n=new h.CAnnoPduRestoreObj(u.AnnoPduType.kAnnoObjRestore,e),a=u.MSG_TO_WHITEBOARD_TYPE.RESTORE_OBJECTS;break;case u.AnnoPduType.kAnnoObjRemove:n=new h.CAnnoPduRemoveObj(t.pduType,e),a=u.MSG_TO_WHITEBOARD_TYPE.REMOVE_OBJECTS;break;case u.AnnoPduType.kAnnoObjRemoveUser:n=new h.CAnnoPduRemoveUserObj(t.pduType,e),a=u.MSG_TO_WHITEBOARD_TYPE.REMOVE_OBJECTS,this._markRemoveStatus(e,!0);break;case u.AnnoPduType.kAnnoObjRemoveAllByHost:n=new h.CAnnoPduRemoveAllObjByHost(t.pduType,e),a=u.MSG_TO_WHITEBOARD_TYPE.REMOVE_OBJECTS,this._markRemoveStatus(e,!0)}this.boardSDKIns.onMessage({type:a,objectIds:e.whiteboardObjIds,sessionId:this.presenterId}),this._pushToExecutedAction(t),this.sendAnnoAction(n)}handleClear(t){const{clearType:e}=t;switch(e){case u.ANNOTATION_CLEAR_TYPE.CLEAR_MINE:this.clearAllMine(!0);break;case u.ANNOTATION_CLEAR_TYPE.CLEAR_ALL:this.clearAll(t)}}clearAllMine(t){let e=(0,c.getDefaultAnnoData)(this.appId,void 0,this.doc.getId(),this.doc.getPageId());const n=[],a=[];for(let t=0;t<this.executedActions.length;t++){const e=this.executedActions[t];if(e.pduType===u.AnnoPduType.kAnnoObjAdd){if(e.isRemoved)continue;e.annoObjIds.forEach(t=>{n.push(t),a.push(this.objectMapM2W.get(t))}),e.isRemoved=!0}}if(!n.length)return e;if(e.annoObjIds=n,e.whiteboardObjIds=a,t){const t=new h.CAnnoPduRemoveUserObj(u.AnnoPduType.kAnnoObjRemoveUser,e),n=(0,c.extractActionInfo)(e,u.AnnoPduType.kAnnoObjRemoveUser);this._pushToExecutedAction(n),this.sendAnnoAction(t)}return this.boardSDKIns.onMessage({type:u.MSG_TO_WHITEBOARD_TYPE.ERASE_ALL,objectIds:a,sessionId:this.presenterId}),e}clearAll(t){const{isHost:e}=t;if(!e)return;let n,a,s=this.clearAllMine(!1);e&&!this.isPresenter&&(a=u.AnnoPduType.kAnnoObjRemoveAllByHost,n=new h.CAnnoPduRemoveAllObjByHost(a,s));const o=(0,c.extractActionInfo)(s,a);this._pushToExecutedAction(o),this.sendAnnoAction(n)}updateUserName(t){this.userName=t}_pushToExecutedAction(t){const e=this.executedActions.length;this.executedActions.push(t),0===e&&O.default.Notify_APPUI(A.ANNO_UNDO_STATUS,{status:!0,presenterId:this.presenterId})}_pushToRevokedAction(t){const e=this.revokedActions.length;this.revokedActions.push(t),0===e&&O.default.Notify_APPUI(A.ANNO_REDO_STATUS,{status:!0,presenterId:this.presenterId})}_popExecutedAction(){const t=this.executedActions.length,e=this.executedActions.pop();return t&&!this.executedActions.length&&O.default.Notify_APPUI(A.ANNO_UNDO_STATUS,{status:!1,presenterId:this.presenterId}),e}_popRevokedAction(){const t=this.revokedActions.length,e=this.revokedActions.pop();return t&&!this.revokedActions.length&&O.default.Notify_APPUI(A.ANNO_REDO_STATUS,{status:!1,presenterId:this.presenterId}),e}_copyPduActionData(t){let e=(0,c.getDefaultAnnoData)();return Object.assign(e,t),e}_markRemoveStatus(t,e){const{annoObjIds:n}=t;if(null==n?void 0:n.length)for(let t=0;t<this.executedActions.length;t++){const a=this.executedActions[t];if(a.pduType===u.AnnoPduType.kAnnoObjAdd){if(!!a.isRemoved===e)continue;a.annoObjIds.forEach(t=>{n.includes(t)&&(a.isRemoved=e)})}}}_createNewDoc(){return new r.CAnnoDoc({appId:this.appId,isPresenter:this.isPresenter,userName:this.userName,preseterId:this.presenterId})}}e.default=_},88:function(t,e,n){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationMgr=void 0;const s=a(n(97)),o=a(n(102)),i=n(89),r=n(91),d=n(90),u=n(93),c=new Map;class h extends d.CAnnoId{constructor(t){super(t.appId),this.currentTool=(0,i.getDefaultTool)(),this.objectMapW2M=new Map,this.objectMapM2W=new Map,this.appId=t.appId,this.userName=t.userName,this.presenterId=(0,r.getShareSessionId)(t.presenterId),this.sharingMainCanvas=t.sharingMainCanvas,this.annoCanvas=t.annoCanvas,this.shareCanvasOserver=new MutationObserver(this.updateAnnoCanvasSize.bind(this)),this.shareCanvasOserver.observe(this.sharingMainCanvas,{attributes:!0}),this.boardSDKIns=new s.default,this.boardSDKIns.init({mainCanvas:this.sharingMainCanvas,annoCanvas:this.annoCanvas,onAnnotationMsg:this.onAnnotationMsg.bind(this),sessionId:this.presenterId}),this.annoSession=this._createSession(this.presenterId,t.isBOSession)}destroy(){var t;null===(t=this.boardSDKIns)||void 0===t||t.destroy(),c.forEach(t=>{t.destroy()}),this.shareCanvasOserver.disconnect()}startAnnotation(t=this.presenterId,e=!1){const n=(0,r.getShareSessionId)(t);this.presenterId=n;let a=c.get(n);a||(a=this._createSession(n)),a.isBOSession=e,this.annoSession=a,a.startAnnote(),this.boardSDKIns.onMessage({type:i.MSG_TO_WHITEBOARD_TYPE.CHANGE_SESSION,sessionId:this.presenterId}),this.currentTool.toolType=i.AnnoToolType.ANNO_TOOL_TYPE_NONE,this.boardSDKIns.onMessage(Object.assign({type:i.MSG_TO_WHITEBOARD_TYPE.TOOL_SELECT,sessionId:this.presenterId},this.currentTool)),this.updateAnnoCanvasSize()}stopAnnotation(t){const{presenterId:e}=t;if(!e)return;const n=(0,r.getShareSessionId)(e),a=c.get(n);null==a||a.destroy(),c.delete(n)}updateCanvas(t){var e;this.sharingMainCanvas=t.sharingMainCanvas,this.annoCanvas=t.annoCanvas;const n=(0,r.getCanvasScale)(this.sharingMainCanvas);null===(e=this.boardSDKIns)||void 0===e||e.onMessage(Object.assign({type:i.MSG_TO_WHITEBOARD_TYPE.UPDATE_CANVAS,mainCanvas:this.sharingMainCanvas,annoCanvas:this.annoCanvas},n))}updateAnnoCanvasSize(){var t;const e=(0,r.getCanvasScale)(this.sharingMainCanvas);null===(t=this.boardSDKIns)||void 0===t||t.onMessage(Object.assign({type:i.MSG_TO_WHITEBOARD_TYPE.RESIZE},e))}getAppId(){return this.appId}onRWGMessage(t){if(37!==t[0])return;const e=(0,u.parsePdu)(t);if(!e)return;switch(e.getPduType()){case i.AnnoPduType.kDocRequestDrawAck:this.handleRequestDrawAck(e);break;case i.AnnoPduType.kPageSync:this.handlePageSync(e);break;case i.AnnoPduType.kAnnoObjAddAck:this.handleObjAddAck(e);break;case i.AnnoPduType.kAnnoObjRemoveAllByHost:this.handleObjRemoveAllByHost(e);break;case i.AnnoPduType.kAnnoObjRestoreAllByHost:this.handleObjRestoreAllByHost(e)}}handleRequestDrawAck(t){var e,n;if((null===(e=t.annoPduDocRequestDrawAck)||void 0===e?void 0:e.requesterId)===this.appId){const e=t.annoPduHeader.appId;null===(n=c.get(e))||void 0===n||n.onRequestDrawAck()}}handlePageSync(t){var e;const n=t.annoPduHeader.appId;null===(e=c.get(n))||void 0===e||e.handlePageSync(t)}handleObjAddAck(t){var e;const n=t.annoPduHeader.appId;null===(e=c.get(n))||void 0===e||e.handleObjAddAck(t)}handleObjRemoveAllByHost(t){var e;const n=t.annoPduHeader.appId;null===(e=c.get(n))||void 0===e||e.handleObjRemoveAllByHost(t)}handleObjRestoreAllByHost(t){var e;const n=t.annoPduHeader.appId;null===(e=c.get(n))||void 0===e||e.handleObjRestoreAllByHost(t)}onAnnotationMsg(t){const{type:e}=t;switch(e){case i.ANNO_MSG_TYPE.ADD_OBJECT:this.handleAddObject(t);break;case i.ANNO_MSG_TYPE.REMOVE_OBJECT:this.handleRemoveObject(t)}}handleAddObject(t){this.annoSession.handleAddObject(t,this.sharingMainCanvas)}handleRemoveObject(t){this.annoSession.handleRemoveObject(t)}onAnnotationActions(t){switch(t.actionType){case i.ANNOTATION_ACTTION_TYPE.SELECT_MOUSE:t.toolType=i.AnnoToolType.ANNO_TOOL_TYPE_NONE,this.handleSelectTool(t);break;case i.ANNOTATION_ACTTION_TYPE.SELECT_ERASER:t.toolType=i.AnnoToolType.ANNO_TOOL_TYPE_ERASER,this.handleSelectTool(t);break;case i.ANNOTATION_ACTTION_TYPE.SELECT_TOOL:this.handleSelectTool(t);break;case i.ANNOTATION_ACTTION_TYPE.UNDO:this.handleUndo();break;case i.ANNOTATION_ACTTION_TYPE.REDO:this.handleRedo();break;case i.ANNOTATION_ACTTION_TYPE.CLEAR:this.handleClear(t);break;case i.ANNOTATION_ACTTION_TYPE.CLOSE_TOOL_BAR:this.boardSDKIns.onMessage({type:i.MSG_TO_WHITEBOARD_TYPE.TOOL_BAR_CLOSED});break;case i.ANNOTATION_ACTTION_TYPE.UPDATE_PARAMS:this.handleUpdateParams(t);break;case i.ANNOTATION_ACTTION_TYPE.PAUSE_ANNOTATION:this.handlePauseAnnotation(t)}}handleSelectTool(t){const{toolType:e,width:n,color:a}=t,s=parseInt(a),o=16777215&s,r=(s>>>24)/255;this.currentTool={toolType:e,width:n,color:o,alpha:r},this.annoSession.setTool(this.currentTool),this.boardSDKIns.onMessage(Object.assign({type:i.MSG_TO_WHITEBOARD_TYPE.TOOL_SELECT,sessionId:this.presenterId},this.currentTool))}handleUndo(){var t;null===(t=c.get(this.presenterId))||void 0===t||t.handleUndo()}handleRedo(){var t;null===(t=c.get(this.presenterId))||void 0===t||t.handleRedo()}handleClear(t){var e;null===(e=c.get(this.presenterId))||void 0===e||e.handleClear(t)}handleUpdateParams(t){const{userName:e}=t;"string"==typeof e&&c.forEach(t=>{t.updateUserName(e)})}handlePauseAnnotation(t){const{paused:e}=t;if("boolean"==typeof e){let t;t=e?{toolType:i.AnnoToolType.ANNO_TOOL_TYPE_NONE}:this.currentTool,this.boardSDKIns.onMessage(Object.assign({type:i.MSG_TO_WHITEBOARD_TYPE.TOOL_SELECT,sessionId:this.presenterId},t))}}_createSession(t,e=!1){const n=new o.default({appId:this.appId,userName:this.userName,presenterId:t,isPresenter:this.appId===t,isBOSession:e,boardSDKIns:this.boardSDKIns});return c.set(t,n),n}}e.AnnotationMgr=h},89:function(t,e,n){"use strict";var a,s,o,i,r,d,u,c,h,A,O,_,I,p,l;Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultTool=e.getDefaultAnnoPageState=e.getDefaultAnnoPduPage=e.getDefaultAnnoObjScribble=e.getDefaultAnnoLineFormat=e.getDefaultPduDocRequestDrawAck=e.getDefaultPduDocRequestDraw=e.getDefaultAnnoPduHeader=e.getDefaultAnnoObjHeader=e.DEFAULT_CAPTURE_FRAME_RATE=e.MSG_TO_WHITEBOARD_TYPE=e.ANNOTATION_CLEAR_TYPE=e.AnnoToolType=e.ANNOTATION_ACTTION_TYPE=e.ANNO_MSG_TYPE=e.ANNO_ENCODE_TYPE=e.AnnoObjFlagMask=e.AnnoLineCapStyle=e.AnnoLineJoinStyle=e.AnnoLineDashStyle=e.AnnoLineFormatType=e.AnnoDocRequestDrawAckCode=e.AnnoDnSource=e.AnnoPduType=e.AnnoObjType=e.ANNO_PDU_CMD=e.ANNO_ENGINE_VERSION=e.NULL_NODE_ID=void 0,e.NULL_NODE_ID=4294967295,e.ANNO_ENGINE_VERSION=610,e.ANNO_PDU_CMD="SEND_ANNOTATION_PDU",function(t){t[t.kComposite=0]="kComposite",t[t.kGroup=1]="kGroup",t[t.kPen=2]="kPen",t[t.kSmoothPen=3]="kSmoothPen",t[t.kNull=77]="kNull"}(a||(e.AnnoObjType=a={})),function(t){t[t.kAppBase=4096]="kAppBase",t[t.kAppMax=8191]="kAppMax",t[t.kDocBase=8192]="kDocBase",t[t.kDocRequestDraw=8193]="kDocRequestDraw",t[t.kDocRequestDrawAck=8194]="kDocRequestDrawAck",t[t.kPageBase=12288]="kPageBase",t[t.kPageSync=12293]="kPageSync",t[t.kAnnoObjBase=65536]="kAnnoObjBase",t[t.kAnnoObjAdd=65537]="kAnnoObjAdd",t[t.kAnnoObjAddAck=65538]="kAnnoObjAddAck",t[t.kAnnoObjRemove=65539]="kAnnoObjRemove",t[t.kAnnoObjRestore=65540]="kAnnoObjRestore",t[t.kAnnoObjRemoveUser=65541]="kAnnoObjRemoveUser",t[t.kAnnoObjRestoreUser=65542]="kAnnoObjRestoreUser",t[t.kAnnoObjRemoveAll=65545]="kAnnoObjRemoveAll",t[t.kAnnoObjRestoreAll=65546]="kAnnoObjRestoreAll",t[t.kAnnoObjRemoveAllByHost=65547]="kAnnoObjRemoveAllByHost",t[t.kAnnoObjRestoreAllByHost=65548]="kAnnoObjRestoreAllByHost",t[t.kNull=143360]="kNull"}(s||(e.AnnoPduType=s={})),function(t){t[t.FROM_LOCAL=0]="FROM_LOCAL",t[t.FROM_REMOTE=1]="FROM_REMOTE"}(o||(e.AnnoDnSource=o={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.ACCPETED=1]="ACCPETED",t[t.DECLINED=2]="DECLINED"}(i||(e.AnnoDocRequestDrawAckCode=i={})),function(t){t[t.ANNO_LINE_FORMAT_TYPE_NONE=0]="ANNO_LINE_FORMAT_TYPE_NONE",t[t.ANNO_LINE_FORMAT_TYPE_COLOR=1]="ANNO_LINE_FORMAT_TYPE_COLOR",t[t.ANNO_LINE_FORMAT_TYPE_DEFAULT=1]="ANNO_LINE_FORMAT_TYPE_DEFAULT"}(r||(e.AnnoLineFormatType=r={})),function(t){t[t.ANNO_LINE_DASH_STYLE_SOLID=0]="ANNO_LINE_DASH_STYLE_SOLID",t[t.ANNO_LINE_DASH_STYLE_DASH=1]="ANNO_LINE_DASH_STYLE_DASH",t[t.ANNO_LINE_DASH_STYLE_DOT=2]="ANNO_LINE_DASH_STYLE_DOT",t[t.ANNO_LINE_DASH_STYLE_DASHDOT=3]="ANNO_LINE_DASH_STYLE_DASHDOT",t[t.ANNO_LINE_DASH_STYLE_DASHDOTDOT=4]="ANNO_LINE_DASH_STYLE_DASHDOTDOT",t[t.ANNO_LINE_DASH_STYLE_PATTERN=5]="ANNO_LINE_DASH_STYLE_PATTERN",t[t.ANNO_LINE_DASH_STYLE_DEFAULT=0]="ANNO_LINE_DASH_STYLE_DEFAULT"}(d||(e.AnnoLineDashStyle=d={})),function(t){t[t.ANNO_LINE_JOIN_STYLE_JOINMITER=0]="ANNO_LINE_JOIN_STYLE_JOINMITER",t[t.ANNO_LINE_JOIN_STYLE_JOINROUND=1]="ANNO_LINE_JOIN_STYLE_JOINROUND",t[t.ANNO_LINE_JOIN_STYLE_JOINBEVEL=2]="ANNO_LINE_JOIN_STYLE_JOINBEVEL",t[t.ANNO_LINE_JOIN_STYLE_MITERORBEVEL=3]="ANNO_LINE_JOIN_STYLE_MITERORBEVEL",t[t.ANNO_LINE_JOIN_STYLE_DEFAULT=1]="ANNO_LINE_JOIN_STYLE_DEFAULT"}(u||(e.AnnoLineJoinStyle=u={})),function(t){t[t.ANNO_LINE_CAP_STYLE_BUTT=0]="ANNO_LINE_CAP_STYLE_BUTT",t[t.ANNO_LINE_CAP_STYLE_CAPROUND=1]="ANNO_LINE_CAP_STYLE_CAPROUND",t[t.ANNO_LINE_CAP_STYLE_CAPSQUARE=2]="ANNO_LINE_CAP_STYLE_CAPSQUARE",t[t.ANNO_LINE_CAP_STYLE_CAPTRIANGLE=3]="ANNO_LINE_CAP_STYLE_CAPTRIANGLE",t[t.ANNO_LINE_CAP_STYLE_DEFAULT=1]="ANNO_LINE_CAP_STYLE_DEFAULT"}(c||(e.AnnoLineCapStyle=c={})),function(t){t[t.ANNO_OBJ_FLAG_NOTHING=0]="ANNO_OBJ_FLAG_NOTHING",t[t.ANNO_OBJ_FLAG_WITH_TRANSFORM=1]="ANNO_OBJ_FLAG_WITH_TRANSFORM",t[t.ANNO_OBJ_FLAG_WITH_LINE=2]="ANNO_OBJ_FLAG_WITH_LINE",t[t.ANNO_OBJ_FLAG_WITH_FILL=4]="ANNO_OBJ_FLAG_WITH_FILL",t[t.ANNO_OBJ_FLAG_WITH_TEXTFRAME=8]="ANNO_OBJ_FLAG_WITH_TEXTFRAME"}(h||(e.AnnoObjFlagMask=h={})),function(t){t[t.ANNO_ENCODE_TYPE_NONE=0]="ANNO_ENCODE_TYPE_NONE",t[t.ANNO_ENCODE_TYPE_BASE64=1]="ANNO_ENCODE_TYPE_BASE64",t[t.ANNO_ENCODE_TYPE_GZIP_BASE64=2]="ANNO_ENCODE_TYPE_GZIP_BASE64"}(A||(e.ANNO_ENCODE_TYPE=A={})),function(t){t.ADD_OBJECT="addObject",t.REMOVE_OBJECT="removeObject"}(O||(e.ANNO_MSG_TYPE=O={})),function(t){t[t.SELECT_MOUSE=0]="SELECT_MOUSE",t[t.SELECT_TOOL=1]="SELECT_TOOL",t[t.SELECT_ERASER=2]="SELECT_ERASER",t[t.UNDO=3]="UNDO",t[t.REDO=4]="REDO",t[t.CLEAR=5]="CLEAR",t[t.CLOSE_TOOL_BAR=6]="CLOSE_TOOL_BAR",t[t.UPDATE_PARAMS=7]="UPDATE_PARAMS",t[t.PAUSE_ANNOTATION=8]="PAUSE_ANNOTATION"}(_||(e.ANNOTATION_ACTTION_TYPE=_={})),function(t){t[t.ANNO_TOOL_TYPE_NONE=0]="ANNO_TOOL_TYPE_NONE",t[t.ANNO_TOOL_TYPE_PEN=1]="ANNO_TOOL_TYPE_PEN",t[t.ANNO_TOOL_TYPE_HIGHLIGHTER=2]="ANNO_TOOL_TYPE_HIGHLIGHTER",t[t.ANNO_TOOL_TYPE_SPOTLIGHT=3]="ANNO_TOOL_TYPE_SPOTLIGHT",t[t.ANNO_TOOL_TYPE_ARROW=4]="ANNO_TOOL_TYPE_ARROW",t[t.ANNO_TOOL_TYPE_TEXTBOX=5]="ANNO_TOOL_TYPE_TEXTBOX",t[t.ANNO_TOOL_TYPE_PICTURE=6]="ANNO_TOOL_TYPE_PICTURE",t[t.ANNO_TOOL_TYPE_ERASER=7]="ANNO_TOOL_TYPE_ERASER"}(I||(e.AnnoToolType=I={})),function(t){t[t.CLEAR_MINE=0]="CLEAR_MINE",t[t.CLEAR_VIEWER=1]="CLEAR_VIEWER",t[t.CLEAR_ALL=2]="CLEAR_ALL"}(p||(e.ANNOTATION_CLEAR_TYPE=p={})),function(t){t[t.ONACK=0]="ONACK",t[t.TOOL_SELECT=1]="TOOL_SELECT",t[t.ERASE_ALL=2]="ERASE_ALL",t[t.RESIZE=3]="RESIZE",t[t.REMOVE_OBJECTS=4]="REMOVE_OBJECTS",t[t.RESTORE_OBJECTS=5]="RESTORE_OBJECTS",t[t.TOOL_BAR_CLOSED=6]="TOOL_BAR_CLOSED",t[t.CHANGE_SESSION=7]="CHANGE_SESSION",t[t.UPDATE_CANVAS=8]="UPDATE_CANVAS",t[t.DESTROY_SESSION=9]="DESTROY_SESSION"}(l||(e.MSG_TO_WHITEBOARD_TYPE=l={})),e.DEFAULT_CAPTURE_FRAME_RATE=10,e.getDefaultAnnoObjHeader=function(){return{struSize:18,dataSize:18,objType:a.kNull,objFlag:e.NULL_NODE_ID,objId:e.NULL_NODE_ID}},e.getDefaultAnnoPduHeader=function(){return{struSize:22,dataSize:22,pduType:s.kNull,pduId:e.NULL_NODE_ID,appId:e.NULL_NODE_ID,pduTimeStamp:Date.now()}},e.getDefaultPduDocRequestDraw=function(){return{struSize:14,dataSize:14,requesterId:e.NULL_NODE_ID,docId:e.NULL_NODE_ID,requesterEngineVersion:e.ANNO_ENGINE_VERSION,requesterName:""}},e.getDefaultPduDocRequestDrawAck=function(){return{struSize:26,dataSize:26,requesterId:e.NULL_NODE_ID,composerId:e.NULL_NODE_ID,docId:e.NULL_NODE_ID,composerEngineVersion:e.NULL_NODE_ID,composerAckCode:i.UNKNOWN,docDpiScale:1,composerName:""}},e.getDefaultAnnoLineFormat=function(){return{struSize:10,dataSize:40,type:r.ANNO_LINE_FORMAT_TYPE_DEFAULT,annoLineData:{colorLine:{struSize:30,dataSize:30,dashStyle:d.ANNO_LINE_DASH_STYLE_DEFAULT,joinStyle:u.ANNO_LINE_JOIN_STYLE_DEFAULT,capStyle:c.ANNO_LINE_CAP_STYLE_DEFAULT,width:2,color:255,alpha:1}}}},e.getDefaultAnnoObjScribble=function(){return{struSize:6,dataSize:6,annoPoints:[]}},e.getDefaultAnnoPduPage=function(){return{struSize:14,dataSize:14,docId:e.NULL_NODE_ID,pageId:e.NULL_NODE_ID}},e.getDefaultAnnoPageState=function(){return{pageId:0,isErased:!1}},e.getDefaultTool=function(){return{toolType:I.ANNO_TOOL_TYPE_NONE,width:0,color:0,alpha:0}}},90:function(t,e,n){"use strict";function a(t){return t>>>10}function s(t){return t>>>8<<10|(t<<8>>>18)%1023}Object.defineProperty(e,"__esModule",{value:!0}),e.CAnnoReqId=e.CAnnoPduId=e.CAnnoObjId=e.CAnnoPageId=e.CAnnoDocId=e.CAnnoId=void 0;let o=0,i=0,r=0,d=0,u=0;class c{constructor(t){this._id=t}getId(){return this._id}setId(t){this._id=t}}e.CAnnoId=c;e.CAnnoDocId=class extends c{constructor(t){super(t)}acquireDocId(t){return o++,this._id=a(t)<<10|1023&o,this._id}amendDocId(t){return this._id=a(t)<<10|1023&this._id,this._id}};e.CAnnoPageId=class extends c{constructor(t){super(t)}acquirePageId(t){return i++,this._id=a(t)<<10|1023&i,this._id}amendDocId(t){return this._id=a(t)<<10|1023&this._id,this._id}};e.CAnnoObjId=class extends c{constructor(t){super(t)}acquireObjId(t){return r++,this._id=s(t)<<18|262143&r,this._id}amendDocId(t){return this._id=s(t)<<18|262143&this._id,this._id}};e.CAnnoPduId=class extends c{constructor(t){super(t)}acquirePduId(){return this._id=d++,this._id}};e.CAnnoReqId=class extends c{constructor(t){super(t)}acquirePduId(){return this._id=u++,this._id}}},91:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCanvasScale=e.getShareSessionId=e.extractActionInfo=e.normalizePoints=e.getCanvasStyleSize=e.revertRGBValue=e.parseColorValue=e.annoLog=e.peekPduType=e.Base64toUInt8Array=e.UInt8Array2Base64=e.getDefaultAnnoData=e.skipUnrecognizedData=e.skipUnrecognizedStruct=e.overWriteDataSize=e.overWriteStructSize=e.CAnnoBuffer=void 0;const a=n(89);function s(t){const e=t.style;return{width:parseInt(e.width.substring(0,e.width.length-2)),height:parseInt(e.height.substring(0,e.height.length-2))}}e.CAnnoBuffer=class{constructor(t){this.mData=t?Array.from(t):[],this.currentPos=0}getSize(){return this.mData.length}writeInt8(t){this.mData.push(255&t),this.currentPos+=1}writeInt16(t){this.mData.push(255&t),this.mData.push(t>>>8&255),this.currentPos+=2}writeInt32(t){this.mData.push(255&t),this.mData.push(t>>>8&255),this.mData.push(t>>>16&255),this.mData.push(t>>>24&255),this.currentPos+=4}writeInt16At(t,e){this.mData[t]=255&e,this.mData[t+1]=e>>>8&255}writeInt32At(t,e){this.mData[t]=255&e,this.mData[t+1]=e>>>8&255,this.mData[t+2]=e>>>16&255,this.mData[t+3]=e>>>24&255}writeFloat32(t){const e=new DataView(new ArrayBuffer(4));e.setFloat32(0,t,!0);const n=new Uint8Array(e.buffer);for(let t=0;t<4;t++)this.mData.push(n[t]);this.currentPos+=4}writeString(t){const e=t.length;this.writeInt32(e);for(let n=0;n<e;n++)this.writeInt16(t.charCodeAt(n))}readInt8(){const t=this.currentPos;if(t>=this.mData.length)return 0;const e=this.mData[t];return this.currentPos+=1,e}readInt16(){const t=this.currentPos;if(t+1>=this.mData.length)return 0;const e=this.mData[t]|this.mData[t+1]<<8;return this.currentPos+=2,e}readInt32(){const t=this.currentPos;if(t+3>=this.mData.length)return 0;const e=this.mData[t]|this.mData[t+1]<<8|this.mData[t+2]<<16|this.mData[t+3]<<24;return this.currentPos+=4,e}readString(){const t=this.readInt32();let e="";for(let n=0;n<t&&n<this.mData.length;n++)e+=String.fromCharCode(this.readInt16());return e}readFloat32(){if(this.currentPos+3>=this.mData.length)return 0;const t=this.mData.slice(this.currentPos,this.currentPos+4),e=new DataView(new Uint8Array(t).buffer);return this.currentPos+=4,e.getFloat32(0)}toInt8Array(){return new Uint8Array(this.mData)}tell(){return this.currentPos}seek(t){this.currentPos=this.mData.length>t?t:this.mData.length-1}},e.overWriteStructSize=function(t,e,n){const a=t.tell();n.struSize!=a-e&&(n.struSize=a-e,t.writeInt16At(e,n.struSize))},e.overWriteDataSize=function(t,e,n){const a=t.tell();n.dataSize!=a-e&&(n.dataSize=a-e,t.writeInt32At(e+2,n.dataSize))},e.skipUnrecognizedStruct=function(t,e,n){t.tell()-e<n.struSize&&t.seek(e+n.struSize)},e.skipUnrecognizedData=function(t,e,n){t.tell()-e<n.dataSize&&t.seek(e+n.dataSize)},e.getDefaultAnnoData=function(t,e,n,s){return{dnSource:a.AnnoDnSource.FROM_LOCAL,appId:t||a.NULL_NODE_ID,userName:e||"",docId:n||a.NULL_NODE_ID,pageId:s||a.NULL_NODE_ID,annoObjIds:new Array}},e.UInt8Array2Base64=function(t){let e=[];for(let n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return btoa(e.join(""))},e.Base64toUInt8Array=function(t){return Uint8Array.from(atob(t),t=>t.charCodeAt(0))},e.peekPduType=function(t){t.seek(6);const e=t.readInt32();return t.seek(0),e},e.parseColorValue=function(t){const e=t.slice(1);return 6!==e.length?255:parseInt(e.substring(0,2),16)+(parseInt(e.substring(2,4),16)<<8)+(parseInt(e.substring(4,6),16)<<16)},e.revertRGBValue=function(t){return t>>>16&255|(t>>>8&255)<<8|(255&t)<<16},e.getCanvasStyleSize=s,e.normalizePoints=function(t,e){const n=[];return t.forEach(t=>{n.push({x:t.x,y:t.y})}),n},e.getCanvasScale=function(t){const e=s(t),{width:n,height:a}=t,{width:o,height:i}=e;return Object.assign(Object.assign({},e),{scale:{x:o/n,y:i/a}})},e.extractActionInfo=function(t,e){return{pduType:e,appId:t.appId||a.NULL_NODE_ID,docId:t.docId||a.NULL_NODE_ID,pageId:t.pageId||a.NULL_NODE_ID,annoObjIds:t.annoObjIds||[],whiteboardObjIds:t.whiteboardObjIds||[]}},e.getShareSessionId=function(t){return t},e.annoLog=function(t){console.log("Annotation Log ==> "+t.toString())}},92:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAnnoDoc=e.CAnnoObjSmoothPen=e.CAnnoObj=e.CAnnoLineFormat=e.CAnnoFormat=e.CAnnoObjScribble=e.getDefaultAnnoPduObj=void 0;const a=n(90),s=n(91),o=n(89);e.getDefaultAnnoPduObj=function(){return{struSize:14,dataSize:14,docId:o.NULL_NODE_ID,pageId:o.NULL_NODE_ID}};class i{constructor(){this.annoObjScribble=(0,o.getDefaultAnnoObjScribble)()}pack(t){const e=t.tell(),n=this.annoObjScribble.annoPoints.length;if(t.writeInt16(this.annoObjScribble.struSize),t.writeInt32(this.annoObjScribble.dataSize),n>0){t.writeInt32(n);for(let e=0;e<n;e++)t.writeInt32(this.annoObjScribble.annoPoints[e].x),t.writeInt32(this.annoObjScribble.annoPoints[e].y)}(0,s.overWriteDataSize)(t,e,this.annoObjScribble)}setData(t){this.annoObjScribble.annoPoints=t}}e.CAnnoObjScribble=i;class r{constructor(){}pack(t){}unpack(){}}e.CAnnoFormat=r;class d extends r{constructor(t){super(),this.annoLineFormat=(0,o.getDefaultAnnoLineFormat)(),t&&(t.type in o.AnnoLineFormatType&&(this.annoLineFormat.type=t.type),t.lineData&&(this.annoLineFormat.annoLineData.colorLine.width=t.lineData.width,this.annoLineFormat.annoLineData.colorLine.color=(0,s.revertRGBValue)(t.lineData.color)))}pack(t){super.pack(t);const e=t.tell();switch(t.writeInt16(this.annoLineFormat.struSize),t.writeInt32(this.annoLineFormat.dataSize),t.writeInt32(this.annoLineFormat.type),this.annoLineFormat.type){case o.AnnoLineFormatType.ANNO_LINE_FORMAT_TYPE_NONE:break;case o.AnnoLineFormatType.ANNO_LINE_FORMAT_TYPE_DEFAULT:{const e=t.tell();t.writeInt16(this.annoLineFormat.annoLineData.colorLine.struSize),t.writeInt32(this.annoLineFormat.annoLineData.colorLine.dataSize),t.writeInt32(this.annoLineFormat.annoLineData.colorLine.dashStyle),t.writeInt32(this.annoLineFormat.annoLineData.colorLine.joinStyle),t.writeInt32(this.annoLineFormat.annoLineData.colorLine.capStyle),t.writeInt32(this.annoLineFormat.annoLineData.colorLine.width),t.writeInt32(this.annoLineFormat.annoLineData.colorLine.color),t.writeFloat32(this.annoLineFormat.annoLineData.colorLine.alpha),(0,s.overWriteDataSize)(t,e,this.annoLineFormat.annoLineData.colorLine);break}}(0,s.overWriteDataSize)(t,e,this.annoLineFormat)}}e.CAnnoLineFormat=d;class u extends a.CAnnoObjId{constructor(t){super(o.NULL_NODE_ID),this.annoObjHeader=(0,o.getDefaultAnnoObjHeader)(),this.annoObjHeader.objType=t,this.annoObjHeader.objFlag=2,this.annoLineFormat=null,this.appId=o.NULL_NODE_ID,this.docId=o.NULL_NODE_ID,this.pageId=o.NULL_NODE_ID}pack(t){var e;this.annoObjHeader.objId=this.getId();const n=t.tell();t.writeInt16(this.annoObjHeader.struSize),t.writeInt32(this.annoObjHeader.dataSize),t.writeInt32(this.annoObjHeader.objType),t.writeInt32(this.annoObjHeader.objFlag),t.writeInt32(this.annoObjHeader.objId),this.annoObjHeader.objFlag&o.AnnoObjFlagMask.ANNO_OBJ_FLAG_WITH_LINE&&(null===(e=this.annoLineFormat)||void 0===e||e.pack(t)),(0,s.overWriteDataSize)(t,n,this.annoObjHeader)}packIds(t){t.writeInt32(1),t.writeInt32(this.getId())}setObjHeader(t){this.annoObjHeader.objId=t.objectId}setLineFormat(t){const e=new d(t);this.annoLineFormat=e}makeCopy(){const t=new u(this.annoObjHeader.objType);return t.setObjHeader({objectId:this.annoObjHeader.objId}),t.setLineFormat(this.annoLineFormat.annoLineFormat),t}setData(t){}}e.CAnnoObj=u;e.CAnnoObjSmoothPen=class extends u{constructor(){super(o.AnnoObjType.kSmoothPen),this.annoObjScribble=new i}pack(t){super.pack(t),this.annoObjScribble.pack(t)}setData(t){this.annoObjScribble.setData(t)}};class c extends a.CAnnoDocId{constructor(t){super(t.appId),this.appId=t.appId,this.isPresenter=t.isPresenter,this.userName=t.userName,this.preseterId=t.preseterId}handlePageSync(t,e){this.setId(t),this.currentPageId=e}getPageId(){return this.currentPageId}}e.CAnnoDoc=c},93:function(t,e,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(t,e,n,a){void 0===a&&(a=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,a,s)}:function(t,e,n,a){void 0===a&&(a=n),t[a]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.parsePdu=e.CAnnoPduRestoreUserObj=e.CAnnoPduRemoveUserObj=e.CAnnoPduUserObj=e.CAnnoPduRestoreAllObjByHost=e.CAnnoPduRemoveAllObjByHost=e.CAnnoPduRestoreAllObj=e.CAnnoPduRemoveAllObj=e.CAnnoPduRestoreObj=e.CAnnoPduRemoveObj=e.CAnnoPduObjIds=e.CAnnoPduAddObjAck=e.CAnnoPduAddObj=e.CAnnoPduObj=e.CAnnoPduSyncPage=e.CAnnoPduDocRequestDrawAck=e.CAnnoPduDocRequestDraw=e.CAnnoPdu=void 0;const i=n(90),r=n(91),d=o(n(89)),u=n(92);class c extends i.CAnnoPduId{constructor(t,e,n){super(d.NULL_NODE_ID),this.annoPduHeader=d.getDefaultAnnoPduHeader(),this.annoPduHeader.pduType=t,n?this.data=n:(this.annoPduHeader.pduId=this.acquirePduId(),this.annoPduHeader.pduTimeStamp=Date.now(),this.data=new r.CAnnoBuffer(null))}pack(){this.data.writeInt16(this.annoPduHeader.struSize),this.data.writeInt32(this.annoPduHeader.dataSize),this.data.writeInt32(this.annoPduHeader.pduType),this.data.writeInt32(this.annoPduHeader.pduId),this.data.writeInt32(this.annoPduHeader.appId),this.data.writeInt32(this.annoPduHeader.pduTimeStamp)}unpack(){const t=this.data.tell();this.annoPduHeader.struSize=this.data.readInt16(),this.annoPduHeader.dataSize=this.data.readInt32(),this.annoPduHeader.pduType=this.data.readInt32(),this.annoPduHeader.pduId=this.data.readInt32(),this.annoPduHeader.appId=this.data.readInt32(),this.annoPduHeader.pduTimeStamp=this.data.readInt32(),(0,r.skipUnrecognizedStruct)(this.data,t,this.annoPduHeader.struSize),(0,r.skipUnrecognizedData)(this.data,t,this.annoPduHeader.dataSize)}getPduType(){return this.annoPduHeader.pduType||d.AnnoPduType.kNull}toInt8Array(){return this.data.toInt8Array()}}e.CAnnoPdu=c;e.CAnnoPduDocRequestDraw=class extends c{constructor(t,e,n){super(t,e,n),e&&(this.annoPduDocRequestDraw=d.getDefaultPduDocRequestDraw(),this.annoPduHeader.appId=e.appId,this.annoPduDocRequestDraw.requesterId=e.appId,this.annoPduDocRequestDraw.docId=e.docId,this.annoPduDocRequestDraw.requesterName=e.userName,this.pack()),n&&(this.data=n,this.unpack())}pack(){super.pack();const t=this.data.tell();this.data.writeInt16(this.annoPduDocRequestDraw.struSize),this.data.writeInt32(this.annoPduDocRequestDraw.dataSize),this.data.writeInt32(this.annoPduDocRequestDraw.docId),this.data.writeInt32(this.annoPduDocRequestDraw.requesterEngineVersion),(0,r.overWriteStructSize)(this.data,t,this.annoPduDocRequestDraw),this.data.writeString(this.annoPduDocRequestDraw.requesterName),(0,r.overWriteDataSize)(this.data,t,this.annoPduDocRequestDraw)}unpack(){}};class h extends c{constructor(t,e,n){super(t,e,n),this.annoPduDocRequestDrawAck=d.getDefaultPduDocRequestDrawAck(),e?(this.annoPduHeader.appId=e.appId,this.annoPduDocRequestDrawAck.requesterId=e.ackRequesterId||0,this.annoPduDocRequestDrawAck.composerId=e.appId,this.annoPduDocRequestDrawAck.docId=e.docId,this.annoPduDocRequestDrawAck.composerEngineVersion=d.ANNO_ENGINE_VERSION,this.annoPduDocRequestDrawAck.composerAckCode=e.docRequestDrawAckCode||0,this.annoPduDocRequestDrawAck.docDpiScale=1,this.annoPduDocRequestDrawAck.composerName=e.userName,this.pack()):n&&(this.data=n,this.unpack())}pack(){super.pack();const t=this.data.tell();this.data.writeInt16(this.annoPduDocRequestDrawAck.struSize),this.data.writeInt32(this.annoPduDocRequestDrawAck.dataSize),this.data.writeInt32(this.annoPduDocRequestDrawAck.requesterId),this.data.writeInt32(this.annoPduDocRequestDrawAck.docId),this.data.writeInt32(this.annoPduDocRequestDrawAck.composerEngineVersion),this.data.writeInt32(this.annoPduDocRequestDrawAck.composerAckCode),this.data.writeFloat32(this.annoPduDocRequestDrawAck.docDpiScale),this.data.writeString(this.annoPduDocRequestDrawAck.composerName),(0,r.overWriteDataSize)(this.data,t,this.annoPduDocRequestDrawAck)}unpack(){super.unpack();const t=this.data.tell();this.annoPduDocRequestDrawAck.struSize=this.data.readInt16(),this.annoPduDocRequestDrawAck.dataSize=this.data.readInt32(),this.annoPduDocRequestDrawAck.requesterId=this.data.readInt32(),this.annoPduDocRequestDrawAck.docId=this.data.readInt32(),this.annoPduDocRequestDrawAck.composerEngineVersion=this.data.readInt32(),this.annoPduDocRequestDrawAck.composerAckCode=this.data.readInt32(),this.annoPduDocRequestDrawAck.docDpiScale=this.data.readFloat32(),(0,r.skipUnrecognizedStruct)(this.data,t,this.annoPduDocRequestDrawAck),this.annoPduDocRequestDrawAck.composerName=this.data.readString(),(0,r.skipUnrecognizedData)(this.data,t,this.annoPduDocRequestDrawAck)}toInt8Array(){return this.data.toInt8Array()}}e.CAnnoPduDocRequestDrawAck=h;class A extends c{constructor(t,e,n){super(t,e,n),this.annoPduPage=d.getDefaultAnnoPduPage(),e?(this.annoPduHeader.appId=e.appId,this.annoPduPage.docId=e.appId,this.annoPduPage.pageId=e.pageId,this.pack()):n&&(this.data=n,this.unpack())}pack(){super.pack();const t=this.data.tell();this.data.writeInt16(this.annoPduPage.struSize),this.data.writeInt32(this.annoPduPage.dataSize),this.data.writeInt32(this.annoPduPage.docId),this.data.writeInt32(this.annoPduPage.pageId),(0,r.overWriteStructSize)(this.data,t,this.annoPduPage),(0,r.overWriteDataSize)(this.data,t,this.annoPduPage)}unpack(){super.unpack();const t=this.data.tell();this.annoPduPage.struSize=this.data.readInt16(),this.annoPduPage.dataSize=this.data.readInt32(),this.annoPduPage.docId=this.data.readInt32(),this.annoPduPage.pageId=this.data.readInt32(),(0,r.skipUnrecognizedStruct)(this.data,t,this.annoPduPage);const e=this.data.readInt32();if(e>0){this.annoPageStates=[];for(let t=0;t<e;t++){const t=d.getDefaultAnnoPageState();t.pageId=this.data.readInt32(),t.isErased=!!this.data.readInt8(),t.pageName=this.data.readString(),this.annoPageStates.push(t)}}(0,r.skipUnrecognizedData)(this.data,t,this.annoPduPage)}}e.CAnnoPduSyncPage=A;class O extends c{constructor(t,e,n){super(t,e,n),this.annoPduObj=(0,u.getDefaultAnnoPduObj)(),e&&(this.annoPduHeader.appId=e.appId,this.annoPduObj.docId=e.docId,this.annoPduObj.pageId=e.pageId,e.annoObj&&(this.annoPduObj.annoObj=e.annoObj),e.annoObjIds&&(this.annoPduObj.annoObjIds=e.annoObjIds))}getHeader(){return this.annoPduHeader}}e.CAnnoPduObj=O;e.CAnnoPduAddObj=class extends O{constructor(t,e,n){super(t,e,n),e?this.pack():n&&this.unpack()}pack(){super.pack();const t=this.data.tell();this.data.writeInt16(this.annoPduObj.struSize),this.data.writeInt32(this.annoPduObj.dataSize),this.data.writeInt32(this.annoPduObj.docId),this.data.writeInt32(this.annoPduObj.pageId),this.annoPduObj.annoObj&&this.annoPduObj.annoObj.pack(this.data),(0,r.overWriteDataSize)(this.data,t,this.annoPduObj)}unpack(){}};class _ extends O{constructor(t,e,n){super(t,e,n),e?(this.timeStampOfRequest=e.timeStampOfAckRequest,this.captureFrameRate=e.captureFrameRate||d.DEFAULT_CAPTURE_FRAME_RATE,this.pack()):n&&this.unpack()}pack(){super.pack(),this.annoPduObj.struSize+=5,this.annoPduObj.dataSize=this.annoPduObj.struSize;const t=this.data.tell();this.data.writeInt16(this.annoPduObj.struSize),this.data.writeInt32(this.annoPduObj.dataSize),this.data.writeInt32(this.annoPduObj.docId),this.data.writeInt32(this.annoPduObj.pageId),this.data.writeInt32(this.timeStampOfRequest),this.data.writeInt8(this.captureFrameRate),this.annoPduObj.annoObj?this.annoPduObj.annoObj.packIds(this.data):this.data.writeInt32(0),(0,r.overWriteDataSize)(this.data,t,this.annoPduObj)}unpack(){super.unpack();const t=this.data.tell();this.annoPduObj.struSize=this.data.readInt16(),this.annoPduObj.dataSize=this.data.readInt32(),this.annoPduObj.docId=this.data.readInt32(),this.annoPduObj.pageId=this.data.readInt32(),this.timeStampOfRequest=this.data.readInt32(),this.captureFrameRate=this.data.readInt8(),(0,r.skipUnrecognizedStruct)(this.data,t,this.annoPduObj);const e=this.data.readInt32();if(e>0){this.annoPduObj.annoObjIds=this.annoPduObj.annoObjIds||[];for(let t=0;t<e;t++)this.annoPduObj.annoObjIds.push(this.data.readInt32())}(0,r.skipUnrecognizedData)(this.data,t,this.annoPduObj)}}e.CAnnoPduAddObjAck=_;class I extends O{constructor(t,e,n){super(t,e,n),e?this.pack():n&&this.unpack()}pack(){super.pack();const t=this.data.tell();if(this.data.writeInt16(this.annoPduObj.struSize),this.data.writeInt32(this.annoPduObj.dataSize),this.data.writeInt32(this.annoPduObj.docId),this.data.writeInt32(this.annoPduObj.pageId),this.annoPduObj.annoObjIds){const t=this.annoPduObj.annoObjIds.length;this.data.writeInt32(t);for(let e=0;e<t;e++)this.data.writeInt32(this.annoPduObj.annoObjIds[e])}else this.data.writeInt32(0);(0,r.overWriteDataSize)(this.data,t,this.annoPduObj)}unpack(){super.unpack();const t=this.data.tell();this.annoPduObj.struSize=this.data.readInt16(),this.annoPduObj.dataSize=this.data.readInt32(),this.annoPduObj.docId=this.data.readInt32(),this.annoPduObj.pageId=this.data.readInt32(),(0,r.skipUnrecognizedStruct)(this.data,t,this.annoPduObj);const e=this.data.readInt32();if(e>0){this.annoPduObj.annoObjIds=this.annoPduObj.annoObjIds||[];for(let t=0;t<e;t++)this.annoPduObj.annoObjIds.push(this.data.readInt32())}(0,r.skipUnrecognizedData)(this.data,t,this.annoPduObj)}}e.CAnnoPduObjIds=I;e.CAnnoPduRemoveObj=class extends I{constructor(t,e,n){super(t,e,n)}pack(){super.pack()}unpack(){super.unpack()}};e.CAnnoPduRestoreObj=class extends I{constructor(t,e,n){super(t,e,n)}pack(){super.pack()}unpack(){super.unpack()}};e.CAnnoPduRemoveAllObj=class extends I{constructor(t,e,n){super(t,e,n)}pack(){super.pack()}unpack(){super.unpack()}};e.CAnnoPduRestoreAllObj=class extends I{constructor(t,e,n){super(t,e,n)}pack(){super.pack()}unpack(){super.unpack()}};e.CAnnoPduRemoveAllObjByHost=class extends I{constructor(t,e,n){super(t,e,n)}pack(){super.pack()}unpack(){super.unpack()}};e.CAnnoPduRestoreAllObjByHost=class extends I{constructor(t,e,n){super(t,e,n)}pack(){super.pack()}unpack(){super.unpack()}};class p extends O{constructor(t,e,n){super(t,e,n),e?this.pack():n&&this.unpack()}pack(){super.pack();const t=this.data.tell();if(this.data.writeInt16(this.annoPduObj.struSize),this.data.writeInt32(this.annoPduObj.dataSize),this.data.writeInt32(this.annoPduObj.docId),this.data.writeInt32(this.annoPduObj.pageId),this.annoPduObj.annoObjIds){const t=this.annoPduObj.annoObjIds.length;this.data.writeInt32(t);for(let e=0;e<t;e++)this.data.writeInt32(this.annoPduObj.annoObjIds[e])}else this.data.writeInt32(0);(0,r.overWriteDataSize)(this.data,t,this.annoPduObj)}unpack(){super.unpack();const t=this.data.tell();this.annoPduObj.struSize=this.data.readInt16(),this.annoPduObj.dataSize=this.data.readInt32(),this.annoPduObj.docId=this.data.readInt32(),this.annoPduObj.pageId=this.data.readInt32(),(0,r.skipUnrecognizedStruct)(this.data,t,this.annoPduObj);const e=this.data.readInt32();if(e>0){this.annoPduObj.annoObjIds=this.annoPduObj.annoObjIds||[];for(let t=0;t<e;t++)this.annoPduObj.annoObjIds.push(this.data.readInt32())}(0,r.skipUnrecognizedData)(this.data,t,this.annoPduObj)}}e.CAnnoPduUserObj=p;e.CAnnoPduRemoveUserObj=class extends p{constructor(t,e,n){super(t,e,n)}pack(){super.pack()}unpack(){super.unpack()}};e.CAnnoPduRestoreUserObj=class extends p{constructor(t,e,n){super(t,e,n)}pack(){super.pack()}unpack(){super.unpack()}},e.parsePdu=function(t){const e=new r.CAnnoBuffer(t.subarray(8)),n=(0,r.peekPduType)(e);switch(n){case d.AnnoPduType.kDocRequestDrawAck:return new h(n,void 0,e);case d.AnnoPduType.kPageSync:return new A(n,void 0,e);case d.AnnoPduType.kAnnoObjAddAck:return new _(n,void 0,e)}return null}}}]);
//# sourceMappingURL=https://d1cdksi819e9z7.cloudfront.net/sourcemap/annoter.min.js-72c38d9d0cf2c5722dcd.map