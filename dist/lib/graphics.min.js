(()=>{var t={6040:(t,e,r)=>{"use strict";var i=r(8251);t.exports=i},7264:(t,e,r)=>{"use strict";var i=r(4139);r(768),r(8549),r(7152),r(1372),t.exports=i},9692:(t,e,r)=>{"use strict";var i=r(7045);t.exports=i},5663:(t,e,r)=>{"use strict";var i=r(70);t.exports=i},1926:(t,e,r)=>{"use strict";r(6750);var i=r(2046).Object,s=t.exports=function(t,e,r){return i.defineProperty(t,e,r)};i.defineProperty.sham&&(s.sham=!0)},3842:(t,e,r)=>{"use strict";r(8545),r(3643),r(4452),r(3997),r(5084),r(2596),r(5721),r(4954),r(4123),r(3377),r(2230),r(5344),r(1660),r(4610),r(3669),r(4810),r(3325),r(7024),r(8172),r(5205);var i=r(2046);t.exports=i.Symbol},1730:(t,e,r)=>{"use strict";r(9363),r(3643),r(7057),r(4954);var i=r(560);t.exports=i.f("iterator")},1661:(t,e,r)=>{"use strict";r(8537),r(3669);var i=r(560);t.exports=i.f("toPrimitive")},4997:(t,e,r)=>{"use strict";var i=r(6040);t.exports=i},2321:(t,e,r)=>{"use strict";var i=r(7264);r(3939),r(1785),r(1697),r(4664),r(3422),r(36),r(8703),r(6878),r(9671),r(359),t.exports=i},2231:(t,e,r)=>{"use strict";var i=r(9692);t.exports=i},9280:(t,e,r)=>{"use strict";var i=r(5663);t.exports=i},2159:(t,e,r)=>{"use strict";var i=r(2250),s=r(4640),n=TypeError;t.exports=function(t){if(i(t))return t;throw new n(s(t)+" is not a function")}},43:(t,e,r)=>{"use strict";var i=r(4018),s=String,n=TypeError;t.exports=function(t){if(i(t))return t;throw new n("Can't set "+s(t)+" as a prototype")}},2156:t=>{"use strict";t.exports=function(){}},6624:(t,e,r)=>{"use strict";var i=r(6285),s=String,n=TypeError;t.exports=function(t){if(i(t))return t;throw new n(s(t)+" is not an object")}},4436:(t,e,r)=>{"use strict";var i=r(7374),s=r(4849),n=r(575),o=function(t){return function(e,r,o){var a=i(e),c=n(a);if(0===c)return!t&&-1;var h,u=s(o,c);if(t&&r!=r){for(;c>u;)if((h=a[u++])!=h)return!0}else for(;c>u;u++)if((t||u in a)&&a[u]===r)return t||u||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},726:(t,e,r)=>{"use strict";var i=r(8311),s=r(1907),n=r(6946),o=r(9298),a=r(575),c=r(6968),h=s([].push),u=function(t){var e=1===t,r=2===t,s=3===t,u=4===t,l=6===t,d=7===t,f=5===t||l;return function(p,g,v,m){for(var _,y,w=o(p),S=n(w),x=a(S),b=i(g,v),P=0,O=m||c,R=e?O(p,x):r||d?O(p,0):void 0;x>P;P++)if((f||P in S)&&(y=b(_=S[P],P,w),t))if(e)R[P]=y;else if(y)switch(t){case 3:return!0;case 5:return _;case 6:return P;case 2:h(R,_)}else switch(t){case 4:return!1;case 7:h(R,_)}return l?-1:s||u?u:R}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},7171:(t,e,r)=>{"use strict";var i=r(8828),s=r(6264),n=r(798),o=s("species");t.exports=function(t){return n>=51||!i((function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},3427:(t,e,r)=>{"use strict";var i=r(1907);t.exports=i([].slice)},4010:(t,e,r)=>{"use strict";var i=r(1793),s=r(5468),n=r(6285),o=r(6264)("species"),a=Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,(s(e)&&(e===a||i(e.prototype))||n(e)&&null===(e=e[o]))&&(e=void 0)),void 0===e?a:e}},6968:(t,e,r)=>{"use strict";var i=r(4010);t.exports=function(t,e){return new(i(t))(0===e?0:e)}},5807:(t,e,r)=>{"use strict";var i=r(1907),s=i({}.toString),n=i("".slice);t.exports=function(t){return n(s(t),8,-1)}},3948:(t,e,r)=>{"use strict";var i=r(2623),s=r(2250),n=r(5807),o=r(6264)("toStringTag"),a=Object,c="Arguments"===n(function(){return arguments}());t.exports=i?n:function(t){var e,r,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=a(t),o))?r:c?n(e):"Object"===(i=n(e))&&s(e.callee)?"Arguments":i}},7382:(t,e,r)=>{"use strict";var i=r(8828);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},9550:t=>{"use strict";t.exports=function(t,e){return{value:t,done:e}}},1626:(t,e,r)=>{"use strict";var i=r(9447),s=r(4284),n=r(5817);t.exports=i?function(t,e,r){return s.f(t,e,n(1,r))}:function(t,e,r){return t[e]=r,t}},5817:t=>{"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},5543:(t,e,r)=>{"use strict";var i=r(9447),s=r(4284),n=r(5817);t.exports=function(t,e,r){i?s.f(t,e,n(0,r)):t[e]=r}},9251:(t,e,r)=>{"use strict";var i=r(4284);t.exports=function(t,e,r){return i.f(t,e,r)}},8055:(t,e,r)=>{"use strict";var i=r(1626);t.exports=function(t,e,r,s){return s&&s.enumerable?t[e]=r:i(t,e,r),t}},2532:(t,e,r)=>{"use strict";var i=r(5951),s=Object.defineProperty;t.exports=function(t,e){try{s(i,t,{value:e,configurable:!0,writable:!0})}catch(r){i[t]=e}return e}},9447:(t,e,r)=>{"use strict";var i=r(8828);t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},9552:(t,e,r)=>{"use strict";var i=r(5951),s=r(6285),n=i.document,o=s(n)&&s(n.createElement);t.exports=function(t){return o?n.createElement(t):{}}},8024:t=>{"use strict";var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},9287:t=>{"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},376:t=>{"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6794:(t,e,r)=>{"use strict";var i=r(5951).navigator,s=i&&i.userAgent;t.exports=s?String(s):""},798:(t,e,r)=>{"use strict";var i,s,n=r(5951),o=r(6794),a=n.process,c=n.Deno,h=a&&a.versions||c&&c.version,u=h&&h.v8;u&&(s=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!s&&o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(s=+i[1]),t.exports=s},1091:(t,e,r)=>{"use strict";var i=r(5951),s=r(6024),n=r(2361),o=r(2250),a=r(3846).f,c=r(7463),h=r(2046),u=r(8311),l=r(1626),d=r(9724);r(6128);var f=function(t){var e=function(r,i,n){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,i)}return new t(r,i,n)}return s(t,this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var r,s,p,g,v,m,_,y,w,S=t.target,x=t.global,b=t.stat,P=t.proto,O=x?i:b?i[S]:i[S]&&i[S].prototype,R=x?h:h[S]||l(h,S,{})[S],M=R.prototype;for(g in e)s=!(r=c(x?g:S+(b?".":"#")+g,t.forced))&&O&&d(O,g),m=R[g],s&&(_=t.dontCallGetSet?(w=a(O,g))&&w.value:O[g]),v=s&&_?_:e[g],(r||P||typeof m!=typeof v)&&(y=t.bind&&s?u(v,i):t.wrap&&s?f(v):P&&o(v)?n(v):v,(t.sham||v&&v.sham||m&&m.sham)&&l(y,"sham",!0),l(R,g,y),P&&(d(h,p=S+"Prototype")||l(h,p,{}),l(h[p],g,v),t.real&&M&&(r||!M[g])&&l(M,g,v)))}},8828:t=>{"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},6024:(t,e,r)=>{"use strict";var i=r(1505),s=Function.prototype,n=s.apply,o=s.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?o.bind(n):function(){return o.apply(n,arguments)})},8311:(t,e,r)=>{"use strict";var i=r(2361),s=r(2159),n=r(1505),o=i(i.bind);t.exports=function(t,e){return s(t),void 0===e?t:n?o(t,e):function(){return t.apply(e,arguments)}}},1505:(t,e,r)=>{"use strict";var i=r(8828);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},3930:(t,e,r)=>{"use strict";var i=r(1505),s=Function.prototype.call;t.exports=i?s.bind(s):function(){return s.apply(s,arguments)}},6833:(t,e,r)=>{"use strict";var i=r(9447),s=r(9724),n=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=s(n,"name"),c=a&&"something"===function(){}.name,h=a&&(!i||i&&o(n,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:h}},1871:(t,e,r)=>{"use strict";var i=r(1907),s=r(2159);t.exports=function(t,e,r){try{return i(s(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},2361:(t,e,r)=>{"use strict";var i=r(5807),s=r(1907);t.exports=function(t){if("Function"===i(t))return s(t)}},1907:(t,e,r)=>{"use strict";var i=r(1505),s=Function.prototype,n=s.call,o=i&&s.bind.bind(n,n);t.exports=i?o:function(t){return function(){return n.apply(t,arguments)}}},5582:(t,e,r)=>{"use strict";var i=r(2046),s=r(5951),n=r(2250),o=function(t){return n(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(i[t])||o(s[t]):i[t]&&i[t][e]||s[t]&&s[t][e]}},6656:(t,e,r)=>{"use strict";var i=r(1907),s=r(1793),n=r(2250),o=r(5807),a=r(160),c=i([].push);t.exports=function(t){if(n(t))return t;if(s(t)){for(var e=t.length,r=[],i=0;i<e;i++){var h=t[i];"string"==typeof h?c(r,h):"number"!=typeof h&&"Number"!==o(h)&&"String"!==o(h)||c(r,a(h))}var u=r.length,l=!0;return function(t,e){if(l)return l=!1,e;if(s(this))return e;for(var i=0;i<u;i++)if(r[i]===t)return e}}}},9367:(t,e,r)=>{"use strict";var i=r(2159),s=r(7136);t.exports=function(t,e){var r=t[e];return s(r)?void 0:i(r)}},5951:function(t,e,r){"use strict";var i=function(t){return t&&t.Math===Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof r.g&&r.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9724:(t,e,r)=>{"use strict";var i=r(1907),s=r(9298),n=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return n(s(t),e)}},8530:t=>{"use strict";t.exports={}},2416:(t,e,r)=>{"use strict";var i=r(5582);t.exports=i("document","documentElement")},3648:(t,e,r)=>{"use strict";var i=r(9447),s=r(8828),n=r(9552);t.exports=!i&&!s((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},6946:(t,e,r)=>{"use strict";var i=r(1907),s=r(8828),n=r(5807),o=Object,a=i("".split);t.exports=s((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"===n(t)?a(t,""):o(t)}:o},2647:(t,e,r)=>{"use strict";var i=r(1907),s=r(2250),n=r(6128),o=i(Function.toString);s(n.inspectSource)||(n.inspectSource=function(t){return o(t)}),t.exports=n.inspectSource},4932:(t,e,r)=>{"use strict";var i,s,n,o=r(551),a=r(5951),c=r(6285),h=r(1626),u=r(9724),l=r(6128),d=r(2522),f=r(8530),p="Object already initialized",g=a.TypeError,v=a.WeakMap;if(o||l.state){var m=l.state||(l.state=new v);m.get=m.get,m.has=m.has,m.set=m.set,i=function(t,e){if(m.has(t))throw new g(p);return e.facade=t,m.set(t,e),e},s=function(t){return m.get(t)||{}},n=function(t){return m.has(t)}}else{var _=d("state");f[_]=!0,i=function(t,e){if(u(t,_))throw new g(p);return e.facade=t,h(t,_,e),e},s=function(t){return u(t,_)?t[_]:{}},n=function(t){return u(t,_)}}t.exports={set:i,get:s,has:n,enforce:function(t){return n(t)?s(t):i(t,{})},getterFor:function(t){return function(e){var r;if(!c(e)||(r=s(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return r}}}},1793:(t,e,r)=>{"use strict";var i=r(5807);t.exports=Array.isArray||function(t){return"Array"===i(t)}},2250:t=>{"use strict";var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},5468:(t,e,r)=>{"use strict";var i=r(1907),s=r(8828),n=r(2250),o=r(3948),a=r(5582),c=r(2647),h=function(){},u=a("Reflect","construct"),l=/^\s*(?:class|function)\b/,d=i(l.exec),f=!l.test(h),p=function(t){if(!n(t))return!1;try{return u(h,[],t),!0}catch(t){return!1}},g=function(t){if(!n(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!d(l,c(t))}catch(t){return!0}};g.sham=!0,t.exports=!u||s((function(){var t;return p(p.call)||!p(Object)||!p((function(){t=!0}))||t}))?g:p},7463:(t,e,r)=>{"use strict";var i=r(8828),s=r(2250),n=/#|\.prototype\./,o=function(t,e){var r=c[a(t)];return r===u||r!==h&&(s(e)?i(e):!!e)},a=o.normalize=function(t){return String(t).replace(n,".").toLowerCase()},c=o.data={},h=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},7136:t=>{"use strict";t.exports=function(t){return null==t}},6285:(t,e,r)=>{"use strict";var i=r(2250);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},4018:(t,e,r)=>{"use strict";var i=r(6285);t.exports=function(t){return i(t)||null===t}},7376:t=>{"use strict";t.exports=!0},5594:(t,e,r)=>{"use strict";var i=r(5582),s=r(2250),n=r(8280),o=r(1175),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return s(e)&&n(e.prototype,a(t))}},7181:(t,e,r)=>{"use strict";var i=r(5116).IteratorPrototype,s=r(8075),n=r(5817),o=r(4840),a=r(3742),c=function(){return this};t.exports=function(t,e,r,h){var u=e+" Iterator";return t.prototype=s(i,{next:n(+!h,r)}),o(t,u,!1,!0),a[u]=c,t}},183:(t,e,r)=>{"use strict";var i=r(1091),s=r(3930),n=r(7376),o=r(6833),a=r(2250),c=r(7181),h=r(5972),u=r(9192),l=r(4840),d=r(1626),f=r(8055),p=r(6264),g=r(3742),v=r(5116),m=o.PROPER,_=o.CONFIGURABLE,y=v.IteratorPrototype,w=v.BUGGY_SAFARI_ITERATORS,S=p("iterator"),x="keys",b="values",P="entries",O=function(){return this};t.exports=function(t,e,r,o,p,v,R){c(r,e,o);var M,k,C,I=function(t){if(t===p&&D)return D;if(!w&&t&&t in W)return W[t];switch(t){case x:case b:case P:return function(){return new r(this,t)}}return function(){return new r(this)}},T=e+" Iterator",E=!1,W=t.prototype,F=W[S]||W["@@iterator"]||p&&W[p],D=!w&&F||I(p),A="Array"===e&&W.entries||F;if(A&&(M=h(A.call(new t)))!==Object.prototype&&M.next&&(n||h(M)===y||(u?u(M,y):a(M[S])||f(M,S,O)),l(M,T,!0,!0),n&&(g[T]=O)),m&&p===b&&F&&F.name!==b&&(!n&&_?d(W,"name",b):(E=!0,D=function(){return s(F,this)})),p)if(k={values:I(b),keys:v?D:I(x),entries:I(P)},R)for(C in k)(w||E||!(C in W))&&f(W,C,k[C]);else i({target:e,proto:!0,forced:w||E},k);return n&&!R||W[S]===D||f(W,S,D,{name:p}),g[e]=D,k}},5116:(t,e,r)=>{"use strict";var i,s,n,o=r(8828),a=r(2250),c=r(6285),h=r(8075),u=r(5972),l=r(8055),d=r(6264),f=r(7376),p=d("iterator"),g=!1;[].keys&&("next"in(n=[].keys())?(s=u(u(n)))!==Object.prototype&&(i=s):g=!0),!c(i)||o((function(){var t={};return i[p].call(t)!==t}))?i={}:f&&(i=h(i)),a(i[p])||l(i,p,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:g}},3742:t=>{"use strict";t.exports={}},575:(t,e,r)=>{"use strict";var i=r(3121);t.exports=function(t){return i(t.length)}},1176:t=>{"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?r:e)(i)}},8075:(t,e,r)=>{"use strict";var i,s=r(6624),n=r(2220),o=r(376),a=r(8530),c=r(2416),h=r(9552),u=r(2522),l="prototype",d="script",f=u("IE_PROTO"),p=function(){},g=function(t){return"<"+d+">"+t+"</"+d+">"},v=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},m=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}var t,e,r;m="undefined"!=typeof document?document.domain&&i?v(i):(e=h("iframe"),r="java"+d+":",e.style.display="none",c.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(g("document.F=Object")),t.close(),t.F):v(i);for(var s=o.length;s--;)delete m[l][o[s]];return m()};a[f]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(p[l]=s(t),r=new p,p[l]=null,r[f]=t):r=m(),void 0===e?r:n.f(r,e)}},2220:(t,e,r)=>{"use strict";var i=r(9447),s=r(8661),n=r(4284),o=r(6624),a=r(7374),c=r(2875);e.f=i&&!s?Object.defineProperties:function(t,e){o(t);for(var r,i=a(e),s=c(e),h=s.length,u=0;h>u;)n.f(t,r=s[u++],i[r]);return t}},4284:(t,e,r)=>{"use strict";var i=r(9447),s=r(3648),n=r(8661),o=r(6624),a=r(470),c=TypeError,h=Object.defineProperty,u=Object.getOwnPropertyDescriptor,l="enumerable",d="configurable",f="writable";e.f=i?n?function(t,e,r){if(o(t),e=a(e),o(r),"function"==typeof t&&"prototype"===e&&"value"in r&&f in r&&!r[f]){var i=u(t,e);i&&i[f]&&(t[e]=r.value,r={configurable:d in r?r[d]:i[d],enumerable:l in r?r[l]:i[l],writable:!1})}return h(t,e,r)}:h:function(t,e,r){if(o(t),e=a(e),o(r),s)try{return h(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},3846:(t,e,r)=>{"use strict";var i=r(9447),s=r(3930),n=r(2574),o=r(5817),a=r(7374),c=r(470),h=r(9724),u=r(3648),l=Object.getOwnPropertyDescriptor;e.f=i?l:function(t,e){if(t=a(t),e=c(e),u)try{return l(t,e)}catch(t){}if(h(t,e))return o(!s(n.f,t,e),t[e])}},5407:(t,e,r)=>{"use strict";var i=r(5807),s=r(7374),n=r(4443).f,o=r(3427),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"Window"===i(t)?function(t){try{return n(t)}catch(t){return o(a)}}(t):n(s(t))}},4443:(t,e,r)=>{"use strict";var i=r(3045),s=r(376).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,s)}},7170:(t,e)=>{"use strict";e.f=Object.getOwnPropertySymbols},5972:(t,e,r)=>{"use strict";var i=r(9724),s=r(2250),n=r(9298),o=r(2522),a=r(7382),c=o("IE_PROTO"),h=Object,u=h.prototype;t.exports=a?h.getPrototypeOf:function(t){var e=n(t);if(i(e,c))return e[c];var r=e.constructor;return s(r)&&e instanceof r?r.prototype:e instanceof h?u:null}},8280:(t,e,r)=>{"use strict";var i=r(1907);t.exports=i({}.isPrototypeOf)},3045:(t,e,r)=>{"use strict";var i=r(1907),s=r(9724),n=r(7374),o=r(4436).indexOf,a=r(8530),c=i([].push);t.exports=function(t,e){var r,i=n(t),h=0,u=[];for(r in i)!s(a,r)&&s(i,r)&&c(u,r);for(;e.length>h;)s(i,r=e[h++])&&(~o(u,r)||c(u,r));return u}},2875:(t,e,r)=>{"use strict";var i=r(3045),s=r(376);t.exports=Object.keys||function(t){return i(t,s)}},2574:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!r.call({1:2},1);e.f=s?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},9192:(t,e,r)=>{"use strict";var i=r(1871),s=r(6285),n=r(4239),o=r(43);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=i(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,i){return n(r),o(i),s(r)?(e?t(r,i):r.__proto__=i,r):r}}():void 0)},4878:(t,e,r)=>{"use strict";var i=r(2623),s=r(3948);t.exports=i?{}.toString:function(){return"[object "+s(this)+"]"}},581:(t,e,r)=>{"use strict";var i=r(3930),s=r(2250),n=r(6285),o=TypeError;t.exports=function(t,e){var r,a;if("string"===e&&s(r=t.toString)&&!n(a=i(r,t)))return a;if(s(r=t.valueOf)&&!n(a=i(r,t)))return a;if("string"!==e&&s(r=t.toString)&&!n(a=i(r,t)))return a;throw new o("Can't convert object to primitive value")}},2046:t=>{"use strict";t.exports={}},4239:(t,e,r)=>{"use strict";var i=r(7136),s=TypeError;t.exports=function(t){if(i(t))throw new s("Can't call method on "+t);return t}},4840:(t,e,r)=>{"use strict";var i=r(2623),s=r(4284).f,n=r(1626),o=r(9724),a=r(4878),c=r(6264)("toStringTag");t.exports=function(t,e,r,h){var u=r?t:t&&t.prototype;u&&(o(u,c)||s(u,c,{configurable:!0,value:e}),h&&!i&&n(u,"toString",a))}},2522:(t,e,r)=>{"use strict";var i=r(5816),s=r(6499),n=i("keys");t.exports=function(t){return n[t]||(n[t]=s(t))}},6128:(t,e,r)=>{"use strict";var i=r(7376),s=r(5951),n=r(2532),o="__core-js_shared__",a=t.exports=s[o]||n(o,{});(a.versions||(a.versions=[])).push({version:"3.39.0",mode:i?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5816:(t,e,r)=>{"use strict";var i=r(6128);t.exports=function(t,e){return i[t]||(i[t]=e||{})}},1470:(t,e,r)=>{"use strict";var i=r(1907),s=r(5482),n=r(160),o=r(4239),a=i("".charAt),c=i("".charCodeAt),h=i("".slice),u=function(t){return function(e,r){var i,u,l=n(o(e)),d=s(r),f=l.length;return d<0||d>=f?t?"":void 0:(i=c(l,d))<55296||i>56319||d+1===f||(u=c(l,d+1))<56320||u>57343?t?a(l,d):i:t?h(l,d,d+2):u-56320+(i-55296<<10)+65536}};t.exports={codeAt:u(!1),charAt:u(!0)}},9846:(t,e,r)=>{"use strict";var i=r(798),s=r(8828),n=r(5951).String;t.exports=!!Object.getOwnPropertySymbols&&!s((function(){var t=Symbol("symbol detection");return!n(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},3467:(t,e,r)=>{"use strict";var i=r(3930),s=r(5582),n=r(6264),o=r(8055);t.exports=function(){var t=s("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,a=n("toPrimitive");e&&!e[a]&&o(e,a,(function(t){return i(r,this)}),{arity:1})}},2595:(t,e,r)=>{"use strict";var i=r(5582),s=r(1907),n=i("Symbol"),o=n.keyFor,a=s(n.prototype.valueOf);t.exports=n.isRegisteredSymbol||function(t){try{return void 0!==o(a(t))}catch(t){return!1}}},9197:(t,e,r)=>{"use strict";for(var i=r(5816),s=r(5582),n=r(1907),o=r(5594),a=r(6264),c=s("Symbol"),h=c.isWellKnownSymbol,u=s("Object","getOwnPropertyNames"),l=n(c.prototype.valueOf),d=i("wks"),f=0,p=u(c),g=p.length;f<g;f++)try{var v=p[f];o(c[v])&&a(v)}catch(t){}t.exports=function(t){if(h&&h(t))return!0;try{for(var e=l(t),r=0,i=u(d),s=i.length;r<s;r++)if(d[i[r]]==e)return!0}catch(t){}return!1}},4411:(t,e,r)=>{"use strict";var i=r(9846);t.exports=i&&!!Symbol.for&&!!Symbol.keyFor},4849:(t,e,r)=>{"use strict";var i=r(5482),s=Math.max,n=Math.min;t.exports=function(t,e){var r=i(t);return r<0?s(r+e,0):n(r,e)}},7374:(t,e,r)=>{"use strict";var i=r(6946),s=r(4239);t.exports=function(t){return i(s(t))}},5482:(t,e,r)=>{"use strict";var i=r(1176);t.exports=function(t){var e=+t;return e!=e||0===e?0:i(e)}},3121:(t,e,r)=>{"use strict";var i=r(5482),s=Math.min;t.exports=function(t){var e=i(t);return e>0?s(e,9007199254740991):0}},9298:(t,e,r)=>{"use strict";var i=r(4239),s=Object;t.exports=function(t){return s(i(t))}},6028:(t,e,r)=>{"use strict";var i=r(3930),s=r(6285),n=r(5594),o=r(9367),a=r(581),c=r(6264),h=TypeError,u=c("toPrimitive");t.exports=function(t,e){if(!s(t)||n(t))return t;var r,c=o(t,u);if(c){if(void 0===e&&(e="default"),r=i(c,t,e),!s(r)||n(r))return r;throw new h("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},470:(t,e,r)=>{"use strict";var i=r(6028),s=r(5594);t.exports=function(t){var e=i(t,"string");return s(e)?e:e+""}},2623:(t,e,r)=>{"use strict";var i={};i[r(6264)("toStringTag")]="z",t.exports="[object z]"===String(i)},160:(t,e,r)=>{"use strict";var i=r(3948),s=String;t.exports=function(t){if("Symbol"===i(t))throw new TypeError("Cannot convert a Symbol value to a string");return s(t)}},4640:t=>{"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6499:(t,e,r)=>{"use strict";var i=r(1907),s=0,n=Math.random(),o=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++s+n,36)}},1175:(t,e,r)=>{"use strict";var i=r(9846);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8661:(t,e,r)=>{"use strict";var i=r(9447),s=r(8828);t.exports=i&&s((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},551:(t,e,r)=>{"use strict";var i=r(5951),s=r(2250),n=i.WeakMap;t.exports=s(n)&&/native code/.test(String(n))},366:(t,e,r)=>{"use strict";var i=r(2046),s=r(9724),n=r(560),o=r(4284).f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});s(e,t)||o(e,t,{value:n.f(t)})}},560:(t,e,r)=>{"use strict";var i=r(6264);e.f=i},6264:(t,e,r)=>{"use strict";var i=r(5951),s=r(5816),n=r(9724),o=r(6499),a=r(9846),c=r(1175),h=i.Symbol,u=s("wks"),l=c?h.for||h:h&&h.withoutSetter||o;t.exports=function(t){return n(u,t)||(u[t]=a&&n(h,t)?h[t]:l("Symbol."+t)),u[t]}},8545:(t,e,r)=>{"use strict";var i=r(1091),s=r(8828),n=r(1793),o=r(6285),a=r(9298),c=r(575),h=r(8024),u=r(5543),l=r(6968),d=r(7171),f=r(6264),p=r(798),g=f("isConcatSpreadable"),v=p>=51||!s((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),m=function(t){if(!o(t))return!1;var e=t[g];return void 0!==e?!!e:n(t)};i({target:"Array",proto:!0,arity:1,forced:!v||!d("concat")},{concat:function(t){var e,r,i,s,n,o=a(this),d=l(o,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(m(n=-1===e?o:arguments[e]))for(s=c(n),h(f+s),r=0;r<s;r++,f++)r in n&&u(d,f,n[r]);else h(f+1),u(d,f++,n);return d.length=f,d}})},9363:(t,e,r)=>{"use strict";var i=r(7374),s=r(2156),n=r(3742),o=r(4932),a=r(4284).f,c=r(183),h=r(9550),u=r(7376),l=r(9447),d="Array Iterator",f=o.set,p=o.getterFor(d);t.exports=c(Array,"Array",(function(t,e){f(this,{type:d,target:i(t),index:0,kind:e})}),(function(){var t=p(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,h(void 0,!0);switch(t.kind){case"keys":return h(r,!1);case"values":return h(e[r],!1)}return h([r,e[r]],!1)}),"values");var g=n.Arguments=n.Array;if(s("keys"),s("values"),s("entries"),!u&&l&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(t){}},8537:()=>{},9721:(t,e,r)=>{"use strict";var i=r(1091),s=r(5582),n=r(6024),o=r(3930),a=r(1907),c=r(8828),h=r(2250),u=r(5594),l=r(3427),d=r(6656),f=r(9846),p=String,g=s("JSON","stringify"),v=a(/./.exec),m=a("".charAt),_=a("".charCodeAt),y=a("".replace),w=a(1..toString),S=/[\uD800-\uDFFF]/g,x=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,P=!f||c((function(){var t=s("Symbol")("stringify detection");return"[null]"!==g([t])||"{}"!==g({a:t})||"{}"!==g(Object(t))})),O=c((function(){return'"\\udf06\\ud834"'!==g("\udf06\ud834")||'"\\udead"'!==g("\udead")})),R=function(t,e){var r=l(arguments),i=d(e);if(h(i)||void 0!==t&&!u(t))return r[1]=function(t,e){if(h(i)&&(e=o(i,this,p(t),e)),!u(e))return e},n(g,null,r)},M=function(t,e,r){var i=m(r,e-1),s=m(r,e+1);return v(x,t)&&!v(b,s)||v(b,t)&&!v(x,i)?"\\u"+w(_(t,0),16):t};g&&i({target:"JSON",stat:!0,arity:3,forced:P||O},{stringify:function(t,e,r){var i=l(arguments),s=n(P?R:g,null,i);return O&&"string"==typeof s?y(s,S,M):s}})},7024:(t,e,r)=>{"use strict";var i=r(5951);r(4840)(i.JSON,"JSON",!0)},8172:()=>{},6750:(t,e,r)=>{"use strict";var i=r(1091),s=r(9447),n=r(4284).f;i({target:"Object",stat:!0,forced:Object.defineProperty!==n,sham:!s},{defineProperty:n})},5264:(t,e,r)=>{"use strict";var i=r(1091),s=r(9846),n=r(8828),o=r(7170),a=r(9298);i({target:"Object",stat:!0,forced:!s||n((function(){o.f(1)}))},{getOwnPropertySymbols:function(t){var e=o.f;return e?e(a(t)):[]}})},3643:()=>{},5205:()=>{},7057:(t,e,r)=>{"use strict";var i=r(1470).charAt,s=r(160),n=r(4932),o=r(183),a=r(9550),c="String Iterator",h=n.set,u=n.getterFor(c);o(String,"String",(function(t){h(this,{type:c,string:s(t),index:0})}),(function(){var t,e=u(this),r=e.string,s=e.index;return s>=r.length?a(void 0,!0):(t=i(r,s),e.index+=t.length,a(t,!1))}))},3997:(t,e,r)=>{"use strict";r(366)("asyncIterator")},3674:(t,e,r)=>{"use strict";var i=r(1091),s=r(5951),n=r(3930),o=r(1907),a=r(7376),c=r(9447),h=r(9846),u=r(8828),l=r(9724),d=r(8280),f=r(6624),p=r(7374),g=r(470),v=r(160),m=r(5817),_=r(8075),y=r(2875),w=r(4443),S=r(5407),x=r(7170),b=r(3846),P=r(4284),O=r(2220),R=r(2574),M=r(8055),k=r(9251),C=r(5816),I=r(2522),T=r(8530),E=r(6499),W=r(6264),F=r(560),D=r(366),A=r(3467),L=r(4840),j=r(4932),N=r(726).forEach,z=I("hidden"),V="Symbol",G="prototype",H=j.set,U=j.getterFor(V),B=Object[G],q=s.Symbol,$=q&&q[G],Y=s.RangeError,K=s.TypeError,J=s.QObject,X=b.f,Q=P.f,Z=S.f,tt=R.f,et=o([].push),rt=C("symbols"),it=C("op-symbols"),st=C("wks"),nt=!J||!J[G]||!J[G].findChild,ot=function(t,e,r){var i=X(B,e);i&&delete B[e],Q(t,e,r),i&&t!==B&&Q(B,e,i)},at=c&&u((function(){return 7!==_(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?ot:Q,ct=function(t,e){var r=rt[t]=_($);return H(r,{type:V,tag:t,description:e}),c||(r.description=e),r},ht=function(t,e,r){t===B&&ht(it,e,r),f(t);var i=g(e);return f(r),l(rt,i)?(r.enumerable?(l(t,z)&&t[z][i]&&(t[z][i]=!1),r=_(r,{enumerable:m(0,!1)})):(l(t,z)||Q(t,z,m(1,_(null))),t[z][i]=!0),at(t,i,r)):Q(t,i,r)},ut=function(t,e){f(t);var r=p(e),i=y(r).concat(pt(r));return N(i,(function(e){c&&!n(lt,r,e)||ht(t,e,r[e])})),t},lt=function(t){var e=g(t),r=n(tt,this,e);return!(this===B&&l(rt,e)&&!l(it,e))&&(!(r||!l(this,e)||!l(rt,e)||l(this,z)&&this[z][e])||r)},dt=function(t,e){var r=p(t),i=g(e);if(r!==B||!l(rt,i)||l(it,i)){var s=X(r,i);return!s||!l(rt,i)||l(r,z)&&r[z][i]||(s.enumerable=!0),s}},ft=function(t){var e=Z(p(t)),r=[];return N(e,(function(t){l(rt,t)||l(T,t)||et(r,t)})),r},pt=function(t){var e=t===B,r=Z(e?it:p(t)),i=[];return N(r,(function(t){!l(rt,t)||e&&!l(B,t)||et(i,rt[t])})),i};h||(M($=(q=function(){if(d($,this))throw new K("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,e=E(t),r=function(t){var i=void 0===this?s:this;i===B&&n(r,it,t),l(i,z)&&l(i[z],e)&&(i[z][e]=!1);var o=m(1,t);try{at(i,e,o)}catch(t){if(!(t instanceof Y))throw t;ot(i,e,o)}};return c&&nt&&at(B,e,{configurable:!0,set:r}),ct(e,t)})[G],"toString",(function(){return U(this).tag})),M(q,"withoutSetter",(function(t){return ct(E(t),t)})),R.f=lt,P.f=ht,O.f=ut,b.f=dt,w.f=S.f=ft,x.f=pt,F.f=function(t){return ct(W(t),t)},c&&(k($,"description",{configurable:!0,get:function(){return U(this).description}}),a||M(B,"propertyIsEnumerable",lt,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!h,sham:!h},{Symbol:q}),N(y(st),(function(t){D(t)})),i({target:V,stat:!0,forced:!h},{useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),i({target:"Object",stat:!0,forced:!h,sham:!c},{create:function(t,e){return void 0===e?_(t):ut(_(t),e)},defineProperty:ht,defineProperties:ut,getOwnPropertyDescriptor:dt}),i({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:ft}),A(),L(q,V),T[z]=!0},5084:()=>{},3313:(t,e,r)=>{"use strict";var i=r(1091),s=r(5582),n=r(9724),o=r(160),a=r(5816),c=r(4411),h=a("string-to-symbol-registry"),u=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=o(t);if(n(h,e))return h[e];var r=s("Symbol")(e);return h[e]=r,u[r]=e,r}})},2596:(t,e,r)=>{"use strict";r(366)("hasInstance")},5721:(t,e,r)=>{"use strict";r(366)("isConcatSpreadable")},4954:(t,e,r)=>{"use strict";r(366)("iterator")},4452:(t,e,r)=>{"use strict";r(3674),r(3313),r(751),r(9721),r(5264)},751:(t,e,r)=>{"use strict";var i=r(1091),s=r(9724),n=r(5594),o=r(4640),a=r(5816),c=r(4411),h=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!n(t))throw new TypeError(o(t)+" is not a symbol");if(s(h,t))return h[t]}})},3377:(t,e,r)=>{"use strict";r(366)("matchAll")},4123:(t,e,r)=>{"use strict";r(366)("match")},2230:(t,e,r)=>{"use strict";r(366)("replace")},5344:(t,e,r)=>{"use strict";r(366)("search")},1660:(t,e,r)=>{"use strict";r(366)("species")},4610:(t,e,r)=>{"use strict";r(366)("split")},3669:(t,e,r)=>{"use strict";var i=r(366),s=r(3467);i("toPrimitive"),s()},4810:(t,e,r)=>{"use strict";var i=r(5582),s=r(366),n=r(4840);s("toStringTag"),n(i("Symbol"),"Symbol")},3325:(t,e,r)=>{"use strict";r(366)("unscopables")},768:(t,e,r)=>{"use strict";var i=r(6264),s=r(4284).f,n=i("metadata"),o=Function.prototype;void 0===o[n]&&s(o,n,{value:null})},8549:(t,e,r)=>{"use strict";r(366)("asyncDispose")},1697:(t,e,r)=>{"use strict";r(366)("customMatcher")},7152:(t,e,r)=>{"use strict";r(366)("dispose")},3939:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0},{isRegisteredSymbol:r(2595)})},3422:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:r(2595)})},1785:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:r(9197)})},36:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:r(9197)})},8703:(t,e,r)=>{"use strict";r(366)("matcher")},6878:(t,e,r)=>{"use strict";r(366)("metadataKey")},1372:(t,e,r)=>{"use strict";r(366)("metadata")},4664:(t,e,r)=>{"use strict";r(366)("observable")},9671:(t,e,r)=>{"use strict";r(366)("patternMatch")},359:(t,e,r)=>{"use strict";r(366)("replaceAll")},2560:(t,e,r)=>{"use strict";r(9363);var i=r(9287),s=r(5951),n=r(4840),o=r(3742);for(var a in i)n(s[a],a),o[a]=o.Array},8251:(t,e,r)=>{"use strict";var i=r(1926);t.exports=i},4139:(t,e,r)=>{"use strict";var i=r(3842);r(2560),t.exports=i},7045:(t,e,r)=>{"use strict";var i=r(1730);r(2560),t.exports=i},70:(t,e,r)=>{"use strict";var i=r(1661);t.exports=i}},e={};function r(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,r),n.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";let t;const e=()=>t,i=function(t,r=""){if(t)return;const i=new Error(r);e().tracing.Log_Error(`Assert: ${r}`,i)},s=function(t){const r=new Error(t);e().tracing.Log_Error(`AssertWithFailed: ${t}`,r)};class n{constructor(t=0){this._unusedIds=[],this._nextId=t}generateNextId(){let t;return this._unusedIds.length>0?t=this._unusedIds.shift():(t=this._nextId,this._nextId+=1),t}release(t){this._unusedIds.push(t)}}class o{constructor(t){this._onmessage=null,this._messager=t}set onmessage(t){var e,r;null!==this._onmessage&&this._messager.removeEventListener("message",this._onmessage),this._messager.addEventListener("message",t),null===this._onmessage&&(null===(r=(e=this._messager).start)||void 0===r||r.call(e)),this._onmessage=t}postMessage(t,e){this._messager.postMessage(t,e)}close(){var t,e;null!==this._onmessage&&(this._messager.removeEventListener("message",this._onmessage),this._onmessage=null),null===(e=(t=this._messager).close)||void 0===e||e.call(t)}}class a{constructor(){this._connection=null}set connection(t){this._connection=t}get connection(){return i(null!==this._connection),this._connection}}class c{constructor(t,e,r,i){this._idGenerator=new n(2),this._invokeHandlers={},this._invokeResults=new Set,this._resolveInvokeResultsSended=null,this._responseHandlers=new Map,this._notifyHandlers={},this._transferObjs=[],this._closed=!1,this._onClose=null,this._messager=new o(t),this._messager.onmessage=this._handleMessage.bind(this),this._logErrorFn=i,e&&(this.localPeerObject=e),r&&(this._proxyFuncs=r);const s=new Promise((t=>{this._resolveCloseSent=t})),a=new Promise((t=>{this._resolveCloseReceived=t}));Promise.all([s,a]).then((()=>{this._messager.close(),this._messager=null}))}set localPeerObject(t){let e;if(this._invokeHandlers={},t instanceof a){const r=Object.getPrototypeOf(t);e=Object.getOwnPropertyNames(r)}else e=Object.getOwnPropertyNames(t);const r=e.filter((e=>"function"==typeof t[e]&&"constructor"!==e&&!e.startsWith("_")));for(const e of r)this.expose(e,((...r)=>t[e](...r)));this._localPeerObject=t,t instanceof a&&(t.connection=this)}get localPeerObject(){return this._localPeerObject}get remotePeerProxy(){if(this._remotePeerProxy)return this._remotePeerProxy;const t=new Map;return this._remotePeerProxy=new Proxy({},{get:(e,r,i)=>{var s;let n=null===(s=this._proxyFuncs)||void 0===s?void 0:s[r];return n||(n=t.get(r),n||(n=(...t)=>this.invoke(r,...t),t.set(r,n),n))}}),this._remotePeerProxy}_logError(t,r){this._logErrorFn?this._logErrorFn(t,r):e().tracing.Log_Error(t,r)}transfer(t){return this._transferObjs.push(t),t}expose(t,e){this._invokeHandlers[t]=e}on(t,e){this._notifyHandlers[t]=e}notify(t,...e){this._postRequest(1,t,e)}invoke(t,...e){const r=this._idGenerator.generateNextId(),i=new Promise(((t,e)=>{this._responseHandlers.set(r,{resolve:t,reject:e})}));return this._postRequest(r,t,e),i}_postRequest(t,r,i){if(this._closed)throw new Error("Can not postRequest after closed!!");try{this._messager.postMessage({id:t,name:r,args:i},this._transferObjs)}catch(t){e().tracing.Log_Error("[rpc] Error in postRequest",t)}this._transferObjs=[]}_postReponse(t,e){if(this._closed)throw new Error("Can not postReponse after closed!!");this._messager.postMessage({id:0,resId:t,response:e},this._transferObjs),this._transferObjs=[]}_serializeError(t){return t instanceof Error?{message:t.message,name:t.name,stack:t.stack}:t}_handleMessage(t){const e=t.data;if("id"in e)try{if(e.id<0)-1===e.id?(this._closePeerIfNeeded(e.reason),this._resolveCloseReceived()):s();else{if(0===e.id){const t=this._responseHandlers.get(e.resId);if(!t)return void this._logError(`DualRPC.handleMessage: ${e.resId} not found!`);const r=e.response;return"ret"in r?t.resolve(r.ret):"err"in r?(t.reject(r.err),this._logError(`DualRPC.handleMessage err: ${r.err}`)):s("Invalid Response"),this._responseHandlers.delete(e.resId),void this._idGenerator.release(e.resId)}if(1===e.id){try{const t=this._notifyHandlers[e.name];t&&t(...e.args)}catch(t){}return}{if(i(e.id>1),!(e.name in this._invokeHandlers))return void this._logError(`DualRPC.handleMessage: ${e.name} not registered!`);let t,r;try{const r=this._invokeHandlers[e.name];t=r(...e.args)}catch(t){r=t}if(r)return void this._postReponse(e.id,{err:this._serializeError(r)});if(!(t instanceof Promise)){try{this._postReponse(e.id,{ret:t})}catch(t){this._postReponse(e.id,{err:this._serializeError(t)})}return}this._invokeResults.add(t),t.then((t=>{this._postReponse(e.id,{ret:t})})).catch((t=>{this._postReponse(e.id,{err:this._serializeError(t)})})).finally((()=>{this._invokeResults.delete(t),this._resolveInvokeResultsSended&&0===this._invokeResults.size&&this._resolveInvokeResultsSended()}))}}}catch(t){this._logError("DualRPC.handleMessage err!!",t)}}_closePeerIfNeeded(t){this._closed||(this._closed=!0,this._onClose&&this._onClose(t),0===this._invokeResults.size?(this._messager.postMessage({id:-1,reason:t},[]),setTimeout((()=>{this._resolveCloseSent()}),10)):new Promise((t=>{this._resolveInvokeResultsSended=t})).then((()=>{this._messager.postMessage({id:-1,reason:t},[])})).then((()=>{setTimeout((()=>{this._resolveCloseSent()}),10)})))}close(t){this._closePeerIfNeeded(t)}set onClose(t){this._onClose=t}}class h extends a{}const u=new class{constructor(){this._connection=null}setRegistryServicePort(t){this._connection=new c(t)}transfer(t){return this._connection.transfer(t)}registerService(t,e,r){return this._connection.invoke("registerService",t,e,r)}unregisterService(t,e){this._connection.invoke("unregisterService",t,e)}findService(t){return this._connection.invoke("findService",t)}requestService(t,e,r){return this._connection.invoke("requestService",t,e,r)}acquireService(t,e){return r=this,i=void 0,o=function*(){const r=yield u.findService(t);let i;e&&e.selectService?i=e.selectService(r):1===r.length?i=r[0].serviceId:s("AcquireService Error: select service failed!");const n=yield u.requestService(t,i,e?e.serviceParams:void 0);return new c(n)},new((n=void 0)||(n=Promise))((function(t,e){function s(t){try{c(o.next(t))}catch(t){e(t)}}function a(t){try{c(o.throw(t))}catch(t){e(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(s,a)}c((o=o.apply(r,i||[])).next())}));var r,i,n,o}};class l{constructor(t,e){this._connection=null,this._services=[],this._registerPromise=null,this._serviceName=t,this._serviceCtor=e}register(t){if(null!==this._registerPromise)return;const e=new MessageChannel;this._connection=new c(e.port1,{requestPort:t=>{const e=this.accquirePort(t);return this._connection.transfer(e)}}),this._registerPromise=u.registerService(this._serviceName,u.transfer(e.port2),t)}unregister(){if(null===this._registerPromise)return;const t=this._connection;this._registerPromise.then((e=>{u.unregisterService(this._serviceName,e),t.close()})),this._connection=null,this._registerPromise=null}registerPromise(){return t=this,e=void 0,i=function*(){return this._registerPromise.then((t=>t>=0))},new((r=void 0)||(r=Promise))((function(s,n){function o(t){try{c(i.next(t))}catch(t){n(t)}}function a(t){try{c(i.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}));var t,e,r,i}accquirePort(t){const e=new MessageChannel,r=new this._serviceCtor(t);return new c(e.port1,r).onClose=()=>{this._services.splice(this._services.indexOf(r),1),r.closeService()},this._services.push(r),e.port2}close(){this.unregister();for(const t of this._services)t.closeService(),t.connection.close();this._services=[]}}const d=class{_drawWatermarkWithShadow(t){let{ctx:e,textPos:r,opacity:i,name:s}=t;e.fillStyle="rgba(0, 0, 0, ".concat(i,")"),e.fillText(s,r.x,r.y),e.fillStyle="rgba(255, 255, 255, ".concat(i,")"),e.fillText(s,r.x+1,r.y+1)}_getTransformInfo(t){let e,{canvas:r,position:i}=t;if(1===i)e={x:r.width/2,y:0,rateRadio:0,maxWidth:r.width};else if(2===i)e={x:r.width/2,y:r.height,rateRadio:0,maxWidth:r.width};else if(4===i)e={x:0,y:r.height/2,rateRadio:Math.PI/2,maxWidth:r.height};else if(8===i)e={x:r.width,y:r.height/2,rateRadio:-Math.PI/2,maxWidth:r.height};else{const t=-21*Math.PI/180;e={x:r.width/2,y:r.height/2,rateRadio:t,maxWidth:Math.min(r.width/Math.cos(t),-r.height/Math.sin(t))}}return e.maxWidth>100&&(e.maxWidth-=50),e}_calcTextPos(t){let{position:e,ctx:r,name:i,textWidth:s}=t;const n=this._getPaddingWidth({ctx:r,position:e,name:i});return 1===e?{x:-s.width/2,y:n}:2===e||4===e||8===e?{x:-s.width/2,y:-n}:{x:-s.width/2,y:r.measureText(i[0]).width/2}}_getPaddingWidth(t){let{ctx:e,position:r,name:i}=t;return[1,2,4,8].includes(r)?32:e.measureText(i[0]).width}_setBaseLine(t){let{ctx:e,position:r}=t;e.textBaseline=1===r?"top":2===r||4===r||8===r?"bottom":"middle"}Get_WaterMarkRGBA(t){let{canvas:e,name:r,width:i,height:s,opacity:n=.15,position:o,convertToDataUrl:a=!1,transferToImage:c=!1}=t;if(!r||!i||!s)return;n=n||.15,i*=1,s*=1,e.width=i,e.height=s;let h=this._getTransformInfo({canvas:e,position:o});var u=e.getContext("2d");let l;if(u.clearRect(0,0,e.width,e.height),u.translate(h.x,h.y),u.rotate(h.rateRadio),this._setBaseLine({ctx:u,position:o}),u.lineWidth=1,u.imageSmoothingEnabled=!0,1==r.length){const t=h.maxWidth/r.length;u.font=t+"px  'Segoe UI'",l=u.measureText(r)}else{let t=16;for(u.font=t+"px  'Segoe UI'",l=u.measureText(r);l.width<h.maxWidth-2*this._getPaddingWidth({ctx:u,position:o,name:r});)t+=1,u.font=t+"px  'Segoe UI'",l=u.measureText(r);if(l.width>h.maxWidth-2*this._getPaddingWidth({ctx:u,position:o,name:r}))if(t>16)t-=1,u.font=t+"px  'Segoe UI'",l=u.measureText(r);else{const t=r;for(;r.length>5&&l.width>h.maxWidth-2*this._getPaddingWidth({ctx:u,position:o,name:r+"..."});)r=r.slice(0,r.length-1),l=u.measureText(r+"...");t!==r&&(r+="...")}}const d=this._calcTextPos({position:o,ctx:u,name:r,textWidth:l});var f;if(this._drawWatermarkWithShadow({ctx:u,name:r,opacity:n,textPos:d}),a)f=e.toDataURL();else if(c)f=e.transferToImageBitmap();else{var p=u.getImageData(0,0,u.canvas.width,u.canvas.height);f=new Uint8Array(p.data.buffer)}return u.rotate(-h.rateRadio),u.translate(-h.x,-h.y),f}Get_Repeated_WaterMarkRGBA(t){let{canvas:e,name:r,width:i,height:s,opacity:n=.15,position:o,convertToDataUrl:a=!1,transferToImage:c=!1}=t;if(!r||!i||!s)return;n=n||.15,i*=1,s*=1,e.width=i,e.height=s;const h=e.getContext("2d");h.clearRect(0,0,e.width,e.height),h.translate(i/2,s/2),h.rotate(-21*Math.PI/180),h.imageSmoothingEnabled=!0,h.font="".concat(32,"px 'Segoe UI'"),h.textBaseline="top";const u=h.measureText(r),l=.37*u.width;let d,f=0,p=-s;do{let t=f%2==0?l-i:-i;do{h.fillStyle="rgba(0, 0, 0, ".concat(n,")"),h.fillText(r,t,p),h.fillStyle="rgba(255, 255, 255, ".concat(n,")"),h.fillText(r,t+1,p+1),t+=u.width+l}while(t<i);p+=32+l,f++}while(p<s);if(a)d=e.toDataURL();else if(c)d=e.transferToImageBitmap();else{const t=h.getImageData(0,0,h.canvas.width,h.canvas.height);d=new Uint8Array(t.data.buffer)}return h.rotate(21*Math.PI/180),h.translate(-i/2,-s/2),d}};var f=r(4997),p=r(2321),g=r(2231);function v(t){return v="function"==typeof p&&"symbol"==typeof g?function(t){return typeof t}:function(t){return t&&"function"==typeof p&&t.constructor===p&&t!==p.prototype?"symbol":typeof t},v(t)}var m=r(9280);function _(t,e,r){return(e=function(t){var e=function(t){if("object"!=v(t)||!t)return t;var e=t[m];if(void 0!==e){var r=e.call(t,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:e+""}(e))in t?f(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const y=new class{constructor(){_(this,"_platformDesc",{supportGraphicsAcceleration:!1,supportVideoFrame:!1,supportMediaStreamTrackGenerator:!1,supportTransferableStream:!1,supportDrawWatermark:!1,supportVideoFrameInWorker:!1,supportVideoTrackGeneratorInWorker:!1,supportOffscreenCanvasInWorker:!1,supportImageBitmapRenderingInWorker:!1,supportTransferableTrackAcrossWork:!1,supportsRequestAnimationFrameInWork:!1}),_(this,"_inferedDesc",{supportVideoTagRenderer:!1}),_(this,"_analyzing_promise",null),_(this,"_main_analyzed",!1),_(this,"_remote_analyzed",!1),_(this,"_analyzedPromise",void 0),_(this,"_resolveAnalyzedPromise",void 0),this._analyzedPromise=new Promise(((t,e)=>{this._resolveAnalyzedPromise=t}))}init(t){this._platformDesc=t.platform,this._inferedDesc=t.infered,this._main_analyzed=!0,this._remote_analyzed=!0,this._resolveAnalyzedPromise(this._remote_analyzed)}desc(){return{platform:this._platformDesc,infered:this._inferedDesc}}analyzed(){return this._remote_analyzed}analyzedPromise(){return this._analyzedPromise}_analyzeInferredCapabilites(){this._inferedDesc.supportVideoTagRenderer=this._platformDesc.supportVideoFrame&&this._platformDesc.supportVideoFrameInWorker&&(!0===this._platformDesc.supportMediaStreamTrackGenerator&&!0===this._platformDesc.supportTransferableStream||!0===this._platformDesc.supportVideoTrackGeneratorInWorker)}analyze(t){if(this._analyzing_promise)return this._analyzing_promise;const e=t.analyzeMainCapabilites();return Object.assign(this._platformDesc,e),this._main_analyzed=!0,this._analyzing_promise=new Promise(((e,r)=>{t.analyzeRemoteCapabilities().then((t=>{Object.assign(this._platformDesc,t),this._analyzeInferredCapabilites(),this._remote_analyzed=!0,this._resolveAnalyzedPromise(this._remote_analyzed),e(!0)})).catch((t=>{this._resolveAnalyzedPromise(this._remote_analyzed),e(!1)}))})),this._analyzing_promise}supportGraphicsAcceleration(){return i(this._main_analyzed),this._platformDesc.supportGraphicsAcceleration}supportTransferableStream(){return i(this._main_analyzed),this._platformDesc.supportTransferableStream}supportDrawWatermark(){return i(this._main_analyzed),this._platformDesc.supportDrawWatermark}supportVideoTagRenderer(){return!!this._remote_analyzed&&this._inferedDesc.supportVideoTagRenderer}supportMediaStreamTrackGenerator(){return i(this._main_analyzed),this._platformDesc.supportMediaStreamTrackGenerator}supportVideoTrackGeneratorInWorker(){return!!this._remote_analyzed&&this._platformDesc.supportVideoTrackGeneratorInWorker}supportTransferableTrackAcrossWork(){return!!this._remote_analyzed&&this._platformDesc.supportTransferableTrackAcrossWork}supportsRequestAnimationFrameInWork(){return!!this._remote_analyzed&&this._platformDesc.supportsRequestAnimationFrameInWork}supportMediaStreamTrackProcessor(){return!!this._remote_analyzed&&this._platformDesc.supportMediaStreamTrackProcessor}},w=new class{constructor(){_(this,"_info",void 0),this._info={browser:{brand:"",version:"",isBlink:!1,isWebkit:!1},sysinfo:{osType:"",os:"",osVersion:""},browserVersionInfo:{ie:"",edge:"",firefox:"",opera:"",chrome:"",safari:""},isLowerPerformanceDevice:!1}}init(t){this._info=t}info(){return this._info}browserInfo(){return this._info.browser}browserVersionInfo(){return this._info.browserVersionInfo}browserName(){var t;return null===(t=this._info.browser.brand)||void 0===t?void 0:t.toLocaleLowerCase()}isChrome(){var t;return"chrome"===(null===(t=this._info.browser.brand)||void 0===t?void 0:t.toLocaleLowerCase())}isSafari(){var t;return"safari"===(null===(t=this._info.browser.brand)||void 0===t?void 0:t.toLocaleLowerCase())}isFirefox(){var t;return"firefox"===(null===(t=this._info.browser.brand)||void 0===t?void 0:t.toLocaleLowerCase())}isBlink(){return this._info.browser.isBlink}isWebkit(){return this._info.browser.isWebkit}isLowerPerformanceDevice(){return this._info.isLowerPerformanceDevice}},S={NO_CONFIG:0,FALLBACK_TO_TAG_RENDERER_ON_CHROME:1,FALLBACK_TO_TAG_RENDERER_ON_SAFARI:2,FALLBACK_TO_TAG_RENDERER_ON_FIREFOX:4,LOWER_PERFORMANCE_DEVICE:8},x={NO_CONFIG:0,TAG_RENDERER_ON_CHROME:1,TAG_RENDERER_ON_SAFARI:2,TAG_RENDERER_ON_FIREFOX:4},b=new class{constructor(){_(this,"_desc",{defaultRendererType:1,isEnableCanvasCtxOptionsOpt:!1,isEnableFallbackToTagRender:!1,isEnableWasmTagRenderer:!1,safariYuvPaddingFixVer:void 0,chromeYuvLeftTopPaddingFixVer:void 0,canUseSsrcStream:void 0,isUseSsrcStream:!1,shouldCropWasmFrameOnPosMismatch:void 0,shouldCropWasmFrameOnSizeMismatchOnly:void 0,avStreamMode:void 0,baseScriptUrl:"",cssPixelScale:1,isVideoHasWaterMark:!1,isSharingHasWaterMark:!1,videoWatermarkInfo:void 0,sharingWatermarkInfo:void 0}),_(this,"_configDone",!1),_(this,"_configDonePromise",void 0),_(this,"_resolveConfigDonePromise",void 0),this._configDonePromise=new Promise(((t,e)=>{this._resolveConfigDonePromise=t}))}_tryResetDerivedConfigIfNeeded(){this._configDone&&(this._desc.canUseSsrcStream=void 0,this._desc.shouldCropWasmFrameOnPosMismatch=void 0,this._desc.shouldCropWasmFrameOnSizeMismatchOnly=void 0)}init(t){this._desc=t,this._configDone=!0}configDone(){return this._configDone}configDonePromise(){return this._configDonePromise}markConfigDone(){this._configDone=!0,this._resolveConfigDonePromise(!0)}desc(){return this._desc}defaultRendererType(){return this._desc.defaultRendererType}setDefaultRendererType(t){this._desc.defaultRendererType=t,this._tryResetDerivedConfigIfNeeded()}isEnableCanvasCtxOptionsOpt(){return this._desc.isEnableCanvasCtxOptionsOpt}setIsEnableCanvasCtxOptionsOpt(t){this._desc.isEnableCanvasCtxOptionsOpt=t,this._tryResetDerivedConfigIfNeeded()}isEnableWasmTagRenderer(){return this._desc.isEnableWasmTagRenderer}setWasmTagRendererFlags(t){let e=!1;w.isBlink()?e=!!(t&x.TAG_RENDERER_ON_CHROME):w.isWebkit()?e=!!(t&x.TAG_RENDERER_ON_SAFARI):"firefox"===w.browserName()&&(e=!!(t&x.TAG_RENDERER_ON_FIREFOX)),this._desc.isEnableWasmTagRenderer=e,this._tryResetDerivedConfigIfNeeded()}isEnableFallbackToTagRender(){return this._desc.isEnableFallbackToTagRender}setFallbackToTagRenderFlags(t){let e=!1;w.isBlink()?e=!!(t&S.FALLBACK_TO_TAG_RENDERER_ON_CHROME):w.isWebkit()?e=!!(t&S.FALLBACK_TO_TAG_RENDERER_ON_SAFARI):"firefox"===w.browserName()&&(e=!!(t&S.FALLBACK_TO_TAG_RENDERER_ON_FIREFOX)),e||w.isLowerPerformanceDevice()&&(e=!!(t&S.LOWER_PERFORMANCE_DEVICE)),this._desc.isEnableFallbackToTagRender=e,this._tryResetDerivedConfigIfNeeded()}canUseSsrcStream(){return!!this._configDone&&(void 0!==this._desc.canUseSsrcStream?this._desc.canUseSsrcStream:y.supportVideoTagRenderer()?y.supportGraphicsAcceleration()&&!w.isLowerPerformanceDevice()||!this.isEnableFallbackToTagRender()?this.isEnableWasmTagRenderer()?(this._desc.canUseSsrcStream=!0,this._desc.canUseSsrcStream):(this._desc.canUseSsrcStream=!1,!1):(this._desc.canUseSsrcStream=!0,this._desc.canUseSsrcStream):(this._desc.canUseSsrcStream=!1,!1))}isUseSsrcStream(){return this._desc.isUseSsrcStream}setIsUseSsrcStream(t){this._desc.isUseSsrcStream=t}setSafariYuvPaddingFixVer(t){"[object String]"===Object.prototype.toString.call(t)&&(this._desc.safariYuvPaddingFixVer=t,this._tryResetDerivedConfigIfNeeded())}setChromeYuvLeftTopPaddingFixVer(t){"[object String]"===Object.prototype.toString.call(t)&&(this._desc.chromeYuvLeftTopPaddingFixVer=t,this._tryResetDerivedConfigIfNeeded())}_versionGreaterThan(t,e){const r=e.toString().split("."),i=t.toString().split("."),s=r.length,n=i.length,o=Math.min(s,n);for(let t=0;t<o;t++){const e=parseInt(r[t],10),s=parseInt(i[t],10);if(e!==s)return s>e}return n>=s}shouldCropWasmFrameOnPosMismatch(){return!!this._configDone&&(void 0!==this._desc.shouldCropWasmFrameOnPosMismatch?this._desc.shouldCropWasmFrameOnPosMismatch:this.isUseSsrcStream()?(this._desc.shouldCropWasmFrameOnPosMismatch=!0,w.isChrome()?this._desc.chromeYuvLeftTopPaddingFixVer&&this._versionGreaterThan(w.browserVersionInfo().chrome,this._desc.chromeYuvLeftTopPaddingFixVer)&&(this._desc.shouldCropWasmFrameOnPosMismatch=!1):w.isSafari()&&this._desc.safariYuvPaddingFixVer&&this._versionGreaterThan(w.browserVersionInfo().safari,this._desc.safariYuvPaddingFixVer)&&(this._desc.shouldCropWasmFrameOnPosMismatch=!1),this._desc.shouldCropWasmFrameOnPosMismatch):(this._desc.shouldCropWasmFrameOnPosMismatch=!1,!1))}shouldCropWasmFrameOnSizeMismatchOnly(){return!!this._configDone&&(void 0!==this._desc.shouldCropWasmFrameOnSizeMismatchOnly?this._desc.shouldCropWasmFrameOnSizeMismatchOnly:this.isUseSsrcStream()&&w.isWebkit()?(w.isSafari()&&this._desc.safariYuvPaddingFixVer&&this._versionGreaterThan(w.browserVersionInfo().safari,this._desc.safariYuvPaddingFixVer)?this._desc.shouldCropWasmFrameOnSizeMismatchOnly=!1:this._desc.shouldCropWasmFrameOnSizeMismatchOnly=!0,this._desc.shouldCropWasmFrameOnSizeMismatchOnly):(this._desc.shouldCropWasmFrameOnSizeMismatchOnly=!1,!1))}shouldCropWasmFrame(t,e,r){return!!this._configDone&&(t!=r.width||e!=r.height)&&(b.shouldCropWasmFrameOnSizeMismatchOnly()||b.shouldCropWasmFrameOnPosMismatch()&&(0!=r.x||0!=r.y))}getAVStreamMode(){return this._configDone?(void 0!==this._desc.avStreamMode||(y.supportTransferableStream()?this._desc.avStreamMode="writable-stream":y.supportTransferableTrackAcrossWork()?this._desc.avStreamMode="track":this._desc.avStreamMode="none"),this._desc.avStreamMode):"none"}getBaseScriptUrl(){return this._desc.baseScriptUrl}setBaseScriptUrl(t){this._desc.baseScriptUrl=t}getCssPixelScale(){return this._desc.cssPixelScale}setCssPixelScale(t){this._desc.cssPixelScale=t}isVideoHasWaterMark(){return this._desc.isVideoHasWaterMark}setIsVideoHasWaterMark(t){this._desc.isVideoHasWaterMark=t,this._tryResetDerivedConfigIfNeeded()}isSharingHasWaterMark(){return this._desc.isSharingHasWaterMark}setIsSharingHasWaterMark(t){this._desc.isSharingHasWaterMark=t,this._tryResetDerivedConfigIfNeeded()}getVideoWatermarkInfo(){return this._desc.videoWatermarkInfo}setVideoWatermarkInfo(t){this._desc.videoWatermarkInfo=t}getSharingWatermarkInfo(){return this._desc.sharingWatermarkInfo}setSharingWatermarkInfo(t){this._desc.sharingWatermarkInfo=t}},P="MEDIASDK_CACHE_INFO",O=new class{constructor(){this._highFrequencyLogs={},this.fixVersion="",this.cacheLogStack=[],this.isFlushing=!1}setInstance(t,e){this._instance=t,this.fixVersion=e}getMessageFromErrorOrEvent(t,e){let r=t;return e instanceof ErrorEvent?(e.filename&&(r+=` File: ${e.filename}`),(e.lineno||e.colno)&&(r+=` Line: ${e.lineno}:${e.colno}`),e.message&&(r+=` Message: ${e.message}`),e.error&&(r+=`\nStack: ${e.error.stack}`)):e instanceof Error?(e.message&&(r+=` Message: ${e.message}`),e.stack&&(r+=` Stack: ${e.stack}`),e.name&&(r+=` Name: ${e.name}`),e.constraint&&(r+=` Constraint: ${e.constraint}`)):e instanceof CloseEvent?(e.code&&(r+=` Code: ${e.code}`),e.reason&&(r+=` Reason: ${e.reason}`),r+=` wasClean: ${e.wasClean}`):e instanceof DOMException?(e.message&&(r+=` Message: ${e.message}`),e.name&&(r+=` Name: ${e.name}`)):r+=e?e.toString():"",r}_addCacheLog(t,e){this.cacheLogStack.length<100&&this.cacheLogStack.push({type:t,message:e})}flushCacheLog(){if(this._instance&&this.cacheLogStack.length>0&&!this.isFlushing){this.isFlushing=!0;let t="";this.cacheLogStack.forEach((e=>{let{type:r,message:{message:i="",tags:s=[]}}=e;const n=i?`${s.join("|")}:${i}|----|`:"";switch(r){case"log":this._log(i,[...s,P]);break;case"warn":case"error":case"severityerror":case"directReport":t+=n}})),t&&this._directReport(t,[P]),this.cacheLogStack=[],this.isFlushing=!1}}log(t,e=[]){this._instance?(this.flushCacheLog(),this._log(t,e)):this._addCacheLog("log",{message:t,tags:e})}warn(t,e=null,r=[]){t=this.getMessageFromErrorOrEvent(t,e),this._instance?(this.flushCacheLog(),this._warn(t,r)):this._addCacheLog("warn",{message:t,tags:r})}error(t,e=null,r=[]){var i;t=this.getMessageFromErrorOrEvent(t,e),this._highFrequencyLogs[t]?this._highFrequencyLogs[t]+=1:this._highFrequencyLogs[t]=1,!((i=this._highFrequencyLogs[t])&i-1)&&(this._instance?(this.flushCacheLog(),this._error(t,r)):this._addCacheLog("error",{message:t,tags:r}))}severityerror(t,e=[]){this._instance?(this.flushCacheLog(),this._severityerror(JSON.stringify(t),e)):this._addCacheLog("severityerror",{message:JSON.stringify(t),tags:e})}directReport(t,e=["MEDIASDK_INFO"]){var r;this._instance?(this.flushCacheLog(),null===(r=this._directReport)||void 0===r||r.call(this,t,e)):this._addCacheLog("directReport",{message:t,tags:e})}_log(t,e=[]){this._instance&&this._instance.log(t,e)}_warn(t,e=[]){this._instance&&this._instance.warn(t,e)}_error(t,e=[]){this._instance&&this._instance.error(t,[this.fixVersion,...e])}_severityerror(t,e=[]){this._instance&&this._instance.error(t,e)}_directReport(t,e=[]){var r,i;this._instance&&(null===(i=(r=this._instance).directReport)||void 0===i||i.call(r,{msg:t},e))}clearHighFrequencyLogs(){this._highFrequencyLogs={}}};new Error;const R=new Map;function M(t,e="|"){return t?t.toString().replaceAll(/[,ï¼]/g,e):""}const k="function"!=typeof importScripts;function C(t,e=null){k?O.error(t,e):I(t,e)}function I(t,e=null){var r,i;if(e instanceof Error||e instanceof ErrorEvent){const s=e;t+=" Code: "+(null==s?void 0:s.code)+" Message: "+(null==e?void 0:e.message)+" Stack: "+(null!==(i=null===(r=null==s?void 0:s.error)||void 0===r?void 0:r.stack)&&void 0!==i?i:null==s?void 0:s.stack),e=null}postMessage({status:61,errorMessage:t,errorEvent:e})}var T=function(t,e,r,i){return new(r||(r=Promise))((function(s,n){function o(t){try{c(i.next(t))}catch(t){n(t)}}function a(t){try{c(i.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const E=(t,r)=>{var i;const s=null!==(i=null==r?void 0:r.skipFrame)&&void 0!==i&&i;let n=!1,o=null;const a=[],c=e().capabilities.supportsRequestAnimationFrameInWork(),h=t.getWriter();return new WritableStream({start(){T(void 0,void 0,void 0,(function*(){const t=()=>T(void 0,void 0,void 0,(function*(){if(!n){if(s){if(o){const t=o;o=null;try{yield h.ready,yield h.write(t)}finally{t.close()}}}else for(;a.length>0;){const t=a.shift();try{yield h.ready,yield h.write(t)}finally{t.close()}}c?requestAnimationFrame(t):setTimeout(t,20)}}));c?requestAnimationFrame(t):setTimeout(t,0)}))},write(t){return T(this,void 0,void 0,(function*(){s?(o&&o.close(),o=t):a.push(t)}))},close(){n=!0,null==o||o.close(),a.forEach((t=>t.close())),a.length=0,h.close()},abort(t){n=!0,null==o||o.close(),a.forEach((t=>t.close())),a.length=0,h.abort(t)}})};const W={mgr:null,config:b,capabilities:y,userAgent:w,tracing:{add_monitor(t){!function(t){postMessage({status:35,data:t})}(t)},globaltracing_error(t,e=null){I(t,e)},Log_Error(t,e=null){C(t,e)}},graphics:{create_webgl_context_failed_monitor(t){!function(t){k?function(t,e){if(!function(t){const e=performance.now();return(!R.has(t)||e-R.get(t)>5e3)&&(R.set(t,e),!0)}(t))return;let r;try{r=M("object"==typeof e?JSON.stringify(e):e)}catch(t){r=M(e)}O.error(`NotifyUIError,event=${t},data=${r}`)}(-51,t):postMessage({status:-27,where:t})}(t)},calculateUVCoord:(t,e,r,i)=>function(t,e,r,i){if(!t||!e||!r)return null;const s=e.width/e.height;let n=e.width,o=e.height;if(e.width>t.width||e.height>t.height){const r=t.width/e.width,i=t.height/e.height,s=Math.min(r,i);n*=s,o*=s}let a=0,c=0;t.width/t.height>s?(c=Math.floor(t.height/o)*o,a=Math.floor(c*s/n)*n,a>t.width&&(a=Math.floor(t.width/n)*n,c=Math.floor(a/s/o)*o)):(a=Math.floor(t.width/n)*n,c=Math.floor(a/s/o)*o,c>t.height&&(c=Math.floor(t.height/o)*o,a=Math.floor(c*s/n)*n));let h=0,u=0,l=0,d=0,f={x:u,y:h,w:l,h:d};0==i?(h=1-(h+(o-1)/t.height),u=e.left/t.width,d=1-e.top/t.height,l=u+n/t.width,f.x=u,f.y=1-d,f.w=l,f.h=1-h):1==i?(u=1-(h+(o-1)/t.height),l=1-e.top/t.height,h=e.left/t.width,d=u+n/t.width):2==i?(h=e.top/t.height,u=e.left/t.width,d=h+(o-1)/t.height,l=u+n/t.width):3==i&&(u=e.top/t.height,l=h+(o-1)/t.height,h=e.left/t.width,d=u+n/t.width);let p=[],g=[{x:l,y:d},{x:l,y:h},{x:u,y:h},{x:l,y:d},{x:u,y:d},{x:u,y:h}];for(let t=0;t<g.length;++t){let e={u:g[t].x,v:g[t].y};p.push(e)}let v=[];for(let t=0;t<p.length;++t){let e=p[t];v.push(e.u),v.push(e.v)}return{uvCoords:v,uvRect:f}}(t,e,r,i),calculateUVCoordsForMultiView:(t,e,r,i,s,n)=>function(t,e,r,i,s,n){let o=0,a=0,c=0,h=0,u={x:a,y:o,w:c,h};if(t){const t=1==s||3==s?e.height/e.width:e.width/e.height,n=i.left||0,u=i.top||0;if(i.width/i.height>t){const e=i.height*t;o=u/r.height,a=(Math.round((i.width-e)/2)+n)/r.width,h=o+(i.height-1)/r.height,c=a+e/r.width}else{const e=i.width/t;o=(Math.round((i.height-e)/2)+u)/r.height,a=n/r.width,h=o+(e-1)/r.height,c=a+i.width/r.width}0==s?(o=1-(o+(i.height-1)/r.height),a=i.left/r.width,h=1-i.top/r.height,c=a+i.width/r.width):1==s?(a=1-(o+(i.height-1)/r.height),c=1-i.top/r.height,o=i.left/r.width,h=a+i.width/r.width):2==s?(o=i.top/r.height,a=i.left/r.width,h=o+(i.height-1)/r.height,c=a+i.width/r.width):3==s&&(a=i.top/r.height,c=o+(i.height-1)/r.height,o=i.left/r.width,h=a+i.width/r.width)}else{const t=i.width/i.height;let e=i.width,n=i.height;if(i.width>r.width||i.height>r.height){const t=r.width/i.width,s=r.height/i.height,o=Math.min(t,s);e*=o,n*=o}let l=0,d=0;r.width/r.height>t?(d=Math.floor(r.height/n)*n,l=Math.floor(d*t/e)*e,l>r.width&&(l=Math.floor(r.width/e)*e,d=Math.floor(l/t/n)*n)):(l=Math.floor(r.width/e)*e,d=Math.floor(l/t/n)*n,d>r.height&&(d=Math.floor(r.height/n)*n,l=Math.floor(d*t/e)*e)),0==s?(o=1-(o+(n-1)/r.height),a=i.left/r.width,h=1-i.top/r.height,c=a+e/r.width,u.x=a,u.y=1-h,u.w=c,u.h=1-o,i.height>i.width&&(a=function(t){const e=Math.pow(10,2);return Math.ceil(t*e)/e}(a),c=function(t){const e=Math.pow(10,2);return Math.floor(t*e)/e}(c))):1==s?(a=1-(o+(n-1)/r.height),c=1-i.top/r.height,o=i.left/r.width,h=a+e/r.width):2==s?(o=i.top/r.height,a=i.left/r.width,h=o+(n-1)/r.height,c=a+e/r.width):3==s&&(a=i.top/r.height,c=o+(n-1)/r.height,o=i.left/r.width,h=a+e/r.width)}let l=[],d=[{x:c,y:h},{x:c,y:o},{x:a,y:o},{x:c,y:h},{x:a,y:h},{x:a,y:o}];for(let t=0;t<d.length;++t){let e=null;if(n){let r=-1*Math.abs(d[t].x);d[t].x=r,e={u:d[t].x+1,v:d[t].y}}else e={u:d[t].x,v:d[t].y};l.push(e)}let f=[];for(let t=0;t<l.length;++t){let e=l[t];f.push(e.u),f.push(e.v)}return{uvCoords:f,uvRect:u}}(t,e,r,i,s,n),calculateRenderRect:(t,e)=>function(t,e){let r=0,i=0,s=0,n=0;const o=e.width/e.height;return t.width/t.height>o?(i=t.height,r=i*o,s=(t.width-r)/2,n=0):(r=t.width,i=r/o,s=0,n=(t.height-i)/2),r<=t.canvas.width&&(s=(t.canvas.width-r)/2),i<=t.canvas.height&&(n=(t.canvas.height-i)/2),{x:s,y:n,width:r,height:i}}(t,e),evalCroppingRect:(t,e)=>function(t,e){if(!t||null==e)throw new Error("evalCroppingRect() invalid parameters!");return 1===e||3===e?{top:t.top,left:t.left,width:t.height,height:t.width}:t}(t,e)},assertion:{assert(t,e=""){i(t,e)},assertWithFailed(t){s(t)},abstractMethod(){!function(){const t=new Error("call abstract method!");e().tracing.Log_Error("AbstractMethod!",t)}()},unreachable(){!function(){const t=new Error("Unreachable code reached!");e().tracing.Log_Error("Unreachable!",t)}()}}};let F=new OffscreenCanvas(1,1);const D=new class{constructor(t,e){this._provider=null,this._serviceName=t,this._serviceCtor=e}exposed(){return null!==this._provider}exposeService(t,e=!0){return this._provider||(this._provider=new l(this._serviceName,this._serviceCtor)),e&&this._provider.register(t),this._provider}unexposeService(){this._provider&&this._provider.unregister()}}("graphics/VideoRasterService",class extends h{constructor(t){super(),this._lastVideoWidth=-1,this._lastVideoHeight=-1,this._videoPaintWidth=-1,this._videoPaintHeight=-1,this._isRotated=!1,this._waterMarkInfo=null,this._videoMirrorState=!1,this._videoRotationState="rot0",this._inputStream=null,this._outputTrack=null,this._waterMarkImage=null,this._waterMarkGen=null,this._rasterCtx=null,this._closed=!1,this.updateCssDisplaySize(t.cssDisplaySize),t.options&&t.options.waterMarkInfo&&(this._waterMarkInfo=t.options.waterMarkInfo),this._outputWriterPromise=function(t){let e,r=!1,i=!1;const s=new Promise(((s,n)=>{t.then((t=>{i||(r=!0,e=t,s(t))}),(t=>{i||n(t)}))}));return{then:(t,e)=>s.then(i?void 0:t,i?void 0:e),catch:t=>s.catch(i?void 0:t),finally:t=>s.finally(i?void 0:t),isResolved:()=>r,isCanceled:()=>i,getValue:()=>e,cancel:()=>{i=!0}}}(new Promise((t=>{this._resolveOutputWriterPromise=t})));const e=new WritableStream({write:t=>{if(this._closed)return void t.close();const e=this._process(t);this._outputWriterPromise.isResolved()?this._writeVideoFrame(this._outputWriterPromise.getValue(),e):this._outputWriterPromise.then((t=>{this._writeVideoFrame(t,e)}))},close:()=>{this._outputWriterPromise.then((t=>{t.close()}))},abort:()=>{this._outputWriterPromise.then((t=>{t.abort()}))}});this._inputStream=E(e,{skipFrame:!0})}closeService(){var t;const e=null===(t=this._rasterCtx)||void 0===t?void 0:t.canvas;e&&(e.width=1,e.height=1),this._closed=!0}_writeVideoFrame(t,e){t.ready.then((()=>t.write(e))).catch((t=>{C("[ssrcstream] Err in VideoRasterTask",t)})).finally((()=>{e.close()}))}provideInputStream(t){t.pipeTo(this._inputStream)}provideOutputStream(t){const e=t.getWriter();this._resolveOutputWriterPromise(e)}accquireOutputTrack(){if(W.assertion.assert("track"===W.config.getAVStreamMode()),W.assertion.assert(null===this._outputTrack),!this._outputTrack){const t=new VideoTrackGenerator;this._outputTrack=t.track,this._resolveOutputWriterPromise(t.writable.getWriter())}return this.connection.transfer(this._outputTrack)}provideInputTrack(t){new MediaStreamTrackProcessor({track:t}).readable.pipeTo(this._inputStream)}updateVideoMirrorState(t){this._videoMirrorState=t}_isRotatedState(t){return"rot90"===t||"rot270"===t}updateVideoRotation(t){const e=t.rotationState;this._videoRotationState!==e&&(this._isRotatedState(this._videoRotationState)!==this._isRotatedState(e)&&(this._rasterCtx=null),this._videoRotationState=e)}updateCssDisplaySize(t){if(this._cssSize&&t.width===this._cssSize.width&&t.height===this._cssSize.height)return;this._cssSize=t;const e=this._cssSize.width,r=this._cssSize.height;this._displayRatio=e/r;const i=b.getCssPixelScale();this._pixelsSize={width:e*i,height:r*i},this._rasterCtx=null}updateWatermarkInfo(t){this._waterMarkInfo=t,this._waterMarkImage=null}get waterMarkGen(){return this._waterMarkGen||(this._waterMarkGen=new d),this._waterMarkGen}shouldWatermarkRepeated(t,e){return this._waterMarkInfo&&this._waterMarkInfo.repeated&&t>512&&e>512}updateWatermarkImage(t,e){if(!this._waterMarkInfo||!this._waterMarkInfo.enable||!this._waterMarkInfo.name)return void(this._waterMarkImage=null);const r=this.shouldWatermarkRepeated(t,e),i=t<512||e<288?16:this._waterMarkInfo.position;this._waterMarkImage=r?this.waterMarkGen.Get_Repeated_WaterMarkRGBA({canvas:F,name:this._waterMarkInfo.name,width:t,height:e,opacity:this._waterMarkInfo.opacity,position:i,transferToImage:!0}):this.waterMarkGen.Get_WaterMarkRGBA({canvas:F,name:this._waterMarkInfo.name,width:t,height:e,opacity:this._waterMarkInfo.opacity,position:i,transferToImage:!0}),F.width=1,F.height=1}_process(t){const e=this._cssSize;if(0===e.width||0===e.height)return t;if(!this._rasterCtx||t.displayWidth!==this._lastVideoWidth||t.displayHeight!==this._lastVideoHeight){const r=this._pixelsSize;let i,s,n;this._lastVideoWidth=t.displayWidth,this._lastVideoHeight=t.displayHeight,"rot90"===this._videoRotationState||"rot270"===this._videoRotationState?(i=t.displayHeight/t.displayWidth,this._isRotated=!0):(i=t.displayWidth/t.displayHeight,this._isRotated=!1),i>=this._displayRatio?(s=t.displayWidth,n=Math.round(s/this._displayRatio)):(n=t.displayHeight,s=Math.round(n*this._displayRatio));const o=Math.min(306,r.width),a=Math.min(306/this._displayRatio,r.height),c=Math.max(Math.max(e.width,o),Math.min(r.width,s)),h=Math.max(Math.max(e.height,a),Math.min(r.height,n));let u;i>=this._displayRatio?(this._videoPaintWidth=c,this._videoPaintHeight=Math.round(this._videoPaintWidth/i)):(this._videoPaintHeight=h,this._videoPaintWidth=Math.round(this._videoPaintHeight*i)),this._rasterCtx?(u=this._rasterCtx.canvas,c===u.width&&h===u.height||(u.width=c,u.height=h,this.connection.notify("videoSizeChange",c,h))):(u=new OffscreenCanvas(c,h),this._rasterCtx=u.getContext("2d",{alpha:!1}),this.connection.notify("videoSizeChange",c,h)),this._waterMarkImage=null}const r=this._rasterCtx,i=r.canvas;switch(this._waterMarkImage||this.updateWatermarkImage(i.width,i.height),r.setTransform(1,0,0,1,0,0),this._rasterCtx.fillStyle="rgba(0,0,0,1)",this._rasterCtx.fillRect(0,0,i.width,i.height),r.setTransform(1,0,0,1,0,0),r.translate(i.width/2,i.height/2),this._videoRotationState){case"rot0":break;case"rot90":r.rotate(Math.PI/2);break;case"rot180":r.rotate(Math.PI);break;case"rot270":r.rotate(-Math.PI/2);break;default:s()}this._videoMirrorState&&r.scale(-1,1),this._isRotated?r.drawImage(t,-this._videoPaintHeight/2,-this._videoPaintWidth/2,this._videoPaintHeight,this._videoPaintWidth):r.drawImage(t,-this._videoPaintWidth/2,-this._videoPaintHeight/2,this._videoPaintWidth,this._videoPaintHeight),this._waterMarkImage&&(r.setTransform(1,0,0,1,0,0),r.drawImage(this._waterMarkImage,0,0,i.width,i.height));const n=i.transferToImageBitmap(),o=new VideoFrame(n,{timestamp:t.timestamp,duration:t.duration});return t.close(),n.close(),o}});let A;new c(globalThis,{load(e,r){return i=this,s=void 0,o=function*(){if(A)return A;t=W,w.init(r.renderUserAgentInfo),y.init(r.renderCapabilitiesDesc),b.init(r.renderConfigDesc),u.setRegistryServicePort(e);const i=D.exposeService();return A=i.registerPromise(),A},new((n=void 0)||(n=Promise))((function(t,e){function r(t){try{c(o.next(t))}catch(t){e(t)}}function a(t){try{c(o.throw(t))}catch(t){e(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(r,a)}c((o=o.apply(i,s||[])).next())}));var i,s,n,o}})})()})();
//# sourceMappingURL=https://d1cdksi819e9z7.cloudfront.net/sourcemap/graphics.min.js-ff65d0cdbe3ba2587c1c.map