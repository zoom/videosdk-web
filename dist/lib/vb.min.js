!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VB=e():t.VB=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=8)}([function(t,e,r){var n=r(15)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){"use strict";r.r(e),r.d(e,"Audio_Dec_WASM_OK",(function(){return n})),r.d(e,"Audio_Dec_Handle_OK",(function(){return i})),r.d(e,"Audio_Dec_WebSocket_OK",(function(){return o})),r.d(e,"Audio_Enc_WASM_OK",(function(){return u})),r.d(e,"Audio_Enc_Handle_OK",(function(){return _})),r.d(e,"Video_Dec_WASM_OK",(function(){return a})),r.d(e,"Video_Dec_Handle_OK",(function(){return E})),r.d(e,"Video_Dec_WebSocket_OK",(function(){return s})),r.d(e,"Video_Enc_WASM_OK",(function(){return c})),r.d(e,"Video_Enc_Handle_OK",(function(){return d})),r.d(e,"Sharing_Dec_WASM_OK",(function(){return f})),r.d(e,"Sharing_Dec_PICTURE",(function(){return T})),r.d(e,"AUDIO_DELAY",(function(){return h})),r.d(e,"Sharing_Dec_WebSocket_OK",(function(){return R})),r.d(e,"Sharing_Handle_OK",(function(){return O})),r.d(e,"Sharing_Data",(function(){return A})),r.d(e,"DECODE_MESSAGE",(function(){return I})),r.d(e,"Video_Capture_Tick",(function(){return l})),r.d(e,"MONITOR_MESSAGE",(function(){return D})),r.d(e,"SHARING_DECODE_MONITOR_MESSAGE",(function(){return S})),r.d(e,"WORKER_MAIN_VIDEO_ENCODE_RINGBUFFER_TICK",(function(){return N})),r.d(e,"WORKER_MAIN_AUDIO_ENCODE_RINGBUFFER_TICK",(function(){return C})),r.d(e,"WORKER_MAIN_VIDEO_DECODE_RINGBUFFER_TICK",(function(){return p})),r.d(e,"Audio_Encode_Preview_OK",(function(){return m})),r.d(e,"Video_Encode_Preview_OK",(function(){return v})),r.d(e,"QOS_DEFAULT_POLLING_INTERVAL",(function(){return U})),r.d(e,"VIDEO_MONITOR_LOG_SECOENDS",(function(){return g})),r.d(e,"DOWNLOAD_WASM_FROM_MAIN_THREAD",(function(){return L})),r.d(e,"APP_TROUBLESHOOTING_INFO",(function(){return x})),r.d(e,"DELTA_D",(function(){return M})),r.d(e,"DELTA_C",(function(){return V})),r.d(e,"DELTA_S",(function(){return P})),r.d(e,"WCL_TROUBLESHOOTING_INFO",(function(){return y})),r.d(e,"SHARING_DATA_VIDEO_MODE",(function(){return G})),r.d(e,"MOUSE_DATA_VIDEO_MODE",(function(){return B})),r.d(e,"SHARING_DECODE_MESSAGE",(function(){return F})),r.d(e,"VIDEO_ENCODED_DATA",(function(){return b})),r.d(e,"VIDEO_DROP_RATIO_FROM_WCL",(function(){return w})),r.d(e,"VIDEO_DATA_DROP_RATIO",(function(){return W})),r.d(e,"AUDIO_ENCODED_DATA",(function(){return H})),r.d(e,"THREAD_STATE_IDLE",(function(){return k})),r.d(e,"THREAD_STATE_CREATING",(function(){return K})),r.d(e,"THREAD_STATE_CREATED",(function(){return Y})),r.d(e,"THREAD_ENCODE_BUFFER",(function(){return X})),r.d(e,"WASMPTR",(function(){return j})),r.d(e,"AUDIO_MONITOR_LOG",(function(){return Q})),r.d(e,"WhiteBoard_Video_Capture_Tick",(function(){return Z})),r.d(e,"GLOBAL_TRACING_LOG",(function(){return z})),r.d(e,"Audio_Dec_WASM_FAILED",(function(){return J})),r.d(e,"Audio_Dec_Handle_FAILED",(function(){return q})),r.d(e,"Audio_Dec_WebSocket_FAILED",(function(){return $})),r.d(e,"Audio_Enc_WASM_FAILED",(function(){return tt})),r.d(e,"Audio_Enc_Handle_FAILED",(function(){return et})),r.d(e,"Video_Dec_WASM_FAILED",(function(){return rt})),r.d(e,"Video_Dec_Handle_FAILED",(function(){return nt})),r.d(e,"Video_Dec_WebSocket_FAILED",(function(){return it})),r.d(e,"Video_Enc_WASM_FAILED",(function(){return ot})),r.d(e,"Video_Enc_Handle_FAILED",(function(){return ut})),r.d(e,"Sharing_Dec_WASM_FAILED",(function(){return _t})),r.d(e,"Audio_Mute",(function(){return at})),r.d(e,"Sharing_Handle_FAILED",(function(){return Et})),r.d(e,"Sharing_Dec_WebSocket_FAILED",(function(){return st})),r.d(e,"AUDIO_CLIPPING",(function(){return ct})),r.d(e,"MULTIVIEW_WEBGL_CONTEXT_LOST",(function(){return dt})),r.d(e,"WEBGL_CONTEXT_CREATE_FAILED",(function(){return ft})),r.d(e,"MEDIA_VIDEO_REPORT_DROP_RATIO",(function(){return Tt})),r.d(e,"SHARING_HEALTH_CHECK_FAILED",(function(){return ht})),r.d(e,"VIDEO_HEALTH_CHECK_FAILED",(function(){return Rt})),r.d(e,"AUDIO_HEALTH_CHECK_FAILED",(function(){return Ot})),r.d(e,"MEDIA_S2C_KEEPALIVE",(function(){return At})),r.d(e,"MEDIA_AUDIO_DATA",(function(){return It})),r.d(e,"MEDIA_AUDIO_RTCP",(function(){return lt})),r.d(e,"MEDIA_AUDIO_FEATURE",(function(){return Dt})),r.d(e,"MEDIA_VIDEO_DATA",(function(){return St})),r.d(e,"MEDIA_VIDEO_RTCP",(function(){return Nt})),r.d(e,"MEDIA_NTP_UPDATE",(function(){return Ct})),r.d(e,"VIDEO_CAPTURER_RESOLUTION_360P",(function(){return pt})),r.d(e,"VIDEO_CAPTURER_RESOLUTION_720P",(function(){return mt})),r.d(e,"VIDEO_CAPTURER_RESOLUTION_1080P",(function(){return vt})),r.d(e,"CURRENT_VIDEO_RESOLUTION",(function(){return Ut})),r.d(e,"VIDEO_RENDER_MONITOR_LOG",(function(){return gt})),r.d(e,"Sharing_Width_And_Height_Info",(function(){return Lt})),r.d(e,"SHARING_RENDER_MONITOR_LOG",(function(){return xt})),r.d(e,"SHARING_GET_IMAGE_DATA_WRONG",(function(){return Mt})),r.d(e,"AES_GCM_IV_TO_WASM",(function(){return Vt})),r.d(e,"AES_GCM_IV_CALLBACK_FROM_WASM",(function(){return Pt})),r.d(e,"CURRENT_SSRC_TIME",(function(){return yt})),r.d(e,"CURRENT_DECODE_VIDEO_QUALITY",(function(){return Gt})),r.d(e,"CURRENT_DECODE_VIDEO_FPS",(function(){return Bt})),r.d(e,"CURRENT_CAPTURE_VIDEO_WIDTH_HEIGHT",(function(){return Ft})),r.d(e,"CURRENT_DESKTOP_SHARING_WIDTH_HEIGHT",(function(){return bt})),r.d(e,"SHARING_FIRST_DECODE_FRAME_RECEIVED",(function(){return wt})),r.d(e,"VIDEO_CAPTURER_RESOLUTION_CHANGE",(function(){return Wt})),r.d(e,"VIDEO_CAPTURE_FRAME_COUNT_STATISTIC",(function(){return Ht})),r.d(e,"SHARING_CAPTURE_FRAME_COUNT_STATISTIC",(function(){return kt})),r.d(e,"UNSUPPORTED_SHARING_FORMAT",(function(){return Kt})),r.d(e,"UNSUPPORTED_VIDEO_FORMAT",(function(){return Yt})),r.d(e,"FIRST_SHARING_FRAME_FOR_MOBILE",(function(){return Xt})),r.d(e,"VB_PTHREAD_MODEL_ALL_READY",(function(){return jt})),r.d(e,"UPDATE_ENCRYPTION_GCM_MODEL_KEY",(function(){return Qt})),r.d(e,"CONNECT_WEBTRANSPORT_OK",(function(){return Zt})),r.d(e,"CONNECT_WEBTRANSPORT_CLOSE",(function(){return zt})),r.d(e,"CURRENT_MEDIA_DATA_TRANSPORT_TYPE",(function(){return Jt})),r.d(e,"CONNECT_WEBSOCKET_CLOSE",(function(){return qt})),r.d(e,"CURRENT_ENCODED_TYPE",(function(){return $t})),r.d(e,"WHITEBOARD_WORKER_MESSAGE",(function(){return te})),r.d(e,"INTERPRETATION_ENABLE",(function(){return ee})),r.d(e,"INTERPRETATION_SET_LANG",(function(){return re})),r.d(e,"INTERPRETATION_MUTE",(function(){return ne})),r.d(e,"INTERPRETATION_SET_INTERPRETER",(function(){return ie})),r.d(e,"serverHeartbeatMaxTimeoutSeconds",(function(){return oe})),r.d(e,"RQUEST_ANIMATION_MODE",(function(){return ue})),r.d(e,"SET_INTERVAL_MODE",(function(){return _e})),r.d(e,"VIDEO_INVALID",(function(){return ae})),r.d(e,"VIDEO_RGBA",(function(){return Ee})),r.d(e,"VIDEO_I420",(function(){return se})),r.d(e,"VIDEO_NV12",(function(){return ce})),r.d(e,"VIDEO_BGRA",(function(){return de})),r.d(e,"EVENT_ROLLBACK_BUFFER",(function(){return fe})),r.d(e,"EVENT_NEEDMORE_DATA",(function(){return Te})),r.d(e,"EVENT_CAPTURE_DATA",(function(){return he})),r.d(e,"EVENT_CACHE_SIZE",(function(){return Re})),r.d(e,"WEBCODEC_ENCODE_OPEN_FLAG",(function(){return Oe})),r.d(e,"VB_SIGNAL_TYPE_SET_BG",(function(){return Ae})),r.d(e,"VB_SIGNAL_TYPE_SET_BLUR",(function(){return Ie})),r.d(e,"QosSession",(function(){return le})),r.d(e,"QosConnectType",(function(){return De})),r.d(e,"MAX_VIDEO_CAPTURE_FPS",(function(){return Se})),r.d(e,"MIN_VIDEO_CAPTURE_FPS",(function(){return Ne})),r.d(e,"VIDEO_CAPTURE_FPS",(function(){return Ce})),r.d(e,"VIDEO_CAPTURE_20FPS",(function(){return pe})),r.d(e,"DOWN_VIDEO_CAPTURE_FPS",(function(){return me})),r.d(e,"LOWER_VIDEO_CAPTURE_FPS",(function(){return ve})),r.d(e,"VIDEO_DATA_MAX_SIZE",(function(){return Ue})),r.d(e,"SHARING_NULL",(function(){return ge})),r.d(e,"SHARING_NORMAL",(function(){return Le})),r.d(e,"SHARING_VIDEO_MODE",(function(){return xe})),r.d(e,"SHARING_VIDEO_MODE_CAPTURED_FPS",(function(){return Me})),r.d(e,"SHARING_NORMAL_MODE_CAPTURED_FPS",(function(){return Ve})),r.d(e,"VIDEO_RINGBUF_PKG_NUM",(function(){return Pe})),r.d(e,"NETWORK_QUALITY_CHANGE",(function(){return ye})),r.d(e,"NETWORK_QUALITY_CHANGE_AUDIO",(function(){return Ge})),r.d(e,"ADDITIONNAL_MULTITHREAD_NUMBER_ENCODE_FOR_360P",(function(){return Be})),r.d(e,"ADDITIONNAL_MULTITHREAD_NUMBER_ENCODE_FOR_720P",(function(){return Fe})),r.d(e,"ADDITIONNAL_MULTITHREAD_NUMBER_ENCODE_FOR_1080p",(function(){return be})),r.d(e,"WCL_PLATFORM_TYPE",(function(){return we})),r.d(e,"AS_CAPTURE_SOURCE",(function(){return We})),r.d(e,"MEDIA_COMMAND",(function(){return He})),r.d(e,"RENDER_MODE_RAF",(function(){return ke})),r.d(e,"RENDER_MODE_INTERVAL",(function(){return Ke})),r.d(e,"RENDER_UNSET",(function(){return Ye})),r.d(e,"RENDER_IN_WORKER",(function(){return Xe})),r.d(e,"RENDER_IN_MAIN",(function(){return je})),r.d(e,"WEBRTC_NO_AUDIO_MODE",(function(){return Qe})),r.d(e,"WEBRTC_COMMPUTER_AUDIO_MODE",(function(){return Ze})),r.d(e,"WEBRTC_SHARE_AUDIO_MODE",(function(){return ze})),r.d(e,"WEBRTC_MULTI_AUDIO_MODE",(function(){return Je})),r.d(e,"VIDEO_FRAME",(function(){return qe})),r.d(e,"SHARING_FRAME",(function(){return $e})),r.d(e,"MAX_RENDER_WITHOUT_SAB",(function(){return tr})),r.d(e,"ACTIVE_SPEAKER_SSRC",(function(){return er})),r.d(e,"FACE_MODE_UNKNOW",(function(){return rr})),r.d(e,"FACE_MODE_USER",(function(){return nr})),r.d(e,"FACE_MODE_ENVIRONMENT",(function(){return ir})),r.d(e,"ORIGINAL_SOUND_OFF",(function(){return or})),r.d(e,"ORIGINAL_SOUND_ON",(function(){return ur})),r.d(e,"ORIGINAL_SOUND_STEREO",(function(){return _r})),r.d(e,"ORIGINAL_SOUND_HIGHFIDELITY",(function(){return ar})),r.d(e,"ORIGINAL_SOUND_HIGHFIDELITY_STEREO",(function(){return Er})),r.d(e,"SHARE_AUDIO",(function(){return sr})),r.d(e,"ORIGINAL_SOUND_OFF_HIGH_BITRATE",(function(){return cr})),r.d(e,"PUBLISHER_ICEConnectionState_Failed",(function(){return dr})),r.d(e,"SUBSCRIBER_ICEConnectionState_Failed",(function(){return fr})),r.d(e,"NO_MESSAGE_FAILOVER",(function(){return Tr})),r.d(e,"WS_ERROR_FAILOVER",(function(){return hr})),r.d(e,"WS_CLOSE_FAILOVER",(function(){return Rr})),r.d(e,"VB_CONSTANT",(function(){return Or})),r.d(e,"AUDIO_ENCODE_WORKER",(function(){return Ar})),r.d(e,"AUDIO_DECODE_WORKER",(function(){return Ir})),r.d(e,"AUDIO_WASM_WORKLET",(function(){return lr})),r.d(e,"AUDIO_WEBRTC_WORKLET",(function(){return Dr})),r.d(e,"MEDIA_AUDIO_QOS_SESS_DATA",(function(){return Sr}));var n=1,i=2,o=3,u=4,_=5,a=7,E=8,s=9,c=10,d=11,f=12,T=13,h=14,R=15,O=16,A=17,I=18,l=20,D=21,S=3021,N=22,C=23,p=24,m=26,v=27,U=1e3,g=5,L=30,x=31,M=32,V=33,P=34,y=35,G=36,B=37,F=38,b=39,w=40,W=41,H=42,k=43,K=44,Y=45,X=46,j=47,Q=48,Z=60,z=61,J=-1,q=-2,$=-3,tt=-4,et=-5,rt=-7,nt=-8,it=-9,ot=-10,ut=-11,_t=-12,at=-13,Et=-14,st=-15,ct=-23,dt=-26,ft=-27,Tt=100,ht=-129,Rt=-130,Ot=-131,At=0,It=1,lt=6,Dt=146,St=2,Nt=7,Ct=9,pt=10,mt=11,vt=12,Ut=50,gt=51,Lt=52,xt=53,Mt=54,Vt=55,Pt=56,yt=57,Gt=66.5,Bt=66.6,Ft=67,bt=68,wt=69,Wt=71,Ht=72,kt=73,Kt=75,Yt=76,Xt=78,jt=95,Qt=102,Zt=105,zt=106,Jt=107,qt=108,$t=109,te=120,ee=0,re=1,ne=2,ie=3,oe=65,ue=0,_e=1,ae=-1,Ee=0,se=1,ce=2,de=3,fe=0,Te=1,he=2,Re=3,Oe=!0,Ae=0,Ie=1,le={SESSION_TYPE_CONF:0,SESSION_TYPE_AUDIO:1,SESSION_TYPE_DESKSHARE:2,SESSION_TYPE_VIDEO:3,SESSION_TYPE_CHAT:4,SESSION_TYPE_TELEPHONE:5,SESSION_TYPE_ZC_PING:6,SESSION_TYPE_TOTAL_CNT:7},De={CONNECT_TYPE_UDP:0,CONNECT_TYPE_TCP:1},Se=30,Ne=1,Ce=24,pe=20,me=15,ve=10,Ue=8294400,ge=0,Le=1,xe=2,Me=15,Ve=5,Pe=400,ye="NETWORK_QUALITY_CHANGE",Ge="NETWORK_QUALITY_CHANGE_AUDIO",Be=3,Fe=7,be=8,we={DESKTOP:0,MOBILE:1,ANDROID:2,IPHONE:3},We={DESKTOP_SOURCE:0,UAC_SOURCE:1},He={SHARE_REMOTE_CONTROL_UAC_MOUSE:144,SHARE_REMOTE_CONTROL_UAC_JPEG_FRAME:145},ke=0,Ke=1,Ye=-1,Xe=0,je=1,Qe=0,Ze=1,ze=2,Je=Ze+ze,qe=0,$e=1,tr=25,er=1,rr=-1,nr=0,ir=1,or=0,ur=1,_r=2|ur,ar=4|ur,Er=_r|ar,sr=8,cr=16,dr=3,fr=107,Tr="100",hr="101",Rr="102",Or="WCL_M,isWebEnabled:1, isLocalEnabled:1, isSmartBkgnd:1, bkgType:2",Ar=0,Ir=1,lr=2,Dr=3,Sr=107},function(t,e){function r(t,e,r,n,i,o,u){try{var _=t[o](u),a=_.value}catch(t){return void r(t)}_.done?e(a):Promise.resolve(a).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var u=t.apply(e,n);function _(t){r(u,i,o,_,a,"next",t)}function a(t){r(u,i,o,_,a,"throw",t)}_(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(13);function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}t.exports=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(9),i=r(10),o=r(11),u=r(12);t.exports=function(t){return n(t)||i(t)||o(t)||u()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function u(t){try{a(n.next(t))}catch(t){o(t)}}function _(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(u,_)}a((n=n.apply(t,e||[])).next())}))},i=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const u=o(r(19)),_=r(1),a=r(16),E=o(r(17)),s=r(18);class c{constructor(t){this.isMirror=!1,this.isVBReady=!1,this.timer=null,this.manualFreeMemory=!1,this.isVBInitializing=!1,this.receiveTimer=null,this.msgChannel=null,this.isEnabled=!0;const{canvas:e,canvasID:r,bgImage:n,manualFreeMemory:o,cdnPath:a}=t,E=i(t,["canvas","canvasID","bgImage","manualFreeMemory","cdnPath"]);if(this.cdnPath=a||c.cdnPath,!this.cdnPath)throw new Error("VB module: cdnPath is not provided");if(this.vbWorkerUrl=this.cdnPath+"/vb_worker.min.js",this.initParam=E,e){let t;t="string"==typeof e?document.querySelector("#"+e):e,t&&(this.display=new u.default(t,r,0,void 0,{preserveDrawingBuffer:!1},void 0,!1),this.display.setVideoMode(_.VIDEO_I420))}n&&(this.bgImage=n),o&&(this.manualFreeMemory=o),this.handle_message_from_vb_worker=this.handle_message_from_vb_worker.bind(this);const s=navigator.userAgent.toLocaleLowerCase();this.isSafari=s.includes("safari")&&!s.includes("chrome")&&!s.includes("chromium")}static isSupportVB(){return n(this,void 0,void 0,(function*(){try{const t=yield E.default.simd();return navigator.hardwareConcurrency&&navigator.hardwareConcurrency>2&&t&&"function"==typeof OffscreenCanvas}catch(t){return!1}}))}initialize(){return this.isVBReady?Promise.resolve():(this.isVBInitializing||(this.isVBInitializing=!0,this.initPromise=new Promise((t,e)=>n(this,void 0,void 0,(function*(){this.initReject=e,this.initResolve=t;try{const t=yield fetch(this.vbWorkerUrl);if(t.ok){const e=yield t.arrayBuffer(),r=window.URL.createObjectURL(new Blob([e]));this.worker=new Worker(r,{name:c.VB_WORKER_NAME}),this.worker.addEventListener("message",this.handle_message_from_vb_worker),this.worker.postMessage({cmd:a.VB_EVENT_TYPE.VB_WORKER_INIT,payload:Object.assign(Object.assign({},this.initParam),{cdnPath:this.cdnPath})}),window.URL.revokeObjectURL(r)}else{const{url:r,status:n}=t;this.isVBInitializing=!1,e(`Fetch worker file failed. url: ${r}, status: ${n}`)}}catch(t){this.isVBInitializing=!1,e(t)}})))),this.initPromise)}send_video_frame(t){this.isVBReady&&this.worker.postMessage({cmd:a.VB_EVENT_TYPE.VB_RECEIVE_VIDEOFRAME,payload:t},[t])}send_rgb_frame(t){this.isVBReady&&this.worker.postMessage({cmd:a.VB_EVENT_TYPE.VB_RECEIVE_IMAGEDATA,payload:t},[t.data.buffer])}Crop_Mask_Bg_16V9(){let t,e,r,n=0,i=this.bgImage.width,o=this.bgImage.height;return 16/9*o>=i?(r=i,n=i/(16/9),t=0,e=(o-n)/2):(r=o*(16/9),n=o,t=(i-r)/2,e=0),{sx:t,sy:e,sw:r,sh:n}}set_background_image(t){if(this.bgImage=t,!this.isVBReady)return!1;const e=this.Crop_Mask_Bg_16V9();let r,n,i,o,u,_;r=e.sx,n=e.sy,i=e.sw,o=e.sh,i>1920?(u=1920,_=1080):(u=i,_=o),this.bgConvertCanvas||(this.bgConvertCanvas=new OffscreenCanvas(u,_)),this.bgConvertCanvas.width=u,this.bgConvertCanvas.height=_;let E=this.bgConvertCanvas.getContext("2d");if(!E)return!1;E.drawImage(t,r,n,i,o,0,0,this.bgConvertCanvas.width,this.bgConvertCanvas.height);let s=E.getImageData(0,0,this.bgConvertCanvas.width,this.bgConvertCanvas.height);return this.worker.postMessage({cmd:a.VB_EVENT_TYPE.VB_UPDATE_BG,payload:s}),"close"in t&&t.close(),!0}set_background_blur(){this.isVBReady&&this.worker.postMessage({cmd:a.VB_EVENT_TYPE.VB_UPDATE_BG,payload:"blur"})}renderFrame(t,e,r,n){if(this.display){let i={x:0,y:0,width:this.display.canvasElement.width,height:this.display.canvasElement.height};this.display.updateRemoteVideoTextures(t,e,n,r,0,!0,i,!1),this.display.drawRemoteVideo(i,this.isMirror)}}handle_message_from_vb_worker(t){const{cmd:e,payload:r}=t.data;switch(c.EXTERNAL_EVENTS.has(e)&&(e!==a.VB_EVENT_TYPE.VB_GENERATED_FRAME||this.isEnabled)&&this.callback&&this.callback(t.data),e){case a.VB_EVENT_TYPE.VB_INIT_FAILED:this.isVBInitializing=!1,this.initReject(r);break;case a.VB_EVENT_TYPE.VB_INIT_SUCCESS:this.isVBReady=!0,this.isVBInitializing=!1,this.bgImage&&this.set_background_image(this.bgImage),this.initResolve();break;case a.VB_EVENT_TYPE.VB_GENERATED_FRAME:{const e=t.data.payload,{data_ptr:r}=e;if(this.display&&this.isEnabled){const e=t.data.payload,{data:r,format_width:n,format_height:i,valid_x:o,valid_y:u,valid_width:_,valid_height:a}=e;let E;E=r;let s={top:u,left:o,width:_,height:a};this.renderFrame(n,i,E,s)}r&&!this.manualFreeMemory&&this.worker.postMessage({cmd:a.VB_EVENT_TYPE.VB_FREE_MEMORY,payload:{pointer:r}})}}}onMessage(t){this.callback=t}captureVideo(t){return n(this,void 0,void 0,(function*(){if(this.isVBReady||this.isVBInitializing?this.isVBInitializing&&(yield this.initPromise):yield this.initialize(),null!==this.timer){if(t===this.captureConf)return;this.stopCapture()}this.captureConf=t;let e,r=24;const n=yield navigator.mediaDevices.getUserMedia(Object.assign(Object.assign({},t),{audio:!1}));if(this.videoStream=n,e=this.videoStream.getVideoTracks()[0]){r=e.getSettings().frameRate||r,r>24&&(r=24)}let i,o,u,_,a,E=document.querySelector("#"+c.VB_CAPTURE_VIDEO),s=!1;const d=()=>{E&&(_=E.videoWidth,a=E.videoHeight,o.width=_,o.height=a,s=!0,E.removeEventListener("loadedmetadata",d))};if(window.MediaStreamTrackProcessor){const t=n.getVideoTracks()[0],e=new window.MediaStreamTrackProcessor({track:t});i=e.readable.getReader()}else o=document.createElement("canvas"),u=o.getContext("2d"),E||(E=document.createElement("video"),E.autoplay=!0,E.playsInline=!0,E.id=c.VB_CAPTURE_VIDEO,E.style.position="fixed",E.style.width="1px",E.style.height="1px",E.style.bottom="0px",E.style.right="0px",document.body.appendChild(E)),E.addEventListener("loadedmetadata",d),E.srcObject=n;this.timer=setInterval(()=>{if(this.isVBReady)if(i)i.read().then(({value:t,done:e})=>{e?(clearInterval(this.timer),this.timer=null):this.isEnabled?this.send_video_frame(t):this.renderOriginalFrame(t)});else if(u&&E&&s){u.drawImage(E,0,0);const t=u.getImageData(0,0,_,a);this.isEnabled?this.send_rgb_frame(t):this.renderOriginalFrame(t)}},1e3/r)}))}stopCapture(){this.timer&&(clearInterval(this.timer),this.timer=null),this.videoStream&&this.videoStream.getTracks().forEach(t=>{t.stop()})}setMirror(t){this.isMirror=t}freeMemory(t){this.isVBReady&&this.worker.postMessage({cmd:a.VB_EVENT_TYPE.VB_FREE_MEMORY,payload:{pointer:t}})}startReceiveMode(t){return t&&(this.captureConf=t),this.msgChannel||(this.msgChannel=new MessageChannel,this.msgChannel.port1.onmessage=t=>{var e;const{type:r,frame:n}=t.data;this.receiveTimer&&clearTimeout(this.receiveTimer),r===s.UNIFIED_VB_FRAME&&n?(null===(e=this.msgChannel)||void 0===e||e.port1.postMessage({type:s.UNIFIED_VB_ACK}),this.isEnabled?(this.timer&&this.stopCapture(),this.renderExtFrame(n)):n.close(),this.isSafari||(this.receiveTimer=setTimeout(()=>{this.captureConf&&!this.timer&&this.captureVideo(this.captureConf)},1e3))):r!==s.UNIFIED_VB_PAUSE&&r!==s.UNIFIED_VB_STOP||(this.captureConf&&!this.timer&&this.captureVideo(this.captureConf),r===s.UNIFIED_VB_STOP&&this.msgChannel&&(this.msgChannel.port1.onmessage=null,this.msgChannel=null))}),this.msgChannel.port2}renderExtFrame(t){return n(this,void 0,void 0,(function*(){if(t.visibleRect){this.display.videoMode!==_.VIDEO_I420&&this.display.setVideoMode(_.VIDEO_I420);const{width:e,height:r,x:n,y:i}=t.visibleRect,o=t.allocationSize(),u=new Uint8Array(o);try{yield t.copyTo(u),this.handle_message_from_vb_worker({data:{cmd:a.VB_EVENT_TYPE.VB_GENERATED_FRAME,payload:{len_of_data:o,format_width:e,format_height:r,valid_x:n,valid_y:i,valid_width:e,valid_height:r,data:u,data_ptr:0}}})}catch(t){}t.close()}}))}enable(){this.isEnabled=!0,this.display.setVideoMode(_.VIDEO_I420)}disable(){this.isEnabled=!1,!this.timer&&this.msgChannel&&this.captureConf&&(this.captureVideo(this.captureConf).catch(t=>{}),clearTimeout(this.receiveTimer))}renderOriginalFrame(t){return n(this,void 0,void 0,(function*(){let e=_.VIDEO_RGBA;if(window.VideoFrame&&t instanceof VideoFrame){const{format:r,visibleRect:n}=t;if(r&&n){if("I420"===r||"I420A"===r)e=_.VIDEO_I420;else if("NV12"===r)e=_.VIDEO_NV12;else{if("BGRA"!==r)return this.callback&&this.callback({cmd:a.VB_EVENT_TYPE.VB_VIDEO_FORMAT_UNSUPPORTED,payload:{format:r}}),void t.close();e=_.VIDEO_BGRA}const{width:i,height:o}=n,u=new Uint8Array(t.allocationSize()),E={top:0,left:0,width:i,height:o};this.display.setVideoMode(e);try{yield t.copyTo(u),this.renderFrame(i,o,u,E)}catch(t){}t.close()}}else if(t instanceof ImageData){const{width:e,height:r}=t,n={top:0,left:0,width:e,height:r};this.display.setVideoMode(0),this.renderFrame(e,r,t.data,n)}}))}destory(){this.stopCapture(),this.msgChannel&&(this.msgChannel.port2.onmessage=null),this.worker&&(this.worker.removeEventListener("message",this.handle_message_from_vb_worker),this.worker.terminate())}}if(c.VB_WORKER_NAME="vb_worker",c.VB_CAPTURE_VIDEO="VB_CAPTURE_VIDEO",c.EXTERNAL_EVENTS=new Set([a.VB_EVENT_TYPE.VB_GENERATED_FRAME,a.VB_EVENT_TYPE.VB_INIT_FAILED,a.VB_EVENT_TYPE.VB_INIT_SUCCESS,a.VB_EVENT_TYPE.VB_MODEL_READY,a.VB_EVENT_TYPE.VB_PREDICT_DONE,a.VB_EVENT_TYPE.VB_VIDEO_FORMAT_UNSUPPORTED,a.VB_EVENT_TYPE.VB_WORKER_ERROR]),e.default=c,document){const t=document.currentScript;if(t){const e=t.src;if(e){let t=e.indexOf("/vb.min.js");-1!==t&&(c.cdnPath=e.substring(0,t))}}}},function(t,e,r){var n=r(7);t.exports=function(t){if(Array.isArray(t))return n(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(7);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(5).default,i=r(14);t.exports=function(t){var e=i(t,"string");return"symbol"===n(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(5).default;t.exports=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(5).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=i=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},r=Object.prototype,o=r.hasOwnProperty,u=Object.defineProperty||function(t,e,r){t[e]=r.value},_="function"==typeof Symbol?Symbol:{},a=_.iterator||"@@iterator",E=_.asyncIterator||"@@asyncIterator",s=_.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),_=new U(n||[]);return u(o,"_invoke",{value:C(t,r,_)}),o}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var T={};function h(){}function R(){}function O(){}var A={};c(A,a,(function(){return this}));var I=Object.getPrototypeOf,l=I&&I(I(g([])));l&&l!==r&&o.call(l,a)&&(A=l);var D=O.prototype=h.prototype=Object.create(A);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function N(t,e){var r;u(this,"_invoke",{value:function(i,u){function _(){return new e((function(r,_){!function r(i,u,_,a){var E=f(t[i],t,u);if("throw"!==E.type){var s=E.arg,c=s.value;return c&&"object"==n(c)&&o.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,_,a)}),(function(t){r("throw",t,_,a)})):e.resolve(c).then((function(t){s.value=t,_(s)}),(function(t){return r("throw",t,_,a)}))}a(E.arg)}(i,u,r,_)}))}return r=r?r.then(_,_):_()}})}function C(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return L()}for(r.method=i,r.arg=o;;){var u=r.delegate;if(u){var _=p(u,r);if(_){if(_===T)continue;return _}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var a=f(t,e,r);if("normal"===a.type){if(n=r.done?"completed":"suspendedYield",a.arg===T)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(n="completed",r.method="throw",r.arg=a.arg)}}}function p(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,p(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),T;var i=f(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,T;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,T):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,T)}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function v(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function U(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function g(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:L}}function L(){return{value:void 0,done:!0}}return R.prototype=O,u(D,"constructor",{value:O,configurable:!0}),u(O,"constructor",{value:R,configurable:!0}),R.displayName=c(O,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===R||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,c(t,s,"GeneratorFunction")),t.prototype=Object.create(D),t},e.awrap=function(t){return{__await:t}},S(N.prototype),c(N.prototype,E,(function(){return this})),e.AsyncIterator=N,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var u=new N(d(t,r,n,i),o);return e.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},S(D),c(D,s,"Generator"),c(D,a,(function(){return this})),c(D,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=g,U.prototype={constructor:U,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return u.type="throw",u.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],u=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var _=o.call(i,"catchLoc"),a=o.call(i,"finallyLoc");if(_&&a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(_){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,T):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),T},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),v(r),T}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;v(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:g(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),T}},e}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.VB_EVENT_TYPE=void 0,function(t){t.VB_INIT_SUCCESS="VB_INIT_SUCCESS",t.VB_INIT_FAILED="VB_INIT_FAILED",t.VB_GENERATED_FRAME="VB_GENERATED_FRAME",t.VB_RECEIVE_VIDEOFRAME="VB_RECEIVE_VIDEOFRAME",t.VB_RECEIVE_IMAGEDATA="VB_RECEIVE_IMAGEDATA",t.VB_UPDATE_BG="VB_UPDATE_BG",t.VB_PREDICT_DONE="VB_PREDICT_DONE",t.VB_MODEL_READY="VB_MODEL_READY",t.VB_FREE_MEMORY="VB_FREE_MEMORY",t.VB_VIDEO_FORMAT_UNSUPPORTED="VB_VIDEO_FORMAT_UNSUPPORTED",t.VB_WORKER_INIT="VB_WORKER_INIT",t.VB_WORKER_ERROR="VB_WORKER_ERROR"}(n||(e.VB_EVENT_TYPE=n={}))},function(t,e,r){"use strict";r.r(e);var n,i,o=r(2),u=r.n(o),_=r(0),a=r.n(_),E=function(){};E.prototype={threads:(i=u()(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",function(){var t=u()(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(WebAssembly.validate(e)){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,t.abrupt("return",((new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),!0));case 6:return t.prev=6,t.t0=t.catch(2),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t,null,[[2,6]])})));return function(e){return t.apply(this,arguments)}}()(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])));case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)}),simd:(n=u()(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},e.default=new E},function(t,e,r){"use strict";r.r(e),r.d(e,"START_MEDIA",(function(){return n})),r.d(e,"ADD_RENDER_VIDEO",(function(){return i})),r.d(e,"STOP_RENDER_VIDEO",(function(){return o})),r.d(e,"START_CAPTURE_VIDEO",(function(){return u})),r.d(e,"STOP_CAPTURE_VIDEO",(function(){return _})),r.d(e,"ADD_RENDER_AUDIO",(function(){return a})),r.d(e,"STOP_RENDER_AUDIO",(function(){return E})),r.d(e,"UNMUTE_AUDIO",(function(){return s})),r.d(e,"MUTE_AUDIO",(function(){return c})),r.d(e,"CHANGE_FRAME_RATE",(function(){return d})),r.d(e,"CHANGE_VIDEO_RESOLUTION",(function(){return f})),r.d(e,"CHANGE_AUDIO_SPEAKER",(function(){return T})),r.d(e,"CHANGE_VIDEO_CAPTURE_DEVICE",(function(){return h})),r.d(e,"CHANGE_CURRENT_ACTIVE_SSRC",(function(){return R})),r.d(e,"REMOVE_AUDIO_CAPTURE",(function(){return O})),r.d(e,"LEAVE_MEETING",(function(){return A})),r.d(e,"MEETING_FAIL_OVER",(function(){return I})),r.d(e,"END_MEDIA",(function(){return l})),r.d(e,"CHANGE_AUDIO_MIC",(function(){return D})),r.d(e,"WEBRTC_RESTART",(function(){return S})),r.d(e,"REMOVE_RENDER_AUDIO",(function(){return N})),r.d(e,"LEAVE_COMPUTER_AUDIO",(function(){return C})),r.d(e,"JOIN_COMPUTER_AUDIO",(function(){return p})),r.d(e,"START_SHARING",(function(){return m})),r.d(e,"STOP_SHARING",(function(){return v})),r.d(e,"SWITCH_CANVAS_FOR_VIDEO_CAPTURE",(function(){return U})),r.d(e,"START_REMOTE_CONTROL",(function(){return g})),r.d(e,"UPDATE_REMOTE_CONTROL_PROPERTIES",(function(){return L})),r.d(e,"CANCEL_REMOTE_CONTROL",(function(){return x})),r.d(e,"UPDATE_SUBSCRIBE_VIDEO",(function(){return M})),r.d(e,"START_DESKTOP_SHARING",(function(){return V})),r.d(e,"START_SHARING_WHITEBOARD",(function(){return P})),r.d(e,"STOP_DESKTOP_SHARING",(function(){return y})),r.d(e,"STOP_SHARING_WHITEBOARD",(function(){return G})),r.d(e,"PAUSE_DESKTOP_SHARING",(function(){return B})),r.d(e,"RESUME_DESKTOP_SHARING",(function(){return F})),r.d(e,"CHECK_CHROME_SHARING_EXTENSION",(function(){return b})),r.d(e,"SWITCH_CANVAS_FOR_SHARING_CAPTURE",(function(){return w})),r.d(e,"CHANGE_CURRENT_SHARING_ACTIVE_SSRC",(function(){return W})),r.d(e,"COMMAND_SOCKET_MESSAGE_NOTIFY",(function(){return H})),r.d(e,"RESEND_REMOTE_CONTROL_POSITION_PDU",(function(){return k})),r.d(e,"AES_GCM_IV_VALUE",(function(){return K})),r.d(e,"USER_NODE_LIST",(function(){return Y})),r.d(e,"UPDATE_SHARING_DECODE_PARAM",(function(){return X})),r.d(e,"PAUSE_OR_RESUME_AUDIO_DECODE",(function(){return j})),r.d(e,"UPDATE_CANVAS_SIZE",(function(){return Q})),r.d(e,"CLEAR_CANVAS",(function(){return Z})),r.d(e,"ZOOM_RENDER",(function(){return z})),r.d(e,"CHANGE_SHARING_2ND_VIDEO_CAPTUREVIDEO_DEVICE",(function(){return J})),r.d(e,"SET_OTHER_AUDIO_VOLUME_LEVEL",(function(){return q})),r.d(e,"USER_NODE_AUDIO_STATUS_LIST",(function(){return $})),r.d(e,"UPDATE_MASK_CANVAS_SIZE",(function(){return tt})),r.d(e,"MOVE_PTZ_CAMERA",(function(){return et})),r.d(e,"START_STOP_REMOTE_CONTROL_CHECK",(function(){return rt})),r.d(e,"SEND_REMOTE_CONTROL_QR_CODE",(function(){return nt})),r.d(e,"AUDIO_CC_SELECT_LANGUAGE",(function(){return it})),r.d(e,"AUIOD_INTERPRETATION_MUTE",(function(){return ot})),r.d(e,"AUDIO_INTERPRETATION_SELECT_LANGUAGE",(function(){return ut})),r.d(e,"AUDIO_INTERPRETATION_LIST_INFO",(function(){return _t})),r.d(e,"AUDIO_INTERPRETATION_ENABLE",(function(){return at})),r.d(e,"VIDEO_MASK_SETTING",(function(){return Et})),r.d(e,"UPDATE_BG_IMAGE",(function(){return st})),r.d(e,"UPDATE_MASK_INFO",(function(){return ct})),r.d(e,"FINISH_MASK_SETTING",(function(){return dt})),r.d(e,"START_VIDEO_STREAM_IN_MASK_SETTING_SUCCESS",(function(){return ft})),r.d(e,"VIDEO_ENABLE_DECODE_HW",(function(){return Tt})),r.d(e,"VIDEO_ENABLE_ENCODE_HW",(function(){return ht})),r.d(e,"JOIN_DESKTOP_AUDIO",(function(){return Rt})),r.d(e,"LEAVE_DESKTOP_AUDIO",(function(){return Ot})),r.d(e,"SET_DESKTOP_VOLUME",(function(){return At})),r.d(e,"MIRROR_MY_VIDEO",(function(){return It})),r.d(e,"REMOVE_EXPIRED_CANVAS",(function(){return lt})),r.d(e,"WEBGL_LOST_REPLACE_CANVAS",(function(){return Dt})),r.d(e,"UPDATE_VIDEO_QUALITY",(function(){return St})),r.d(e,"SEND_RENDER_LOG",(function(){return Nt})),r.d(e,"USER_NODE_LIST_IN_MAIN_SESSION",(function(){return Ct})),r.d(e,"UPDATE_MEDIA_PARAMS",(function(){return pt})),r.d(e,"SHARING_ADD_REV_CHANNEL_TYPE",(function(){return mt})),r.d(e,"SHARING_REMOVE_REV_CHANNEL_TYPE",(function(){return vt})),r.d(e,"BUILD_MS_CHANNEL_IN_BO",(function(){return Ut})),r.d(e,"BUILD_MA_CHANNEL_IN_BO",(function(){return gt})),r.d(e,"ENABLE_SHARE_TO_BO",(function(){return Lt})),r.d(e,"ENABLE_BROADCAST_TO_BO",(function(){return xt})),r.d(e,"SWITCH_WATER_MARK_FLAG",(function(){return Mt})),r.d(e,"START_VIDEO_VB_SETTING",(function(){return Vt})),r.d(e,"UPDATE_VIDEO_VB_BG_IMAGE",(function(){return Pt})),r.d(e,"STOP_VIDEO_VB_SETTING",(function(){return yt})),r.d(e,"START_VIDEO_STREAM_IN_VB_SETTING_SUCCESS",(function(){return Gt})),r.d(e,"SWITCH_MASK_AND_VB",(function(){return Bt})),r.d(e,"VB_MODEL_PRELOADING_3S",(function(){return Ft})),r.d(e,"VB_MODEL_PRELOADING_10S",(function(){return bt})),r.d(e,"VB_MODEL_PRELOADING_OK",(function(){return wt})),r.d(e,"ENABLE_VIDEO_OBSERVER",(function(){return Wt})),r.d(e,"SWITCH_SHARING_TYPE",(function(){return Ht})),r.d(e,"CHANGE_HID_ENABLE",(function(){return kt})),r.d(e,"NEW_ACTIVE_SPEAKER_SSRC",(function(){return Kt})),r.d(e,"NEW_ACTIVE_SPEAKER_FIRST_FRAME_CALLBACK",(function(){return Yt})),r.d(e,"CANCEL_NEW_ACTIVE_SPEAKER_BEFORE_CALL_BACK",(function(){return Xt})),r.d(e,"NOTIFY_SDK_JOIN_RWG_SUCCESS",(function(){return jt})),r.d(e,"AUDIO_BRIDGE_FIRST_RECV_DATA",(function(){return Qt})),r.d(e,"AUDIO_BRIDGE_CAN_SEND_DATA",(function(){return Zt})),r.d(e,"FIRST_VIDEO_FRAME",(function(){return zt})),r.d(e,"PREVIEW_INIT_VIDEO_DECODE_SUCCESS",(function(){return Jt})),r.d(e,"PREVIEW_INIT_AUDIO_DECODE_SUCCESS",(function(){return qt})),r.d(e,"WHITEBOARD_JOIN_MESSAGE",(function(){return $t})),r.d(e,"AUDIO_DENOISE_SWITCH",(function(){return te})),r.d(e,"SET_CODEC_MODE",(function(){return ee})),r.d(e,"STOP_AUDIO_INCOMING",(function(){return re})),r.d(e,"MOBILE_ROTATE",(function(){return ne})),r.d(e,"SAVE_LOCAL_LOG",(function(){return ie})),r.d(e,"CHANGE_AUDIO_PROFILE",(function(){return oe})),r.d(e,"AUDIO_JOIN_SUCCESS",(function(){return ue})),r.d(e,"SHARE_2ND_AUDIO_CAPTURE_DEVICE",(function(){return _e})),r.d(e,"ON_HOLD",(function(){return ae})),r.d(e,"Audio_Dec_WASM_OK",(function(){return Ee})),r.d(e,"Audio_Dec_Handle_OK",(function(){return se})),r.d(e,"Audio_Dec_WebSocket_OK",(function(){return ce})),r.d(e,"Audio_Enc_WASM_OK",(function(){return de})),r.d(e,"Audio_Enc_Handle_OK",(function(){return fe})),r.d(e,"Video_Dec_WASM_OK",(function(){return Te})),r.d(e,"Video_Dec_Handle_OK",(function(){return he})),r.d(e,"Video_Dec_WebSocket_OK",(function(){return Re})),r.d(e,"Video_Enc_WASM_OK",(function(){return Oe})),r.d(e,"Video_Enc_Handle_OK",(function(){return Ae})),r.d(e,"Sharing_Dec_WASM_OK",(function(){return Ie})),r.d(e,"Sharing_Dec_PICTURE",(function(){return le})),r.d(e,"AUDIO_DELAY",(function(){return De})),r.d(e,"Sharing_Dec_WebSocket_OK",(function(){return Se})),r.d(e,"Sharing_Handle_OK",(function(){return Ne})),r.d(e,"Sharing_Data",(function(){return Ce})),r.d(e,"DECODE_MESSAGE",(function(){return pe})),r.d(e,"Video_Enc_WebSocket_OK",(function(){return me})),r.d(e,"Video_Capture_Tick",(function(){return ve})),r.d(e,"MONITOR_MESSAGE",(function(){return Ue})),r.d(e,"SHARING_DECODE_MONITOR_MESSAGE",(function(){return ge})),r.d(e,"WORKER_MAIN_VIDEO_ENCODE_RINGBUFFER_TICK",(function(){return Le})),r.d(e,"WORKER_MAIN_AUDIO_ENCODE_RINGBUFFER_TICK",(function(){return xe})),r.d(e,"WORKER_MAIN_VIDEO_DECODE_RINGBUFFER_TICK",(function(){return Me})),r.d(e,"Audio_Encode_Preview_OK",(function(){return Ve})),r.d(e,"Video_Encode_Preview_OK",(function(){return Pe})),r.d(e,"DOWNLOAD_WASM_FROM_MAIN_THREAD",(function(){return ye})),r.d(e,"APP_TROUBLESHOOTING_INFO",(function(){return Ge})),r.d(e,"DELTA_D",(function(){return Be})),r.d(e,"DELTA_C",(function(){return Fe})),r.d(e,"DELTA_S",(function(){return be})),r.d(e,"WCL_TROUBLESHOOTING_INFO",(function(){return we})),r.d(e,"SHARING_DATA_VIDEO_MODE",(function(){return We})),r.d(e,"MOUSE_DATA_VIDEO_MODE",(function(){return He})),r.d(e,"SHARING_DECODE_MESSAGE",(function(){return ke})),r.d(e,"VIDEO_ENCODED_DATA",(function(){return Ke})),r.d(e,"VIDEO_DROP_RATIO_FROM_WCL",(function(){return Ye})),r.d(e,"VIDEO_DATA_DROP_RATIO",(function(){return Xe})),r.d(e,"AUDIO_ENCODED_DATA",(function(){return je})),r.d(e,"THREAD_ENCODE_BUFFER",(function(){return Qe})),r.d(e,"WASMPTR",(function(){return Ze})),r.d(e,"AUDIO_MONITOR_LOG",(function(){return ze})),r.d(e,"AUDIO_PREVIEW_ASN",(function(){return Je})),r.d(e,"VIDEO_RESOLUTION_UPDATE",(function(){return qe})),r.d(e,"VIDEO_RENDER_MONITOR_LOG",(function(){return $e})),r.d(e,"Sharing_Width_And_Height_Info",(function(){return tr})),r.d(e,"SHARING_RENDER_MONITOR_LOG",(function(){return er})),r.d(e,"SHARING_GET_IMAGE_DATA_WRONG",(function(){return rr})),r.d(e,"AES_GCM_IV_TO_WASM",(function(){return nr})),r.d(e,"AES_GCM_IV_CALLBACK_FROM_WASM",(function(){return ir})),r.d(e,"CURRENT_SSRC_TIME",(function(){return or})),r.d(e,"HARDWARE_VIDEO_INFO_LOG",(function(){return ur})),r.d(e,"WhiteBoard_Video_Capture_Tick",(function(){return _r})),r.d(e,"Video_Sharing_Handle_OK",(function(){return ar})),r.d(e,"Audio_Dec_WASM_FAILED",(function(){return Er})),r.d(e,"Audio_Dec_Handle_FAILED",(function(){return sr})),r.d(e,"Audio_Dec_WebSocket_FAILED",(function(){return cr})),r.d(e,"Audio_Enc_WASM_FAILED",(function(){return dr})),r.d(e,"Audio_Enc_Handle_FAILED",(function(){return fr})),r.d(e,"Video_Dec_WASM_FAILED",(function(){return Tr})),r.d(e,"Video_Dec_Handle_FAILED",(function(){return hr})),r.d(e,"Video_Dec_WebSocket_FAILED",(function(){return Rr})),r.d(e,"Video_Enc_WASM_FAILED",(function(){return Or})),r.d(e,"Video_Enc_Handle_FAILED",(function(){return Ar})),r.d(e,"Sharing_Dec_WASM_FAILED",(function(){return Ir})),r.d(e,"Audio_Mute",(function(){return lr})),r.d(e,"Sharing_Handle_FAILED",(function(){return Dr})),r.d(e,"Sharing_Dec_WebSocket_FAILED",(function(){return Sr})),r.d(e,"Video_Enc_WebSocket_FAILED",(function(){return Nr})),r.d(e,"MULTIVIEW_WEBGL_CONTEXT_LOST",(function(){return Cr})),r.d(e,"WEBGL_CONTEXT_CREATE_FAILED",(function(){return pr})),r.d(e,"Video_Sharing_Handle_FAILED",(function(){return mr})),r.d(e,"MEDIA_HEALTH_CHECK_FAILED",(function(){return vr})),r.d(e,"INIT_SUCCESS",(function(){return Ur})),r.d(e,"INIT_SUCCESS_VIDEO",(function(){return gr})),r.d(e,"INIT_SUCCESS_AUDIO",(function(){return Lr})),r.d(e,"INIT_SUCCESS_SHARING",(function(){return xr})),r.d(e,"USER_GRANT_CAPTURE_AUDIO",(function(){return Mr})),r.d(e,"CURRENT_VIDEO_RESOLUTION",(function(){return Vr})),r.d(e,"SHARING_DEC_THREAD_OK",(function(){return Pr})),r.d(e,"SHARING_DATA",(function(){return yr})),r.d(e,"SHARING_PARA",(function(){return Gr})),r.d(e,"SHARING_MORE_INFO",(function(){return Br})),r.d(e,"VIDEO_DECODE_MAX_SIZE",(function(){return Fr})),r.d(e,"CURRENT_CAPTURE_VIDEO_WIDTH_HEIGHT",(function(){return br})),r.d(e,"START_VIDEO_CAPTURE_SUCCESS",(function(){return wr})),r.d(e,"STOP_VIDEO_CAPTURE_SUCCESS",(function(){return Wr})),r.d(e,"START_REMOTE_CONTROL_SUCCESS",(function(){return Hr})),r.d(e,"CANCEL_REMOTE_CONTROL_SUCCESS",(function(){return kr})),r.d(e,"REMOTE_CONTROL_COPIED_TEXT_NOTIFY",(function(){return Kr})),r.d(e,"MONITOR_LOG",(function(){return Yr})),r.d(e,"CURRENT_DESKTOP_SHARING_WIDTH_HEIGHT",(function(){return Xr})),r.d(e,"DESKTOP_SHARING_CAPTURE_SUCCESS",(function(){return jr})),r.d(e,"CHECK_CHROME_SHARING_EXTENSION_RESPONSE",(function(){return Qr})),r.d(e,"SHARING_DECODE_MAX_SIZE",(function(){return Zr})),r.d(e,"REQUEST_AUDIO_BRIDGE_TOKEN",(function(){return zr})),r.d(e,"SEND_MESSAGE_TO_RWG",(function(){return Jr})),r.d(e,"AES_GCM_IV_RESPONSE",(function(){return qr})),r.d(e,"WCL_SIP_CREATE_SUCCESS",(function(){return $r})),r.d(e,"SHARING_DESKTOP_STREAM_HAVE_AUDIO",(function(){return tn})),r.d(e,"JOIN_COMPUTER_AUDIO_COMPLETE",(function(){return en})),r.d(e,"JOIN_DESKTOP_AUDIO_COMPLETE",(function(){return rn})),r.d(e,"LEAVE_COMPUTER_AUDIO_COMPLETE",(function(){return nn})),r.d(e,"LEAVE_DESKTOP_AUDIO_COMPLETE",(function(){return on})),r.d(e,"HID_STATUS_MUTE",(function(){return un})),r.d(e,"HID_STATUS_OFF_HOOK",(function(){return _n})),r.d(e,"WB_MESSAGE",(function(){return an})),r.d(e,"AUDIO_STREAM_FAILED",(function(){return En})),r.d(e,"VIDEO_STREAM_FAILED",(function(){return sn})),r.d(e,"AUDIO_SPEAKER_SET_SUCCESS",(function(){return cn})),r.d(e,"FIRST_IOS_FRAME",(function(){return dn})),r.d(e,"AUDIOBRIDGE_EBABLE_SHARE_TO_BO_SUCCESS",(function(){return fn})),r.d(e,"AUDIOBRIDGE_SET_CC_LANG_SUCCESS",(function(){return Tn})),r.d(e,"AUDIOBRIDGE_ENABLE_BROADCAST_TO_BO_SUCCESS",(function(){return hn})),r.d(e,"AUDIO_LEVEL_INDICATOR",(function(){return Rn})),r.d(e,"SYNC_RENDERER_TYPE_RESPONSE",(function(){return On})),r.d(e,"INIT_FAILED",(function(){return An})),r.d(e,"INIT_FAILED_VIDEO",(function(){return In})),r.d(e,"INIT_FAILED_AUDIO",(function(){return ln})),r.d(e,"INIT_FAILED_SHARING",(function(){return Dn})),r.d(e,"USER_FORBIDDED_CAPTURE_AUDIO",(function(){return Sn})),r.d(e,"AUDIO_WEBSOCKET_BROKEN",(function(){return Nn})),r.d(e,"VIDEO_WEBSOCKET_BROKEN",(function(){return Cn})),r.d(e,"SHARING_DEC_THREAD_FAILED",(function(){return pn})),r.d(e,"AUDIO_ZERO_DATA",(function(){return mn})),r.d(e,"AUDIO_CTX_SAMPLERATE",(function(){return vn})),r.d(e,"USER_FORBIDDED_CAPTURE_VIDEO",(function(){return Un})),r.d(e,"USER_CAMERA_IS_TAKEN_BY_OTHER_PROGRAMS",(function(){return gn})),r.d(e,"STOP_VIDEO_CAPTURE_FAILED",(function(){return Ln})),r.d(e,"START_REMOTE_CONTROL_FAILED",(function(){return xn})),r.d(e,"CANCEL_REMOTE_CONTROL_FAILED",(function(){return Mn})),r.d(e,"REMOTE_CONTROL_PASTE_TEXT_LENGTH_OVERFLOW",(function(){return Vn})),r.d(e,"USER_STOP_DESKTOP_SHARING",(function(){return Pn})),r.d(e,"USER_CANCEL_PERMISSION_REQUEST",(function(){return yn})),r.d(e,"DESKTOP_SHARING_CHROME_EXTENSION_UNINSTALLED",(function(){return Gn})),r.d(e,"DESKTOP_SHARING_PERMISSION_DENIED",(function(){return Bn})),r.d(e,"DESKTOP_SHARING_TIME_OUT",(function(){return Fn})),r.d(e,"DESKTOP_SHARING_ERROR",(function(){return bn})),r.d(e,"AUDIO_SPEAKER_SET_ERROR",(function(){return wn})),r.d(e,"DESKTOP_SHARING_SYSTEM_ERROR",(function(){return Wn})),r.d(e,"AUDIO_CLIPPING",(function(){return Hn})),r.d(e,"AUDIO_AUTO_PLAY_FAILED",(function(){return kn})),r.d(e,"WCL_SIP_HUNGUP_FAILED",(function(){return Kn})),r.d(e,"WCL_SIP_WEBSOCKET_DISCONNECTED",(function(){return Yn})),r.d(e,"WCL_SIP_WEBSOCKET_CONNECT_ERROR",(function(){return Xn})),r.d(e,"SHARING_DESKTOP_STREAM_HAVE_NO_AUDIO",(function(){return jn})),r.d(e,"WCL_AUDIO_BRIDGE_RECONNECT_START",(function(){return Qn})),r.d(e,"WCL_AUDIO_BRIDGE_RECONNECT_END",(function(){return Zn})),r.d(e,"WCL_SIP_REJECT_INVITE",(function(){return zn})),r.d(e,"WEBGL_LOST_IN_MULTI_VIEW",(function(){return Jn})),r.d(e,"MASK_SETTING_PARA_ERROR",(function(){return qn})),r.d(e,"VIDEO_VB_SETTING_PARA_ERROR",(function(){return $n})),r.d(e,"NOTIFY_UI_FAILOVER",(function(){return ti})),r.d(e,"RECOVER_WEBRTC_AUDIO",(function(){return ei})),r.d(e,"AUDIO_CONNECT_HID_JOIN_FAILED",(function(){return ri})),r.d(e,"JOIN_COMPUTER_AUDIO_FAILURE",(function(){return ni})),r.d(e,"AUDIOBRIDGE_EBABLE_BROADCAST_TO_BO_FAILURE",(function(){return ii})),r.d(e,"AUDIOBRIDGE_SET_CC_LANG_FAILURE",(function(){return oi})),r.d(e,"AUDIOBRIDGE_EBABLE_SHARE_TO_BO_FAILURE",(function(){return ui})),r.d(e,"AUDIO_MIC_SET_ERROR",(function(){return _i})),r.d(e,"NOTIFY_UI_WMSC_FAILOVER",(function(){return ai})),r.d(e,"NOTIFY_UI_WMSC_WSS_DISCONNECTED",(function(){return Ei})),r.d(e,"AUDIO_STOP",(function(){return si})),r.d(e,"AUDIO_START",(function(){return ci})),r.d(e,"AUDIO_REMOVE",(function(){return di})),r.d(e,"AUDIO_ILLEGAL",(function(){return fi})),r.d(e,"SHARING_PARAM_INFO_FROM_SOCKET",(function(){return Ti})),r.d(e,"VIDEO_DATA_FROM_WORKER",(function(){return hi})),r.d(e,"AUDIO_DATA_FROM_WORKER",(function(){return Ri})),r.d(e,"VIDEO_ENCODE_DATA_FROM_WORKER",(function(){return Oi})),r.d(e,"ZOOM_CONNECTION_VIDEO_OFFER_EVT",(function(){return Ai})),r.d(e,"ZOOM_CONNECTION_VIDEO_OFFER_RESPONSE_EVT",(function(){return Ii})),r.d(e,"ZOOM_CONNECTION_AUDIO_OFFER_RESPONSE_EVT",(function(){return li})),r.d(e,"ZOOM_CONNECTION_REMOVE_UDP_EVT",(function(){return Di})),r.d(e,"EVT_TYPE_WS_VIDEO_DATACHANNEL_ANSWER",(function(){return Si})),r.d(e,"WS_CONF_AB_TOKEN_REQ",(function(){return Ni})),r.d(e,"WS_CONF_AB_TOKEN_RES",(function(){return Ci})),r.d(e,"WS_CONF_END_INDICATION",(function(){return pi})),r.d(e,"WS_VIDEO_MULTI_SUBSCRIBE_REQ",(function(){return mi})),r.d(e,"WS_VIDEO_MULTI_UNSUBSCRIBE_REQ",(function(){return vi})),r.d(e,"RWG_MONITOR_LOG_EVENT",(function(){return Ui})),r.d(e,"PUBSUB_EVT",(function(){return gi})),r.d(e,"CURRENT_CAPTURE_VIDEO_WIDTH_HEIGHT_FROM_WORKER",(function(){return Li})),r.d(e,"CURRENT_DESKTOP_SHARING_WIDTH_HEIGHT_FROM_WORKER",(function(){return xi})),r.d(e,"SHARING_FIRST_DECODE_FRAME_RECEIVED",(function(){return Mi})),r.d(e,"SHARING_FIRST_DECODE_FRAME_RECEIVED_SSRC",(function(){return Vi})),r.d(e,"VIDEO_CAPTURER_RESOLUTION_CHANGE",(function(){return Pi})),r.d(e,"VIDEO_CAPTURE_FRAME_COUNT_STATISTIC",(function(){return yi})),r.d(e,"SHARING_CAPTURE_FRAME_COUNT_STATISTIC",(function(){return Gi})),r.d(e,"UNSUPPORTED_SHARING_FORMAT",(function(){return Bi})),r.d(e,"UNSUPPORTED_VIDEO_FORMAT",(function(){return Fi})),r.d(e,"FIRST_SHARING_FRAME_FOR_MOBILE",(function(){return bi})),r.d(e,"MEDIA_VIDEO_REPORT_DROP_RATIO",(function(){return wi})),r.d(e,"MEDIA_VIDEO_REPORT_RTT",(function(){return Wi})),r.d(e,"CONNECT_WEBTRANSPORT_OK",(function(){return Hi})),r.d(e,"CONNECT_WEBTRANSPORT_CLOSE",(function(){return ki})),r.d(e,"CURRENT_MEDIA_DATA_TRANSPORT_TYPE",(function(){return Ki})),r.d(e,"CONNECT_WEBSOCKET_CLOSE",(function(){return Yi})),r.d(e,"CURRENT_ENCODED_TYPE",(function(){return Xi})),r.d(e,"VIDEO_SHARING_CAPTURER_RESOLUTION_CHANGE",(function(){return ji})),r.d(e,"RQUEST_ANIMATION_MODE",(function(){return Qi})),r.d(e,"SET_INTERVAL_MODE",(function(){return Zi})),r.d(e,"HAVE_NO_WATERMARK",(function(){return zi})),r.d(e,"HAVE_WATERMARK",(function(){return Ji})),r.d(e,"DATA_DIRECTION_FROM_RECEIVE",(function(){return qi})),r.d(e,"DATA_DIRECTION_FROM_SEND",(function(){return $i})),r.d(e,"RWG_WCL_PDU_QOS_DATA",(function(){return to})),r.d(e,"RWG_WCL_PDU_QOS_DATA_VIDEO",(function(){return eo})),r.d(e,"WHITEBOARD_WORKER_MESSAGE",(function(){return ro})),r.d(e,"SPEAKING_WHEN_MUTE",(function(){return no})),r.d(e,"SUBSCRIBE_VIDEO",(function(){return io})),r.d(e,"UNSUBSCRIBE_VIDEO",(function(){return oo})),r.d(e,"UI_SUBSCRIBE_VIDEO",(function(){return uo})),r.d(e,"UI_UNSUBSCRIBE_VIDEO",(function(){return _o})),r.d(e,"MOBILE_CAPTURE_DEVICE_CHANGE",(function(){return ao})),r.d(e,"AUDIO_QOS_DATA",(function(){return Eo})),r.d(e,"VIDEO_QOS_DATA",(function(){return so})),r.d(e,"VIDEOSHARE_QOS_DATA",(function(){return co})),r.d(e,"NETWORK_QUALITY_CHANGE",(function(){return fo})),r.d(e,"NETWORK_QUALITY_CHANGE_AUDIO",(function(){return To})),r.d(e,"sdkIvTypeKeyEnum",(function(){return ho})),r.d(e,"CURRENT_DECODE_VIDEO_QUALITY",(function(){return Ro})),r.d(e,"CURRENT_DECODE_VIDEO_FPS",(function(){return Oo})),r.d(e,"ENABLE_REUSE_STREAM",(function(){return Ao})),r.d(e,"PRESET_MEDIA_CONSTRAINTS",(function(){return Io})),r.d(e,"DESTORY_REUSE_STREAM",(function(){return lo})),r.d(e,"VB_SETTING_PARA_ERROR_TYPE",(function(){return Do})),r.d(e,"AUDIO_STREAM_MUTED",(function(){return So})),r.d(e,"AUDIO_STREAM_UNMUTED",(function(){return No})),r.d(e,"EXPOSE_VB_FRAME",(function(){return Co})),r.d(e,"UNIFIED_VB_FRAME",(function(){return po})),r.d(e,"UNIFIED_VB_STOP",(function(){return mo})),r.d(e,"UNIFIED_VB_PAUSE",(function(){return vo})),r.d(e,"UNIFIED_VB_ACK",(function(){return Uo}));var n=0,i=1,o=2,u=3,_=4,a=5,E=6,s=7,c=8,d=9,f=10,T=11,h=12,R=13,O=14,A=15,I=16,l=17,D=18,S=19,N=20,C=21,p=22,m=23,v=24,U=25,g=26,L=27,x=28,M=29,V=30,P=30.1,y=31,G=31.1,B=32,F=33,b=34,w=35,W=36,H=40,k=41,K=42,Y=43,X=44,j=45,Q=46,Z=47,z=48,J=49,q=50,$=51,tt=52,et=53,rt=54,nt=55,it=57,ot=58,ut=59,_t=60,at=61,Et=62,st=63,ct=64,dt=65,ft=66,Tt=70,ht=71,Rt=72,Ot=73,At=74,It=75,lt=76,Dt=77,St=78,Nt=79,Ct=80,pt=81,mt=82,vt=83,Ut=84,gt=85,Lt=86,xt=87,Mt=90,Vt=91,Pt=92,yt=93,Gt=94,Bt=95,Ft=96,bt=97,wt=98,Wt=99,Ht=101,kt=100,Kt=110,Yt=111,Xt=112,jt=113,Qt=114,Zt=115,zt=116,Jt=117,qt=118,$t=120,te=121,ee=122,re=123,ne=124,ie=125,oe=126,ue=127,_e=129,ae=136,Ee=1,se=2,ce=3,de=4,fe=5,Te=7,he=8,Re=9,Oe=10,Ae=11,Ie=12,le=13,De=14,Se=15,Ne=16,Ce=17,pe=18,me=19,ve=20,Ue=21,ge=3021,Le=22,xe=23,Me=24,Ve=26,Pe=27,ye=30,Ge=31,Be=32,Fe=33,be=34,we=35,We=36,He=37,ke=38,Ke=39,Ye=40,Xe=41,je=42,Qe=46,Ze=47,ze=48,Je=49,qe=50,$e=51,tr=52,er=53,rr=54,nr=55,ir=56,or=57,ur=58,_r=60,ar=62,Er=-1,sr=-2,cr=-3,dr=-4,fr=-5,Tr=-7,hr=-8,Rr=-9,Or=-10,Ar=-11,Ir=-12,lr=-13,Dr=-14,Sr=-15,Nr=-16,Cr=-26,pr=-27,mr=-28,vr=-129,Ur=1,gr=1.1,Lr=1.2,xr=1.3,Mr=2,Vr=3,Pr=4,yr=5,Gr=6,Br=6.1,Fr=7,br=8,wr=9,Wr=10,Hr=11,kr=12,Kr=13,Yr=14,Xr=15,jr=16,Qr=17,Zr=18,zr=19,Jr=20,qr=21,$r=22,tn=23,en=24,rn=25,nn=26,on=27,un=28,_n=29,an=30,En=31,sn=32,cn=33,dn=34,fn=35,Tn=36,hn=37,Rn=38,On=39,An=-1,In=-1.1,ln=-1.2,Dn=-1.3,Sn=-2,Nn=-3,Cn=-4,pn=-5,mn=-6,vn=-7,Un=-8,gn=-9,Ln=-10,xn=-11,Mn=-12,Vn=-14,Pn=-15,yn=-16,Gn=-17,Bn=-18,Fn=-19,bn=-20,wn=-21,Wn=-22,Hn=-23,kn=-24,Kn=-25,Yn=-26,Xn=-28,jn=-27,Qn=-29,Zn=-31,zn=-30,Jn=-32,qn=-33,$n=-34,ti=-35,ei=-36,ri=-24,ni=-37,ii=-38,oi=-39,ui=-40,_i=-41,ai=-42,Ei=-43,si=0,ci=1,di=2,fi=-1,Ti="SHARING_PARAM_INFO_FROM_SOCKET",hi="VIDEO_DATA_FROM_WORKER",Ri="AUDIO_DATA_FROM_WORKER",Oi="VIDEO_ENCODE_DATA_FROM_WORKER",Ai=24321,Ii=24322,li=24322,Di=24323,Si=24322,Ni=4300,Ci=4299,pi=7939,mi=12303,vi=12305,Ui=4167,gi={ZOOM_CONNECTION_VIDEO_OFFER_RESPONSE_EVT:"ZOOM_CONNECTION_VIDEO_OFFER_RESPONSE_EVT",ZOOM_CONNECTION_AUDIO_OFFER_RESPONSE_EVT:"ZOOM_CONNECTION_AUDIO_OFFER_RESPONSE_EVT",END_MEDIA:"END_MEDIA",DESTROY:"DESTROY",DC_COMING_MESSAGE:"DC_COMING_MESSAGE",AUDIO_BRIDGE_WS_TOKEN:"AUDIO_BRIDGE_WS_TOKEN"},Li=67,xi=68,Mi=69,Vi=70,Pi=71,yi=72,Gi=73,Bi=75,Fi=76,bi=78,wi=100,Wi=101,Hi=105,ki=106,Ki=107,Yi=108,Xi=109,ji=110,Qi=0,Zi=1,zi=!1,Ji=!0,qi=0,$i=1,to=108,eo=104,ro=120,no=121,io=130,oo=131,uo=132,_o=133,ao=135,Eo="AUDIO_QOS_DATA",so="VIDEO_QOS_DATA",co="VIDEOSHARE_QOS_DATA",fo="NETWORK_QUALITY_CHANGE",To="NETWORK_QUALITY_CHANGE_AUDIO",ho={VIDEO_ENCODE:"0",VIDEO_DECODE:"1",AUDIO_ENCODE:"2",AUDIO_DECODE:"3",SHARING_ENCODE:"4",SHARING_DECODE:"5"},Ro=66.5,Oo=66.6,Ao="ENABLE_REUSE_STREAM",Io="PRESET_MEDIA_CONSTRAINTS",lo="DESTORY_REUSE_STREAM",Do={FAIL:4},So="AUDIO_STREAM_MUTED",No="AUDIO_STREAM_UNMUTED",Co="EXPOSE_VB_FRAME",po="UNIFIED_VB_FRAME",mo="UNIFIED_VB_STOP",vo="UNIFIED_VB_PAUSE",Uo="UNIFIED_VB_ACK"},function(t,e,r){"use strict";r.r(e);var n=r(6),i=r.n(n),o=r(1),u=r(3),_=r.n(u),a=r(4),E=r.n(a),s=(r(2),r(0),function(){function t(){_()(this,t),this._highFrequencyLogs={}}return E()(t,[{key:"setInstance",value:function(t){this._instance=t}},{key:"getMessageFromErrorOrEvent",value:function(t,e){var r=t;return e instanceof ErrorEvent?(e.filename&&(r+=" File: ".concat(e.filename)),(e.lineno||e.colno)&&(r+=" Line: ".concat(e.lineno,":").concat(e.colno)),e.message&&(r+=" Message: ".concat(e.message)),e.error&&(r+="\nStack: ".concat(e.error.stack))):e instanceof Error?(e.fileName&&(r+=" File: ".concat(e.fileName)),(e.lineNumber||e.columnNumber)&&(r+=" Line: ".concat(e.lineNumber,":").concat(e.columnNumber)),e.message&&(r+=" Message: ".concat(e.message)),e.stack&&(r+=" Stack: ".concat(e.stack)),e.name&&(r+=" Name: ".concat(e.name)),e.constraint&&(r+=" Constraint: ".concat(e.constraint))):e instanceof CloseEvent?(e.code&&(r+=" Code: ".concat(e.code)),e.reason&&(r+=" Reason: ".concat(e.reason)),r+=" wasClean: ".concat(e.wasClean)):e instanceof DOMException?(e.message&&(r+=" Message: ".concat(e.message)),e.name&&(r+=" Name: ".concat(e.name))):r+=e?e.toString():"",r}},{key:"error",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t=this.getMessageFromErrorOrEvent(t,e),this._highFrequencyLogs[t]?this._highFrequencyLogs[t]+=1:this._highFrequencyLogs[t]=1;var r=c(this._highFrequencyLogs[t]);this._instance&&r&&this._instance.error(t)}},{key:"severityerror",value:function(t,e){this._instance&&this._instance.error(JSON.stringify(t),e)}},{key:"warn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t=this.getMessageFromErrorOrEvent(t,e),this._instance&&this._instance.warn(t)}},{key:"log",value:function(t){this._instance&&this._instance.log(t)}},{key:"clearHighFrequencyLogs",value:function(){this._highFrequencyLogs={}}}]),t}()),c=function(t){return 0==(t&t-1)},d=new s;var f="undefined"!=typeof window;function T(t){var e,r,n,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(u instanceof Error||u instanceof ErrorEvent)&&(t+="Message: "+(null===(e=u)||void 0===e?void 0:e.message)+" Stack: "+(null!==(r=null===(n=u)||void 0===n||null===(n=n.error)||void 0===n?void 0:n.stack)&&void 0!==r?r:null===(i=u)||void 0===i?void 0:i.stack),u=null);postMessage({status:o.GLOBAL_TRACING_LOG,errorMessage:t,errorEvent:u})}var h=["","MOZ_","OP_","WEBKIT_"];function R(t,e){for(var r=0;r<h.length;++r){var n=h[r]+e,i=t.getExtension(n);if(i)return i}}var O=function(){function t(){_()(this,t),this.ssrcInfoMap=new Map,this.timer=null}return E()(t,[{key:"updateSSRCInfo",value:function(t,e){this.ssrcInfoMap.has(t)||this.ssrcInfoMap.set(t,{firstTime:0,lastTime:0,frames:0,fps:0}),this._calculateFPS(t,e),this._removeZeroFPS()}},{key:"_calculateFPS",value:function(t,e){var r=this.ssrcInfoMap.get(t);if(0===r.frames?r.firstTime=e:r.lastTime=e,r.frames+=1,r.frames>2&&r.frames%5==0&&r.lastTime-r.firstTime>=1e3){var n=Math.floor(1e3/((r.lastTime-r.firstTime)/(r.frames-1)));r.fps!==n&&(this._notifyFPS(t,n),r.fps=n),r.firstTime=r.lastTime,r.frames=1}}},{key:"_removeZeroFPS",value:function(){var t=this,e=Date.now();this.ssrcInfoMap.forEach((function(r,n){var i=t.ssrcInfoMap.get(n);i&&e-i.lastTime>2e3&&(t.ssrcInfoMap.delete(n),t._notifyFPS(n,0))}))}},{key:"_notifyFPS",value:function(t,e){postMessage({status:o.CURRENT_DECODE_VIDEO_FPS,data:{ssrc:t,fps:e}})}},{key:"_checkIfNewFrameComing",value:function(){var t=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((function(){t._removeZeroFPS(),t.timer=null}),2500)}}]),t}();new Map,new O;function A(t,e){var r=Math.pow(10,e);return Math.floor(t*r)/r}function I(t,e){var r=Math.pow(10,e);return Math.ceil(t*r)/r}var l=new Map,D=[];function S(t){t.preventDefault()}function N(t,e,r,n,i,u,_){this.canvasElement=t,this.canvasID=e,this.contextOptions=i,this.textureindex=r||0,this.texturestride=this.textureindex?3:_?4:6,this.initmask=_||!1,this.reuse=!1,N.prototype.ROTATION_CLOCK0=0,N.prototype.ROTATION_CLOCK90=1,N.prototype.ROTATION_CLOCK180=2,N.prototype.ROTATION_CLOCK270=3,this.webGLResources=u,u||(this.initContextGL(),this.contextGL&&(this.webGLContextLostProtect(),this.contextGL.isContextLost()&&this.restoreContext())),this.reinit(u);var a=new ArrayBuffer(4);this.dummpyCursor=new Uint8Array(a),this.dummpyWaterMark=new Uint8Array(a),this.cursorWidth=0,this.cursorHeight=0,this.hasCursor=0,this.hasWaterMark=0,this.watermarkOpacity=.15,this.watermarkData=null,this.watermarkWidth=0,this.watermarkHeight=0,this.isMultiView=!1,this.hasWholeFrame=0,this.croppingParams={},this.croppingParams.top=0,this.croppingParams.left=0,this.croppingParams.width=0,this.croppingParams.height=0,this.textureWidth=0,this.textureHeight=0,this.canvasWidth=0,this.canvasHeight=0,this.picRotation=-1,this.bgColor=[0,0,0],this.cx=0,this.cy=0,this.cw=0,this.ch=0,this.colorRange=-1,this.videoMode=o.VIDEO_INVALID,this.rotation=this.ROTATION_CLOCK0,this.fillMode=0,this.fillModeForResolution=0}function C(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=t.contextGL,u=o.canvas.width,_=o.canvas.height;i&&(u=i.width,_=i.height);var a,E,s,c,d=n==t.ROTATION_CLOCK90||n==t.ROTATION_CLOCK270?r:e,f=n==t.ROTATION_CLOCK90||n==t.ROTATION_CLOCK270?e:r,T=d/f*_,h=f/d*u;T>u?(a=0,s=1,c=1-(E=(_-h)/2/_)):(E=0,c=1,s=1-(a=(u-T)/2/u)),a=2*a-1,s=2*s-1,E=1-2*E,c=1-2*c;var R=new Float32Array([s,E,a,E,s,c,a,c,s,E,a,E,s,c,a,c]);o.bindBuffer(o.ARRAY_BUFFER,t.vertexPosBuffer),o.bufferData(o.ARRAY_BUFFER,R,o.DYNAMIC_DRAW)}function p(t,e,r,n,o){var u=t.contextGL,_=n.top/r,a=n.left/e,E=_+(n.height-1)/r,s=a+n.width/e,c=[a,_,s,_,s,E,a,E];o==t.ROTATION_CLOCK90&&(c.unshift(c[6],c[7]),c=c.slice(0,8)),o==t.ROTATION_CLOCK180&&(c.unshift(c[4],c[5],c[6],c[7]),c=c.slice(0,8)),o==t.ROTATION_CLOCK270&&(c.push(c[0],c[1]),c=c.slice(2));var d=c[0],f=c[1];c[0]=c[2],c[1]=c[3],c[2]=d,c[3]=f;var T=new Float32Array([].concat(i()(c),[1,0,0,0,1,1,0,1]));u.bindBuffer(u.ARRAY_BUFFER,t.texturePosBuffer),u.bufferData(u.ARRAY_BUFFER,T,u.DYNAMIC_DRAW)}N.prototype.reinit=function(t){if(this.webGLResources=t,!this.contextGL||this.contextGL.isContextLost()||this.contextGL.glInitSucceed||this.webGLResources){if(this.webGLResources&&this.webGLResources.contextgl&&!this.webGLResources.contextgl.isContextLost()){this.contextGL=this.webGLResources.contextgl,this.shaderProgram=this.webGLResources.program,this.waterMarkTextureRef=this.webGLResources.waterMarkTextureRef,this.repeatedWaterMarkTextureRef=this.webGLResources.repeatedWaterMarkTextureRef,this.initTextures(!1),this.vertexPosBuffer=this.webGLResources.vBuffer,this.texturePosBuffer=this.webGLResources.tBuffer;var e=this.contextGL.getError();this.contextGL.glInitSucceed=e!=this.contextGL.NO_ERROR&&e!=this.contextGL.CONTEXT_LOST_WEBGL?0:1}}else{this.initProgram(),this.initmask?this.initTextures(!1):this.initTextures(!0),this.initBuffers();var r=this.contextGL.getError();this.contextGL.glInitSucceed=r!=this.contextGL.NO_ERROR&&r!=this.contextGL.CONTEXT_LOST_WEBGL?0:1}},N.prototype.webGLContextLostSimulate=function(){var t="undefined"==typeof window?self:window;t.webGLEXTSimulate=t.webGLEXTSimulate||[],t.webGLEXTSimulate.push(R(this.contextGL,"WEBGL_lose_context")),console.log("\n    webGLEXTSimulate[0].loseContext()\n    webGLEXTSimulate[0].restoreContext()\n    ")},N.prototype.restoreContext=function(){if(this.contextGL)try{var t,e;if(null!==(t=this.canvasElement)&&void 0!==t&&t.loseContextExtension&&this.contextGL.isContextLost())null===(e=this.canvasElement)||void 0===e||e.loseContextExtension.restoreContext()}catch(t){T("restoreContext exception: ".concat(JSON.stringify(t)))}},N.prototype.webgGLContextLostCallback=function(t){T("webglcontextlost event: canvas listener size=".concat(D.length,",  canvas id: ").concat(this.canvasID,", , ids:").concat(D.join())),t.preventDefault(),this.contextGL.glInitSucceed=0,this.contextOptions&&this.contextOptions.webglcontextlostCallback&&this.contextOptions.webglcontextlostCallback(t,this.contextOptions.params)},N.prototype.removeEventListener=function(t,e){if(t&&e){0,t.removeEventListener("webglcontextlost",e.contextLostHandler),t.removeEventListener("webglcontextrestored",e.contextRestoredHandler);var r=D.indexOf(this.canvasID);D.splice(r,1),l.delete(t)}},N.prototype.webGLContextRestoredCallback=function(t){T("webglcontextrestored event from canvas id: ".concat(this.canvasID)),this.reinit(),this.contextOptions&&this.contextOptions.webglcontextrestoredCallback&&this.contextOptions.webglcontextrestoredCallback(t,this.contextOptions.params)},N.prototype.webGLContextLostProtect=function(){this.canvasElement&&!this.canvasElement.loseContextExtension&&(this.canvasElement.loseContextExtension=R(this.contextGL,"WEBGL_lose_context"));var t=this.canvasElement,e=l.get(t);e&&this.removeEventListener(t,e),l.set(t,this),this.contextLostHandler=this.webgGLContextLostCallback.bind(this),this.contextRestoredHandler=this.webGLContextRestoredCallback.bind(this),t.addEventListener("webglcontextlost",this.contextLostHandler,{capture:!1}),t.addEventListener("webglcontextrestored",this.contextRestoredHandler,{capture:!1}),-1===D.indexOf(this.canvasID)&&(D.push(this.canvasID),D.length>4&&T("canvas listener size=".concat(D.length,", ids:").concat(D.join())))},N.prototype.isWebGL=function(){return this.contextGL},N.prototype.isAvaiable=function(){return this.contextGL&&!this.contextGL.isContextLost()&&this.contextGL.glInitSucceed},N.prototype.initContextGL=function(){for(var t,e,r=this.canvasElement,n=null,i=["webgl","experimental-webgl","moz-webgl","webkit-3d"],o=0;!n&&o<i.length;){var u=i[o];try{n=this.contextOptions?r.getContext(u,this.contextOptions):r.getContext(u)}catch(t){n=null}n&&"function"==typeof n.getParameter||(n=null),++o}(this.contextGL=n,n)?n.glInitSucceed=0:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;f?d.error(t,e):T(t,e)}("Failed when trying to get WebGLContext on canvas(".concat(null===(t=this.canvasElement)||void 0===t?void 0:t.width,",").concat(null===(e=this.canvasElement)||void 0===e?void 0:e.height,")"))},N.prototype.initProgram=function(){var t=this.contextGL,e=["attribute vec4 vertexPos;","attribute vec4 texturePos;","attribute vec4 masktexturePos;","varying vec2 textureCoord;","varying vec2 masktextureCoord;","void main()","{","gl_Position = vertexPos;","textureCoord = texturePos.xy;","masktextureCoord = masktexturePos.xy;","}"].join("\n"),r=["precision highp float;","varying highp vec2 textureCoord;","varying highp vec2 masktextureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","uniform sampler2D cursorSampler;","uniform sampler2D waterMarkSampler;","uniform sampler2D  previewVideoSampler;","uniform sampler2D maskSampler;","uniform vec4 cursorInfo;","uniform int onlyRGBA;","uniform int bgraMode;","uniform int colorRange;","uniform int waterMarkFlag;","uniform int cursorFlag;","uniform int maskFlag;","uniform int yuvmode;","const mat4 YUV2RGB_L = mat4","(","1.1643828125, 0, 1.59602734375, -.87078515625,","1.1643828125, -.39176171875, -.81296875, .52959375,","1.1643828125, 2.017234375, 0, -1.081390625,","0, 0, 0, 1",");","const mat4 YUV2RGB_F = mat4","(","1.0, 0, 1.402, -.701,","1.0, -.34413, -.71414, .529135,","1.0, 1.772, 0, -.886,","0, 0, 0, 1",");","void main(void) {","vec4 c;","if(waterMarkFlag!=1) {","if(onlyRGBA==0){","highp float y = texture2D(ySampler,  textureCoord).r;","highp float u;","highp float v;","if(yuvmode==1){","u = texture2D(uSampler,  textureCoord).r;","v = texture2D(vSampler,  textureCoord).r;","}","else{","u = texture2D(uSampler,  textureCoord).r;","v = texture2D(uSampler,  textureCoord).a;","}","if (colorRange == 0)","{","  c = vec4(y, u, v, 1) * YUV2RGB_L;","} else {","  c = vec4(y, u, v, 1) * YUV2RGB_F;","}","if(cursorFlag==1)","{","if (cursorInfo.z > 0.0 && textureCoord.x >= cursorInfo.x && textureCoord.y >= cursorInfo.y && ","    textureCoord.x < cursorInfo.x+cursorInfo.z && textureCoord.y < cursorInfo.y+cursorInfo.w ){"," vec2 cursorCoord = textureCoord - cursorInfo.xy;"," cursorCoord /= cursorInfo.zw;"," vec4 cursor = texture2D(cursorSampler, cursorCoord);"," c = c*(1.0-cursor.a) + cursor*cursor.a;","}","}","}","else{"," c = texture2D(previewVideoSampler, textureCoord);","if(bgraMode==1)","{"," c = vec4(c.b, c.g, c.r, c.a);","}","}","}","if(waterMarkFlag==1)","{"," c = texture2D(waterMarkSampler, textureCoord);","if(c.r == 0.0 && c.g == 0.0 && c.b == 0.0){"," c.a = 0.0;","}","}","if(maskFlag==1 && waterMarkFlag!=1)","{","vec4 mask = texture2D(maskSampler, masktextureCoord);","if(mask.r != 0.0 || mask.g != 0.0 || mask.b != 0.0){","c = mask* mask.a+ c*(1.0-mask.a);","}","}","if (waterMarkFlag!=1){","c.a = 1.0;","}","gl_FragColor = c;","}"].join("\n"),n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)||t.isContextLost()||console.log("Vertex shader failed to compile: "+t.getShaderInfoLog(n));var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)||t.isContextLost()||console.log("Fragment shader failed to compile: "+t.getShaderInfoLog(i));var o=t.createProgram();t.attachShader(o,n),t.attachShader(o,i),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||t.isContextLost()||console.log("Program failed to compile: "+t.getProgramInfoLog(o)),t.useProgram(o),this.shaderProgram=o},N.prototype.initBuffers=function(){var t=this.contextGL,e=this.shaderProgram,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1,1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW);var n=t.getAttribLocation(e,"vertexPos");t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),this.vertexPosBuffer=r;var i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1,1,0,0,0,1,1,0,1]),t.STATIC_DRAW);var o=t.getAttribLocation(e,"texturePos");if(t.enableVertexAttribArray(o),t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),this.initmask&&!this.masktexturePosBuffer){var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),t.STATIC_DRAW);var _=t.getAttribLocation(e,"masktexturePos");t.enableVertexAttribArray(_),t.vertexAttribPointer(_,2,t.FLOAT,!1,0,0),this.masktexturePosBuffer=u}this.texturePosBuffer=i},N.prototype.initTextures=function(t){var e=this.contextGL,r=this.shaderProgram;e.pixelStorei(e.UNPACK_ALIGNMENT,1);var n=this.initTexture();this.yTextureRef=n,this.oyTextureRef=n;var i=this.initTexture();this.uTextureRef=i,this.ouTextureRef=i;var u=this.initTexture();if(this.vTextureRef=u,this.ovTextureRef=u,t){this.BindTextures(o.VIDEO_I420);var _=this.initTexture(),a=e.getUniformLocation(r,"cursorSampler");e.uniform1i(a,this.textureindex*this.texturestride+3),this.cursorTextureRef=_;var E=this.initTexture(),s=e.getUniformLocation(r,"waterMarkSampler");e.uniform1i(s,4),this.waterMarkTextureRef=E;var c=this.initTexture();this.repeatedWaterMarkTextureRef=c;var d=this.initTexture(),f=e.getUniformLocation(r,"previewVideoSampler");e.uniform1i(f,this.textureindex*this.texturestride+5),this.previewVideoTextureRef=d;var T=e.getUniformLocation(r,"cursorInfo");this.cursorInfoRef=T}if(this.initmask){e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1);var h=this.initTexture(),R=e.getUniformLocation(r,"maskSampler");e.uniform1i(R,this.textureindex*this.texturestride+6),this.maskTextureRef=h}var O=e.getUniformLocation(r,"colorRange");this.colorRangeRef=O,this.onlyRGBARef=e.getUniformLocation(r,"onlyRGBA"),this.bgraModeRef=e.getUniformLocation(r,"bgraMode"),this.waterMarkFlagRef=e.getUniformLocation(r,"waterMarkFlag"),this.maskFlagRef=e.getUniformLocation(r,"maskFlag"),this.cursorFlagRef=e.getUniformLocation(r,"cursorFlag"),this.yuvmodeRef=e.getUniformLocation(r,"yuvmode")},N.prototype.BindTextures=function(t){var e=this.contextGL,r=this.shaderProgram;if(e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.activeTexture(e.TEXTURE0+0),e.bindTexture(e.TEXTURE_2D,this.yTextureRef),e.activeTexture(e.TEXTURE0+1),e.bindTexture(e.TEXTURE_2D,this.uTextureRef),e.activeTexture(e.TEXTURE0+2),e.bindTexture(e.TEXTURE_2D,this.vTextureRef),t==o.VIDEO_I420){var n=e.getUniformLocation(r,"ySampler");e.uniform1i(n,0);var i=e.getUniformLocation(r,"uSampler");e.uniform1i(i,1);var u=e.getUniformLocation(r,"vSampler");e.uniform1i(u,2)}else if(this.isRGBAMode(t)){var _=e.getUniformLocation(r,"previewVideoSampler");e.uniform1i(_,0);var a=e.getUniformLocation(r,"ySampler");e.uniform1i(a,0);var E=e.getUniformLocation(r,"uSampler");e.uniform1i(E,0);var s=e.getUniformLocation(r,"vSampler");e.uniform1i(s,0)}else if(t==o.VIDEO_NV12){var c=e.getUniformLocation(r,"ySampler");e.uniform1i(c,0);var d=e.getUniformLocation(r,"uSampler");e.uniform1i(d,1);var f=e.getUniformLocation(r,"vSampler");e.uniform1i(f,0)}var T=e.getUniformLocation(r,"previewVideoSampler");e.uniform1i(T,0);var h=e.getUniformLocation(r,"maskSampler");this.initmask?(e.activeTexture(e.TEXTURE0+6),e.bindTexture(e.TEXTURE_2D,this.maskTextureRef),e.uniform1i(h,6)):e.uniform1i(h,0);var R=e.getUniformLocation(r,"cursorSampler");e.uniform1i(R,0);var O=e.getUniformLocation(this.shaderProgram,"waterMarkSampler");e.uniform1i(O,0)},N.prototype.initTexture=function(){var t=this.contextGL,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_2D,null),e},N.prototype.clearDisplay=function(){var t=this.contextGL;t&&(t.enable(t.BLEND),t.blendFunc(t.ZERO,t.ZERO)),this.render()},N.prototype.cleanup=function(t){var e=this.canvasElement,r=l.get(e);if(r&&this.removeEventListener(e,r),e.defaultContextLostHandler||(e.defaultContextLostHandler=S,e.addEventListener("webglcontextlost",S,{capture:!1})),this.isAvaiable()){var n=this.contextGL;n.deleteProgram(this.program),n.activeTexture(n.TEXTURE0+this.textureindex*this.texturestride),n.bindTexture(n.TEXTURE_2D,null),n.activeTexture(n.TEXTURE1+this.textureindex*this.texturestride),n.bindTexture(n.TEXTURE_2D,null),n.activeTexture(n.TEXTURE2+this.textureindex*this.texturestride),n.bindTexture(n.TEXTURE_2D,null),this.textureindex||this.initmask||(n.activeTexture(n.TEXTURE3+this.textureindex*this.texturestride),n.bindTexture(n.TEXTURE_2D,null),n.activeTexture(n.TEXTURE4+this.textureindex*this.texturestride),n.bindTexture(n.TEXTURE_2D,null),n.activeTexture(this.getRepeatedWatermarkTextureValue(n)),n.bindTexture(n.TEXTURE_2D,null),n.activeTexture(n.TEXTURE5+this.textureindex*this.texturestride),n.bindTexture(n.TEXTURE_2D,null)),n.bindBuffer(n.ARRAY_BUFFER,null),n.deleteTexture(this.yTextureRef),n.deleteTexture(this.uTextureRef),n.deleteTexture(this.vTextureRef),this.textureindex||this.initmask||(n.deleteTexture(this.cursorTextureRef),n.deleteTexture(this.waterMarkTextureRef),n.deleteTexture(this.repeatedWaterMarkTextureRef),n.deleteTexture(this.previewVideoTextureRef),n.deleteBuffer(this.vertexPosBuffer),n.deleteBuffer(this.texturePosBuffer)),this.maskTextureRef&&n.deleteTexture(this.maskTextureRef),this.masktexturePosBuffer&&n.deleteBuffer(this.masktexturePosBuffer),n.glInitSucceed=0}},N.prototype.drawNextOutputPicture=function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=this.contextGL;o?this.drawNextOutputPictureFrame(t,e,r,n,i):this.drawNextOuptutPictureRGBA(t,e,r,n)},N.prototype.updateVertexInfoForMultiView=function(t,e,r,n,i){var o,u,_,a,E=this.contextGL;if(this.isUseFillMode({width:r,height:n,rotation:i}))o=0,u=0,_=1,a=1;else{var s=i==this.ROTATION_CLOCK90||i==this.ROTATION_CLOCK270?n:r,c=i==this.ROTATION_CLOCK90||i==this.ROTATION_CLOCK270?r:n,d=s/c*e;d>t?(o=0,_=1,a=1-(u=(e-c/s*t)/2/e)):(u=0,a=1,_=1-(o=(t-d)/2/t))}o=2*o-1,_=2*_-1,u=1-2*u,a=1-2*a;var f=new Float32Array([_,u,o,u,_,a,o,a,1,1,-1,1,1,-1,-1,-1]);E.bindBuffer(E.ARRAY_BUFFER,this.vertexPosBuffer),E.bufferData(E.ARRAY_BUFFER,f,E.DYNAMIC_DRAW)},N.prototype.updateTextureInfoForMultiView=function(t,e,r,n,o,u,_){var a,E,s,c,d=this.contextGL;if(this.isUseFillMode({width:r.width,height:r.height,rotation:n})){var f=n==this.ROTATION_CLOCK90||n==this.ROTATION_CLOCK270?_/u:u/_,T=r.left||0,h=r.top||0;if(r.width/r.height>f){var R=r.height*f;a=h/e,E=(Math.round((r.width-R)/2)+T)/t,s=a+(r.height-1)/e,c=E+R/t}else{var O=r.width/f;s=(a=(Math.round((r.height-O)/2)+h)/e)+(O-1)/e,c=(E=T/t)+r.width/t}}else a=I(r.top/e,2),E=I(r.left/t,2),s=A((r.top+r.height-1)/e,2),c=A((r.width-1+r.left)/t,2);var l=[E,a,c,a,c,s,E,s];n==this.ROTATION_CLOCK90&&(l.unshift(l[6],l[7]),l=l.slice(0,8)),n==this.ROTATION_CLOCK180&&(l.unshift(l[4],l[5],l[6],l[7]),l=l.slice(0,8)),n==this.ROTATION_CLOCK270&&(l.unshift(l[6],l[7]),(l=l.slice(0,8))[0]=1-l[0],l[2]=1-l[2],l[4]=1-l[4],l[6]=1-l[6]);var D=l[0],S=l[1];l[0]=l[2],l[1]=l[3],l[2]=D,l[3]=S,o&&(l[0]=1-l[0],l[2]=1-l[2],l[4]=1-l[4],l[6]=1-l[6]);var N=new Float32Array([].concat(i()(l),[1,0,0,0,1,1,0,1]));d.bindBuffer(d.ARRAY_BUFFER,this.texturePosBuffer),d.bufferData(d.ARRAY_BUFFER,N,d.DYNAMIC_DRAW)},N.prototype.drawNextOutputPictureFrame=function(t,e,r,n,i){var u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],_=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];if(this.isAvaiable()){var E=this.contextGL,s=(this.texturePosBuffer,this.yTextureRef),c=this.uTextureRef,d=this.vTextureRef;E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),i=i||this.ROTATION_CLOCK0;var f=(r=r||{top:0,left:0,width:t,height:e}).width!=this.croppingParams.width||r.height!=this.croppingParams.height,T=r.top!=this.croppingParams.top||r.left!=this.croppingParams.left,h=E.canvas.width!=this.canvasWidth||E.canvas.height!=this.canvasHeight,R=t!=this.textureWidth||e!=this.textureHeight,O=i!=this.picRotation;(f||h||O)&&C(this,r.width,r.height,i,_),(f||T||R||O)&&p(this,t,e,r,i);var A=u?0:1;A!=this.colorRange&&(E.uniform1i(this.colorRangeRef,A),this.colorRange=A),_?E.viewport(_.x,_.y,_.width,_.height):E.viewport(0,0,E.canvas.width,E.canvas.height),E.uniform1i(this.onlyRGBARef,0),E.uniform1i(this.yuvmodeRef,o.VIDEO_I420),Object.assign(this.croppingParams,r),this.textureWidth=t,this.textureHeight=e,this.picRotation=i,this.canvasWidth=E.canvas.width,this.canvasHeight=E.canvas.height,E.clearColor(this.bgColor[0],this.bgColor[1],this.bgColor[2],255),E.clear(E.COLOR_BUFFER_BIT);var I=n,l=t*e;if(E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,s),a){var D=I.subarray(0,l);E.texImage2D(E.TEXTURE_2D,0,E.LUMINANCE,t,e,0,E.LUMINANCE,E.UNSIGNED_BYTE,D)}var S=t/2*e/2;if(E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,c),a){var N=I.subarray(l,l+S);E.texImage2D(E.TEXTURE_2D,0,E.LUMINANCE,t/2,e/2,0,E.LUMINANCE,E.UNSIGNED_BYTE,N)}var m=S;if(E.activeTexture(E.TEXTURE2),E.bindTexture(E.TEXTURE_2D,d),a){var v=I.subarray(l+S,l+S+m);E.texImage2D(E.TEXTURE_2D,0,E.LUMINANCE,t/2,e/2,0,E.LUMINANCE,E.UNSIGNED_BYTE,v)}E.activeTexture(E.TEXTURE3),E.bindTexture(E.TEXTURE_2D,this.cursorTextureRef),this.hasCursor?E.uniform1i(this.cursorFlagRef,1):a&&E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,this.dummpyCursor),E.uniform4f(this.cursorInfoRef,this.cx,this.cy,this.cw,this.ch),E.activeTexture(E.TEXTURE5),E.bindTexture(E.TEXTURE_2D,this.previewVideoTextureRef),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,this.dummpyWaterMark);var U=E.getUniformLocation(this.shaderProgram,"maskSampler");E.uniform1i(U,5),this.render(),this.hasWholeFrame=1}},N.prototype.updateTextureBlock=function(t,e,r,n,i){if(this.isAvaiable()){var o=this.contextGL,u=i;if(!(!this.hasWholeFrame||t<=0||e<=0||r<0||n<0||r+t>this.textureWidth||n+e>this.textureHeight)&&i&&i.length==t*e*3/2){var _=this.yTextureRef,a=this.uTextureRef,E=this.vTextureRef,s=t*e,c=u.subarray(0,s);o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,_),o.texSubImage2D(o.TEXTURE_2D,0,r,n,t,e,o.LUMINANCE,o.UNSIGNED_BYTE,c);var d=t/2*e/2,f=u.subarray(s,s+d);o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,a),o.texSubImage2D(o.TEXTURE_2D,0,r/2,n/2,t/2,e/2,o.LUMINANCE,o.UNSIGNED_BYTE,f);var T=d,h=u.subarray(s+d,s+d+T);o.activeTexture(o.TEXTURE2),o.bindTexture(o.TEXTURE_2D,E),o.texSubImage2D(o.TEXTURE_2D,0,r/2,n/2,t/2,e/2,o.LUMINANCE,o.UNSIGNED_BYTE,h)}}},N.prototype.updateCursor=function(t,e,r){if(this.isAvaiable()){var n=this.contextGL;t<=0||e<=0||!r||r.length!=t*e*4||(n.activeTexture(n.TEXTURE3),n.bindTexture(n.TEXTURE_2D,this.cursorTextureRef),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,e,0,n.RGBA,n.UNSIGNED_BYTE,r),this.cursorWidth=t,this.cursorHeight=e,this.hasCursor=1)}},N.prototype.updateWatermark=function(t,e,r){if(this.isAvaiable()){this.contextGL;t<=0||e<=0||!r||r.length!=t*e*4||(this.watermarkData=r,this.watermarkWidth=t,this.watermarkHeight=e,this.hasWaterMark=1)}},N.prototype.drawWatermark=function(){if(this.isAvaiable()){var t=this.contextGL;if(this.isSetWatermark()&&this.watermarkData&&this.watermarkWidth&&this.watermarkHeight){t.uniform1i(this.waterMarkFlagRef,1),this.isWatermarkRepeated()?(t.activeTexture(this.getRepeatedWatermarkTextureValue(t)),t.bindTexture(t.TEXTURE_2D,this.repeatedWaterMarkTextureRef)):(t.activeTexture(t.TEXTURE4),t.bindTexture(t.TEXTURE_2D,this.waterMarkTextureRef)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.watermarkWidth,this.watermarkHeight,0,t.RGBA,t.UNSIGNED_BYTE,this.watermarkData);var e=t.getUniformLocation(this.shaderProgram,"waterMarkSampler");t.uniform1i(e,this.isWatermarkRepeated()?this.getRepeatedWatermarkUniformValue():4),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.drawArrays(t.TRIANGLE_STRIP,4,4)}}},N.prototype.render=function(){if(this.isAvaiable()){var t=this.contextGL;t.uniform1i(this.waterMarkFlagRef,0),t.drawArrays(t.TRIANGLE_STRIP,0,4),this.drawWatermark()}},N.prototype.drawCursor=function(t,e,r,n,i){if(this.isAvaiable()){var o=this.contextGL;if(!(!this.hasWholeFrame||t&&(n<0||i<0))){o.viewport(0,0,o.canvas.width,o.canvas.height);var u=this.yTextureRef,_=this.uTextureRef,a=this.vTextureRef,E=this.cursorTextureRef;if(o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,u),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,_),o.activeTexture(o.TEXTURE2),o.bindTexture(o.TEXTURE_2D,a),o.activeTexture(o.TEXTURE3),o.bindTexture(o.TEXTURE_2D,E),t&&this.hasCursor){var s=e/this.croppingParams.width,c=r/this.croppingParams.height,d=n/this.croppingParams.width,f=i/this.croppingParams.height;this.cx=s,this.cy=c,this.cw=d,this.ch=f,o.uniform4f(this.cursorInfoRef,s,c,d,f)}else o.uniform4f(this.cursorInfoRef,0,0,0,0);this.render()}}},N.prototype.clear=function(){this.hasWholeFrame=0,this.hasCursor=0},N.prototype.clearCanvas=function(t){if(this.isAvaiable()){var e=this.contextGL;t?e.clearColor(t.R,t.G,t.B,t.A):e.clearColor(this.bgColor[0],this.bgColor[1],this.bgColor[2],255),e.clear(e.COLOR_BUFFER_BIT)}},N.prototype.drawNextOuptutPictureRGBA=function(t,e,r,n){if(this.isAvaiable()){var i=n,o=this.canvasElement.getContext("2d"),u=o.getImageData(0,0,t,e);u.data.set(i),o.putImageData(u,0,0)}},N.prototype.isRGBAMode=function(t){return-1!==[o.VIDEO_RGBA,o.VIDEO_BGRA].indexOf(t)},N.prototype.updateRemoteVideoTextures=function(t,e,r,n,i){var u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],_=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];if(this.isAvaiable()){var a=this.contextGL,E=this.yTextureRef,s=this.uTextureRef,c=this.vTextureRef;a.enable(a.BLEND),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);var d=this.isRGBAMode(this.videoMode);if(t<=0||e<=0||!n||!n.length||n.length!=t*e*3/2&&!d||r&&(r.top<0||r.left<0||r.left+r.width>t||r.top+r.height>e))return!1;var f=u?0:1;if(this.colorRange=f,this.rotation=i,Object.assign(this.croppingParams,r),this.textureWidth=t,this.textureHeight=e,this.canvasWidth=a.canvas.width,this.canvasHeight=a.canvas.height,_){if(a.bindTexture(a.TEXTURE_2D,E),!d){var T=n,h=t*e,R=T.subarray(0,h);a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,t,e,0,a.LUMINANCE,a.UNSIGNED_BYTE,R);var O=0,A=0;this.videoMode==o.VIDEO_I420?A=O=t/2*e/2:this.videoMode==o.VIDEO_NV12&&(O=t*e/2,A=0);var I=T.subarray(h,h+O);if(a.bindTexture(a.TEXTURE_2D,s),A){a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,t/2,e/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,I);var l=T.subarray(h+O,h+O+A);a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,t/2,e/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,l)}else a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE_ALPHA,t/2,e/2,0,a.LUMINANCE_ALPHA,a.UNSIGNED_BYTE,I);return!0}a.texImage2D(a.TEXTURE_2D,0,a.RGBA,t,e,0,a.RGBA,a.UNSIGNED_BYTE,n)}}},N.prototype.updateRemoteVideoTexturesImageBitmap=function(t,e,r,n,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t<=0||e<=0)&&r&&this.isAvaiable()){var u=this.contextGL;if(this.textureWidth=t,this.textureHeight=e,Number.isNaN(i)||(this.rotation=i),Object.assign(this.croppingParams,n),o){u.bindTexture(u.TEXTURE_2D,this.yTextureRef);var _=0,a=u.RGBA,E=u.RGBA,s=u.UNSIGNED_BYTE;u.texImage2D(u.TEXTURE_2D,_,a,E,s,r)}}},N.prototype.updateSelfMaskImage=function(t,e,r){if(!(t<=0||e<=0)&&r&&r.length==t*e*4&&this.isAvaiable()){var n=this.contextGL;n.bindTexture(n.TEXTURE_2D,this.maskTextureRef),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,e,0,n.RGBA,n.UNSIGNED_BYTE,r)}},N.prototype.VideoFlip=function(){if(this.isAvaiable()){var t=this.contextGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1)}},N.prototype.drawRemoteVideo=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isAvaiable()){var r=this.contextGL,n=this.isRGBAMode(this.videoMode)?1:0;r.uniform1i(this.colorRangeRef,this.colorRange),this.setUniformFlag(n,this.hasCursor,this.videoMode),this.initmask&&r.uniform1i(this.maskFlagRef,1),this.updateTextureInfoForMultiView(this.textureWidth,this.textureHeight,this.croppingParams,this.rotation,e,t.width,t.height),r.viewport(t.x,t.y,t.width,t.height),this.updateVertexInfoForMultiView(t.width,t.height,this.croppingParams.width,this.croppingParams.height,this.rotation),this.BindTextures(this.videoMode),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),this.render()}},N.prototype.readPixelsSyncRequest=function(t,e,r,n){if(this.isAvaiable()){var i,o=this.contextGL;return this.destination&&this.destination.length==r*n*4||(this.destination=new Uint8Array(r*n*4)),i=this.destination,o.flush(),o.readPixels(t,e,r,n,o.RGBA,o.UNSIGNED_BYTE,i),i}},N.prototype.updateSelfVideoTextures=function(t,e,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(!(t<=0||e<=0)&&r&&r.length%4==0&&this.isAvaiable()){var o=this.contextGL;this.textureWidth=t,this.textureHeight=e,this.rotation=this.ROTATION_CLOCK0,Object.assign(this.croppingParams,n),i&&(o.bindTexture(o.TEXTURE_2D,this.yTextureRef),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,t,e,0,o.RGBA,o.UNSIGNED_BYTE,r))}},N.prototype.drawSelfVideo=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.isAvaiable()){var n=this.contextGL;this.setUniformFlag(1,this.hasCursor,this.videoMode),this.updateTextureInfoForMultiView(this.textureWidth,this.textureHeight,this.croppingParams,this.rotation,r,t.width,t.height),n.viewport(t.x,t.y,t.width,t.height),e?(n.enable(n.BLEND),n.blendFunc(n.ZERO,n.ZERO),this.updateVertexInfoForMultiView(t.width,t.height,t.width,t.height,this.ROTATION_CLOCK0)):(n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),this.updateVertexInfoForMultiView(t.width,t.height,this.croppingParams.width,this.croppingParams.height,this.rotation)),this.BindTextures(o.VIDEO_RGBA),this.render()}},N.prototype.isSetWatermark=function(){return this.hasWaterMark},N.prototype.recoverTextures=function(){},N.prototype.setWatermarkFlag=function(t){this.hasWaterMark=t,t||(this.setWatermarkRepeated(!1),this.setWatermarkOpacity(),this.setWatermarkPosition(16))},N.prototype.setUniformFlag=function(t,e,r){if(this.isAvaiable()){var n=this.contextGL;n.uniform1i(this.onlyRGBARef,t),n.uniform1i(this.bgraModeRef,t&&r===o.VIDEO_BGRA?1:0),n.uniform1i(this.cursorFlagRef,e),t||n.uniform1i(this.yuvmodeRef,r)}},N.prototype.setVideoMode=function(t){this.videoMode=t},N.prototype.getVideoMode=function(t){return this.videoMode},N.prototype.setWatermarkRepeated=function(t){this.watermarkRepeated=t},N.prototype.isWatermarkRepeated=function(){return!!this.watermarkRepeated},N.prototype.setWatermarkOpacity=function(t){this.watermarkOpacity=t||.15},N.prototype.getWatermarkOpacity=function(){return this.watermarkOpacity},N.prototype.setWatermarkPosition=function(t){this.watermarkPosition=t||16},N.prototype.getWatermarkPosition=function(){return this.watermarkPosition},N.prototype.setMultiView=function(t){return this.isMultiView=t},N.prototype.getRepeatedWatermarkUniformValue=function(){return this.isMultiView?30:7},N.prototype.getRepeatedWatermarkTextureValue=function(t){return this.isMultiView?t.TEXTURE30:t.TEXTURE7},N.prototype.setFillMode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.fillMode=t,this.fillModeForResolution=e},N.prototype.getFillMode=function(){return this.fillMode},N.prototype.getFillModeForResolution=function(){return this.fillModeForResolution},N.prototype.getTextureIndex=function(){return this.textureindex},N.prototype.getTextureWidth=function(){return this.textureWidth},N.prototype.getTextureHeight=function(){return this.textureHeight},N.prototype.getCroppingParams=function(){return this.croppingParams},N.prototype.getIndex=function(){return this.textureindex},N.prototype.getWatermarkWidth=function(){return this.watermarkWidth},N.prototype.getWatermarkHeight=function(){return this.watermarkHeight},N.prototype.getWatermarkOpacity=function(){return this.watermarkOpacity},N.prototype.getAttachedCanvas=function(){return this.canvasElement},N.prototype.resizeCanvasTo=function(t,e){this.contextGL.canvas.width=t,this.contextGL.canvas.height=e},N.prototype.isUseFillMode=function(t){var e=t.width,r=t.height,n=t.rotation;if(!this.fillMode)return!1;if(!this.fillModeForResolution)return!0;if(!e||!r)return!1;var i=n===this.ROTATION_CLOCK90||n==this.ROTATION_CLOCK270?r/e:e/r;return(Array.isArray(this.fillModeForResolution)?this.fillModeForResolution:[this.fillModeForResolution]).some((function(t){return Math.abs(i-t)<.01}))};e.default=N}]).default}));
//# sourceMappingURL=https://d1cdksi819e9z7.cloudfront.net/sourcemap/vb.min.js-72facd073de83b5da057.map